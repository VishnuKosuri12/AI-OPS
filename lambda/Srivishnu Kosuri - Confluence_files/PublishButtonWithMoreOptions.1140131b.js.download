function e(e){return e&&e.__esModule?e.default:e}function t(e,t,n,o){Object.defineProperty(e,t,{get:n,set:o,enumerable:!0,configurable:!0})}var n=globalThis.parcelRequired477,o=n.register;o("6cfXd",function(t,o){var r=n("42omo"),i=n("b3j2Y"),a=n("aJv6Q"),s=n("hSqtY");let l=(0,n("cgtv4").defineMessages)({header:{id:"confluence-recap.publish-spotlight.header",defaultMessage:"Ready to share?"},body:{id:"confluence-recap.publish-spotlight.body",defaultMessage:"Click publish so your team can see what you accomplished together!"},primaryAction:{id:"confluence-recap.publish-spotlight.primary-action",defaultMessage:"Got it"}}),u={wikiContentOverride:"_11c8140y"},c=({children:t,onDismiss:o})=>{let{createAnalyticsEvent:i}=(0,n("inPa6").useAnalyticsEvents)(),{PopoverContent:a}=(0,n("lsxnT").useChoreographerAssets)(),{setOnboardingState:s}=(0,n("ivb8S").useSetOnboardingState)(),[c,d]=(0,r.useState)(!1),p=(0,r.useCallback)((e,t,n)=>{i({type:"sendUIEvent",data:{action:e,actionSubject:t,actionSubjectId:`confluenceRecapPublishSpotlight${n??""}`,source:"confluenceRecapPublishSpotlight"}}).fire()},[i]),m=(0,r.useCallback)(()=>{p("clicked","button","CTA"),d(!0),o?.()},[p,o]),E=(0,r.useCallback)(()=>{p("clicked","button","Dismiss"),d(!0),o?.()},[p,o]);return c?e(r).createElement(e(r).Fragment,null,t):e(r).createElement(n("k7Tf7").PopoverProvider,null,e(r).createElement(n("a90ar").PopoverTarget,null,t),e(r).createElement(n("8tIbq").UNSAFE_UpdateOnChange,null),e(r).createElement(a,{messageId:"confluence-recap-publish-spotlight",messageType:"engagement",dismiss:E,placement:"bottom-end",offset:[-16,11],isVisible:!c,onMessageDisposition:e=>{"started"===e&&(i({type:"sendScreenEvent",data:{name:"ConfluenceRecapPublishSpotlight",attributes:{source:"PublishButton"}}}).fire(),s({key:n("fsF73").CONFLUENCE_RECAP_ONBOARDING_STATE_KEYS.HAS_SEEN_PUBLISH_SPOTLIGHT,value:new Date().toISOString()}),(0,n("cbc8g").addUFOCustomData)({confluenceRecapSpotlightDisplayed:!0}))}},e(r).createElement(n("71521").SpotlightCard,{testId:"confluence-recap-publish-spotlight"},e(r).createElement(n("aZQ5F").SpotlightHeader,null,e(r).createElement(n("bUJpY").SpotlightHeadline,null,e(r).createElement("span",{className:(0,n("gMc0m").default)([u.wikiContentOverride])},e(r).createElement(n("gtD4K").default,l.header))),e(r).createElement(n("aVS0S").SpotlightControls,null,e(r).createElement(n("2owmo").SpotlightDismissControl,{onClick:E,autoFocus:!1}))),e(r).createElement(n("f1UQW").SpotlightBody,null,e(r).createElement(n("iXCQx").default,null,e(r).createElement(n("gtD4K").default,l.body))),e(r).createElement(n("eopLP").SpotlightFooter,null,e(r).createElement(n("3chlW").SpotlightActions,null,e(r).createElement(n("fNcP1").SpotlightPrimaryAction,{onClick:m},e(r).createElement(n("gtD4K").default,l.primaryAction)))))))},d=t=>e(r).createElement(s.TransparentErrorBoundary,{attribution:n("3IBnw").Attribution.FLYWHEEL_ACTIVATION},e(r).createElement(c,t));var p=n("6cfXd"),m=n("32CBT");function E(e){e?.();let t=async()=>await (async()=>{let e=(0,n("4JHZe").beforePreloaderAsyncCall)(),t=await {};return(0,n("4JHZe").afterPreloaderAsyncCall)(e),t})(),o=async()=>await (async()=>{let e=(0,n("4JHZe").beforePreloaderAsyncCall)(),t=await {};return(0,n("4JHZe").afterPreloaderAsyncCall)(e),t})();m.PublishModal.preload(),t(),o()}let g=(0,n("cgtv4").defineMessages)({publishButtonTooltip:{id:"publish-modal.default-publish-button-tooltip",defaultMessage:"Select and confirm publish settings"}}),f=({saveDraft:t,openModalWithAnalytics:o,savingInProgress:i,publishButtonDisabled:a})=>{let s=(0,n("4tOXV").useShortcutStrings)({shortcut:n("gnkil").EDITOR2_SHORTCUTS.PUBLISH,isEditorShortcut:!0});return e(r).createElement(n("3gadb").default,{component:p.WideTooltip,content:(0,n("9wGTI").fg)("platform_tooltip_shortcuts_migration_1")?e(r).createElement(n("gtD4K").default,g.publishButtonTooltip):e(r).createElement(p.TooltipText,null,e(r).createElement(n("gtD4K").default,g.publishButtonTooltip),e(r).createElement(n("4tOXV").ShortcutVisualizer,{shortcut:n("gnkil").EDITOR2_SHORTCUTS.PUBLISH,isEditorShortcut:!0,isTooltip:!0})),shortcut:(0,n("9wGTI").fg)("platform_tooltip_shortcuts_migration_1")?s:void 0},e(r).createElement(n("5izcQ").default,{name:"publish-button"},e(r).createElement(n("9YwaJ").default,{appearance:"primary",onMouseDown:()=>E(t),onMouseEnter:()=>E(t),onFocus:()=>E(t),onClick:o("PublishModalPublishMoreActionsButton"),testId:"publish-button",isLoading:i,isDisabled:a},e(r).createElement(n("gtD4K").default,n("lACKt").i18nShared.publishButton))))},b=(0,n("jmjWc").LoadableLazy)({__loadable_id__:"QeS6p",name:"PublishHubDialogLoadable",loader:async()=>(await n("5xD7y")).PublishHubDialog}),h=(0,n("cgtv4").defineMessages)({updateButtonTooltip:{id:"publish-modal.update-button-tooltip",defaultMessage:"Update with current settings"},updateWithoutNotifyMenuItem:{id:"publish-modal.update-dropdown.update-without-notify",defaultMessage:"Update without notifying watchers"},adjustSettingsMenuItem:{id:"publish-modal.update-dropdown.adjust-settings",defaultMessage:"Adjust update settings"},updateButtonTooltipCompanyHub:{id:"publish-modal.update-button-tooltip-for-system-space",defaultMessage:"Update landing page"},publishButtonTooltipCompanyHub:{id:"publish-modal.publish-button-tooltip-for-system-space",defaultMessage:"Publish landing page"},publishButtonDisabledTooltipCompanyHub:{id:"publish-modal.publish-button-disabled-tooltip-company-hub",defaultMessage:"Only admins can publish at this time - your changes have been saved."},publishButtonCompanyHub:{id:"publish-modal.publish-button-for-system-space",defaultMessage:"Publish"}}),S=(0,r.forwardRef)(function({children:t,...o},i){return e(r).createElement(n("afneb").default,{...o,ref:i,"data-testid":"tooltipcustomization",className:(0,n("gMc0m").default)(["_11q71aqn _1yt41ppf _2rkofajl _11c81o8v _syaz15cr _vchhusvi _p12f1mjv _154iidpf _1ltvidpf _1i4q1hna _slp31hna"])},t)}),_=({openModal:t,publishButtonDisabled:o,children:i})=>t?e(r).createElement(n("9gE7g").SplitButton,{appearance:"primary",isDisabled:o},i):e(r).createElement(e(r).Fragment,null,i),T=({publishButtonDisabled:t,shortcutIsEnabled:o,openModal:i,saveDraft:a,flags:s,savingInProgress:l,shouldShowWorldIcon:u,contentType:c,isUnpublishedDraft:d,onHoverPublish:p})=>{let[m,g]=(0,r.useState)(!1),f=(0,n("8C5kA").default)(),[T]=(0,n("ep3mz").usePageSpaceKey)(),{handlePublish:I}=(0,n("8G6ap").usePublishModalActions)(),C=(0,n("4tOXV").useShortcutStrings)({shortcut:n("gnkil").EDITOR2_SHORTCUTS.PUBLISH}),y=(0,n("cEgMD").isCompanyHubSpaceKey)(T),{canPublish:P,isCompanyHubPublished:A}=(0,n("7CeAz").useIsCompanyHubEnabled)(),v=y&&!A&&!P;t||(t=v);let D=(0,n("3jwuS").useIsCurrentPageLive)(),{retrieveEditorTitleAndContent:R}=(0,r.useContext)(n("ibgjl").PublishModalContext),[O]=(0,n("ep3mz").usePageContentId)(),{isAIEnabledForContent:M}=(0,n("7mpOv").useIsAIEnabledForContent)({contentId:O}),N=(0,r.useCallback)(async(e="shortcut",t="UpdateSplitButton",o)=>{let r="button"!==e?n("1C3B1").EDITOR_UPDATE_SHORTCUT_KEY_PRESS:n("1C3B1").EDITOR_UPDATE_BUTTON_CLICK;c&&"page"===c&&(0,n("lXYVJ").setViewTransitionSource)(r);let{title:i}=await R(),a=!i;a?await (0,n("jVFPV").displayPublishErrorFlag)({isTitleEmpty:a,validationMessage:n("c6abH").PublishErrorFlagKeys.TITLE_IS_BLANK,flags:s,formatMessage:f.formatMessage,publish:()=>N(e,"UpdateButtonTitleGenFlag",o),isAIEnabledForContent:M,isLivePage:D}):y&&!A?g(!0):I({analyticsSource:t,shouldNotifyOverride:o})},[s,f.formatMessage,I,c,y,A,M,R,D]),x=async()=>{await N("button")},w=async()=>{await N("button",void 0,!1)},B=(0,r.useRef)(null);(0,r.useEffect)(()=>()=>{B.current&&window.clearTimeout(B.current)},[]);let L=(0,r.useCallback)(()=>{B.current&&window.clearTimeout(B.current),B.current=window.setTimeout(()=>{p?.()},250)},[p]),U=(0,r.useCallback)(()=>{B.current&&window.clearTimeout(B.current)},[]),F=()=>y?v?f.formatMessage(h.publishButtonDisabledTooltipCompanyHub):A?f.formatMessage(h.updateButtonTooltipCompanyHub):f.formatMessage(h.publishButtonTooltipCompanyHub):f.formatMessage(h.updateButtonTooltip),{createAnalyticsEvent:k}=(0,n("inPa6").useAnalyticsEvents)(),H=o=>e(r).createElement(n("3gadb").default,{content:f.formatMessage((0,n("9wGTI").fg)("confluence_frontend_content_wrapper")?n("lACKt").i18nShared.chevronButtonTooltipObjectHeader:n("lACKt").i18nShared.chevronButtonTooltip)},e(r).createElement(n("1qfLF").default,{...o,isDisabled:t,icon:t=>e(r).createElement(e(n("ghftu")),{...t,size:"small"}),label:f.formatMessage((0,n("9wGTI").fg)("confluence_frontend_content_wrapper")?n("lACKt").i18nShared.chevronButtonTooltipObjectHeader:n("lACKt").i18nShared.chevronButtonTooltip),testId:"publish-modal-chevron-button",onMouseEnter:()=>E(a),onFocus:()=>E(a),onClick:e=>{o.onClick(e),(0,n("9wGTI").fg)("confluence_frontend_content_wrapper")&&k({type:"sendUIEvent",data:{action:"clicked",actionSubject:"button",actionSubjectId:"PublishModalChevronButton",source:"UpdateSplitButton"}}).fire()}}));return e(r).createElement(n("bUlM5").default,{testId:"update-split-container"},o&&!t&&e(r).createElement(n("bflGB").ShortcutListener,{key:n("c6abH").SHORTCUT_KEYS.USB1,accelerator:n("gnkil").EDITOR2_SHORTCUTS.PUBLISH,listener:()=>N()}),e(r).createElement(_,{openModal:i,publishButtonDisabled:t},e(r).createElement(n("3gadb").default,{tag:"span",component:S,content:(0,n("9wGTI").fg)("platform_tooltip_shortcuts_migration_1")?F():e(r).createElement(n("4tOXV").ShortcutVisualizer,{shortcut:n("gnkil").EDITOR2_SHORTCUTS.PUBLISH,contentBefore:F(),isTooltip:!0}),shortcut:(0,n("9wGTI").fg)("platform_tooltip_shortcuts_migration_1")?C:void 0},e(r).createElement(n("lu0E4").PreloadButtonWrapper,{isPublish:!1,contentId:O??"",spaceKey:T??"",contentType:c??"",isUnpublishedDraft:d??!1},e(r).createElement(n("ccHMk").default,{appearance:"primary",onMouseEnter:L,onMouseLeave:U,onClick:x,isDisabled:t,testId:"publish-modal-update-button",iconBefore:u?()=>e(r).createElement(e(n("buthI")),{label:f.formatMessage(n("lACKt").i18nShared.updatePublicContentLabel),color:"var(--ds-icon-inverse, #FFFFFF)"}):void 0,isLoading:l,interactionName:"publish-page-update"},y&&!A?f.formatMessage(h.publishButtonCompanyHub):f.formatMessage(n("lACKt").i18nShared.updateButton)))),i&&((0,n("9wGTI").fg)("confluence_frontend_content_wrapper")?e(r).createElement(n("52EPl").default,{placement:"bottom-end",trigger:({triggerRef:e,...t})=>H({ref:e,...t})},e(r).createElement(n("ahaN7").default,null,e(r).createElement(n("dAYOx").default,{onClick:w},f.formatMessage(h.updateWithoutNotifyMenuItem)),e(r).createElement(n("dAYOx").default,{onClick:i,testId:"update-dropdown-item-open-publish-modal"},f.formatMessage(h.adjustSettingsMenuItem)))):H({onClick:i}))),m&&e(r).createElement(b,{onClose:()=>g(!1),onPublish:I,savingInProgress:l}))},I=(0,n("cgtv4").defineMessages)({schedulePublishButtonTooltip:{id:"publish-modal.publish-modal-schedule-publish-button-tooltip",defaultMessage:"Adjust publish schedule and more"},scheduleUpdateButtonTooltip:{id:"publish-modal.publish-modal-schedule-update-button-tooltip",defaultMessage:"Adjust update schedule and more"},scheduledIcon:{id:"publish-modal.schedule-publish-icon",defaultMessage:"Publish is scheduled for a future time"},scheduledPublishButton:{id:"publish-modal.scheduled-publish-button",defaultMessage:"Scheduled"},schedulePublicContentLabel:{id:"publish-modal.public-schedule-publish-icon",defaultMessage:"Public content is scheduled to publish at a future time"}}),C=({saveDraft:t,openModalWithAnalytics:o,savingInProgress:i,isUnpublishedDraft:a,shouldShowWorldIcon:s,publishButtonDisabled:l})=>{let u=(0,n("8C5kA").default)(),c=(0,n("4tOXV").useShortcutStrings)({shortcut:n("gnkil").EDITOR2_SHORTCUTS.PUBLISH}),d=a?u.formatMessage(I.schedulePublishButtonTooltip):u.formatMessage(I.scheduleUpdateButtonTooltip);return e(r).createElement(n("3gadb").default,{component:p.WideTooltip,content:(0,n("9wGTI").fg)("platform_tooltip_shortcuts_migration_1")?d:e(r).createElement(p.TooltipText,null,e(r).createElement("span",null,d),e(r).createElement(n("4tOXV").ShortcutVisualizer,{shortcut:n("gnkil").EDITOR2_SHORTCUTS.PUBLISH,isTooltip:!0})),shortcut:(0,n("9wGTI").fg)("platform_tooltip_shortcuts_migration_1")?c:void 0},e(r).createElement(n("4KS7f").default,{appearance:"primary",onMouseDown:()=>E(t),onMouseOver:()=>E(t),onFocus:()=>E(t),onClick:o("ScheduledButton"),testId:"scheduled-button",iconBefore:s?e(r).createElement(e(n("buthI")),{spacing:"spacious",label:u.formatMessage(I.schedulePublicContentLabel)}):e(r).createElement(e(n("kevJM")),{label:u.formatMessage(I.scheduledIcon)}),isLoading:i,isDisabled:l},e(r).createElement(n("gtD4K").default,I.scheduledPublishButton)))};var y=n("4f2ij");let P=(0,r.forwardRef)(function({children:t,...o},i){return e(r).createElement(n("afneb").default,{...o,ref:i,className:(0,n("gMc0m").default)(["_11q71aqn _2rkofajl _11c81o8v _1yt41ppf _syaz15cr _p12f1edt"])},t)}),A=(0,a.withErrorBoundary)({attribution:n("3IBnw").Attribution.PAGE_MODES})((0,n("ibgjl").withPublishModalContextProvider)(({publishButtonDisabled:t,title:o,userViewingPreview:a,isUnpublishedDraft:s,flags:l,saveDraft:u,contentType:c,savingInProgress:p,shouldShowWorldIcon:m,shouldShowFooterButtons:E=!0,onHoverPublish:g})=>{let[b]=(0,n("ep3mz").usePageContentId)(),{currentlyScheduledPublishDate:h,setExpanded:S,retrieveEditorTitleAndContent:_,graphqlError:I,restrictionsGraphQLError:P}=(0,r.useContext)(n("ibgjl").PublishModalContext),{handlePreview:A}=(0,n("8G6ap").usePublishModalActions)(),[v,D]=(0,r.useState)(!1),R=(0,n("l7iY7").useRecapSpotlightEligibility)(s),[O,M]=(0,r.useState)(void 0),[N,x]=(0,r.useState)(!0),w=(0,n("1pSma").default)("publish-modal-button"),B=(0,r.useMemo)(()=>{let e=e=>{if(e)return(0,n("6fil2").containsNetworkError)(e)||(0,n("1uFM6").isUnauthorizedError)(e)?void(0,n("7Sm4c").markErrorAsHandled)(e):e};return I?e(I):P?e(P):void 0},[P,I]),L=(0,n("1N2OF").usePrePublishTitleValidation)({contentId:b,contentType:c,isUnpublishedDraft:s,flags:l,retrieveEditorTitleAndContent:_,onBeforeValidation:(0,r.useCallback)(()=>{u?.()},[u]),onValidationSuccess:(0,r.useCallback)(()=>{(0,n("6mKj3").expValEquals)("confluence_publish_modal_press_tracing","isEnabled",!0)&&w(),x(!1),D(!0)},[w]),analyticsSource:"PublishButtonWithMoreOptions"}),U=(0,r.useCallback)(()=>{D(!1),x(!0)},[]),[F]=(0,n("ep3mz").usePageSpaceKey)();return e(r).createElement(r.Fragment,null,(()=>{if(s||h){let o=R?e(r).createElement(d,null,e(r).createElement(f,{saveDraft:u,openModalWithAnalytics:L,savingInProgress:p,publishButtonDisabled:t})):e(r).createElement(f,{saveDraft:u,openModalWithAnalytics:L,savingInProgress:p,publishButtonDisabled:t});return e(r).createElement(r.Fragment,null,h?e(r).createElement(C,{saveDraft:u,openModalWithAnalytics:L,savingInProgress:p,isUnpublishedDraft:s,shouldShowWorldIcon:m,publishButtonDisabled:t}):o,N&&!p&&e(r).createElement(e(r).Fragment,null,e(r).createElement(n("bflGB").ShortcutListener,{key:n("c6abH").SHORTCUT_KEYS.PBWMO3,accelerator:n("gnkil").EDITOR2_SHORTCUTS.PUBLISH,listener:L(h?"ScheduledButton":"PublishModalPublishMoreActionsButton")}),e(r).createElement(n("bflGB").ShortcutListener,{key:n("c6abH").SHORTCUT_KEYS.PBWMO4,accelerator:n("gnkil").EDITOR2_SHORTCUTS.PUBLISH_WITH_COMMENT,listener:()=>{M("version comment"),S(!0),L(h?"ScheduledButton":"PublishModalPublishMoreActionsButton")()}}),e(r).createElement(n("bflGB").ShortcutListener,{key:n("c6abH").SHORTCUT_KEYS.PBWMO5,accelerator:n("gnkil").EDITOR2_SHORTCUTS.PREVIEW,listener:()=>A({analyticsSource:"KeyboardShortcut",isUnpublishedDraft:s})})))}{let o=(0,n("cEgMD").isCompanyHubSpaceKey)(F)?void 0:L("PublishModalChevronButton");return e(r).createElement(e(r).Fragment,null,e(r).createElement(T,{openModal:o,publishButtonDisabled:t,shortcutIsEnabled:N,saveDraft:u,flags:l,savingInProgress:p,shouldShowWorldIcon:m,contentType:c,isUnpublishedDraft:s,onHoverPublish:g}),N&&!p&&e(r).createElement(e(r).Fragment,null,!t&&o&&e(r).createElement(n("bflGB").ShortcutListener,{key:n("c6abH").SHORTCUT_KEYS.PBWMO1,accelerator:n("gnkil").EDITOR2_SHORTCUTS.PUBLISH_WITH_COMMENT,listener:()=>{M("version comment"),o()}}),e(r).createElement(n("bflGB").ShortcutListener,{key:n("c6abH").SHORTCUT_KEYS.PBWMO2,accelerator:n("gnkil").EDITOR2_SHORTCUTS.PREVIEW,listener:()=>A({analyticsSource:"KeyboardShortcut",isUnpublishedDraft:s})})))}})(),v&&e(r).createElement(y.PublishModalDialogs,{isUnpublishedDraft:s,contentType:c,title:o,publishButtonDisabled:t,userViewingPreview:a,initialFocusTarget:O,shouldShowWorldIcon:m,shouldShowFooterButtons:E,onPublishModalComplete:U,onHoverPublish:g}),B&&e(r).createElement(i.ErrorDisplay,{error:B}))}));t.exports.WideTooltip=P,t.exports.TooltipText=({children:t})=>e(r).createElement("div",{className:(0,n("gMc0m").default)(["_zulpv77o _1e0c1txw _4cvr1h6o"])},t),t.exports.PublishButtonWithMoreOptions=A}),o("k7Tf7",function(e,t){var o=n("l998X");n("42omo"),e.exports.PopoverProvider=({children:e})=>(0,o.jsx)(n("2MPqq").SpotlightContextProvider,{children:(0,o.jsx)(n("2xusd").Manager,{children:e})})}),o("a90ar",function(e,t){var o=n("l998X");n("42omo"),e.exports.PopoverTarget=({children:e})=>(0,o.jsx)(n("cs0ez").Reference,{children:({ref:t})=>(0,o.jsx)("div",{ref:t,children:e})})}),o("3chlW",function(e,t){var o=n("l998X");let r=(0,n("42omo").forwardRef)(({children:e,testId:t},r)=>(0,o.jsx)(n("1s5hv").default,{ref:r,testId:t,xcss:"_1bsb1osq",role:"group",justifyContent:"end",gap:"space.050",children:e}));e.exports.SpotlightActions=r}),o("f1UQW",function(e,t){var o=n("l998X");let r=(0,n("42omo").forwardRef)(({children:e,testId:t},r)=>(0,o.jsx)(n("gdv5Z").default,{ref:r,xcss:"_18zrpxbi _syaz15cr _1q51u2gc",testId:t,children:e}));e.exports.SpotlightBody=r}),o("71521",function(e,t){var o=n("l998X"),r=n("42omo");let i={"top-start":"_u7co12x7 _rjxpc7mi","top-center":"_u7co12x7 _1e021qz4","top-end":"_u7co12x7 _1e02c7mi","right-start":"_1e0212x7 _u7comgjw","right-end":"_1e0212x7 _152tmgjw","bottom-start":"_152t12x7 _rjxpc7mi","bottom-center":"_152t12x7 _1e021qz4","bottom-end":"_152t12x7 _1e02c7mi","left-start":"_rjxp12x7 _u7comgjw","left-end":"_rjxp12x7 _152tmgjw"},a=(0,r.forwardRef)(({children:e,testId:t},a)=>{let{card:s}=(0,r.useContext)(n("2MPqq").SpotlightContext),l=(0,r.useRef)(null);return(0,r.useEffect)(()=>{s.setRef(l)},[s]),(0,o.jsxs)("div",{"data-testid":t,ref:a,className:(0,n("gMc0m").default)(["_kqswh2mm"]),children:[(0,o.jsx)(n("jEGan").Caret,{}),(0,o.jsx)(n("gdv5Z").default,{ref:l,backgroundColor:"color.background.neutral.bold",xcss:(0,n("1Whri").cx)("_2rko1mok _zulpu2gc _kqswstnw _1bsbaq3k _1q51u2gc _85i5utpp _1e0c1txw _2lx21bp4 _16qs1nax",i[s.placement]),children:e})]})});e.exports.SpotlightCard=a}),o("jEGan",function(e,t){var o=n("l998X"),r=n("42omo");let i={root:"_bfhk1aqn _mkrzmhja _4t3io7ao _kqswh2mm _1bsbo7ao _1pby1fw0","top-start":"_t9ec71a3","top-center":"_t9ec71a3","top-end":"_t9ec71a3","bottom-start":"_t9ec1hke","bottom-center":"_t9ec1hke","bottom-end":"_t9ec1hke","right-start":"_t9ecjyd4","right-end":"_t9ecjyd4","left-start":"_t9ecebzf","left-end":"_t9ecebzf"},a=(0,r.forwardRef)(({testId:e},t)=>{let{card:a}=(0,r.useContext)(n("2MPqq").SpotlightContext);return(0,o.jsx)("div",{"data-testid":e,ref:t,style:{borderEndStartRadius:"1px"},className:(0,n("gMc0m").default)([i.root,i[a.placement]])})});e.exports.Caret=a}),o("aVS0S",function(e,t){var o=n("l998X");let r=(0,n("42omo").forwardRef)(({testId:e,children:t},r)=>(0,o.jsx)("div",{"data-testid":e,ref:r,role:"group",className:(0,n("gMc0m").default)(["_zulpu2gc _1e0c1txw _2lx21sbv"]),children:t}));e.exports.SpotlightControls=r}),o("2owmo",function(t,o){var r=n("l998X"),i=n("42omo");let a={root:"_2rko12b0 _1rjc12x7 _syaz15cr _bfhk1aqn _irr31ibz _1di6of27",rootT26Shape:"_2rko1qi0"},s=(0,i.forwardRef)(({autoFocus:t=!0,onClick:o,testId:s},l)=>{let{popoverContent:u}=(0,i.useContext)(n("2MPqq").SpotlightContext);return(0,r.jsx)(n("fVUfS").default,{autoFocus:t,onClick:o||(e=>{u.dismiss.current(e)}),ref:l,testId:s,xcss:(0,n("1Whri").cx)(a.root,(0,n("dh538").fg)("platform-dst-shape-theme-default")&&a.rootT26Shape),"aria-label":"Dismiss",children:(0,r.jsx)(e(n("hmuev")),{label:"Close"})})});t.exports.SpotlightDismissControl=s}),o("eopLP",function(e,t){var o=n("l998X");let r=(0,n("42omo").forwardRef)(({children:e,testId:t},r)=>(0,o.jsx)(n("1s5hv").default,{ref:r,testId:t,xcss:"_bozgpxbi _y4tiutpp _1bsb1osq",alignItems:"center",justifyContent:"space-between",children:e}));e.exports.SpotlightFooter=r}),o("aZQ5F",function(e,t){var o=n("l998X");let r=(0,n("42omo").forwardRef)(({children:e,testId:t},r)=>(0,o.jsx)(n("1s5hv").default,{ref:r,testId:t,xcss:"_bozgpxbi _y4tiutpp",alignItems:"center",justifyContent:"space-between",gap:"space.100",children:e}));e.exports.SpotlightHeader=r}),o("bUJpY",function(e,t){var o=n("l998X"),r=n("42omo");let i=(0,r.forwardRef)(({children:e,testId:t},i)=>{let{heading:a}=(0,r.useContext)(n("2MPqq").SpotlightContext);return(0,o.jsx)(n("7hXDW").default,{id:a.id,ref:i,testId:t,size:"xsmall",children:e})});e.exports.SpotlightHeadline=i}),o("fNcP1",function(e,t){var o=n("l998X"),r=n("42omo");let i=(0,r.forwardRef)(({"aria-label":e,onClick:t,children:i,testId:a},s)=>{let{primaryAction:l}=(0,r.useContext)(n("2MPqq").SpotlightContext);return(0,o.jsx)(n("fVUfS").default,{"aria-label":e,ref:s,testId:a,xcss:"_2rko12b0 _1dqonqa1 _189ee4h9 _1h6d8yml _syaz15cr _bfhk1aqn _irr31ibz _1di6of27",onClick:t||(e=>{l.action.current(e)}),children:(0,o.jsx)(n("iXCQx").default,{as:"span",children:i})})});e.exports.SpotlightPrimaryAction=i}),o("8tIbq",function(e,t){var o=n("42omo");let r={childList:!0,subtree:!0};e.exports.UNSAFE_UpdateOnChange=({selectors:e=["body"],options:t=r})=>{let{popoverContent:i}=(0,o.useContext)(n("2MPqq").SpotlightContext),{update:a}=i;return(0,o.useEffect)(()=>{if(!a||0===e.length)return;let o=(0,n("hTKp4").getDocument)();if(!o)return;let r=new Set;if(e.forEach(e=>{let t=o.querySelector(e);t&&r.add(t)}),0===r.size)return;let i=[];return r.forEach(e=>{let n=new MutationObserver(e=>{0!==e.length&&a()});n.observe(e,t),i.push(n)}),()=>{i.forEach(e=>e.disconnect())}},[e,t,a]),null}}),o("l7iY7",function(e,t){var o=n("42omo");let r=(0,n("dPJCf").createSingleQueryParamHook)("showRecap2025");e.exports.useRecapSpotlightEligibility=e=>{let t=(0,o.useRef)(null),i=r(),a=(0,n("3jwuS").useIsCurrentPageLive)(),s="open"===i&&!a&&e,{data:l,loading:u,error:c}=(0,n("ivb8S").useGetOnboardingState)(n("fsF73").CONFLUENCE_RECAP_ONBOARDING_STATE_KEYS.HAS_SEEN_PUBLISH_SPOTLIGHT,!s||!(0,n("9wGTI").fg)("cc_recap_2025_nudge_enabled")),{hasSeenPublishSpotlight:d}=(0,n("ivb8S").deserializeState)(l);return(0,o.useEffect)(()=>{c&&(0,n("7Sm4c").markErrorAsHandled)(c)},[c]),null!==t.current||u||(t.current=d),!!(0,n("9wGTI").fg)("cc_recap_2025_nudge_enabled")&&!u&&!c&&!t.current&&s}}),o("7CeAz",function(e,t){var o=n("42omo");e.exports.useIsCompanyHubEnabled=()=>{let{frontCoverState:e,isSiteAdmin:t}=(0,o.useContext)(n("1ytiN").SPAViewContext),{accessStatus:r}=(0,n("bQm3c").useSessionData)(),i=(0,n("8NC5Z").useCompanyHubPremiumGate)(),a=t||r===n("d9tcB").AccessStatus.LICENSED_ADMIN_ACCESS,s=!i,l=!!(s&&e===n("cEgMD").FrontCoverStateEnum.SHOWN),u=!!(s&&e===n("cEgMD").FrontCoverStateEnum.EDITORS_ONLY||l);return{canPublish:s&&a,isCompanyHubPublished:l,isCompanyHubShownToEditors:u,isCompanyHubEntryPointEnabled:!!(s&&(l||u)||(i?t:a))}}}),o("8NC5Z",function(e,t){var o=n("j1Ss3");e.exports.useCompanyHubPremiumGate=({skip:e=!1}={})=>{let{edition:t}=(0,n("bQm3c").useSessionData)(),r=e||t===n("euL71").ConfluenceEdition.PREMIUM,{data:i,error:a}=(0,o.useQuery)((0,n("eSUdr").default)`query useCompanyHubPremiumGateCompanyHubPremiumGateQuery{entitlements{companyHub{isEntitled}}}`,{skip:r});return a&&((0,n("1uFM6").isUnauthorizedError)(a)||(0,n("f9jv7").isNotFoundError)(a)||(0,n("5ZqQS").getMonitoringClient)().submitError(a,{attribution:n("3IBnw").Attribution.COMPANY_HUB}),(0,n("7Sm4c").markErrorAsHandled)(a)),!r&&!i?.entitlements.companyHub.isEntitled}}),o("f9jv7",function(e,t){e.exports.isNotFoundError=e=>(0,n("aMcHK").isStatusCodeError)(e,"404")}),o("1C3B1",function(e,t){e.exports.PAGE_TREE_ITEM_CLICK="PAGE_TREE_ITEM_CLICK",e.exports.RECENT_DROPDOWN_ITEM_CLICK="RECENT_DROPDOWN_ITEM_CLICK",e.exports.EDITOR_UPDATE_BUTTON_CLICK="EDITOR_UPDATE_BUTTON_CLICK",e.exports.EDITOR_UPDATE_SHORTCUT_KEY_PRESS="EDITOR_UPDATE_SHORTCUT_KEY_PRESS",e.exports.EDITOR_UPDATE_BUTTON_IN_MODAL_CLICK="EDITOR_UPDATE_BUTTON_IN_MODAL_CLICK",e.exports.EDITOR_UPDATE_SHORTCUT_IN_MODAL_PRESS="EDITOR_UPDATE_SHORTCUT_IN_MODAL_PRESS",e.exports.EDITOR_CLOSE_BUTTON_CLICK="EDITOR_CLOSE_BUTTON_CLICK",e.exports.RECENT_WORK_ITEM_ON_HOME_PAGE_CLICK="RECENT_WORK_ITEM_ON_HOME_PAGE_CLICK",e.exports.DISCOVER_ITEM_ON_HOME_PAGE_CLICK="DISCOVER_ITEM_ON_HOME_PAGE_CLICK",e.exports.UNKNOWN="UNKNOWN"}),o("lXYVJ",function(e,t){let o;e.exports.setViewTransitionSource=e=>{o=e},e.exports.getViewTransitionSource=()=>o||n("1C3B1").UNKNOWN,e.exports.resetViewTransitionSource=()=>{o=void 0}}),o("5xD7y",function(e,t){let o=n("4mJKd")(5);e.exports=Promise.all([o("hhss7"),o("gZ0i8")]).then(()=>n("441I0"))}),o("7mpOv",function(t,o){var r=n("42omo"),i=n("5spQU");let a=n("gejop").default,s=e=>!!e&&e.some(e=>e?.operation==="ai_read"),l=({contentId:e})=>{let{isAdminHubAIEnabled:t,isRovoEnabled:o,isRovoLLMEnabled:r}=(0,n("bQm3c").useSessionData)(),l=(0,n("9wGTI").fg)("rovo_use_rovo_llm_enabled_check")?r:o,u=(0,n("9wGTI").fg)("use_frontend_feature_encoding_sdk")?(0,i.isFeatureEnabled)("confluence","confluence-ai"):!(0,n("lzcvT").isFedRamp)(),{data:c,error:d}=(0,n("jMyy4").useQueryInterop)(a,{variables:{contentId:e},skip:!e||!u||!t&&!l||!(0,n("9wGTI").fg)("confluence_ai_access_policy")});if(d&&(0,n("7Sm4c").markErrorAsHandled)(d),!(0,n("9wGTI").fg)("confluence_ai_access_policy"))return{isAIEnabledForContent:t,isRovoEnabledForContent:l};let p=s(c?.content?.nodes?.[0]?.operations);return{isAIEnabledForContent:p&&t,isRovoEnabledForContent:p&&l}};t.exports.useIsAIEnabledForContent=l,t.exports.withIsAIEnabledForContent=function(t){return function(o){let[i]=(0,n("ep3mz").usePageContentId)(),{isAIEnabledForContent:a,isRovoEnabledForContent:s}=l({contentId:i??""});return e(r).createElement(t,{...o,isAIEnabledForContent:a,isRovoEnabledForContent:s})}}}),o("gejop",function(e,t){var n,o;let r={fragment:{argumentDefinitions:n=[{defaultValue:null,kind:"LocalArgument",name:"contentId"}],kind:"Fragment",name:"useIsAIEnabledForContentQuery",selections:o=[{args:[{kind:"Variable",name:"id",variableName:"contentId"}],concreteType:"PaginatedContentListWithChild",kind:"LinkedField",name:"content",plural:!1,selections:[{concreteType:"Content",kind:"LinkedField",name:"nodes",plural:!0,selections:[{kind:"ScalarField",name:"id"},{concreteType:"OperationCheckResult",kind:"LinkedField",name:"operations",plural:!0,selections:[{kind:"ScalarField",name:"targetType"},{kind:"ScalarField",name:"operation"}]}]}]}],type:"Query"},kind:"Request",operation:{argumentDefinitions:n,kind:"Operation",name:"useIsAIEnabledForContentQuery",selections:o},params:{cacheID:"3a27260e57e410ffecd4ba617c6d3637",id:"31c4e4a3ba20d4a057426f91f20e95897295f9d91218d2d7ad20c63eb6d8908d",metadata:{},name:"useIsAIEnabledForContentQuery",operationKind:"query",text:"query useIsAIEnabledForContentQuery($contentId:ID!){content(id:$contentId){nodes{id,operations{targetType,operation}}}}"}};r.hash="87034a7db072a7db419402593bcbd707",e.exports.default=r}),o("jVFPV",function(t,o){var r=n("42omo");let i=Array(48).fill(0).map((e,t)=>`${Math.floor(t/2).toString().padStart(2,"0")}:${t%2?"30":"00"}`),a=(0,n("cgtv4").defineMessages)({acceptTitle:{id:"publish-modal.flag.accept",defaultMessage:"Accept"}}),s=async({validationMessage:t,isTitleEmpty:o,flags:i,formatMessage:s,publish:l,isAIEnabledForContent:u,isLivePage:c})=>{let d;o&&t===n("c6abH").PublishErrorFlagKeys.TITLE_IS_BLANK&&u&&!c&&(0,n("6mKj3").expValEquals)("confluence_ai_title_generation","cohort","test")?d=n("1mHQU").ALLOWED_FLAG_MESSAGES.AI_GENERATED_TITLE:o&&t===n("c6abH").PublishErrorFlagKeys.TITLE_IS_BLANK?d=n("1mHQU").ALLOWED_FLAG_MESSAGES.TITLE_REQUIRED:t===n("c6abH").PublishErrorFlagKeys.TITLE_IS_BLANK?d=n("1mHQU").ALLOWED_FLAG_MESSAGES.INVALID_PAGE_TITLE:t===n("c6abH").PublishErrorFlagKeys.DUPLICATE_TITLE&&(d=n("1mHQU").ALLOWED_FLAG_MESSAGES.DUPLICATE_TITLE);let p=(0,n("cHfGW").buildEditorFlagMessage)({errorData:{[d]:!0},formatMessage:s});d===n("1mHQU").ALLOWED_FLAG_MESSAGES.AI_GENERATED_TITLE?(await i.hideFlag("ai-generated-title-flag"),await i.showCustomFlag({id:"ai-generated-title-flag",title:p?.title,description:p?.description,customIcon:e(r).createElement(n("6f0Oj").default,{paddingBlockStart:"space.050"},e(r).createElement(n("lAFHW").RovoIcon,{label:"",size:"xsmall"})),actions:[{content:s(a.acceptTitle),onClick:l}]})):await i.showErrorFlag({title:p?.title,description:p?.description})},l=e=>({operation:e?.operation,restrictions:{group:e?.restrictions?.group,user:{results:e?.restrictions?.user?.results?.map(u)}}}),u=e=>({accountId:e?.accountId,displayName:e?.displayName,isExternalCollaborator:e?.isExternalCollaborator,profilePicture:{path:e?.profilePicture?.path},publicName:e?.publicName,type:"known"});t.exports.getTimesArray=e=>{let t=new Date,o=(0,n("gsubZ").default)(t,5),r=new Date;if(r.setDate(r.getDate()+1),o.toDateString()===r.toDateString())return[];if(!e||(0,n("da71s").default)(e).toDateString()!==o.toDateString())return i;{let e=o.getHours(),t=e+1,n=Array(48-2*t).fill(0).map((e,n)=>`${Math.floor((n+2*t)/2).toString().padStart(2,"0")}:${n%2?"30":"00"}`);return 30>o.getMinutes()&&n.unshift(`${e.toString().padStart(2,"0")}:30`),n}},t.exports.mergeDateTime=(e,t)=>e&&t&&(0,n("cFEpk").default)(e)&&(0,n("cFEpk").default)(t)?new Date(e.getFullYear(),e.getMonth(),e.getDate(),t.getHours(),t.getMinutes(),t.getSeconds()):void 0,t.exports.cacheSchedulePublishTime=({contentId:e,schedulePublishDate:t,fragmentWriterInterop:o})=>{let r=(0,n("hp2SH").getApolloClient)();if((0,n("6mKj3").expValEquals)("remove_usages_of_cache_read_write","isEnabled",!0))try{o({fragmentId:`Content:${e}`,data:{schedulePublishInfo:{__typename:"SchedulePublishInfo",date:t,minorEdit:!1,targetType:"page",versionComment:""},__typename:"Content"}})}catch(e){}else try{let o=r.readQuery({query:n("hFmJ6").PublishModalWithMoreOptionsQuery,variables:{contentId:e}});o.singleContent.schedulePublishInfo={__typename:"SchedulePublishInfo",date:t,minorEdit:!1,targetType:"page",versionComment:""},r.writeQuery({query:n("hFmJ6").PublishModalWithMoreOptionsQuery,variables:{contentId:e},data:o})}catch(e){}},t.exports.displayPublishErrorFlag=s,t.exports.convertRestrictionsObjForContentREST=e=>{let t={};return(e.forEach(e=>{t[e.operation]=l(e)}),(0,n("6mKj3").expValEquals)("cpe-3645_fix_publish_modal_blog_conversion","cohort","test"))?(0,n("1Z5gD").sanitizeRestrictionsForGraphQL)(t):t},t.exports.convertRestrictionsObjFromSchedulePublishInfo=e=>{let t=e?.read,o=e?.update,r=t?.user?.edges??[],i=t?.group?.edges??[],a=o?.user?.edges??[],s=o?.group?.edges??[],l=e=>e.map(e=>(0,n("8mrqR").transformUserToREST)({...e.node,hasSpaceEditPermission:!0,hasSpaceViewPermission:!0})),u=e=>e.map(e=>(0,n("8mrqR").transformGroupToREST)(e.node)),c=(e,t,n)=>({operation:e,restrictions:{user:{results:l(t)},group:{results:u(n)}}});return[c("read",r,i),c("update",a,s)]}}),o("da71s",function(e,o){function r(e,t){(0,n("b5utg").default)(1,arguments);var o,r,m,E=(0,n("jZ39j").default)(null!=(o=null==t?void 0:t.additionalDigits)?o:2);if(2!==E&&1!==E&&0!==E)throw RangeError("additionalDigits must be 0, 1 or 2");if("string"!=typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var g=function(e){var t,n={},o=e.split(i.dateTimeDelimiter);if(o.length>2)return n;if(/:/.test(o[0])?t=o[0]:(n.date=o[0],t=o[1],i.timeZoneDelimiter.test(n.date)&&(n.date=e.split(i.timeZoneDelimiter)[0],t=e.substr(n.date.length,e.length))),t){var r=i.timezone.exec(t);r?(n.time=t.replace(r[1],""),n.timezone=r[1]):n.time=t}return n}(e);if(g.date){var f=function(e,t){var n=RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),o=e.match(n);if(!o)return{year:NaN,restDateString:""};var r=o[1]?parseInt(o[1]):null,i=o[2]?parseInt(o[2]):null;return{year:null===i?r:100*i,restDateString:e.slice((o[1]||o[2]).length)}}(g.date,E);r=function(e,t){if(null===t)return new Date(NaN);var n,o,r,i,s,l,c,m,E,g,f,b,h,S=e.match(a);if(!S)return new Date(NaN);var _=!!S[4],T=u(S[1]),I=u(S[2])-1,C=u(S[3]),y=u(S[4]),P=u(S[5])-1;if(_){return(n=0,o=y,r=P,o>=1&&o<=53&&r>=0&&r<=6)?(i=t,s=y,l=P,(c=new Date(0)).setUTCFullYear(i,0,4),m=c.getUTCDay()||7,c.setUTCDate(c.getUTCDate()+((s-1)*7+l+1-m)),c):new Date(NaN)}var A=new Date(0);return(E=t,g=I,f=C,g>=0&&g<=11&&f>=1&&f<=(d[g]||(p(E)?29:28))&&(b=t,(h=T)>=1&&h<=(p(b)?366:365)))?(A.setUTCFullYear(t,I,Math.max(T,C)),A):new Date(NaN)}(f.restDateString,f.year)}if(!r||isNaN(r.getTime()))return new Date(NaN);var b=r.getTime(),h=0;if(g.time&&isNaN(h=function(e){var t,o,r,i=e.match(s);if(!i)return NaN;var a=c(i[1]),l=c(i[2]),u=c(i[3]);return(t=a,o=l,r=u,24===t?0===o&&0===r:r>=0&&r<60&&o>=0&&o<60&&t>=0&&t<25)?a*n("jx0NF").millisecondsInHour+l*n("jx0NF").millisecondsInMinute+1e3*u:NaN}(g.time)))return new Date(NaN);if(g.timezone){if(isNaN(m=function(e){if("Z"===e)return 0;var t,o,r=e.match(l);if(!r)return 0;var i="+"===r[1]?-1:1,a=parseInt(r[2]),s=r[3]&&parseInt(r[3])||0;return(t=0,(o=s)>=0&&o<=59)?i*(a*n("jx0NF").millisecondsInHour+s*n("jx0NF").millisecondsInMinute):NaN}(g.timezone)))return new Date(NaN)}else{var S=new Date(b+h),_=new Date(0);return _.setFullYear(S.getUTCFullYear(),S.getUTCMonth(),S.getUTCDate()),_.setHours(S.getUTCHours(),S.getUTCMinutes(),S.getUTCSeconds(),S.getUTCMilliseconds()),_}return new Date(b+h+m)}t(e.exports,"default",()=>r);var i={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},a=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,s=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,l=/^([+-])(\d{2})(?::?(\d{2}))?$/;function u(e){return e?parseInt(e):1}function c(e){return e&&parseFloat(e.replace(",","."))||0}var d=[31,null,31,30,31,30,31,31,30,31,30,31];function p(e){return e%400==0||e%4==0&&e%100!=0}}),o("jx0NF",function(e,t){e.exports.millisecondsInMinute=6e4,e.exports.millisecondsInHour=36e5,e.exports.millisecondsInSecond=1e3}),o("gsubZ",function(e,o){t(e.exports,"default",()=>r);function r(e,t){(0,n("b5utg").default)(2,arguments);var o=(0,n("jZ39j").default)(t);return(0,n("lshox").default)(e,6e4*o)}}),o("8mrqR",function(e,t){n("7CLBv");class o extends Error{constructor(){super("Invalid restrictions object provided.  Restrictions objects must contain a 'read' ContentRestriction and an 'update' ContentRestriction.")}}class r extends Error{constructor(){super("Invalid restrictions were fetched from GraphQL.")}}let i=e=>0===e.restrictions.user.results.length&&0===e.restrictions.group.results.length,a=e=>({key:`USER-${e.accountId}`,entityType:n("c4ECQ").EntityType.USER,permissions:[],displayName:e.displayName,accountId:e.accountId,profilePicture:{path:e.profilePicture.path},hasSpaceViewPermission:e?.hasSpaceViewPermission??!0,hasSpaceEditPermission:e?.hasSpaceEditPermission??!0,permissionType:e.isExternalCollaborator?n("9lU4Z").SitePermissionType.EXTERNAL:n("9lU4Z").SitePermissionType.INTERNAL}),s=e=>({key:`GROUP-${e.id}`,entityType:n("c4ECQ").EntityType.GROUP,permissions:[],name:e.name,permissionType:n("9lU4Z").SitePermissionType.INTERNAL}),l=e=>({type:"known",accountId:e?.accountId??"",publicName:e?.publicName??"",profilePicture:{path:e?.profilePicture?.path??""},email:e?.email??"",displayName:e?.displayName??"",hasSpaceViewPermission:e?.hasSpaceViewPermission??!0,hasSpaceEditPermission:e?.hasSpaceEditPermission??!0,isExternalCollaborator:e.permissionType===n("9lU4Z").SitePermissionType.EXTERNAL}),u=e=>({type:"group",name:e?.name??"",id:e?.id??"",usageType:e?.usageType}),c=e=>null!==e;e.exports.getRestrictionsTypeFromRESTObj=e=>{let t=e.find(e=>"read"===e.operation),r=e.find(e=>"update"===e.operation);if(void 0===t||void 0===r)throw new o;return i(t)&&i(r)?n("c4ECQ").ContentRestrictionType.NO_RESTRICTIONS:i(t)?n("c4ECQ").ContentRestrictionType.RESTRICT_EDIT:n("c4ECQ").ContentRestrictionType.RESTRICT_VIEW},e.exports.getUsersAndGroupsFromRESTObj=e=>{let t=e.find(e=>"read"===e.operation),r=e.find(e=>"update"===e.operation);if(void 0===t||void 0===r)throw new o;let i=new Map;for(let e of t.restrictions.user.results)i.has(e.accountId)||i.set(e.accountId,a(e)),i.get(e.accountId).permissions.push(n("c4ECQ").PermissionType.VIEW);for(let e of t.restrictions.group.results)i.has(e.id)||i.set(e.id,s(e)),i.get(e.id).permissions.push(n("c4ECQ").PermissionType.VIEW);for(let e of r.restrictions.user.results)i.has(e.accountId)||i.set(e.accountId,a(e)),i.get(e.accountId).permissions.push(n("c4ECQ").PermissionType.EDIT);for(let e of r.restrictions.group.results)i.has(e.id)||i.set(e.id,s(e)),i.get(e.id).permissions.push(n("c4ECQ").PermissionType.EDIT);return Array.from(i).map(([,e])=>e)},e.exports.transformUserToREST=l,e.exports.transformGroupToREST=u,e.exports.transformGraphQLQueryToRESTObj=e=>{let t=e?.content?.nodes?.[0]?.restrictions?.read?.restrictions,n=e?.content?.nodes?.[0]?.restrictions?.update?.restrictions;if(void 0===t||void 0===n)throw new r;let o={operation:"read",restrictions:{user:{results:[]},group:{results:[]}}},i={operation:"update",restrictions:{user:{results:[]},group:{results:[]}}};return o.restrictions.user.results=(t?.userWithRestrictions?.nodes??[]).filter(c).map(l),o.restrictions.group.results=(t?.groupWithRestrictions?.nodes??[]).filter(c).map(u),i.restrictions.user.results=(n?.userWithRestrictions?.nodes??[]).filter(c).map(l),i.restrictions.group.results=(n?.groupWithRestrictions?.nodes??[]).filter(c).map(u),[o,i]},e.exports.restrictionsArePrivateToYouOnly=e=>{let t=e.find(e=>"read"===e.operation),n=e.find(e=>"update"===e.operation);if(void 0===t||void 0===n)throw new o;let r=1===t.restrictions.user.results.length,i=0===t.restrictions.group.results.length,a=1===n.restrictions.user.results.length,s=0===n.restrictions.group.results.length;return r&&i&&a&&s}}),o("7CLBv",function(e,t){var o=n("ipwYn");e.exports=function(e){return o(e,5)}}),o("c4ECQ",function(e,t){var n,o,r,i,a,s,l=((n={}).NO_RESTRICTIONS="NO_RESTRICTIONS",n.RESTRICT_EDIT="RESTRICT_EDIT",n.RESTRICT_VIEW="RESTRICT_VIEW",n),u=((o={}).DIRECT="DIRECT",o.MULTIPLE="MULTIPLE",o.NONE="NONE",o.PAGE_INHERITED="PAGE_INHERITED",o.SPACE="SPACE",o),c=((r={}).GROUP="GROUP",r.USER="USER",r),d=((i={}).EDIT="EDIT",i.VIEW="VIEW",i),p=((a={}).NO_ANCESTOR_VIEW="NO_ANCESTOR_VIEW",a.NO_SPACE_VIEW="NO_SPACE_VIEW",a.NO_SPACE_EDIT="NO_SPACE_EDIT",a),m=((s={}).INSPECT_PERMISSIONS="INSPECT_PERMISSIONS",s.ACCESS_DETAILS="ACCESS_DETAILS",s.RESTRICTIONS="RESTRICTIONS",s.PUBLIC_LINKS_VALIDATION="PUBLIC_LINKS_VALIDATION",s);e.exports.ContentRestrictionType=l,e.exports.RestrictionFrom=u,e.exports.EntityType=c,e.exports.PermissionType=d,e.exports.ErrorMessageType=p,e.exports.OpenDialogType=m}),o("9lU4Z",function(e,t){(n={}).FREE="FREE",n.PREMIUM="PREMIUM",n.STANDARD="STANDARD";var n,o,r=((o={}).ANONYMOUS="ANONYMOUS",o.APP="APP",o.EXTERNAL="EXTERNAL",o.INTERNAL="INTERNAL",o.JSD="JSD",o);e.exports.SitePermissionType=r}),o("1Z5gD",function(e,t){e.exports.sanitizeRestrictionsForGraphQL=function(e){if(!e)return e;let t=JSON.parse(JSON.stringify(e));return Object.keys(t).forEach(e=>{let n=t[e],o=n?.restrictions?.group?.results;Array.isArray(o)&&o.forEach(e=>{"usageType"in e&&Reflect.deleteProperty(e,"usageType")})}),t}}),o("c6abH",function(e,t){var n,o=((n={}).TITLE_IS_BLANK="TITLE_IS_BLANK",n.DUPLICATE_TITLE="TITLE_EXISTS_IN_SPACE",n);e.exports.DEFAULT_TIME="9:00",e.exports.TIME_FORMAT="HH:mm",e.exports.MINUTES_IN_FUTURE=5,e.exports.DATE_FORMAT="yyyy-MM-dd",e.exports.PublishErrorFlagKeys=o,e.exports.SHORTCUT_KEYS={PMF1:"PMF1",PMF2:"PMF2",USB1:"USB1",PBWMO1:"PBWMO1",PBWMO2:"PBWMO2",PBWMO3:"PBWMO3",PBWMO4:"PBWMO4",PBWMO5:"PBWMO5",PMKS1:"PMKS1",PMKS2:"PMKS2"}}),o("hFmJ6",function(e,t){let o=(0,n("eSUdr").default)`query PublishModalWithMoreOptionsQuery($contentId:ID){singleContent(id:$contentId){id type space{id}schedulePublishInfo{date versionComment minorEdit targetType targetLocation{parentId destinationSpace{id key alias}}restrictions{update{user:personConnection{edges{node{email permissionType displayName accountId publicName profilePicture{path}}}}group{edges{node{name id}}}}read{user:personConnection{edges{node{email permissionType displayName accountId publicName profilePicture{path}}}}group{edges{node{name id}}}}}}}}`;e.exports.PublishModalWithMoreOptionsQuery=o}),o("1N2OF",function(e,t){var o=n("42omo");e.exports.usePrePublishTitleValidation=({contentId:e,contentType:t,isUnpublishedDraft:r,flags:i,retrieveEditorTitleAndContent:a,onBeforeValidation:s,onValidationSuccess:l,analyticsSource:u,optimisticTitle:c})=>{let d=(0,n("8C5kA").default)(),p=(0,n("hp2SH").getApolloClient)(),m=r?n("1ggpj").onChangeTitleDebounceTime:0,{createAnalyticsEvent:E}=(0,n("f5bZm").usePublishModalAnalyticsEvent)(),{isAIEnabledForContent:g}=(0,n("7mpOv").useIsAIEnabledForContent)({contentId:e}),f=(0,n("3jwuS").useIsCurrentPageLive)(),b=(0,o.useCallback)(o=>{let h=async()=>{let{title:o}=await a(),r=c??o;try{let{data:o}=await p.query({query:n("h7eE1").ValidatePagePublishQuery,errorPolicy:"all",fetchPolicy:"network-only",variables:{contentId:e,type:t,title:r}});o.validatePagePublish?.isValid?l():await (0,n("jVFPV").displayPublishErrorFlag)({validationMessage:o.validatePagePublish?.message,isTitleEmpty:!r,flags:i,formatMessage:d.formatMessage,publish:b("PublishButtonInFlag"),isAIEnabledForContent:g,isLivePage:f})}catch(e){e&&((0,n("7Sm4c").markErrorAsHandled)(e),(0,n("6fil2").containsNetworkError)(e)||(0,n("1uFM6").isUnauthorizedError)(e)||(0,n("5ZqQS").getMonitoringClient)().submitError(e,{attribution:n("3IBnw").Attribution.PAGE_MODES}))}};return async()=>{E({type:"sendUIEvent",data:{actionSubject:"button",action:"clicked",actionSubjectId:o,source:u,attributes:{isUnpublishedDraft:r}}}).fire(),setTimeout(async()=>{s(),await h()},m)}},[e,t,a,E,i,d.formatMessage,m,r,u,s,l,p,c,g,f]);return b}}),o("1ggpj",function(e,t){var o,r=((o={}).WHITEBOARD="whiteboard",o.PAGE="page",o.BLOGPOST="blogpost",o.DATABASE="database",o.EMBED="embed",o.FOLDER="folder",o);let i=[n("1NBp8").DATABASE_VIEW.name,n("1NBp8").VIEW_PAGE.name,n("1NBp8").WHITEBOARD_BOARD.name,n("1NBp8").EMBED_VIEW.name],a=[n("1NBp8").DATABASE_VIEW.name,n("1NBp8").VIEW_PAGE.name,n("1NBp8").WHITEBOARD_BOARD.name,n("1NBp8").EMBED_VIEW.name],s={whiteboard:n("lx6jn").FeedbackSource.WHITEBOARD,embed:n("lx6jn").FeedbackSource.EMBED,database:n("lx6jn").FeedbackSource.DATABASE};e.exports.ContentType=r,e.exports.ARCHIVE_SUCCESS_REDIRECT_ROUTES=i,e.exports.DELETE_SUCCESS_REDIRECT_ROUTES=a,e.exports.VALID_OPERATION_TARGETS=["whiteboard","database","embed","page","folder","blogpost"],e.exports.CONTENT_TYPE_FEEDBACK_SOURCE=s,e.exports.TYPES_WITH_ACTIVATIONID=["database","embed","folder"],e.exports.onChangeTitleDebounceTime=400}),o("lx6jn",function(e,t){var n,o=((n={}).EDITOR="Editor",n.HELP_PANEL="Help Panel",n.THEME_SELECTOR="Theme Selector",n.WHITEBOARD="Whiteboard",n.EMBED="Embed",n.DATABASE="Database",n.NAV_4="Nav4",n.SHARE_DIALOG="Share Dialog",n.CONTENT_WRAPPER="Content Wrapper",n.LIVE_DOCS="Live Docs",n.EDITOR_CONTROLS="Editor Controls",n.NOTES="Notes",n.CREATE_WITH_ROVO="Create with Rovo",n);e.exports.FeedbackSource=o}),o("f5bZm",function(e,t){var o=n("42omo");e.exports.usePublishModalAnalyticsEvent=()=>{let[e]=(0,n("ep3mz").usePageContentId)(),{createAnalyticsEvent:t}=(0,n("inPa6").useAnalyticsEvents)(),{data:r}=(0,n("xQxzY").useQuery)((0,n("eSUdr").default)`query usePublishModalAnalyticsEventPublishModalWithMoreOptionsQuery($contentId:ID){singleContent(id:$contentId){id type space{id}schedulePublishInfo{date versionComment minorEdit targetType targetLocation{parentId destinationSpace{id key alias}}restrictions{update{user:personConnection{edges{node{email permissionType displayName accountId publicName profilePicture{path}}}}group{edges{node{name id}}}}read{user:personConnection{edges{node{email permissionType displayName accountId publicName profilePicture{path}}}}group{edges{node{name id}}}}}}}}`,{errorPolicy:"all",fetchPolicy:"cache-only",variables:{contentId:e}}),i=(0,o.useMemo)(()=>({objectId:e,objectType:r?.singleContent?.type??void 0,containerId:r?.singleContent?.space?.id??void 0}),[r,e]);return{createAnalyticsEvent:(0,o.useCallback)(e=>(e.data.objectType=i.objectType,e.data.objectId=i.objectId,e.data.containerType="space",e.data.containerId=i.containerId,t(e)),[i,t])}}}),o("h7eE1",function(e,t){let o=(0,n("eSUdr").default)`query ValidatePagePublishQuery($contentId:ID!$type:String$title:String){validatePagePublish(id:$contentId status:"draft" type:$type title:$title){isValid message}}`;e.exports.ValidatePagePublishQuery=o}),o("8Lx5S",function(e,t){let o=e=>e===n("d9tcB").AccessStatus.LICENSED_ADMIN_ACCESS||e===n("d9tcB").AccessStatus.LICENSED_USE_ACCESS,r=e=>e===n("d9tcB").AccessStatus.LICENSED_ADMIN_ACCESS,i=e=>e===n("d9tcB").AccessStatus.LICENSED_USE_ACCESS,a=e=>e===n("d9tcB").AccessStatus.EXTERNAL_COLLABORATOR_ACCESS;e.exports.useIsLicensed=()=>{let{accessStatus:e}=(0,n("bQm3c").useSessionData)();return o(e)},e.exports.useIsAdmin=()=>{let{accessStatus:e}=(0,n("bQm3c").useSessionData)();return r(e)},e.exports.useIsGuest=()=>{let{accessStatus:e}=(0,n("bQm3c").useSessionData)();return a(e)},e.exports.useAccessStatus=()=>{let{accessStatus:e}=(0,n("bQm3c").useSessionData)();return{isGuest:a(e),isLicensed:o(e),isAdmin:r(e),isLicensedNonAdmin:i(e)}}}),o("7PLO8",function(e,t){e.exports.getDraftShareIdFromQueryParam=()=>new URLSearchParams(window.location.search.substring(1)).get("draftShareId")||""}),o("gw4Eo",function(e,t){e.exports.getConfluenceContentAri=e=>{let{siteId:t,resourceType:o,activationId:r,resourceId:i}=e;return n("1ggpj").TYPES_WITH_ACTIVATIONID.includes(o)?`ari:cloud:confluence:${t}:${o}/activation/${r}/${i}`:`ari:cloud:confluence:${t}:${o}/${i}`}}),o("jhwJP",function(e,t){e.exports.mergeLiveDocI18n=(e,t)=>{let o=o=>{o._data=(0,n("9wGTI").fg)("confluence_live_pages_open_beta_trait_opted_in")?{...e,...t}:e,o._initialized=!0};return new Proxy({},{get:(e,t)=>(e._initialized||o(e),e._data[t]),ownKeys:e=>(e._initialized||o(e),Reflect.ownKeys(e._data)),has:(e,t)=>(e._initialized||o(e),t in e._data),getOwnPropertyDescriptor:(e,t)=>{e._initialized||o(e);let n=Object.getOwnPropertyDescriptor(e._data,t);return n?{...n,enumerable:!0}:void 0}})}}),o("i9VoI",function(e,t){var o=n("42omo");e.exports.useSubscriptionEvent=({onDataReceived:e,skip:t=!1,contentId:r,contentType:i,delta:a,subscriberId:s})=>{let l=(0,n("6UYek").useSubscriptionsDispatchContext)(),{setContentId:u,setContentType:c,removeSubscriber:d,addSubscriber:p}=l||{};return(0,o.useEffect)(()=>{if(t||!p||!r||!i||!d)return;u?.(r),c?.(i);let n=p({delta:a,subscriberId:s,onSubscriptionData:e});return()=>{d({delta:a,subscriberId:n})}},[t,l,r,i,u,c,p,d,s,a,e]),null}}),o("6UYek",function(t,o){var r=n("42omo"),i=n("kyKWe");let a=(0,r.createContext)(void 0),s=(0,r.createContext)(void 0),l=["401","Failed to fetch","Load Failed","Network error","GraphQL error: undefined","Auth category: UNAUTHENTICATED is not allowed in service confluence_monolith_subscriptions"];t.exports.SubscriptionsContextProvider=({children:t})=>{let[o,u]=(0,r.useState)(null),[c,d]=(0,r.useState)(null),[p,m]=(0,r.useState)(null),E=e(r).useRef({}),g=(0,r.useCallback)(({subscriberId:t,onSubscriptionData:n,delta:o})=>{let r=E.current,a=`${t}-${e(i)()}`,s=r?.[o]||[];return r[o]=[...s,{id:a,onSubscriptionData:n}],a},[]),f=(0,r.useCallback)(({delta:e,subscriberId:t})=>{let n=E.current;n.hasOwnProperty(e)&&(n[e]=n[e].filter(e=>e.id!==t),0===n[e].length&&(delete n[e],0===Object.keys(n).length&&(d(null),m(null))))},[d,m]),b=(0,r.useCallback)((e,t)=>{let o=E.current;e.forEach(e=>{o.hasOwnProperty(e)&&(o?.[e]).forEach(o=>{let r=o?.onSubscriptionData?.(e,t);r instanceof Promise&&Promise.resolve(r).catch(e=>{(0,n("5ZqQS").getMonitoringClient)().submitError(e,{attribution:"page-experiences"})})})})},[]),{id:h,onSubscriptionComplete:S,extensions:_,onSubscriptionData:T}=(0,n("3vc4U").useSubscriptionValues)({contentType:p,contentId:c}),{accessStatus:I}=(0,n("bQm3c").useSessionData)(),C=I===n("d9tcB").AccessStatus.ANONYMOUS_ACCESS,{error:y}=(0,n("7hXu9").useSubscription)((0,n("eSUdr").default)`subscription SubscriptionsContextProviderSubscription($id:ID!){confluence_onContentModified(id:$id){type id accountId __typename _deltas contentStateUpdated{key value version __typename}emojiTitleUpdated{key value version __typename}coverPictureUpdated{key value version __typename}pageTitlePropertyUpdated{key value version __typename}coverPictureDeleted{key __typename}emojiTitleDeleted{key __typename}contentStateDeleted{key __typename}coverPictureWidthUpdated{coverPictureWidth __typename}pageBlogified{spaceKey spaceName blogTitle converterDisplayName __typename}embedUpdated{product isBlankStateUpdate __typename}pageMigrated{fabricEligibility __typename}contentRestrictionUpdated{contentId __typename}pageMoved{oldSpaceKey newSpaceKey oldParentId oldPosition newSpaceAlias oldSpaceAlias __typename}pageUpdated{__typename trigger confVersion}contentUpdatedWithTemplate{spaceKey subtype __typename}inlineCommentCreated{commentId inlineCommentType adfBodyContent __typename markerRef}rendererInlineCommentCreated{__typename commentId adfBodyContent inlineCommentType markerRef publishVersionNumber step{from to pos mark{attrs{annotationType __typename}__typename}__typename}}editorInlineCommentCreated{adfBodyContent commentId inlineCommentType markerRef __typename}inlineCommentUpdated{commentId markerRef __typename}inlineCommentDeleted{commentId inlineCommentType markerRef __typename}inlineCommentResolved{commentId inlineResolveProperties{isDangling resolved resolvedByDangling resolvedFriendlyDate resolvedTime resolvedUser __typename}inlineText markerRef replies __typename}inlineCommentUnresolved{commentId markerRef __typename}inlineCommentReattached{commentId __typename markerRef publishVersionNumber step{from mark{attrs{__typename annotationType}__typename}__typename}}commentCreated{__typename adfBodyContent commentId pageCommentType}commentUpdated{__typename commentId}commentDeleted{__typename commentId}commentResolved{__typename adfBodyContent commentId pageCommentType replies}commentReopened{__typename commentId}schedulePublished{publishTime eventType confVersion __typename}contentAccessRequested{contentId __typename}contentAccessDecisionMade{contentId decision __typename}}}`,{variables:{id:h,__extensions:_},onSubscriptionComplete:S,onSubscriptionData(e){T(e);let{subscriptionData:t}=e;if(!t||!t.data)return;let n=t?.data?.confluence_onContentModified?._deltas,o=t?.data?.confluence_onContentModified;n&&Array.isArray(n)&&n.length>0&&o&&b(n,o),u(t?.data?.confluence_onContentModified??null)},skip:!h||C||!(0,n("9wGTI").fg)("confluence_enable_subscriptions-context-provider"),client:(0,n("gKr8t").getAGGClient)()});(0,r.useEffect)(()=>{if(y){let e=y?.message||y?.errors?.[0]?.message||y?.graphQLErrors?.[0]?.message||y?.graphQLErrors?.[0]?.originalError?.message||y?.graphQLErrors?.[0]?.extensions?.data?.errors?.[0]?.message||y?.graphQLErrors?.[0]?.extensions?.message,t=y?.errors?.[0]?.extensions?.statusCode,o=l.some(e=>y?.message.includes(e))||!e;if(403!==t&&!o){let t=Error(`Subscription Error - :${e}`);(0,n("fJlJm").setContentErrorAttributes)(t,{objectId:c,objectType:p}),(0,n("5ZqQS").getMonitoringClient)().submitError(t,{attribution:"page-experiences"})}(0,n("7Sm4c").markErrorAsHandled)(y)}},[y,c,p]);let P=e(r).useMemo(()=>({contentModified:o,error:y}),[o,y]),A=e(r).useMemo(()=>({setContentType:m,setContentId:d,addSubscriber:g,removeSubscriber:f}),[m,d,g,f]);return(0,n("9wGTI").fg)("confluence_enable_subscriptions-context-provider")?e(r).createElement(a.Provider,{value:P},e(r).createElement(s.Provider,{value:A},t)):e(r).createElement(e(r).Fragment,null,t)},t.exports.useSubscriptionsContext=()=>(0,r.useContext)(a),t.exports.useSubscriptionsDispatchContext=()=>(0,r.useContext)(s)}),o("3vc4U",function(e,t){var o=n("42omo");e.exports.useSubscriptionValues=({contentId:e,contentType:t,replayCap:r})=>{let{activationId:i,cloudId:a}=(0,n("bQm3c").useSessionData)(),s=(0,o.useRef)(Math.floor(new Date().getTime()/1e3)),[l,u]=(0,o.useState)(0),{createAnalyticsEvent:c}=(0,n("inPa6").useAnalyticsEvents)(),d=(0,o.useCallback)(()=>{u(l+1)},[l,u]),p=(0,o.useCallback)(n=>{s.current=n?.extensions?.sequenceNumber??Math.floor(new Date().getTime()/1e3),c({type:"sendOperationalEvent",data:{action:"received",actionSubject:"subscription.event",source:"AGGSubscriptions",attributes:{contentId:e,contentType:t,request_id:n?.extensions?.agg?.request_id||"",traceId:n?.extensions?.traceId||""}}}).fire()},[c,e,t]);return{id:e&&t&&a&&i?(0,n("fSDun").getConfluenceContentAri)({siteId:a,resourceType:t,activationId:i,resourceId:e}):"",extensions:(0,o.useMemo)(()=>{let e,t=(0,n("9wGTI").fg)("confluence_frontend_comments_extend_replay_window")?48:24,o=Math.floor((Date.now()-36e5*t)/1e3);return e=void 0!==r?r:s.current<o?o:s.current,l>0?{command:{type:"replay",data:{sequenceNumber:e}}}:{}},[l,r]),onSubscriptionComplete:d,onSubscriptionData:p}}}),o("fSDun",function(e,t){let n=["database","embed","folder"];e.exports.getConfluenceContentAri=e=>{let{siteId:t,resourceType:o,activationId:r,resourceId:i}=e;return n.includes(o)?`ari:cloud:confluence:${t}:${o}/activation/${r}/${i}`:`ari:cloud:confluence:${t}:${o}/${i}`}}),o("b8XTE",function(t,o){var r=n("42omo"),i=n("a4TK8"),a=n("aJv6Q");let s=()=>{},l=(0,r.memo)(({customData:e={},metric:t,onComplete:o=s,stopTime:i,timing:a,augmentCustomDataAfterComplete:l})=>{let u=(0,r.useRef)(i),c=(0,r.useRef)(e),d=(0,r.useRef)(l);u.current=i,c.current=e,d.current=l;let p=(0,r.useCallback)(()=>{if(t){let e;o(),e=d.current?d.current(c.current):c.current;let{route:r}=t.getData();(r===n("1NBp8").VIEW_PAGE.name||r===n("1NBp8").VIEW_BLOG.name)&&(e.viewTransitionSource=(0,n("lXYVJ").getViewTransitionSource)()),n("3kTfj").browserMetrics.getPageLoadMetric().mark(`${n("3YpC9").PAGE_SEGMENT_MARK_PREFIX_END}:${t.key}`),t.stop({customData:{...e,previousRoute:n("6VdZc").browserMetricsState.previousRoute,previousContentId:n("6VdZc").browserMetricsState.previousContentId,pageLoadInfo:(0,n("78QFu").getUniquePageLoadId)()},stopTime:u.current})}},[t,o]);return(0,n("N1nBh").usePerformanceAction)(p,a),null},e(i)),u=(0,a.withTransparentErrorBoundary)({attribution:n("3IBnw").Attribution.BACKBONE})(l);t.exports.PageSegmentLoadEnd=u}),o("lgKMU",function(e,t){let o=(0,n("jmjWc").LoadableLazy)({__loadable_id__:"2Q0Hi",name:"ShareAndRestrictDialogController",loader:async()=>(await n("5apQ3")).Controller});e.exports.ShareAndRestrictDialogController=o}),o("5apQ3",function(e,t){let o=n("4mJKd")(5);e.exports=Promise.all([o("kUbUu"),o("7Q5vz"),o("lXGg9"),o("hy3sK"),o("jSdjl"),o("l2EUC"),o("6wr18"),o("kjZZD"),o("Wowvf"),o("7EorR"),o("hhss7"),o("ffEVr"),o("c4Kdp"),o("bunf9")]).then(()=>n("4adOe"))}),o("sLZsl",function(e,t){let o=(0,n("1P1Tu").createStore)({initialState:{isAutoConverted:!1},actions:{setIsAutoConverted:e=>({setState:t})=>{t({isAutoConverted:e})}},name:"isAutoConverted"}),r=(0,n("9zUhf").createHook)(o,{selector:e=>e.isAutoConverted});e.exports.useAutoConvertState=r}),o("cQhbe",function(e,t){var n,o,r,i,a,s=((n={}).VIEWED="pageViewed",n.EDITED="pageEdited",n.PUBLISHED="pagePublished",n.NOTIFICATION_SHOWN="notificationShown",n.NOTIFICATION_ERROR="notificationError",n),l=((o={}).AUTO_CONVERSION="autoConversion",o.AUTO_CONVERSION_BYLINE="autoConversionByLine",o),u=((r={}).DIALOG_OPEN="revertDialogOpen",r.CLICKED="revertClicked",r.CANCELLED="revertCancelled",r.CONFIRMED="revertConfirmed",r.ERROR="revertError",r),c=((i={}).VIEWED="panelViewed",i.SUPPORTED="panelSupported",i.NONE="panelNone",i.GET_ERROR="panelGetError",i.SET_ERROR="panelSetError",i),d=((a={}).CLICKED="bylineClicked",a.NEW_EDITOR_MODAL_OPENED="newEditorModalOpened",a.NEW_EDITOR_MODAL_CLOSED="newEditorModalClosed",a);e.exports.AutoConvertEvent=s,e.exports.AutoConvertActionSubject=l,e.exports.RevertAutoConvertEvent=u,e.exports.AutoConvertPanelEvent=c,e.exports.AutoConversionByLineEvent=d,e.exports.sendEditorConversionAnalyticsPageEvent=(e,t,n)=>{let{pageAction:o,source:r,setting:i}=t;e({type:"sendUIEvent",data:{action:"triggered",actionSubject:n,source:r,actionSubjectId:"page",attributes:{pageAction:o,setting:i}}}).fire()},e.exports.sendEditorConversionAnalyticsPanelEvent=(e,t)=>{let{level:n,panelAction:o,source:r}=t;e({type:"sendUIEvent",data:{action:"clicked",actionSubject:"autoConversion",source:r,actionSubjectId:"panel",attributes:{level:n,panelAction:o}}}).fire()}}),o("dF5uX",function(t,o){var r=n("42omo");let i=(0,n("cgtv4").defineMessages)({defaultErrorBlogifyFlagTitle:{id:"publish-page-as-blog.flags.error-message-title",defaultMessage:"We had an issue publishing the blog"},defaultErrorBlogifyFlagDescription:{id:"publish-page-as-blog.flags.error-message-description",defaultMessage:"Refresh the page and try again."},alternativeErrorBlogifyFlagTitle:{id:"publish-page-as-blog.flags.alternative-error-message-title",defaultMessage:"We cant convert this page"},pagePermissionsErrorBlogifyFlagDescription:{id:"publish-page-as-blog.flags.page-permissions-error-message-description",defaultMessage:"Restrictions have been applied to this item recently that prevent its conversion."},spacePermissionsErrorBlogifyFlagDescription:{id:"publish-page-as-blog.flags.space-permissions-error-message-description",defaultMessage:"You need additional permissions in the destination space to convert it."},pageDeletedErrorBlogifyFlagDescription:{id:"publish-page-as-blog.flags.page-deleted-error-message-description",defaultMessage:"While you were working with this content, it was deleted by someone else."},spaceRestrictionsErrorBlogifyFlagDescription:{id:"publish-page-as-blog.flags.space-restrictions-error-message-description",defaultMessage:"Restrictions in the destination space prevent this item from being converted."},archivedPageErrorBlogifyFlagDescription:{id:"publish-page-as-blog.flags.archived-page-error-message-description",defaultMessage:"While you were working with this page, it was archived by someone else."}}),a=({createAnalyticsEvent:e,isSuccess:t,actionSubject:n,attributes:o,source:r,actionSubjectId:i})=>{e({type:"sendTrackEvent",data:{actionSubject:n,action:t?"success":"failed",source:r,...o&&{attributes:o},...i&&{actionSubjectId:i}}}).fire()},s=e=>e?.includes(n("2nCTC").FLAG_ERROR_MESSAGES.PAGE_PERMISSIONS)?{title:i.alternativeErrorBlogifyFlagTitle,description:i.pagePermissionsErrorBlogifyFlagDescription}:e?.includes(n("2nCTC").FLAG_ERROR_MESSAGES.SPACE_PERMSSIONS)?{title:i.alternativeErrorBlogifyFlagTitle,description:i.spacePermissionsErrorBlogifyFlagDescription}:e?.includes(n("2nCTC").FLAG_ERROR_MESSAGES.DELETED_PAGE)||e?.includes(n("2nCTC").FLAG_ERROR_MESSAGES.DELETED_PAGE_ALT)?{title:i.alternativeErrorBlogifyFlagTitle,description:i.pageDeletedErrorBlogifyFlagDescription}:e?.includes(n("2nCTC").FLAG_ERROR_MESSAGES.SPACE_NOT_FOUND)?{title:i.alternativeErrorBlogifyFlagTitle,description:i.spaceRestrictionsErrorBlogifyFlagDescription}:e?.includes(n("2nCTC").FLAG_ERROR_MESSAGES.ARCHIVED_PAGE)?{title:i.alternativeErrorBlogifyFlagTitle,description:i.archivedPageErrorBlogifyFlagDescription}:{title:i.defaultErrorBlogifyFlagTitle,description:i.defaultErrorBlogifyFlagDescription};t.exports.publishFromPageToBlogEvent=({createAnalyticsEvent:e,actionSubject:t,attributes:n,source:o,isSuccess:r,actionSubjectId:i})=>{a({createAnalyticsEvent:e,isSuccess:r,actionSubject:t,attributes:n,source:o,actionSubjectId:i})},t.exports.publishPageAsBlogFailureEventAndFlag=({flags:t,createAnalyticsEvent:o,actionSubject:i,actionSubjectId:l,attributes:u,source:c,customFlagMessage:d})=>{a({createAnalyticsEvent:o,isSuccess:!1,actionSubject:i,attributes:u,source:c,actionSubjectId:l}),t&&t.showErrorFlag({title:d&&d.title?d.title:e(r).createElement(n("gtD4K").default,s(u?.error).title),description:d&&d.description?d.description:e(r).createElement(n("gtD4K").default,s(u?.error).description)})},t.exports.blogifyErrorMessage=s,t.exports.knownEditorError=e=>{let t="";return e&&Object.values(n("1mHQU").ALLOWED_FLAG_MESSAGES).some(function(n){if(e.includes(n))return t=n,!0}),t},t.exports.handleEditorPublishPageAsBlogError=e=>{if(!e)throw Error("Could not get the Editor Content")}}),o("2nCTC",function(e,t){e.exports.FLAG_ERROR_MESSAGES={PAGE_PERMISSIONS:"Insufficient page permissions: You are not allowed to perform that action.",SPACE_PERMSSIONS:"Insufficient destination space permissions: You are not allowed to perform that action.",DELETED_PAGE:"Source page is in trash",DELETED_PAGE_ALT:"Source page not found",SPACE_NOT_FOUND:"Destination Space not found",ARCHIVED_PAGE:"Source page is archived, cannot be copied"}}),o("3Gp1y",function(e,t){e.exports.useConvertPageToBlog=()=>{let[e]=(0,n("1KmJq").useMutation)(n("gY48x").PublishPageAsBlog);return async({flags:t,sourceAction:o,contentId:r,spaceKey:i,message:a,suppressNotifyWatchers:s,schedulePublishDate:l,retrieveEditorTitleAndContent:u,onConvertAndPublishSucceed:c,onPublishFail:d,onConvertFail:p,restrictions:m})=>{let E={contentId:r,destinationType:"blogpost",sourceStatus:o===n("iVd6X").PublishPageAsBlogSources.EditPage?"draft":"current",destinationSpaceKey:i};try{if(o===n("iVd6X").PublishPageAsBlogSources.EditPage){let{title:e,adf:t,syncRev:o}=await u();(0,n("dF5uX").handleEditorPublishPageAsBlogError)(t),E.content=JSON.stringify(t),E.title=e,E.syncRev=o,E.message=a,E.suppressNotifyWatchers=s,E.schedulePublishDate=l,m&&(E.restrictions=m)}let{data:r}=await e({variables:E}),i=r?.experimentalPublishPageAsBlog?.status==="current",p=r?.experimentalPublishPageAsBlog?._links;r&&i?c(r):p?.editui&&!l&&d({links:p,errorMessage:"Page has converted to blog but not published",flags:t})}catch(e){p({error:e,flags:t})}}}}),o("gY48x",function(e,t){let o=(0,n("eSUdr").default)`mutation PublishPageAsBlogMutation($contentId:String!$destinationType:String!$destinationSpaceKey:String$sourceStatus:String!$content:String$title:String$syncRev:String$ncsStepVersion:String$message:String$suppressNotifyWatchers:Boolean$schedulePublishDate:String$restrictions:ContentRestrictionsObj)@experimental{experimentalPublishPageAsBlog(contentId:$contentId destinationType:$destinationType destinationSpaceKey:$destinationSpaceKey sourceStatus:$sourceStatus content:$content title:$title syncRev:$syncRev ncsStepVersion:$ncsStepVersion message:$message suppressNotifyWatchers:$suppressNotifyWatchers schedulePublishDate:$schedulePublishDate restrictions:$restrictions){id _links{webui editui}status}}`;e.exports.PublishPageAsBlog=o}),o("iVd6X",function(e,t){var n,o=((n={}).ViewPage="VIEW_PAGE",n.EditPage="EDIT_PAGE",n);e.exports.PublishPageAsBlogSources=o});
//# sourceMappingURL=PublishButtonWithMoreOptions.1140131b.js.map
