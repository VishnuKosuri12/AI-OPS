function e(e){return e&&e.__esModule?e.default:e}var t=globalThis.parcelRequired477,s=t.register;s("1hgMC",function(s,a){var r,n=t("42omo"),o=((r={}).EDIT="EDIT",r.VIEW="VIEW",r);let i=(0,t("cgtv4").defineMessages)({successTitle:{id:"grant-access-dialog.request-access-popup.success-flag-title",defaultMessage:"Request sent"},successContent:{id:"grant-access-dialog.request-access-popup.success-flag-content",defaultMessage:"We’ve asked the content owner to give you edit access. You’ll get an email once the request is approved."},errorTitle:{id:"grant-access-dialog.request-access-popup.error-flag-title",defaultMessage:"We couldn’t send your request"},errorContent:{id:"grant-access-dialog.request-access-popup.error-flag-content",defaultMessage:"We ran into a problem processing your request. Refresh and try again."},successIconLabel:{id:"grant-access-dialog.request-access-popup.success-icon-label",defaultMessage:"Success"},errorIconLabel:{id:"grant-access-dialog.request-access-popup.error-icon-label",defaultMessage:"Error"}}),c=s=>{let{formatMessage:a}=(0,t("8C5kA").default)();return{showSuccessFlag:()=>s.showSuccessFlag({id:`request-access-success-${Date.now()}`,title:a(i.successTitle),description:a(i.successContent),customIcon:e(n).createElement(e(t("3sFtD")),{label:a(i.successIconLabel),color:"var(--ds-icon-success, #6A9A23)",spacing:"spacious"}),isAutoDismiss:!0}),showErrorFlag:()=>s.showErrorFlag({id:`request-access-error-${Date.now()}`,title:a(i.errorTitle),description:a(i.errorContent),customIcon:e(n).createElement(e(t("a3fRD")),{label:a(i.errorIconLabel),color:"var(--ds-icon-danger, #C9372C)",spacing:"spacious"}),isAutoDismiss:!0})}},l=(0,t("eSUdr").default)`query useUserPageAccessTypeContentOperationsQuery($id:ID!){singleContent(id:$id){id type operations{operation targetType}}}`,u=e=>{let{data:s,loading:a,error:r}=(0,t("xQxzY").useQuery)(l,{variables:{id:e}});return(0,n.useEffect)(()=>{r&&(0,t("5ZqQS").getMonitoringClient)().submitError(r,{attribution:t("3IBnw").Attribution.PERMISSIONS_EXPERIENCE})},[r]),{accessTypes:(0,n.useMemo)(()=>{let e=s?.singleContent,t=e?.operations??[],a=e?.type??void 0,r=[];return t.find(e=>e?.operation==="read"&&e.targetType===a)&&r.push("VIEW"),t.find(e=>e?.operation==="update"&&e.targetType===a)&&r.push("EDIT"),r},[s]),error:r,loading:a}},d=(0,t("cgtv4").defineMessages)({title:{id:"grant-access-dialog.request-access-popup.flag-title",defaultMessage:"Ask to edit this content?"},content:{id:"grant-access-dialog.request-access-popup.flag-content",defaultMessage:"You’ll get an email when your request is approved."},requestBtn:{id:"grant-access-dialog.request-access-popup.approve-btn",defaultMessage:"Ask to edit"}}),g="redirectedFromRestrict",p=(0,t("dPJCf").createSingleQueryParamHook)(g),f="request-edit-access",m=(0,t("eSUdr").default)`mutation RequestAccessPopupRequestAccessMutation($accessType:AccessType!$pageId:String!){requestPageAccess(requestPageAccessInput:{accessType:$accessType pageId:$pageId}){displayName}}`,E=(s,a)=>{let{edition:r}=(0,t("bQm3c").useSessionData)(),i=p(),{isLoadingForFirstTime:l,pendingRequestExists:E}=(0,t("dmDX7").usePendingRequestExists)({contentId:s}),b=!!(r===t("euL71").ConfluenceEdition.FREE||!i||l||E),{showSuccessFlag:I,showErrorFlag:A}=c(a),{setQueryParams:y}=(0,t("dPJCf").useRouteActions)(),{formatMessage:C}=(0,t("8C5kA").default)(),{createAnalyticsEvent:T}=(0,t("inPa6").useAnalyticsEvents)(),{accessTypes:v,error:h}=u(s),[S,{error:q}]=(0,t("1KmJq").useMutation)(m,{onCompleted:()=>{I()},onError:()=>{A()}}),P=(0,n.useCallback)(e=>{T({type:"sendUIEvent",data:{action:"clicked",actionSubject:"button",actionSubjectId:"request"===e?"requestEditAction":"dismissRequestEditPopupAction",source:"requestAccessPopup",attributes:{contentId:s,accessTypes:v.join(",")}}}).fire(),y({[g]:void 0})},[y,s,T,v]),M=(0,n.useCallback)(()=>(a.hideFlag(f),P("request"),S({variables:{accessType:o.EDIT,pageId:s}})),[s,P,S,a]);(0,n.useEffect)(()=>{!b&&(h&&(0,t("5ZqQS").getMonitoringClient)().submitError(h,{attribution:t("3IBnw").Attribution.PERMISSIONS_EXPERIENCE}),q&&((0,t("5ZqQS").getMonitoringClient)().submitError(q,{attribution:t("3IBnw").Attribution.PERMISSIONS_EXPERIENCE}),T({type:"sendTrackEvent",data:{action:"errored",actionSubject:"requestEditSent",source:"requestEditPopup",attributes:{contentId:s,accessTypes:v.join(",")}}}).fire()))},[v,h,q,b,T,s]),(0,n.useEffect)(()=>{!b&&v&&v.includes("VIEW")&&!v.includes("EDIT")&&(a.showFlag({id:f,title:C(d.title),customIcon:e(n).createElement(e(t("eXmBZ")),{color:"var(--ds-text-information, #1558BC)",label:C(d.title),spacing:"spacious"}),description:C(d.content),actions:[{content:C(d.requestBtn),onClick:M}],onClose:()=>P("dismiss")}),T({type:"sendUIEvent",data:{action:"viewed",actionSubject:"flag",actionSubjectId:"showRequestToEditPopup",source:"requestAccessPopup",attributes:{contentId:s,accessTypes:v.join(",")}}}).fire())},[P,M,a,C,v,b,s,T]),(0,n.useEffect)(()=>()=>{a.hideFlag(f)},[a])},b=(0,t("7aRa9").withFlags)(({contentId:e,flags:t})=>(E(e,t),null));s.exports.useRequestAccessPopup=E,s.exports.RequestAccessPopupComponent=b}),s("7aRa9",function(s,a){var r=t("42omo"),n=t("T1bCI");s.exports.withFlags=function(s){var a;return(a=class extends r.Component{render(){return e(r).createElement(n.Subscribe,{to:[t("gqqjz").FlagsStateContainer]},t=>e(r).createElement(s,{...this.props,flags:t}))}}).displayName=`withFlags(${s.displayName||s.name})`,a}}),s("dmDX7",function(e,s){var a=t("42omo");let r=(0,t("eSUdr").default)`query usePendingRequestExistsQuery($accessRequestedAaid:String!$cloudId:ID!$contentId:ID!){confluence_pendingRequestExists(accessRequestedAaid:$accessRequestedAaid cloudId:$cloudId contentId:$contentId){isPendingAccessRequestExists}}`;e.exports.usePendingRequestExists=({contentId:e})=>{let{userId:s,cloudId:n}=(0,t("bQm3c").useSessionData)(),o=!s||!n||!e||!(0,t("6mKj3").expValEquals)("confluence_frontend_existing_access_request_checks","cohort","experiment"),[i,c]=(0,a.useState)(!o),{data:l,error:u,loading:d}=(0,t("jMyy4").useQueryInterop)(r,{variables:{cloudId:n,accessRequestedAaid:s??"",contentId:e??""},skip:o,fetchPolicy:"network-only",onCompleted:()=>{c(!1)}});return{pendingRequestExists:!!l?.confluence_pendingRequestExists?.isPendingAccessRequestExists,loading:d,error:u,isLoadingForFirstTime:i}}}),s("3aGPB",function(s,a){var r,n=t("42omo"),o=t("T1bCI"),i=t("jJK3p"),c=t("fs6LW"),l=((r={}).EDIT="EDIT",r.VIEW="VIEW",r);let u=(0,t("eSUdr").default)`mutation GrantAccessDialogGrantContentAccessMutation($grantContentAccessInput:GrantContentAccessInput!){grantContentAccess(grantContentAccessInput:$grantContentAccessInput){success}}`,d=(0,n.forwardRef)(({as:s="div",style:a,...r},o)=>e(n).createElement(s,{...r,style:a,ref:o,className:(0,t("gMc0m").default)(["_1yt44ar7 _1bsbkbql",r.className])})),g=(0,n.forwardRef)(({as:s="p",style:a,...r},o)=>e(n).createElement(s,{...r,style:a,ref:o,className:(0,t("gMc0m").default)(["_11c82smr _zulp1b66 _19pkutpp _otyrpxbi _1e0c1txw _4cvr1h6o",r.className])}));g.displayName="MessageContainer";let p=(0,n.forwardRef)(({as:s="div",style:a,...r},o)=>e(n).createElement(s,{...r,style:a,ref:o,className:(0,t("gMc0m").default)(["_11c82smr _1e0c1txw _1bahh9n0",r.className])})),f=(0,n.forwardRef)(({as:s="div",style:a,...r},o)=>e(n).createElement(s,{...r,style:a,ref:o,className:(0,t("gMc0m").default)(["_1e0c1o8l _kqswh2mm",r.className])})),m=(0,t("cgtv4").defineMessages)({dialogTitleViewRequest:{id:"grant-access-dialog.dialog.title.view",defaultMessage:"View access request"},dialogTitleEditRequest:{id:"grant-access-dialog.dialog.title.edit",defaultMessage:"Edit access request"},grantViewAccess:{id:"grant-access-dialog.dialog.action.grant.view",defaultMessage:"Grant view access"},grantEditAccess:{id:"grant-access-dialog.dialog.action.grant.edit",defaultMessage:"Grant edit access"},denyAccess:{id:"grant-access-dialog.dialog.action.deny",defaultMessage:"Deny"},successTitle:{id:"grant-access-dialog.success.title",defaultMessage:"Access request granted"},errorTitle:{id:"grant-access-dialog.error.title",defaultMessage:"Access request error"},noMailServer:{id:"grant-access-dialog.error.no-mail-server",defaultMessage:"Access was granted, but there is not a mail server configured so the notification could not be sent."},sendEmailError:{id:"grant-access-dialog.error.send-email",defaultMessage:"Access was granted, but an unexpected error happened while sending the notification."},genericError:{id:"grant-access-dialog.error.generic",defaultMessage:"Sorry, there was an unexpected error while granting access."},alreadyGranted:{id:"grant-access-dialog.success.already-granted",defaultMessage:"Access was already granted to the user."},genericSuccess:{id:"grant-access-dialog.success.generic",defaultMessage:"Access was granted, a notification to the user will be sent."},requestedViewAccess:{id:"grant-access-dialog.dialog.message.request.view.access.to.content",defaultMessage:"{person} requested view access to <b>{contentTitle}</b>."},requestedEditAccess:{id:"grant-access-dialog.dialog.message.request.edit.access.to.content",defaultMessage:"{person} requested edit access to <b>{contentTitle}</b>."}}),E=(0,t("1DWH0").default)()((0,t("gmMgo").default)(({accessType:s="view",isOpen:a=!1,onActionClick:r=()=>{},accountId:E,contentId:b,createAnalyticsEvent:I,intl:A,displayName:y,children:C,contentTitle:T,profilePhoto:v})=>{let{Popup:h}=(0,t("lsxnT").useChoreographerAssets)(),S=(0,n.useCallback)(()=>({source:"grantAccessDialog",attributes:{accessType:s}}),[s]);(0,n.useEffect)(()=>{if(I){let{attributes:e,source:t}=S();I({type:"sendScreenEvent",data:{name:"grantAccessScreen",source:t,attributes:{...e,type:"dialog"}}}).fire()}},[I,S]);let q=(0,n.useCallback)(e=>{let{attributes:t,source:a}=S();return()=>{I&&I({type:"sendUIEvent",data:{action:"clicked",actionSubject:"button",actionSubjectId:"grantAccess",source:a,attributes:t}}).fire(),e({variables:{grantContentAccessInput:{contentId:b,accessType:"edit"===s?l.EDIT:l.VIEW,accountIdOrUsername:E}}}),r&&r()}},[s,E,r,b,I,S]),P=(0,n.useCallback)(e=>{let{formatMessage:t}=A,{attributes:s,source:a}=S(),r=t(m.errorTitle);return n=>{let o,i=n?.graphQLErrors?.[0]?.message;o="412"===i?t(m.noMailServer):"502"===i?t(m.sendEmailError):t(m.genericError),I&&I({type:"sendTrackEvent",data:{action:"shown",actionSubject:"error",actionSubjectId:"grantAccess",source:a,attributes:{...s,errorStatus:i}}}).fire(),e.showErrorFlag({title:r,description:o})}},[A,I,S]),M=(0,n.useCallback)(e=>{let{formatMessage:t}=A,{attributes:s,source:a}=S();return r=>{if(!r?.grantContentAccess?.success){I&&I({type:"sendTrackEvent",data:{action:"failed",actionSubject:"accessRequest",actionSubjectId:"grantAccess",source:a,attributes:s}}).fire(),e.showErrorFlag({title:t(m.errorTitle),description:t(m.genericError)});return}I&&I({type:"sendTrackEvent",data:{action:"granted",actionSubject:"access",actionSubjectId:"grantAccess",source:a,attributes:s}}).fire(),e.showSuccessFlag({title:t(m.successTitle),description:t(m.genericSuccess)})}},[A,I,S]),k=(0,n.useCallback)(()=>{let{attributes:e,source:t}=S();return()=>{I&&I({type:"sendUIEvent",data:{action:"clicked",actionSubject:"button",actionSubjectId:"denyAccess",source:t,attributes:e}}).fire(),r&&r()}},[r,I,S]),w=(0,n.useCallback)(a=>{let r="view"===s?m.requestedViewAccess:m.requestedEditAccess,o="view"===s?m.dialogTitleViewRequest:m.dialogTitleEditRequest,l="view"===s?m.grantViewAccess:m.grantEditAccess;return e(n).createElement(d,null,e(n).createElement(t("7hXDW").default,{size:"large",as:"h3"},e(n).createElement(t("gtD4K").default,o)),e(n).createElement(g,null,e(n).createElement(c.ProfileAvatar,{userId:E,name:y,src:v,size:"xsmall"}),e(n).createElement(t("gtD4K").default,{...r,values:{person:e(n).createElement(i.ProfileLink,{userId:E,fullName:y}),contentTitle:T,b:t=>e(n).createElement("b",null,t)}})),e(n).createElement(p,null,e(n).createElement(t("eEA8O").default,{appearance:"subtle-link",onClick:k(),testId:"deny-button"},e(n).createElement(t("gtD4K").default,m.denyAccess)),e(n).createElement(t("30qWc").MutationInterop,{mutation:u,onError:P(a),onCompleted:M(a)},s=>e(n).createElement(t("eEA8O").default,{onClick:q(s),testId:"grant-button",appearance:"primary"},e(n).createElement(t("gtD4K").default,l)))))},[s,E,T,y,k,P,M,q,v]);return e(n).createElement(o.Subscribe,{to:[t("gqqjz").FlagsStateContainer]},s=>e(n).createElement(h,{isOpen:!!a,content:()=>w(s),trigger:t=>e(n).createElement(f,{"data-test-id":"inline-dialog-anchor",...t},C),shouldRenderToParent:(0,t("9wGTI").fg)("should-render-to-parent-should-be-truepermissions")}))}));s.exports.GrantAccessDialog=E}),s("30qWc",function(e,s){e.exports.MutationInterop=function({children:e,mutation:s,...a}){let[r,n]=(0,t("308Wd").useMutationInterop)(s,a);return e(r,n)}}),s("jJK3p",function(s,a){var r=t("3u0dr"),n=t("frIzR"),o=t("42omo"),i=t("a6t12"),c=t("5XsiK"),l=t("dD7ks");let u=(0,t("ecnYn").xcss)({textDecoration:"underline",display:"inline-block",cursor:"pointer"}),d=(0,t("cgtv4").defineMessages)({profileLinkName:{id:"profile.link.name",defaultMessage:"{fullName} profile"}}),g=(0,r.isReactCompilerActiveV1)()?s=>{let a,r,g,p=(0,n.c)(23),{userId:f,fullName:m,isAnonymous:E,onUserLinkClick:b,referralSource:I,className:A,style:y,behavior:C,position:T,offset:v,ariaLabel:h,isUnderlinedByDefault:S}=s,q=void 0!==E&&E,P=void 0===C?"link":C,M=void 0===T?"bottom-start":T,k=void 0===S||S,{canViewUserProfile:w}=(0,t("jyPfN").useViewUserProfile)(),x=(0,t("8C5kA").default)(),R=f??"";p[0]!==R?(a={type:"USER",payload:{userId:R}},p[0]=R,p[1]=a):a=p[1];let{href:_}=(0,l.useNavigateToTeamsApp)(a);p[2]!==h||p[3]!==P||p[4]!==A||p[5]!==m||p[6]!==x||p[7]!==q||p[8]!==k||p[9]!==v||p[10]!==b||p[11]!==M||p[12]!==I||p[13]!==y||p[14]!==_||p[15]!==f?(r=()=>{if("card"===P)return e(o).createElement(i.ProfileCardWrapper,{isAnonymous:q,userId:f,position:M,offset:v,ariaLabel:h},e(o).createElement(t("6f0Oj").default,{style:y,xcss:u},m));{let s={...y,...k?{textDecoration:"underline"}:{}};return e(o).createElement(t("cPER9").PeopleLink,{target:"_blank",onClick:b,href:(0,c.isTeamsAppEnabled)()?_:(0,t("4qzKl").getAtlassianPeopleProfileUrl)(f,I),className:A,style:s,"data-testid":"profile-link","aria-label":h||x.formatMessage(d.profileLinkName,{fullName:m})},m)}},p[2]=h,p[3]=P,p[4]=A,p[5]=m,p[6]=x,p[7]=q,p[8]=k,p[9]=v,p[10]=b,p[11]=M,p[12]=I,p[13]=y,p[14]=_,p[15]=f,p[16]=r):r=p[16];let N=r;return p[17]!==m||p[18]!==w||p[19]!==q||p[20]!==N||p[21]!==f?(g=e(o).createElement(e(o).Fragment,null,q||!f||""===f?e(o).createElement(t("gtD4K").default,{id:"profile.anonymous.name",defaultMessage:"Anonymous"}):e(o).createElement(e(o).Fragment,null,w?N():e(o).createElement("span",null,m))),p[17]=m,p[18]=w,p[19]=q,p[20]=N,p[21]=f,p[22]=g):g=p[22],g}:({userId:s,fullName:a,isAnonymous:r=!1,onUserLinkClick:n,referralSource:g,className:p,style:f,behavior:m="link",position:E="bottom-start",offset:b,ariaLabel:I,isUnderlinedByDefault:A=!0})=>{let{canViewUserProfile:y}=(0,t("jyPfN").useViewUserProfile)(),C=(0,t("8C5kA").default)(),{href:T}=(0,l.useNavigateToTeamsApp)({type:"USER",payload:{userId:s??""}});return e(o).createElement(e(o).Fragment,null,r||!s||""===s?e(o).createElement(t("gtD4K").default,{id:"profile.anonymous.name",defaultMessage:"Anonymous"}):e(o).createElement(e(o).Fragment,null,y?(()=>{if("card"===m)return e(o).createElement(i.ProfileCardWrapper,{isAnonymous:r,userId:s,position:E,offset:b,ariaLabel:I},e(o).createElement(t("6f0Oj").default,{style:f,xcss:u},a));{let r={...f,...A?{textDecoration:"underline"}:{}};return e(o).createElement(t("cPER9").PeopleLink,{target:"_blank",onClick:n,href:(0,c.isTeamsAppEnabled)()?T:(0,t("4qzKl").getAtlassianPeopleProfileUrl)(s,g),className:p,style:r,"data-testid":"profile-link","aria-label":I||C.formatMessage(d.profileLinkName,{fullName:a})},a)}})():e(o).createElement("span",null,a)))};s.exports.ProfileLink=g}),s("cPER9",function(s,a){var r=t("3u0dr"),n=t("frIzR"),o=t("42omo"),i=t("5XsiK");let c=(0,r.isReactCompilerActiveV1)()?s=>{let a,r,c,l,u=(0,n.c)(8);u[0]!==s?({href:a,to:c,...r}=s,u[0]=s,u[1]=a,u[2]=r,u[3]=c):(a=u[1],r=u[2],c=u[3]);let d=c||a,g=d&&0!==d.indexOf("/")?`/${d}`:d,p=g.startsWith(t("jlIaF").CONTEXT_PATH)?g:`${t("jlIaF").CONTEXT_PATH}${g}`,f=(0,i.isTeamsAppEnabled)()?d:p;return u[4]!==r||u[5]!==s||u[6]!==f?(l=e(o).createElement(t("8lYIw").Link,{...s,href:f,...r}),u[4]=r,u[5]=s,u[6]=f,u[7]=l):l=u[7],l}:s=>{let{href:a,to:r,...n}=s,c=r||a,l=c&&0!==c.indexOf("/")?`/${c}`:c,u=l.startsWith(t("jlIaF").CONTEXT_PATH)?l:`${t("jlIaF").CONTEXT_PATH}${l}`;return e(o).createElement(t("8lYIw").Link,{...s,href:(0,i.isTeamsAppEnabled)()?c:u,...n})};c.propTypes={href:e(t("4xcIM")).string,to:e(t("4xcIM")).string},s.exports.PeopleLink=c}),s("fs6LW",function(s,a){var r=t("3u0dr"),n=t("frIzR"),o=t("42omo"),i=t("a6t12");let c={base:(0,t("ecnYn").xcss)({display:"inline-flex",backgroundColor:"color.background.neutral.subtle",borderWidth:"0",padding:"space.0",borderRadius:"radius.full",outlineOffset:"space.0",":focus-within":{outlineStyle:"solid",outlineWidth:"border.width.focused",outlineColor:"color.border.focused"}}),cursor:(0,t("ecnYn").xcss)({cursor:"pointer"})},l=(0,t("cgtv4").defineMessages)({label:{id:"profile.avatar.image",defaultMessage:"profile image of a user"},ariaLabel:{id:"profile.avatar.ariaLabel",defaultMessage:"More information about {name}"}}),u=(0,r.isReactCompilerActiveV1)()?s=>{let a,r,u,g,p,f,m,E,b,I,A=(0,n.c)(39),{userId:y,canViewProfile:C,isAnonymous:T,size:v,src:h,onClick:S,trigger:q,name:P,stackIndex:M,testId:k,position:w,borderColor:x,offset:R}=s,_=void 0===C||C,N=void 0!==T&&T,D=void 0===v?"medium":v,L=(0,t("8C5kA").default)(),j=!N&&_&&h?h:void 0,{canViewUserProfile:F}=(0,t("jyPfN").useViewUserProfile)(),O=(0,o.useRef)(null),[U,V]=(0,o.useState)(!1),[W,K]=(0,o.useState)(!1),[$,Y]=(0,o.useState)(!1);A[0]===Symbol.for("react.memo_cache_sentinel")?(a=e=>{V(e)},A[0]=a):a=A[0];let X=a;A[1]!==U||A[2]!==W?(r=()=>{W&&!U&&O.current&&(O.current.focus(),K(!1))},u=[U,W],A[1]=U,A[2]=W,A[3]=r,A[4]=u):(r=A[3],u=A[4]),(0,o.useEffect)(r,u),A[5]!==U||A[6]!==$?(g=e=>{e.stopPropagation(),"Enter"===e.key?(Y(!0),V(d),K(!0)):"Escape"===e.key&&U&&$&&(V(!1),Y(!1),K(!0))},A[5]=U,A[6]=$,A[7]=g):g=A[7];let Q=g,z=P||"";A[8]!==L?(p=L.formatMessage(l.label),A[8]=L,A[9]=p):p=A[9],A[10]!==j||A[11]!==x||A[12]!==S||A[13]!==D||A[14]!==M||A[15]!==z||A[16]!==p||A[17]!==k?(f=e(o).createElement(t("esRft").default,{src:j,size:D,target:"_blank",name:z,label:p,stackIndex:M,testId:k,borderColor:x,onClick:S}),A[10]=j,A[11]=x,A[12]=S,A[13]=D,A[14]=M,A[15]=z,A[16]=p,A[17]=k,A[18]=f):f=A[18];let B=f,G=P||"",H=_&&F&&c.cursor;return A[19]!==H?(m=[c.base,H],A[19]=H,A[20]=m):m=A[20],A[21]!==L||A[22]!==P?(E=L.formatMessage(l.ariaLabel,{name:P||""}),A[21]=L,A[22]=P,A[23]=E):E=A[23],A[24]!==B||A[25]!==Q||A[26]!==U||A[27]!==m||A[28]!==E?(b=e(o).createElement(t("6f0Oj").default,{xcss:m,"aria-haspopup":"true","aria-expanded":U,role:"button",testId:"avatarWrapperTestId","aria-label":E,tabIndex:0,ref:O,onKeyDown:Q},B),A[24]=B,A[25]=Q,A[26]=U,A[27]=m,A[28]=E,A[29]=b):b=A[29],A[30]!==_||A[31]!==N||A[32]!==R||A[33]!==w||A[34]!==G||A[35]!==b||A[36]!==q||A[37]!==y?(I=e(o).createElement(i.ProfileCardWrapper,{userId:y,canViewProfile:_,isAnonymous:N,trigger:q,fullName:G,disabledAriaAttributes:!0,onVisibilityChange:X,position:w,offset:R},b),A[30]=_,A[31]=N,A[32]=R,A[33]=w,A[34]=G,A[35]=b,A[36]=q,A[37]=y,A[38]=I):I=A[38],I}:({userId:s,canViewProfile:a=!0,isAnonymous:r=!1,size:n="medium",src:u,onClick:d,trigger:g,name:p,stackIndex:f,testId:m,position:E,borderColor:b,offset:I})=>{let A=(0,t("8C5kA").default)(),y=!r&&a&&u?u:void 0,{canViewUserProfile:C}=(0,t("jyPfN").useViewUserProfile)(),T=(0,o.useRef)(null),[v,h]=(0,o.useState)(!1),[S,q]=(0,o.useState)(!1),[P,M]=(0,o.useState)(!1);(0,o.useEffect)(()=>{S&&!v&&T.current&&(T.current.focus(),q(!1))},[v,S]);let k=e(o).createElement(t("esRft").default,{src:y,size:n,target:"_blank",name:p||"",label:A.formatMessage(l.label),stackIndex:f,testId:m,borderColor:b,onClick:d});return e(o).createElement(i.ProfileCardWrapper,{userId:s,canViewProfile:a,isAnonymous:r,trigger:g,fullName:p||"",disabledAriaAttributes:!0,onVisibilityChange:e=>{h(e)},position:E,offset:I},e(o).createElement(t("6f0Oj").default,{xcss:[c.base,a&&C&&c.cursor],"aria-haspopup":"true","aria-expanded":v,role:"button",testId:"avatarWrapperTestId","aria-label":A.formatMessage(l.ariaLabel,{name:p||""}),tabIndex:0,ref:T,onKeyDown:e=>{e.stopPropagation(),"Enter"===e.key?(M(!0),h(e=>!e),q(!0)):"Escape"===e.key&&v&&P&&(h(!1),M(!1),q(!0))}},k))};function d(e){return!e}s.exports.ProfileAvatar=u}),s("lsxnT",function(e,s){var a=t("42omo");e.exports.useChoreographerAssets=()=>{let e=(0,a.useContext)(t("cryCi").Context);if(!e)throw Error("ChoreographerAssetsContext not found, did you include the correct Context provider?");return e}}),s("foQ4a",function(e,s){e.exports.useIsExternalCollaborator=()=>{let{accessStatus:e}=(0,t("bQm3c").useSessionData)();return{isExternalCollaborator:e===t("d9tcB").AccessStatus.EXTERNAL_COLLABORATOR_ACCESS}}}),s("fd6g2",function(e,t){e.exports.MENTIONS_QUERY_CUSTOM_KEY="mentions-query",e.exports.PROFILE_CARD_QUERY_CUSTOM_KEY="profile-card-query",e.exports.LEGACY_EXTENSION_LOADING_CUSTOM_KEY="legacy-extension-loading",e.exports.FABRIC_PUBLISH_PAGE_KEY="fabric-publish-page",e.exports.TIME_TO_APP_IDLE_KEY="time-to-app-idle",e.exports.TEAM_CALENDARS_EVENT_FETCH_KEY="tc-events-fetch",e.exports.TEAM_CALENDARS_SUBCALS_FETCH_KEY="tc-subcals-fetch",e.exports.TEAM_CALENDARS_JIRA_PROJECTS_FETCH_KEY="tc-jira-projects-fetch"}),s("6OL2O",function(e,s){Object.defineProperty(e.exports,"getNavigateToTeamsApp",{get:()=>t("5t3NX").getNavigateToTeamsApp,set:void 0,enumerable:!0,configurable:!0}),t("5t3NX")}),s("5t3NX",function(e,s){var a=t("bYUc2");e.exports.getNavigateToTeamsApp=(e,s,r)=>{let n=(0,a.getIsNav4EnabledSafe)();return(0,t("ay6Zz").navigateToTeamsApp)({hostProduct:"confluence",orgId:e,userHasNav4Enabled:n,shouldOpenInSameTab:r,...s})}});
//# sourceMappingURL=RequestAccessPopup.514552a8.js.map
