function e(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var r=globalThis.parcelRequired477,n=r.register;n("auvZ1",function(e,t){let n=(0,r("jmjWc").LoadableLazy)({__loadable_id__:"9WcCJ",name:"FooterCommentsSummaryCombined",loader:async()=>(await r("2ckjH")).FooterCommentsSummaryCombinedWithErrorBoundary});e.exports.FooterCommentsSummaryCombined=n}),n("2ckjH",function(e,t){e.exports=r("4mJKd")(5)("5lfr5").then(()=>r("ebALC"))}),n("4mJKd",function(e,t){e.exports=e=>t=>import(r("8tirZ").shardUrl(r("02nRr").resolve(t),e))}),n("8tirZ",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.applyShardToDomain=s,e.exports.domainShardingKey=void 0,e.exports.getDomainShardIndex=n,e.exports.shardUrl=function(e,t){return globalThis[r]?a(e,t):e},e.exports.shardUrlUnchecked=a;let r="__ATLASPACK_ENABLE_DOMAIN_SHARDS";function n(e,t){let r=t+1,n=e.split("").reduce((e,t)=>{let n=(e<<r)-e+t.charCodeAt(0);return n&n},0);return(n%=r)<0&&(n+=r),n}let o=/-\d+$/;function m(e){if(!o.test(e))return e;let t=e.lastIndexOf("-");return e.slice(0,t)}function s(e,t){let r=e.indexOf("."),n=0===t?"":`-${t-1}`;if(-1===r)return`${m(e)}${n}`;let o=m(e.slice(0,r));return`${o}${n}${e.slice(r)}`}function a(e,t){let r=new URL(e),o=n(function(e){let t=e.lastIndexOf("/");if(-1===t||t===e.length-1)throw Error("Expected an absolute URL with a file name, unable to apply sharding.");return e.slice(t+1)}(r.pathname),t);return r.hostname=s(r.hostname,o),r.toString()}e.exports.domainShardingKey=r}),n("02nRr",function(t,r){e(t.exports,"register",()=>n,e=>n=e),e(t.exports,"resolve",()=>o,e=>o=e);var n,o,m=new Map;n=function(e,t){for(var r=0;r<t.length-1;r+=2)m.set(t[r],{baseUrl:e,path:t[r+1]})},o=function(e){var t=m.get(e);if(null==t)throw Error("Could not resolve bundle with id "+e);return new URL(t.path,t.baseUrl).toString()}}),n("9VC5k",function(e,n){var o,m,s,a,i=r("42omo"),l=r("l998X");r("42omo"),r("42omo");let c=({alt:e})=>(0,l.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,l.jsx)("title",{children:e}),(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.4473 7.99998C11.4473 7.63179 11.7457 7.33331 12.1139 7.33331H13.3339C13.7021 7.33331 14.0006 7.63179 14.0006 7.99998C14.0006 8.36817 13.7021 8.66665 13.3339 8.66665H12.1139C11.7457 8.66665 11.4473 8.36817 11.4473 7.99998Z",fill:"url(#paint0_linear_2378_7139)"}),(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.00065 2C8.36884 2 8.66732 2.29848 8.66732 2.66667V3.88667C8.66732 4.25486 8.36884 4.55333 8.00065 4.55333C7.63246 4.55333 7.33398 4.25486 7.33398 3.88667V2.66667C7.33398 2.29848 7.63246 2 8.00065 2Z",fill:"url(#paint1_linear_2378_7139)"}),(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 7.99998C2 7.63179 2.29848 7.33331 2.66667 7.33331H3.88667C4.25486 7.33331 4.55333 7.63179 4.55333 7.99998C4.55333 8.36817 4.25486 8.66665 3.88667 8.66665H2.66667C2.29848 8.66665 2 8.36817 2 7.99998Z",fill:"url(#paint2_linear_2378_7139)"}),(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.00065 11.4467C8.36884 11.4467 8.66732 11.7451 8.66732 12.1133V13.3333C8.66732 13.7015 8.36884 14 8.00065 14C7.63246 14 7.33398 13.7015 7.33398 13.3333V12.1133C7.33398 11.7451 7.63246 11.4467 8.00065 11.4467Z",fill:"url(#paint3_linear_2378_7139)"}),(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.52925 9.52858C9.7896 9.26823 10.2117 9.26823 10.4721 9.52858L13.1387 12.1952C13.3991 12.4556 13.3991 12.8777 13.1387 13.1381C12.8784 13.3984 12.4563 13.3984 12.1959 13.1381L9.52925 10.4714C9.2689 10.211 9.2689 9.78892 9.52925 9.52858Z",fill:"#2684FF"}),(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.1387 2.86195C13.3991 3.1223 13.3991 3.54441 13.1387 3.80476L10.4721 6.47142C10.2117 6.73177 9.7896 6.73177 9.52925 6.47142C9.2689 6.21108 9.2689 5.78897 9.52925 5.52862L12.1959 2.86195C12.4563 2.6016 12.8784 2.6016 13.1387 2.86195Z",fill:"#2684FF"}),(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.86128 2.86195C3.12163 2.6016 3.54374 2.6016 3.80409 2.86195L6.47075 5.52862C6.7311 5.78897 6.7311 6.21108 6.47075 6.47142C6.2104 6.73177 5.78829 6.73177 5.52794 6.47142L2.86128 3.80476C2.60093 3.54441 2.60093 3.1223 2.86128 2.86195Z",fill:"#2684FF"}),(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.47075 9.52858C6.7311 9.78892 6.7311 10.211 6.47075 10.4714L3.80409 13.1381C3.54374 13.3984 3.12163 13.3984 2.86128 13.1381C2.60093 12.8777 2.60093 12.4556 2.86128 12.1952L5.52794 9.52858C5.78829 9.26823 6.2104 9.26823 6.47075 9.52858Z",fill:"#2684FF"}),(0,l.jsxs)("defs",{children:[(0,l.jsxs)("linearGradient",{id:"paint0_linear_2378_7139",x1:"14.0006",y1:"7.99998",x2:"11.6672",y2:"7.99998",gradientUnits:"userSpaceOnUse",children:[(0,l.jsx)("stop",{offset:"0.270833",stopColor:"#2684FF"}),(0,l.jsx)("stop",{offset:"1",stopColor:"#0052CC"})]}),(0,l.jsxs)("linearGradient",{id:"paint1_linear_2378_7139",x1:"8.33398",y1:"2",x2:"8.33398",y2:"4.33333",gradientUnits:"userSpaceOnUse",children:[(0,l.jsx)("stop",{offset:"0.1875",stopColor:"#2684FF"}),(0,l.jsx)("stop",{offset:"1",stopColor:"#0052CC"})]}),(0,l.jsxs)("linearGradient",{id:"paint2_linear_2378_7139",x1:"4.5533",y1:"7.99998",x2:"2.21997",y2:"7.99998",gradientUnits:"userSpaceOnUse",children:[(0,l.jsx)("stop",{stopColor:"#0052CC"}),(0,l.jsx)("stop",{offset:"0.791667",stopColor:"#2684FF"})]}),(0,l.jsxs)("linearGradient",{id:"paint3_linear_2378_7139",x1:"8.33398",y1:"11.3333",x2:"8.33398",y2:"14",gradientUnits:"userSpaceOnUse",children:[(0,l.jsx)("stop",{stopColor:"#0052CC"}),(0,l.jsx)("stop",{offset:"0.802083",stopColor:"#2684FF"})]})]})]}),u=(0,r("cgtv4").defineMessages)({generatingSummary:{id:"ai-skeleton-loading.title",defaultMessage:"Atlassian Intelligence is generating a summary..."},logoAltText:{id:"ai-skeleton-loading.logo-alt",defaultMessage:"Atlassian Intelligence Logo"}}),d=(0,r("ecnYn").xcss)({display:"flex",alignItems:"center",gap:"space.050",marginBottom:"space.200",font:"font.body.UNSAFE_small",color:"color.text.subtle"}),y=()=>{let e=(0,r("8C5kA").default)();return(0,l.jsxs)(r("6f0Oj").default,{padding:"space.300",children:[(0,l.jsxs)(r("6f0Oj").default,{xcss:d,children:[(0,l.jsx)(c,{alt:e.formatMessage(u.logoAltText)}),(0,l.jsx)("div",{children:e.formatMessage(u.generatingSummary)})]}),(0,l.jsxs)(r("1GzhS").default,{space:"space.100",children:[(0,l.jsx)(r("kpYGL").default,{height:16,width:"100%",borderRadius:8,isShimmering:!0}),(0,l.jsx)(r("kpYGL").default,{height:16,width:"100%",borderRadius:8,isShimmering:!0}),(0,l.jsx)(r("kpYGL").default,{height:16,width:"100%",borderRadius:8,isShimmering:!0}),(0,l.jsx)(r("kpYGL").default,{height:16,width:"100%",borderRadius:8,isShimmering:!0})]})]})};var f=r("8jP1I"),p=((o={}).FOOTER="FOOTER",o.INLINE="INLINE",o),C=r("j1Ss3"),g=((m={}).FOOTER="FOOTER",m.INLINE="INLINE",m);(s={}).PAGE="PAGE",s.BLOGPOST="BLOGPOST";let E=({contentId:e,contentType:t,shouldSkipFooterCommentsQuery:n=!1,shouldSkipInlineCommentsQuery:o=!1})=>{let{data:m,loading:s,error:a,refetch:i}=(0,C.useQuery)((0,r("eSUdr").default)`query useCombinedCommentsSummariesQueriesFooterCommentsSummaryQuery($contentId:ID!$contentType:SummaryType!$commentsType:CommentsType!){getCommentsSummary(contentId:$contentId contentType:$contentType commentsType:$commentsType){contentId summary summaryId language}}`,{variables:{contentId:e,contentType:t,commentsType:g.FOOTER},notifyOnNetworkStatusChange:!0,skip:n}),{data:l,loading:c,error:u,refetch:d}=(0,C.useQuery)((0,r("eSUdr").default)`query useCombinedCommentsSummariesQueriesInlineCommentsSummaryQuery($contentId:ID!$contentType:SummaryType!$commentsType:CommentsType!){getCommentsSummary(contentId:$contentId contentType:$contentType commentsType:$commentsType){contentId summary summaryId language}}`,{variables:{contentId:e,contentType:t,commentsType:g.INLINE},notifyOnNetworkStatusChange:!0,skip:o});return{data:{footerCommentsSummaryData:m,inlineCommentsSummaryData:l},loading:s||c,errors:{footerCommentsSummaryError:a,inlineCommentsSummaryError:u},refetch:()=>{i(),d()}}},h=(0,r("lSOAM").createInteractionMetric)({key:r("jIOyV").COMMENTS_SUMMARY_COMPONENT_INTERACTION});var I=r("b3j2Y");let T=(e,t,n,o)=>{let m=(0,i.useContext)(r("1kHsc").ExperienceTrackerContext),{footerCommentsCount:s,unresolvedInlineCommentsCount:a}=(0,i.useContext)(r("3Am3T").CommentCountsContext),{errorType:l,isExpectedError:c}=(0,r("dL3KX").useSummaryErrorHelper)(r("irVI7").COMMENTS_SUMMARY_EXPERIENCE,n),{errorType:u,isExpectedError:d}=(0,r("dL3KX").useSummaryErrorHelper)(r("irVI7").COMMENTS_SUMMARY_EXPERIENCE,o),{errorType:y,commentsType:f}=(0,i.useMemo)(()=>{let e,t=[];return n&&o?(l===u&&(e=l),t=[r("7eOQq").CommentsType.FOOTER,r("7eOQq").CommentsType.INLINE]):n?(e=l,t=[r("7eOQq").CommentsType.FOOTER]):o&&(e=u,t=[r("7eOQq").CommentsType.INLINE]),{errorType:e||r("dL3KX").HandledErrorType.GeneralError,commentsType:t}},[o,u,n,l]);return c&&(0,r("7Sm4c").markErrorAsHandled)(n),d&&(0,r("7Sm4c").markErrorAsHandled)(o),(n&&(o||0===a)||o&&0===s)&&(c&&(d||0===a)||d&&0===s?m.abort({name:r("irVI7").COMMENTS_SUMMARY_EXPERIENCE,reason:`Can not generate summary due to ${y}`,attributes:{contentId:e,source:t}}):m.fail({name:r("irVI7").COMMENTS_SUMMARY_EXPERIENCE,error:n||o,attributes:{footerCommentsErrorType:l,inlineCommentsErrorType:u}})),{erredQueries:f,errorType:y,shouldCallErrorDisplayForFooterComments:!!n&&!c,shouldCallErrorDisplayForInlineComments:!!o&&!d}},S=(0,r("ecnYn").xcss)({color:"color.text.subtlest",font:'var(--ds-font-body, normal 400 14px/20px ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Ubuntu, "Helvetica Neue", sans-serif)'}),A=(0,r("cgtv4").defineMessages)({combinedErrorGeneral:{id:"ai-comments-summary.comments-summaries-error.combined-error-general",defaultMessage:"Atlassian Intelligence can’t provide a summary right now. You can try again later or read more <a>in our support documentation</a>."},combinedErrorTooMuchContent:{id:"ai-comments-summary.comments-summaries-error.combined-error-too-much-content",defaultMessage:"There are too many comments for Atlassian Intelligence (AI) to summarize. Try again on content with fewer comments."},combinedErrorNotEnoughContent:{id:"ai-comments-summary.comments-summaries-error.combined-error-too-little-content",defaultMessage:"There aren’t enough comments for Atlassian Intelligence (AI) to summarize. Try again when more comments have been added."},combinedErrorRateLimit:{id:"ai-comments-summary.comments-summaries-error.combined-error-rate-limit",defaultMessage:"We’ve received too many recent requests for Atlassian Intelligence (AI). Try again in a few minutes or <a>read about excessive use of AI</a>."},combinedErrorAUPViolation:{id:"ai-comments-summary.comments-summaries-error.combined-error-aup-violation",defaultMessage:"Atlassian Intelligence (AI) can’t provide a summary of the comments on this content, as some comments may not comply with our <a>Acceptable Use Policy</a>."},footerCommentsErrorGeneral:{id:"ai-comments-summary.comments-summaries-error.footer-comments-error-general",defaultMessage:"There is no summary of page comments at this time. You can try again later or read more <a>in our support documentation</a>."},footerCommentsErrorTooMuchContent:{id:"ai-comments-summary.comments-summaries-error.footer-comments-error-too-much-content",defaultMessage:"This summary only includes inline comments, as there are too many page comments for Atlassian Intelligence (AI) to summarize."},footerCommentsErrorNotEnoughContent:{id:"ai-comments-summary.comments-summaries-error.footer-comments-error-too-little-content",defaultMessage:"This summary only includes inline comments, as there aren’t enough page comments for Atlassian Intelligence (AI) to summarize."},footerCommentsErrorRateLimit:{id:"ai-comments-summary.comments-summaries-error.footer-comments-error-rate-limit",defaultMessage:"This summary only includes inline comments, as we’ve received too many page comment summary requests for Atlassian Intelligence (AI). Try again in a few minutes or <a>read about excessive use of AI</a>."},footerCommentsErrorAUPViolation:{id:"ai-comments-summary.comments-summaries-error.footer-comments-error-aup-violation",defaultMessage:"This summary only includes inline comments, as some page comments may not comply with Atlassian’s <a>Acceptable Use Policy</a>."},inlineCommentsErrorGeneral:{id:"ai-comments-summary.comments-summaries-error.inline-comments-error-general",defaultMessage:"There is no summary of inline comments at this time. You can try again later or read more <a>in our support documentation</a>."},inlineCommentsErrorTooMuchContent:{id:"ai-comments-summary.comments-summaries-error.inline-comments-error-too-much-content",defaultMessage:"This summary only includes page comments, as there are too many inline comments for Atlassian Intelligence (AI) to summarize."},inlineCommentsErrorNotEnoughContent:{id:"ai-comments-summary.comments-summaries-error.inline-error-too-little-content",defaultMessage:"This summary only includes page comments, as there aren’t enough inline comments for Atlassian Intelligence (AI) to summarize."},inlineCommentsErrorRateLimit:{id:"ai-comments-summary.comments-summaries-error.inline-comments-error-rate-limit",defaultMessage:"This summary only includes page comments, as we’ve received too many inline comment summary requests for Atlassian Intelligence (AI). Try again in a few minutes or <a>read about excessive use of AI</a>."},inlineCommentsErrorAUPViolation:{id:"ai-comments-summary.comments-summaries-error.inline-comments-error-aup-violation",defaultMessage:"This summary only includes page comments, as some inline comments may not comply with Atlassian’s <a>Acceptable Use Policy</a>."}}),M=(0,r("cgtv4").defineMessages)({footerCommentsErrorGeneral:{id:"ai-comments-summary.comments-summaries-error.footer-comments-error-general.livedocs",defaultMessage:"There is no summary of general comments at this time. You can try again later or read more <a>in our support documentation</a>."},footerCommentsErrorTooMuchContent:{id:"ai-comments-summary.comments-summaries-error.footer-comments-error-too-much-content.livedocs",defaultMessage:"This summary only includes inline comments, as there are too many general comments for Atlassian Intelligence (AI) to summarize."},footerCommentsErrorNotEnoughContent:{id:"ai-comments-summary.comments-summaries-error.footer-comments-error-too-little-content.livedocs",defaultMessage:"This summary only includes inline comments, as there aren’t enough general comments for Atlassian Intelligence (AI) to summarize."},footerCommentsErrorRateLimit:{id:"ai-comments-summary.comments-summaries-error.footer-comments-error-rate-limit.livedocs",defaultMessage:"This summary only includes inline comments, as we’ve received too many general comment summary requests for Atlassian Intelligence (AI). Try again in a few minutes or <a>read about excessive use of AI</a>."},footerCommentsErrorAUPViolation:{id:"ai-comments-summary.comments-summaries-error.footer-comments-error-aup-violation.livedocs",defaultMessage:"This summary only includes inline comments, as some general comments may not comply with Atlassian’s <a>Acceptable Use Policy</a>."},inlineCommentsErrorTooMuchContent:{id:"ai-comments-summary.comments-summaries-error.inline-comments-error-too-much-content.livedocs",defaultMessage:"This summary only includes general comments, as there are too many inline comments for Atlassian Intelligence (AI) to summarize."},inlineCommentsErrorNotEnoughContent:{id:"ai-comments-summary.comments-summaries-error.inline-error-too-little-content.livedocs",defaultMessage:"This summary only includes general comments, as there aren’t enough inline comments for Atlassian Intelligence (AI) to summarize."},inlineCommentsErrorRateLimit:{id:"ai-comments-summary.comments-summaries-error.inline-comments-error-rate-limit.livedocs",defaultMessage:"This summary only includes general comments, as we’ve received too many inline comment summary requests for Atlassian Intelligence (AI). Try again in a few minutes or <a>read about excessive use of AI</a>."},inlineCommentsErrorAUPViolation:{id:"ai-comments-summary.comments-summaries-error.inline-comments-error-aup-violation.livedocs",defaultMessage:"This summary only includes general comments, as some inline comments may not comply with Atlassian’s <a>Acceptable Use Policy</a>."}}),x=(0,r("jhwJP").mergeLiveDocI18n)(A,M),b=({contentId:e,footerCommentsError:n,inlineCommentsError:o,source:m})=>{let s=(0,r("8C5kA").default)(),{createAnalyticsEvent:a}=(0,r("inPa6").useAnalyticsEvents)(),{trackAIResultError:l}=(0,r("fYQcF").useAIEventsInstrumentation)(),{erredQueries:c,errorType:u,shouldCallErrorDisplayForFooterComments:d,shouldCallErrorDisplayForInlineComments:y}=T(e,m,n,o),{footerCommentsCount:f,unresolvedInlineCommentsCount:p}=(0,i.useContext)(r("3Am3T").CommentCountsContext);(0,i.useEffect)(()=>{l({aiErrorMessage:u,aiErrorCode:400},{attributes:{contentId:e,errorType:u,commentsType:c,source:m}})},[c,e,l,u,m]);let C=t=>{a({type:"sendUIEvent",data:{source:"commentsSummaryError",action:"clicked",actionSubject:"link",actionSubjectId:`atlassianIntelligence${t}DocsLink`,attributes:{contentId:e,errorType:u,commentsType:c,source:m}}}).fire()};return t(i).createElement(r("6f0Oj").default,{xcss:S},t(i).createElement(r("5dK2X").default,{as:"p"},(()=>{let e="combined";switch(n&&!o&&p>0&&(e="footerComments"),o&&!n&&f>0&&(e="inlineComments"),u){case r("dL3KX").HandledErrorType.TooMuchContent:return s.formatMessage(x[`${e}ErrorTooMuchContent`]);case r("dL3KX").HandledErrorType.NotEnoughContent:return s.formatMessage(x[`${e}ErrorNotEnoughContent`]);case r("dL3KX").HandledErrorType.AUPViolation:return s.formatMessage(x[`${e}ErrorAUPViolation`],{a:e=>(0,r("9wGTI").fg)("dst-a11y__replace-anchor-with-link__confluence-ai2")?t(i).createElement(r("2Nwuj").default,{href:r("53ZHq").ACCEPTABLE_USE_POLICY_URL,target:"_blank",onClick:()=>C("AupViolation")},e):t(i).createElement("a",{href:r("53ZHq").ACCEPTABLE_USE_POLICY_URL,target:"_blank",onClick:()=>C("AupViolation")},e)});case r("dL3KX").HandledErrorType.RateLimit:return s.formatMessage(x[`${e}ErrorRateLimit`],{a:e=>(0,r("9wGTI").fg)("dst-a11y__replace-anchor-with-link__confluence-ai2")?t(i).createElement(r("2Nwuj").default,{href:r("53ZHq").USAGE_LIMITS_DOCS_URL,target:"_blank",onClick:()=>C("RateLimit")},e):t(i).createElement("a",{href:r("53ZHq").USAGE_LIMITS_DOCS_URL,target:"_blank",onClick:()=>C("RateLimit")},e)});default:return s.formatMessage(x[`${e}ErrorGeneral`],{a:e=>(0,r("9wGTI").fg)("dst-a11y__replace-anchor-with-link__confluence-ai2")?t(i).createElement(r("2Nwuj").default,{href:r("53ZHq").TROUBLE_SHOOTING_DOCS_URL,target:"_blank",onClick:()=>C("Troubleshooting")},e):t(i).createElement("a",{href:r("53ZHq").TROUBLE_SHOOTING_DOCS_URL,target:"_blank",onClick:()=>C("Troubleshooting")},e)})}})()),n&&d&&t(i).createElement(I.ErrorDisplay,{error:n}),o&&y&&t(i).createElement(I.ErrorDisplay,{error:o}))},v=(0,r("ecnYn").xcss)({height:"100%",font:"font.body.large"}),_=(0,r("ecnYn").xcss)({width:"calc(100% + 32px)",marginLeft:"space.negative.200"}),O=(0,r("cgtv4").defineMessages)({pageCommentsHeader:{id:"ai-comments-summary.combined-comments-summary.page-comments-header",defaultMessage:"Page comments"},inlineCommentsHeader:{id:"ai-comments-summary.combined-comments-summary.inline-comments-header",defaultMessage:"Inline comments"}}),R=(0,r("cgtv4").defineMessages)({pageCommentsHeader:{id:"ai-comments-summary.combined-comments-summary.page-comments-header.livedocs",defaultMessage:"General comments"}}),L=(0,r("jhwJP").mergeLiveDocI18n)(O,R);var w=((a={}).Footer="footer",a.Header="header",a.Feed="feed",a);e.exports.CommentsSummarySource=w,e.exports.CommentsSummaryContent=({contentId:e,contentType:n,spaceKey:o,onRefresh:m,shouldRefetchCommentsSummary:s=!1,source:a,isInObjectSidebar:l,showAIDisclaimer:c=!0})=>{let u=(0,r("8C5kA").default)(),d=(0,i.useContext)(r("1kHsc").ExperienceTrackerContext),{createAnalyticsEvent:C}=(0,r("inPa6").useAnalyticsEvents)(),{edition:g}=(0,r("bQm3c").useSessionData)(),{footerCommentsCount:I,unresolvedInlineCommentsCount:T}=(0,i.useContext)(r("3Am3T").CommentCountsContext),{trackAIInteractionInit:S,trackAIResultView:A,trackAIInteractionDismiss:M}=(0,r("fYQcF").useAIEventsInstrumentation)(),{data:x,errors:O,loading:R,refetch:w}=E({contentId:e,contentType:"page"===n?r("7eOQq").SummaryType.PAGE:r("7eOQq").SummaryType.BLOGPOST,shouldSkipFooterCommentsQuery:0===I,shouldSkipInlineCommentsQuery:0===T}),j=()=>{R||(w(),m?.())},N=(0,i.useCallback)(()=>{d.start({name:r("irVI7").COMMENTS_SUMMARY_EXPERIENCE,attributes:{contentId:e,source:a}}),h.start()},[e,d,a]);(0,i.useEffect)(()=>{R&&N(),R||h.stop()},[R,N]);let k=x.footerCommentsSummaryData?.getCommentsSummary?.summary??"",U=x.inlineCommentsSummaryData?.getCommentsSummary?.summary??"",P=(0,i.useRef)(R);(0,i.useEffect)(()=>{P.current=R},[R]),(0,i.useEffect)(()=>(S(),s&&(w(),m?.()),()=>{P.current&&M()}),[]);let F=(0,i.useMemo)(()=>x.footerCommentsSummaryData?.getCommentsSummary?.language||x.inlineCommentsSummaryData?.getCommentsSummary?.language,[x.footerCommentsSummaryData,x.inlineCommentsSummaryData]),H=(0,i.useMemo)(()=>{let e=[];return x.footerCommentsSummaryData&&e.push(p.FOOTER),x.inlineCommentsSummaryData&&e.push(p.INLINE),e},[x.footerCommentsSummaryData,x.inlineCommentsSummaryData]),D={source:"commentsSummary",additionalAnalyticsAttributes:{commentsType:H}};(0,i.useEffect)(()=>{R||O.footerCommentsSummaryError&&O.inlineCommentsSummaryError||(C({type:"sendScreenEvent",data:{name:"commentsSummaryContainer",attributes:{contentId:e,edition:g,commentsType:H,summaryLocale:F,numPageCommentsSummarized:I,numInlineCommentsSummarized:T}}}).fire(),A())},[C,e,g,R,H,F,O.footerCommentsSummaryError,O.inlineCommentsSummaryError,I,A,T]);let G=()=>`${k&&`${u.formatMessage(L.pageCommentsHeader)}
${k}`}

${U&&`${u.formatMessage(L.inlineCommentsHeader)}
${U}`}`,$=()=>t(i).createElement(r("1GzhS").default,{space:"space.200"},U&&t(i).createElement(r("1GzhS").default,{space:"space.100"},t(i).createElement(r("7hXDW").default,{size:"small"},u.formatMessage(L.inlineCommentsHeader)),t(i).createElement(r("e6pbP").default,{options:{disableParsingRawHTML:!0}},U)),k&&t(i).createElement(r("1GzhS").default,{space:"space.100"},t(i).createElement(r("7hXDW").default,{size:"small"},u.formatMessage(L.pageCommentsHeader)),t(i).createElement(r("e6pbP").default,{options:{disableParsingRawHTML:!0}},k)),(!O.footerCommentsSummaryError||!O.inlineCommentsSummaryError)&&t(i).createElement(r("1eaCJ").ExperienceSuccess,{name:r("irVI7").COMMENTS_SUMMARY_EXPERIENCE,attributes:{contentId:e,source:a}}),(O.footerCommentsSummaryError||O.inlineCommentsSummaryError)&&t(i).createElement(b,{contentId:e,footerCommentsError:O.footerCommentsSummaryError,inlineCommentsError:O.inlineCommentsSummaryError,source:a})),Y=()=>{if(R)return l?t(i).createElement(r("6f0Oj").default,{paddingInline:"space.100"},t(i).createElement(r("8LJEA").AISummaryLoading,null)):t(i).createElement(y,null);let m=!!O.footerCommentsSummaryError&&!!O.inlineCommentsSummaryError||!!O.footerCommentsSummaryError&&0===U.length||!!O.inlineCommentsSummaryError&&0===k.length;return t(i).createElement(r("1GzhS").default,{xcss:v,spread:"space-between"},t(i).createElement(r("6f0Oj").default,{padding:l?"space.100":"space.250"},"footer"!==a?t(i).createElement(r("bbNJt").SummaryPopupScrollableBody,{"data-testid":"scrollable-comments-summary"},$()):$()),t(i).createElement(r("6f0Oj").default,{xcss:l&&_},t(i).createElement(f.AISummaryFooter,{analyticsProperties:D,contentId:e,contentType:n,spaceKey:o,error:m,summaryText:G(),showBetaLozenge:!0,shouldHighlightRefresh:s,refreshHandler:j,showAIDisclaimer:c})))};return t(i).createElement(r("dpPtd").FlagsProvider,null,t(i).createElement(r("dchHi").FeedbackCollectorPropertiesProvider,{entrypointId:"775fa156-8bed-4310-af75-c6d1148b88fb",feedbackContext:{commentsType:H,source:a}},t(i).createElement(r("fwDOR").default,{name:"comments-summary-content",hold:(0,r("9wGTI").fg)("ufo-manual-experimental-holds-confluence")&&R}),l?t(i).createElement(t(i).Fragment,null,Y()):t(i).createElement(r("dOOm2").AIBorder,{loading:R},Y())))}}),n("7eOQq",function(e,t){var r,n,o=((r={}).FOOTER="FOOTER",r.INLINE="INLINE",r),m=((n={}).BLOGPOST="BLOGPOST",n.PAGE="PAGE",n);e.exports.CommentsType=o,e.exports.SummaryType=m});
//# sourceMappingURL=CommentsSectionFabric.aafceaab.js.map
