function e(e){return e&&e.__esModule?e.default:e}function t(e,t,o,r){Object.defineProperty(e,t,{get:o,set:r,enumerable:!0,configurable:!0})}var o=globalThis.parcelRequired477,r=o.register;r("D7PHQ",function(t,r){var a,n=o("3u0dr"),s=o("frIzR"),i=o("42omo"),l=o("aJv6Q"),c=o("gIaMn");let d=(0,o("jmjWc").LoadableActivatable)({__loadable_id__:"TnkNJ",name:"LoomCrossFlowPopupLoader",loader:async()=>(await o("jFlST")).LoomCrossFlowPopupComponent,triggers:[{type:c.ActivationTriggerType.HOVER}],ssrSuccessCheckName:o("5Abqh").SSR_PARTIAL_COMPONENT.LoomButton}),u=(0,o("jmjWc").LoadableActivatable)({__loadable_id__:"d4je0",name:"LoomCrossJoinPopupLoader",loader:async()=>(await o("2ucFg")).LoomCrossJoinPopupComponent,triggers:[{type:c.ActivationTriggerType.HOVER}],ssrSuccessCheckName:o("5Abqh").SSR_PARTIAL_COMPONENT.LoomButton});var m=o("9uAPw"),p=o("hQYP3");let f=(0,o("cgtv4").defineMessages)({dismissButton:{id:"loom-onboarding.page-header-button-spotlight.dismissButton",defaultMessage:"Dismiss"},bodyGA:{id:"loom-onboarding.page-header-button-spotlight.ga-content",defaultMessage:"Record a Loom video to create a personal walkthrough of your content."},buttonTextGA:{id:"loom-onboarding.page-header-button-spotlight.ga-button-text",defaultMessage:"Record"}}),g="pageHeaderLoomButtonGAOnboardingSpotlight",E=(0,o("ecnYn").xcss)({borderRadius:"radius.medium",boxShadow:"0 0 0 2px var(--ds-border-discovery, #AF59E1)"}),b=(0,o("ecnYn").xcss)({borderRadius:"radius.full",outline:"2px solid var(--ds-border-discovery, #AF59E1)"}),C=({children:t,onClose:r,onTryClick:a,isCircle:n})=>{let s=(0,o("7hpmn").useIsReducedMotion)(),l=(0,o("8C5kA").default)(),{createAnalyticsEvent:c}=(0,o("inPa6").useAnalyticsEvents)(),d=(0,i.useRef)(!1),u=(0,i.useCallback)(()=>{d.current||(d.current=!0,r?.())},[r]);(0,i.useEffect)(()=>()=>{u()},[u]),(0,i.useEffect)(()=>{c({type:"sendScreenEvent",data:{name:g}}).fire()},[]);let m=(0,i.useCallback)(()=>{c({type:"sendUIEvent",data:{action:"clicked",actionSubject:"button",actionSubjectId:"dismiss",source:g}}).fire(),u()},[u,c]),C=(0,i.useCallback)(()=>{c({type:"sendUIEvent",data:{action:"clicked",actionSubject:"button",actionSubjectId:"record",source:g}}).fire(),a(),u()},[u,a,c]),I=f.bodyGA,_=f.buttonTextGA;return e(i).createElement(o("6cnUO").default,null,e(i).createElement(o("5izcQ").default,{name:"page-header-loom-button-spotlight"},e(i).createElement(o("6f0Oj").default,{xcss:[E,n&&b]},t)),e(i).createElement(o("2Fndw").default,null,e(i).createElement(o("5RBJ9").default,{target:"page-header-loom-button-spotlight",targetBgColor:"var(--ds-text-inverse, #FFFFFF)",pulse:!s,targetRadius:n?24:6,shouldWatchTarget:!0,dialogWidth:275,image:e(p),actions:[{text:l.formatMessage(_),onClick:C},{text:l.formatMessage(f.dismissButton),onClick:m,appearance:"subtle"}]},e(i).createElement(o("gtD4K").default,I))))};(a={}).EDITOR_INSERT="editorInsert",a.PAGE_COMMENT_INSERT="pageCommentInsert",a.COPY_LINK="copyLink",a.OPEN_ON_LOOM="openOnLoom";let I=(0,i.forwardRef)((0,n.isReactCompilerActiveV1)()?(t,r)=>{let a,n,l,c,d,u,m=(0,s.c)(13);if(m[0]!==r||m[1]!==t){let{as:e,style:s,...i}=t;a=void 0===e?"div":e,n=i,l=s,c=r,d=(0,o("gMc0m").default)(["_1ul91ul9",i.className]),m[0]=r,m[1]=t,m[2]=a,m[3]=n,m[4]=l,m[5]=c,m[6]=d}else a=m[2],n=m[3],l=m[4],c=m[5],d=m[6];return m[7]!==a||m[8]!==n||m[9]!==l||m[10]!==c||m[11]!==d?(u=e(i).createElement(a,{...n,style:l,ref:c,className:d}),m[7]=a,m[8]=n,m[9]=l,m[10]=c,m[11]=d,m[12]=u):u=m[12],u}:({as:t="div",style:r,...a},n)=>e(i).createElement(t,{...a,style:r,ref:n,className:(0,o("gMc0m").default)(["_1ul91ul9",a.className])})),_=(0,n.isReactCompilerActiveV1)()?t=>{let r,a,n,l,c,d,u,p,f,g,E,b,_,y=(0,s.c)(54),{contentId:P,dataVC:v,label:T,spaceKey:A,contentType:O,flags:h,ssrPlaceholderIdProp:L,isCircle:R,testId:M,source:w,isDisabled:x}=t,k=void 0!==R&&R,N=void 0===w?"pageHeader":w,D=void 0!==x&&x,{userId:F}=(0,o("bQm3c").useSessionData)(),U=(0,i.useContext)(o("1kHsc").ExperienceTrackerContext),{loadEditor:j}=(0,o("39rFu").useEditPageLoadingActions)(),[,V]=(0,o("ikPi2").useLoomInsertUrlState)(),B=(0,o("aSsfA").useGetPageMode)();y[0]!==P||y[1]!==O||y[2]!==j||y[3]!==V||y[4]!==A?(r=e=>{V.updateFullPageEditorLoomUrl(e);let t=(0,o("iXzFq").getUrlForContentType)({contentType:O,spaceKey:A,contentId:P,redirectToEditor:!0});j({contentId:P,spaceKey:A,redirectUrl:t,contentType:O})},y[0]=P,y[1]=O,y[2]=j,y[3]=V,y[4]=A,y[5]=r):r=y[5];let K=r;y[6]!==U?(a=e=>{U.start({name:o("irVI7").LOOM_PAGE_HEADER_CONTENT_INSERTION,timeout:o("aJPUt").ExperienceTimeout.LOOM_PAGE_HEADER_CONTENT_INSERTION,attributes:{postLoomRecordingCTA:e}})},y[6]=U,y[7]=a):a=y[7];let H=a,{entryPointVariant:G}=(0,o("4R3wx").useLoomEntryPointVariant)();y[8]===Symbol.for("react.memo_cache_sentinel")?(n=(0,o("eSUdr").default)`query PageHeaderLoomButtonQuery($contentId:ID!){contentContributors(id:$contentId){isCurrentUserContributor}content(id:$contentId status:["current" "draft"]){nodes{id operations{operation targetType}history{ownedBy{...on KnownUser{accountId}}}}}}`,y[8]=n):n=y[8],y[9]!==P?(l={variables:{contentId:P}},y[9]=P,y[10]=l):l=y[10];let{data:W}=(0,o("xQxzY").useQuery)(n,l);if(y[11]!==H||y[12]!==O||y[13]!==W?.content?.nodes?.[0]||y[14]!==W?.contentContributors?.isCurrentUserContributor||y[15]!==V||y[16]!==K||y[17]!==F){d="openOnLoom",u=!1;let e=W?.content?.nodes?.[0],t=W?.contentContributors?.isCurrentUserContributor||e?.history?.ownedBy?.accountId===F,o=e?.operations?.some(e=>e?.operation==="update"&&e?.targetType===O),r=e?.operations?.some(S);o&&t&&"database"!==O?(d="editorInsert",c={onInsert:(e,t)=>{H(d),K(t)},insertButtonText:"Insert Loom video"}):r&&"database"!==O?(d="pageCommentInsert",u=!0,c={onInsert:(e,t)=>{H(d),V.updatePageCommentEditorLoomUrl(t);let o=document.getElementById("addCommentButton");o&&o.click()},insertButtonText:"Add to comment"}):d="copyLink",y[11]=H,y[12]=O,y[13]=W?.content?.nodes?.[0],y[14]=W?.contentContributors?.isCurrentUserContributor,y[15]=V,y[16]=K,y[17]=F,y[18]=c,y[19]=d,y[20]=u}else c=y[18],d=y[19],u=y[20];y[21]!==h||y[22]!==u?(p={entryPointLocation:"pageHeader",flags:h,resetInsertFunctionOnUnmount:u},y[21]=h,y[22]=u,y[23]=p):p=y[23];let{openLoomRecorder:J,isOpeningRecorder:q,isLoomRecorderInitialized:Y,hasRecordingAccess:Q}=(0,m.useLoomRecorderEntryPoint)(p),X="CO_USE"===G&&Q&&Y;y[24]!==X?(f=X&&(0,o("9wGTI").fg)("confluence_m25_onboarding_spotlights"),y[24]=X,y[25]=f):f=y[25];let[$,z]=(0,o("8fj5s").useSkippableCoordination)("cc-loom-onboarding-spotlight-editor",!f),{createAnalyticsEvent:Z}=(0,o("inPa6").useAnalyticsEvents)();y[26]!==O||y[27]!==Z||y[28]!==J||y[29]!==c||y[30]!==B||y[31]!==d||y[32]!==N?(g=()=>{Z({type:"sendUIEvent",data:{action:"clicked",actionSubject:"button",actionSubjectId:"createLoomHeaderItem",source:N,attributes:{postLoomRecordingCTA:d,contentType:O,pageMode:B}}}).fire(),J(c)},y[26]=O,y[27]=Z,y[28]=J,y[29]=c,y[30]=B,y[31]=d,y[32]=N,y[33]=g):g=y[33];let ee=g;y[34]!==$||y[35]!==z?(E=()=>{$&&z()},y[34]=$,y[35]=z,y[36]=E):E=y[36];let et=E;y[37]!==v||y[38]!==ee||y[39]!==k||y[40]!==D||y[41]!==q||y[42]!==T||y[43]!==L||y[44]!==M?(b=t=>e(i).createElement(I,null,k?e(i).createElement(o("1qfLF").default,{label:T,...t,isLoading:q,onClick:ee,appearance:"subtle",shape:"circle",icon:o("531iT").LoomVideoIcon,testId:M,isDisabled:D&&(0,o("6mKj3").expVal)("platform_editor_offline_editing_web","isEnabled",!1)}):e(i).createElement(o("1qfLF").default,{appearance:"subtle",icon:o("531iT").LoomVideoIcon,label:T,...t,onClick:ee,isLoading:q,"data-vc":v,...L,testId:M,isDisabled:D&&(0,o("6mKj3").expVal)("platform_editor_offline_editing_web","isEnabled",!1)})),y[37]=v,y[38]=ee,y[39]=k,y[40]=D,y[41]=q,y[42]=T,y[43]=L,y[44]=M,y[45]=b):b=y[45],y[46]!==T||y[47]!==b?(_=e(i).createElement(o("3gadb").default,{content:T,position:"left"},b),y[46]=T,y[47]=b,y[48]=_):_=y[48];let eo=_;if($&&"CO_USE"===G&&(0,o("9wGTI").fg)("confluence_m25_onboarding_spotlights")){let t;return y[49]!==eo||y[50]!==ee||y[51]!==et||y[52]!==k?(t=e(i).createElement(C,{onTryClick:ee,onClose:et,isCircle:k},eo),y[49]=eo,y[50]=ee,y[51]=et,y[52]=k,y[53]=t):t=y[53],t}return eo}:({contentId:t,dataVC:r,label:a,spaceKey:n,contentType:s,flags:l,ssrPlaceholderIdProp:c,isCircle:d=!1,testId:u,source:p="pageHeader",isDisabled:f=!1})=>{let g,{userId:E}=(0,o("bQm3c").useSessionData)(),b=(0,i.useContext)(o("1kHsc").ExperienceTrackerContext),{loadEditor:_}=(0,o("39rFu").useEditPageLoadingActions)(),[,y]=(0,o("ikPi2").useLoomInsertUrlState)(),S=(0,o("aSsfA").useGetPageMode)(),P=e=>{y.updateFullPageEditorLoomUrl(e);let r=(0,o("iXzFq").getUrlForContentType)({contentType:s,spaceKey:n,contentId:t,redirectToEditor:!0});_({contentId:t,spaceKey:n,redirectUrl:r,contentType:s})},v=e=>{b.start({name:o("irVI7").LOOM_PAGE_HEADER_CONTENT_INSERTION,timeout:o("aJPUt").ExperienceTimeout.LOOM_PAGE_HEADER_CONTENT_INSERTION,attributes:{postLoomRecordingCTA:e}})},{entryPointVariant:T}=(0,o("4R3wx").useLoomEntryPointVariant)(),{data:A}=(0,o("xQxzY").useQuery)((0,o("eSUdr").default)`query PageHeaderLoomButtonQuery($contentId:ID!){contentContributors(id:$contentId){isCurrentUserContributor}content(id:$contentId status:["current" "draft"]){nodes{id operations{operation targetType}history{ownedBy{...on KnownUser{accountId}}}}}}`,{variables:{contentId:t}}),O="openOnLoom",h=!1,L=A?.content?.nodes?.[0],R=A?.contentContributors?.isCurrentUserContributor||L?.history?.ownedBy?.accountId===E,M=L?.operations?.some(e=>e?.operation==="update"&&e?.targetType===s),w=L?.operations?.some(e=>e?.targetType==="comment"&&e?.operation==="create");M&&R&&"database"!==s?(O="editorInsert",g={onInsert:(e,t)=>{v(O),P(t)},insertButtonText:"Insert Loom video"}):w&&"database"!==s?(O="pageCommentInsert",h=!0,g={onInsert:(e,t)=>{v(O),y.updatePageCommentEditorLoomUrl(t);let o=document.getElementById("addCommentButton");o&&o.click()},insertButtonText:"Add to comment"}):O="copyLink";let{openLoomRecorder:x,isOpeningRecorder:k,isLoomRecorderInitialized:N,hasRecordingAccess:D}=(0,m.useLoomRecorderEntryPoint)({entryPointLocation:"pageHeader",flags:l,resetInsertFunctionOnUnmount:h}),[F,U]=(0,o("8fj5s").useSkippableCoordination)("cc-loom-onboarding-spotlight-editor",!("CO_USE"===T&&D&&N&&(0,o("9wGTI").fg)("confluence_m25_onboarding_spotlights"))),{createAnalyticsEvent:j}=(0,o("inPa6").useAnalyticsEvents)(),V=(0,i.useCallback)(()=>{j({type:"sendUIEvent",data:{action:"clicked",actionSubject:"button",actionSubjectId:"createLoomHeaderItem",source:p,attributes:{postLoomRecordingCTA:O,contentType:s,pageMode:S}}}).fire(),x(g)},[j,x,g,O,p,S,s]),B=(0,i.useCallback)(()=>{F&&U()},[U,F]),K=e(i).createElement(o("3gadb").default,{content:a,position:"left"},t=>e(i).createElement(I,null,d?e(i).createElement(o("1qfLF").default,{label:a,...t,isLoading:k,onClick:V,appearance:"subtle",shape:"circle",icon:o("531iT").LoomVideoIcon,testId:u,isDisabled:f&&(0,o("6mKj3").expVal)("platform_editor_offline_editing_web","isEnabled",!1)}):e(i).createElement(o("1qfLF").default,{appearance:"subtle",icon:o("531iT").LoomVideoIcon,label:a,...t,onClick:V,isLoading:k,"data-vc":r,...c,testId:u,isDisabled:f&&(0,o("6mKj3").expVal)("platform_editor_offline_editing_web","isEnabled",!1)})));return F&&"CO_USE"===T&&(0,o("9wGTI").fg)("confluence_m25_onboarding_spotlights")?e(i).createElement(C,{onTryClick:V,onClose:B,isCircle:d},K):K},y=(0,o("7aRa9").withFlags)(_);function S(e){return e?.targetType==="comment"&&e?.operation==="create"}let P="loom-confluence-page-header",v="loomConfluencePageHeader",T="confluencePageHeaderRecordAVideo",A=(0,o("cgtv4").defineMessages)({crossJoinEntryPointLabel:{id:"page-header-loom-button.crossJoinEntryPointLabel",defaultMessage:"Join your team on Loom to record a video"},crossSellPopupCardDescription:{id:"page-header-loom-button.crossSellPopupCardDescription",defaultMessage:"Save time and engage your team with a video walkthrough, demo, update, and more."},crossSellPopupCardTitle:{id:"page-header-loom-button.crossSellPopupCardTitle",defaultMessage:"Share your work with a video"},entryPointLabel:{id:"page-header-loom-button.entryPointLabel",defaultMessage:"Record a Loom video"}}),O=(0,i.forwardRef)((0,n.isReactCompilerActiveV1)()?(t,r)=>{let a,n,l,c,d,u,m=(0,s.c)(13);if(m[0]!==r||m[1]!==t){let{as:e,style:s,...i}=t;a=void 0===e?"div":e,n=i,l=s,c=r,d=(0,o("gMc0m").default)(["_1ul91ul9",i.className]),m[0]=r,m[1]=t,m[2]=a,m[3]=n,m[4]=l,m[5]=c,m[6]=d}else a=m[2],n=m[3],l=m[4],c=m[5],d=m[6];return m[7]!==a||m[8]!==n||m[9]!==l||m[10]!==c||m[11]!==d?(u=e(i).createElement(a,{...n,style:l,ref:c,className:d}),m[7]=a,m[8]=n,m[9]=l,m[10]=c,m[11]=d,m[12]=u):u=m[12],u}:({as:t="div",style:r,...a},n)=>e(i).createElement(t,{...a,style:r,ref:n,className:(0,o("gMc0m").default)(["_1ul91ul9",a.className])})),h=(0,n.isReactCompilerActiveV1)()?t=>{let r,a,n,l,c,m,p=(0,s.c)(85),{contentId:f,crossSellPopupPlacement:g,spaceKey:E,contentType:b,flags:C,isCircle:I,testId:_,source:S,isDisabled:h}=t,L=void 0!==I&&I,R=void 0!==h&&h,{createAnalyticsEvent:M}=(0,o("inPa6").useAnalyticsEvents)(),w=(0,o("luv00").useSSRPlaceholderReplaceIdProp)(),x=(0,o("aSsfA").useGetPageMode)();window.__SSR_RENDERED__&&window.__SSR_LOOM_ENTRY_POINT__&&(r=window.__SSR_LOOM_ENTRY_POINT__.entryPointVariant);let k=(0,o("4R3wx").useLoomEntryPointVariant)();r=k.entryPointVariant,a=k.error,n=k.loading;let N=["BETA","CO_USE","CROSS_FLOW","CROSS_JOIN","NONE"].includes(r),{isPulseActive:D}=(0,o("aFmsO").useDiscoverabilityPulse)(P),F=(0,o("8C5kA").default)();p[0]!==C?(l={flags:C},p[0]=C,p[1]=l):l=p[1];let U=(0,o("2pBiX").useLoomEntryPointErrorCallback)(l);if(p[2]!==M||p[3]!==r?(c=()=>{"CROSS_JOIN"===r&&M({type:"sendScreenEvent",data:{action:"viewed",name:"createLoomHeaderItem",attributes:{adType:"crossJoin",entrypoint:P,sourceComponent:v}}}).fire()},p[2]=M,p[3]=r,p[4]=c):c=p[4],p[5]!==M||p[6]!==r?(m=[M,r],p[5]=M,p[6]=r,p[7]=m):m=p[7],(0,i.useEffect)(c,m),!N)return null;if("BETA"===r||"CO_USE"===r){let t,r,a;return p[8]!==F?(t=F.formatMessage(A.entryPointLabel),p[8]=F,p[9]=t):t=p[9],p[10]!==R?(r=R&&(0,o("6mKj3").expVal)("platform_editor_offline_editing_web","isEnabled",!1),p[10]=R,p[11]=r):r=p[11],p[12]!==f||p[13]!==b||p[14]!==L||p[15]!==S||p[16]!==E||p[17]!==w||p[18]!==t||p[19]!==r||p[20]!==_?(a=e(i).createElement(y,{contentId:f,contentType:b,dataVC:"loom-button",label:t,spaceKey:E,ssrPlaceholderIdProp:w,isCircle:L,testId:_,source:S,isDisabled:r}),p[12]=f,p[13]=b,p[14]=L,p[15]=S,p[16]=E,p[17]=w,p[18]=t,p[19]=r,p[20]=_,p[21]=a):a=p[21],a}if(a){let t,r,a;return p[22]!==F?(t=F.formatMessage(A.entryPointLabel),p[22]=F,p[23]=t):t=p[23],p[24]===Symbol.for("react.memo_cache_sentinel")?(r=e(i).createElement(o("531iT").LoomVideoIcon,{label:"",color:"var(--ds-icon-subtle, #505258)"}),p[24]=r):r=p[24],p[25]!==U||p[26]!==t?(a=e(i).createElement(o("eEA8O").default,{appearance:"subtle","aria-label":t,"data-vc":"loom-button",iconAfter:r,onClick:U}),p[25]=U,p[26]=t,p[27]=a):a=p[27],a}if(n){let t;return p[28]===Symbol.for("react.memo_cache_sentinel")?(t=e(i).createElement(o("cxQ7E").LoomPageHeaderPlaceholder,null),p[28]=t):t=p[28],t}if("CROSS_FLOW"===r){let t,r,a,n;if(x===o("cD1qu").PageMode.VIEW&&(0,o("6mKj3").expVal)("confluence_selection_hydration_loom_button","isEnabled",!1)){let t,r,a,n,s;return p[29]!==F?(t=F.formatMessage(A.crossSellPopupCardDescription),p[29]=F,p[30]=t):t=p[30],p[31]!==F?(r=F.formatMessage(A.crossSellPopupCardTitle),p[31]=F,p[32]=r):r=p[32],p[33]!==F?(a=F.formatMessage(A.entryPointLabel),p[33]=F,p[34]=a):a=p[34],p[35]===Symbol.for("react.memo_cache_sentinel")?(n=e(i).createElement(o("531iT").LoomVideoIcon,{label:"",color:"var(--ds-icon-subtle, #505258)"}),p[35]=n):n=p[35],p[36]!==g||p[37]!==L||p[38]!==D||p[39]!==t||p[40]!==r||p[41]!==a?(s=e(i).createElement(d,{description:t,entryPointId:P,placement:g,sourceActionSubjectId:"createLoomHeaderItem",sourceComponent:v,sourceContext:T,title:r,isCircle:L,ariaLabel:a,iconAfter:n,appearance:"subtle",immediateActivationCondition:D}),p[36]=g,p[37]=L,p[38]=D,p[39]=t,p[40]=r,p[41]=a,p[42]=s):s=p[42],s}return p[43]!==F?(t=F.formatMessage(A.crossSellPopupCardDescription),p[43]=F,p[44]=t):t=p[44],p[45]!==F?(r=F.formatMessage(A.crossSellPopupCardTitle),p[45]=F,p[46]=r):r=p[46],p[47]!==F||p[48]!==L||p[49]!==w?(a=t=>e(i).createElement(o("5i3ci").DiscoverabilityPulse,{entryPointId:P,isCircle:L},e(i).createElement(O,null,e(i).createElement(o("eEA8O").default,{...t,appearance:"subtle","aria-label":F.formatMessage(A.entryPointLabel),"data-vc":"loom-button",iconAfter:e(i).createElement(o("531iT").LoomVideoIcon,{label:"",color:"var(--ds-icon-subtle, #505258)"}),...w}))),p[47]=F,p[48]=L,p[49]=w,p[50]=a):a=p[50],p[51]!==g||p[52]!==t||p[53]!==r||p[54]!==a?(n=e(i).createElement(o("6T0Pj").LoomCrossFlowPopupCard,{description:t,entryPointId:P,placement:g,sourceActionSubjectId:"createLoomHeaderItem",sourceComponent:v,sourceContext:T,title:r,trigger:a}),p[51]=g,p[52]=t,p[53]=r,p[54]=a,p[55]=n):n=p[55],n}if("CROSS_JOIN"===r){let t,r,a,n;if(x===o("cD1qu").PageMode.VIEW&&(0,o("6mKj3").expVal)("confluence_selection_hydration_loom_button","isEnabled",!1)){let t,r,a,n,s;p[56]!==F?(t=F.formatMessage(A.crossSellPopupCardDescription),p[56]=F,p[57]=t):t=p[57],p[58]!==F?(r=F.formatMessage(A.crossSellPopupCardTitle),p[58]=F,p[59]=r):r=p[59],p[60]!==F?(a=F.formatMessage(A.crossJoinEntryPointLabel),p[60]=F,p[61]=a):a=p[61],p[62]===Symbol.for("react.memo_cache_sentinel")?(n=e(i).createElement(o("531iT").LoomVideoIcon,{label:"",color:"var(--ds-icon-subtle, #505258)"}),p[62]=n):n=p[62];let l=(0,o("9wGTI").fg)("twcg-1241_streamlining_loom_cross_join_gate")?C:void 0;return p[63]!==g||p[64]!==L||p[65]!==D||p[66]!==l||p[67]!==t||p[68]!==r||p[69]!==a?(s=e(i).createElement(u,{description:t,placement:g,sourceActionSubjectId:"createLoomHeaderItem",title:r,entryPointId:P,isCircle:L,ariaLabel:a,iconAfter:n,appearance:"subtle",immediateActivationCondition:D,flags:l,sourceComponent:v}),p[63]=g,p[64]=L,p[65]=D,p[66]=l,p[67]=t,p[68]=r,p[69]=a,p[70]=s):s=p[70],s}p[71]!==F?(t=F.formatMessage(A.crossSellPopupCardDescription),p[71]=F,p[72]=t):t=p[72],p[73]!==F?(r=F.formatMessage(A.crossSellPopupCardTitle),p[73]=F,p[74]=r):r=p[74],p[75]!==F||p[76]!==L||p[77]!==w?(a=(t,r)=>{let{onClick:a,...n}=r;return e(i).createElement(o("5i3ci").DiscoverabilityPulse,{entryPointId:P,isCircle:L},e(i).createElement(O,null,e(i).createElement(o("eEA8O").default,{...n,appearance:"subtle","aria-label":F.formatMessage(A.crossJoinEntryPointLabel),"data-vc":"loom-button",href:t,iconAfter:e(i).createElement(o("531iT").LoomVideoIcon,{label:"",color:"var(--ds-icon-subtle, #505258)"}),rel:"noreferrer",target:"_blank",onClick:a,...w})))},p[75]=F,p[76]=L,p[77]=w,p[78]=a):a=p[78];let s=(0,o("9wGTI").fg)("twcg-1241_streamlining_loom_cross_join_gate")?C:void 0;return p[79]!==g||p[80]!==t||p[81]!==r||p[82]!==a||p[83]!==s?(n=e(i).createElement(o("8Q0mA").LoomCrossJoinPopupCard,{description:t,placement:g,sourceActionSubjectId:"createLoomHeaderItem",title:r,entryPointId:P,triggerLink:a,flags:s,sourceComponent:v}),p[79]=g,p[80]=t,p[81]=r,p[82]=a,p[83]=s,p[84]=n):n=p[84],n}return null}:({contentId:t,crossSellPopupPlacement:r,spaceKey:a,contentType:n,flags:s,isCircle:l=!1,testId:c,source:m,isDisabled:p=!1})=>{let f,g,E,{createAnalyticsEvent:b}=(0,o("inPa6").useAnalyticsEvents)(),C=(0,o("luv00").useSSRPlaceholderReplaceIdProp)(),I=(0,o("aSsfA").useGetPageMode)();window.__SSR_RENDERED__&&window.__SSR_LOOM_ENTRY_POINT__&&(f=window.__SSR_LOOM_ENTRY_POINT__.entryPointVariant,g=window.__SSR_LOOM_ENTRY_POINT__.error,E=window.__SSR_LOOM_ENTRY_POINT__.loading);let _=(0,o("4R3wx").useLoomEntryPointVariant)();f=_.entryPointVariant,g=_.error,E=_.loading;let S=["BETA","CO_USE","CROSS_FLOW","CROSS_JOIN","NONE"].includes(f),{isPulseActive:h}=(0,o("aFmsO").useDiscoverabilityPulse)(P),L=(0,o("8C5kA").default)(),R=(0,o("2pBiX").useLoomEntryPointErrorCallback)({flags:s});return((0,i.useEffect)(()=>{"CROSS_JOIN"===f&&b({type:"sendScreenEvent",data:{action:"viewed",name:"createLoomHeaderItem",attributes:{adType:"crossJoin",entrypoint:P,sourceComponent:v}}}).fire()},[b,f]),S)?"BETA"===f||"CO_USE"===f?e(i).createElement(y,{contentId:t,contentType:n,dataVC:"loom-button",label:L.formatMessage(A.entryPointLabel),spaceKey:a,ssrPlaceholderIdProp:C,isCircle:l,testId:c,source:m,isDisabled:p&&(0,o("6mKj3").expVal)("platform_editor_offline_editing_web","isEnabled",!1)}):g?e(i).createElement(o("eEA8O").default,{appearance:"subtle","aria-label":L.formatMessage(A.entryPointLabel),"data-vc":"loom-button",iconAfter:e(i).createElement(o("531iT").LoomVideoIcon,{label:"",color:"var(--ds-icon-subtle, #505258)"}),onClick:R}):E?e(i).createElement(o("cxQ7E").LoomPageHeaderPlaceholder,null):"CROSS_FLOW"===f?I===o("cD1qu").PageMode.VIEW&&(0,o("6mKj3").expVal)("confluence_selection_hydration_loom_button","isEnabled",!1)?e(i).createElement(d,{description:L.formatMessage(A.crossSellPopupCardDescription),entryPointId:P,placement:r,sourceActionSubjectId:"createLoomHeaderItem",sourceComponent:v,sourceContext:T,title:L.formatMessage(A.crossSellPopupCardTitle),isCircle:l,ariaLabel:L.formatMessage(A.entryPointLabel),iconAfter:e(i).createElement(o("531iT").LoomVideoIcon,{label:"",color:"var(--ds-icon-subtle, #505258)"}),appearance:"subtle",immediateActivationCondition:h}):e(i).createElement(o("6T0Pj").LoomCrossFlowPopupCard,{description:L.formatMessage(A.crossSellPopupCardDescription),entryPointId:P,placement:r,sourceActionSubjectId:"createLoomHeaderItem",sourceComponent:v,sourceContext:T,title:L.formatMessage(A.crossSellPopupCardTitle),trigger:t=>e(i).createElement(o("5i3ci").DiscoverabilityPulse,{entryPointId:P,isCircle:l},e(i).createElement(O,null,e(i).createElement(o("eEA8O").default,{...t,appearance:"subtle","aria-label":L.formatMessage(A.entryPointLabel),"data-vc":"loom-button",iconAfter:e(i).createElement(o("531iT").LoomVideoIcon,{label:"",color:"var(--ds-icon-subtle, #505258)"}),...C})))}):"CROSS_JOIN"===f?I===o("cD1qu").PageMode.VIEW&&(0,o("6mKj3").expVal)("confluence_selection_hydration_loom_button","isEnabled",!1)?e(i).createElement(u,{description:L.formatMessage(A.crossSellPopupCardDescription),placement:r,sourceActionSubjectId:"createLoomHeaderItem",title:L.formatMessage(A.crossSellPopupCardTitle),entryPointId:P,isCircle:l,ariaLabel:L.formatMessage(A.crossJoinEntryPointLabel),iconAfter:e(i).createElement(o("531iT").LoomVideoIcon,{label:"",color:"var(--ds-icon-subtle, #505258)"}),appearance:"subtle",immediateActivationCondition:h,flags:(0,o("9wGTI").fg)("twcg-1241_streamlining_loom_cross_join_gate")?s:void 0,sourceComponent:v}):e(i).createElement(o("8Q0mA").LoomCrossJoinPopupCard,{description:L.formatMessage(A.crossSellPopupCardDescription),placement:r,sourceActionSubjectId:"createLoomHeaderItem",title:L.formatMessage(A.crossSellPopupCardTitle),entryPointId:P,triggerLink:(t,{onClick:r,...a})=>e(i).createElement(o("5i3ci").DiscoverabilityPulse,{entryPointId:P,isCircle:l},e(i).createElement(O,null,e(i).createElement(o("eEA8O").default,{...a,appearance:"subtle","aria-label":L.formatMessage(A.crossJoinEntryPointLabel),"data-vc":"loom-button",href:t,iconAfter:e(i).createElement(o("531iT").LoomVideoIcon,{label:"",color:"var(--ds-icon-subtle, #505258)"}),rel:"noreferrer",target:"_blank",onClick:r,...C}))),flags:(0,o("9wGTI").fg)("twcg-1241_streamlining_loom_cross_join_gate")?s:void 0,sourceComponent:v}):null:null},L=(0,l.withErrorBoundary)({attribution:o("3IBnw").Attribution.CONTENT_TYPES})((0,o("7aRa9").withFlags)(h));t.exports.PageHeaderLoomEntryPoint=L}),r("2pBiX",function(e,t){var r=o("42omo");let a=(0,o("cgtv4").defineMessages)({errorTitleCannotStart:{id:"loom-utils.error-flag.title.cannot-start",defaultMessage:"We couldn’t start your recording"},errorSDKFailedToInitialize:{id:"loom-utils.error-flag.description.sdk-failed-to-initialize",defaultMessage:"Give it a moment and then refresh to try again."}});e.exports.useLoomEntryPointErrorCallback=({flags:e})=>{let t=(0,o("8C5kA").default)();return(0,r.useCallback)(()=>{e.showInfoFlag({title:t.formatMessage(a.errorTitleCannotStart),description:t.formatMessage(a.errorSDKFailedToInitialize)})},[e,t])}}),r("6T0Pj",function(t,r){var a=o("42omo");let n="crossFlow",s=(0,o("cgtv4").defineMessages)({tryNow:{id:"loom-utils.loom-cross-sell-popup-card.tryNow",defaultMessage:"Try now"}}),i=o("1cfhF").FIRST_PARTY_CCP_PRODUCT_IDS.prod.loom,l=e=>{switch(e){case"loom-confluence-inline-comment":return"loomConfluenceInlineCommentButton";case"loom-confluence-page-editor-toolbar":return"loomConfluencePageEditorToolbarButton";case"loom-confluence-page-header":return"loomConfluencePageHeaderButton";default:return null}};t.exports.LoomCrossFlowPopupCard=({description:t,entryPointId:r,placement:c,shouldRenderToParent:d,sourceActionSubjectId:u,title:m,trigger:p,sourceComponent:f,sourceContext:g})=>{let{createAnalyticsEvent:E}=(0,o("inPa6").useAnalyticsEvents)(),{fireViewedUIEvent:b,fireInteractedUIEvent:C}=(0,o("lfQiY").useFireCrossFlowAnalyticsEvents)(),I=(0,o("8C5kA").default)(),_=(0,a.useRef)(null),y=(0,o("ej7WH").useLoomCrossFlowRequestAccessCallback)({sourceComponent:f,sourceContext:g}),S=(0,a.useContext)(o("1kHsc").ExperienceTrackerContext),{isInterestedInLoom:P,notInterestedInLoomCallback:v}=(0,o("k0DFC").useLoomAdControlState)({touchpoint:r}),{stopPulse:T}=(0,o("aFmsO").useDiscoverabilityPulseActions)(),{stopPostOffice:A}=(0,o("jHpN3").useDiscoverabilityPulseActions)(),O=(0,a.useCallback)(()=>{if((0,o("9wGTI").fg)("confluence_loom_x-sell_ep_po_migration"))return void A();T()},[A,T]);(0,a.useEffect)(()=>{b({action:"viewed",actionSubject:"button",actionSubjectId:f},{source:r,recommendedProductIds:[i]})},[b,f,r]);let h=(0,a.useCallback)(async e=>{E({type:"sendUIEvent",data:{action:"clicked",actionSubject:"button",actionSubjectId:e,source:"tryNow"===e?"loomCrossFlowPopupCard":u,attributes:{adType:n,entrypoint:r}}}).fire();let t=l(r);t&&C({action:"clicked",actionSubject:"button",actionSubjectId:g},{source:t,recommendedProductIds:[i],targetProductId:i}),O(),await y()},[E,r,y,u,g,C,O]),L=(0,a.useCallback)(async()=>{S.abort({name:o("irVI7").LOOM_CROSS_SELL_EXPERIENCE,reason:"User not interested in Loom",attributes:{sourceComponent:r,adType:n}}),O(),await v()},[r,S,v,O]);return P?e(a).createElement(o("cnQgR").BaseLoomPopupCard,{actions:e(a).createElement(o("u9agA").default,{space:"space.100"},e(a).createElement(o("jkI1v").LoomAdControl,{onDismiss:L,entryPointId:r}),e(a).createElement(o("ccHMk").default,{appearance:"discovery",onClick:()=>h("tryNow"),ref:_},I.formatMessage(s.tryNow))),description:t,entryPointId:r,placement:c,shouldRenderToParent:d,title:m,trigger:e=>p({...e,onClick:()=>h(u),onKeyDown:e=>{"Tab"===e.key&&_.current?.focus()}}),sourceAdType:n}):null}}),r("1cfhF",function(e,t){e.exports.FIRST_PARTY_CCP_PRODUCT_IDS={prod:{jira_software_cloud:"d8a847a4-cde4-4c50-8ea1-dc3d4193214f",jira_work_management_cloud:"46ccaa9e-cdb0-4995-8886-5827a5ff162b",jira_service_management_cloud:"de63a248-1f93-46ed-b6ea-ab8e38af1c88",jira_product_discovery:"a6f908c8-709c-45f4-9e2d-eca25b93b94a",confluence_cloud:"6aab3f4e-cc71-474d-8d28-abef8b057808",opsgenie:"fdb4649d-ca4d-49f8-a8bf-ffa558a65551",teamwork_collection:"3503c251-c247-4b55-a6ed-d4c8c3257b8b",loom:"7683a73e-423d-41a1-b43f-d497656f8b5d"},staging:{jira_software_cloud:"d8a847a4-cde4-4c50-8ea1-dc3d4193214f",jira_work_management_cloud:"46ccaa9e-cdb0-4995-8886-5827a5ff162b",jira_service_management_cloud:"de63a248-1f93-46ed-b6ea-ab8e38af1c88",jira_product_discovery:"a6f908c8-709c-45f4-9e2d-eca25b93b94a",confluence_cloud:"6aab3f4e-cc71-474d-8d28-abef8b057808",opsgenie:"fdb4649d-ca4d-49f8-a8bf-ffa558a65551",teamwork_collection:"3503c251-c247-4b55-a6ed-d4c8c3257b8b",loom:"7683a73e-423d-41a1-b43f-d497656f8b5d"}},e.exports.SURFACE_ANALYTICS_PRODUCT_MAP={products:{"confluence.ondemand":"6aab3f4e-cc71-474d-8d28-abef8b057808","jira-software.ondemand":"d8a847a4-cde4-4c50-8ea1-dc3d4193214f","jira-servicedesk.ondemand":"de63a248-1f93-46ed-b6ea-ab8e38af1c88","jira-core.ondemand":"46ccaa9e-cdb0-4995-8886-5827a5ff162b",opsgenie:"fdb4649d-ca4d-49f8-a8bf-ffa558a65551",statuspage:"0b8ea1e2-52df-11ea-8d77-2e728ce88125",townsquare:"7c917705-866d-4b6b-b266-0fc7633e8342",compass:"6bce2ccb-4f57-46f5-812a-9dbf02dc28f2","jira-product-discovery":"a6f908c8-709c-45f4-9e2d-eca25b93b94a",beacon:"0a0a31b0-3f5f-4693-b231-9a753bee012e","atlassian-analytics-free":"f44da23e-5907-4d81-8a78-33bedee10969",mercury:"d16a2ba8-445f-4e83-9c7b-9bcf349ff905","teamwork-collection":"3503c251-c247-4b55-a6ed-d4c8c3257b8b",loom:"7683a73e-423d-41a1-b43f-d497656f8b5d"}}}),r("lfQiY",function(e,t){var r=o("42omo");e.exports.useFireCrossFlowAnalyticsEvents=function(){let{createAnalyticsEvent:e}=(0,o("inPa6").useAnalyticsEvents)(),t=(0,r.useRef)(),a=(0,r.useRef)(),n=(0,r.useCallback)((e,t)=>({recommendedProductIds:e.reduce((e,t)=>(e.push(o("1cfhF").SURFACE_ANALYTICS_PRODUCT_MAP.products[t]??t),e),[]),targetProductId:(t&&o("1cfhF").SURFACE_ANALYTICS_PRODUCT_MAP.products[t])??t}),[]),s=(0,r.useCallback)((r,a,s)=>{if(t.current===r)return;let{recommendedProductIds:i,...l}=a,{recommendedProductIds:c}=n(i);e({eventType:o("kfKKN").eventTypes.SCREEN,name:r,attributes:{recommendedProductIds:c,...l,...s}}).fire(o("kfKKN").CROSS_FLOW_CHANNEL),t.current=r},[e,n]);return{fireViewedScreenEvent:s,fireViewedUIEvent:(0,r.useCallback)((t,r,s)=>{if(a.current===t.actionSubjectId)return;let{source:i,recommendedProductIds:l,...c}=r,{recommendedProductIds:d}=n(l);e({eventType:o("kfKKN").eventTypes.UI,...t,source:i,attributes:{recommendedProductIds:d,...c,...s}}).fire(o("kfKKN").CROSS_FLOW_CHANNEL),a.current=t.actionSubjectId},[e,n]),fireInteractedUIEvent:(0,r.useCallback)((t,r,a)=>{let{source:s,recommendedProductIds:i,targetProductId:l,...c}=r,{recommendedProductIds:d,targetProductId:u}=n(i??[],l);e({eventType:o("kfKKN").eventTypes.UI,...t,source:s,attributes:{recommendedProductIds:d,targetProductId:u,...c,...a}}).fire(o("kfKKN").CROSS_FLOW_CHANNEL)},[e,n])}}}),r("kfKKN",function(e,t){var o,r=((o={}).UI="ui",o.SCREEN="screen",o);e.exports.CROSS_FLOW_CHANNEL="crossFlow",e.exports.eventTypes=r}),r("ej7WH",function(e,t){var r=o("42omo");o("2YerA");var a=o("fqrVl"),n=o("jCM2u");o("49sr4");var s=o("82BVR");e.exports.useLoomCrossFlowRequestAccessCallback=({sourceComponent:e,sourceContext:t})=>{let i=(0,n.useCrossFlow)(),l=(0,r.useContext)(o("1kHsc").ExperienceTrackerContext);return(0,r.useCallback)(async()=>{if(!i.isEnabled)return void l.fail({name:o("irVI7").LOOM_CROSS_SELL_EXPERIENCE,error:Error("Loom crossflow is not enabled"),attributes:{sourceComponent:e,adType:"crossFlow"}});l.succeed({name:o("irVI7").LOOM_CROSS_SELL_EXPERIENCE,attributes:{sourceComponent:e,adType:"crossFlow"}});try{await i.apiV1.open({journey:a.Journeys.GET_STARTED,sourceComponent:e,sourceContext:t,targetProduct:s.Targets.LOOM,v1:!0})}catch(e){(0,o("5ZqQS").getMonitoringClient)().submitError(e,{attribution:o("3IBnw").Attribution.CONTENT_TYPES})}},[i,e,l,t])}}),r("2YerA",function(e,r){t(e.exports,"BaseCrossFlowApiProvider",()=>o("jCM2u").BaseCrossFlowApiProvider),t(e.exports,"useCrossFlow",()=>o("jCM2u").useCrossFlow),t(e.exports,"withCrossFlow",()=>o("jCM2u").withCrossFlow),t(e.exports,"Journeys",()=>o("fqrVl").Journeys),t(e.exports,"Reasons",()=>o("fqrVl").Reasons),o("jCM2u"),o("fqrVl")}),r("jCM2u",function(e,t){var r=o("l998X"),a=o("42omo"),n=o("5xIym"),s=o("5B9n6"),i=o("fqrVl");let l=s.VERSION,c=(0,a.createContext)(()=>({isEnabled:!1,reason:i.Reasons.NO_PROVIDER})),d=e=>t=>t===s.VERSION?{isEnabled:!0,api:(0,n.createAPIv0)(e),apiV1:(0,s.createAPIv1)(e)}:{isEnabled:!1,reason:i.Reasons.NO_API_SUPPORT},u=()=>{let e=(0,a.useContext)(c);return(0,a.useMemo)(()=>e(l),[e])};e.exports.BaseCrossFlowApiProvider=({onOpen:e,children:t})=>{let o=(0,a.useMemo)(()=>d(e),[e]);return(0,r.jsx)(c.Provider,{value:o,children:t})},e.exports.useCrossFlow=u,e.exports.withCrossFlow=function(e){let t=t=>{let o=u();return(0,r.jsx)(e,{...t,crossFlow:o})};return t.displayName=`withCrossFlow(${e.displayName||e.name||"Component"})`,t}}),r("5xIym",function(e,t){e.exports.createAPIv0=e=>({open:t=>e(t)})}),r("5B9n6",function(e,t){e.exports.VERSION=1,e.exports.createAPIv1=e=>({open:t=>e(t)})}),r("fqrVl",function(e,t){e.exports.Journeys={GET_STARTED:"get-started",DECIDE:"decide",DISCOVER:"discover"},e.exports.Reasons={NO_API_SUPPORT:"Could not provide requested API version",NO_PROVIDER:"Provider not found"}}),r("49sr4",function(e,r){t(e.exports,"CrossFlowExtensions",()=>o("ctMWd").CrossFlowExtensions),t(e.exports,"Targets",()=>o("82BVR").Targets),o("ctMWd"),o("82BVR")}),r("ctMWd",function(e,t){e.exports.CrossFlowExtensions=class{constructor(e){Object.assign(this,e),Object.freeze(this)}}}),r("82BVR",function(e,t){e.exports.Targets={CONFLUENCE:"confluence.ondemand",JIRA_CORE:"jira-core.ondemand",JIRA_SERVICE_DESK:"jira-servicedesk.ondemand",JIRA_SOFTWARE:"jira-software.ondemand",JIRA_PRODUCT_DISCOVERY:"jira-product-discovery",JIRA_CUSTOMER_SERVICE:"jira-customer-service",BITBUCKET:"bitbucket.ondemand",TRELLO:"trello",OPSGENIE:"opsgenie",STATUSPAGE:"statuspage",TEAM_CENTRAL:"townsquare",ATLAS:"townsquare",AVOCADO:"avocado",ANALYTICS:"atlassian-analytics-free",COMPASS:"compass",LOOM:"loom",ROVO:"rovo.ondemand",TEAMWORK_COLLECTION:"teamwork-collection"}}),r("jkI1v",function(t,r){var a=o("42omo");let n=(0,o("cgtv4").defineMessages)({dismissFlagTitle:{id:"loom-utils.loom-ad-control.dismiss-flag-title",defaultMessage:"Got it, thanks for letting us know"},dismissFlagDescription:{id:"loom-utils.loom-ad-control.dismiss-flag-description",defaultMessage:"You won’t see this here as often."},reasonsModalTitle:{id:"loom-utils.loom-ad-control.reasons-modal-title",defaultMessage:"Why am I seeing this?"},reasonsModalExplanation:{id:"loom-utils.loom-ad-control.reasons-modal-explanation",defaultMessage:"We think that <strong>Loom</strong> will improve your team’s productivity. The recommendation is based on:"},reasonsModalBulletOne:{id:"loom-utils.loom-ad-control.reasons-modal-bullet-one",defaultMessage:"the size of your team"},reasonsModalBulletTwo:{id:"loom-utils.loom-ad-control.reasons-modal-bullet-two",defaultMessage:"your existing Atlassian products"},privacyPolicy:{id:"loom-utils.loom-ad-control.privacy-policy",defaultMessage:"Learn more about your data privacy with Atlassian"}}),s=(0,o("ecnYn").xcss)({marginTop:"space.150"}),i=(0,o("ecnYn").xcss)({alignSelf:"center"}),l=({entryPointId:t})=>{let{createAnalyticsEvent:r}=(0,o("inPa6").useAnalyticsEvents)(),{formatMessage:i}=(0,o("8C5kA").default)();return(0,a.useEffect)(()=>{r({type:"sendScreenEvent",data:{name:"loomAdControlReasonsModal",attributes:{adType:"crossFlow",entrypoint:t}}}).fire()},[r,t]),e(a).createElement(e(a).Fragment,null,e(a).createElement(o("5dK2X").default,null,i(n.reasonsModalExplanation,{strong:t=>e(a).createElement(o("5dK2X").default,{weight:"bold"},t)})),e(a).createElement("ul",null,e(a).createElement("li",null,i(n.reasonsModalBulletOne)),e(a).createElement("li",null,i(n.reasonsModalBulletTwo))),e(a).createElement(o("6f0Oj").default,{xcss:s},e(a).createElement(o("fpGTa").default,{href:"https://www.atlassian.com/legal/privacy-policy",target:"_blank"},i(n.privacyPolicy))))};t.exports.LoomAdControl=({onDismiss:t,entryPointId:r,spacing:s="compact"})=>{let{createAnalyticsEvent:c}=(0,o("inPa6").useAnalyticsEvents)(),{formatMessage:d}=(0,o("8C5kA").default)();return e(a).createElement(o("2zUpm").default,null,e(a).createElement(o("irxfF").default,{itemId:"loom-ad-controls",trigger:({triggerRef:t,...n})=>e(a).createElement(o("6f0Oj").default,{xcss:i},e(a).createElement(o("1qfLF").default,{...n,onClick:e=>{c({type:"sendUIEvent",data:{action:"clicked",actionSubject:"button",actionSubjectId:"toggleLoomAdControlDropdown",source:"loomCrossFlowPopupCard",attributes:{adType:"crossFlow",entrypoint:r}}}).fire(),n.onClick?.(e)},appearance:"subtle",spacing:s,icon:e(o("9VJDA")),ref:t,label:"LoomAdControl",testId:"loom-utils.loom-ad-control.button"}))},s=>e(a).createElement(e(a).Fragment,null,e(a).createElement(o("3ylo6").default,{...s,flagProps:{title:d(n.dismissFlagTitle),description:d(n.dismissFlagDescription)},onClick:t}),e(a).createElement(o("hEz36").default,{...s,onClick:()=>{c({type:"sendUIEvent",data:{action:"clicked",actionSubject:"button",actionSubjectId:"toggleLoomAdControlReasonsModal",source:"loomAdControlDropdown",attributes:{adType:"crossFlow",entrypoint:r}}}).fire()},modalProps:{title:d(n.reasonsModalTitle),body:e(a).createElement(l,{entryPointId:r})}}))))}}),r("k0DFC",function(e,t){var r=o("42omo");let a=()=>{try{let e=o("17wUi").confluenceLocalStorageInstance.getItem(o("1UApO").PERSISTED_KEYS_ON_SERVER.PERSISTED_LOOM_CROSS_FLOW_AD_CONTROL_NOT_INTERESTED);if(null!==e&&"undefined"!==e)return String(e).split(",")}catch(e){}return[]};e.exports.useLoomAdControlState=({touchpoint:e})=>{let{createAnalyticsEvent:t}=(0,o("inPa6").useAnalyticsEvents)(),{userId:n,cloudId:s}=(0,o("bQm3c").useSessionData)(),i=`${e}.${n}.${s}`,l=a(),[c,d]=(0,r.useState)(!l||!l.includes(i)),u=(0,r.useCallback)(async()=>{if(t({type:"sendUIEvent",data:{action:"clicked",actionSubject:"button",actionSubjectId:"notInterested",source:"loomAdControlDropdown",attributes:{adType:"crossFlow",entrypoint:e}}}).fire(),!c)return;let r=a();r.push(i),o("17wUi").confluenceLocalStorageInstance.setItem(o("1UApO").PERSISTED_KEYS_ON_SERVER.PERSISTED_LOOM_CROSS_FLOW_AD_CONTROL_NOT_INTERESTED,r),d(!1)},[c,i,t,e]);return{isInterestedInLoom:c,notInterestedInLoomCallback:u}}}),r("jFlST",function(e,t){e.exports=o("4mJKd")(5)("2DxXe").then(()=>o("9cwPn"))}),r("2ucFg",function(e,t){e.exports=o("4mJKd")(5)("EYiM3").then(()=>o("lvs3G"))}),r("5i3ci",function(t,r){var a=o("42omo");t.exports.DiscoverabilityPulse=({children:t,entryPointId:r,isCircle:n})=>{let{isPulseActive:s}=(0,o("aFmsO").useDiscoverabilityPulse)(r),{isPulseActive:i}=(0,o("ma85v").useDiscoverabilityPulsePostOffice)(r);return((0,o("9wGTI").fg)("confluence_loom_x-sell_ep_po_migration")?i:s)?e(a).createElement(o("1lhEF").Pulse,{radius:n?24:3,testId:"loom-cross-sell-discoverability-pulse"},t):t}}),r("ma85v",function(e,t){var r=o("42omo");let a=["cc-loom-x-sell-discoverability-pulse-1","cc-loom-x-sell-discoverability-pulse-2","cc-loom-x-sell-discoverability-pulse-3","cc-loom-x-sell-discoverability-pulse-4","cc-loom-x-sell-discoverability-pulse-5"],n=a.length-1,s=(e,t,o,r)=>{e<t.length&&!o.current.has(e)&&(o.current.add(e),r.current={index:e,timestamp:Date.now()},t[e].requestMessageStart())};e.exports.useDiscoverabilityPulsePostOffice=e=>{let t=(0,o("jHpN3").useIsPulseActive)(e),{start:i}=(0,o("jHpN3").useDiscoverabilityPulseActions)(),l=t&&(0,o("jHpN3").havePulsesEnded)(),c=(0,o("aXjWU").usePostOfficeExernalMessageProxy)(a[0]),d=(0,o("aXjWU").usePostOfficeExernalMessageProxy)(a[1]),u=(0,o("aXjWU").usePostOfficeExernalMessageProxy)(a[2]),m=(0,o("aXjWU").usePostOfficeExernalMessageProxy)(a[3]),p=(0,o("aXjWU").usePostOfficeExernalMessageProxy)(a[4]),f=(0,r.useMemo)(()=>[c,d,u,m,p],[c,d,u,m,p]),g=(0,r.useRef)(new Set),E=(0,r.useRef)(null),b=(0,r.useRef)(null),[C,I]=(0,r.useState)(0);return(0,r.useEffect)(()=>{if((0,o("9wGTI").fg)("confluence_loom_x-sell_ep_po_migration")&&!l)for(let e=0;e<f.length;e++){let t=f[e];if(t.hasMessageStarted){E.current=null,b.current=e;break}if(!g.current.has(e)){g.current.add(e),E.current={index:e,timestamp:Date.now()},t.requestMessageStart();break}}},[l,f,c.hasMessageStarted,d.hasMessageStarted,u.hasMessageStarted,m.hasMessageStarted,p.hasMessageStarted,c.requestMessageStart,d.requestMessageStart,u.requestMessageStart,m.requestMessageStart,p.requestMessageStart,c.handlePostOfficeClickTracking,d.handlePostOfficeClickTracking,u.handlePostOfficeClickTracking,m.handlePostOfficeClickTracking,p.handlePostOfficeClickTracking]),(0,r.useEffect)(()=>{if(!(0,o("9wGTI").fg)("confluence_loom_x-sell_ep_po_migration")||l||!E.current||t)return;let{index:e,timestamp:r}=E.current;if(f[e].hasMessageStarted){E.current=null;return}let a=Date.now()-r;if(a>=300)E.current=null,s(e+1,f,g,E);else{let e=setTimeout(()=>{I(e=>e+1)},300-a);return()=>clearTimeout(e)}},[l,t,C,f,c.hasMessageStarted,d.hasMessageStarted,u.hasMessageStarted,m.hasMessageStarted,p.hasMessageStarted]),(0,r.useEffect)(()=>{if((0,o("9wGTI").fg)("confluence_loom_x-sell_ep_po_migration")&&!l)for(let t=0;t<f.length;t++){let r=f[t],s=a[t];if(r.hasMessageStarted){b.current=t,i(e,s,{onDismiss:()=>r.dismissMessage(),onClick:()=>r.handlePostOfficeClickTracking?.()}),t===n&&(0,o("jHpN3").endPulses)();break}}},[l,e,i,f,c.hasMessageStarted,d.hasMessageStarted,u.hasMessageStarted,m.hasMessageStarted,p.hasMessageStarted]),(0,r.useEffect)(()=>{if(!(0,o("9wGTI").fg)("confluence_loom_x-sell_ep_po_migration")||l||null===b.current||t)return;let e=b.current;f[e].hasMessageStarted||(g.current.delete(e),b.current=null,s(e+1,f,g,E))},[l,t,f,c.hasMessageStarted,d.hasMessageStarted,u.hasMessageStarted,m.hasMessageStarted,p.hasMessageStarted]),(0,o("9wGTI").fg)("confluence_loom_x-sell_ep_po_migration")?{isPulseActive:t}:{isPulseActive:!1}}}),r("aXjWU",function(t,r){var a=o("42omo");let n={activeTriggerState:{activeTriggerId:void 0}},s=e(a).createContext(n),i=e(a).createContext({setTriggerState:()=>{console.error("No Post Office Trigger Context found. Did you remember to add a Post Office Provider?")}}),l=()=>(0,a.useContext)(s),c=()=>(0,a.useContext)(i),d=e=>{let{activeTriggerState:t}=l();return e?{isActive:t.activeTriggerId===e}:{isActive:void 0}},u=({triggerId:e})=>{let{setTriggerState:t}=c();return{fireTrigger:(0,a.useCallback)(({isActive:o})=>t({triggerId:e,isActive:o}),[t,e])}};t.exports.TriggerContextProvider=({children:t})=>{let[o,r]=(0,a.useState)(n.activeTriggerState),l=(0,a.useCallback)(({isActive:e,triggerId:t})=>{r(o=>o.activeTriggerId===t&&(o.activeTriggerId!==t||!1!==e)?o:e?{activeTriggerId:t}:{activeTriggerId:void 0})},[]),c=(0,a.useMemo)(()=>({activeTriggerState:o}),[o]),d=(0,a.useMemo)(()=>({setTriggerState:l}),[l]);return e(a).createElement(s.Provider,{value:c},e(a).createElement(i.Provider,{value:d},t))},t.exports.useTrigger=d,t.exports.useFirePostOfficeTrigger=u,t.exports.usePostOfficeExernalMessageProxy=e=>{let{isActive:t}=d(`${e}-started`),{fireTrigger:o}=u({triggerId:`${e}-start`}),{fireTrigger:r}=u({triggerId:`${e}-dismiss`}),{fireTrigger:n}=u({triggerId:`${e}-cta-click`}),s=(0,a.useCallback)(()=>{o({isActive:!0})},[o]);return{hasMessageStarted:t,requestMessageStart:s,dismissMessage:(0,a.useCallback)(()=>{r({isActive:!0})},[r]),handlePostOfficeClickTracking:(0,a.useCallback)(()=>{n({isActive:!0})},[n])}}}),r("luv00",function(e,t){var r=o("42omo");e.exports.useSSRPlaceholderReplaceIdProp=function(){let{placeholderReplaceId:e}=(0,r.useContext)(o("5nSna").LoadableAncestorsContext);return{"data-ssr-placeholder-replace":e}}}),r("hQYP3",function(e,t){e.exports=new URL("pageHeaderSpotlightImage.b1e98e59.png",import.meta.url).toString()}),r("8fj5s",function(e,t){var r=o("42omo");e.exports.useSkippableCoordination=(e,t=!1,a=!0)=>{let[n,s]=(0,r.useState)(!1),[i,l]=(0,r.useState)(!0),c=(0,o("lwNi3").useCoordinationClient)(a);(0,r.useEffect)(()=>{async function r(){try{let t=await c.start(e);s(t)}catch(e){(0,o("5ZqQS").getMonitoringClient)().submitError(e,{attribution:o("3IBnw").Attribution.CONTENPLATES})}l(!1)}t||r()},[c,e,t]);let d=(0,r.useCallback)(async(t=!1)=>{if(t||n)try{await c.stop(e),s(!1)}catch(e){(0,o("5ZqQS").getMonitoringClient)().submitError(e,{attribution:o("3IBnw").Attribution.CONTENPLATES})}},[n,c,e]);return[n,d,!t&&i]}}),r("lwNi3",function(e,t){var r=o("42omo"),a=o("04e9M");e.exports.useCoordinationClient=(e=!0)=>{let{cloudId:t,activationId:n,environment:s}=(0,o("bQm3c").useSessionData)(),i=(0,a.getWorkspaceId)(t,n),l="true"===sessionStorage.getItem("confluence.disable-engagement-for-tests"),c=(0,o("jOtRZ").useAnalyticsEnvironment)(s);return(0,r.useMemo)(()=>(0,o("lBR3p").getCoordinationClient)(l,t,i,e,c),[l,t,i,e,c])}}),r("lBR3p",function(e,t){let r=async()=>!1;e.exports.getCoordinationClient=(e,t,a,n,s)=>{if(e)return{start:r,stop:r};{let e={enableChoreographer:n,envType:s,additionalData:{sourceProductId:o("fw9LG").ProductIds.CONFLUENCE}};return new(0,o("5loD0").default)({cloudId:t,stargateUrl:"/gateway/api",isFedRAMPEnvironment:!1,workspaceId:a,coordinationOptions:e})}}}),r("5loD0",function(e,t){e.exports.default=class{async start(e,t){return!!(0,o("4nGsu").isMessagingEnabled)()&&(0,o("ll2sR").startMessage)({cloudId:this.cloudId,stargateUrl:this.stargateUrl,messageId:e,variationId:t,orgId:this.orgId,workspaceId:this.workspaceId},this.coordinationOptions)}async stop(e){return!!(0,o("4nGsu").isMessagingEnabled)()&&(0,o("ll2sR").stopMessage)({cloudId:this.cloudId,stargateUrl:this.stargateUrl,messageId:e,orgId:this.orgId,workspaceId:this.workspaceId},this.coordinationOptions)}constructor(e,t){let o;if(this.cloudId=void 0,this.stargateUrl=void 0,this.orgId=void 0,this.workspaceId=void 0,this.coordinationOptions=void 0,!(o="string"==typeof e?{cloudId:e,stargateUrl:t,isFedRAMPEnvironment:!1}:e).cloudId||!o.stargateUrl)throw Error("Need a valid CloudId and Stargate url");this.cloudId=o.cloudId,this.stargateUrl=o.stargateUrl,this.orgId=o.orgId,this.workspaceId=o.workspaceId,this.coordinationOptions=o.coordinationOptions}}}),r("iXzFq",function(e,t){let r=(e,t)=>e?`${o("jlIaF").CONTEXT_PATH}/pages/resumedraft.action?draftId=${t}`:`${o("jlIaF").CONTEXT_PATH}/pages/viewpage.action?pageId=${t}`;e.exports.getUrlForContentType=({contentType:e,contentSubType:t=null,contentId:a,spaceKey:n,redirectToEditor:s=!1,useLegacyActionUrl:i=!1})=>{if("page"===e&&null!==t)return o("1NBp8").VIEW_PAGE.toUrl({spaceKey:n,contentId:a});if("page"===e&&i)return r(s,a);if("page"===e&&s)return o("1NBp8").EDIT_PAGE_V2.toUrl({spaceKey:n,contentType:"pages",contentId:a});if("blogpost"===e&&s)return o("1NBp8").EDIT_BLOG_V2.toUrl({spaceKey:n,contentId:a,contentType:"blog"});switch(e){case"page":return o("1NBp8").VIEW_PAGE.toUrl({spaceKey:n,contentId:a});case"blogpost":return o("1NBp8").VIEW_BLOG.toUrl({spaceKey:n,contentId:a});case"whiteboard":return o("1NBp8").WHITEBOARD_BOARD.toUrl({spaceKey:n,contentId:a});case"database":return o("1NBp8").DATABASE_VIEW.toUrl({spaceKey:n,contentId:a});case"embed":return o("1NBp8").EMBED_VIEW.toUrl({spaceKey:n,contentId:a});case"folder":return o("1NBp8").FOLDER_VIEW.toUrl({spaceKey:n,contentId:a})}return null}}),r("ikPi2",function(e,t){let r=(0,o("1P1Tu").createStore)({initialState:{fullPageEditorLoomUrl:void 0,pageCommentEditorLoomUrl:void 0,inlineCommentEditorLoomUrl:void 0},actions:{updateFullPageEditorLoomUrl:e=>({setState:t})=>{t({fullPageEditorLoomUrl:e})},updatePageCommentEditorLoomUrl:e=>({setState:t})=>{t({pageCommentEditorLoomUrl:e})}},name:"loomUrlToInsert"}),a=(0,o("9zUhf").createHook)(r);e.exports.useLoomInsertUrlState=a}),r("keVvA",function(e,r){t(e.exports,"default",()=>s);var a=o("l998X"),n=o("42omo");function s({loaderFn:e,children:t,defaultMessages:r}){let s=(0,o("5cR9p").useSafeIntl)(),i=(0,o("e9OZ6").useMessages)(s.locale,e),l=(0,n.useMemo)(()=>({...r,...s.messages,...i}),[s,i,r]);return(0,a.jsx)(o("1e2E5").default,{defaultLocale:"en",locale:s.locale,onError:s.onError,messages:l,children:t})}}),r("e9OZ6",function(e,t){var r=o("42omo");e.exports.useMessages=(e,t)=>{let[a,n]=(0,r.useState)(o("hxPth").DEFAULT_LOCALE_STATE);return(0,r.useEffect)(()=>{if(!a.messages||e!==a.locale){let o=!0;return t(e).then(t=>{o&&n({locale:e,messages:t??{}})}),()=>{o=!1}}},[t,e,a]),a.messages}}),r("hxPth",function(e,t){e.exports.DEFAULT_LOCALE_STATE={locale:"en",messages:{}}}),r("5cR9p",function(e,t){var r=o("42omo");let a=(0,o("fI8ba").createIntlCache)();e.exports.useSafeIntl=()=>{let e=(0,r.useContext)(o("gmMgo").Context);return e||(0,o("1e2E5").createIntl)(o("hxPth").DEFAULT_LOCALE_STATE,a)}}),r("4rwCt",function(e,t){e.exports.mergeRefs=function(e){return(0,o("JlyMu").createCallbackRef)(t=>e.forEach(e=>(0,o("51c7W").assignRef)(e,t)))}}),r("JlyMu",function(e,t){e.exports.createCallbackRef=function(e){let t=null;return{get current(){return t},set current(value){let o=t;o!==value&&(t=value,e(value,o))}}}}),r("7DBey",function(e,t){e.exports.isServiceWithDeps=e=>"function"==typeof e&&"dependencies"in e,e.exports.unimplementedAbstractService=e=>Object.assign(t=>{throw TypeError(`Unimplemented abstract service: ${e}`)},{abstract:!0}),e.exports.toError=e=>e instanceof Error?e:TypeError("Service Error: "+e)}),r("2Q94g",function(e,t){let r=(0,o("7DBey").unimplementedAbstractService)("getCurrentCloudId"),a=(0,o("7DBey").unimplementedAbstractService)("getCurrentUserId"),n=(0,o("7DBey").unimplementedAbstractService)("getCurrentProduct"),s=(0,o("7DBey").unimplementedAbstractService)("createAnalyticsEvent");(0,o("7DBey").unimplementedAbstractService)("fireErrorAnalytics");class i extends Error{constructor(e,t,o,r,a){r?.message?super(r.message):super(`Received error response during action ${e}: ${o.statusText}`),this.responseCode=void 0,this.errorType=void 0,this.response=void 0,this.responseJson=void 0,this.name="FetchError",this.responseCode=t,this.response=o,this.responseJson=r,this.errorType=a}}let l=(e,t)=>!t&&d(e)||401===t,c=["Failed to fetch","NetworkError when attempting to fetch resource.","A server with the specified hostname could not be found."],d=e=>c.some(t=>e?.includes(t)),u=(e,t)=>{try{return JSON.parse(e).some(e=>e.errorCodes.userName.includes(t))}catch(e){return!1}},m=(e,t)=>"noDefaultGroup"===e||"Default group for the requested resource not found."===t;e.exports.getStargateURL=e=>`/gateway/api${e}`,e.exports.getCurrentCloudId=r,e.exports.getCurrentUserId=a,e.exports.getCurrentProduct=n,e.exports.createAnalyticsEvent=s,e.exports.getErrorDetails=e=>({code:e instanceof Error?e.name:"UNKNOWN",message:e instanceof Error?e.message:String(e),status:e instanceof i?e.responseCode:void 0}),e.exports.isAcceptableFailure=l,e.exports.isAcceptableFailureForUserInvite=e=>{let{key:t,message:o,status:r}=e;return l(o,r)||400===r&&(u(o,"EMAIL_BLOCKED")||u(o,"REACHED_MAX_NUMBER_OF_EMAIL_ALIAS_SIGNUPS"))||412===r&&m(t,o)},e.exports.shouldReportFailedInvite=e=>{let{code:t,message:o}=e;return("bad-request"!==t||"User cannot invite themselves"!==o)&&"licence-exceeded"!==t}}),r("bmTr3",function(e,t){let r=(0,o("7DBey").unimplementedAbstractService)("fetchJSON");e.exports.fetchJSON=r}),r("hCOLa",function(e,t){var r=o("42omo");let a=(e,t)=>{if(t===e)return!0;if(!e||!t)return!1;{let o=Object.keys(e),r=Object.keys(t);if(r.length!==o.length)return!1;for(let o of r)if(t[o]!==e[o])return!1;return!0}};e.exports.useService=(e,t)=>{let n=(0,r.useRef)({service:void 0,depsOverrides:void 0,result:void 0}),s=n.current;return s&&s.service===e&&a(s.depsOverrides,t)||(n.current.result=(0,o("jdJm1").resolveService)(e,t),n.current.depsOverrides=t,n.current.service=e),n.current.result}}),r("jdJm1",function(e,t){function r(e,t){return"function"==typeof e&&(0,o("7DBey").isServiceWithDeps)(e)?o=>e(o,a(e.dependencies,t??{})):e}let a=(e,t)=>{let o;return{dependencies(){if(o)return o;for(let[a,n]of(o={},Object.entries(e)))o[a]=a in t?t[a]:r(n,t);return o}}};e.exports.resolveService=r});
//# sourceMappingURL=PageHeaderLoomEntryPoint.bf5c6f39.js.map
