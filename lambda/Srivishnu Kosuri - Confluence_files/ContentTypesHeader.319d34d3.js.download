function e(e){return e&&e.__esModule?e.default:e}function t(e,t,o,r){Object.defineProperty(e,t,{get:o,set:r,enumerable:!0,configurable:!0})}var o=globalThis.parcelRequired477,r=o.register;r("3eMfQ",function(t,r){var a=o("42omo"),n=o("3u0dr"),l=o("frIzR");let i=(0,n.isReactCompilerActiveV1)()?()=>{let t,o=(0,l.c)(1);return o[0]===Symbol.for("react.memo_cache_sentinel")?(t=e(a).createElement("div",{style:{height:"40px",display:"flex",width:"100%",padding:"var(--ds-space-100, 8px) var(--ds-space-250, 20px)",alignItems:"center",boxSizing:"border-box"}},e(a).createElement("div",{style:{height:"17px",width:"100%",backgroundColor:"var(--ds-skeleton, #0515240F)",borderRadius:"10%"}})),o[0]=t):t=o[0],t}:()=>e(a).createElement("div",{style:{height:"40px",display:"flex",width:"100%",padding:"var(--ds-space-100, 8px) var(--ds-space-250, 20px)",alignItems:"center",boxSizing:"border-box"}},e(a).createElement("div",{style:{height:"17px",width:"100%",backgroundColor:"var(--ds-skeleton, #0515240F)",borderRadius:"10%"}})),s=(0,o("jmjWc").LoadableLazy)({__loadable_id__:"ldI6_",name:"LazyContentToolsItem",loader:async()=>(0,o("9wGTI").fg)("confluence_link_item_append_trace_context")?(await o("6Xcb3")).ContentToolsItemWithRoutesContext:(await o("2FG2u")).ContentToolsItem}),c=(0,o("jmjWc").LoadableLazy)({__loadable_id__:"uFc6G",name:"LazyContentToolsItemWithPlaceholder",loader:async()=>(0,o("9wGTI").fg)("confluence_link_item_append_trace_context")?(await o("6Xcb3")).ContentToolsItemWithRoutesContext:(await o("2FG2u")).ContentToolsItem,loading:()=>e(a).createElement(i,null)});t.exports.LazyContentToolsItem=s,t.exports.LazyContentToolsItemWithPlaceholder=c}),r("6Xcb3",function(e,t){let r=o("4mJKd")(5);e.exports=Promise.all([r("bzc8Q"),r("4TY0p")]).then(()=>o("ebxOW"))}),r("4mJKd",function(e,t){e.exports=e=>t=>import(o("8tirZ").shardUrl(o("02nRr").resolve(t),e))}),r("8tirZ",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.applyShardToDomain=l,e.exports.domainShardingKey=void 0,e.exports.getDomainShardIndex=r,e.exports.shardUrl=function(e,t){return globalThis[o]?i(e,t):e},e.exports.shardUrlUnchecked=i;let o="__ATLASPACK_ENABLE_DOMAIN_SHARDS";function r(e,t){let o=t+1,r=e.split("").reduce((e,t)=>{let r=(e<<o)-e+t.charCodeAt(0);return r&r},0);return(r%=o)<0&&(r+=o),r}let a=/-\d+$/;function n(e){if(!a.test(e))return e;let t=e.lastIndexOf("-");return e.slice(0,t)}function l(e,t){let o=e.indexOf("."),r=0===t?"":`-${t-1}`;if(-1===o)return`${n(e)}${r}`;let a=n(e.slice(0,o));return`${a}${r}${e.slice(o)}`}function i(e,t){let o=new URL(e),a=r(function(e){let t=e.lastIndexOf("/");if(-1===t||t===e.length-1)throw Error("Expected an absolute URL with a file name, unable to apply sharding.");return e.slice(t+1)}(o.pathname),t);return o.hostname=l(o.hostname,a),o.toString()}e.exports.domainShardingKey=o}),r("02nRr",function(e,o){t(e.exports,"register",()=>r,e=>r=e),t(e.exports,"resolve",()=>a,e=>a=e);var r,a,n=new Map;r=function(e,t){for(var o=0;o<t.length-1;o+=2)n.set(t[o],{baseUrl:e,path:t[o+1]})},a=function(e){var t=n.get(e);if(null==t)throw Error("Could not resolve bundle with id "+e);return new URL(t.path,t.baseUrl).toString()}}),r("2FG2u",function(e,t){e.exports=o("4mJKd")(5)("bzc8Q").then(()=>o("al4VD"))}),r("d8J72",function(t,r){var a=o("42omo"),n=o("b3j2Y");let l="ConvertPageToFolderDialogModal",i="VIEW_PAGE",s=(0,o("7aRa9").withFlags)(({spaceKey:t,contentId:r,contentTitle:s,onClose:p,flags:f})=>{let{formatMessage:m}=(0,o("8C5kA").default)(),{createAnalyticsEvent:h}=(0,o("inPa6").useAnalyticsEvents)(),E=(0,a.useContext)(o("1kHsc").ExperienceTrackerContext),{push:v}=(0,o("dPJCf").useRouteActions)(),[C,T]=(0,a.useState)(!1),[y,{error:b}]=(0,o("1KmJq").useMutation)((0,o("eSUdr").default)`mutation ConvertPageToFolderDialogConvertPageToFolderMutation($id:ID!){convertToFolder(id:$id){content{id}}}`),_=(0,a.useCallback)(()=>{h({type:"sendTrackEvent",data:{action:"clicked",actionSubject:l,actionSubjectId:`${l}CancelButton`,source:i}}).fire(),p()},[h,p]),F=e=>{T(!1),E.succeed({name:o("irVI7").CONVERT_PAGE_TO_FOLDER_EXPERIENCE}),h({type:"sendTrackEvent",data:{actionSubject:l,action:"success",attributes:void 0,source:i}}).fire(),f.showFlag({type:"success-circle",title:m(u.successFlagTitle),description:m(u.successFlagDescription),close:"auto"});let r=e?.data?.convertToFolder?.content?.id;if(r){let e=o("1NBp8").FOLDER_VIEW.toUrl({spaceKey:t,contentId:r});e&&v(e)}p()},x=({title:e,description:t,actions:o})=>{f.showFlag({type:"error",title:e,description:t,close:"auto",actions:o})},I=e=>{(0,o("7Sm4c").markErrorAsHandled)(e),E.abort({name:o("irVI7").CONVERT_PAGE_TO_FOLDER_EXPERIENCE,reason:"Expected Apollo error"})},P=e=>{if(c(e))x({title:m(u.editPermissionErrorFlagTitle),description:m(u.editPermissionErrorFlagDescription)}),I(e);else if(d(e))x({title:m(u.nameCollisionErrorFlagTitle),description:m(u.nameCollisionErrorFlagDescription)}),I(e);else if(g(e)&&s)x({title:m(u.nameLengthLimitErrorFlagTitle),description:m(u.nameLengthLimitErrorFlagDescription,{numCharsOverLimit:s.length-241})}),I(e);else{if(x({title:m(u.defaultErrorFlagTitle),description:m(u.defaultErrorFlagDescription),actions:[{content:m(u.defaultErrorFlagAction),onClick:D}]}),(0,o("95rLf").isExpectedApolloError)(e))return void I(e);(0,o("fGzMp").stopExperienceOnError)(o("irVI7").CONVERT_PAGE_TO_FOLDER_EXPERIENCE,e),h({type:"sendTrackEvent",data:{actionSubject:l,action:"failed",attributes:{error:e},actionSubjectId:`${l}ConvertButton`,source:i}}).fire()}},D=()=>{h({type:"sendUIEvent",data:{action:"clicked",actionSubject:l,actionSubjectId:`${l}ConvertButton`,source:i}}).fire(),T(!0),E.start({name:o("irVI7").CONVERT_PAGE_TO_FOLDER_EXPERIENCE}),y({variables:{id:r}}).then(e=>{F(e)}).catch(e=>{P(e),T(!1)})};return e(a).createElement(a.Fragment,null,e(a).createElement(o("8CZUH").default,{width:"450px",key:"ConvertPageToFolderDialog",onClose:_,shouldScrollInViewport:!0},e(a).createElement(o("1DHa6").default,null,e(a).createElement(o("9ot3w").default,{hasCloseButton:!0},e(a).createElement(o("d8eRd").default,null,e(a).createElement(o("gtD4K").default,u.dialogHeader))),e(a).createElement(o("1DHa6").default,null,e(a).createElement(o("gtD4K").default,u.dialogDescription)),e(a).createElement(o("8o1lj").default,null,e(a).createElement(o("eyWa4").default,{space:"space.200"},e(a).createElement(o("1s5hv").default,{justifyContent:"end"},e(a).createElement(o("hArLp").default,null,e(a).createElement(o("ccHMk").default,{onClick:_,appearance:"subtle"},e(a).createElement(o("gtD4K").default,u.cancel)),e(a).createElement(o("ccHMk").default,{onClick:D,appearance:"primary",isLoading:C},e(a).createElement(o("gtD4K").default,u.dialogSubmitText)))))))),e(a).createElement(o("67Foi").ScreenEvent,{name:"convertPageToFolderDialogModalScreen",id:"convertPageToFolderModalScreenEvent"}),b&&e(a).createElement(n.ErrorDisplay,{error:b}))}),c=e=>e.message.includes("User does not have permissions to perform this action"),d=e=>e.message.includes("A folder exists with the same title in this space"),g=e=>e.message.includes("Title cannot be longer than 255 characters"),u=(0,o("cgtv4").defineMessages)({dialogHeader:{id:"folder-conversion.convert-page-to-folder.dialog.header",defaultMessage:"Convert this page into a folder?"},dialogDescription:{id:"folder-conversion.convert-page-to-folder.dialog.description",defaultMessage:"We’ll archive the original page, so you don’t need to worry about losing your work."},cancel:{id:"folder-conversion.convert-page-to-folder.dialog.cancel",defaultMessage:"Cancel"},dialogSubmitText:{id:"folder-conversion.convert-page-to-folder.dialog.submit",defaultMessage:"Convert"},successFlagTitle:{id:"folder-conversion.convert-page-to-folder.flags.success-message.title",defaultMessage:"Conversion complete"},successFlagDescription:{id:"folder-conversion.convert-page-to-folder.flags.success-message.description.placeholder-title",defaultMessage:"We’ve finished converting the page to a folder."},defaultErrorFlagTitle:{id:"folder-conversion.convert-page-to-folder.flags.error-message.title",defaultMessage:"We couldn’t convert the page to a folder"},defaultErrorFlagDescription:{id:"folder-conversion.convert-page-to-folder.flags.error-message.description.placeholder-title",defaultMessage:"Something went wrong, and we were unable to convert this page to a folder."},defaultErrorFlagAction:{id:"folder-conversion.convert-page-to-folder.flags.error-message.action",defaultMessage:"Try again"},editPermissionErrorFlagTitle:{id:"folder-conversion.convert-page-to-folder.flags.error-message.edit-permissions.title",defaultMessage:"Request edit and archive access to continue"},editPermissionErrorFlagDescription:{id:"folder-conversion.convert-page-to-folder.flags.error-message.edit-permissions.description",defaultMessage:"To convert this page to a folder, you’ll need permission to edit and archive it."},nameCollisionErrorFlagTitle:{id:"folder-conversion.convert-page-to-folder.flags.error-message.name-collision.title",defaultMessage:"Rename this page to continue"},nameCollisionErrorFlagDescription:{id:"folder-conversion.convert-page-to-folder.flags.error-message.name-collision.description",defaultMessage:"To avoid duplicate titles, you’ll need to rename this page before we can convert it to a folder and archive the original."},nameLengthLimitErrorFlagTitle:{id:"folder-conversion.convert-page-to-folder.flags.error-message.name-length-limit.title",defaultMessage:"Give this page a shorter title"},nameLengthLimitErrorFlagDescription:{id:"folder-conversion.convert-page-to-folder.flags.error-message.name-length-limit.description",defaultMessage:"Before we can convert this page to a folder, archiving the original, you’ll need to give it a title that is at least {numCharsOverLimit, plural, one {# character} other {# characters}} shorter."}});var p=o("3eMfQ");t.exports.ConvertToFolderItem=({sectionItem:t,contentId:r,spaceKey:l,dialogs:i,shouldHighlight:c,onClick:d,...g})=>{let{canConvertPageToFolder:u,contentTitle:f,error:m}=(0,o("gjbSq").useCanConvertPageToFolder)({contentId:r,spaceKey:l}),{createAnalyticsEvent:h}=(0,o("inPa6").useAnalyticsEvents)();return u?(t.url="",t.urlWithoutContextPath="",e(a).createElement(e(a).Fragment,null,m&&e(a).createElement(n.ErrorDisplay,{error:m}),e(a).createElement(p.LazyContentToolsItem,{key:t.completeKey,...t,...g,onClick:e=>{d?.(e),h({type:"sendUIEvent",data:{action:"clicked",actionSubject:"button",actionSubjectId:"convertPageToFolder",source:"contentToolsItem"}}).fire(),i.showDialog(s,{contentId:r,spaceKey:l,contentTitle:f})},shouldHighlight:c}))):m?e(a).createElement(n.ErrorDisplay,{error:m}):null}}),r("gjbSq",function(e,t){let r=(0,o("eSUdr").default)`query ConvertPageToFolderQuery($contentId:ID!$spaceKey:String!){space(key:$spaceKey){id spaceTypeSettings{enabledContentTypes{isFoldersEnabled}}}singleContent(id:$contentId){id title type status operations{operation targetType}}}`,a=(e,t,o,r)=>e||(t||o)&&!r;e.exports.CONVERT_PAGE_TO_FOLDER_WEBITEM_ID="action-convert-page-to-folder",e.exports.useCanConvertPageToFolder=({contentId:e,spaceKey:t,skipQuery:n})=>{let{data:l,loading:i,error:s}=(0,o("xQxzY").useQuery)(r,{skip:!!n||(0,o("cEgMD").isCompanyHubSpaceKey)(t),variables:{contentId:e,spaceKey:t}}),c=(0,o("gEtAQ").isViewPage)(),d=(0,o("3jwuS").useIsCurrentPageLive)(),g=l?.singleContent?.type==="page",u=l?.space?.spaceTypeSettings?.enabledContentTypes?.isFoldersEnabled,p=l?.singleContent?.status==="current",f=!1,m=!1;l?.singleContent?.operations?.forEach(e=>{e?.targetType==="page"&&(e?.operation==="update"?f=!0:e?.operation==="archive"&&(m=!0))});let h=!!(c&&!d&&g&&u&&p&&f&&m);(0,o("95rLf").isExpectedApolloError)(s)&&(0,o("7Sm4c").markErrorAsHandled)(s);let E=l?.singleContent?.title,v=a(!!n,!!l,!!s,i);return{canConvertPageToFolder:h,contentTitle:E,loading:i,error:s,hasLoaded:v}}}),r("k9WFY",function(e,t){let r=(0,o("jmjWc").LoadableAfterPaint)({__loadable_id__:"g6cZS",name:"PublishPageAsBlogDialog",loader:async()=>(await o("iT0P0")).PublishPageAsBlogDialog});e.exports.PublishPageAsBlogDialog=r}),r("iT0P0",function(e,t){let r=o("4mJKd")(5);e.exports=Promise.all([r("6wr18"),r("lnnYm"),r("5zDuS"),r("ffEVr"),r("Wowvf"),r("hhss7"),r("fJjZJ")]).then(()=>o("8d4o6"))});
//# sourceMappingURL=ContentTypesHeader.319d34d3.js.map
