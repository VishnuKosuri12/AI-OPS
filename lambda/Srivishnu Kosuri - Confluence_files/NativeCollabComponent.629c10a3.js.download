function e(e){return e&&e.__esModule?e.default:e}function t(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0})}var r=globalThis.parcelRequired477,n=r.register;n("03pNx",function(t,n){var a,o=r("42omo"),i=r("a4TK8");let s=Symbol("TimedOut");async function l(e,t){let n=window.__PRELOAD_DRAFT__;if(t||!n||n.contentId!==e)return null;r("9137z").CollabEditProviderMeasures.markMeasureStart(r("j8hiR").COLLAB_EDIT_PROVIDER_MEASURES.COLLAB_EDIT_PROVIDER_PRELOAD_NCS_DRAFT,n.startTime);let a=new Promise(e=>setTimeout(e,1e3,s)),o=await Promise.race([(0,r("5Za2S").getDraftFromPromise)(e,n.draftFetchPromise),a]);return(r("9137z").CollabEditProviderMeasures.markMeasureEnd(r("j8hiR").COLLAB_EDIT_PROVIDER_MEASURES.COLLAB_EDIT_PROVIDER_PRELOAD_NCS_DRAFT),o===s)?(r("9137z").CollabEditProviderMeasures.markMeasureStart(r("j8hiR").COLLAB_EDIT_PROVIDER_MEASURES.COLLAB_EDIT_PROVIDER_PRELOAD_NCS_DRAFT_TIMEOUT),null):o}var c=r("dYcT6");let d=e=>(0,r("9o40q").useExperimentalMutation)({url:e=>`/wiki/rest/collab/1.0/content/${e.contentId}/reset?behind=${e.behind||"COLLAB"}`,method:"PUT",headers:{"Content-Type":r("aBfpe").MediaType.JSON},parseResponseOnSuccess:e=>({traceId:(0,r("9kGfD").getTraceIdFromResponse)(e)??""}),parseResult:e=>({experimentalResetCollabService:{traceId:e.traceId}}),transformError:async e=>{let t=e instanceof r("hBkCm").BadStatusError?e.response:void 0;return t?(0,r("b4EKK").getErrorWithResponse)(e,t):e},variables:e?.variables});class u extends Error{constructor(e){super(e),this.name="WaitForPublishButtonComponentUnmountedError"}}class E extends Error{constructor(e){super(e),this.name="WaitForPublishButtonPreviousCallNotCompletedError"}}class p extends Error{constructor(e){super(e),this.name="WaitForPublishButtonTimeoutError"}}let m=()=>(0,r("6mKj3").expValEquals)("cc_delay_succeeding_edit_page_until_publish_button","isEnabled",!0)?1e4:3e4,_=()=>document.querySelector('[data-testid="publish-modal-update-button"], [data-testid="publish-button"], [data-testid="scheduled-button"], [data-testid="publish-button-ui"]'),f=()=>{let e=_();return e&&!1===e.disabled},g=()=>{let e="";return _()?f()?"Found an enabled publish button.  This should not be an error.":"Found a publish button, but it was not enabled before timeout":"Did not find a publish button before timeout"},b=()=>{let e=(0,o.useRef)(null),t=(0,o.useRef)(null),r=(0,o.useRef)(null),n=(0,o.useCallback)(()=>{null!==r.current&&r.current(new u("Component unmounted before the publish button was enabled"))},[]),a=(0,o.useCallback)(()=>{null!==r.current&&r.current(new E("waitForPublishButtonToBeEnabled was called again before the publish button was enabled"))},[]),i=(0,o.useCallback)(()=>{null!==e.current&&(clearInterval(e.current),e.current=null),null!==t.current&&(clearTimeout(t.current),t.current=null)},[]);return(0,o.useEffect)(()=>()=>{i(),n()},[i,n]),(0,o.useCallback)(()=>(i(),a(),new Promise((n,a)=>{if(r.current=a,f())return void n();e.current=setInterval(()=>{f()&&(i(),n())},2e3),t.current=setTimeout(()=>{i(),a(new p(g()))},m())})),[i,a])},S=(0,r("7W8i8").getLogger)("native-collab"),T=(e,t,n)=>{let{createAnalyticsEvent:a}=(0,r("inPa6").useAnalyticsEvents)(),[{collabEditInitialized:i},s]=(0,r("hYoU4").useNativeCollabState)(),[l,c]=(0,o.useState)(null),d=(0,o.useContext)(r("1kHsc").ExperienceTrackerContext),p=(0,r("3jwuS").useIsCurrentPageLive)(),m=r("irVI7").EDIT_PAGE_LOAD_EXPERIENCE;p&&(m=r("irVI7").VIEW_PAGE_EXPERIENCE),n&&(m=r("irVI7").COMPANY_HUB_EDITOR_LOAD_EXPERIENCE);let{livePageReleasePhase:_}=(0,r("gTyTP").useIsLivePagesFeatureEnabled)(),f=b();return(0,o.useEffect)(()=>{if(!e)return;let n=e=>{S.debug`Collab Provider initialised at ${performance.now()/1e3}`,c(e?.metadata?.title??""),s.setCollabEditInitialized(!0),r("9137z").CollabEditProviderMeasures.markMeasureEnd(r("j8hiR").COLLAB_EDIT_PROVIDER_MEASURES.COLLAB_EDIT_PROVIDER_DISABLED),r("9137z").CollabEditProviderMeasures.markMeasureEnd(r("j8hiR").COLLAB_EDIT_PROVIDER_MEASURES.COLLAB_EDIT_PROVIDER_INIT_DOC);let n={collabService:"ncs",isLivePage:p,...p?{livePageReleasePhase:_}:{}},o=()=>{d.succeed({name:m,attributes:{...n}})},i=e=>{e instanceof u||e instanceof E?d.abort({name:m,reason:e.message,attributes:{...n}}):d.fail({name:m,attributes:{...n,failureReason:e.message},error:e})};p?o():((0,r("6mKj3").expValEquals)("cc_delay_succeeding_edit_page_until_publish_button","isEnabled",!0)||o(),f().then(()=>{a({type:"sendOperationalEvent",data:{action:"enabled",actionSubject:"editPagePublishButton",source:"useInit",objectId:t}}).fire(),(0,r("6mKj3").expValEquals)("cc_delay_succeeding_edit_page_until_publish_button","isEnabled",!0)&&o()},e=>{a({type:"sendOperationalEvent",data:{action:"failedToEnable",actionSubject:"editPagePublishButton",source:"useInit",objectId:t,attributes:{wouldBeAnAbort:e instanceof u||e instanceof E,errorMessage:e.message}}}).fire(),(0,r("6mKj3").expValEquals)("cc_delay_succeeding_edit_page_until_publish_button","isEnabled",!0)&&i(e)}))};return e.on("init",n),()=>{e.off("init",n);let r=d.getExperienceState(m),a=r?.hasStopped??!0,o=r?.attributes?.contentId===t;!a&&o&&d.abort({name:m,reason:"Unmounted before experience finished",attributes:{isLivePage:p}})}},[f,e,d,s,m,p,_,t,a]),{collabEditInitialized:i,titleFromInit:l}},h=(e,t)=>{let[r,n]=(0,o.useState)(null),a=(0,o.useCallback)(t=>{if(e){n(t);let r=e.getMetadata();e.setMetadata({...r,metadataSource:"client",title:t})}},[e]);return(0,o.useEffect)(()=>{if(!e)return;let r=e=>{if(!e||!("title"in e))return;let{title:r}=e;n(r),t?.()};return e.on("metadata:changed",r),()=>{e.off("metadata:changed",r)}},[e,t]),{onTitleChange:a,title:r}};var I=r("7d2Nc");(0,r("jmjWc").LoadableAfterPaint)({__loadable_id__:"0_Ww_",name:"InviteButton",loader:async()=>(await r("is6a1")).ShareButton});let C=(0,r("jmjWc").LoadableAfterPaint)({__loadable_id__:"C6p-B",name:"ShareButtonLoader",loader:async()=>(await r("is6a1")).ShareButton,loading:r("fVAB2").ShareButtonPlaceholder}),v=t=>e(o).createElement(e(o).Fragment,null,e(o).createElement(I.PageSegmentLoadStart,{metric:r("15M40").SHARE_BUTTON_PAGE_SEGMENT_LOAD,isCustomStart:!0,key:t.contentId}),e(o).createElement(C,t)),R=({buttonProps:t,title:r,contentId:n,contentType:a,intl:i})=>{let s=i.formatMessage({id:"editor.fabric.share.invite.to.edit.form.title"}),l="blogpost"===a?i.formatMessage({id:"editor.fabric.share.invite.to.edit.empty.blog.post.title"}):i.formatMessage({id:"editor.fabric.share.invite.to.edit.empty.page.title"});return e(o).createElement(v,{contentId:n,shareFormTitle:s,shareTitle:r||l,shareeAction:"edit",showInviteToEditPlaceholder:!0,renderCustomTriggerButton:({isSelected:r,onClick:n},{...a})=>e(o).createElement("span",a,e(o).cloneElement(t.children,{isSelected:r,onClick:n}))})},P=(e,t,n)=>{let[a,i]=(0,o.useState)(!1),[s,l]=(0,o.useState)(!1),c=(0,r("kM55L").useCollabNetworkStatusActions)(),d=(0,o.useContext)(r("1kHsc").ExperienceTrackerContext),u=(0,o.useRef)(!1),E=(0,o.useRef)(),p=(0,o.useRef)(),{createAnalyticsEvent:m}=(0,r("inPa6").useAnalyticsEvents)(),_=Number(r("4VJDS").default.getNumber("confluence_frontend_ncs_disconnected_delay_ms",0)),f=(0,o.useCallback)(({trigger:e,attributes:r})=>{m({type:"sendOperationalEvent",data:{action:e,actionSubject:"nativeEditor",source:"confluenceFrontend",objectId:t,objectType:n,attributes:r}}).fire()},[m,n,t]);return(0,o.useEffect)(()=>{if(!e)return;let t=({reason:e})=>{if("SOCKET_CLOSED"===e||"SOCKET_ERROR"===e){if(f({trigger:"disconnected",attributes:{collabSessionId:E.current,reason:e,time:Date.now(),online:navigator.onLine}}),u.current=!0,p.current=Date.now(),0==_){i(!0),c.setIsCollabOffline(!0);return}setTimeout(()=>{u.current&&(i(!0),c.setIsCollabOffline(!0))},_)}else l(!0);d.attachDebugPoint({name:r("irVI7").EDIT_PAGE_LOAD_EXPERIENCE,message:"NCS Disconnected",attributes:{reason:e}})},n=({sid:e})=>{u.current&&((0,r("cMvQV").setUserAgent)(),f({trigger:"reconnected",attributes:{collabSessionId:E.current,disconnectedTimeMs:Date.now()-p.current,time:Date.now(),browser:(0,r("cMvQV").friendlyName)(),browserVersion:(0,r("cMvQV").version)(),online:navigator.onLine}}),d.attachDebugPoint({name:r("irVI7").EDIT_PAGE_LOAD_EXPERIENCE,message:"NCS Reconnected"})),E.current=e,u.current=!1,i(!1),l(!1),c.setIsCollabOffline(!1)};return e.on("disconnected",t),e.on("connected",n),()=>{e.off("disconnected",t),e.off("connected",n)}},[e,f,_,d,c]),{internetLost:a,disconnected:s}},D=(e,t,n)=>{let{createAnalyticsEvent:a}=(0,r("inPa6").useAnalyticsEvents)(),{showEditorFlag:i}=(0,c.useEditorFlagsContext)(),s=(0,r("3jwuS").useIsCurrentPageLive)(),l=(0,o.useRef)(0),[d,u]=(0,o.useState)(!1),E=(0,o.useRef)(t);return(0,o.useEffect)(()=>{t!==E.current&&(l.current=0,u(!1),E.current=t)},[t]),(0,o.useEffect)(()=>{if(!e)return;let o=({status:e,version:o})=>{"failure"===e?(l.current++,!d&&l.current>150&&(u(!0),i({errorName:r("1mHQU").ALLOWED_FLAG_MESSAGES.COLLAB_STATUS_ERROR}),l.current=0,a({type:"sendOperationalEvent",data:{action:"stepFailureLimitExceeded",actionSubject:"nativeEditor",source:"confluenceFrontend",objectId:t,objectType:n,attributes:{version:o}}}).fire())):"success"===e&&(l.current=0,u(!1))};return e.on("commit-status",o),()=>{e.off("commit-status",o)}},[e,150,t,n,a,i,s,d]),{hasExceededMaxStepFailures:d,stepFailureCount:l.current}},M=({contentId:e,contentType:t,collabEditInitialized:n,collabRecoveryError:a,collabEditError:i,isEditPageDraftRestricted:s})=>{let[l,d]=(0,o.useState)(!1),{showEditorFlag:u}=(0,c.useEditorFlagsContext)(),{createAnalyticsEvent:E}=(0,r("inPa6").useAnalyticsEvents)(),{edition:p}=(0,r("bQm3c").useSessionData)(),m=r("4VJDS").default.getNumber("confluence_frontend_set_collab_init_timeout",0),_=(0,o.useContext)(r("1kHsc").ExperienceTrackerContext),f=(0,o.useRef)(e);return(0,o.useEffect)(()=>{if(e!==f.current){f.current=e,d(!1);return}if(n||0===m||a||i||s)return void d(!1);let o=setTimeout(()=>{E({type:"sendOperationalEvent",data:{action:"editorLoadTimeout",actionSubject:"nativeEditor",source:"confluenceFrontend",objectId:e,objectType:t,attributes:{timeoutMs:m,edition:p}}}).fire(),u({errorName:r("1mHQU").ALLOWED_FLAG_MESSAGES.COLLAB_INIT_TIMEOUT_TAKING_TOO_LONG}),_.attachDebugPoint({name:r("1mHQU").ALLOWED_FLAG_MESSAGES.COLLAB_INIT_TIMEOUT_TAKING_TOO_LONG,message:`NCS Connect Timeout after ${m}`}),d(!0)},m);return()=>{clearTimeout(o),d(!1)}},[n,a,i,e,t,p,m,u,E,s,_]),{collabInitTimedOut:l}},y=(e,t)=>{let[r,n]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{if(!e)return;if(t)return void n(!1);let r=setTimeout(()=>{n(!0)},1e4);return()=>{clearTimeout(r)}},[t,e,1e4]),{collabEditConnectionTimedOut:r}},A=(e,t,n)=>{let{userId:a}=(0,r("bQm3c").useSessionData)(),[i,s]=(0,o.useState)(!1),{createAnalyticsEvent:l}=(0,r("inPa6").useAnalyticsEvents)(),c=(0,r("de2j9").useIsEditorPage)();(0,o.useEffect)(()=>{let r;if(!e||i||!n)return;let o=t?.content?.nodes?.[0];if(o?.status!=="draft"||o?.version?.ncsStepVersion!=="1")return;let d=o?.version?.by;d&&"accountId"in d&&(r=d.accountId??void 0),r&&r===a&&(l({type:"sendTrackEvent",data:{action:"created",actionSubject:"draft",source:"nativeCollabComponent",objectId:e,attributes:{isOnEditRoute:c}}}).fire(),s(!0))},[t,n,a,i,e,l,c])},L=({collabEditProvider:t,onPermissionChange:r})=>{let n=(0,o.useRef)(null);(0,o.useEffect)(()=>{if(!t)return;let a=t=>{null==n.current||e(i)(n.current,t)||r?.(),n.current=t};return t.on("permission",a),()=>{t.off("permission",a)}},[t,r])},N=(0,r("cgtv4").defineMessages)({titleKeywordForAutomationDiscovery:{id:"native-collab.title-keyword-for-automation-discovery.",defaultMessage:"meeting"},collabLimitReachedTitle:{id:"native-collab.collab-limit-reached-title",defaultMessage:"You can’t edit this content right now"},collabLimitReachedDescription:{id:"native-collab.collab-limit-reached-description",defaultMessage:"You’ve reached the max number of active editors. Try again when it’s not so busy."},underCollabLimitTitle:{id:"native-collab.collab.under.collab-limit-title",defaultMessage:"Ready to go"},underCollabLimitDescription:{id:"native-collab.collab.under.collab-limit-description",defaultMessage:"We’re autosaving your changes, so you never need to press save."},livePagesViewLimitReachedTitle:{id:"native-collab.live-pages-limit-reached-title",defaultMessage:"This content can’t be viewed right now. Reload and try again."},livePagesViewLimitReachedDescription:{id:"native-collab.live-pages-limit-reached-description",defaultMessage:"You’ve reached the max number of active viewers. Try again when it’s not so busy."},underLivePagesViewLimitTitle:{id:"native-collab.live-pages.under.live-pages-limit-title",defaultMessage:"Ready to go"}}),O=({contentId:t,spaceId:n,flags:a,isEditLimitExceeded:i,collabEditProvider:s,isLiveViewLimitExceeded:l=!1})=>{let c=(0,o.useRef)(!1),d=(0,o.useRef)(!1),u=(0,r("3jwuS").useIsCurrentPageLive)(),{createAnalyticsEvent:E}=(0,r("inPa6").useAnalyticsEvents)(),p=(0,o.useCallback)(({limitType:e})=>{E({type:"sendTrackEvent",data:{action:"collabLimitReached",actionSubject:"editor",actionSubjectId:t,source:"nativeEditor",objectId:t,containerId:n,attributes:{isLivePage:u,limitType:e}}}).fire()},[E,t,n,u]);(0,o.useEffect)(()=>{i&&!c.current&&p({limitType:"EDIT"}),i&&!c.current?(c.current=!0,a.showErrorFlag({title:e(o).createElement(r("gtD4K").default,N.collabLimitReachedTitle),description:e(o).createElement(r("gtD4K").default,N.collabLimitReachedDescription)})):c.current&&(c.current=!1,a.showSuccessFlag({title:e(o).createElement(r("gtD4K").default,N.underCollabLimitTitle),description:e(o).createElement(r("gtD4K").default,N.underCollabLimitDescription)}))},[i,a,p,l]),(0,o.useEffect)(()=>{u&&(l&&!d.current&&p({limitType:"VIEW"}),l&&(s?.destroy(),d.current=!0,a.showErrorFlag({title:e(o).createElement(r("gtD4K").default,N.livePagesViewLimitReachedTitle),description:e(o).createElement(r("gtD4K").default,N.livePagesViewLimitReachedDescription)})))},[l,a,u,s,p])},x=(e,t)=>{let[r,n]=(0,o.useState)(!1),a=(0,o.useRef)(null),i=(0,o.useCallback)(r=>{if(e){a.current=r;let e=r.isLocked;n(e),t?.(e)}},[e,t]);return(0,o.useEffect)(()=>{if(e)return e.on("namespace-lock:check",i),()=>{e.off("namespace-lock:check",i)}},[e,i]),{isLocked:r}};var w=((a={}).IP_BLOCKED="IP_BLOCKED",a.OFFLINE="OFFLINE",a.ONLINE="ONLINE",a.RATE_LIMITED="RATE_LIMITED",a.SESSION_EXPIRED="SESSION_EXPIRED",a);let k=(0,r("eSUdr").default)`query useNativeCollabConnectionListenerQuery{network{status}}`,B=({collabEditConnectionTimedOut:e,collabInitTimedOut:t})=>{let n=(0,r("3jwuS").useIsCurrentPageLive)(),{createAnalyticsEvent:a}=(0,r("inPa6").useAnalyticsEvents)(),{data:i,error:s}=(0,r("xQxzY").useQuery)(k,{fetchPolicy:"cache-only",skip:!(0,r("9wGTI").fg)("confluence_analytics_on_ncs_disconnect")||(0,r("6mKj3").expValEquals)("confluence_replace_apollo_client_schema","isEnabled",!0)}),l=(0,r("ikfiQ").useNetworkStatusListenerCache)(),c=(0,r("6mKj3").expValEquals)("confluence_replace_apollo_client_schema","isEnabled",!0)?l:i?.network?.status;(0,o.useEffect)(()=>{s&&((0,r("7Sm4c").markErrorAsHandled)(s),(0,r("5ZqQS").getMonitoringClient)().submitError(s,{attribution:r("3IBnw").Attribution.PAGE_MODES}))},[s]),(0,o.useEffect)(()=>{if(!(0,r("9wGTI").fg)("confluence_analytics_on_ncs_disconnect"))return;let o=c===w.IP_BLOCKED||c===w.OFFLINE,i=e||t;!o&&i&&a({type:"sendTrackEvent",data:{source:"nativeCollabComponent",actionSubject:"nativeCollabConnectionListener",actionSubjectId:"nativeCollabConnectionListener",action:"disconnected",attributes:{isLivePage:n}}}).fire()},[c,e,n,t,a])},G=(e,t,r)=>{let n=e?.content?.nodes?.[0];return{isUnpublishedDraft:t?!!r:!n?.history?.createdBy,version:n?.version?.number||1,spaceId:n?.space?.id||null,subType:n?.subType||null,isOverviewPage:n?.space?.homepageId===n?.id}},F=(0,r("2XqLN").default)((e,t)=>e(t),e(i)),V=t=>{let{children:n,contentId:a,contentType:i,disableInviteToEdit:s,draftShareId:u,spaceKey:E,permissionTokenRefresh:p,pageTreeStateUpdater:m,onPermissionChange:_,flags:f,canEdit:g}=t,b=(0,r("8C5kA").default)(),{replace:S}=(0,r("dPJCf").useRouteActions)(),I=(0,r("cEgMD").isCompanyHubSpaceKey)(E),{cloudId:C,userId:v}=(0,r("bQm3c").useSessionData)(),N=(0,r("3jwuS").useIsCurrentPageLive)(),{getIsPublishing:w}=(0,r("2wSyg").useDraftSyncAndPublishContext)(),[{collabEditProvider:k},{setCollabEditProvider:V,resetNativeCollabState:K}]=(0,r("hYoU4").useNativeCollabState)(),{forceRefetchBlogTree:U}=(0,r("jacyh").useBlogTreeActions)(),[j,H]=(0,o.useState)(!1),Y=(0,o.useRef)(null),[{presenceId:W}]=(0,r("2VZOl").useNativeCollabPresenceState)(),{client:z}=(0,r("j7xMJ").useFetchUsersClient)(),[q,Q]=(0,o.useState)(void 0),{loading:X,error:$,data:Z}={loading:q?.loading??!0,error:q?.errors?.[0],data:q?.data},J=(0,o.useCallback)(async e=>{let t=await (0,r("hp2SH").getApolloClient)().query({query:r("l1kdf").NativeCollabQuery,variables:{contentId:a,status:["draft","current"],draftShareId:u},fetchPolicy:e?"cache-first":"network-only"});return e&&Array.isArray(t?.data?.content?.nodes)&&t?.data?.content?.nodes.length===0?await J(!1):(Q(t),t?.data)},[a,u]);(0,o.useEffect)(()=>{J(!0)},[J]),(0,o.useEffect)(()=>{if(N||q?.loading||q?.errors)return;let e=q?.data?.content?.nodes?.[0],t=e?.type;("page"===t||"blogpost"===t)&&t!==i&&S(("page"===t?r("1NBp8").EDIT_PAGE_V2:r("1NBp8").EDIT_BLOG_V2).toUrl({spaceKey:E,contentId:a,contentType:"page"===t?"pages":"blog"}))},[q,i,E,a,S,N]);let[ee]=d({variables:{behind:"COLLAB",contentId:a}}),et=(0,o.useMemo)(()=>G(Z,X,u),[Z,X,u]),{createAnalyticsEvent:er}=(0,r("inPa6").useAnalyticsEvents)();(0,o.useEffect)(()=>{let e=(e,t)=>{er({type:"sendTrackEvent",data:{action:e,actionSubject:"nativeEditor",source:"nativeCollabComponent",attributes:{exitedConfluence:t,isLivePage:N}}}).fire()},t=()=>{e("closed",!0)};return e("opened"),window.addEventListener("beforeunload",t),()=>{e("closed"),window.removeEventListener("beforeunload",t);let n=(0,r("ek3aD").getGlobalTransitionPreloader)().getCurrentRouteCallbackIds();(0,r("9wGTI").fg)("confluence_frontend_transition_preloading_system")&&n.includes("live_doc_preloading_transition_callback_id")||(K(),r("1sAC2").nativeCollabPermissionsTokenState.clearPermissionsTokenState(a))}},[]);let{preloadedDraftPromise:en}=function(e){let t=(0,r("dPJCf").useTransitionId)();return{preloadedDraftPromise:(0,o.useMemo)(()=>l(e,t),[e,t])}}(a),[{isViewMode:ea,mode:eo},{setMode:ei}]=(0,r("efvKr").useLivePageMode)(),es=void 0===eo&&void 0!==g?!g:ea;(0,o.useEffect)(()=>{if(N)return;let e=es?"viewer":"editor";en.then(t=>{V((0,r("fWGpT").getCollabEditProvider)({contentId:a,cloudId:C,contentType:i,permissionTokenRefresh:p,initialDraft:t,isLivePage:N,presenceId:W,presenceActivity:e,userId:v,fetchUsersClient:z})),r("9137z").CollabEditProviderMeasures.markMeasureEnd(r("j8hiR").COLLAB_EDIT_PROVIDER_MEASURES.COLLAB_EDIT_PROVIDER_CREATED),r("9137z").CollabEditProviderMeasures.markMeasureStart(r("j8hiR").COLLAB_EDIT_PROVIDER_MEASURES.COLLAB_EDIT_PROVIDER_DISABLED),r("9137z").CollabEditProviderMeasures.markMeasureStart(r("j8hiR").COLLAB_EDIT_PROVIDER_MEASURES.COLLAB_EDIT_PROVIDER_PRE_CONNECTED)})},[C,a,i,es,N,W,v,p,en,V,z]),(0,o.useEffect)(()=>()=>{let e=(0,r("ek3aD").getGlobalTransitionPreloader)().getCurrentRouteCallbackIds(),t=!!(0,r("9wGTI").fg)("confluence_frontend_transition_preloading_system")&&e.includes("live_doc_preloading_transition_callback_id");k&&!t&&(k?.destroy(),r("fWGpT").getCollabEditProvider.cache?.clear&&r("fWGpT").getCollabEditProvider.cache.clear())},[k]);let{collabEditInitialized:el,titleFromInit:ec}=T(k,a,I),{onTitleChange:ed,title:eu}=h(k,(0,o.useCallback)(()=>{"blogpost"===i&&U(),N&&m?.setForceFetchPageId(a)},[N,m,a,i,U])),{isLocked:eE}=x(k),{isFirstParticipant:ep,isSingleUserSession:em}=(0,r("5M5fB").usePresence)(k),{showEditorFlag:e_}=(0,c.useEditorFlagsContext)(),[ef,eg]=(0,o.useState)(et.isUnpublishedDraft),[eb,eS]=(0,o.useState)(et.version),[eT,eh]=(0,o.useState)(null),[eI,eC]=(0,o.useState)(!1);(0,o.useEffect)(()=>{eg(et.isUnpublishedDraft),eS(et.version),eh(et.subType),eC(et.isOverviewPage)},[et.version,et.isUnpublishedDraft,et.subType,et.isOverviewPage]);let ev=(0,o.useCallback)((e,t)=>{(t!==v||N&&!w())&&Y.current!==e&&(Y.current=e,e_({errorName:r("1mHQU").ALLOWED_FLAG_MESSAGES.OTHER_PUBLISH,statusCode:e,lastPublisher:t}))},[w,N,e_,v]),eR=(0,o.useCallback)((e,t)=>{e&&(eS(e),eg(!1),N&&H(!0),ev(e,t))},[N,ev]),eP=(0,o.useCallback)(e=>{e!==v&&e_({errorName:r("1mHQU").ALLOWED_FLAG_MESSAGES.OTHER_RESTORE,lastPublisher:e})},[e_,v]),eD=(0,o.useCallback)(e=>{let{pageUpdated:t,accountId:r}=e||{},n=t?.trigger,a=t?.confVersion;"convertToLiveEdit"===n&&"page"===i?H(!0):"restore"===n?eP(r):"publish"===n&&eR(a,r)},[i,eR,eP]);(0,r("i9VoI").useSubscriptionEvent)({subscriberId:"NativeCollabComponent",contentId:a,delta:"pageUpdated",contentType:i,onDataReceived:eD}),A(a,Z,ef);let{error:eM,recoveryError:ey}=(0,r("S6mif").useError)(k,ee,a,i),{internetLost:eA,disconnected:eL}=P(k,a,i),{hasExceededMaxStepFailures:eN}=D(k,a,i),{isCollabProviderConnected:eO}=(0,r("9ohnn").useConnected)(k,a),{collabEditConnectionTimedOut:ex}=y(el,eO),ew=(0,r("5MyXJ").useEditorHeartbeat)({contentId:a,contentType:i,collabEditInitialized:el,viewMode:es});(0,o.useEffect)(()=>{N&&ew.liveEditLimitReached&&ei("view")},[N,ew.liveEditLimitReached,ei]);let ek=(0,r("jv3O2").useShowConvertToLivePageFlag)({flags:f});(0,o.useEffect)(()=>{ew.subtypeMismatch&&(0,r("9wGTI").fg)("confluence_ncs_disconnect_idle_tabs_pubsub")&&(N||"live"!==ew.heartbeatSubtype||(H(!0),ek({converterWasCurrentUser:!1})),N&&null===ew.heartbeatSubtype&&(H(!0),ev(eb,v)))},[ew.heartbeatSubtype,ew.subtypeMismatch,N,ek,ev,v,eb]);let eB=(0,r("7QM6o").useSpaceId)();L({collabEditProvider:k,onPermissionChange:_});let{collabInitTimedOut:eG}=M({contentId:a,contentType:i,collabEditInitialized:el,collabRecoveryError:ey,collabEditError:eM,isEditPageDraftRestricted:"edit"===r("hNtOj").ssrPermissionsErrorHandler.getRestrictedRoute()});O({contentId:a,spaceId:eB,flags:f,collabEditProvider:k,isEditLimitExceeded:ew.collabLimitReached||ew.liveEditLimitReached,isLiveViewLimitExceeded:ew.liveViewLimitReached}),B({collabEditConnectionTimedOut:ex,collabInitTimedOut:eG});let eF=(0,o.useMemo)(()=>k?Promise.resolve(k):void 0,[k]),eV=(0,o.useRef)(null);(0,o.useEffect)(()=>{eV.current=eu??ec},[eu,ec]);let eK=(0,o.useMemo)(()=>t=>e(o).createElement(R,{title:eV.current,buttonProps:t,contentType:i,intl:b,contentId:a}),[a,b,eV,i]),eU=(0,o.useMemo)(()=>{let e;return(0,r("9wGTI").fg)("deprecate-invite-to-edit-button-in-native-collab")?{useNativePlugin:!0}:(N||s||I||(e={inviteToEditComponent:eK}),{useNativePlugin:!0,...e})},[s,eK,N,I]),ej=(0,o.useMemo)(()=>({collabEditInitialized:el,collabEditError:eM,collabEditInternetLost:eA,collabRecoveryError:ey,collabEditConnectionTimedOut:ex}),[el,eM,eA,ey,ex]),eH=(0,o.useMemo)(()=>eL,[eL]),eY=(0,o.useCallback)(()=>{I||("blogpost"===i?U():m?.setForceFetchPageId(a))},[a,I,i]),eW=(0,o.useCallback)(e=>{m?.setOptimisticDeleteId(e)},[m]),ez=r("irVI7").EDIT_PAGE_LOAD_EXPERIENCE;return N&&(ez=r("irVI7").VIEW_PAGE_EXPERIENCE),I&&(ez=r("irVI7").COMPANY_HUB_EDITOR_LOAD_EXPERIENCE),e(o).createElement(r("2wSyg").DraftSyncAndPublishContextConsumer,null,({isPublishing:t})=>e(o).createElement(e(o).Fragment,null,F(n,{contentId:a,draftShareId:u,spaceKey:E,spaceId:et.spaceId,disabled:!el||X||!!eM||eA||eL||j||eN||t||ex||eE,setForceDisabled:H,internetDisconnected:eH,forceDisabled:j,collabEditProvider:eF,collabEdit:eU,collabEditState:ej,heartbeatData:ew,isFirstParticipant:ep,isSingleUserSession:em,refetchNativeCollab:J,viewMode:N&&es,title:eu??ec,onTitleChange:ed,onPublishUpdateTitleInPageTree:eY,optimisticDeleteItemInTree:eW,contentType:i,isUnpublishedDraft:ef,version:eb,subType:eT,isOverviewPage:eI,createdDate:Z?.content?.nodes?.[0]?.history?.createdDate}),$&&e(o).createElement(r("hjygH").ExperienceStop,{name:ez,error:ey||$,attributes:{collabService:"ncs",isLivePage:N}})))},K=(0,r("7aRa9").withFlags)((0,r("ecUYt").withPageTreeStateUpdater)((0,c.withEditorFlagsContext)(t=>e(o).createElement(r("2wSyg").DraftSyncAndPublishContextProvider,null,e(o).createElement(V,t)))));t.exports.NativeCollabComponent=K}),n("hjygH",function(e,t){var n=r("3u0dr"),a=r("frIzR"),o=r("42omo");let i=(0,n.isReactCompilerActiveV1)()?function(e){let t,n,i=(0,a.c)(6),{name:s,error:l,attributes:c}=e,d=(0,o.useContext)(r("1kHsc").ExperienceTrackerContext);return i[0]!==c||i[1]!==l||i[2]!==d||i[3]!==s?(t=()=>{l?d.stopOnError({name:s,error:l,attributes:c}):d.succeed({name:s,attributes:c})},n=[d,s,c,l],i[0]=c,i[1]=l,i[2]=d,i[3]=s,i[4]=t,i[5]=n):(t=i[4],n=i[5]),(0,o.useEffect)(t,n),null}:function({name:e,error:t,attributes:n}){let a=(0,o.useContext)(r("1kHsc").ExperienceTrackerContext);return(0,o.useEffect)(()=>{t?a.stopOnError({name:e,error:t,attributes:n}):a.succeed({name:e,attributes:n})},[a,e,n,t]),null};e.exports.ExperienceStop=i}),n("ecUYt",function(t,n){var a=r("42omo"),o=r("T1bCI");t.exports.withPageTreeStateUpdater=function(t){return function(n){return e(a).createElement(o.Subscribe,{to:[r("7xVCs").PageTreeStateUpdater]},r=>e(a).createElement(t,{pageTreeStateUpdater:r,...n}))}}}),n("7xVCs",function(t,n){var a=r("a4TK8"),o=r("T1bCI");class i extends o.Container{scrollToCurrentPage(){this.setState({scrollToCurrent:!0})}clearScrollTo(){this.setState({scrollToCurrent:!1})}setHighlightPagesIds(t){e(a)(this.state.highlightPagesIds,t)||this.setState({highlightPagesIds:t})}clearHighlightedPages(){this.setHighlightPagesIds([])}setForceFetchPageId(e){this.setState({forceFetchPageId:e})}clearForceFetch(){this.setForceFetchPageId(null)}setOptimisticDeleteId(e){this.setState({optimisticDeletePageId:e})}clearOptimisticDeleteId(){this.setOptimisticDeleteId(null)}setIsEditingTitleId(e){return this.setState({editingTitle:{contentId:e}})}forceFetchWithInlineRename(e,t){this.setState({forceFetchPageId:e,editingTitle:{contentId:t,isNewContent:!0},scrollToPageId:t})}clearScrollToPageId(){this.setState({scrollToPageId:null})}constructor(...e){super(...e),this.state={highlightPagesIds:[],forceFetchPageId:null,optimisticDeletePageId:null,scrollToCurrent:!1,scrollToPageId:null,editingTitle:{contentId:null}}}}t.exports.PageTreeStateUpdater=i}),n("j8hiR",function(e,t){var r,n=((r={}).COLLAB_EDIT_PROVIDER_FETCH="collabEditProviderAnalyticsFetch",r.COLLAB_EDIT_PROVIDER_CREATED="collabEditProviderCreated",r.COLLAB_EDIT_PROVIDER_DISABLED="collabEditProviderDisabled",r.COLLAB_EDIT_PROVIDER_INIT="collabEditProviderInitialized",r.COLLAB_EDIT_PROVIDER_PRE_CONNECTED="collabEditProviderPreconnected",r.COLLAB_EDIT_PROVIDER_CONNECTED="collabEditProviderConnected",r.COLLAB_EDIT_PROVIDER_INIT_DOC="collabEditProviderInitDoc",r.COLLAB_EDIT_PROVIDER_FETCH_NCS_DRAFT="collabEditProviderFetchNCSDraft",r.COLLAB_EDIT_PROVIDER_PRELOAD_NCS_DRAFT="collabEditProviderPreloadNCSDraft",r.COLLAB_EDIT_PROVIDER_PRELOAD_NCS_DRAFT_TIMEOUT="collabEditProviderPreloadNCSDraftTimeout",r.COLLAB_PERMS_TOKEN_FETCH="collabEditProviderPermsTokenFetch",r);e.exports.COLLAB_EDIT_PROVIDER_MEASURES=n}),n("9137z",function(e,t){let n=new(0,r("kGrzq").BaseMeasures);e.exports.CollabEditProviderMeasures=n}),n("i9VoI",function(e,t){var n=r("42omo");e.exports.useSubscriptionEvent=({onDataReceived:e,skip:t=!1,contentId:a,contentType:o,delta:i,subscriberId:s})=>{let l=(0,r("6UYek").useSubscriptionsDispatchContext)(),{setContentId:c,setContentType:d,removeSubscriber:u,addSubscriber:E}=l||{};return(0,n.useEffect)(()=>{if(t||!E||!a||!o||!u)return;c?.(a),d?.(o);let r=E({delta:i,subscriberId:s,onSubscriptionData:e});return()=>{u({delta:i,subscriberId:r})}},[t,l,a,o,c,d,E,u,s,i,e]),null}}),n("6UYek",function(t,n){var a=r("42omo"),o=r("kyKWe");let i=(0,a.createContext)(void 0),s=(0,a.createContext)(void 0),l=["401","Failed to fetch","Load Failed","Network error","GraphQL error: undefined","Auth category: UNAUTHENTICATED is not allowed in service confluence_monolith_subscriptions"];t.exports.SubscriptionsContextProvider=({children:t})=>{let[n,c]=(0,a.useState)(null),[d,u]=(0,a.useState)(null),[E,p]=(0,a.useState)(null),m=e(a).useRef({}),_=(0,a.useCallback)(({subscriberId:t,onSubscriptionData:r,delta:n})=>{let a=m.current,i=`${t}-${e(o)()}`,s=a?.[n]||[];return a[n]=[...s,{id:i,onSubscriptionData:r}],i},[]),f=(0,a.useCallback)(({delta:e,subscriberId:t})=>{let r=m.current;r.hasOwnProperty(e)&&(r[e]=r[e].filter(e=>e.id!==t),0===r[e].length&&(delete r[e],0===Object.keys(r).length&&(u(null),p(null))))},[u,p]),g=(0,a.useCallback)((e,t)=>{let n=m.current;e.forEach(e=>{n.hasOwnProperty(e)&&(n?.[e]).forEach(n=>{let a=n?.onSubscriptionData?.(e,t);a instanceof Promise&&Promise.resolve(a).catch(e=>{(0,r("5ZqQS").getMonitoringClient)().submitError(e,{attribution:"page-experiences"})})})})},[]),{id:b,onSubscriptionComplete:S,extensions:T,onSubscriptionData:h}=(0,r("3vc4U").useSubscriptionValues)({contentType:E,contentId:d}),{accessStatus:I}=(0,r("bQm3c").useSessionData)(),C=I===r("d9tcB").AccessStatus.ANONYMOUS_ACCESS,{error:v}=(0,r("7hXu9").useSubscription)((0,r("eSUdr").default)`subscription SubscriptionsContextProviderSubscription($id:ID!){confluence_onContentModified(id:$id){type id accountId __typename _deltas contentStateUpdated{key value version __typename}emojiTitleUpdated{key value version __typename}coverPictureUpdated{key value version __typename}pageTitlePropertyUpdated{key value version __typename}coverPictureDeleted{key __typename}emojiTitleDeleted{key __typename}contentStateDeleted{key __typename}coverPictureWidthUpdated{coverPictureWidth __typename}pageBlogified{spaceKey spaceName blogTitle converterDisplayName __typename}embedUpdated{product isBlankStateUpdate __typename}pageMigrated{fabricEligibility __typename}contentRestrictionUpdated{contentId __typename}pageMoved{oldSpaceKey newSpaceKey oldParentId oldPosition newSpaceAlias oldSpaceAlias __typename}pageUpdated{__typename trigger confVersion}contentUpdatedWithTemplate{spaceKey subtype __typename}inlineCommentCreated{commentId inlineCommentType adfBodyContent __typename markerRef}rendererInlineCommentCreated{__typename commentId adfBodyContent inlineCommentType markerRef publishVersionNumber step{from to pos mark{attrs{annotationType __typename}__typename}__typename}}editorInlineCommentCreated{adfBodyContent commentId inlineCommentType markerRef __typename}inlineCommentUpdated{commentId markerRef __typename}inlineCommentDeleted{commentId inlineCommentType markerRef __typename}inlineCommentResolved{commentId inlineResolveProperties{isDangling resolved resolvedByDangling resolvedFriendlyDate resolvedTime resolvedUser __typename}inlineText markerRef replies __typename}inlineCommentUnresolved{commentId markerRef __typename}inlineCommentReattached{commentId __typename markerRef publishVersionNumber step{from mark{attrs{__typename annotationType}__typename}__typename}}commentCreated{__typename adfBodyContent commentId pageCommentType}commentUpdated{__typename commentId}commentDeleted{__typename commentId}commentResolved{__typename adfBodyContent commentId pageCommentType replies}commentReopened{__typename commentId}schedulePublished{publishTime eventType confVersion __typename}contentAccessRequested{contentId __typename}contentAccessDecisionMade{contentId decision __typename}}}`,{variables:{id:b,__extensions:T},onSubscriptionComplete:S,onSubscriptionData(e){h(e);let{subscriptionData:t}=e;if(!t||!t.data)return;let r=t?.data?.confluence_onContentModified?._deltas,n=t?.data?.confluence_onContentModified;r&&Array.isArray(r)&&r.length>0&&n&&g(r,n),c(t?.data?.confluence_onContentModified??null)},skip:!b||C||!(0,r("9wGTI").fg)("confluence_enable_subscriptions-context-provider"),client:(0,r("gKr8t").getAGGClient)()});(0,a.useEffect)(()=>{if(v){let e=v?.message||v?.errors?.[0]?.message||v?.graphQLErrors?.[0]?.message||v?.graphQLErrors?.[0]?.originalError?.message||v?.graphQLErrors?.[0]?.extensions?.data?.errors?.[0]?.message||v?.graphQLErrors?.[0]?.extensions?.message,t=v?.errors?.[0]?.extensions?.statusCode,n=l.some(e=>v?.message.includes(e))||!e;if(403!==t&&!n){let t=Error(`Subscription Error - :${e}`);(0,r("fJlJm").setContentErrorAttributes)(t,{objectId:d,objectType:E}),(0,r("5ZqQS").getMonitoringClient)().submitError(t,{attribution:"page-experiences"})}(0,r("7Sm4c").markErrorAsHandled)(v)}},[v,d,E]);let R=e(a).useMemo(()=>({contentModified:n,error:v}),[n,v]),P=e(a).useMemo(()=>({setContentType:p,setContentId:u,addSubscriber:_,removeSubscriber:f}),[p,u,_,f]);return(0,r("9wGTI").fg)("confluence_enable_subscriptions-context-provider")?e(a).createElement(i.Provider,{value:R},e(a).createElement(s.Provider,{value:P},t)):e(a).createElement(e(a).Fragment,null,t)},t.exports.useSubscriptionsContext=()=>(0,a.useContext)(i),t.exports.useSubscriptionsDispatchContext=()=>(0,a.useContext)(s)}),n("3vc4U",function(e,t){var n=r("42omo");e.exports.useSubscriptionValues=({contentId:e,contentType:t,replayCap:a})=>{let{activationId:o,cloudId:i}=(0,r("bQm3c").useSessionData)(),s=(0,n.useRef)(Math.floor(new Date().getTime()/1e3)),[l,c]=(0,n.useState)(0),{createAnalyticsEvent:d}=(0,r("inPa6").useAnalyticsEvents)(),u=(0,n.useCallback)(()=>{c(l+1)},[l,c]),E=(0,n.useCallback)(r=>{s.current=r?.extensions?.sequenceNumber??Math.floor(new Date().getTime()/1e3),d({type:"sendOperationalEvent",data:{action:"received",actionSubject:"subscription.event",source:"AGGSubscriptions",attributes:{contentId:e,contentType:t,request_id:r?.extensions?.agg?.request_id||"",traceId:r?.extensions?.traceId||""}}}).fire()},[d,e,t]);return{id:e&&t&&i&&o?(0,r("fSDun").getConfluenceContentAri)({siteId:i,resourceType:t,activationId:o,resourceId:e}):"",extensions:(0,n.useMemo)(()=>{let e,t=(0,r("9wGTI").fg)("confluence_frontend_comments_extend_replay_window")?48:24,n=Math.floor((Date.now()-36e5*t)/1e3);return e=void 0!==a?a:s.current<n?n:s.current,l>0?{command:{type:"replay",data:{sequenceNumber:e}}}:{}},[l,a]),onSubscriptionComplete:u,onSubscriptionData:E}}}),n("fSDun",function(e,t){let r=["database","embed","folder"];e.exports.getConfluenceContentAri=e=>{let{siteId:t,resourceType:n,activationId:a,resourceId:o}=e;return r.includes(n)?`ari:cloud:confluence:${t}:${n}/activation/${a}/${o}`:`ari:cloud:confluence:${t}:${n}/${o}`}}),n("jv3O2",function(t,n){var a=r("42omo");let o=(0,r("cgtv4").defineMessages)({flagTitle:{id:"editor-flags.convert-to-live-page-flag.flagTitle",defaultMessage:"This page was switched to a live page"},switcherFlagTitle:{id:"editor-flags.convert-to-live-page-flag.switcherFlagTitle",defaultMessage:"You’ve switched to a live page"},flagBody:{id:"editor-flags.convert-to-live-page-flag.flagBody",defaultMessage:"Updates to this page will now be instant and visible in real time."},findOutMore:{id:"editor-flags.convert-to-live-page-flag.findOutMore",defaultMessage:"Find out more"},reloadButton:{id:"editor-flags.convert-to-live-page-flag.reloadButton",defaultMessage:"Reload"}}),i=(0,r("cgtv4").defineMessages)({flagTitle:{id:"editor-flags.convert-to-live-page-flag.flagTitle.livedocs",defaultMessage:"This page was converted to a live doc"},switcherFlagTitle:{id:"editor-flags.convert-to-live-page-flag.switcherFlagTitle.livedocs",defaultMessage:"You’ve converted to a live doc"},flagBody:{id:"editor-flags.convert-to-live-page-flag.flagBody.livedocs",defaultMessage:"Updates to this doc will now be instant and visible in real time."},findOutMore:{id:"editor-flags.convert-to-live-page-flag.findOutMore.livedocs",defaultMessage:"Find out more about live docs"}}),s=(0,r("jhwJP").mergeLiveDocI18n)(o,i);t.exports.useShowConvertToLivePageFlag=({flags:t})=>{let[n]=(0,r("ep3mz").usePageSpaceKey)(),[o]=(0,r("ep3mz").usePageContentId)(),i=(0,r("8C5kA").default)(),{replace:l}=(0,r("dPJCf").useRouteActions)(),c=(0,r("de2j9").useIsEditorPage)(),d=(0,a.useCallback)(()=>{let e=r("1NBp8").VIEW_PAGE.toUrl({spaceKey:n,contentId:o});return c?l(e):window.location.reload()},[c,l,n,o]);return(0,a.useCallback)(async({converterWasCurrentUser:r})=>{let n=await t.showFlag({title:r?i.formatMessage(s.switcherFlagTitle):i.formatMessage(s.flagTitle),description:i.formatMessage(s.flagBody),type:"success",id:"convert-to-live-page-flag",close:"never",actions:[{content:e(a).createElement("div",{"data-testid":"reload-button"},i.formatMessage(s.reloadButton)),onClick:d},{content:e(a).createElement("div",{"data-testid":"find-out-more-button"},i.formatMessage(s.findOutMore)),onClick:()=>window.open("https://support.atlassian.com/confluence-cloud/docs/create-and-collaborate-in-real-time-with-live-docs/","_blank")}]});r&&setTimeout(()=>t.hideFlag(n.id),11e3)},[i,t,d])}}),n("jhwJP",function(e,t){e.exports.mergeLiveDocI18n=(e,t)=>{let n=n=>{n._data=(0,r("9wGTI").fg)("confluence_live_pages_open_beta_trait_opted_in")?{...e,...t}:e,n._initialized=!0};return new Proxy({},{get:(e,t)=>(e._initialized||n(e),e._data[t]),ownKeys:e=>(e._initialized||n(e),Reflect.ownKeys(e._data)),has:(e,t)=>(e._initialized||n(e),t in e._data),getOwnPropertyDescriptor:(e,t)=>{e._initialized||n(e);let r=Object.getOwnPropertyDescriptor(e._data,t);return r?{...r,enumerable:!0}:void 0}})}}),n("de2j9",function(e,t){var n=r("3u0dr");let a={selector:e=>e===r("1NBp8").EDIT_PAGE_V2.name||e===r("1NBp8").EDIT_BLOG_V2.name||e===r("1NBp8").EDIT_PAGE_EMBED.name||e===r("1NBp8").COMPANY_HUB_EDIT.name||e===r("1NBp8").HUB_EDIT.name||e===r("1NBp8").EDIT_PAGE_SMART_CREATE.name},o=((0,n.isReactCompilerActiveV1)(),()=>(0,r("dPJCf").useRouteName)(a));e.exports.useIsEditorPage=o}),n("aBfpe",function(e,t){var r,n=((r={}).JSON="application/json",r.X_WWW_FORM_URLENCODED="application/x-www-form-urlencoded",r);e.exports.MediaType=n}),n("9o40q",function(e,t){var n=r("42omo");function a({fetchData:e,onCompleted:t,onError:n,transformError:a,update:o,optimisticResponse:i}){let s=async e=>(0,r("bjeS8").convertToApolloError)(await a?.(e)||e);return(0,r("5JnOJ").useApolloCompatibleMutation)({fetchData:e,onCompleted:t,onError:n,update:o,optimisticResponse:i,convertToApolloError:s})}e.exports.useExperimentalMutation=function({url:e,method:t,headers:o,body:i,credentials:s,parseResult:l,parseResponseOnSuccess:c,parseResponseOnError:d,onCompleted:u,onError:E,transformError:p,maxRetries:m=0,variables:_,update:f,optimisticResponse:g}){if(!(0,r("6mKj3").expValEquals)("cc_move_legacy-schema-bridge-code-into-interops","isEnabled",!0))return(0,r("hNILR").useExperimentalMutationLegacy)({url:e,method:t,headers:o,body:i,credentials:s,parseResult:l,parseResponseOnSuccess:c,parseResponseOnError:d,onCompleted:u,onError:E,transformError:p,maxRetries:m,variables:_,update:f,optimisticResponse:g});let{fetchData:b}=(0,r("1GTIR").useFetchData)({url:e,method:t,headers:o,body:i,credentials:s,parseResult:l,parseResponseOnSuccess:c,parseResponseOnError:d,variables:_}),S=(0,n.useCallback)(async(e,t=0)=>{try{return await b(e)}catch(r){if(t<m&&r?.response?.status===409)return S(e,++t);throw r}},[m,b]);return a({fetchData:S,onCompleted:u,onError:E,transformError:p,update:f,optimisticResponse:g})},e.exports.useExperimentalMutationBase=a}),n("5JnOJ",function(e,t){var n=r("42omo");e.exports.useApolloCompatibleMutation=function({fetchData:e,onCompleted:t,onError:a,update:o,optimisticResponse:i,convertToApolloError:s}){let[l,c]=(0,n.useState)({data:void 0,loading:!1,error:void 0,called:!1});return[(0,r("26Yfd").useStableCallback)(async(n={})=>{let{variables:l,update:d,optimisticResponse:u}=n,E=d??o;c({data:void 0,loading:!0,error:void 0,called:!0});let p=u??i;if(p){let e="function"==typeof p?p(l??{}):p;E?.(null,{data:e})}try{let r=await e(l);E?.(null,{data:r});let n={data:r,loading:!1,error:void 0,called:!0};return c(n),await t?.(r),{data:n.data}}catch(n){p&&E&&E(null,{data:void 0});let e=await Promise.resolve(s(n));e.graphQLErrors?.length&&e.graphQLErrors.forEach(e=>{(0,r("7Sm4c").processError)(e)}),a?.(e);let t={data:void 0,loading:!1,error:e,called:!0};if(c(t),!a)throw e;return{data:t.data}}}),l]}}),n("hNILR",function(e,t){var n=r("42omo");e.exports.useExperimentalMutationLegacy=function({url:e,method:t,headers:a,body:o,credentials:i,parseResult:s,parseResponseOnSuccess:l,parseResponseOnError:c,onCompleted:d,onError:u,transformError:E,maxRetries:p=0,variables:m,update:_,optimisticResponse:f}){let{fetchData:g}=(0,r("1GTIR").useFetchData)({url:e,method:t,headers:a,body:o,credentials:i,parseResult:s,parseResponseOnSuccess:l,parseResponseOnError:c,variables:m}),b=(0,n.useCallback)(async(e,t=0)=>{try{return await g(e)}catch(r){if(t<p&&r?.response?.status===409)return b(e,++t);throw r}},[p,g]);return function({fetchData:e,onCompleted:t,onError:a,transformError:o,update:i,optimisticResponse:s}){let[l,c]=(0,n.useState)({data:void 0,loading:!1,error:void 0,called:!1});return[(0,r("26Yfd").useStableCallback)(async(n={})=>{let{variables:l,update:d,optimisticResponse:u}=n,E=d??i;c({data:void 0,loading:!0,error:void 0,called:!0});let p=u??s;if(p){let e="function"==typeof p?p(l??{}):p;E?.(null,{data:e})}try{let r=await e(l);E?.(null,{data:r});let n={data:r,loading:!1,error:void 0,called:!0};return c(n),await t?.(r),{data:n.data}}catch(n){p&&E&&E(null,{data:void 0});let e=await (0,r("hR9WV").handleError)({error:n,transformError:o,onError:a}),t={data:void 0,loading:!1,error:e,called:!0};if(c(t),!a)throw e;return{data:t.data}}}),l]}({fetchData:b,onCompleted:d,onError:u,transformError:E,update:_,optimisticResponse:f})}}),n("b4EKK",function(e,t){e.exports.getErrorWithResponse=function(e,t){if("object"==typeof e&&e)if("response"in e){let r=e.response;"object"==typeof r&&r&&("status"in r||(r.status=t.status),"headers"in r||(r.headers=t.headers))}else e.response=t;return e}}),n("7aRa9",function(t,n){var a=r("42omo"),o=r("T1bCI");t.exports.withFlags=function(t){var n;return(n=class extends a.Component{render(){return e(a).createElement(o.Subscribe,{to:[r("gqqjz").FlagsStateContainer]},r=>e(a).createElement(t,{...this.props,flags:r}))}}).displayName=`withFlags(${t.displayName||t.name})`,n}}),n("jacyh",function(e,t){let n=(0,r("1P1Tu").createStore)({initialState:{shouldForceRefetch:!1},actions:{forceRefetchBlogTree:()=>({setState:e,getState:t})=>{e({shouldForceRefetch:!t().shouldForceRefetch})}}}),a=(0,r("9zUhf").createHook)(n),o=(0,r("9zUhf").createActionsHook)(n);e.exports.useBlogTreeStore=a,e.exports.useBlogTreeActions=o}),n("hNtOj",function(e,t){let n=new(0,r("etu7G").SSRPermissionsErrorHandler);e.exports.ssrPermissionsErrorHandler=n}),n("etu7G",function(e,t){e.exports.SSRPermissionsErrorHandler=class{markSSRPreloadPermissionError(e,t){this.hasSSRPreloadPermissionsErrorForRoute=e,t&&(this.errorType=t?.graphQLErrors?.[0]?.extensions?.data?.errors?.[0]?.message?.key==="confluence.content.restricted.inherited"?"inherited":"view")}getRestrictedRoute(){return this.hasSSRPreloadPermissionsErrorForRoute||window.__SSR_RESTRICTED_PAGE__?.route||null}getErrorType(){return this.errorType||window.__SSR_RESTRICTED_PAGE__?.errorType||null}constructor(){this.hasSSRPreloadPermissionsErrorForRoute=void 0,this.errorType=void 0,this.hasSSRPreloadPermissionsErrorForRoute=null,this.errorType=null}}}),n("hYoU4",function(t,n){var a=r("3wgAM");let o={setCollabEditProvider:e=>({setState:t})=>{t({collabEditProvider:e})},setCollabEditInitialized:e=>({setState:t})=>{t({collabEditInitialized:e})},setHasInitialDraft:e=>({setState:t})=>{t({hasInitialDraft:e})},setIsDraftSyncPending:e=>({setState:t})=>{t({isDraftSyncPending:e})},setCollabEditConnected:e=>({setState:t})=>{t({collabEditConnected:e})},resetNativeCollabState:()=>({setState:e})=>{e({collabEditProvider:null,collabEditInitialized:!1,hasInitialDraft:!1,isDraftSyncPending:!1,collabEditConnected:!1})}},i=(0,r("1P1Tu").createStore)({initialState:{collabEditProvider:null,collabEditInitialized:!1,hasInitialDraft:!1,isDraftSyncPending:!1,collabEditConnected:!1},actions:o,name:"nativeCollabState"});(0,r("FOT9i").createContainer)(i,{onInit:()=>async({dispatch:e},{initialCollabState:t})=>{t?.collabEditProvider&&e(o.setCollabEditProvider(t?.collabEditProvider)),t?.collabEditInitialized&&e(o.setCollabEditInitialized(t?.collabEditInitialized)),t?.hasInitialDraft&&e(o.setHasInitialDraft(t?.hasInitialDraft)),t?.isDraftSyncPending&&e(o.setIsDraftSyncPending(t?.isDraftSyncPending)),t?.collabEditConnected&&e(o.setCollabEditConnected(t?.collabEditConnected))}});let s=(0,r("9zUhf").createHook)(i,{selector:t=>e(a)(t,"collabEditProvider","collabEditInitialized","hasInitialDraft")}),l=(0,r("9zUhf").createActionsHook)(i),c=(0,r("9zUhf").createHook)(i,{selector:t=>e(a)(t,"isDraftSyncPending")}),d=(0,r("9zUhf").createHook)(i,{selector:t=>e(a)(t,"collabEditConnected")});t.exports.useNativeCollabState=s,t.exports.useNativeCollabActions=l,t.exports.useNativeCollabDraftSync=c,t.exports.useNativeCollabConnected=d}),n("3wgAM",function(e,t){var n=r("2LrJx");e.exports=r("5Nw7l")(function(e,t){return null==e?{}:n(e,t)})}),n("2LrJx",function(e,t){var n=r("egNUN"),a=r("7U49l");e.exports=function(e,t){return n(e,t,function(t,r){return a(e,r)})}}),n("5Nw7l",function(e,t){var n=r("5qOzM"),a=r("iK2Oc"),o=r("gnVVm");e.exports=function(e){return o(a(e,void 0,n),e+"")}}),n("5qOzM",function(e,t){var n=r("8jC8i");e.exports=function(e){return(null==e?0:e.length)?n(e,1):[]}}),n("5M5fB",function(e,t){var n=r("42omo");let a=(e,t)=>null===e||0===e.length||null===t||e[0].sessionId===t,o=(e,t)=>{if(null===e||0===e.length||null===t)return!0;let r=e.find(e=>e.permit?.isPermittedToEdit);return!!r&&r.sessionId===t},i=(e,t)=>{let{joined:r=[],left:n=[]}=e,a=[];return(a=null===t?r:(a=[...t,...r]).filter(e=>!n.some(t=>t.sessionId===e.sessionId))).sort((e,t)=>e.sessionId.localeCompare(t.sessionId)),a};e.exports.usePresence=e=>{let t=(0,r("3jwuS").useIsCurrentPageLive)(),s=(0,n.useRef)(null),l=(0,n.useRef)(null),[c,d]=(0,n.useState)(!0),[u,E]=(0,n.useState)(!0);(0,n.useEffect)(()=>{if(!e)return;let t=e=>{s.current=e?.sid};return e.on("connected",t),()=>{e.off("connected",t)}},[e]);let p=(0,n.useCallback)(e=>{let r=i(e,l.current);l.current=r,d(t?o(r,s.current):a(r,s.current)),E(l.current.length<=1)},[t]);return(0,n.useEffect)(()=>{if(e)return e.on("presence",p),()=>{e.off("presence",p)}},[e,p]),{isFirstParticipant:c,isSingleUserSession:u}}}),n("7d2Nc",function(e,t){var n=r("42omo"),a=r("aJv6Q");let o=()=>{},i=(0,n.memo)(({metric:e,onComplete:t=o,timing:a=r("N1nBh").ActionTiming.RENDER_BODY,isCustomStart:i=!1})=>{let s=(0,n.useCallback)(()=>{e&&(r("3kTfj").browserMetrics.getPageLoadMetric().mark(`${r("3YpC9").PAGE_SEGMENT_MARK_PREFIX_START}:${e.key}`),i?e.start():e.startFromPageLoad(),t())},[e,t,i]);return(0,r("N1nBh").usePerformanceAction)(s,a),null}),s=(0,a.withTransparentErrorBoundary)({attribution:r("3IBnw").Attribution.BACKBONE})(i);e.exports.PageSegmentLoadStart=s}),n("aJv6Q",function(t,n){var a=r("42omo"),o=r("4PPzL"),i=r("hSqtY");function s(t,r){return function(n){return o=>e(a).createElement(t,r,e(a).createElement(n,o))}}t.exports.withErrorBoundary=function(e){return s(o.ErrorBoundary,e)},t.exports.withTypedErrorBoundary=s,t.exports.withTransparentErrorBoundary=function(e){return s(i.TransparentErrorBoundary,e)}}),n("N1nBh",function(e,t){var n,a=r("42omo"),o=((n={}).DEFAULT="DEFAULT",n.PAINT="PAINT",n.RENDER_BODY="RENDER_BODY",n);e.exports.ActionTiming=o,e.exports.usePerformanceAction=(e,t="DEFAULT")=>{"RENDER_BODY"===t&&e(),(0,a.useLayoutEffect)(()=>{if("PAINT"===t){let t=requestAnimationFrame(()=>{e()});return()=>{cancelAnimationFrame(t)}}},[e,t]),(0,a.useEffect)(()=>{"DEFAULT"===t&&e()},[e,t])}}),n("3YpC9",function(e,t){e.exports.PAGE_SEGMENT_MARK_PREFIX_START="segment-start",e.exports.PAGE_SEGMENT_MARK_PREFIX_END="segment-end"}),n("fVAB2",function(t,n){var a=r("42omo");let o=(0,a.forwardRef)(({as:t="div",style:n,...o},i)=>e(a).createElement(t,{...o,style:n,ref:i,className:(0,r("gMc0m").default)(["_12ji1r31 _1qu2glyw _12y31o36 _1e0c116y _80om1x0y",o.className])})),i=(0,a.forwardRef)(({as:t="div",style:n,...o},i)=>e(a).createElement(t,{...o,style:n,ref:i,className:(0,r("gMc0m").default)(["_1e0c1txw _1bah1h6o _4cvr1h6o _1bsbzwfg _4t3izwfg _syazi7uo",o.className])})),s=({showInviteToEditPlaceholder:t=!1,renderCustomPlaceholder:n})=>e(a).createElement(o,{"data-testid":"share-button-placeholder"},n?n():t?e(a).createElement(i,{"data-testid":"invite-to-edit-placeholder"},e(a).createElement(e(r("g5gZt")),{spacing:"spacious",label:""})):e(a).createElement(r("eEA8O").default,{isDisabled:!0},e(a).createElement(r("gtD4K").default,r("2FNu7").i18n.shareButtonText)));s.displayName="ShareButtonPlaceholder",t.exports.ShareButtonPlaceholder=s}),n("2FNu7",function(e,t){let n=(0,r("cgtv4").defineMessages)({shareButtonText:{id:"share.button.text",defaultMessage:"Share"}});e.exports.i18n=n}),n("15M40",function(e,t){let n=(0,r("lSOAM").createPageSegmentLoadMetric)({key:r("jX1qB").SHARE_BUTTON_SEGMENT_KEY});e.exports.SHARE_BUTTON_PAGE_SEGMENT_LOAD=n}),n("lSOAM",function(e,n){t(e.exports,"createPageLoadMetric",()=>o),t(e.exports,"createCustomMetric",()=>i),t(e.exports,"createInteractionMetric",()=>s),t(e.exports,"createPageSegmentLoadMetric",()=>l);let a=new Set([r("64KID").namedRoutes.CREATE_BLOG.name,r("64KID").namedRoutes.CREATE_BLOG_ACTION_LEGACY.name,r("64KID").namedRoutes.CREATE_PAGE.name,r("64KID").namedRoutes.CREATE_PAGE_ACTION_LEGACY.name,r("64KID").namedRoutes.EDIT_BLOG.name,r("64KID").namedRoutes.EDIT_BLOG_V2.name,r("64KID").namedRoutes.EDIT_PAGE.name,r("64KID").namedRoutes.EDIT_PAGE_V2.name,r("64KID").namedRoutes.EDIT_PAGE_EMBED.name,r("64KID").namedRoutes.VIEW_PAGE.name,r("64KID").namedRoutes.VIEW_BLOG.name,r("64KID").namedRoutes.VIEW_BLOG_DATE_LEGACY.name,r("64KID").namedRoutes.SPACE_INDEX.name,r("64KID").namedRoutes.SPACE_OVERVIEW.name,r("64KID").namedRoutes.TEMPLATE_GALLERY.name,r("64KID").namedRoutes.CONTENT_HISTORY.name,r("64KID").namedRoutes.ADVANCED_SEARCH.name,r("64KID").namedRoutes.HOME.name,r("64KID").namedRoutes.SPACE_DIRECTORY.name,r("64KID").namedRoutes.SPACE_PAGES.name]),{pageLoad:o,custom:i,interaction:s,pageSegmentLoad:l,concurrent:c}=r("kyiqo").metrics,d=c.custom;e.exports.isBMPageLoad=e=>!!e&&a.has(e.name),e.exports.hasBMPageLoadStarted=()=>null!==r("3kTfj").browserMetrics.getPageLoadMetric().getData().start,e.exports.createConcurrentCustomMetric=d}),n("kyiqo",function(e,t){let n={pageLoad:r("bs5rD").pageLoad,pageSegmentLoad:r("bs5rD").pageSegmentLoad,interaction:r("bs5rD").interaction,custom:r("bs5rD").custom,concurrent:r("bCz2F").concurrent};e.exports.metrics=n}),n("bCz2F",function(e,t){let n={},a=(e,t)=>`${t}--${e.key}`,o=e=>{if(e.include)throw Error('"include" is not supported in concurrent actions');if(e.until)throw Error('"until" is not supported in concurrent actions')},i=(e,t)=>{let r=a(e,t);r in n||(n[r]={})},s=(e,t,r)=>{let o=a(t,r);if(o in n&&n[o][String(e)])return n[o][String(e)];o in n||(n[o]={})},l=(e,t,l)=>{o(t),i(t,l);let c=s(e,t,l);if(c)return c;let d=(l===r("j4jXg").BMEventsType.INLINE_RESULT?r("bs5rD").interaction:r("bs5rD").custom)(t);return n[a(t,l)][String(e)]=d,d};e.exports.concurrent={pageSegmentLoad:e=>t=>l(t,{...e},r("j4jXg").BMEventsType.PAGE_SEGMENT_LOAD),interaction:e=>t=>l(t,{...e},r("j4jXg").BMEventsType.INLINE_RESULT),custom:e=>t=>l(t,{...e},r("j4jXg").BMEventsType.CUSTOM)}}),n("bs5rD",function(e,t){e.exports.pageLoad=e=>new(0,r("boXf9").PageLoadMetric)({...e,type:r("j4jXg").BMEventsType.PAGE_LOAD}),e.exports.pageSegmentLoad=e=>new(0,r("giQku").PageSegmentLoadMetric)({...e,type:r("j4jXg").BMEventsType.PAGE_SEGMENT_LOAD}),e.exports.interaction=e=>new(0,r("iuio5").Metric)({...e,type:r("j4jXg").BMEventsType.INLINE_RESULT}),e.exports.custom=e=>new(0,r("iuio5").Metric)({...e,type:r("j4jXg").BMEventsType.CUSTOM})}),n("iuio5",function(e,t){class n extends r("4k3LC").BaseMetric{start({startTime:e}={}){super.start({startTime:e}),this.route=r("lH7GJ").Route.getRoute()}stop(e={}){let t=super.stop(e);return t&&!this.config.virtual&&r("11Zqj").submitter.queue(this.getData()),t}}e.exports.Metric=n}),n("boXf9",function(e,t){class n extends r("3znwT").BasePageLoadMetric{startPageLoad(e={isInitial:!1}){r("69Zr8").pageLoadMetaMetric.startPageLoad({...e,cancelStarted:"startTime"in e}),this.watchUntil()}stop(e={}){let t=e.stopTime||window.performance.now(),n=r("69Zr8").pageLoadMetaMetric.getDataToMerge();if(!r("69Zr8").pageLoadMetaMetric.stop(e))return!1;if(n.isInitial&&this.config.ssr?.doneAsFmp)if(this.marks[r("3znwT").BasePageLoadMetric.FMP])r("69Zr8").pageLoadMetaMetric.markFMP(this.marks[r("3znwT").BasePageLoadMetric.FMP]);else{let e=r("h6RR2").SSRGetDoneMark.getDoneMark();e&&r("69Zr8").pageLoadMetaMetric.markFMP(e)}if(this.route=r("lH7GJ").Route.getRoute(),!this.stopPageLoad(n,{...e,stopTime:t}))return!1;let a=this.getData();return this.config.virtual||r("11Zqj").submitter.queue(a),r("7RgFv").logger.logCond(!!this.config.debug,"page-load","stop",this.getData),this.enqueueWebVitals(),!0}mark(e,t=window.performance.now()){r("69Zr8").pageLoadMetaMetric.mark(e,t)}markFMP(e){r("69Zr8").pageLoadMetaMetric.markFMP(e)}getData(){let e=r("69Zr8").pageLoadMetaMetric.getData();return{...super.getData(),marks:e.marks,explicitTimings:e.explicitTimings}}async enqueueWebVitals(){if(this.config.virtual||!this.isInitial)return!1;let e=await r("11Zqj").submitter.config.configChunk;if(!e?.[r("j4jXg").BMEventsType.WEB_VITALS].webVitals?.enabled)return!1;let t=new(0,r("e9ZCR").WebVitalsMetric)({key:this.config.key,route:this.route,startTime:this.startTime,stopTime:this.stopTime,pageVisibleState:this.pageVisibleState});return r("11Zqj").submitter.queue(t.getData()),r("7RgFv").logger.logCond(!!this.config.debug,"web-vitals",t.getData),!0}}e.exports.PageLoadMetric=n}),n("e9ZCR",function(e,t){class n extends r("4k3LC").BaseMetric{constructor({key:e,route:t,startTime:n,stopTime:a,pageVisibleState:o}){super({type:r("j4jXg").BMEventsType.WEB_VITALS,key:e}),this.route=t,this.startTime=n,this.stopTime=a,this.state=r("4k3LC").MetricState.FINISHED,this.pageVisibleState=o}}e.exports.WebVitalsMetric=n}),n("giQku",function(e,t){class n extends r("iuio5").Metric{startFromPageLoad(){let e=r("69Zr8").pageLoadMetaMetric.getData();this.start({startTime:e.start??void 0}),this.isInitial=e.isInitial,this.pageVisibleState=e.pageVisibleState}mark(e,t=window.performance.now()){e!==n.FMP&&super.mark(e,t)}markFMP(e){super.mark(n.FMP,e)}getPageSegmentLoadData(){return{isInitial:this.isInitial}}getData(){return{...super.getData(),...this.getPageSegmentLoadData()}}getDataToMerge(){return{...super.getDataToMerge(),...this.getPageSegmentLoadData()}}merge(e){super.merge(e),this.isInitial=e.isInitial}stop(e={}){let t=r("69Zr8").pageLoadMetaMetric.getData();if(t.isInitial&&this.config.ssr?.doneAsFmp&&!this.marks[n.FMP]){let e=r("h6RR2").SSRGetDoneMark.getDoneMark();e&&this.markFMP(e)}if(this.config.includePageLoadTimings!==r("j4jXg").PageSegmentPageLoadMetricsOptions.WAIT_UNTIL_PRESENT||t.state===r("4k3LC").MetricState.FINISHED)return super.stop(e);let a=performance.now();return t.state===r("4k3LC").MetricState.STARTED&&r("69Zr8").pageLoadMetaMetric.onStop(()=>{super.stop({...e,stopTime:e.stopTime||a})},()=>{this.cancel()}),!0}constructor(e){super(e),this.isInitial=!0,this.config=void 0,this.config=e}}n.FMP="fmp",e.exports.PageSegmentLoadMetric=n}),n("i3c1S",function(e,t){e.exports.getWaterfallTimings=function(e){let t,n=e.map(e=>({key:`wf/react/${e.key}`,endMark:`${r("3YpC9").PAGE_SEGMENT_MARK_PREFIX_END}:${e.key}`,startMark:`${r("3YpC9").PAGE_SEGMENT_MARK_PREFIX_START}:${e.key}`}));return(0,r("6VdZc").isInitial)()?t=Object.values(r("hZpML").WATERFALL_INITIAL_MEASURES):(t=r("hZpML").WaterfallMeasures.getMeasureKeys(r("6VdZc").browserMetricsState.pageLoadStartTimestamp-500).filter(e=>e.startsWith("wf/client")),r("hZpML").WaterfallMeasures.clearMeasures()),t.forEach(e=>{n.push({key:e,startMark:`${e}.start`,endMark:`${e}.end`})}),n}}),n("jX1qB",function(e,t){e.exports.APP_NAVIGATION_SEGMENT_KEY="app-navigation",e.exports.BLOG_TREE_SEGMENT_KEY="blog-tree",e.exports.BYLINE_SEGMENT_KEY="byline",e.exports.READ_TIME_SEGMENT_KEY="read-time",e.exports.CONTENT_ANALYTICS_VIEWERS_SEGMENT_KEY="content-analytics-viewers",e.exports.CONTENT_ANALYTICS_LINKS_TABLE_SEGMENT_KEY="content-analytics-links-table",e.exports.CONTENT_RENDERER_SEGMENT_KEY="content-renderer",e.exports.CONTENT_TITLE_SEGMENT_KEY="content-title",e.exports.FAVOURITE_BUTTON_SEGMENT_KEY="favourite-button",e.exports.FOCUSED_INLINE_COMMENT_SEGMENT_KEY="focused-inline-comment",e.exports.INLINE_COMMENTS_HIGHLIGHTS_SEGMENT_KEY="inline-comments-highlights",e.exports.FABRIC_COMMENTS_HIGHLIGHTS_SEGMENT_KEY="fabric-comments-highlights",e.exports.RENDERER_INLINE_COMMENT_RENDER_SEGMENT_KEY="render-inline-comment",e.exports.EDITOR_INLINE_COMMENT_RENDER_SEGMENT_KEY="editor-render-inline-comment",e.exports.MEDIA_SEGMENT_KEY="media",e.exports.PAGE_COMMENTS_SEGMENT_KEY="page-comments",e.exports.PAGE_REACTIONS_SEGMENT_KEY="page-reactions",e.exports.FEED_REACTIONS_SEGMENT_KEY="feed-reactions",e.exports.PAGE_TREE_SEGMENT_KEY="page-tree",e.exports.RESTRICTIONS_BUTTON_SEGMENT_KEY="restrictions-button",e.exports.GLOBAL_NAVIGATION_SEGMENT_KEY="global-navigation",e.exports.SPACE_NAVIGATION_SEGMENT_KEY="space-navigation",e.exports.SPACE_APPS_SEGMENT_KEY="space-apps",e.exports.WATCH_BUTTON_SEGMENT_KEY="watch-button",e.exports.HOME_OVERVIEW_RECENT_SEGMENT_KEY="home-overview-recent",e.exports.HOME_OVERVIEW_FEED_SEGMENT_KEY="home-overview-feed",e.exports.HOME_OVERVIEW_RIGHT_PANEL_SEGMENT_KEY="home-overview-right-panel",e.exports.HOME_OVERVIEW_SPACES_SECTION_SEGMENT_KEY="home-overview-spaces-section",e.exports.HOME_RECENTS_VIEW_SEGMENT_KEY="home-recents-view",e.exports.HOME_STARRED_VIEW_SEGMENT_KEY="home-starred-view",e.exports.HOME_DRAFTS_VIEW_SEGMENT_KEY="home-drafts-view",e.exports.END_OF_PAGE_RECOMMENDATIONS_SEGMENT_KEY="end-of-page-recommendations",e.exports.IN_EDITOR_TEMPLATES_SEGMENT_KEY="in-editor-templates",e.exports.NCS_CONNECTED_FMP_KEY="ncs-connected-fmp",e.exports.ADVANCED_SEARCH_COMPONENT_SEGMENT_KEY="advanced-search-component",e.exports.ADVANCED_SEARCH_FILTER_SECTION_SEGMENT_KEY="advanced-search-filter-section",e.exports.ADVANCED_SEARCH_RESULT_SECTION_SEGMENT_KEY="advanced-search-result-section",e.exports.DATABASE_HEADER_SEGMENT_METRIC_KEY="database-header",e.exports.SMART_LINK_EMBED_HEADER_SEGMENT_METRIC_KEY="smart-link-embed-header",e.exports.WHITEBOARD_HEADER_SEGMENT_METRIC_KEY="whiteboard-header",e.exports.OBJECT_HEADER_SEGMENT_KEY="object-header",e.exports.CONTENT_TYPES_HEADER_TITLE_SEGMENT_KEY="content-types-header-title",e.exports.WHITEBOARD_VIEW_PAGE_CONTENT_SEGMENT_KEY="whiteboard-view-page-content",e.exports.DATABASE_VIEW_PAGE_CONTENT_SEGMENT_KEY="database-view-page-content",e.exports.SHARE_BUTTON_SEGMENT_KEY="share-button",e.exports.VIEW_PAGE_LABELS_METRIC_KEY="view-page-labels",e.exports.ADMIN_ANNOUNCEMENT_BANNER_SEGMENT_KEY="admin-announcement-banner",e.exports.CONNECT_APP_WEB_FRAGMENT_SEGMENT_KEY="cp-web-fragment",e.exports.SPACE_PERMISSIONS_SEGMENT_KEY="view-space-permissions",e.exports.VIEW_PAGE_CONTAINER_SEGMENT_KEY="view-page-container",e.exports.EMBED_VIEW_PAGE_CONTENT_SEGMENT_KEY="embed-view-page-content",e.exports.EMBED_VIEW_PAGE_BLANK_CONTENT_SEGMENT_KEY="embed-view-page-blank-content",e.exports.EDITOR_SEGMENT_KEY="editor",e.exports.RECAP_MODAL_SEGMENT_KEY="recap-modal",e.exports.OBJECT_SIDEBAR_CONTROL_SEGMENT_KEY="object-sidebar-control",e.exports.COMMENTS_PANEL_OPEN_VIEW_SEGMENT_KEY="comments-panel-open-view",e.exports.COMMENTS_PANEL_UNREAD_VIEW_SEGMENT_KEY="comments-panel-unread-view",e.exports.COMMENTS_PANEL_DELETED_CONTENT_VIEW_SEGMENT_KEY="comments-panel-deleted-content-view",e.exports.COMMENTS_PANEL_RESOLVED_VIEW_SEGMENT_KEY="comments-panel-resolved-view"}),n("is6a1",function(e,t){let n=r("4mJKd")(5);e.exports=Promise.all([n("lXGg9"),n("hy3sK"),n("kWZnd"),n("92LGf"),n("6wr18"),n("gryT8"),n("fD0v8"),n("gtMen"),n("8JZKd"),n("gwFU3"),n("hdBGO"),n("1TOYq"),n("6XCf4"),n("5pvpJ"),n("hRUX7"),n("g4oYs"),n("1qlDN"),n("1yVM6"),n("awqCy"),n("hhss7"),n("Wowvf"),n("7EorR"),n("ffEVr"),n("kUbUu"),n("3bo82")]).then(()=>r("gpXS2"))}),n("l1kdf",function(e,t){let n=(0,r("eSUdr").default)`query NativeCollabQuery($contentId:ID$draftShareId:String$status:[String]){content(id:$contentId draftShareId:$draftShareId status:$status){nodes{id type status version{number ncsStepVersion by{type ...on KnownUser{accountId}}}history{createdBy{displayName}createdDate}space{id name homepageId}labels{nodes{id name}}subType}}}`;e.exports.NativeCollabQuery=n}),n("9ohnn",function(e,t){var n=r("42omo");e.exports.useConnected=(e,t)=>{let[{collabEditConnected:a},o]=(0,r("hYoU4").useNativeCollabConnected)(),i=(0,n.useContext)(r("1kHsc").ExperienceTrackerContext);return(0,n.useEffect)(()=>{if(!e)return;let n=()=>{o.setCollabEditConnected(!0),r("1sAC2").nativeCollabPermissionsTokenState.clearPermissionsTokenState(t),r("9137z").CollabEditProviderMeasures.markMeasureEnd(r("j8hiR").COLLAB_EDIT_PROVIDER_MEASURES.COLLAB_EDIT_PROVIDER_CONNECTED),r("9137z").CollabEditProviderMeasures.markMeasureStart(r("j8hiR").COLLAB_EDIT_PROVIDER_MEASURES.COLLAB_EDIT_PROVIDER_INIT_DOC),i.attachDebugPoint({name:r("irVI7").EDIT_PAGE_LOAD_EXPERIENCE,message:"NCS Connected"})};return e.on("connected",n),()=>{e.off("connected",n)}},[e,o,t,i]),{isCollabProviderConnected:a}}}),n("1sAC2",function(e,t){let r=new class{getPermissionsTokenState(e){return this.tokenState[e]}setToken(e,t=Promise.resolve(null)){this.tokenState[e]={getToken:t,isUsedForDraftFetch:!1,isUsedForWSInitialization:!1}}setIsUsedForDraftFetch(e,t){this.tokenState[e]&&(this.tokenState[e].isUsedForDraftFetch=t)}setIsUsedForWSInitialization(e,t){this.tokenState[e]&&(this.tokenState[e].isUsedForWSInitialization=t)}setTimestamp(e){this.tokenState[e]&&(this.tokenState[e].timestamp=performance.now())}clearPermissionsTokenState(e){this.tokenState[e]&&delete this.tokenState[e]}constructor(){this.tokenState={}}};e.exports.nativeCollabPermissionsTokenState=r}),n("2VZOl",function(e,t){var n=r("9HkI0");let a=(0,r("FOT9i").createContainer)(),o=(0,r("1P1Tu").createStore)({containedBy:a,initialState:{presenceId:""},actions:{},handlers:{onInit:()=>({setState:e})=>{e({presenceId:(0,n.v4)()})}}}),i=(0,r("9zUhf").createHook)(o);e.exports.NativeCollabPresenceStateContainer=a,e.exports.useNativeCollabPresenceState=i}),n("2Nwuj",function(e,t){var n=r("l998X"),a=r("42omo");let o={visitedLink:"_ect41gqc _10531ra0 _1ien1ra0 _n0fx1ra0 _1vhv17z1",defaultAppearance:"_4bfu1r31 _1hms8stv _ajmmnqa1 _syaz13af _ect41gqc _1a3b1r31 _4fpr8stv _5goinqa1 _f8pj13af _9oik1r31 _1bnxglyw _jf4cnqa1 _30l313af _1nrm1r31 _c2waglyw _1iohnqa1 _9h8h12zz",subtleAppearance:"_4bfu1r31 _1hmsglyw _ajmmnqa1 _ect41gqc _syazazsu _1a3b1r31 _4fprglyw _5goinqa1 _f8pjazsu _9oik1r31 _1bnx8stv _jf4cnqa1 _30l3azsu _1nrm1r31 _c2wa8stv _1iohnqa1 _9h8hi7uo",inverseAppearance:"_4bfu1r31 _1hms8stv _ajmmnqa1 _ect41gqc _syaz15cr _105315cr _1a3b1r31 _4fpr8stv _5goinqa1 _f8pj15cr _9oik1r31 _1bnxglyw _jf4cnqa1 _30l315cr _1nrm1r31 _c2waglyw _1iohnqa1 _9h8h15cr",iconWrapper:"_1e0c1nu9 _o5721q9c _s7n41q9y _kqswh2mm _152ttb3r"},i=(0,a.forwardRef)(({children:e,testId:t,appearance:a="default",newWindowLabel:i,target:s,className:l,style:c,...d},u)=>(0,n.jsxs)(r("auNCB").default,{...d,target:s,ref:u,xcss:(0,r("1Whri").cx)("default"===a&&o.defaultAppearance,"subtle"===a&&o.subtleAppearance,"inverse"===a&&o.inverseAppearance,"inverse"!==a&&o.visitedLink),testId:t,componentName:"Link",newWindowLabel:i,children:[e,"_blank"===s&&(0,n.jsxs)(r("gdv5Z").default,{as:"span",xcss:o.iconWrapper,testId:t&&`${t}__icon`,children:["\uFEFF",(0,r("dh538").fg)("platform-visual-refresh-icons")?(0,n.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",className:(0,r("gMc0m").default)(["_1bsbgm0b _4t3igm0b _ahbqzjw7"]),children:(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 1.82609C0 0.817938 0.817938 0 1.82609 0H3.91304V1.04348H1.82609C1.39424 1.04348 1.04348 1.39424 1.04348 1.82609V10.1739C1.04348 10.6058 1.39424 10.9565 1.82609 10.9565H10.1739C10.6058 10.9565 10.9565 10.6058 10.9565 10.1739V8.08696H12V10.1739C12 11.1821 11.1821 12 10.1739 12H1.82609C0.817938 12 0 11.1821 0 10.1739V1.82609ZM7.04348 0H12V4.95652H10.9565V1.78133L6.36893 6.36893L5.63107 5.63107L10.2187 1.04348H7.04348V0Z",fill:"currentColor"})}):(0,n.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentColor",className:(0,r("gMc0m").default)(["_1bsbgm0b _4t3igm0b _ahbqzjw7"]),children:[(0,n.jsx)("path",{d:"M17.5715 3.95926L10.7587 10.772C10.5546 10.9692 10.2811 11.0784 9.99723 11.0759C9.71338 11.0734 9.44185 10.9596 9.24113 10.7589C9.04041 10.5581 8.92655 10.2866 8.92409 10.0027C8.92162 9.7189 9.03074 9.44543 9.22794 9.24125L16.0407 2.4285H14.3237C14.0366 2.4285 13.7613 2.31444 13.5582 2.11142C13.3552 1.90839 13.2411 1.63303 13.2411 1.34591C13.2411 1.05879 13.3552 0.783424 13.5582 0.580399C13.7613 0.377373 14.0366 0.263314 14.3237 0.263314H18.4981C18.5509 0.254962 18.6043 0.250507 18.658 0.250041C18.8017 0.248792 18.9443 0.276183 19.0773 0.330617C19.2104 0.385051 19.3313 0.465437 19.4329 0.567084C19.5346 0.668732 19.6149 0.789606 19.6694 0.922652C19.7238 1.0557 19.7512 1.19825 19.75 1.342C19.7495 1.3956 19.7451 1.44896 19.7367 1.50165V5.67628C19.7367 5.9634 19.6227 6.23877 19.4196 6.44179C19.2166 6.64482 18.9412 6.75888 18.6541 6.75888C18.367 6.75888 18.0916 6.64482 17.8886 6.44179C17.6856 6.23877 17.5715 5.9634 17.5715 5.67628V3.95926Z"}),(0,n.jsx)("path",{d:"M2.41519 17.5848V2.4285H8.91076V0.263314H2.41194C1.22001 0.263314 0.25 1.23007 0.25 2.42201V17.5913C0.250574 18.1638 0.47834 18.7127 0.883283 19.1175C1.28823 19.5222 1.83724 19.7497 2.40978 19.75H17.5769C17.8608 19.7499 18.1418 19.6938 18.404 19.585C18.6662 19.4762 18.9044 19.3168 19.105 19.116C19.3055 18.9151 19.4646 18.6767 19.573 18.4143C19.6814 18.152 19.737 17.8708 19.7367 17.587V11.0893H17.5715V17.5848H2.41519Z"})]})]})]}));e.exports.default=i}),n("6i41U",function(e,t){var n=r("42omo");e.exports.default=()=>{let{routerLinkComponent:e}=(0,n.useContext)(r("8x1Q3").RouterLinkProviderContext);if(e)return e}}),n("8x1Q3",function(e,t){r("l998X");let n=(0,r("42omo").createContext)({});e.exports.RouterLinkProviderContext=n}),n("8Lx5S",function(e,t){let n=e=>e===r("d9tcB").AccessStatus.LICENSED_ADMIN_ACCESS||e===r("d9tcB").AccessStatus.LICENSED_USE_ACCESS,a=e=>e===r("d9tcB").AccessStatus.LICENSED_ADMIN_ACCESS,o=e=>e===r("d9tcB").AccessStatus.LICENSED_USE_ACCESS,i=e=>e===r("d9tcB").AccessStatus.EXTERNAL_COLLABORATOR_ACCESS;e.exports.useIsLicensed=()=>{let{accessStatus:e}=(0,r("bQm3c").useSessionData)();return n(e)},e.exports.useIsAdmin=()=>{let{accessStatus:e}=(0,r("bQm3c").useSessionData)();return a(e)},e.exports.useIsGuest=()=>{let{accessStatus:e}=(0,r("bQm3c").useSessionData)();return i(e)},e.exports.useAccessStatus=()=>{let{accessStatus:e}=(0,r("bQm3c").useSessionData)();return{isGuest:i(e),isLicensed:n(e),isAdmin:a(e),isLicensedNonAdmin:o(e)}}}),n("7PLO8",function(e,t){e.exports.getDraftShareIdFromQueryParam=()=>new URLSearchParams(window.location.search.substring(1)).get("draftShareId")||""}),n("7ZQNA",function(e,t){let n=(0,r("eSUdr").default)`query CollabDraftQuery($id:ID!$draftShareId:String=""$hydrateAdf:Boolean){collabDraft(id:$id draftShareId:$draftShareId hydrateAdf:$hydrateAdf){document version metadata{title}}}`;e.exports.CollabDraftQuery=n}),n("747ya",function(e,t){async function n(e,t){let n=await (0,r("hp2SH").getApolloClient)().query({query:r("7ZQNA").CollabDraftQuery,variables:{id:e,hydrateAdf:!0,...t?{draftShareId:t}:void 0},fetchPolicy:window.__SSR_RENDERED__?"cache-first":"network-only"}),{data:a,errors:o}=n;if(o||!a.collabDraft)return{draft:null,response:n};let{document:i,version:s,metadata:l}=a.collabDraft;return{draft:{version:s,metadata:function(e){if(!e)return e;let{__typename:t,...r}=e;return r}(l),document:JSON.parse(i||"")},response:n}}e.exports.fetchDraft=n}),n("77wHb",function(e,t){var n=r("gETEr"),a=r("bSxMj"),o=r("hWvFC"),i=r("fZxmY");e.exports=function(e,t){return function(r,s){var l=i(r)?n:a,c=t?t():{};return l(r,e,o(s,2),c)}}}),n("gETEr",function(e,t){e.exports=function(e,t,r,n){for(var a=-1,o=null==e?0:e.length;++a<o;){var i=e[a];t(n,i,r(i),e)}return n}}),n("bSxMj",function(e,t){var n=r("iawSg");e.exports=function(e,t,r,a){return n(e,function(e,n,o){t(a,e,r(e),o)}),a}}),n("8Yfbq",function(e,t){var n=r("jSnXV"),a=r("lc9ud");e.exports=function(e,t,r){var o=!0,i=!0;if("function"!=typeof e)throw TypeError("Expected a function");return a(r)&&(o="leading"in r?!!r.leading:o,i="trailing"in r?!!r.trailing:i),n(e,t,{leading:o,maxWait:t,trailing:i})}}),n("9NwnH",function(e,t){var n=r("dQl1W"),a=r("1oCLl"),o=r("iu6m9");class i{constructor(e,t,r){this.step=e,this.inverted=t,this.origin=r}}function s(e,t,n){for(let t=e.length-1;t>=0;t--)n.step(e[t].inverted);for(let e=0;e<t.length;e++)n.step(t[e]);let a=[];for(let t=0,s=e.length;t<e.length;t++){let l=e[t].step.map(n.mapping.slice(s)),c=(0,o.editorExperiment)("platform_editor_offline_editing_web",!0)?(0,r("5jGZY").mapStep)(e,n,t,l):void 0;s--,l&&!n.maybeStep(l).failed&&(n.mapping.setMirror(s,n.steps.length-1),a.push(new i(l,l.invert(n.docs[n.docs.length-1]),e[t].origin))),(0,o.editorExperiment)("platform_editor_offline_editing_web",!0)&&c&&!n.maybeStep(c).failed&&a.push(new i(c,c.invert(n.docs[n.docs.length-1]),n))}return a}class l{constructor(e,t){this.version=e,this.unconfirmed=t}}let c=new(0,r("ks2lK").PluginKey)("collab");e.exports.Rebaseable=i,e.exports.rebaseSteps=s,e.exports.collab=function(e={}){let t={version:e.version||0,clientID:null!=e.clientID&&e.clientID?e.clientID:`temp-pc-${(0,n.v4)()}`},s=e.transformUnconfirmed??(e=>e);return new(0,r("ks2lK").Plugin)({key:c,state:{init:()=>new l(t.version,[]),apply(e,t){let r=e.getMeta(c);if(r)if((0,o.editorExperiment)("platform_editor_offline_editing_web",!0)||(0,a.expValEquals)("platform_editor_enable_single_player_step_merging","isEnabled",!0))return new l(r.version,s(r.unconfirmed));else return r;return e.docChanged?new l(t.version,s(t.unconfirmed.concat(function(e){let t=[];for(let r=0;r<e.steps.length;r++)t.push(new i(e.steps[r],e.steps[r].invert(e.docs[r]),e));return t}(e)))):t}},config:t,historyPreserveItems:!0})},e.exports.getDocBeforeUnconfirmedSteps=function(e){let t=e.tr,{version:r,unconfirmed:n}=c.getState(e)??{};if(void 0===r||!n)return t.doc;for(let e=n.length-1;e>=0;e--)t.step(n[e].inverted);return t.doc},e.exports.syncFromAnotherSource=function(e,t,n,a){let o=e.tr,s=e.schema.nodeFromJSON(n),{from:d,to:u}=o.selection;o.replaceWith(0,e.doc.content.size,s);for(let e=0;e<a.length;e++)o.step(a[e]);let E=o.steps.slice(1).map((e,t)=>{let r=o.docs[t+1];return new i(e,e.invert(r),o)});return o.setSelection(r("ks2lK").TextSelection.create(o.doc,Math.min(d,o.doc.content.size),Math.min(u,o.doc.content.size))),o.setMeta("addToHistory",!1).setMeta(c,new l(t,E))},e.exports.receiveTransaction=function(e,t,n,a={}){let o=c.getState(e),i=(o?.version||0)+t.length,d=c.get(e).spec.config.clientID,u=0;for(;u<n.length&&n[u]==d;)++u;let E=o?.unconfirmed.slice(u)||[];if(!(t=u?t.slice(u):t).length)return e.tr.setMeta(c,new l(i,E));let p=E.length,m=e.tr;if(p)E=s(E,t,m);else{for(let e=0;e<t.length;e++)m.step(t[e]);E=[]}let _=new l(i,E);return a&&a.mapSelectionBackward&&e.selection instanceof r("ks2lK").TextSelection&&(m.setSelection(new(0,r("ks2lK").TextSelection)(m.doc.resolve(m.mapping.map(e.selection.anchor,-1)),m.doc.resolve(m.mapping.map(e.selection.head,-1)))),m.updated&=-2),m.setMeta("rebased",p).setMeta("rebasedData",{unconfirmedSteps:o?.unconfirmed.slice(u)||[],remoteSteps:t,stepsAfterRebase:E,versionBefore:i}).setMeta("addToHistory",!1).setMeta(c,_)},e.exports.sendableSteps=function(e){let t=c.getState(e);return t&&0!=t.unconfirmed.length?{version:t.version,steps:t.unconfirmed.map(e=>e.step),clientID:c.get(e).spec.config.clientID,get origins(){return this._origins||(this._origins=t?.unconfirmed.map(e=>e.origin))}}:null},e.exports.getCollabState=function(e){return c.getState(e)}}),n("5jGZY",function(e,t){let n=(e,t=e.length-1)=>{for(let n=t;n>=0;n--)if(!(e[n]instanceof r("jy7VG").AnalyticsStep))return n},a=e=>e instanceof r("aXG5V").ReplaceStep,o=(e,t)=>{if(a(e.step)&&a(t)&&0===e.step.slice.size&&Math.abs(e.step.to-e.step.from)===t.slice.size){let r=e.origin.steps.findIndex(t=>t===e.step);if(-1===r)return!1;let n=e.origin.docs[r];if(!n)return!1;if(n.slice(e.step.from,e.step.to).eq(t.slice))return!0}return!1},i=(e,t,n,o)=>{if(!a(t)||e&&!a(e)||!e||!(o>=0&&o<n.docs.length&&"number"==typeof t?.from))return;let i=n.docs[o].slice(t?.from,t?.to),s=function(e,t){let r=e.findDiffStart(t),n=e.findDiffEnd(t);if(null===r||null===n)return;let a=r-Math.min(n.a,n.b),o=n.b;return a>0&&(o+=a),{start:r,end:o}}(e.slice.content,i.content);if(void 0===s)return;let l=e.from+s.start,c=i.content.size-e.slice.content.size==0?s.end-s.start:0;return i.content.size-e.slice.content.size<0?new(0,r("aXG5V").ReplaceStep)(l,l+e.slice.content.size-i.content.size,r("5SAOw").Slice.empty):new(0,r("aXG5V").ReplaceStep)(l,l+c,n.docs[o].slice(t?.from+s.start,t?.from+s.end))};e.exports.mapStep=(e,t,r,a)=>{if(r<1)return;let s=n(e.map(e=>e.step),r-1);if(void 0!==s&&o(e[s],e[r].step)){let e=n(t.steps);if(void 0!==e)return i(a,t.steps[e],t,e)}}}),n("jyw2s",function(e,t){function n(e){let t=0;for(let r=0;r<e.length;r++)t=((t=(t<<5)-t+e.charCodeAt(r))&t)>>>0;return t}e.exports.getHashCode=n,e.exports.getParticipantColor=function(e){let t=n(e)%r("aFUXX").participantColors.length;return{index:t,color:r("aFUXX").participantColors[t]}}}),n("8KbKw",function(e,t){let n=e=>!!e&&"graphQLErrors"in e&&e.graphQLErrors?.some(e=>e.message.includes("Invalid content id")),a=(0,r("2XqLN").default)((e,t)=>async()=>{let a=r("1sAC2").nativeCollabPermissionsTokenState.getPermissionsTokenState(e);if(a){let{getToken:t,isUsedForDraftFetch:n,isUsedForWSInitialization:o}=a;if(n&&!o){let n=await t;if(n)return r("1sAC2").nativeCollabPermissionsTokenState.setIsUsedForWSInitialization(e,!0),n}}let o=(0,r("hp2SH").getApolloClient)();try{r("9137z").CollabEditProviderMeasures.markMeasureStart(r("j8hiR").COLLAB_EDIT_PROVIDER_MEASURES.COLLAB_PERMS_TOKEN_FETCH);let n=await o.query({query:r("3pJBd").GetCollabPermissionTokenQuery,variables:{contentId:e,...t&&{draftShareId:t}},fetchPolicy:"network-only",context:{fetchOptions:{ignoreNoNetworkError:!0}}});return r("9137z").CollabEditProviderMeasures.markMeasureEnd(r("j8hiR").COLLAB_EDIT_PROVIDER_MEASURES.COLLAB_PERMS_TOKEN_FETCH),n.data?.collabToken?.token??null}catch(e){if((0,r("7Sm4c").markErrorAsHandled)(e),n(e))throw{message:"Content not found",data:{status:404,code:"INSUFFICIENT_EDITING_PERMISSION",meta:{description:"RESOURCE_DELETED",reason:"RESOURCE_DELETED"}}};if(e?.networkError?.response?.status===503)throw{message:"Service unavailable",data:{meta:{reason:"RESOURCE_DELETED"}}};return null}});e.exports.fetchCollabPermissionToken=a}),n("3pJBd",function(e,t){let n=(0,r("eSUdr").default)`query getCollabToken($contentId:ID!$draftShareId:String){collabToken(id:$contentId draftShareId:$draftShareId){token}}`;e.exports.GetCollabPermissionTokenQuery=n}),n("4GGNn",function(e,t){async function n({url:e,method:t,headers:n,body:a,credentials:o,variables:i,parseResult:s,parseResponseOnSuccess:l,parseResponseOnError:c}){let d=await (0,r("GLgaM").fetchResponse)({url:e,method:t,body:a,headers:n,credentials:o,parseResponseOnSuccess:l,parseResponseOnError:c},i);return{data:await s(d,i)}}e.exports.experimentalMutate=n}),n("bMmYR",function(e,t){let r=e=>new Promise(t=>setTimeout(t,e));e.exports.retry=(e,{backOff:t=!0,jitter:n=!0,timeout:a=2e3,maxAttempts:o=3}={},i)=>{let s=async l=>{let c=null;l<o&&(c=a*(t?Math.pow(2,l):1)*(n?1+Math.random():1));try{return await e(l,c)}catch(e){if(null===c||i&&!await i(e))throw e;return await r(c),await s(l+1)}};return s(0)}});
//# sourceMappingURL=NativeCollabComponent.629c10a3.js.map
