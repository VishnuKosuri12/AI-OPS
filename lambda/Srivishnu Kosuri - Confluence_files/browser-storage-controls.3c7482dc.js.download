function e(e){return e&&e.__esModule?e.default:e}function t(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}var n=globalThis.parcelRequired477,r=n.register;r("eqCNB",function(t,r){var o=n("l998X"),s=n("42omo");let a=(0,n("cgtv4").defineMessages)({preferencesBtn:{id:"browser-storage-controls.consent-banner.preferences.button",defaultMessage:"Preferences"},onlyNecessaryBtn:{id:"browser-storage-controls.consent-banner.only-necessary.button",defaultMessage:"Only necessary"},acceptAllBtn:{id:"browser-storage-controls.consent-banner.accept-all.button",defaultMessage:"Accept all"},cookiesTrackingNotice:{id:"browser-storage-controls.consent-banner.cookies-tracking-notice.text.101024",defaultMessage:"Atlassian cookies and tracking notice"},useCookiesDescription:{id:"browser-storage-controls.consent-banner.cookies-description.text",defaultMessage:"Atlassian uses cookies to improve your browsing experience, perform analytics and research, and conduct advertising. Accept all cookies to indicate that you agree to our use of cookies on your device. {linkToCookiesTrackingNotice}"},successFlagTitle:{id:"browser-storage-controls.consent-banner.success-flag.title",defaultMessage:"Cookie preferences saved"},successFlagDescription:{id:"browser-storage-controls.consent-banner.success-flag.description",defaultMessage:"You can change this at any time in your Atlassian account."},successFlagDescriptionLocalOnly:{id:"browser-storage-controls.consent-banner.success-flag.description-local-only",defaultMessage:"Your preferences will only affect this site."},errorFlagTitle:{id:"browser-storage-controls.consent-banner.error-flag.title",defaultMessage:"We're unable to update the policy"},errorFlagDescription:{id:"browser-storage-controls.consent-banner.error-flag.description",defaultMessage:"Try again in a few minutes."}}),c=(0,n("ecnYn").xcss)({padding:"space.200",backgroundColor:"color.background.information",borderStyle:"solid",borderWidth:"border.width",borderColor:"color.border",overflowY:"hidden",display:"flex",flexDirection:"column",justifyContent:"center"}),i=(0,n("ecnYn").xcss)({gap:"space.200",alignItems:"flex-start",flexDirection:"column",[n("bWLcG").media.above.sm]:{gap:"space.300",flexDirection:"row",alignItems:"center"}}),l=(0,n("ecnYn").xcss)({flexDirection:"column"}),d=(0,n("ecnYn").xcss)({minWidth:"fit-content",flexDirection:"row-reverse",flexWrap:"wrap-reverse",justifyContent:"start",[n("bWLcG").media.above.sm]:{marginLeft:"auto",flexWrap:"nowrap",flexDirection:"row"}}),f=()=>{},u=e=>n("3XYs8").CONSENT_DISPLAYED_TEXT_ITEMS.reduce((t,n)=>{let r=e.formatMessage(a.cookiesTrackingNotice),o=e.formatMessage(a.useCookiesDescription,{linkToCookiesTrackingNotice:r});return t[n]=o,t},{}),p=(e,t,n)=>{let r={...t},o=e.formatMessage(a.onlyNecessaryBtn),s=e.formatMessage(a.acceptAllBtn);return Object.keys(r).forEach(e=>{let t=r[e];r[e]=`${n?o:s} \u{2014} ${t}`}),r},g=({onClickOnlyNecessary:t=f,onClickAcceptAll:r=f,onClickPreferences:g=f,onClickTrackingNoticeLink:k=f,minWidth:b=400,newMinHeight:h=74})=>{let m=(0,n("8C5kA").default)(),C=(0,s.useMemo)(()=>u(m),[m]),y=(0,s.useCallback)(()=>{t(p(m,C,!0))},[t,m,C]),x=(0,s.useCallback)(()=>{r(p(m,C))},[r,m,C]);return(0,o.jsx)(n("6f0Oj").default,{role:"dialog","aria-labelledby":"cookiesTrackingNoticeLink",xcss:c,style:{minWidth:`${b}px`,minHeight:`${h}px`},children:(0,o.jsxs)(n("dcJ7R").default,{xcss:i,children:[(0,o.jsx)(n("dcJ7R").default,{xcss:l,children:(0,o.jsx)(n("gtD4K").default,{...a.useCookiesDescription,tagName:"span",values:{linkToCookiesTrackingNotice:(0,o.jsx)(n("fpGTa").default,{id:"cookiesTrackingNoticeLink",href:"https://www.atlassian.com/legal/cookies",target:"_blank",onClick:k,children:(0,o.jsx)(n("gtD4K").default,{...a.cookiesTrackingNotice})})}})}),(0,o.jsxs)(n("dcJ7R").default,{space:"space.100",xcss:d,children:[(0,o.jsx)(n("eEA8O").default,{appearance:"subtle",onClick:g,children:(0,o.jsx)(n("gtD4K").default,{...a.preferencesBtn})}),(0,o.jsx)(n("eEA8O").default,{onClick:y,children:(0,o.jsx)(n("gtD4K").default,{...a.onlyNecessaryBtn})}),(0,o.jsx)(n("eEA8O").default,{iconBefore:(0,o.jsx)(e(n("cvXh8")),{color:"currentColor",spacing:"none",testId:"experiment-one-button-icon",label:""}),onClick:x,children:(0,o.jsx)(n("gtD4K").default,{...a.acceptAllBtn})})]})]})})},k=e=>!(0,n("dh538").fg)("platform_moonjelly_bsc_ssr_killswitch")&&(!!(e===n("ccRXO").PrefetchedPreferenceState.INTERNAL||!e||(0,n("6gmJj").initialPreferencesAreMissing)(e))||!(0,n("hvqgK").hasPrefetchedDataConsents)(e)),b=(e,t)=>{let r=(0,n("hEbxW").getCookie)(n("301rJ").ATLASSIAN_SHOW_BANNER_COOKIE_KEY),o=t&&e&&void 0===r;return(0,n("kfwMJ").isSSR)()||o?k(t):!!r&&!!Number(r)},h=({preferences:e,initialPreferences:t,isInitialRender:r,isPrefetchedPreferencesState:o,isDismissed:s})=>{if((0,n("2i8PW").getBscGlobalState)().localConsentMode){let t=!e;return(0,n("kfwMJ").isSSR)()?!t&&!s:t&&!s}let a=b(r,t);return(!o&&!e||a)&&!s};var m=({preferences:e,initialPreferences:t,isInitialRender:r,isPrefetchedPreferencesState:o})=>{let a=(0,s.useRef)(!1),[c,i]=(0,s.useState)(!1),l=(0,s.useMemo)(()=>h({preferences:e,initialPreferences:t,isInitialRender:r,isPrefetchedPreferencesState:o,isDismissed:c}),[r,t,o,e,c]);return(0,s.useEffect)(()=>{!a.current&&l&&((0,n("c5a0x").sendScreenEvent)({name:"cookieConsentBanner"}),a.current=!0)},[a,l]),{showBanner:l,setIsDismissed:e=>{e&&(0,n("gqmdp").setStrictlyNecessaryCookie)(n("301rJ").ATLASSIAN_BANNER_LAST_DISMISSED_TIME_COOKIE_KEY,Date.now().toString(),{path:"/"}),i(e)}}};let C=({onShow:e,onHide:t,initialPreferences:r,minWidth:c=400,product:i,onConsentBannerBailOut:l,analyticsEnabled:d=!0,localConsentMode:f=!1,newMinHeight:u})=>{let p=(0,s.useRef)(!0);(0,s.useEffect)(()=>{if(!p.current)return;let e=(0,n("hEbxW").getCookie)(n("301rJ").ATLASSIAN_BANNER_LAST_DISMISSED_TIME_COOKIE_KEY);if(e){let t=Date.now()-new Date(Number.parseInt(e)).getTime();(0,n("c5a0x").sendPackageOperationalEvent)({action:"bannerAppearanceAfterDismissal",attributes:{timeSinceDismissal:t,lessThanOneHour:t<36e5,lessThanOneDay:t<864e5,lessThanOneWeek:t<6048e5}}),(0,n("ajypD").deleteCookie)(n("301rJ").ATLASSIAN_BANNER_LAST_DISMISSED_TIME_COOKIE_KEY)}p.current=!1},[]),(0,s.useEffect)(()=>{(0,n("2i8PW").initializeGlobalState)({analyticsEnabled:d,product:i,localConsentMode:f})},[d,i,f]);let[k,b]=(0,s.useState)(!1),h=(0,n("8C5kA").default)(),{showFlag:C}=(0,n("dpPtd").useFlags)(),{preferences:y,isPrefetchedPreferencesState:x,isInitialRender:S}=(0,n("8h50e").default)({initialPreferences:r}),{showBanner:E,setIsDismissed:P}=m({preferences:y,isPrefetchedPreferencesState:x,initialPreferences:r,isInitialRender:S}),w=(0,s.useCallback)(()=>{b(!1)},[b]),j=(0,s.useCallback)(()=>{w(),P(!0)},[w,P]),A=(0,s.useCallback)(()=>{b(!0),(0,n("c5a0x").sendUIEvent)({action:"clicked",actionSubject:"button",actionSubjectId:"preferences",source:"cookieConsentBanner"})},[]),O=(0,s.useCallback)(()=>{f?C({...(0,n("lbSoG").successToastProps)(),id:"cookieConsentBanner",description:h.formatMessage(a.successFlagDescriptionLocalOnly),title:h.formatMessage(a.successFlagTitle)}):C({...(0,n("lbSoG").successToastProps)(),id:"cookieConsentBanner",description:h.formatMessage(a.successFlagDescription),title:h.formatMessage(a.successFlagTitle)})},[h,f,C]),D=(0,s.useCallback)(()=>{C({...(0,n("lbSoG").errorToastProps)(),id:"cookieConsentBanner",description:h.formatMessage(a.errorFlagDescription),title:h.formatMessage(a.errorFlagTitle)})},[h,C]),_=(0,s.useCallback)(async e=>{try{(0,n("c5a0x").sendUIEvent)({action:"clicked",actionSubject:"button",actionSubjectId:"onlyNecessary",source:"cookieConsentBanner"}),await (0,n("fcNX6").updatePreferences)(n("301rJ").ONLY_NECESSARY_PREFERENCES,e),(0,n("c5a0x").sendTrackEvent)({source:"cookieConsentBanner",action:"submitted",actionSubject:"cookieConsentPreferences"}),O()}catch(e){n("6ZgEd").Logger.errorWithOperationalEvent({action:"updatePreferencesError",attributes:{preferences:n("301rJ").ONLY_NECESSARY_PREFERENCES,product:i},message:`Failed to update preferences from banner. ${e.message||""}`}),D()}finally{P(!0)}},[i,D,O,P]),v=(0,s.useCallback)(async e=>{try{(0,n("c5a0x").sendUIEvent)({action:"clicked",actionSubject:"button",actionSubjectId:"acceptAll",source:"cookieConsentBanner"}),await (0,n("fcNX6").updatePreferences)(n("301rJ").ACCEPT_ALL_PREFERENCES,e),(0,n("c5a0x").sendTrackEvent)({source:"cookieConsentBanner",action:"submitted",actionSubject:"cookieConsentPreferences"}),O()}catch(e){n("6ZgEd").Logger.errorWithOperationalEvent({action:"updatePreferencesError",attributes:{preferences:n("301rJ").ACCEPT_ALL_PREFERENCES,product:i},message:`Failed to update preferences from banner. ${e.message||""}`}),D()}finally{P(!0)}},[i,D,O,P]),R=(0,s.useCallback)(()=>{(0,n("c5a0x").sendUIEvent)({action:"clicked",actionSubject:"link",actionSubjectId:"cookiesTrackingNotice",source:"cookieConsentBanner"})},[]);return((0,s.useEffect)(()=>{E&&(0,n("cbc8g").addUFOCustomData)({isCookieConsentBannerDisplayed:!0}),E?e?.():E||t?.()},[E,e,t]),(0,s.useEffect)(()=>{E||void 0===x||l?.()},[E,x,l]),E)?(0,o.jsx)(n("dpPtd").FlagsProvider,{children:(0,o.jsxs)(n("57SAZ").BSCIntlProvider,{children:[(0,o.jsx)(g,{onClickOnlyNecessary:_,onClickAcceptAll:v,onClickPreferences:A,onClickTrackingNoticeLink:R,minWidth:c,newMinHeight:u}),k&&(0,o.jsx)(n("3h5nY").PreferenceModal,{onClose:w,onSubmit:j,showSuccessFlag:O,showErrorFlag:D,shouldAddWrappers:!1})]})}):null};t.exports.ConsentBanner=e=>{if((0,n("dh538").fg)("platform_moonjelly_bsc_master_killswitch")||(0,n("dh538").fg)("platform_moonjelly_bsc_ui_killswitch")){let{onConsentBannerBailOut:t}=e;return(0,s.useEffect)(()=>{t?.()},[t]),null}return(0,o.jsx)(n("lAJUP").ErrorBoundary,{FallbackComponent:()=>(0,o.jsx)("div",{"data-testid":"consent-banner-render-error"}),onError:e=>{n("6ZgEd").Logger.errorWithOperationalEvent({action:"renderConsentBannerError",message:e.message||""})},children:(0,o.jsx)(n("dpPtd").FlagsProvider,{children:(0,o.jsx)(C,{...e})})})}}),r("3jCS7",function(e,n){Object.defineProperty(e.exports,"__esModule",{value:!0,configurable:!0}),t(e.exports,"default",()=>r);var r={"browser-storage-controls.consent-banner-modal.analytical.description.101024":"Measures usage to improve product performance.","browser-storage-controls.consent-banner-modal.analytical.description.101024-appify":"Measures usage to improve app performance.","browser-storage-controls.consent-banner-modal.analytical.option.082624":"Allow analytical cookies","browser-storage-controls.consent-banner-modal.cancel.button":"Cancel","browser-storage-controls.consent-banner-modal.confirm.button":"Confirm","browser-storage-controls.consent-banner-modal.functional.description.082624":"Provides enhanced functionality and personalization.","browser-storage-controls.consent-banner-modal.functional.option.082624":"Allow functional cookies","browser-storage-controls.consent-banner-modal.marketing.description.082624":"Used for targeted advertising.","browser-storage-controls.consent-banner-modal.marketing.option.082624":"Allow marketing cookies","browser-storage-controls.consent-banner-modal.strict.description.082624":"Atlassian tracks <bold>strictly necessary</bold> cookies that are essential for our products to function, so you can't adjust these. These cookies don't store personally identifiable information or track browsing habits.","browser-storage-controls.consent-banner-modal.strict.description.082624-appify":"Atlassian tracks <bold>strictly necessary</bold> cookies that are essential for our apps to function, so you can't adjust these. These cookies don't store personally identifiable information or track browsing habits.","browser-storage-controls.consent-banner-modal.summary.description.082624":"Because we value your privacy, you can select which cookies you allow. {link}","browser-storage-controls.consent-banner-modal.title":"Cookie preferences","browser-storage-controls.consent-banner-modal.tracking.link.082624":"Review our cookies and tracking notice","browser-storage-controls.consent-banner.accept-all.button":"Accept all","browser-storage-controls.consent-banner.cookies-description.text":"Atlassian uses cookies to improve your browsing experience, perform analytics and research, and conduct advertising. Accept all cookies to indicate that you agree to our use of cookies on your device. {linkToCookiesTrackingNotice}","browser-storage-controls.consent-banner.cookies-tracking-notice.text.101024":"Atlassian cookies and tracking notice","browser-storage-controls.consent-banner.error-flag.description":"Try again in a few minutes.","browser-storage-controls.consent-banner.error-flag.title":"We're unable to update the policy","browser-storage-controls.consent-banner.only-necessary.button":"Only necessary","browser-storage-controls.consent-banner.preferences.button":"Preferences","browser-storage-controls.consent-banner.success-flag.description":"You can change this at any time in your Atlassian account.","browser-storage-controls.consent-banner.success-flag.description-local-only":"Your preferences will only affect this site.","browser-storage-controls.consent-banner.success-flag.title":"Cookie preferences saved"}}),r("i24yA",function(e,t){e.exports=n("4mJKd")(5)("gCbq8").then(()=>n("7rXEs"))}),r("4mJKd",function(e,t){e.exports=e=>t=>import(n("8tirZ").shardUrl(n("02nRr").resolve(t),e))}),r("8tirZ",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.applyShardToDomain=a,e.exports.domainShardingKey=void 0,e.exports.getDomainShardIndex=r,e.exports.shardUrl=function(e,t){return globalThis[n]?c(e,t):e},e.exports.shardUrlUnchecked=c;let n="__ATLASPACK_ENABLE_DOMAIN_SHARDS";function r(e,t){let n=t+1,r=e.split("").reduce((e,t)=>{let r=(e<<n)-e+t.charCodeAt(0);return r&r},0);return(r%=n)<0&&(r+=n),r}let o=/-\d+$/;function s(e){if(!o.test(e))return e;let t=e.lastIndexOf("-");return e.slice(0,t)}function a(e,t){let n=e.indexOf("."),r=0===t?"":`-${t-1}`;if(-1===n)return`${s(e)}${r}`;let o=s(e.slice(0,n));return`${o}${r}${e.slice(n)}`}function c(e,t){let n=new URL(e),o=r(function(e){let t=e.lastIndexOf("/");if(-1===t||t===e.length-1)throw Error("Expected an absolute URL with a file name, unable to apply sharding.");return e.slice(t+1)}(n.pathname),t);return n.hostname=a(n.hostname,o),n.toString()}e.exports.domainShardingKey=n}),r("02nRr",function(e,n){t(e.exports,"register",()=>r,e=>r=e),t(e.exports,"resolve",()=>o,e=>o=e);var r,o,s=new Map;r=function(e,t){for(var n=0;n<t.length-1;n+=2)s.set(t[n],{baseUrl:e,path:t[n+1]})},o=function(e){var t=s.get(e);if(null==t)throw Error("Could not resolve bundle with id "+e);return new URL(t.path,t.baseUrl).toString()}}),r("cgcnm",function(e,t){e.exports=n("4mJKd")(5)("TR24h").then(()=>n("bYpqK"))}),r("28BNH",function(e,t){e.exports=n("4mJKd")(5)("NfUyB").then(()=>n("joLhc"))}),r("iAn4i",function(e,t){e.exports=n("4mJKd")(5)("4v21d").then(()=>n("4OrDw"))}),r("kVZre",function(e,t){e.exports=n("4mJKd")(5)("4D2WV").then(()=>n("fcatw"))}),r("8eqF1",function(e,t){e.exports=n("4mJKd")(5)("gSwbJ").then(()=>n("lHvaz"))}),r("lRDs7",function(e,t){e.exports=n("4mJKd")(5)("chaHI").then(()=>n("2HSAx"))}),r("eZ7ii",function(e,t){e.exports=n("4mJKd")(5)("kBpIt").then(()=>n("55jU9"))}),r("aCN6h",function(e,t){e.exports=n("4mJKd")(5)("dPeMl").then(()=>n("lvf7Q"))}),r("f2Do9",function(e,t){e.exports=n("4mJKd")(5)("4PHEa").then(()=>n("9KAfh"))}),r("9hvfP",function(e,t){e.exports=n("4mJKd")(5)("CGYMd").then(()=>n("dyppk"))}),r("jxti3",function(e,t){e.exports=n("4mJKd")(5)("fGpBg").then(()=>n("6vOy5"))}),r("e45Hi",function(e,t){e.exports=n("4mJKd")(5)("cgWNw").then(()=>n("ethPs"))}),r("60aq2",function(e,t){e.exports=n("4mJKd")(5)("aUP3I").then(()=>n("9DjFp"))}),r("42fQ1",function(e,t){e.exports=n("4mJKd")(5)("bs4gz").then(()=>n("gYBzc"))}),r("kDihk",function(e,t){e.exports=n("4mJKd")(5)("gSXrz").then(()=>n("dQrkK"))}),r("fqwMa",function(e,t){e.exports=n("4mJKd")(5)("aJd4I").then(()=>n("gZXwW"))}),r("c6PCW",function(e,t){e.exports=n("4mJKd")(5)("aJd4I").then(()=>n("ixNSY"))}),r("idlH1",function(e,t){e.exports=n("4mJKd")(5)("aJd4I").then(()=>n("5JgVu"))}),r("obQng",function(e,t){e.exports=n("4mJKd")(5)("aJd4I").then(()=>n("e7GbG"))}),r("eWZ3k",function(e,t){e.exports=n("4mJKd")(5)("gR7fm").then(()=>n("jwf4n"))}),r("lJVZH",function(e,t){e.exports=n("4mJKd")(5)("xDkFq").then(()=>n("7OZkg"))}),r("9aX21",function(e,t){e.exports=n("4mJKd")(5)("cV2OA").then(()=>n("c66Q0"))}),r("3J91m",function(e,t){e.exports=n("4mJKd")(5)("ehLR6").then(()=>n("1KMTF"))}),r("6hROW",function(e,t){e.exports=n("4mJKd")(5)("lXmbw").then(()=>n("1DcG0"))}),r("jkNuY",function(e,t){e.exports=n("4mJKd")(5)("jwfyA").then(()=>n("kmhQX"))}),r("3BLRV",function(e,t){e.exports=n("4mJKd")(5)("6zOB9").then(()=>n("A5CaT"))}),r("3h5nY",function(t,r){var o=n("l998X"),s=n("42omo");let a=(0,n("ecnYn").xcss)({paddingBlockStart:"space.200"}),c=(0,n("ecnYn").xcss)({paddingInlineStart:"space.300",marginInlineStart:"space.050"}),i={[n("ccRXO").PreferenceCategory.Analytics]:"performanceConsent",[n("ccRXO").PreferenceCategory.Functional]:"functionalConsent",[n("ccRXO").PreferenceCategory.Marketing]:"targetingConsent",[n("ccRXO").PreferenceCategory.Unknown]:null},l=({category:e,titleElement:t,titleString:r,descriptionElement:l,isChecked:d,setPreferencesData:f})=>{let u=(0,s.useCallback)(()=>{e!==n("ccRXO").PreferenceCategory.StrictlyNecessary&&f(t=>{let r=t.prefs&&!t.prefs[e],o=i[e];return o&&(0,n("c5a0x").sendUIEvent)({actionSubjectId:o,action:"clicked",actionSubject:"checkbox",source:"cookieConsentModal",attributes:{isSelected:r}}),{...t,prefs:{...t.prefs,[e]:r}}})},[e,f]);return(0,o.jsxs)(n("6f0Oj").default,{xcss:a,children:[(0,o.jsx)(n("7gpC4").default,{className:"atl-bsc-preference-modal-checkbox",isChecked:d,value:d.toString(),onChange:u,label:t,name:`${r}`}),(0,o.jsx)(n("6f0Oj").default,{xcss:c,children:(0,o.jsx)(n("5dK2X").default,{size:"UNSAFE_small",color:"color.text.subtle",children:l})})]})},d=(0,n("cgtv4").defineMessages)({title:{id:"browser-storage-controls.consent-banner-modal.title",defaultMessage:"Cookie preferences"},summaryDescription:{id:"browser-storage-controls.consent-banner-modal.summary.description.082624",defaultMessage:"Because we value your privacy, you can select which cookies you allow. {link}"},strictDescription:{id:"browser-storage-controls.consent-banner-modal.strict.description.082624",defaultMessage:"Atlassian tracks <bold>strictly necessary</bold> cookies that are essential for our products to function, so you can't adjust these. These cookies don't store personally identifiable information or track browsing habits."},confirmBtn:{id:"browser-storage-controls.consent-banner-modal.confirm.button",defaultMessage:"Confirm"},cancelBtn:{id:"browser-storage-controls.consent-banner-modal.cancel.button",defaultMessage:"Cancel"},trackingLink:{id:"browser-storage-controls.consent-banner-modal.tracking.link.082624",defaultMessage:"Review our cookies and tracking notice"},functionalOption:{id:"browser-storage-controls.consent-banner-modal.functional.option.082624",defaultMessage:"Allow functional cookies"},functionalOptionDescription:{id:"browser-storage-controls.consent-banner-modal.functional.description.082624",defaultMessage:"Provides enhanced functionality and personalization."},analyticalOption:{id:"browser-storage-controls.consent-banner-modal.analytical.option.082624",defaultMessage:"Allow analytical cookies"},analyticalOptionDescription:{id:"browser-storage-controls.consent-banner-modal.analytical.description.101024",defaultMessage:"Measures usage to improve product performance."},marketingOption:{id:"browser-storage-controls.consent-banner-modal.marketing.option.082624",defaultMessage:"Allow marketing cookies"},marketingOptionDescription:{id:"browser-storage-controls.consent-banner-modal.marketing.description.082624",defaultMessage:"Used for targeted advertising."},strictDescriptionAppify:{id:"browser-storage-controls.consent-banner-modal.strict.description.082624-appify",defaultMessage:"Atlassian tracks <bold>strictly necessary</bold> cookies that are essential for our apps to function, so you can't adjust these. These cookies don't store personally identifiable information or track browsing habits."},analyticalOptionDescriptionAppify:{id:"browser-storage-controls.consent-banner-modal.analytical.description.101024-appify",defaultMessage:"Measures usage to improve app performance."}}),f=(0,n("ecnYn").xcss)({fontWeight:"font.weight.bold"}),u=(0,n("ecnYn").xcss)({display:"flex",alignItems:"center",justifyContent:"space-between",flexDirection:"row-reverse"}),p=t=>"string"==typeof t?t:"number"==typeof t?String(t):Array.isArray(t)?t.map(p).join(""):e(s).isValidElement(t)&&t.props.children?p(t.props.children):"",g=e=>{let t=e.formatMessage(d.trackingLink),r=e.formatMessage(d.summaryDescription,{link:t}),o=p(e.formatMessage((0,n("dh538").fg)("product-terminology-refresh")?d.strictDescriptionAppify:d.strictDescription,{bold:e=>e}));return`${r}. ${o}`.replace(/&#x27;/g,"'")},k=e=>{let t=[{category:n("ccRXO").PreferenceCategory.Functional,title:d.functionalOption,description:d.functionalOptionDescription},{category:n("ccRXO").PreferenceCategory.Analytics,title:d.analyticalOption,description:(0,n("dh538").fg)("product-terminology-refresh")?d.analyticalOptionDescriptionAppify:d.analyticalOptionDescription},{category:n("ccRXO").PreferenceCategory.Marketing,title:d.marketingOption,description:d.marketingOptionDescription}],r=n("3XYs8").CONSENT_DISPLAYED_TEXT_ITEMS.reduce((t,n)=>(t[n]=g(e),t),{});return{checkboxes:t.map(({category:t,title:s,description:a})=>{let c=e.formatMessage(s),i=e.formatMessage(a);return r[t]=i,{category:t,titleElement:(0,o.jsx)(n("6f0Oj").default,{xcss:f,children:c}),descriptionElement:(0,o.jsx)(n("6f0Oj").default,{children:i}),titleString:s.defaultMessage}}),displayedTextMap:r}},b=()=>{},h=({onClose:e})=>{let{titleId:t}=(0,n("804cB").useModal)();return(0,o.jsxs)(n("6f0Oj").default,{xcss:u,padding:"space.300",children:[(0,o.jsx)(n("8TTLA").CloseButton,{onClick:e,testId:"close-modal-button"}),(0,o.jsx)(n("7hXDW").default,{as:"h1",size:"medium",id:t,children:(0,o.jsx)(n("gtD4K").default,{...d.title})})]})},m=({preferences:e,setPreferencesData:t=b,onSubmit:r=b,onClose:a=b,setIsOpen:c=b})=>{let i=(0,n("8C5kA").default)(),f=(0,s.useCallback)(()=>{c(!1),a()},[c,a]),u=(0,s.useCallback)(()=>{f(),(0,n("c5a0x").sendUIEvent)({action:"clicked",actionSubject:"button",actionSubjectId:"cancel",source:"cookieConsentModal"})},[f]),p=(0,s.useCallback)(()=>{f(),(0,n("c5a0x").sendUIEvent)({action:"clicked",actionSubject:"button",actionSubjectId:"close",source:"cookieConsentModal"})},[f]),g=(0,s.useCallback)(()=>{f(),(0,n("c5a0x").sendUIEvent)({action:"clicked",actionSubject:"area",actionSubjectId:"background",source:"cookieConsentModal"})},[f]),m=(0,s.useCallback)(()=>{(0,n("c5a0x").sendUIEvent)({action:"clicked",actionSubject:"link",actionSubjectId:"cookiesTrackingNotice",source:"cookieConsentModal"})},[]),C=(0,s.useMemo)(()=>k(i),[i]),y=(0,s.useCallback)(()=>{let{displayedTextMap:e}=C;r(e)},[r,C]);return(0,o.jsx)(n("6xdDU").default,{children:(0,o.jsx)(n("8CZUH").default,{onClose:g,children:(0,n("dh538").fg)("platform-design_system_team-form_conversion")?(0,o.jsxs)(n("fzqvY").default,{onSubmit:y,children:[(0,o.jsx)(h,{onClose:p}),(0,o.jsxs)(n("1DHa6").default,{children:[(0,o.jsxs)(n("6f0Oj").default,{children:[(0,o.jsx)(n("gtD4K").default,{...d.summaryDescription,values:{link:(0,o.jsx)(n("fpGTa").default,{href:"https://www.atlassian.com/legal/cookies#cookies-and-other-tracking-technologies",target:"_blank",onClick:m,children:(0,o.jsx)(n("gtD4K").default,{...d.trackingLink})})},tagName:"p"}),(0,o.jsx)(n("gtD4K").default,{...(0,n("dh538").fg)("product-terminology-refresh")?d.strictDescriptionAppify:d.strictDescription,values:{bold:e=>(0,o.jsx)(n("5dK2X").default,{weight:"bold",children:e})},tagName:"p"})]}),C.checkboxes.map(({category:r,titleElement:s,titleString:a,descriptionElement:c},i)=>(0,o.jsx)(n("1GzhS").default,{children:(0,o.jsx)(l,{category:r,titleElement:s,titleString:a,descriptionElement:c,isChecked:(e&&e[r])??!1,setPreferencesData:t})},i))]}),(0,o.jsxs)(n("8o1lj").default,{children:[(0,o.jsx)(n("eEA8O").default,{appearance:"subtle",onClick:u,children:(0,o.jsx)(n("gtD4K").default,{...d.cancelBtn})}),(0,o.jsx)(n("eEA8O").default,{type:"submit",appearance:"primary",onClick:y,children:(0,o.jsx)(n("gtD4K").default,{...d.confirmBtn})})]})]}):(0,o.jsx)(n("fzqvY").default,{onSubmit:y,children:({formProps:r})=>(0,o.jsxs)("form",{...r,children:[(0,o.jsx)(h,{onClose:p}),(0,o.jsxs)(n("1DHa6").default,{children:[(0,o.jsxs)(n("6f0Oj").default,{children:[(0,o.jsx)(n("gtD4K").default,{...d.summaryDescription,values:{link:(0,o.jsx)(n("fpGTa").default,{href:"https://www.atlassian.com/legal/cookies#cookies-and-other-tracking-technologies",target:"_blank",onClick:m,children:(0,o.jsx)(n("gtD4K").default,{...d.trackingLink})})},tagName:"p"}),(0,o.jsx)(n("gtD4K").default,{...(0,n("dh538").fg)("product-terminology-refresh")?d.strictDescriptionAppify:d.strictDescription,values:{bold:e=>(0,o.jsx)(n("5dK2X").default,{weight:"bold",children:e})},tagName:"p"})]}),C.checkboxes.map(({category:r,titleElement:s,titleString:a,descriptionElement:c},i)=>(0,o.jsx)(n("1GzhS").default,{children:(0,o.jsx)(l,{category:r,titleElement:s,titleString:a,descriptionElement:c,isChecked:(e&&e[r])??!1,setPreferencesData:t})},i))]}),(0,o.jsxs)(n("8o1lj").default,{children:[(0,o.jsx)(n("eEA8O").default,{appearance:"subtle",onClick:u,children:(0,o.jsx)(n("gtD4K").default,{...d.cancelBtn})}),(0,o.jsx)(n("eEA8O").default,{type:"submit",appearance:"primary",onClick:y,children:(0,o.jsx)(n("gtD4K").default,{...d.confirmBtn})})]})]})})})})},C=({onClose:e,onSubmit:t,showSuccessFlag:r,showErrorFlag:a,shouldAddWrappers:c=!0})=>{let[i,l]=(0,s.useState)(!0),d=(0,s.useRef)(!1);(0,s.useEffect)(()=>{d.current||((0,n("c5a0x").sendScreenEvent)({name:"cookieConsentModal"}),d.current=!0)},[d]);let{preferences:f,setPreferencesData:u}=(0,n("8h50e").default)({});f||u({prefs:n("301rJ").ONLY_NECESSARY_PREFERENCES,isPrefetchedPrefsInternalState:!1});let p=(0,s.useCallback)(async e=>{if(f){(0,n("c5a0x").sendUIEvent)({action:"clicked",actionSubject:"button",actionSubjectId:"confirm",source:"cookieConsentModal"});try{await (0,n("fcNX6").updatePreferences)(f,e),(0,n("c5a0x").sendTrackEvent)({source:"cookieConsentModal",action:"submitted",actionSubject:"cookieConsentPreferences"}),r?.()}catch(e){n("6ZgEd").Logger.errorWithOperationalEvent({action:"updatePreferencesError",attributes:{preferences:f},message:`Failed to update preferences from modal. ${e.message||""}`}),a?.()}l(!1),t?.()}else a?.()},[f,t,r,a]),g=(0,o.jsx)(m,{onSubmit:p,onClose:e,setIsOpen:l,preferences:f??n("301rJ").ONLY_NECESSARY_PREFERENCES,setPreferencesData:u});return i?(0,o.jsx)(o.Fragment,{children:c&&(0,n("dh538").fg)("cpals_translation_issue_in_modal")?(0,o.jsx)(n("dpPtd").FlagsProvider,{children:(0,o.jsx)(n("57SAZ").BSCIntlProvider,{children:g})}):g}):null};t.exports.PreferenceModal=e=>(0,n("dh538").fg)("platform_moonjelly_bsc_master_killswitch")||(0,n("dh538").fg)("platform_moonjelly_bsc_ui_killswitch")?null:(0,o.jsx)(C,{...e})}),r("57SAZ",function(e,t){var r=n("l998X");n("42omo"),e.exports.BSCIntlProvider=({children:e})=>(0,r.jsx)(n("keVvA").default,{defaultMessages:n("3jCS7").default,loaderFn:n("hZOZi").fetchMessagesForLocale,children:e})}),r("fcNX6",function(e,t){let r={[n("ccRXO").PreferenceCategory.Analytics]:"",[n("ccRXO").PreferenceCategory.Functional]:"",[n("ccRXO").PreferenceCategory.Marketing]:"",[n("ccRXO").PreferenceCategory.StrictlyNecessary]:"",[n("ccRXO").PreferenceCategory.Unknown]:""};async function o(e,t=r,s){if((0,n("2i8PW").getBscGlobalState)().localConsentMode){let t=(0,n("6gmJj").packUserPreferences)(e);(0,n("gqmdp").setStrictlyNecessaryCookie)(n("301rJ").LEGACY_ATLASSIAN_GDPR_COOKIE_KEY,t,{expires:365,path:"/"})}else await (0,n("5smpe").setConsentToken)(e,t,s)}e.exports.updatePreferences=o}),r("3XYs8",function(e,t){let r=[n("ccRXO").PreferenceCategory.Analytics,n("ccRXO").PreferenceCategory.Functional,n("ccRXO").PreferenceCategory.Marketing,n("ccRXO").PreferenceCategory.StrictlyNecessary,n("ccRXO").PreferenceCategory.Unknown];e.exports.CONSENT_DISPLAYED_TEXT_ITEMS=r}),r("8h50e",function(e,t){var r=n("42omo");let o=async({setPreferencesData:e,isInitialRender:t})=>{let r=await (0,n("7MEbC").getPreferences)();e({prefs:r,isPrefetchedPrefsInternalState:!!r}),t&&(t.current=!1)};e.exports.default=({initialPreferences:e})=>{let t=(0,r.useRef)(!0),s=(0,r.useRef)(e),[a,c]=(0,r.useState)((0,n("6gmJj").initializePreferencesData)(e));return(0,r.useEffect)(()=>{let{prefs:e,isPrefetchedPrefsInternalState:r}=(0,n("6gmJj").initializePreferencesData)(s.current);!r&&e&&(0,n("fcNX6").updatePreferences)(e,void 0,!0),o({setPreferencesData:c,isInitialRender:t})},[t]),{preferences:a?.prefs,isPrefetchedPreferencesState:a?.isPrefetchedPrefsInternalState,setPreferencesData:c,isInitialRender:t.current}}}),r("hZOZi",function(e,t){let r={cs:()=>n("i24yA"),da:()=>n("cgcnm"),de:()=>n("28BNH"),"en-GB":()=>n("iAn4i"),"en-ZZ":()=>n("kVZre"),en:()=>Promise.resolve(n("3jCS7")),es:()=>n("8eqF1"),fi:()=>n("lRDs7"),fr:()=>n("eZ7ii"),hu:()=>n("aCN6h"),it:()=>n("f2Do9"),ja:()=>n("9hvfP"),ko:()=>n("jxti3"),nb:()=>n("e45Hi"),nl:()=>n("60aq2"),pl:()=>n("42fQ1"),"pt-BR":()=>n("kDihk"),ru:()=>n("fqwMa"),sl:()=>n("c6PCW"),sr_RS:()=>n("idlH1"),sr_YR:()=>n("obQng"),sv:()=>n("eWZ3k"),th:()=>n("lJVZH"),tr:()=>n("9aX21"),uk:()=>n("3J91m"),vi:()=>n("6hROW"),zh_TW:()=>n("jkNuY"),zh:()=>n("3BLRV")},o=async e=>{try{return(await r[e]()).default}catch(e){}try{let t=e.split(/[-_]/)[0];return(await r[t]()).default}catch(e){}};e.exports.fetchMessagesForLocale=o}),r("5smpe",function(e,t){let r=(e,t)=>{if((0,n("dh538").fg)("platform_moonjelly_bsc_fallback_token_audit")){let r=(0,n("6gmJj").packUserPreferences)(e);t&&(0,n("hvqgK").checkIfTokenIsDefault)(r)||(t?(0,n("iU1uz").onlySetFallbackIfDifferent)(r):(0,n("iUc7J").setConsentTokenFallbackCookie)(r),(0,n("iUc7J").setConsentTokenCookie)(r),(0,n("iUc7J").setShouldShowBannerCookie)(r))}else{let r=(0,n("6gmJj").packUserPreferences)(e);t&&(0,n("hvqgK").checkIfTokenIsDefault)(r)||(t?(0,n("iU1uz").onlySetFallbackIfDifferent)(r):(0,n("iUc7J").setConsentTokenFallbackCookie)(r),(0,n("iUc7J").setConsentTokenCookie)(r),(0,n("iUc7J").setShouldShowBannerCookie)(r))}},o=(e,t)=>{let r=e instanceof n("hvqgK").StatusCodeError&&401===e.status,o=e instanceof n("hvqgK").StatusCodeError&&e.status>=500&&e.status<600,s=r?!r:!!t[n("ccRXO").ContextualConsentProperty.UserIsAuthenticated],a=(0,n("6gmJj").packUserPreferences)({...t,[n("ccRXO").ContextualConsentProperty.UserIsAuthenticated]:s,[n("ccRXO").ContextualConsentProperty.ConsentDataUnavailable]:o});if(r){n("6ZgEd").Logger.error(`User is unauthenticated. ${e.message}`),(0,n("iU1uz").onlySetFallbackIfDifferent)(a),(0,n("iUc7J").setConsentTokenCookie)(a),(0,n("iUc7J").setShouldShowBannerCookie)(a);return}n("6ZgEd").Logger.error("Token failed to save"),(0,n("iU1uz").onlySetFallbackIfDifferent)(a),(0,n("iUc7J").setShouldShowBannerCookie)(a)},s=async(e,t,s)=>{let a=(0,n("iU1uz").mergeConsentUpdates)(e,s);try{s||await (0,n("6RCHl").saveConsentPreferences)(a,t),r(a,s)}catch(e){o(e,a)}};e.exports.setConsentToken=s}),r("iU1uz",function(e,t){let r=e=>({[n("ccRXO").PreferenceCategory.StrictlyNecessary]:e[n("ccRXO").PreferenceCategory.StrictlyNecessary],[n("ccRXO").PreferenceCategory.Functional]:e[n("ccRXO").PreferenceCategory.Functional],[n("ccRXO").PreferenceCategory.Analytics]:e[n("ccRXO").PreferenceCategory.Analytics],[n("ccRXO").PreferenceCategory.Marketing]:e[n("ccRXO").PreferenceCategory.Marketing],[n("ccRXO").PreferenceCategory.Unknown]:e[n("ccRXO").PreferenceCategory.Unknown]}),o=(e,t)=>{let r=e?.[n("ccRXO").ContextualConsentProperty.UserIsAuthenticated],o=!!e?.[n("ccRXO").ContextualConsentProperty.ConsentDataUnavailable],s=!!e?.[n("ccRXO").ContextualConsentProperty.ConsentsAreDefault];return{[n("ccRXO").ContextualConsentProperty.ConsentsAreDefault]:!!t&&s,[n("ccRXO").ContextualConsentProperty.UserIsAuthenticated]:void 0===r?!o:r,[n("ccRXO").ContextualConsentProperty.ConsentDataUnavailable]:o}};e.exports.mergeConsentUpdates=(e,t)=>{let s=(0,n("hEbxW").getCookie)(n("301rJ").ATLASSIAN_CONSENT_COOKIE_KEY);if(s){let a=(0,n("6gmJj").unpackUserPreferencesCookie)(s);return a?{...n("301rJ").DEFAULT_PREFERENCES,...a,...r(e),...o(a,t)}:{...n("301rJ").DEFAULT_PREFERENCES,...r(e)}}return{...n("301rJ").DEFAULT_PREFERENCES,...r(e),...o(e,t)}},e.exports.onlySetFallbackIfDifferent=e=>{let t=(0,n("hEbxW").getCookie)(n("301rJ").ATLASSIAN_CONSENT_FALLBACK_COOKIE_KEY),r=t!==e;(!t||r)&&(0,n("iUc7J").setConsentTokenFallbackCookie)(e)}});
//# sourceMappingURL=browser-storage-controls.3c7482dc.js.map
