function e(e,t,a,o){Object.defineProperty(e,t,{get:a,set:o,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var a=globalThis,o={},r={},n=a.parcelRequired477;null==n&&((n=function(e){var t=o[e];if(void 0!==t)return t.exports;var a=r[e];if(void 0!==a){delete r[e];var n={id:e,exports:{}};return o[e]=n,a.call(n.exports,n,n.exports),n.exports}var i=Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){r[e]=t},a.parcelRequired477=n);var i=n.register;a.lb||(a.lb=new Set,a.bq=[],a.rlb=e=>{a.lb.add(e),a.pq()},a.rwr=(e,t,o)=>{a.bq.push({b:e,r:t,d:o}),a.pq()},a.pq=()=>{var e=a.bq.find(e=>e.d.every(e=>a.lb.has(e)));e&&(a.bq=a.bq.filter(t=>t.b!==e.b),e.r(),a.pq())}),i("eugUs",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=void 0;var a=r(n("42omo")),o=r(n("aSNrY"));function r(e){return e&&e.__esModule?e:{default:e}}let i=e=>a.default.createElement(o.default,Object.assign({name:"TextLengthenIcon",dangerouslySetGlyph:'<path fill="currentcolor" fill-rule="evenodd" d="M15 2.5H1V1h14zm0 4.167H1v-1.5h14zm0 4.166H1v-1.5h14zM8 15H1v-1.5h7z" clip-rule="evenodd"/>'},e));i.displayName="TextLengthenIcon",e.exports.default=i}),i("ilIeg",function(e,t){e.exports.createUnifiedAnalyticsPayload=function({action:e,interactionID:t,attributes:a,experienceName:o,isProactive:r,invokedFrom:i,traceIds:l,nudgeMetrics:s,isStreamingEnded:d}){let c={singleInstrumentationID:t??"",aiInteractionID:t??"",aiFeatureName:"Editor AI",aiExperienceName:o??"unknown",isAIFeature:1,proactiveAIGenerated:+!!r,userGeneratedAI:+!r,traceIds:l,invokedFrom:i,nudgeMetrics:s};switch((0,n("dh538").fg)("platform_editor_ai_streaming_ended_analytics_attr")&&(c={...c,isStreamingEnded:d}),e){case n("d925B").ACTION.ACTIONED:return{action:e,actionSubject:n("d925B").ACTION_SUBJECT.AI_RESULT,actionSubjectId:n("d925B").ACTION_SUBJECT_ID.EDITOR_PLUGIN_AI,eventType:n("d925B").EVENT_TYPE.TRACK,attributes:{aiResultAction:"unknown",...c,...a}};case n("d925B").ACTION.VIEWED:case n("d925B").ACTION.ERROR:return{action:e,actionSubject:n("d925B").ACTION_SUBJECT.AI_RESULT,actionSubjectId:n("d925B").ACTION_SUBJECT_ID.EDITOR_PLUGIN_AI,eventType:n("d925B").EVENT_TYPE.TRACK,attributes:{...c,...a}};case n("d925B").ACTION.INITIATED:case n("d925B").ACTION.DISMISSED:return{action:e,actionSubject:n("d925B").ACTION_SUBJECT.AI_INTERACTION,actionSubjectId:n("d925B").ACTION_SUBJECT_ID.EDITOR_PLUGIN_AI,eventType:n("d925B").EVENT_TYPE.TRACK,attributes:{...c,...a}};case n("d925B").ACTION.SUBMITTED:return{action:e,actionSubject:n("d925B").ACTION_SUBJECT.AI_FEEDBACK,actionSubjectId:n("d925B").ACTION_SUBJECT_ID.EDITOR_PLUGIN_AI,eventType:n("d925B").EVENT_TYPE.TRACK,attributes:{aiFeedbackResult:"down",...c,...a}}}}}),i("2QlXt",function(e,t){class a{static extractErrorMessage(e){return e instanceof Error?a.redactSensitiveInfo(e.message||"unknown-error"):a.redactSensitiveInfo(String(e))}}a.redactSensitiveInfo=e=>e.replace(/[^,\s]+\@[^,\s]+/g,"[REDACTED EMAIL]").replace(/[^,\s]+\.[^,\s]+/g,"[REDACTED URL]"),e.exports.ErrorUtils=a}),i("SFzFl",function(t,a){e(t.exports,"default",()=>o);var o=(0,n("cgtv4").defineMessages)({aiUniversalLongCallToAction:{id:"fabric.editor.ai.shared.aiUniversalLongCallToAction",defaultMessage:"Let Atlassian Intelligence assist your writing"},rovoUniversalLongCallToAction:{id:"fabric.editor.ai.shared.rovoUniversalLongCallToAction",defaultMessage:"Collaborate with AI"},aiUniversalShortCallToAction:{id:"fabric.editor.ai.shared.aiUniversalShortCallToAction",defaultMessage:"Write"},aiProactiveButtonLabel:{id:"fabric.editor.ai.shared.aiProactiveButtonLabel",defaultMessage:"Suggestions"},aiProactiveDescriptor:{id:"fabric.editor.ai.shared.aiProactiveDescriptor.non-final",defaultMessage:"{count, plural, =0 {Open suggested edits} =1 {New suggested edit} =2 {Two new suggested edits} =3 {Three new suggested edits} =4 {Four new suggested edits} other {More than four new suggested edits}}"},aiProactiveCloseDescriptor:{id:"fabric.editor.ai.shared.aiProactiveDescriptorClose.non-final",defaultMessage:"Close suggested edits"},aiUniversalDescriptor:{id:"fabric.editor.ai.shared.aiUniversalDescriptor",defaultMessage:"Writing assistant"},aiButtonTitle:{id:"fabric.editor.ai.shared.generateContent.aiButtonTitle",defaultMessage:"AI (Atlassian Intelligence)"},rovoButtonTitle:{id:"fabric.editor.ai.shared.generateContent.rovoButtonTitle",defaultMessage:"Ask Rovo"},betaLabel:{id:"fabric.editor.ai.shared.betaLabel",defaultMessage:"Beta"}})}),i("80JwR",function(e,a){var o,r=n("1oCLl"),i=n("l998X");n("42omo");var l=((o={})[o.ENABLE=0]="ENABLE",o[o.DISABLE=1]="DISABLE",o[o.RECORD_VIDEO=2]="RECORD_VIDEO",o[o.INSERT_VIDEO=3]="INSERT_VIDEO",o);let s=new(0,n("ks2lK").PluginKey)("loom"),d=({config:e,api:t})=>new(0,n("1S4f7").SafePlugin)({key:s,state:{init:()=>({isEnabled:!1,loomButton:null,isRecordingVideo:!1,error:void 0}),apply:(e,t)=>{switch(e.getMeta(s)?.type){case 0:let{loomButton:a}=e.getMeta(s);return{...t,isEnabled:!0,loomButton:a};case 1:let{error:o}=e.getMeta(s);return{...t,isEnabled:!1,loomButton:null,error:o};case 2:return t?.loomButton?.click(),{...t,isRecordingVideo:!0};case 3:return{...t,isRecordingVideo:!1};default:return t}}},view:a=>(e.loomProvider&&C(e.loomProvider,t,a),{})}),c=e=>({formatMessage:a})=>[{id:"loom",title:a(n("4HWgE").toolbarInsertBlockMessages.recordVideo),description:a(n("4HWgE").toolbarInsertBlockMessages.recordVideoDescription),keywords:["loom","record","video"],priority:800,isDisabledOffline:!0,icon:()=>(0,i.jsx)(t(n("2Yaht")),{label:"",color:"var(--ds-icon-subtle, #505258)",spacing:"spacious"}),action(t,a){let o=t(void 0),r=s.getState(a);if(!r?.isEnabled){let t=r?.error;return(0,n("hWRJP").logException)(Error(t),{location:"editor-plugin-loom/quick-insert-record-video"}),f({inputMethod:n("d925B").INPUT_METHOD.QUICK_INSERT,error:t,editorAnalyticsAPI:e})({tr:o})??!1}return g({inputMethod:n("d925B").INPUT_METHOD.QUICK_INSERT,editorAnalyticsAPI:e})({tr:o})??!1}}],u=({loomButton:e})=>({tr:t})=>(t.setMeta(s,{type:l.ENABLE,loomButton:e}),t),p=({error:e})=>({tr:t})=>(t.setMeta(s,{type:l.DISABLE,error:e}),t),g=({inputMethod:e,editorAnalyticsAPI:t})=>({tr:a})=>(a.setMeta(s,{type:l.RECORD_VIDEO}),t?.attachAnalyticsEvent({action:n("d925B").ACTION.RECORD_VIDEO,actionSubject:n("d925B").ACTION_SUBJECT.LOOM,attributes:{inputMethod:e},eventType:n("d925B").EVENT_TYPE.TRACK})(a),a),f=({inputMethod:e,error:t,editorAnalyticsAPI:a})=>({tr:o})=>(a?.attachAnalyticsEvent({action:n("d925B").ACTION.RECORD_VIDEO_FAILED,actionSubject:n("d925B").ACTION_SUBJECT.LOOM,attributes:{inputMethod:e,error:t},eventType:n("d925B").EVENT_TYPE.TRACK})(o),o),h=({editorAnalyticsAPI:e,video:t})=>({tr:a})=>(a.setMeta(s,{type:l.INSERT_VIDEO}),e?.attachAnalyticsEvent({action:n("d925B").ACTION.INSERT_VIDEO,actionSubject:n("d925B").ACTION_SUBJECT.LOOM,eventType:n("d925B").EVENT_TYPE.TRACK,attributes:{duration:t.duration}})(a),a),m=(e,t)=>{let a=e.selection;switch(t){case"current":return{from:a.from,to:a.from};case"start":return{from:0,to:0};case"end":return{from:e.doc.content.size,to:e.doc.content.size}}},b=(e,t,a,o)=>{if(!e)return!1;let{state:r,dispatch:i}=e,{from:l,to:s}=m(r.tr,o);return t?.hyperlink?.actions.insertLink(n("d925B").INPUT_METHOD.TYPEAHEAD,l,s,a.sharedUrl,a.title,void 0,void 0,void 0,"embed")(r,i)??!1},_=e=>{e?.core?.actions.execute(g({inputMethod:n("d925B").INPUT_METHOD.TOOLBAR,editorAnalyticsAPI:e?.analytics?.actions}))},C=async(e,t,a,o)=>{let r=await e.getClient();if("error"===r.status)return t?.core?.actions.execute(p({error:r.message})),(0,n("hWRJP").logException)(Error(r.message),{location:"editor-plugin-loom/sdk-initialisation"}),t?.analytics?.actions.fireAnalyticsEvent({action:n("d925B").ACTION.ERRORED,actionSubject:n("d925B").ACTION_SUBJECT.LOOM,eventType:n("d925B").EVENT_TYPE.OPERATIONAL,attributes:{error:r.message}}),{error:r.message};let{attachToButton:i}=r.client,l=document.createElement("button");return i({button:l,onInsert:e=>{if(!a)return;let{state:o,dispatch:r}=a,i=o.selection.from;t?.hyperlink?.actions.insertLink(n("d925B").INPUT_METHOD.TYPEAHEAD,i,i,e.sharedUrl,e.title,void 0,void 0,void 0,"embed")(o,r),t?.core?.actions.execute(h({editorAnalyticsAPI:t?.analytics?.actions,video:e}))}}),t?.core?.actions.execute(({tr:e})=>(u({loomButton:l})({tr:e}),o&&t?.quickInsert?.commands.addQuickInsertItem(c(t?.analytics?.actions))({tr:e}),e)),t?.analytics?.actions.fireAnalyticsEvent({action:n("d925B").ACTION.INITIALISED,actionSubject:n("d925B").ACTION_SUBJECT.LOOM,eventType:n("d925B").EVENT_TYPE.OPERATIONAL}),{}};var v=n("42omo");let x={name:"9bmev",styles:"min-width:24px"},k=e=>({width:e.widthState?.width}),E=t(v).forwardRef(({disabled:e,api:a,appearance:o,intl:{formatMessage:r},selected:i,onBlur:l,onFocus:s,onKeyDown:d,onMouseEnter:c,onMouseLeave:u,"aria-controls":p,"aria-expanded":g,"aria-haspopup":f,"data-ds--level":h,onClick:m,href:b,target:_,hideTooltip:C,rel:v},E)=>{let{width:I}=(0,n("eiA8Z").useSharedPluginStateWithSelector)(a,["width"],k),T=r("comment"===o?n("4HWgE").toolbarInsertBlockMessages.addLoomVideoComment:n("4HWgE").toolbarInsertBlockMessages.addLoomVideo);return(0,n("9K4OG").jsx)(n("a4eZN").default,{hideTooltip:C,ref:E,href:b,buttonId:n("8TW6I").TOOLBAR_ACTION_SUBJECT_ID.RECORD_VIDEO,disabled:e,title:T,iconBefore:(0,n("9K4OG").jsx)("span",{css:x},(0,n("9K4OG").jsx)(t(n("2Yaht")),{label:T,color:e?"var(--ds-icon-disabled, #080F214A)":"var(--ds-icon-subtle, #505258)",spacing:"spacious"})),selected:i,onBlur:l,onFocus:s,onKeyDown:d,onMouseEnter:c,onMouseLeave:u,"aria-controls":p,"aria-expanded":g,"aria-haspopup":f,"data-ds--level":h,onClick:m,target:_,rel:v},(I||0)>1076&&r(n("4HWgE").toolbarInsertBlockMessages.recordLoomShortTitle))});var I=(0,n("gmMgo").default)(E,{forwardRef:!0});let T=e=>({loomEnabled:e.loomState?.isEnabled,connectivityMode:e.connectivityState?.mode}),y=(e,a,o)=>t(v).forwardRef((t,r)=>{let{onClickBeforeInit:i,isDisabled:l=!1,href:s,...d}=t,{loomEnabled:c,connectivityMode:u}=(0,n("eiA8Z").useSharedPluginStateWithSelector)(o,["loom","connectivity"],T),p=!!c,g=(0,v.useCallback)(e=>{p?_(o):i&&i(e)},[p,i]);return(0,n("9K4OG").jsx)(I,{ref:r,hideTooltip:!!(d.onMouseEnter||d.onMouseLeave),href:p?void 0:s,disabled:e||l||(0,n("91bcx").isOfflineMode)(u),api:o,appearance:a,onClick:e=>g(e),...d})}),M=({disabled:e,api:t,appearance:a})=>{let o=(0,v.useCallback)(()=>_(t),[t]),{loomEnabled:r,connectivityMode:i}=(0,n("eiA8Z").useSharedPluginStateWithSelector)(t,["loom","connectivity"],T);return void 0===r?null:(0,n("9K4OG").jsx)(I,{disabled:e||!r||(0,n("91bcx").isOfflineMode)(i),api:t,appearance:a,onClick:o})},O=(e,t)=>({disabled:a,appearance:o})=>!1===e.shouldShowToolbarButton?null:e.renderButton?e.renderButton(y(a,o,t)):e.shouldShowToolbarButton?(0,n("9K4OG").jsx)(M,{disabled:a,api:t,appearance:o}):null;n("42omo");let w=e=>{let{loomEnabled:t}=(0,n("eiA8Z").useSharedPluginStateWithSelector)(e,["loom"],e=>({loomEnabled:e.loomState?.isEnabled}));return t},A=({api:e,renderButton:t})=>{let a=w(e),{editorViewMode:o}=(0,n("gzUv9").useEditorToolbar)();return"edit"!==o&&(0,n("dh538").fg)("platform_editor_toolbar_aifc_overflow_menu_update")?null:t?t(S(e)):void 0!==a?(0,i.jsx)(B,{api:e}):void 0},S=e=>t(v).forwardRef(({isDisabled:t=!1,onClickBeforeInit:a,href:o,target:r,rel:n},l)=>{let s=!!w(e),d=(0,v.useCallback)(t=>{s?_(e):a&&"click"===t.type&&t.target instanceof HTMLElement&&a(t)},[s,a]);return(0,i.jsx)(P,{ref:l,href:s?void 0:o,disabled:t,onClick:d,target:r,rel:n})}),B=({api:e})=>{let t=w(e),a=(0,v.useCallback)(()=>_(e),[e]);return(0,i.jsx)(P,{disabled:!t,onClick:a})},P=t(v).forwardRef(({disabled:e,onClick:a,href:o,target:r,rel:l},s)=>{let{editorAppearance:d}=(0,n("gzUv9").useEditorToolbar)(),{formatMessage:c}=(0,n("8C5kA").default)();return(0,i.jsx)(n("2GVu1").ToolbarDropdownItem,{elemBefore:(0,i.jsx)(t(n("2Yaht")),{size:"small",label:""}),isDisabled:e,href:o,target:r,rel:l,onClick:e=>a(e),children:c("comment"===d?n("4HWgE").toolbarInsertBlockMessages.addLoomVideoComment:n("4HWgE").toolbarInsertBlockMessages.addLoomVideo)})});n("42omo");let j=(0,n("dTb09").conditionalHooksFactory)(()=>(0,r.expValEquals)("platform_editor_toolbar_aifc_patch_3","isEnabled",!0),e=>{let{editorViewMode:t}=(0,n("gzUv9").useEditorToolbar)();return{editorViewMode:t}},e=>({editorViewMode:(0,n("b3YrF").useSharedPluginStateSelector)(e,"editorViewMode.mode")})),L=({children:e,api:t})=>{let{editorViewMode:a}=j(t),o="edit"===a;return o?(0,i.jsx)(n("6UWPx").ToolbarDropdownItemSection,{hasSeparator:o,children:e}):null},N=(e,t)=>[{type:n("cPCP8").LOOM_MENU_SECTION.type,key:n("cPCP8").LOOM_MENU_SECTION.key,parents:[...(0,n("dh538").fg)("platform_editor_toolbar_aifc_overflow_menu_update")?[]:[{type:n("cPCP8").OVERFLOW_MENU.type,key:n("cPCP8").OVERFLOW_MENU.key,rank:n("4Chin").OVERFLOW_MENU_RANK[n("cPCP8").LOOM_MENU_SECTION.key]}],{type:n("cPCP8").OVERFLOW_MENU_PRIMARY_TOOLBAR.type,key:n("cPCP8").OVERFLOW_MENU_PRIMARY_TOOLBAR.key,rank:n("4Chin").OVERFLOW_MENU_PRIMARY_TOOLBAR_RANK[n("cPCP8").LOOM_MENU_SECTION.key]}],component:({children:e})=>(0,r.expValEquals)("platform_editor_toolbar_aifc_patch_3","isEnabled",!0)?(0,i.jsx)(L,{api:t,children:e}):(0,i.jsx)(n("6UWPx").ToolbarDropdownItemSection,{hasSeparator:!0,children:e})},{type:n("cPCP8").LOOM_MENU_ITEM.type,key:n("cPCP8").LOOM_MENU_ITEM.key,parents:[{type:n("cPCP8").LOOM_MENU_SECTION.type,key:n("cPCP8").LOOM_MENU_SECTION.key,rank:n("4Chin").LOOM_MENU_SECTION_RANK[n("cPCP8").LOOM_MENU_ITEM.key]},...(0,n("dh538").fg)("platform_editor_toolbar_aifc_overflow_menu_update")?[{type:n("cPCP8").OVERFLOW_EXTENSIONS_MENU_SECTION.type,key:n("cPCP8").OVERFLOW_EXTENSIONS_MENU_SECTION.key,rank:n("4Chin").OVERFLOW_EXTENSIONS_MENU_SECTION_RANK[n("cPCP8").LOOM_MENU_ITEM.key]}]:[]],component:()=>(0,i.jsx)(A,{api:t,renderButton:e.renderButton})}];e.exports.loomPlugin=({config:e,api:t})=>{let a=t?.analytics?.actions,o=!!t?.toolbar&&(0,r.expValEquals)("platform_editor_toolbar_migrate_loom","isEnabled",!0),i={current:null},l=O(e,t);return o?t?.toolbar?.actions.registerComponents(N(e,t)):t?.primaryToolbar?.actions.registerComponent({name:"loom",component:l}),{name:"loom",actions:{recordVideo:g,insertLoom:(e,a)=>b(i.current,t,e,a),initLoom:({loomProvider:e})=>C(e,t,i.current,!0)},pmPlugins:()=>[{name:"loom",plugin:()=>d({config:e,api:t})},{name:"loomViewRefWorkaround",plugin:()=>new(0,n("1S4f7").SafePlugin)({view:e=>(i.current=e,{})})}],getSharedState(e){if(e)return s.getState(e)},pluginsOptions:{quickInsert:t=>e.loomProvider?c(a)(t):[]},primaryToolbarComponent:t?.primaryToolbar||o?void 0:l}}}),i("cu2RD",function(e,a){var o,r=n("l998X");n("42omo");var i=n("1oCLl"),l=n("iu6m9");let s=(e,t,a)=>{let{doc:o}=a,{backgroundColor:r}=o.type.schema.marks,n=[],i=new Set;return o.nodesBetween(e,t,e=>{if(e.isLeaf){let t=r.isInSet(e.marks);t&&!i.has(t.attrs.color)&&(n.push(t),i.add(t.attrs.color))}}),n},d=(e,t)=>{let a=[],o=new Set;return e.forEachCell((e,r)=>{let n=r+e.nodeSize;s(r,n,t).forEach(e=>{o.has(e.attrs.color)||(a.push(e),o.add(e.attrs.color))})}),a},c=(e,t)=>{let a=d(e,t);if(a.length>1)return"multiple";let o=a.at(0);if(!o)return null;let r=!1;return e.forEachCell((e,a)=>{if(r)return;let i=a+e.nodeSize;(0,n("b167b").entireSelectionContainsMark)(o,t.doc,a,i)||(r=!0)}),r?null:o.attrs.color},u=(e,t,a)=>{let o=s(e,t,a);if(o.length>1)return"multiple";let r=o.at(0);return r&&(0,n("b167b").entireSelectionContainsMark)(r,a.doc,e,t)?r.attrs.color:null},p=(e,t)=>{if(!e.$cursor)return null;let a=t.doc.type.schema.marks.backgroundColor.isInSet([...t.storedMarks?t.storedMarks:[],...e.$cursor.marks()]);return a?.attrs.color??null},g=e=>{let{selection:t}=e,a=null;return t instanceof n("7XFGZ").CellSelection?c(t,e):t instanceof n("ks2lK").TextSelection&&t.$cursor?p(t,e):u(t.from,t.to,e)},f=e=>{let{backgroundColor:t}=e.schema.marks,{empty:a,ranges:o,$cursor:r}=e.selection;return!!(!t||e.selection instanceof n("ks2lK").NodeSelection||e.selection instanceof n("adhil").GapCursorSelection||a&&!r||!1===(0,n("l6xRR").isMarkAllowedInRange)(e.doc,o,t)||(0,n("l6xRR").isMarkExcluded)(t,e.storedMarks||r&&r.marks()))},h=new(0,n("ks2lK").PluginKey)("highlight");var m=((o={})[o.CHANGE_COLOR=0]="CHANGE_COLOR",o[o.SET_PALETTE=1]="SET_PALETTE",o);let b=({api:e})=>new(0,n("1S4f7").SafePlugin)({key:h,state:{init:(e,t)=>({activeColor:null,disabled:f(t),isPaletteOpen:!1}),apply:(e,t,a,o)=>{switch(e.getMeta(h)?.type){case 0:let{color:r}=e.getMeta(h);return{...t,activeColor:r};case 1:let{isPaletteOpen:n}=e.getMeta(h);return{...t,isPaletteOpen:n};default:return{...t,activeColor:g(e),disabled:f(o)}}}}}),_=e=>({color:t,inputMethod:a})=>({tr:o})=>{let{backgroundColor:r}=o.doc.type.schema.marks;return r?(e?.attachAnalyticsEvent(C(t,a,o))(o),o.scrollIntoView(),t===n("5qdhe").REMOVE_HIGHLIGHT_COLOR?(0,n("b167b").removeMark)(r)({tr:o}):(o.setMeta(h,{type:m.CHANGE_COLOR,color:t}),(0,n("b167b").toggleMark)(r,{color:t})({tr:o})),o):null},C=(e,t,a)=>{let o=g(a)??n("5qdhe").REMOVE_HIGHLIGHT_COLOR,r=n("5qdhe").highlightColorPalette.find(({value:t})=>t===e),i=n("5qdhe").highlightColorPalette.find(({value:e})=>e===o),l=r?r.label:e,s=i?i.label:o;return{action:n("d925B").ACTION.FORMATTED,actionSubject:n("d925B").ACTION_SUBJECT.TEXT,actionSubjectId:n("d925B").ACTION_SUBJECT_ID.FORMAT_BACKGROUND_COLOR,eventType:n("d925B").EVENT_TYPE.TRACK,attributes:{newColor:l.toLowerCase(),previousColor:s?s.toLowerCase():"",inputMethod:t}}},v=e=>e.isText&&e.marks.some(e=>"backgroundColor"===e.type.name),x=({state:e,nodeStart:t})=>0===e.doc.resolve(t).parentOffset||0===t||" "===e.doc.textBetween(t-1,t),k=({state:e,nodeEnd:t})=>{let a=e.doc.resolve(t);return a.parentOffset===a.parent.content.size||t===e.doc.content.size||" "===e.doc.textBetween(t,t+1)},E=({pos:e,node:t,padLeft:a,padRight:o})=>{let r=[],i="background-color",l=`${i}-padding-left`,s=`${i}-padding-right`;return a&&r.push(l),o&&r.push(s),n("ftzrq").Decoration.inline(e,e+t.nodeSize,{class:r.join(" ")})},I=({decorationSet:e,state:t,from:a,to:o})=>{let r=e;return t.doc.nodesBetween(a,o,(e,a)=>{if(!v(e))return;let o=a+e.nodeSize,n=x({state:t,nodeStart:a}),i=k({state:t,nodeEnd:o});if(n&&i){let o=E({pos:a,node:e,padLeft:n,padRight:i});r=r.add(t.doc,[o])}}),r},T=({decorationSet:e,state:t,start:a,end:o})=>{let r=e.find(a,o),n=e.remove(r),i=Math.max(0,a-1),l=Math.min(t.doc.content.size,o+1);return I({decorationSet:n,state:t,from:i,to:l})},y=new(0,n("ks2lK").PluginKey)("highlightPaddingPluginKey"),M=()=>new(0,n("1S4f7").SafePlugin)({key:y,state:{init:(e,t)=>({decorationSet:I({decorationSet:n("ftzrq").DecorationSet.empty,state:t,from:0,to:t.doc.content.size})}),apply:(e,t,a,o)=>{if(!e.docChanged)return t;let r=t.decorationSet.map(e.mapping,e.doc);return e.mapping.maps.forEach(e=>{e.forEach((e,t,a,n)=>{r=T({decorationSet:r,state:o,start:a,end:n})})}),{decorationSet:r}}},props:{decorations:e=>y.getState(e).decorationSet}}),O=e=>({inputMethod:t})=>(a,o)=>{let r=h.getState(a)?.isPaletteOpen;return w(e)({isPaletteOpen:!r,inputMethod:t})(a,o)},w=e=>({isPaletteOpen:t,inputMethod:a})=>(o,r)=>{if(!h.getState(o)?.disabled){let n=o.tr;return n.setMeta(h,{type:m.SET_PALETTE,isPaletteOpen:t}),e.analytics?.actions.attachAnalyticsEvent(A(t,a))(n),n.setMeta("addToHistory",!1),r&&r(n),!0}return!1},A=(e,t)=>({action:e?n("d925B").ACTION.OPENED:n("d925B").ACTION.CLOSED,actionSubject:n("d925B").ACTION_SUBJECT.TOOLBAR,actionSubjectId:n("d925B").ACTION_SUBJECT_ID.FORMAT_BACKGROUND_COLOR,eventType:n("d925B").EVENT_TYPE.TRACK,attributes:{inputMethod:t}});var S=n("42omo"),B=n("cQMhV");n("42omo");let P=({disabled:e,selectedColor:a})=>(0,r.jsx)(n("gdv5Z").default,{paddingInline:"space.050",children:(0,r.jsx)(B.SteppedRainbowIconDecoration,{selectedColor:a,disabled:e,icon:(0,r.jsx)(t(n("1Zr9M")),{LEGACY_size:"small",label:""})})});n("42omo");var j=n("2dkHo");let L=e=>{let t,{popupsMountPoint:a,popupsBoundariesElement:o,popupsScrollableElement:l,isOpen:s,activeColor:d,trigger:c,onColorChange:u,isOpenedByKeyboard:p,handleClickOutside:g,handleEscapeKeydown:f}=e,h=(0,i.expValEquals)("platform_editor_add_orange_highlight_color","cohort","test");t=h?n("5qdhe").highlightColorPaletteNext:n("5qdhe").highlightColorPalette.map(e=>"Orange"===e.label?{...e,label:"Yellow",message:n("fWSjz").default.yellow}:e);let{selectedRowIndex:m,selectedColumnIndex:b}=(0,n("ahQKW").getSelectedRowAndColumnFromPalette)(t,d,h?8:void 0);return(0,r.jsx)(j.DropdownContainer,{mountTo:a,boundariesElement:o,scrollableElement:l,isOpen:s,handleClickOutside:g,handleEscapeKeydown:f,zIndex:n("aFUXX").akEditorMenuZIndex,fitWidth:h?274:242,closeOnTab:!0,arrowKeyNavigationProviderOptions:{type:n("5v8Ta").ArrowKeyNavigationType.COLOR,selectedRowIndex:m,selectedColumnIndex:b,isOpenedByKeyboard:p,isPopupPositioned:!0},trigger:c,children:(0,r.jsx)("div",{"data-testid":"highlight-color-palette",children:(0,r.jsx)(n("hxEux").default,{cols:h?8:void 0,onClick:u,selectedColor:d,paletteOptions:{palette:t,hexToPaletteColor:n("bWiTS").hexToEditorTextBackgroundPaletteColor}})})})},N=e=>{let{toolbarItemRef:t,setIsDropdownOpen:a,isDropdownOpen:o,pluginInjectionApi:r}=e,[n,i]=(0,S.useState)(!1);return{handleClick:()=>{i(!1),a(!o)},handleKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),i(!0),a(!o))},handleClickOutside:()=>{o&&(a(!1),i(!1))},handleEscapeKeydown:()=>{o&&(a(!1),i(!1),t?.current?.focus())},handleColorChange:({color:e,inputMethod:t})=>{r?.core?.actions.execute(_(r?.analytics?.actions)({color:e,inputMethod:t})),a(!1)},isOpenedByKeyboard:n}},R=(0,n("9K4OG").css)({margin:"0px var(--ds-space-negative-050, -4px)"}),D={name:"1er0evb",styles:"margin-top:var(--ds-space-negative-050, -4px)"},F=e=>({isPaletteOpen:e.highlightState?.isPaletteOpen,activeColor:e.highlightState?.activeColor,disabled:e.highlightState?.disabled}),U=(0,n("gmMgo").default)(({pluginInjectionApi:e,intl:{formatMessage:a},editorView:o})=>{let r=(0,S.useRef)(null),{activeColor:i,disabled:s,isPaletteOpen:d}=(0,n("eiA8Z").useSharedPluginStateWithSelector)(e,["highlight"],F),c=!!d,{handleClick:u,handleKeyDown:p,handleClickOutside:g,handleEscapeKeydown:f,handleColorChange:h,isOpenedByKeyboard:m}=N({toolbarItemRef:r,setIsDropdownOpen:t=>{if(!s&&o&&e){let{state:a,dispatch:r}=o;w(e)({isPaletteOpen:t,inputMethod:n("d925B").INPUT_METHOD.FLOATING_TB})(a,r)}e?.analytics?.actions.fireAnalyticsEvent({action:t?n("d925B").ACTION.OPENED:n("d925B").ACTION.CLOSED,actionSubject:n("d925B").ACTION_SUBJECT.TOOLBAR,actionSubjectId:n("d925B").ACTION_SUBJECT_ID.FORMAT_BACKGROUND_COLOR,eventType:n("d925B").EVENT_TYPE.TRACK,attributes:{inputMethod:n("d925B").INPUT_METHOD.FLOATING_TB}})},isDropdownOpen:c,pluginInjectionApi:e});if(void 0===i||void 0===s)return null;let b=a(n("e0nFU").highlightMessages.highlight),_=null===i?null:(0,n("bWiTS").hexToEditorTextBackgroundPaletteColor)(i),C=(0,l.editorExperiment)("platform_editor_controls","variant1")?(0,n("hgeg8").tooltip)(n("hgeg8").toggleHighlightPalette,b):b;return(0,n("9K4OG").jsx)(L,{isOpen:c&&!s,activeColor:i,trigger:(0,n("9K4OG").jsx)(n("a4eZN").default,{css:n("cORDs").disableBlueBorderStyles,buttonId:n("8TW6I").TOOLBAR_ACTION_SUBJECT_ID.BACKGROUND_COLOR,spacing:(0,l.editorExperiment)("platform_editor_controls","variant1")?"default":"compact",disabled:s,selected:c,"aria-label":C,"aria-keyshortcuts":(0,n("hgeg8").getAriaKeyshortcuts)(n("hgeg8").toggleHighlightPalette),"aria-expanded":c,"aria-haspopup":!0,title:C,onClick:u,onKeyDown:p,ref:r,iconBefore:(0,n("dh538").fg)("platform-visual-refresh-icons")?(0,n("9K4OG").jsx)("div",{css:n("cORDs").triggerWrapperStylesWithPadding},(0,n("9K4OG").jsx)(B.DynamicStrokeIconDecoration,{selectedColor:_,disabled:s,icon:(0,n("9K4OG").jsx)(t(n("74Ajl")),{label:"",color:"currentColor",spacing:"spacious"})}),(0,n("9K4OG").jsx)("span",{css:n("iMS6j").expandIconContainerStyle},(0,n("9K4OG").jsx)(t(n("7kzZ3")),{label:"",color:"currentColor",size:"small"}))):(0,n("9K4OG").jsx)("span",{css:D},(0,n("9K4OG").jsx)(P,{selectedColor:_,disabled:s})),iconAfter:(0,n("dh538").fg)("platform-visual-refresh-icons")?void 0:(0,n("9K4OG").jsx)("span",{css:R},(0,n("9K4OG").jsx)(t(n("7kzZ3")),{label:"",color:"currentColor",size:"small"}))},(0,l.editorExperiment)("platform_editor_controls","control")&&a(n("e0nFU").highlightMessages.highlightFloatingToolbar)),onColorChange:e=>h({color:e,inputMethod:n("d925B").INPUT_METHOD.FLOATING_TB}),isOpenedByKeyboard:m,handleClickOutside:g,handleEscapeKeydown:f})}),q=e=>({isPaletteOpen:e.highlightState?.isPaletteOpen,highlightDisabled:e.highlightState?.disabled,activeColor:e.highlightState?.activeColor}),z=(0,n("gmMgo").default)(({popupsMountPoint:e,popupsBoundariesElement:a,popupsScrollableElement:o,isToolbarReducedSpacing:r,disabled:i,pluginInjectionApi:l,intl:{formatMessage:s},editorView:d})=>{let c=(0,S.useRef)(null),{isPaletteOpen:u,highlightDisabled:p,activeColor:g}=(0,n("eiA8Z").useSharedPluginStateWithSelector)(l,["highlight"],q),f=!!u,{handleClick:h,handleKeyDown:m,handleClickOutside:b,handleEscapeKeydown:_,handleColorChange:C,isOpenedByKeyboard:v}=N({toolbarItemRef:c,setIsDropdownOpen:e=>{if(!p){let{state:t,dispatch:a}=d;w(l)({isPaletteOpen:e,inputMethod:n("d925B").INPUT_METHOD.TOOLBAR})(t,a)}},isDropdownOpen:f,pluginInjectionApi:l});if(void 0===g||void 0===p)return null;let x=s(n("e0nFU").highlightMessages.highlight),k=null===g?null:(0,n("bWiTS").hexToEditorTextBackgroundPaletteColor)(g);return(0,n("9K4OG").jsx)(n("1s5hv").default,{alignItems:"center"},(0,n("9K4OG").jsx)(L,{popupsMountPoint:e,popupsBoundariesElement:a,popupsScrollableElement:o,isOpen:f&&!p,activeColor:g,trigger:(0,n("9K4OG").jsx)(n("a4eZN").default,{css:n("cORDs").disableBlueBorderStyles,buttonId:n("8TW6I").TOOLBAR_ACTION_SUBJECT_ID.BACKGROUND_COLOR,spacing:r?"none":"default",disabled:i||p,selected:f,"aria-label":(0,n("hgeg8").tooltip)(n("hgeg8").toggleHighlightPalette,x),"aria-keyshortcuts":(0,n("hgeg8").getAriaKeyshortcuts)(n("hgeg8").toggleHighlightPalette),"aria-expanded":f,"aria-haspopup":!0,title:(0,n("hgeg8").tooltip)(n("hgeg8").toggleHighlightPalette,x),onClick:h,onKeyDown:m,ref:c,iconBefore:(0,n("dh538").fg)("platform-visual-refresh-icons")?(0,n("9K4OG").jsx)("div",{css:n("cORDs").triggerWrapperStylesWithPadding},(0,n("9K4OG").jsx)(B.DynamicStrokeIconDecoration,{selectedColor:k,disabled:p,icon:(0,n("9K4OG").jsx)(t(n("74Ajl")),{label:"",color:"currentColor",spacing:"spacious"})}),(0,n("9K4OG").jsx)("span",{css:n("iMS6j").expandIconContainerStyle},(0,n("9K4OG").jsx)(t(n("7kzZ3")),{label:"",color:"currentColor",size:"small"}))):(0,n("9K4OG").jsx)(n("1s5hv").default,null,(0,n("9K4OG").jsx)(P,{selectedColor:k,disabled:p}),(0,n("9K4OG").jsx)("span",{css:n("iMS6j").expandIconWrapperStyle},(0,n("9K4OG").jsx)(t(n("7kzZ3")),{label:"",size:"small"})))}),onColorChange:e=>C({color:e,inputMethod:n("d925B").INPUT_METHOD.TOOLBAR}),isOpenedByKeyboard:v,handleClickOutside:b,handleEscapeKeydown:_}))});n("42omo");let K={container:"_zulp12x7 _19pkpxbi",removeHighlightButton:"_2rko12b0 _195gv77o _189ee4h9 _1dqonqa1 _1h6d1l7x",icon:"_1e0c1o8l _18u01n1a"},H=({label:e,isSelected:a})=>{let o="var(--ds-icon, #292A2E)";return a?(0,r.jsx)(t(n("cvXh8")),{color:o,LEGACY_primaryColor:o,label:e}):(0,r.jsx)(n("gdv5Z").default,{as:"span",xcss:K.icon,children:(0,r.jsx)(t(n("5gydP")),{label:e,color:o,shouldRecommendSmallIcon:!0,spacing:"spacious",size:"small"})})};function V({api:e,parents:t}){let{formatMessage:a}=(0,n("8C5kA").default)(),o=(0,n("b3YrF").useSharedPluginStateSelector)(e,"highlight.activeColor"),l=(0,n("5v3PK").useToolbarDropdownMenu)(),s=l?.closeMenu,d=(0,S.useCallback)((a,o)=>{e?.highlight?.commands?.changeColor&&(e.core.actions.execute(e.highlight.commands.changeColor({color:a,inputMethod:(0,n("4Dsx2").getInputMethodFromParentKeys)(t)})),s?.(o))},[e,s,t]),c=(0,S.useMemo)(()=>{let e=e=>e.value===o;return n("5qdhe").highlightColorPaletteNext.filter(e=>e.value!==n("5qdhe").REMOVE_HIGHLIGHT_COLOR).map(t=>({...t,decorator:(0,r.jsx)(H,{label:t.label,isSelected:e(t)})}))},[o]);return(0,r.jsxs)(n("eyWa4").default,{xcss:K.container,testId:"highlight-color-menu-item",children:[(0,r.jsx)(n("7hXDW").default,{size:"xxsmall",children:a(n("e0nFU").highlightMessages.highlight)}),(0,r.jsx)(n("g66hv").default,{onClick:(e,t,a)=>{d(e,a)},selectedColor:o||null,paletteOptions:{palette:c||[],hexToPaletteColor:n("bWiTS").hexToEditorTextBackgroundPaletteColor}}),(0,i.expValEquals)("platform_editor_toolbar_aifc_patch_4","isEnabled",!0)?void 0:(0,r.jsx)("div",{className:(0,n("gMc0m").default)([K.removeHighlightButton]),children:(0,r.jsx)(n("ccHMk").default,{shouldFitContainer:!0,appearance:"subtle",onClick:e=>d(n("5qdhe").REMOVE_HIGHLIGHT_COLOR,e),children:(0,r.jsx)(n("iXCQx").default,{weight:"medium",children:"Remove highlight"})})})]})}let G=e=>[{...n("cPCP8").HIGHLIGHT_MENU_ITEM,parents:[{...n("cPCP8").TEXT_COLOR_HIGHLIGHT_MENU_SECTION,rank:n("4Chin").TEXT_COLOR_HIGHLIGHT_MENU_SECTION_RANK[n("cPCP8").HIGHLIGHT_MENU_ITEM.key]}],component:({parents:t})=>(0,r.jsx)(V,{api:e,parents:t})}];e.exports.highlightPlugin=({api:e,config:t})=>{let a=e?.analytics?.actions,o=!!e?.toolbar,s=({popupsMountPoint:t,popupsBoundariesElement:a,popupsScrollableElement:o,disabled:n,isToolbarReducedSpacing:i,editorView:l})=>l?(0,r.jsx)(z,{popupsMountPoint:t,popupsBoundariesElement:a,popupsScrollableElement:o,disabled:n,isToolbarReducedSpacing:i,pluginInjectionApi:e,editorView:l}):null;return o?e?.toolbar?.actions.registerComponents(G(e)):e?.primaryToolbar?.actions.registerComponent({name:"highlight",component:s}),{name:"highlight",marks:()=>[{name:"backgroundColor",mark:n("jvymJ").backgroundColor}],commands:{changeColor:_(a)},pmPlugins:()=>{let t=[{name:"highlight",plugin:()=>b({api:e})},{name:"highlightKeymap",plugin:()=>(function({api:e}){let t={};e?.toolbar&&(0,i.expValEquals)("platform_editor_toolbar_aifc_patch_6","isEnabled",!0)||(0,n("hgeg8").bindKeymapWithCommand)(n("hgeg8").toggleHighlightPalette.common,O(e)({inputMethod:n("d925B").INPUT_METHOD.SHORTCUT}),t);let a=e?.analytics?.actions,o=(0,i.expValEquals)("platform_editor_add_orange_highlight_color","cohort","test")?n("5qdhe").highlightColorPaletteNext.find(({label:e})=>"Yellow"===e):n("5qdhe").highlightColorPalette.find(({label:e})=>"Yellow"===e)||{value:"#fedec8"};return o&&(0,n("hgeg8").bindKeymapWithCommand)(n("hgeg8").applyYellowHighlight.common,(0,n("gmyMu").editorCommandToPMCommand)(_(a)({color:o.value,inputMethod:n("d925B").INPUT_METHOD.SHORTCUT})),t),(0,n("60bKU").keymap)(t)})({api:e})}];return(0,i.expValEquals)("platform_editor_text_highlight_padding","isEnabled",!0)&&t.push({name:"highlightPadding",plugin:()=>M()}),t},getSharedState(e){if(e)return h.getState(e)},pluginsOptions:o?{}:{selectionToolbar:()=>"none"===((0,n("dh538").fg)("platform_editor_use_preferences_plugin")?e?.userPreferences?.sharedState.currentState()?.preferences?.toolbarDockingPosition:e?.selectionToolbar?.sharedState?.currentState()?.toolbarDocking)&&(0,l.editorExperiment)("platform_editor_controls","variant1",{exposure:!0})?{rank:(0,l.editorExperiment)("platform_editor_controls","variant1")?5:-9,isToolbarAbove:!0,items:[{type:"custom",render:(t,a,o)=>(0,r.jsx)(U,{dispatchAnalyticsEvent:o,pluginInjectionApi:e,editorView:t}),fallback:[]}],pluginName:"highlight"}:void 0},primaryToolbarComponent:e?.primaryToolbar?void 0:s}}}),i("jgFdO",function(e,t){var a=n("1oCLl");let o={container:n("5MaNT").CodeBlockSharedCssClassName.CODEBLOCK_CONTAINER,start:n("5MaNT").CodeBlockSharedCssClassName.CODEBLOCK_START,end:n("5MaNT").CodeBlockSharedCssClassName.CODEBLOCK_END,contentWrapper:n("5MaNT").CodeBlockSharedCssClassName.CODEBLOCK_CONTENT_WRAPPER,content:n("5MaNT").CodeBlockSharedCssClassName.CODEBLOCK_CONTENT},r=RegExp("\n","gu"),i=()=>(0,a.expValEquals)("confluence_compact_text_format","isEnabled",!0)||(0,a.expValEquals)("cc_editor_ai_content_mode","variant","test")&&(0,n("dh538").fg)("platform_editor_content_mode_button_mvp")?"0.875em":"0.875rem",l=(e,t,a)=>{let l=1;e.forEach(e=>{e.text&&(l+=(e.text.match(r)||[]).length)});let s=l.toString().length,d=e.textContent.split("\n").map((e,t)=>t+1).join("\n");return["pre",{class:o.container,style:`--lineNumberGutterWidth:${s}ch;`,"data-language":e.attrs.language||""},["div",{class:o.start,contenteditable:"false"}],["div",{class:o.contentWrapper},["div",{style:(0,n("24P9d").convertToInlineCss)({backgroundColor:"var(--ds-background-neutral, #0515240F)",position:"relative",width:"var(--lineNumberGutterWidth, 2rem)",padding:a.allowCodeFolding?"var(--ds-space-100, 8px) var(--ds-space-250, 20px) var(--ds-space-100, 8px) var(--ds-space-075, 6px)":"var(--ds-space-100, 8px)",flexShrink:0,fontSize:i(),boxSizing:"content-box"}),contenteditable:"false"},["div",{class:"code-block-gutter-pseudo-element",style:(0,n("24P9d").convertToInlineCss)({textAlign:"right",color:"var(--ds-text-subtlest, #6B6E76)",fontFamily:'var(--ds-font-family-code, ui-monospace, Menlo, "Segoe UI Mono", "Ubuntu Mono", monospace)',whiteSpace:"pre-wrap"}),"data-label":d}]],["div",{class:o.content},["code",{"data-language":e.attrs.language||"",spellcheck:"false","data-testid":"code-block--code","aria-label":t,...(0,n("dh538").fg)("platform_editor_adf_with_localid")&&{"data-local-id":e.attrs.localId}},0]]],["div",{class:o.end,contenteditable:"false"}]]},s=e=>({...(0,n("dh538").fg)("platform_editor_adf_with_localid")?n("4HD7y").codeBlockWithLocalId:n("4HD7y").codeBlock,toDOM:t=>l(t,"",e)}),d=e=>(0,n("ftpVl").withLazyLoading)({nodeName:"codeBlock",getNodeViewOptions:()=>{},loader:async()=>{let{getCodeBlockAdvancedNodeView:t}=await n("kwuPE");return(a,o,r,n,i,l)=>t(e)(a,o,r,l)}}),c=(e,t)=>{let{doc:a,selection:{$head:o,$anchor:r},tr:i,schema:{nodes:{codeBlock:l}}}=e.state,s=Math.max(o.pos-1,1),d=a.resolve(s).nodeBefore?.type===l,c=d?a.resolve(s).nodeBefore:a.resolve(s).node();if(c?.type===l){let l=c.nodeSize,u=d?s:o.pos;return i.setSelection(n("ks2lK").TextSelection.create(a,r.pos,Math.max(u-l,0))),e.dispatch(i),t.preventDefault(),!0}return!1},u=(e,t)=>{let{doc:a,selection:{$head:o,$anchor:r},tr:i,schema:{nodes:{codeBlock:l}}}=e.state,s=o.pos+1,d=a.resolve(s).nodeAfter?.type===l,c=d?a.resolve(s).nodeAfter:a.resolve(s).node();if(c?.type===l){let l=c.nodeSize,u=d?s:o.pos;return i.setSelection(n("ks2lK").TextSelection.create(a,r.pos,Math.min(u+l,a.content.size))),e.dispatch(i),t.preventDefault(),!0}return!1},p=e=>new(0,n("1S4f7").SafePlugin)({props:{nodeViews:{codeBlock:d(e)},handleKeyDown:(e,t)=>t instanceof KeyboardEvent&&("ArrowUp"===t.key&&t.shiftKey?c(e,t):"ArrowDown"===t.key&&t.shiftKey?u(e,t):void 0)}});e.exports.codeBlockAdvancedPlugin=({api:e,config:t})=>({name:"codeBlockAdvanced",nodes:()=>[{name:"codeBlock",node:s({allowCodeFolding:t?.allowCodeFolding??!1})}],pmPlugins:()=>[{name:"codeBlockAdvancedPlugin",plugin:({getIntl:a})=>p({api:e,extensions:t?.extensions??[],allowCodeFolding:t?.allowCodeFolding??!1,getIntl:a})}]})}),i("kwuPE",function(e,t){let a=n("4mJKd")(5);e.exports=Promise.all([a("FOgP0"),a("3IEky"),a("6XNSn")]).then(()=>n("2SLpl"))}),i("4mJKd",function(e,t){e.exports=e=>t=>import(n("8tirZ").shardUrl(n("02nRr").resolve(t),e))}),i("8tirZ",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.applyShardToDomain=i,e.exports.domainShardingKey=void 0,e.exports.getDomainShardIndex=o,e.exports.shardUrl=function(e,t){return globalThis[a]?l(e,t):e},e.exports.shardUrlUnchecked=l;let a="__ATLASPACK_ENABLE_DOMAIN_SHARDS";function o(e,t){let a=t+1,o=e.split("").reduce((e,t)=>{let o=(e<<a)-e+t.charCodeAt(0);return o&o},0);return(o%=a)<0&&(o+=a),o}let r=/-\d+$/;function n(e){if(!r.test(e))return e;let t=e.lastIndexOf("-");return e.slice(0,t)}function i(e,t){let a=e.indexOf("."),o=0===t?"":`-${t-1}`;if(-1===a)return`${n(e)}${o}`;let r=n(e.slice(0,a));return`${r}${o}${e.slice(a)}`}function l(e,t){let a=new URL(e),r=o(function(e){let t=e.lastIndexOf("/");if(-1===t||t===e.length-1)throw Error("Expected an absolute URL with a file name, unable to apply sharding.");return e.slice(t+1)}(a.pathname),t);return a.hostname=i(a.hostname,r),a.toString()}e.exports.domainShardingKey=a}),i("02nRr",function(t,a){e(t.exports,"register",()=>o,e=>o=e),e(t.exports,"resolve",()=>r,e=>r=e);var o,r,n=new Map;o=function(e,t){for(var a=0;a<t.length-1;a+=2)n.set(t[a],{baseUrl:e,path:t[a+1]})},r=function(e){var t=n.get(e);if(null==t)throw Error("Could not resolve bundle with id "+e);return new URL(t.path,t.baseUrl).toString()}}),i("iSJi5",function(e,t){let a=async({node:e,getMentionNameDetails:t})=>{let a={},o=async e=>{if("mention"===e.type.name){let o=await t(e.attrs.id);o&&(a[e.attrs.id]=o?.name)}if(e.content){let t=[];e.content.forEach(e=>{t.push(o(e))}),await Promise.all(t)}};return await o(e),a};e.exports.getMentionMap=a}),i("3MD1q",function(e,t){e.exports.getXProductHeader=function(e){return{"X-Product":(0,n("8klLr").mapToAssistanceServiceProduct)(e)}},e.exports.getXChannelIdHeader=function(e){switch(e){case"ai-mate":return{"X-Channel-Id":"editor"};case"issue-reformatter":return{"X-Channel-Id":"issue-reformatter"};default:return{}}}}),i("8klLr",function(e,t){e.exports.mapToAssistanceServiceProduct=e=>{switch(e){case"CONFLUENCE":return"confluence";case"JSW":return"jira-software";case"JWM":return"jira-core";case"JSM":return"jsm";case"JPD":return"jpd";case"ATLAS":return"atlas";case"JIRA_FAMILY":return"jira";case"BITBUCKET":return"bitbucket";case"TRELLO":return"trello";case"ELEVATE":return"elevate";case"RECRUIT":return"recruit";case"MERCURY":return"mercury";case"TOWNSQUARE":return"townsquare";case"ADMINHUB":return"admin-hub";default:return"unknown"}}}),i("kuYGt",function(e,t){e.exports.AI_MODAL_SCREEN_CLASS="ai-modal-screen"}),i("40sdH",function(e,t){var a=n("l998X"),o=n("42omo");let r="undefined"!=typeof navigator&&navigator.userAgent.toLowerCase().indexOf("firefox")>-1,i={top:12,bottom:12,left:12,right:12},l={default:"_16r2w4bv _1s6kw4bv",firefox:"_16r21l3w _1s6k1l3w _19h915ob _1ank15ob"},s={default:"_19oh1jq7 _10881jq7 _kwc0ymdr _joxlymdr _18lgp3kn _zo24p3kn _18f312c5 _evp612c5",firefox:"_19oh1nnn _10881nnn _kwc09cwz _joxl9cwz _18lgp3kn _zo24p3kn _18f312c5 _evp612c5 _unfq4jg8 _9nev4jg8"},d={width:"calc(100% - var(--ds-space-300, 24px))",justifySelf:"center"},c=({children:e,isAIFC:t})=>{let r=(0,o.useRef)(),i=(0,o.useRef)(null);return((0,o.useEffect)(()=>{i.current&&(r.current=(0,n("7YjFd").findOverflowScrollParent)(i.current)||void 0)},[]),!t&&(0,n("dh538").fg)("editor_a11y_focus_trap_ai"))?(0,a.jsx)(n("5zdke").default,{ref:i,noFocusGuards:!0,returnFocus:{preventScroll:!0},whiteList:e=>e!==r.current,focusOptions:{preventScroll:!0},className:(0,n("gMc0m").default)(["_1bsb1osq"]),children:e}):e},u=(0,o.forwardRef)(({appearance:e,paddingAdjustments:t,rainbowBorder:o=!0,rainbowBorderAnimation:u,disablePadding:p,children:g,enableMaxHeight:f,enableMaxWidth:h,className:m,style:b,isAIFC:_,...C},v)=>(0,a.jsx)(c,{isAIFC:_,children:(0,a.jsx)("div",{ref:v,style:{...b,..."chromeless"===e&&_?d:null,...p?null:t?{paddingTop:`${i.top+(t.top??0)}px`,paddingRight:`${i.right+(t.right??0)}px`,paddingBottom:`${i.bottom+(t.bottom??0)}px`,paddingLeft:`${i.left+(t.left??0)}px`}:{padding:`${i.top}px ${i.left}px`}},className:(0,n("gMc0m").default)([o&&!_&&"_2rko1mok _kqswh2mm _16qsglyw _14mj22xm _rfx322xm _aetrb3bt _1kt9b3bt _18postnw _1cs8stnw _1bqq1mrw _1g0v1mrw _z0ai1b4h _1mp41b4h _1qdg1b4h _kfgt1b4h _15l21n1a _1auk1n1a _19do1n1a _qnec1n1a _clh3161g _7dwz161g _32rxt94y _1x88t94y _15l21pry _1peq105o _ta6yglyw",o&&_&&"_2rko1j6v _kqswh2mm _16qsglyw _14mj3ubj _rfx33ubj _aetrb3bt _1kt9b3bt _18postnw _1cs8stnw _1bqq1mrw _1g0v1mrw _z0ai1b4h _1mp41b4h _1qdg1b4h _kfgt1b4h _15l21n1a _1auk1n1a _19do1n1a _qnec1n1a _clh3161g _7dwz161g _32rxt94y _1x88t94y _15l21pry _1peq105o _ta6yglyw",l[r?"firefox":"default"],_?"_2rko1tm3 _16qs130s _1bsb1osq _vchhusvi _bfhk1bhr":"_2rko1mok _16qs130s _4t3i1osq _1bsb1osq _vchhusvi _bfhk1bhr _10kl1kw7 _ktt71kw7",u&&s[r?"firefox":"default"],f&&"_c71ldgin",h&&"_1bsb1kdj _p12f1kdj _10fp1h6o",m]),...C,children:g})}));e.exports.FloatingContainer=u}),i("imfiV",function(e,t){var a,o=n("42omo"),r=((a={})[a.SmallChromeless=258]="SmallChromeless",a[a.Small=320]="Small",a[a.Large=1/0]="Large",a);e.exports.Breakpoint=r,e.exports.useElementBreakpoints=function(e=320){let[t,{width:a}]=(0,n("dMzWS").useElementSize)(),r=a<e?e:1/0;return(0,o.useMemo)(()=>[t,{breakpoint:r,isSmall:r<=e,isLarge:r>e}],[r,t,e])}}),i("jHWjW",function(e,a){var o=n("l998X"),r=n("42omo");function i({appearance:e}){let{formatMessage:t}=(0,n("8C5kA").default)();return(0,o.jsxs)(n("u9agA").default,{children:["small"!==e&&(0,o.jsx)(n("gdv5Z").default,{children:(0,o.jsx)(n("iXCQx").default,{size:"small",color:"color.text.subtle",children:t(n("giv7U").default.rovoCopyright)})}),(0,o.jsx)(n("lAFHW").RovoIcon,{label:t(n("giv7U").default.rovoCopyright),appearance:"neutral",size:"small"})]})}function l({disclaimer:e}){return(0,o.jsx)("div",{className:(0,n("gMc0m").default)(["_1e0c1txw _1n261g80 _4cvr1h6o","_1ul9idpf _1tke1ejb _1yp21o8v _55c61o8v _tml1azsu _17mnazsu _1bchidpf _1rbcidpf _1npc1b66 _1gic1b66 _1e091b66"]),children:(0,o.jsx)(n("gdv5Z").default,{testId:"custom-disclaimer",children:(0,o.jsx)(n("3gadb").default,{content:e.tooltip,position:"top",children:e.url?(0,n("dh538").fg)("dst-a11y__replace-anchor-with-link__editor-ai")?(0,o.jsx)(n("2Nwuj").default,{href:e.url,target:"_blank",rel:"noopener noreferrer",children:e.text}):(0,o.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",children:e.text}):(0,o.jsx)("span",{children:e.text})})})})}n("42omo"),n("42omo"),n("42omo");let s={default:"_11c81o8v _syazazsu _1053azsu"};function d({disclaimer:e,appearance:a,isAIFC:r}){let{formatMessage:i}=(0,n("8C5kA").default)();return e?(0,o.jsx)(l,{disclaimer:e}):(0,o.jsxs)(n("u9agA").default,{space:"space.050",alignBlock:"center",children:[r?(0,o.jsx)(t(n("8tSmd")),{label:i(n("giv7U").default.infoIconLabel),color:"var(--ds-text-subtle, #505258)",LEGACY_size:"small",size:"small"}):(0,o.jsx)(t(n("eXmBZ")),{label:i(n("giv7U").default.infoIconLabel),color:"var(--ds-text-subtle, #505258)",LEGACY_size:"small",size:"small"}),(0,o.jsx)(n("auNCB").default,{color:"var(--ds-text-subtle, #505258)",href:"https://www.atlassian.com/trust/atlassian-intelligence",xcss:s.default,children:i(n("giv7U").default.disclaimerTextUpdated)})]})}let c={medium:328,large:624},u={medium:300,large:480};e.exports.Footer=function({brand:e,showDisclaimer:t,disclaimer:a,showBetaLozenge:l,showFeedback:s,feedbackForm:p,isAIFC:g}){let{formatMessage:f}=(0,n("8C5kA").default)(),[h,{width:m}]=(0,n("dMzWS").useElementSize)(),b=(0,r.useMemo)(()=>"atlassian-intelligence"===e?m<c.medium?"small":m<c.large?"medium":"large":m<u.medium?"small":m<u.large?"medium":"large",[m,e]);return(0,o.jsxs)(n("gdv5Z").default,{ref:h,xcss:"_zulp1b66 _1e0c1txw _1n261g80 _19bvpxbi _u5f3pxbi _ca0qu2gc _n3tdu2gc _15a5nqa1 _4cvr1h6o _1bah1yb4 _1i531l7x _uwhke4h9",children:[(0,o.jsxs)(n("u9agA").default,{space:"space.050",children:[l&&(0,o.jsx)(n("5nBzc").default,{testId:"beta-lozenge",children:f(n("giv7U").default.betaLabel)}),t?(0,o.jsx)(d,{disclaimer:a,appearance:b,isAIFC:g}):(0,o.jsx)(n("gdv5Z").default,{})]}),!(0,n("dh538").fg)("ai-smart-button-team-25")&&!g&&!s&&(0,o.jsx)(i,{brand:e,appearance:b}),s&&(0,o.jsxs)(n("u9agA").default,{space:"space.050",children:[(0,o.jsx)(n("u9agA").default,{children:f(n("giv7U").default.compactFeedbackText)}),(0,o.jsx)(n("u9agA").default,{children:p})]})]})}}),i("giv7U",function(t,a){e(t.exports,"default",()=>o);var o=(0,n("cgtv4").defineMessages)({betaLabel:{id:"fabric.editor.ai.screens.preview.betaLabel",defaultMessage:"Beta"},infoIconLabel:{id:"fabric.editor.ai.commandPalette.footer.infoIconLabel",defaultMessage:"Information"},atlassianIntelligenceCopyrightShort:{id:"fabric.editor.ai.commandPalette.footer.atlassianIntelligenceCopyrightShort",defaultMessage:"Powered by AI"},atlassianIntelligenceCopyright:{id:"fabric.editor.ai.commandPalette.footer.atlassianIntelligenceCopyright",defaultMessage:"Powered by Atlassian Intelligence"},rovoCopyright:{id:"fabric.editor.ai.commandPalette.footer.rovoCopyright",defaultMessage:"Rovo"},disclaimerTextUpdated:{id:"fabric.editor.ai.commandPalette.footer.disclaimerTextUpdated",defaultMessage:"Uses AI. Verify results."},usePageKnowledgeToggleLabel:{id:"fabric.editor.ai.commandPalette.footer.usePageKnowledgeToggleLabel",defaultMessage:"Include knowledge from current page"},compactFeedbackText:{id:"fabric.editor.ai.screens.preview.compactFeedbackText",defaultMessage:"Helpful?"}})}),i("8PgnR",function(e,a){var o=n("l998X"),r=n("42omo");n("42omo");var i=(0,n("cgtv4").defineMessages)({closePreviewLabel:{id:"fabric.editor.ai.components.closePreviewIconButton.closePreviewLabel.non-final",defaultMessage:"Close preview"}});let l={position:"top"},s=({onClick:e})=>{let{formatMessage:a}=(0,n("8C5kA").default)();return(0,o.jsx)(n("1s5hv").default,{xcss:"_1e0c116y _2hwx1b66",children:(0,o.jsx)(n("1qfLF").default,{appearance:"subtle",icon:t(n("hmuev")),label:a(i.closePreviewLabel),spacing:"compact",onClick:e,testId:"close-preview-icon-button",tooltip:l,isTooltipDisabled:!1})})},d=(0,n("cgtv4").defineMessages)({editPromptHover:{id:"fabric.editor.ai.screens.preview.header.edit.hover",defaultMessage:"Edit"},clearPromptHover:{id:"fabric.editor.ai.screens.preview.header.clear.hover",defaultMessage:"Clear"}}),c=({isClearMode:e=!1,isPlaceholder:a})=>{let{formatMessage:i}=(0,n("8C5kA").default)(),l=t(r).useMemo(()=>e?i(d.clearPromptHover):i(d.editPromptHover),[e,i]);return(0,o.jsx)("span",{id:"edit-prompt-hover-button","data-testid":"edit-prompt-hover-button",className:(0,n("gMc0m").default)(["_1o9zidpf _18u01wug _19pk1i6y _otyr1i6y _1e0c116y _tzy4idpf","_1npcidpf _1gicidpf _1e09idpf _1mspidpf _1vf2tlke _1at8v77o _1cjov77o _1yg612x7 _hjaq12x7",a&&"_1vf273ad"]),children:(0,o.jsx)(n("ho4zm").default,{text:l})})};n("42omo");var u=n("67O0h");let p=({children:e})=>(0,o.jsx)("div",{className:(0,n("gMc0m").default)(["_1reo15vq _18m915vq _l0ms15vq _1aiy15vq _btic1l2s _pkxt1q9c _1wzj1wug _usad1hna _ceky1ufz _hgabu2gc _1vmmkb7n _hgakkb7n _p8i3j915 _1a6vb3bt _1mrdf705 _q3ck1q9c","_c71l1xlq _motn1m6u _1u151tcg"]),children:e}),g=({promptADF:e,providerFactory:t})=>(0,o.jsx)(n("lspPP").RendererActionsContext,{children:(0,o.jsx)(p,{children:(0,o.jsx)(u.default,{document:e,media:{allowLinking:!1},useSpecBasedValidator:!0,dataProviders:t,maxHeight:20})})}),f=(0,n("cgtv4").defineMessages)({editPrompt:{id:"fabric.editor.ai.screens.preview.header.edit",defaultMessage:"Edit prompt"}}),h="ai-latest-prompt-content",m={default:"_1bsb1osq"};e.exports.LatestPromptHeader=({parentPresetPromptLabel:e,childShortTitle:a,prompt:i,promptADF:l,presetTitle:d,providerFactory:u,onEditPromptClick:p,isClearTitle:b,agent:_,showBack:C,onBack:v,onClose:x})=>{let{formatMessage:k}=(0,n("8C5kA").default)(),E=!!p,I=t(r).useMemo(()=>l?(0,o.jsxs)(n("1s5hv").default,{alignItems:"center",children:[(0,o.jsx)(g,{promptADF:l,providerFactory:u}),!d&&(0,o.jsx)(c,{isClearMode:!d&&!i,isPlaceholder:!E})]}):i?(0,o.jsx)("div",{className:(0,n("gMc0m").default)(["_1reo15vq _18m915vq _1bto1l2s _o5721q9c _ct361wug _slp31hna"]),children:i}):null,[E,i,l,u,d]),T=(0,n("9LxGu").useAgentRefinementTagProps)(_),y=t(r).useMemo(()=>(0,o.jsxs)(n("1s5hv").default,{children:[C&&(0,o.jsx)(n("9q1Mo").BackIconButton,{inPromptHeader:!0,isDisabled:!E,stopPropagation:!0,onClick:v}),(0,o.jsxs)(n("1s5hv").default,{direction:"column",gap:"space.050",xcss:"_16jlkb7n _1ul9idpf",children:[d&&(0,o.jsxs)(n("1s5hv").default,{alignItems:"center",children:[(0,o.jsx)("div",{onClick:e=>{e.stopPropagation(),e.preventDefault()},children:b?(0,o.jsx)(n("iXCQx").default,{weight:"semibold",children:d}):(0,o.jsx)(n("bwdMU").RefinementTag,{label:d,...T,onClick:E?()=>{v&&v()}:void 0})}),d&&(0,o.jsx)(c,{isClearMode:!!d&&!i,isPlaceholder:!E})]}),I]}),!!x&&(0,o.jsx)(s,{onClick:x})]}),[C,E,v,d,b,T,i,I,x]);return i||d?(0,o.jsx)(n("gdv5Z").default,{testId:"prompt-header",xcss:m.default,children:E?(0,o.jsx)("button",{type:"button","data-testid":"edit-prompt-button",onClick:p,"aria-label":k(f.editPrompt),"aria-describedby":h,className:(0,n("gMc0m").default)(["_1reo15vq _18m915vq _ca0qutpp _n3tdutpp _19bvutpp _u5f3utpp _1i4q1hna _1bsb1osq","_gh0qgktf","_vchhusvi","_1reo15vq _18m915vq _1bto1l2s _o5721q9c _ct361wug _slp31hna","_vwz4gktf","_19itglyw _2rko1mok _80omtlke _1bsb1osq _bfhk1j28 _y3gnv2br","_syaz1kw7 _1wybn7od _vwz41kw7 _mrkbidpf _1o0zidpf _gemckb7n _y2mvdfik _1bg41i6y _irr31dpa _1di6fcek"]),children:(0,o.jsx)("div",{id:h,"data-testid":h,children:y})}):(0,o.jsx)("div",{id:h,"data-testid":h,className:(0,n("gMc0m").default)(["_1reo15vq _18m915vq _ca0qutpp _n3tdutpp _19bvutpp _u5f3utpp _1i4q1hna _1bsb1osq","_gh0qgktf","_vchhusvi","_1reo15vq _18m915vq _1bto1l2s _o5721q9c _ct361wug _slp31hna","_vwz4gktf"]),children:y})}):null}}),i("9LxGu",function(e,t){var a=n("l998X"),o=n("42omo");e.exports.useAgentRefinementTagProps=function(e){return(0,o.useMemo)(()=>e?{elemBefore:(0,a.jsx)("span",{"data-testId":"command-palette-rovo-agent-icon",children:(0,a.jsx)(n("hezkK").AgentAvatar,{agentId:e.id,agentNamedId:e.externalConfigReference??e.namedId,agentIdentityAccountId:e.identityAccountId,isForgeAgent:"FORGE"===e.creatorType,forgeAgentIconUrl:e.icon,label:e.name,size:"xsmall"})}),appearance:"rounded"}:void 0,[e])}}),i("bwdMU",function(e,t){var a=n("l998X"),o=n("42omo"),r=(0,n("cgtv4").defineMessages)({removeLabel:{id:"fabric.editor.ai.screens.promptWithSelectedOption.removeLabel",defaultMessage:"Remove"},promptSelected:{id:"fabric.editor.ai.screens.promptWithSelectedOption.promptSelected",defaultMessage:"{promptName} - Selected"}});let i=(0,o.forwardRef)(({label:e,onClick:t,elemBefore:o,appearance:i},l)=>{let{formatMessage:s}=(0,n("8C5kA").default)();return(0,a.jsx)("div",{style:{"--align-items":"rounded"===i?"center":"flex-start","--elem-before-height":"rounded"===i?"100%":"auto"},className:(0,n("gMc0m").default)(["_1e0c1txw _1ytiidpf _7yhbidpf _1bdkidpf _24rcidpf _18vq4x5u _1k2cidpf _b3iiidpf _spsw16ko _qxh5o3gi","refinement-tag"]),"data-testid":"command-palette-refinement-tag",role:"status","aria-atomic":"true","aria-label":s(r.promptSelected,{promptName:e}),"aria-live":"assertive",ref:l,children:t?(0,a.jsx)(n("3WVxj").default,{appearance:i,elemBefore:o,testId:"refinement-tag",removeButtonLabel:s(r.removeLabel),text:e,onBeforeRemoveAction:()=>(t(),!1)}):(0,a.jsx)(n("ho4zm").default,{testId:"refinement-tag",text:e,elemBefore:o,appearance:i})})});e.exports.RefinementTag=i}),i("f02sP",function(e,t){var a=n("l998X"),o=n("42omo");let r=Math.min(500,Math.max(402,n("aFUXX").akEditorFloatingPanelZIndex+2));e.exports.UnhandledErrorScreen=({onCancel:e,text:t,inContentComponent:i,isAIFC:l})=>{let{formatMessage:s}=(0,n("8C5kA").default)(),[d,{breakpoint:c}]=(0,n("imfiV").useElementBreakpoints)(),[u,p]=(0,o.useState)(void 0),g=(0,o.useCallback)(e=>{i&&!u&&e&&e.parentNode instanceof HTMLElement&&l&&p(e.parentNode.clientWidth)},[i,u,l]),f=(0,a.jsxs)(n("BPkYg").ErrorFloatingContainer,{ref:d,breakpoint:c,isAIFC:l,children:[(0,a.jsx)(n("6F6hl").default,{children:s(n("4pXOZ").default.ariaErrorTitle)}),(0,a.jsx)(n("BPkYg").ErrorMessage,{breakpoint:c,isAIFC:l,children:t}),(0,a.jsx)(n("BPkYg").ErrorButtonContainer,{isAIFC:l,children:(0,a.jsx)(n("BPkYg").ErrorButton,{autoFocus:!0,testId:"cancel",onClick:e,appearance:"primary",isAIFC:l,children:s(l?n("4pXOZ").default.closeLabel:n("4pXOZ").default.cancelLabel)})})]});return i&&l?(0,a.jsx)("div",{ref:g,className:(0,n("gMc0m").default)(["_kqswstnw","_1pby1kbs"]),style:{width:u,"--_1dsp0pi":(0,n("7sObp").default)(r)},children:f}):f}}),i("BPkYg",function(e,a){var o=n("l998X"),r=n("42omo");let i={container:"_zulp1b66 _1e0c1txw _1n261g80 _2lx2vrvc _1bahesu3 _4cvr1h6o _zs121b66 _jq8gxy5q _xlob1h6o",primaryButton:"_stfgia51"},l=(0,r.forwardRef)(({children:e,breakpoint:t,appearance:a,isAIFC:r},i)=>(0,o.jsx)(n("40sdH").FloatingContainer,{ref:i,"data-testid":"error-screen",className:(0,n("gMc0m").default)(["_zulpu2gc _1e0c1txw _2lx2vrvc",t<=n("imfiV").Breakpoint.Small&&"_zulppxbi _1e0c1txw _2lx21bp4",`error-screen ${n("kuYGt").AI_MODAL_SCREEN_CLASS}`]),paddingAdjustments:r?{right:4,left:4}:{top:1,bottom:1},rainbowBorder:!1,appearance:a,isAIFC:r,children:e}));e.exports.ErrorMessage=function({children:e,breakpoint:a,isAIFC:r}){let{formatMessage:i}=(0,n("8C5kA").default)();return(0,o.jsxs)("div",{className:(0,n("gMc0m").default)(["_16jlkb7n _1o9zkb7n _i0dlf1ug _1e0c1txw _2lx2vrvc _1bah1y6m _4cvr1h6o","_zulp19bv",a<=n("imfiV").Breakpoint.Small&&"_4cvr1y6m"]),children:[(0,o.jsx)("span",{className:(0,n("gMc0m").default)(["_1e0c116y _4cvr1h6o _1bah1h6o _kqswh2mm _1o9zidpf _154ize3t","_vwz4kb7n",a<=n("imfiV").Breakpoint.Small&&"_154i1i6y"]),children:r?(0,o.jsx)("span",{className:(0,n("gMc0m").default)(["_ca0q1b66 _u5f31b66 _n3td1b66 _19bv1b66"]),children:(0,o.jsx)(t(n("a3fRD")),{label:i(n("4pXOZ").default.warningIconLabel),color:"var(--ds-icon-danger, #C9372C)"})}):(0,o.jsx)(t(n("ebrpi")),{label:i(n("4pXOZ").default.warningIconLabel),color:"var(--ds-icon-warning, #E06C00)"})}),(0,o.jsx)(n("iXCQx").default,{as:"p",children:e})]})},e.exports.ErrorButton=function({children:e,onClick:t,appearance:a,testId:r,autoFocus:l,disabled:s=!1,isAIFC:d}){let c=d&&"primary"===a,u=(0,o.jsx)(n("ccHMk").default,{autoFocus:l,testId:r,spacing:"compact",onClick:t,type:"button",appearance:c?"subtle":a,isDisabled:s,children:e});return c?(0,o.jsx)(n("u9agA").default,{xcss:i.primaryButton,children:u}):u},e.exports.ErrorButtonContainer=function({children:e,isAIFC:t}){return t?(0,o.jsx)(n("u9agA").default,{xcss:i.container,children:e}):(0,o.jsx)("div",{className:(0,n("gMc0m").default)(["_zulpu2gc _1e0c1txw _1n261g80 _2lx2vrvc _1bahesu3 _4cvr1h6o"]),children:e})},e.exports.ErrorFloatingContainer=l}),i("4pXOZ",function(t,a){e(t.exports,"default",()=>o);var o=(0,n("cgtv4").defineMessages)({documentInsertError:{id:"fabric.editor.ai.experience-application.documentInsertError",defaultMessage:"We're having trouble inserting the response. Close the dialog and try again."},tokenLimitExceeded:{id:"fabric.editor.ai.experience-application.tokenLimitExceeded",defaultMessage:"We couldn't get a response. Your prompt or response was over the limit for this request. Close the dialog and try again."},apiError:{id:"fabric.editor.ai.experience.apiError",defaultMessage:"We couldnt get a response, please try again."},inputTooShortError:{id:"fabric.editor.ai.experience.inputTooShortError",defaultMessage:"The content is too short to summarize. Please add more and try again."},cancelLabel:{id:"fabric.editor.ai.screens.error.cancelLabel",defaultMessage:"Cancel"},closeLabel:{id:"fabric.editor.ai.screens.error.closeLabel",defaultMessage:"Close"},retryLabel:{id:"fabric.editor.ai.screens.error.retryLabel",defaultMessage:"Try again"},warningIconLabel:{id:"fabric.editor.ai.screens.error.warningIconLabel",defaultMessage:"Warning"},ariaErrorTitle:{id:"fabric.editor.ai.screens.error.ariaErrorTitle",defaultMessage:"Error"}})}),i("9zowQ",function(e,a){var o=n("l998X"),r=n("42omo"),i=(0,n("cgtv4").defineMessages)({goodResponse:{id:"fabric.editor.ai.components.feedbackForm.goodResponse",defaultMessage:"Good response"},badResponse:{id:"fabric.editor.ai.components.feedbackForm.badResponse",defaultMessage:"Bad response"},feedbackSent:{id:"fabric.editor.ai.components.feedbackForm.feedbackSent",defaultMessage:"Feedback sent"}});let l=({message:e,shouldAnnounce:t})=>(0,o.jsx)(n("6F6hl").default,{children:(0,o.jsx)(n("gdv5Z").default,{"aria-atomic":"true","aria-live":"polite",children:t&&e})}),s=({type:e,onClick:a,isPressed:r,isDisabled:l,flexIconWrapper:s,largeIconButton:d})=>{let{formatMessage:c}=(0,n("8C5kA").default)(),u=c("good"===e?i.goodResponse:i.badResponse),p=r?"var(--ds-link-pressed, #1558BC)":"currentColor";return(0,o.jsx)("div",{className:(0,n("gMc0m").default)([s&&"_1e0c1txw _4cvr1h6o _1bah1h6o",(r||l)&&"_7dirsm61"]),children:(0,o.jsx)(n("1qfLF").default,{testId:`${e}-response-feedback-button`,type:"button",isDisabled:l,onClick:a,icon:()=>"good"===e?(0,o.jsx)(t(n("9FnLD")),{label:u,color:p}):(0,o.jsx)(t(n("9zIwY")),{label:u,color:p}),label:u,appearance:"subtle",spacing:d?void 0:"compact",isTooltipDisabled:!1,tooltip:{position:"top",content:u}})})};e.exports.FeedbackForm=({onGoodResponseButtonClick:e,onBadResponseButtonClick:a,isPressed:d,isDisabled:c,flexIconWrapper:u,largeIconButton:p})=>{let{formatMessage:g}=(0,n("8C5kA").default)(),f=g(i.feedbackSent),[h,m]=t(r).useState(),b=t(r).useCallback((e,t)=>()=>{e(),m(t)},[m]),_=!!d||c||!!h;return(0,o.jsxs)(t(r).Fragment,{children:[(0,o.jsx)(l,{message:f,shouldAnnounce:!!h}),(0,o.jsx)(s,{type:"good",isPressed:"good"===d,isDisabled:_,flexIconWrapper:u,largeIconButton:p,onClick:b(e,"good")}),(0,o.jsx)(s,{type:"bad",isPressed:"bad"===d,isDisabled:_,flexIconWrapper:u,largeIconButton:p,onClick:b(a,"bad")})]})}}),i("3gD8G",function(e,t){let a=(e,t)=>n("5SAOw").DOMSerializer.fromSchema(t).serializeFragment(e);e.exports.copyPMFragmentToClipboard=function({editorView:e,pmFragment:t}){let o=e.state.tr,r=a(t,e.state.schema);if(r){let e,a=document.createElement("div");a.appendChild(r),a.firstChild.setAttribute("data-pm-slice","0 0 []"),(0,n("cMZNY").copyHTMLToClipboard)(a,(e="",t.nodesBetween(0,t.size,t=>(t.type.isBlock&&(e+="\n\n"),"paragraph"===t.type.name||("hardBreak"===t.type.name?e+="\n":"text"===t.type.name?e+=t.text:"inlineCard"===t.type.name||"blockCard"===t.type.name?e+=t.attrs.url:e+=t.textBetween(0,t.content.size,"\n\n"),!1))),e.trim()))}o.setMeta("scrollIntoView",!1),e.dispatch(o)}}),i("6dSQX",function(e,a){var o=n("l998X"),r=n("42omo"),i=n("kB2tR"),l=n("1oCLl");function s({shortcut:e}){let t=(0,n("hgeg8").formatShortcut)(e);return(0,o.jsx)("span",{className:(0,n("gMc0m").default)(["_2rko12b0 _syazazsu _bfhki8nm _k48pi7a9","_ca0q1l7b _u5f31l7b _n3td1l7b _19bv1l7b _18u0i2wt"]),children:t})}function d({shortcut:e,children:t,forceFocusRing:a,buttonAutoFocusRing:i,onClick:d,...c}){(0,r.useEffect)(()=>(0,n("fFa3V").bind)(document,{type:"keydown",listener:t=>{e?.common&&function(e,t){let a=t.split("-"),o=a.pop(),r=new Set(a);return e.key===o&&r.has("Mod")===e.metaKey&&r.has("Shift")===e.shiftKey&&r.has("Alt")===e.altKey&&r.has("Ctrl")===e.ctrlKey}(t,e.common)&&(t.preventDefault(),t.stopPropagation(),d?.())}}),[d,e]);let u=(0,r.useMemo)(()=>{if(!e)return(0,o.jsx)(r.Fragment,{children:t});let a=(0,l.expValEquals)("platform_editor_hydratable_ui","isEnabled",!0)?(0,n("d7ZU3").getBrowserInfo)():n("d7ZU3").browser;return(0,o.jsxs)(r.Fragment,{children:[(0,o.jsx)("span",{"aria-keyshortcuts":a.mac?e?.mac:e?.windows,children:t}),(0,o.jsx)("span",{"aria-hidden":"true",children:(0,o.jsx)(s,{shortcut:e})})]})},[e,t]);return(0,o.jsx)(n("eEA8O").default,{onClick:d,...c,className:(0,n("gMc0m").default)([a&&"_7br8dfik _5wkdv77o",i&&"_15y8dfik _2en4v77o"]),children:u})}n("42omo");var c=(0,n("cgtv4").defineMessages)({copy:{id:"fabric.editor.ai.config.item.action.copyResponse",defaultMessage:"Copy"},copied:{id:"fabric.editor.ai.config.item.action.responseCopied",defaultMessage:"Copied!"},copiedToClipboard:{id:"fabric.editor.ai.config.item.action.responseCopiedToClipboard",defaultMessage:"Copied to clipboard"}});let u=({onClick:e,tabIndex:a,appearance:i,spacing:l})=>{let{formatMessage:s}=(0,n("8C5kA").default)(),[d,u]=t(r).useState(s(c.copy)),p=t(r).useRef(),g=t(r).useCallback(t=>{e(t),u(s(c.copiedToClipboard))},[e,s]),f=t(r).useCallback(()=>u(s(c.copy)),[s]);return t(r).useLayoutEffect(()=>{p.current?.()},[d]),(0,o.jsx)(n("1qfLF").default,{testId:"copy-response-button",type:"button",onClick:g,icon:t(n("2MuFw")),label:d,appearance:i,spacing:l,tabIndex:a,isTooltipDisabled:!1,tooltip:{position:"top",content:({update:e})=>(p.current=e,d),onHide:f}})};var p=n("8PgnR");n("42omo");var g=(0,n("cgtv4").defineMessages)({retryPrompt:{id:"fabric.editor.ai.config.item.action.retryPrompt",defaultMessage:"Retry"}});let f=({onClick:e,tabIndex:a,appearance:r,spacing:i,isDisabled:l=!1})=>{let{formatMessage:s}=(0,n("8C5kA").default)(),d=s(g.retryPrompt);return(0,o.jsx)(n("1qfLF").default,{testId:"retry-prompt-button",type:"button",onClick:e,icon:t(n("d8ohW")),label:d,appearance:r,spacing:i,tabIndex:a,isTooltipDisabled:!1,tooltip:{position:"top",hideTooltipOnClick:!0,content:d},isDisabled:l})};function h(){let[e,t]=(0,r.useState)(null),[a,o]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{if(!e)return;let t=new ResizeObserver(e=>{for(let t of e){let e=t.target.firstElementChild;if(!(e instanceof HTMLElement))return void o(!1);let a=e.offsetTop;o(Array.from(t.target.children).some(e=>e instanceof HTMLElement&&e.offsetTop!==a))}});return t.observe(e),()=>{t.disconnect()}},[e]),[t,a]}n("42omo");var m=(0,n("cgtv4").defineMessages)({logoAltText:{id:"fabric.editor.ai.screens.prompt.logoAltText",defaultMessage:"Atlassian Intelligence Logo"},logoText:{id:"fabric.editor.ai.screens.prompt.logoText",defaultMessage:"Atlassian Intelligence"},betaLabel:{id:"fabric.editor.ai.screens.preview.betaLabel",defaultMessage:"Beta"},cancelLabel:{id:"fabric.editor.ai.screens.preview.cancelLabel",defaultMessage:"Cancel"},discardLabel:{id:"fabric.editor.ai.screens.preview.discardLabel",defaultMessage:"Discard"},defaultInputPlaceholder:{id:"fabric.editor.ai.screens.preview.defaultAIPlaceholder",defaultMessage:"Tell AI what to do next"},defaultRovoInputPlaceholder:{id:"fabric.editor.ai.screens.preview.defaultRovoInputPlaceholder",defaultMessage:"Tell Rovo what to do next"},placeholderWithAgent:{id:"fabric.editor.ai.screens.preview.placeholderWithAgent",defaultMessage:"Ask {agentName} what to do next"},disclaimer:{id:"fabric.editor.ai.screens.preview.disclaimer",defaultMessage:"Information quality may vary."},disclaimerLink:{id:"fabric.editor.ai.screens.preview.disclaimerLink",defaultMessage:"Learn why"},previewScreenLabel:{id:"fabric.editor.ai.experience.previewScreenLabel",defaultMessage:"Preview"},refineButton:{id:"fabric.editor.ai.screens.preview.refineButton",defaultMessage:"Refine"},highlightDifferencesLabel:{id:"fabric.editor.ai.screens.preview.highlightDifferencesLabel.non-final",defaultMessage:"Highlight differences"},highlightDifferencesDisabledTooltip:{id:"fabric.editor.ai.screens.preview.highlightDifferencesDisabledTooltip.non-final",defaultMessage:"This feature is not available for this AI generated response."},actionButtonsAccessibleLabel:{id:"fabric.editor.ai.screens.preview.actionButtonsAccessibleLabel",defaultMessage:"Actions for AI generated content"},actionButtonsTryAgain:{id:"fabric.editor.ai.screens.preview.actionButtonsTryAgain",defaultMessage:"Try again"},actionButtonsAccept:{id:"fabric.editor.ai.screens.preview.actionButtonsAccept",defaultMessage:"Accept"}});function b({cancelButton:e,primaryButtons:t,secondaryButtons:a}){let[r,i]=h(),[l,s]=h(),{formatMessage:d}=(0,n("8C5kA").default)();return(0,o.jsxs)("div",{ref:r,role:"group","aria-label":d(m.actionButtonsAccessibleLabel),className:(0,n("gMc0m").default)(["_zulpu2gc _1e0c1txw _1n261g80 _1bahesu3 _ca0qze3t"]),children:[!i&&(0,o.jsx)("div",{className:(0,n("gMc0m").default)(["_zulpu2gc _1e0c1txw _4cvr1h6o"]),children:a}),(0,o.jsxs)("div",{ref:l,className:(0,n("gMc0m").default)(["_zulpu2gc _1e0c1txw _1n261g80 _1bahesu3 _ca0qze3t","_18u01wug"]),children:[!s&&e,t&&(0,o.jsx)("div",{className:(0,n("gMc0m").default)(["_zulpu2gc _1e0c1txw _1n261g80 _1bahesu3 _ca0qze3t"]),children:t}),s&&e]}),i&&(0,o.jsx)("div",{className:(0,n("gMc0m").default)(["_zulpu2gc _1e0c1txw _4cvr1h6o"]),children:a})]})}var _=(0,n("cgtv4").defineMessages)({refineButton:{id:"fabric.editor.ai.screens.preview.refineDropdown.refineButton",defaultMessage:"Refine"}});function C({items:e,onItemClick:t,currentOpenedSubMenu:a,onSubMenuOpenChanged:r}){return(0,o.jsx)(n("ahaN7").default,{children:e.map(e=>(0,o.jsx)(v,{item:e,onItemClick:t,currentOpenedSubMenu:a,onSubMenuOpenChanged:r},e.title.id))})}function v({item:e,onItemClick:a,currentOpenedSubMenu:r,onSubMenuOpenChanged:i}){let{formatMessage:l}=(0,n("8C5kA").default)();return"children"in e&&e.children?(0,o.jsx)(n("52EPl").default,{placement:"right-start",shouldRenderToParent:!0,isOpen:r===e,onOpenChange:({isOpen:t})=>{i?.(e,t)},trigger:({triggerRef:a,...r})=>(0,o.jsx)(n("dAYOx").default,{...r,ref:a,elemBefore:e.icon,elemAfter:(0,o.jsx)(t(n("15HFc")),{color:"var(--ds-icon-subtle, #505258)",label:"",size:"small"}),children:(0,o.jsx)("span",{children:l(e.title)})}),children:(0,o.jsx)(n("ahaN7").default,{children:(0,o.jsx)(C,{items:e.children,onItemClick:a})})}):(0,o.jsx)(n("dAYOx").default,{elemBefore:e.icon,onClick:()=>{a(),e.onClick?.()},children:l(e.title)})}function x({items:e,onClick:t}){let{formatMessage:a}=(0,n("8C5kA").default)(),[i,l]=(0,r.useState)(!1),[s,d]=(0,r.useState)(null),c=(0,r.useCallback)(({isOpen:e})=>{e&&t&&t(),l(e),e||d(null)},[t]),u=(0,r.useCallback)(()=>{l(!1),d(null)},[]),p=(0,r.useCallback)((e,t)=>{d(a=>a!==e||t?e:null)},[]);return(0,o.jsx)(n("52EPl").default,{trigger:a(_.refineButton),testId:"refine-dropdown",shouldRenderToParent:!0,isOpen:i,onOpenChange:c,children:(0,o.jsx)(C,{items:e,onItemClick:u,currentOpenedSubMenu:s,onSubMenuOpenChanged:p})})}n("42omo");let k={default:"_syaz1gmx _80om13gf"},E={primary:"primary",secondary:"default",cancel:"subtle"};e.exports.PreviewScreen=({parentPresetPromptLabel:e,childShortTitle:a,staticPromptTitle:l,staticInsertedPrompt:s,latestPrompt:c,preview:g,diffPreview:h,canShowVisualDiffPreview:_,disableActions:C=!1,disableInterrogation:v=!1,onSubmit:I,onCancel:T,onCopy:y,onRetry:M,onInputFocus:O,onInputChange:w,onADFChange:A,onGoodResponseButtonClick:S,onBadResponseButtonClick:B,onEditPromptClick:P,onBack:j,onShowDiffPreview:L,onClose:N,showBack:R=!0,applications:D,isInputActive:F,inputValue:U,inputADFValue:q,PromptEditor:z,clearInputRef:K,providerFactory:H,schema:V,disclaimer:G,agent:W,onRefinementClick:X,refineDropdownItems:Y,hideHorizontalRule:Z=!1,showBetaLozenge:J=!1,isClearTitle:$=!1,canInlineStreamChanges:Q,isAIFC:ee})=>{let{formatMessage:et}=(0,n("8C5kA").default)(),[ea,eo]=(0,r.useState)(!0),er=l??c?.presetTitle,en=s??c?.userInput,ei=(0,r.useCallback)(()=>{eo(!1)},[]),el=(0,r.useCallback)(()=>{eo(!0),O&&O()},[O]),es=(0,r.useRef)(void 0),ed=W?et(m.placeholderWithAgent,{agentName:W.name}):et(m.defaultRovoInputPlaceholder),[ec,eu]=(0,r.useState)(!0),ep=!!h,eg=(0,r.useCallback)(()=>{eu(e=>(L?.(!e),!e))},[eu,L]),ef=ee&&Q,eh=!C&&!v,em=(0,r.useMemo)(()=>(0,o.jsx)(n("9zowQ").FeedbackForm,{onBadResponseButtonClick:B,onGoodResponseButtonClick:S}),[B,S]),eb=(0,r.useMemo)(()=>{let e=!C&&(ee?(0,o.jsxs)(o.Fragment,{children:[y&&(0,o.jsx)(u,{spacing:"compact",appearance:"subtle",onClick:y}),em,M&&(0,o.jsx)(f,{spacing:"compact",appearance:"subtle",onClick:M})]}):(0,o.jsxs)(o.Fragment,{children:[em,M&&(0,o.jsx)(f,{spacing:"compact",appearance:"subtle",onClick:M}),y&&(0,o.jsx)(u,{spacing:"compact",appearance:"subtle",onClick:y})]})),a=T?(0,o.jsx)(n("ccHMk").default,{testId:"discard-button",onClick:T,type:"button",appearance:C?"primary":"subtle",autoFocus:C||0===D.length,children:et(m.discardLabel)}):void 0,r=!C&&D.map(({onClick:e,label:t,appearance:a,shortcut:r,isDisabled:i,tooltip:l},s)=>{let c=(0,o.jsx)(d,{onClick:e,type:"button",shortcut:r,autoFocus:"primary"===a,forceFocusRing:s===D.length-1&&ea,buttonAutoFocusRing:s===D.length-1&&!ea,appearance:E[a],isDisabled:i,children:t},t);return l?(0,o.jsx)(n("3gadb").default,{content:l,position:"top",children:c},`${t}-tooltip`):c});if(r&&!W&&Y&&r.unshift((0,o.jsx)(x,{items:Y,onClick:X},"refine-dropdown")),ee){let e=D.find(e=>"primary"===e.appearance);if(e){let a=(0,o.jsx)(d,{onClick:e?.onClick,type:"button",shortcut:e?.shortcut,autoFocus:!0,appearance:"primary",isDisabled:e?.isDisabled,children:et(m.actionButtonsAccept)},t(i)(e?.label));r=!C&&[a]}}return(0,o.jsx)(b,{cancelButton:a,secondaryButtons:e,primaryButtons:r})},[C,em,M,y,T,D,et,W,Y,ee,ea,X]),e_=(0,o.jsx)("div",{className:(0,n("gMc0m").default)(["_ca0qutpp _u5f3utpp _n3tdutpp _19bvutpp",Z?"_ca0qze3t":!ee&&"_x3doia51 _n7zlia51"]),children:(0,o.jsxs)(n("eyWa4").default,{space:"space.200",children:[!ef&&_&&(0,o.jsx)(n("3gadb").default,{content:!ep&&et(m.highlightDifferencesDisabledTooltip),children:(0,o.jsxs)(n("u9agA").default,{alignBlock:"center",children:[(0,o.jsx)(n("82gXq").default,{isDisabled:!ep,label:et(m.highlightDifferencesLabel),id:"diff-preview-toggle",testId:"diff-preview-toggle",isChecked:ec&&ep,onChange:eg}),(0,o.jsx)(n("gdv5Z").default,{xcss:!ep&&k.default,as:"label",htmlFor:"diff-preview-toggle",children:(0,o.jsx)(n("iXCQx").default,{children:et(m.highlightDifferencesLabel)})})]})}),ef?null:_&&ec&&ep?h:(0,o.jsx)("div",{className:(0,n("gMc0m").default)([ee&&"_ca0q12x7"]),children:g}),eb]})}),eC=eh&&z&&(0,o.jsx)("div",{className:(0,n("gMc0m").default)(["_ca0qutpp _u5f3utpp _n3tdutpp _19bvutpp","_1tke1x2r _vchhusvi _247hidpf _txhsidpf _zu32idpf _16d6idpf"]),children:eh&&(0,o.jsx)(n("2NU90").PromptForm,{type:"interrogate",showButtons:F,autoFocus:!0,placeholder:`${ed}${ee?"...":""}`,value:U,adfValue:q,onFormSubmit:I,onInputChange:w,onADFChange:A,onInputFocus:el,focusInputRef:es,clearInputRef:K,PromptEditor:z,enableLinks:!0,fireParentActionButton:()=>{D&&(eo(!1),D[D.length-1].onClick())},focusParentActionButton:eo,showLogo:!1,onInputBlur:ei,isAIFC:ee})});return(0,o.jsx)("div",{className:(0,n("gMc0m").default)(["_zulp1b66 _1e0c1txw _2lx21bp4 _4cvr1y6m","preview-screen"]),children:(0,o.jsxs)(n("40sdH").FloatingContainer,{disablePadding:!0,"data-testid":"preview-screen",className:(0,n("gMc0m").default)(["_1e0c1txw _2lx21bp4",`preview-screen ${n("kuYGt").AI_MODAL_SCREEN_CLASS}`]),rainbowBorder:!1,isAIFC:ee,children:[(0,o.jsx)(n("6F6hl").default,{children:et(m.previewScreenLabel)}),!ee&&(0,o.jsx)(p.LatestPromptHeader,{parentPresetPromptLabel:e,childShortTitle:a,prompt:en,promptADF:c?.userADFInput,presetTitle:er,agent:W,providerFactory:H,schema:V,onEditPromptClick:P,showBack:R,onBack:j,onClose:N,isClearTitle:$}),e_,!ee&&eC,(0,o.jsx)(n("jHWjW").Footer,{brand:W?"rovo":"atlassian-intelligence",disclaimer:G,showDisclaimer:!0,showBetaLozenge:J,showFeedback:ee&&Q,feedbackForm:em,isAIFC:ee})]})})}}),i("2NU90",function(e,a){var o=n("l998X"),r=n("42omo");n("42omo");var i=(0,n("cgtv4").defineMessages)({submitLabel:{id:"fabric.editor.ai.screens.prompt.submitLabel",defaultMessage:"Submit"},submitTooltip:{id:"fabric.editor.ai.screens.prompt.submitTooltip",defaultMessage:"Send to AI"}});let l=({disabled:e,tabIndex:a,onClick:r,isAIFC:l})=>{let{formatMessage:s}=(0,n("8C5kA").default)(),d=l?t(n("4fdTR")):n("510uT").default;return(0,o.jsx)(n("3gadb").default,{content:s(i.submitTooltip),hideTooltipOnClick:!0,position:"top",children:(0,o.jsx)(n("1qfLF").default,{label:s(i.submitLabel),onClick:r,testId:"submit-icon-button",isDisabled:e,icon:d,appearance:"subtle",spacing:"compact",tabIndex:a})})};var s=(0,n("cgtv4").defineMessages)({logo:{id:"fabric.editor.ai.commandPalette.promptForm.logo",defaultMessage:"Atlassian Intelligence Logo"}});e.exports.PromptForm=({type:e="user-input",onFormSubmit:a,value:i="",showButtons:d=!0,tag:c,autoFocus:u=!0,onInputChange:p,onADFChange:g,onInputFocus:f,onInputBlur:h,placeholder:m,focusInputRef:b,clearInputRef:_,showLogo:C=!0,onInputKeyDown:v,adfValue:x,enableLinks:k,PromptEditor:E,showBack:I,onBack:T,onInputKeyUp:y,fireParentActionButton:M,focusParentActionButton:O,refinementTagRef:w,isAIFC:A})=>{let{formatMessage:S}=(0,n("8C5kA").default)(),[B,{breakpoint:P}]=(0,n("imfiV").useElementBreakpoints)(),j=(0,r.useRef)(void 0),[L,N]=(0,r.useState)(!1),[R,D]=(0,r.useState)(!1),F=(0,r.useRef)((0,n("b4emg").getEmptyADF)()),U=!!((0,n("hbEec").isEmpty)(F?.current)&&x&&(0,n("hbEec").isEmpty)(x)),q=(0,r.useCallback)(()=>{N(!0)},[]),z=(0,r.useCallback)(()=>{N(!1)},[]),K=t(r).useCallback(e=>{U&&O&&O(!0),y&&y(e)},[O,y,U]),H=t(r).useCallback(()=>{D(!1),f&&f()},[f]),V=t(r).useCallback(e=>{if((1===e.key.length||"Escape"===e.key)&&O&&O(!1),"Backspace"===e.key&&T){if(!R&&U&&w?.current){w.current.getElementsByTagName("button")[0].focus(),D(!0);return}e.stopPropagation(),U&&T()}if("Enter"===e.key&&[e.altKey,e.metaKey,e.ctrlKey].every(e=>!e)){e.stopPropagation();let t=e.target;if(L)return;if(U&&M)return void M();if(["close-button-refinement-tag","cancel-icon-button","cancel-esc-button","back-icon-button"].includes(t.getAttribute("data-testid")??""))return;e.shiftKey||(e.preventDefault(),a(i))}(0,n("dh538").fg)("editor_a11y_focus_trap_ai")?!["Enter","Backspace","Tab"].includes(e.key)&&w?.current&&w.current.contains(document.activeElement)&&document.getElementById("ak-editor-textarea")?.focus():!["Enter","Backspace"].includes(e.key)&&w?.current&&w.current.contains(document.activeElement)&&document.getElementById("ak-editor-textarea")?.focus()},[O,T,w,R,U,L,M,a,i]),G=t(r).useCallback(e=>{F.current=x??(0,n("b4emg").getEmptyADF)(),g&&g(e)},[g,x]),W=t(r).useCallback(e=>{p&&p(e)},[p]),X=t(r).useCallback(()=>{a(i)},[a,i]);return(0,o.jsxs)("div",{onKeyDown:V,onKeyUp:K,ref:B,className:(0,n("gMc0m").default)(["_16jlkb7n _1o9zkb7n _i0dlf1ug _1e0c1txw _1bah1y6m _4cvr1y6m"]),children:[C&&(0,o.jsx)("div",{className:(0,n("gMc0m").default)(["_19pk1i6y _otyr1i6y _1e0c1txw _2lx2vrvc _2hwx1b66 _4cvr1h6o _1wpz1wug",P<=n("imfiV").Breakpoint.Small&&"_1wpzynz6"]),children:(0,o.jsx)(t(n("3Mg7y")),{color:"var(--ds-icon, #292A2E)",label:S(s.logo),spacing:"spacious"})}),I&&(0,o.jsx)(n("9q1Mo").BackIconButton,{inPromptHeader:!0,stopPropagation:!0,onClick:T}),(0,o.jsxs)("div",{className:(0,n("gMc0m").default)(["_rcujidpf _o81cidpf _1l6uidpf _149midpf _1vhmkb7n _tqf3kb7n _1rnvf1ug _if291txw _2b921bp4","_zulp1b66",C&&"_ca0qv77o","_4t3i1osq","interrogate"===e&&A&&"_2rko12b0 _189ee4h9 _1h6d1l7x _1dqonqa1 _ca0qu2gc _u5f3utpp _n3tdu2gc _19bvutpp","ai-modal-prompt-form"]),"data-testid":"ai-modal-prompt-form",children:[c,(0,o.jsxs)("div",{className:(0,n("gMc0m").default)(["_11c82smr _1nmz1hna","_16jlkb7n _1o9zkb7n _i0dlf1ug _1e0c1txw",!!c&&"_ca0q1b66","_1tkeidpf"]),children:[(0,o.jsx)(n("7PdHP").PromptEditorWrapper,{PromptEditor:E,type:e,focusInputRef:b,blurInputRef:j,clearInputRef:_,autoFocus:u,defaultValue:x,onInputChange:W,onADFChange:G,placeholder:m,onFocus:H,onBlur:h,onKeyDown:v,onCompositionStart:q,onCompositionEnd:z,enableLinks:k}),d&&(0,o.jsx)("div",{className:(0,n("gMc0m").default)(["_1aaxusic _1e0c1txw _18u01b66"]),children:(0,o.jsx)(l,{disabled:!i,onClick:X,isAIFC:A})})]})]})]})}}),i("7PdHP",function(e,t){var a=n("l998X"),o=n("42omo"),r=n("dQl1W");e.exports.PromptEditorWrapper=({type:e,PromptEditor:t,defaultValue:i,autoFocus:l,focusInputRef:s,blurInputRef:d,clearInputRef:c,placeholder:u,enableLinks:p,onInputChange:g,onADFChange:f,onBlur:h,onFocus:m,onKeyDown:b,onCompositionStart:_,onCompositionEnd:C,submit:v,isAIFC:x})=>{let k=(0,o.useCallback)((e,t)=>{d&&(d.current=e),s&&(s.current=t)},[d,s]),E=(0,o.useCallback)(e=>{c&&(c.current=e)},[c]),I=(0,o.useMemo)(()=>`${u}-${(0,r.v4)()}`,[u]);return(0,a.jsx)("div",{"data-testid":"ai-experience-prompt-input",onKeyDown:b,onFocus:m,onBlur:h,onCompositionStart:_,onCompositionEnd:C,className:(0,n("gMc0m").default)(["_16jlkb7n _1o9zkb7n _i0dlf1ug _1e0c11p5 _kqswh2mm","_1hxngktf _hmumidpf _12k3idpf _q5yz1wug _dcw6idpf _2ih3idpf","_w79o1m6u _1hxn1tcg"]),children:(0,a.jsx)(t,{type:e,autoFocus:l,defaultValue:i,placeholder:u,onInputChange:g,onADFChange:f,setFocusHandlers:k,setClearHandler:E,enableLinks:p,submit:v,isAIFC:x},I)})}}),i("510uT",function(e,t){var a=n("l998X");n("42omo"),e.exports.default=()=>(0,a.jsx)("svg",{width:"14",height:"12",viewBox:"0 0 14 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{d:"M4.63477 11.2256C5.12012 11.2256 5.44141 10.8906 5.44141 10.4326C5.44141 10.1729 5.33203 9.98828 5.18164 9.83789L4.18359 8.86719L3.41113 8.24512L4.61426 8.2998H10.9102C12.4688 8.2998 13.1387 7.62988 13.1387 6.07129V2.89258C13.1387 1.33398 12.4688 0.657227 10.9102 0.657227H8.06641C7.58105 0.657227 7.21875 1.0332 7.21875 1.49121C7.21875 1.95605 7.58105 2.33203 8.06641 2.33203H10.835C11.3135 2.33203 11.5049 2.5166 11.5049 3.00195V5.96191C11.5049 6.44043 11.3135 6.63184 10.835 6.63184H4.61426L3.41113 6.68652L4.18359 6.06445L5.18164 5.10059C5.33203 4.94336 5.44141 4.76562 5.44141 4.50586C5.44141 4.04785 5.12012 3.70605 4.63477 3.70605C4.42285 3.70605 4.19727 3.80176 4.0332 3.96582L1.10742 6.85059C0.950195 7.00781 0.861328 7.24023 0.861328 7.46582C0.861328 7.69141 0.950195 7.93066 1.10742 8.08105L4.0332 10.9658C4.19727 11.1367 4.42285 11.2256 4.63477 11.2256Z",fill:"currentColor"})})}),i("87Gms",function(e,t){var a=n("l998X");n("42omo");let o={scrollContainer:"_c71lnklw _18m91wug"};e.exports.ToolbarNestedDropdownMenu=({elemBefore:e,text:t,elemAfter:r,children:i,isDisabled:l,testId:s,dropdownTestId:d,enableMaxHeight:c=!1,onClick:u,shouldFitContainer:p=!1})=>(0,a.jsx)(n("52EPl").default,{shouldFitContainer:p,placement:"right-start",testId:d,trigger:o=>(0,a.jsx)(n("2GVu1").ToolbarDropdownItem,{elemBefore:e,elemAfter:r,isSelected:o.isSelected,onClick:e=>{u&&u(e),o.onClick&&o.onClick(e)},testId:s,triggerRef:o.triggerRef,hasNestedDropdownMenu:!0,isDisabled:l,children:t}),children:(0,a.jsx)(n("gdv5Z").default,{xcss:(0,n("1bHXt").cx)(c&&o.scrollContainer),children:i})})}),i("dMzWS",function(e,t){var a=n("42omo");e.exports.useElementSize=function(){let[e,t]=(0,a.useState)(null),[o,r]=(0,a.useState)(0),[n,i]=(0,a.useState)(0);return(0,a.useEffect)(()=>{if(!e)return;let t=new ResizeObserver(()=>{let{width:t,height:a}=e.getBoundingClientRect();r(t),i(a)});return t.observe(e),()=>{t.disconnect()}},[e]),(0,a.useMemo)(()=>[t,{width:o,height:n}],[o,n])}}),i("9q1Mo",function(e,a){var o=n("l998X"),r=n("42omo");let i={default:"_1e0c116y _2hwx1b66"},l={position:"top"};e.exports.BackIconButton=({inPromptHeader:e,isDisabled:a=!1,stopPropagation:s,onClick:d})=>{let{formatMessage:c}=(0,n("8C5kA").default)(),u=(0,r.useCallback)(e=>{s&&e.stopPropagation(),d?.()},[s,d]),p=(0,o.jsx)(n("1qfLF").default,{isDisabled:a,appearance:"subtle",icon:e=>(0,o.jsx)(t(n("laHi9")),{label:e.label,testId:e.testId,size:"small"}),label:c(n("aYaJs").default.backLabel),spacing:"compact",isTooltipDisabled:a,onClick:u,testId:"back-icon-button",tooltip:l});return e?(0,o.jsx)(n("1s5hv").default,{xcss:i.default,children:p}):p}}),i("aYaJs",function(t,a){e(t.exports,"default",()=>o);var o=(0,n("cgtv4").defineMessages)({backLabel:{id:"fabric.editor.ai.components.backIconButton.backLabel",defaultMessage:"Back"}})}),a.rlb("6rkrn");
//# sourceMappingURL=FullPageEditorComponent.5eff9713.js.map
