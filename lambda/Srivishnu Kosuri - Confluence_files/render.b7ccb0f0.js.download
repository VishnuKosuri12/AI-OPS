var e=globalThis;function t(e,t,n,s){Object.defineProperty(e,t,{get:n,set:s,enumerable:!0,configurable:!0})}function n(e){Object.defineProperty(e,"__esModule",{value:!0,configurable:!0})}var s=e.parcelRequired477,r=s.register;r("957Zh",function(e,t){var n=s("l998X");let r=()=>e=>t=>{let r=e(t);return null===r?null:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s("crDNP").MessageViewed,{}),r]})},a=()=>e=>t=>e(t),o=()=>e=>(t,n,s)=>e(t,n,s),i=(e,t)=>(n,s,r)=>({...e({...t?.requestContext??{}},s,r),...t?.additionalRenderProps??{}}),c=()=>(e,t)=>i(e,t),d=()=>e=>t=>{try{e(t)}catch(e){throw e instanceof Error?e:Error("string"==typeof e?e:"Unknown validation error")}return t};e.exports.createServerPipeline=()=>({createHydrate:o(),createHydrateExample:c(),createTransformMetadata:a()}),e.exports.createClientPipeline=()=>({createValidate:d(),createRender:r()})}),r("crDNP",function(e,t){var n=s("l998X"),r=s("gVWoV"),a=s("jVJ5P"),o=s("42omo"),i=c(s("cQglR"));function c(e){return e&&e.__esModule?e:{default:e}}i.default,c(s("fvKTt")).default,i.default,e.exports.ManualMessageViewedEvent=({children:e})=>{let{fireMessageViewedInMessageComponent:t,setFireMessageViewedInMessageComponent:r}=(0,s("aEUWC").useMessageAnalyticsContext)();return t&&r(!0),(0,n.jsx)(n.Fragment,{children:e})},e.exports.MessageViewed=()=>{let{fireMessageViewedInMessageComponent:e}=(0,s("aEUWC").useMessageAnalyticsContext)(),{messageViewed:t}=(0,a.useMessageEvent)(),{messageInstanceViewed:i,messageInstanceDeliveredSuccessfully:c}=(0,r.useMessageInstanceEvent)(),d=(0,o.useRef)(!1);(0,o.useEffect)(()=>{d.current||(d.current=!0,c())},[c]);let l=(0,o.useCallback)(()=>{e&&!e.current&&(t(),i())},[]);return(0,n.jsx)(s("fUB5z").TrackMount,{onMount:l})}}),r("gVWoV",function(e,t){var n=s("42omo");class r extends Error{constructor(){super("useMessageInstanceEvent must be used inside a Message template render component.")}}"undefined"==typeof fetch&&s("1IQCv");class a{async sendMessageInstanceEvent(e){this.batchEvents.push(e),null===this.scheduledTimeout&&(this.scheduledTimeout=globalThis.window.setTimeout(this.flushBatchEvents.bind(this),1e3))}async sendEventsToBackend(e){let t=`${this.endpointUrl}`,n=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});n.ok||console.error(`Failed to send event to analytics endpoint: ${n.statusText}`)}async flushBatchEvents(){if(0!==this.batchEvents.length){if(this.batchEvents.length>30){let e=this.batchEvents.slice(0,30);await this.sendEventsToBackend(e),null!==this.scheduledTimeout&&globalThis.window.clearTimeout(this.scheduledTimeout),this.batchEvents=this.batchEvents.slice(30,this.batchEvents.length),this.scheduledTimeout=globalThis.window.setTimeout(this.flushBatchEvents.bind(this),1e3);return}await this.sendEventsToBackend(this.batchEvents),this.batchEvents=[],null!==this.scheduledTimeout&&(globalThis.window.clearTimeout(this.scheduledTimeout),this.scheduledTimeout=null)}}constructor(){this.endpointUrl="/gateway/api/post-office/api/v1/message-instance-event/bulk",this.scheduledTimeout=null,this.batchEvents=[]}}e.exports.useMessageInstanceEvent=()=>{globalThis.window.postOfficeMessageInstanceEventClient||(globalThis.window.postOfficeMessageInstanceEventClient=new a);let e=globalThis.window.postOfficeMessageInstanceEventClient,{messageInstanceId:t,messageTemplateId:o,transactionAccountId:i=null,triggerId:c,messageCreationType:d,journeyId:l,journeyTriggerId:u,analyticsDetails:h=null}=(0,s("3Shv6").useMessageContext)(),{placementId:f}=(0,s("8Bzrf").usePlacementContext)(),p=(0,s("PAiZW").usePostOfficeContext)(),m=(0,s("hyvHs").useRecommendationContext)(),y=(0,n.useCallback)(async n=>{if(!t||!o||!f||!d||!c)return void console.error(new r);let s={messageEventType:"deliverySuccessful",messageInstanceId:t,messageTemplateId:o,deliveryChannel:"in-app",placementId:f,channelType:"pull",context:{...p,source:f,recommendation:{recommendationSessionId:m.sessionId??"",recommendationEntityId:m.entityId??""}},additionalMetadataFromFrontend:{transactionAccountId:i,...n,...h},messageTriggerId:c,journeyId:l,journeyTriggerId:u,messageCreationType:d,timestamp:Date.now()};await e.sendMessageInstanceEvent(s)},[e,p,t,o,f,d,c,i,h,m.entityId,m.sessionId,l,u]);return{messageInstanceDeliveredSuccessfully:y,messageInstanceViewed:(0,n.useCallback)(async n=>{if(!t||!o||!f||!d||!c)return void console.error(new r);let s={messageEventType:"viewed",messageInstanceId:t,messageTemplateId:o,deliveryChannel:"in-app",placementId:f,channelType:"pull",context:{...p,source:f,recommendation:{recommendationSessionId:m.sessionId??"",recommendationEntityId:m.entityId??""}},additionalMetadataFromFrontend:{transactionAccountId:i,...n,...h},messageTriggerId:c,journeyId:l,journeyTriggerId:u,messageCreationType:d,timestamp:Date.now()};await e.sendMessageInstanceEvent(s)},[e,p,t,o,f,d,c,i,h,m.entityId,m.sessionId,l,u]),messageInstanceClicked:(0,n.useCallback)(async n=>{if(!t&&!n.messageInstanceId||!o&&!n.messageTemplateId||!f||!d&&!n.messageCreationType||!c&&!n.messageTriggerId)return void console.error(new r);let s={messageInstanceId:n.messageInstanceId??t,messageTemplateId:n.messageTemplateId??o,deliveryChannel:"in-app",placementId:f,channelType:"pull",context:{...p,source:f,recommendation:{recommendationSessionId:m.sessionId??"",recommendationEntityId:m.entityId??""}},messageCreationType:n.messageCreationType??d,messageTriggerId:n.messageTriggerId??c,journeyId:l,journeyTriggerId:u,...n,additionalMetadataFromFrontend:{transactionAccountId:i,...n.additionalMetadataFromFrontend,...h},timestamp:Date.now()};await e.sendMessageInstanceEvent(s)},[e,p,t,o,f,d,c,i,h,m.entityId,m.sessionId,l,u])}}}),r("1IQCv",function(n,s){t(n.exports,"DOMException",()=>T);var r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==e&&e||{},a={searchParams:"URLSearchParams"in r,iterable:"Symbol"in r&&"iterator"in Symbol,blob:"FileReader"in r&&"Blob"in r&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in r,arrayBuffer:"ArrayBuffer"in r};if(a.arrayBuffer)var o=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],i=ArrayBuffer.isView||function(e){return e&&o.indexOf(Object.prototype.toString.call(e))>-1};function c(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function d(e){return"string"!=typeof e&&(e=String(e)),e}function l(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return a.iterable&&(t[Symbol.iterator]=function(){return t}),t}function u(e){this.map={},e instanceof u?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){if(2!=e.length)throw TypeError("Headers constructor: expected name/value pair to be length 2, found"+e.length);this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function h(e){if(!e._noBody){if(e.bodyUsed)return Promise.reject(TypeError("Already read"));e.bodyUsed=!0}}function f(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function p(e){var t=new FileReader,n=f(t);return t.readAsArrayBuffer(e),n}function m(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(e){if(this.bodyUsed=this.bodyUsed,this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(a.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(a.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(a.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else{var t;a.arrayBuffer&&a.blob&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=m(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||i(e))?this._bodyArrayBuffer=m(e):this._bodyText=e=Object.prototype.toString.call(e)}else this._noBody=!0,this._bodyText="";!this.headers.get("content-type")&&("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):a.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a.blob&&(this.blob=function(){var e=h(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(!this._bodyFormData)return Promise.resolve(new Blob([this._bodyText]));throw Error("could not read FormData body as blob")}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=h(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}if(a.blob)return this.blob().then(p);throw Error("could not read as ArrayBuffer")},this.text=function(){var e,t,n,s,r,a=h(this);if(a)return a;if(this._bodyBlob)return e=this._bodyBlob,n=f(t=new FileReader),r=(s=/charset=([A-Za-z0-9_-]+)/.exec(e.type))?s[1]:"utf-8",t.readAsText(e,r),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=Array(t.length),s=0;s<t.length;s++)n[s]=String.fromCharCode(t[s]);return n.join("")}(this._bodyArrayBuffer));if(!this._bodyFormData)return Promise.resolve(this._bodyText);throw Error("could not read FormData body as text")},a.formData&&(this.formData=function(){return this.text().then(v)}),this.json=function(){return this.text().then(JSON.parse)},this}u.prototype.append=function(e,t){e=c(e),t=d(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},u.prototype.delete=function(e){delete this.map[c(e)]},u.prototype.get=function(e){return e=c(e),this.has(e)?this.map[e]:null},u.prototype.has=function(e){return this.map.hasOwnProperty(c(e))},u.prototype.set=function(e,t){this.map[c(e)]=d(t)},u.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},u.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),l(e)},u.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),l(e)},u.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),l(e)},a.iterable&&(u.prototype[Symbol.iterator]=u.prototype.entries);var g=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function b(e,t){if(!(this instanceof b))throw TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var n,s,a=(t=t||{}).body;if(e instanceof b){if(e.bodyUsed)throw TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new u(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,a||null==e._bodyInit||(a=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",(t.headers||!this.headers)&&(this.headers=new u(t.headers)),this.method=(s=(n=t.method||this.method||"GET").toUpperCase(),g.indexOf(s)>-1?s:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal||function(){if("AbortController"in r)return new AbortController().signal}(),this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&a)throw TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(a),("GET"===this.method||"HEAD"===this.method)&&("no-store"===t.cache||"no-cache"===t.cache)){var o=/([?&])_=[^&]*/;o.test(this.url)?this.url=this.url.replace(o,"$1_="+new Date().getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+new Date().getTime()}}function v(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),s=n.shift().replace(/\+/g," "),r=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(s),decodeURIComponent(r))}}),t}function w(e,t){if(!(this instanceof w))throw TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.status<200||this.status>599)throw RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new u(t.headers),this.url=t.url||"",this._initBody(e)}b.prototype.clone=function(){return new b(this,{body:this._bodyInit})},y.call(b.prototype),y.call(w.prototype),w.prototype.clone=function(){return new w(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new u(this.headers),url:this.url})},w.error=function(){var e=new w(null,{status:200,statusText:""});return e.ok=!1,e.status=0,e.type="error",e};var I=[301,302,303,307,308];w.redirect=function(e,t){if(-1===I.indexOf(t))throw RangeError("Invalid status code");return new w(null,{status:t,headers:{location:e}})};var T=r.DOMException;try{new T}catch(e){(T=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack}).prototype=Object.create(Error.prototype),T.prototype.constructor=T}function E(e,t){return new Promise(function(n,s){var o=new b(e,t);if(o.signal&&o.signal.aborted)return s(new T("Aborted","AbortError"));var i=new XMLHttpRequest;function l(){i.abort()}if(i.onload=function(){var e,t,s={statusText:i.statusText,headers:(e=i.getAllResponseHeaders()||"",t=new u,e.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e}).forEach(function(e){var n=e.split(":"),s=n.shift().trim();if(s){var r=n.join(":").trim();try{t.append(s,r)}catch(e){console.warn("Response "+e.message)}}}),t)};0===o.url.indexOf("file://")&&(i.status<200||i.status>599)?s.status=200:s.status=i.status,s.url="responseURL"in i?i.responseURL:s.headers.get("X-Request-URL");var r="response"in i?i.response:i.responseText;setTimeout(function(){n(new w(r,s))},0)},i.onerror=function(){setTimeout(function(){s(TypeError("Network request failed"))},0)},i.ontimeout=function(){setTimeout(function(){s(TypeError("Network request timed out"))},0)},i.onabort=function(){setTimeout(function(){s(new T("Aborted","AbortError"))},0)},i.open(o.method,function(e){try{return""===e&&r.location.href?r.location.href:e}catch(t){return e}}(o.url),!0),"include"===o.credentials?i.withCredentials=!0:"omit"===o.credentials&&(i.withCredentials=!1),"responseType"in i&&(a.blob?i.responseType="blob":a.arrayBuffer&&(i.responseType="arraybuffer")),t&&"object"==typeof t.headers&&!(t.headers instanceof u||r.Headers&&t.headers instanceof r.Headers)){var h=[];Object.getOwnPropertyNames(t.headers).forEach(function(e){h.push(c(e)),i.setRequestHeader(e,d(t.headers[e]))}),o.headers.forEach(function(e,t){-1===h.indexOf(t)&&i.setRequestHeader(t,e)})}else o.headers.forEach(function(e,t){i.setRequestHeader(t,e)});o.signal&&(o.signal.addEventListener("abort",l),i.onreadystatechange=function(){4===i.readyState&&o.signal.removeEventListener("abort",l)}),i.send(void 0===o._bodyInit?null:o._bodyInit)})}E.polyfill=!0,r.fetch||(r.fetch=E,r.Headers=u,r.Request=b,r.Response=w),n.exports.Headers=u,n.exports.Request=b,n.exports.Response=w,n.exports.fetch=E}),r("jVJ5P",function(e,t){var n,r=s("42omo");class a extends Error{constructor(){super("useMessageLifecycle must be used inside a Message template render component.")}}class o extends Error{constructor(){super("API call to /messages failed due to an error")}}"undefined"==typeof fetch&&s("1IQCv");class i{async sendEvent(e){let t=`${this.endpointUrl}`,n=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});n.ok||console.error(`Failed to send event to analytics endpoint: ${n.statusText}`)}batchSendEvent(e){this.batchEvents.push(e),null===this.scheduledTimeout&&(this.scheduledTimeout=globalThis.window.setTimeout(this.flushBatchEvents.bind(this),1e3))}async markAllAsReadEvent(e){this.batchEvents.push(...e),await this.flushBatchEvents()}async sendMessageEvents(e){let t=`${this.endpointUrl}/bulk`,n=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});n.ok||console.error(`Failed to send batch events to analytics endpoint: ${n.statusText}`)}async flushBatchEvents(){if(0!==this.batchEvents.length){if(this.batchEvents.length>250){let e=this.batchEvents.slice(0,250);await this.sendMessageEvents(e),null!==this.scheduledTimeout&&globalThis.window.clearTimeout(this.scheduledTimeout),this.batchEvents=this.batchEvents.slice(250,this.batchEvents.length),this.scheduledTimeout=globalThis.window.setTimeout(this.flushBatchEvents.bind(this),1e3);return}await this.sendMessageEvents(this.batchEvents),this.batchEvents=[],null!==this.scheduledTimeout&&(globalThis.window.clearTimeout(this.scheduledTimeout),this.scheduledTimeout=null)}}constructor(){this.endpointUrl="/gateway/api/post-office/api/v1/messages/lifecycle",this.scheduledTimeout=null,this.batchEvents=[]}}var c=((n={}).Viewed="viewed",n.Acknowledged="acknowledged",n.Clicked="clicked",n.ClickedSecondary="clickedSecondary",n.Dismissed="dismissed",n.Snoozed="snoozed",n.Read="read",n.Unread="unread",n);e.exports.useMessageEvent=()=>{globalThis.window.postOfficeMessageEventClient||(globalThis.window.postOfficeMessageEventClient=new i);let e=globalThis.window.postOfficeMessageEventClient,{dismissMessageFromPlacement:t,markReadFromPlacement:n,markClickedFromPlacement:d,markViewedFromPlacement:l,snoozeMessageFromPlacement:u}=(0,s("cpPWT").useMessagePlacementHooks)(),{messageInstanceId:h,messageTemplateId:f,transactionAccountId:p,analyticsDetails:m}=(0,s("3Shv6").useMessageContext)(),{placementId:y}=(0,s("8Bzrf").usePlacementContext)(),g={browser:(0,s("PAiZW").usePostOfficeContext)(),recommendation:(0,s("hyvHs").useRecommendationContext)()},b=(0,r.useCallback)(async t=>{let n=t.map(e=>{let{messageInstanceId:t,messageTemplateId:n}=e;if(!t||!n||!y)throw new a;return{messageInstanceId:e.messageInstanceId,messageTemplateId:e.messageTemplateId,type:c.Read,placement:y,createdAt:Date.now(),analyticsDetails:m,context:g}});try{await e.markAllAsReadEvent(n)}catch(e){throw new o}},[e,y,m,g]),v=(0,r.useCallback)(async()=>{if(!h||!f||!y)throw new a;n({messageInstanceId:h});try{await e.sendEvent({messageInstanceId:h,messageTemplateId:f,type:c.Read,placement:y,createdAt:Date.now(),analyticsDetails:m,context:g})}catch(e){throw new o}},[e,h,f,y,m,g,n]),w=(0,r.useCallback)(async()=>{if(!h||!f||!y)throw new a;try{await e.sendEvent({messageInstanceId:h,messageTemplateId:f,type:c.Unread,placement:y,createdAt:Date.now(),context:g,analyticsDetails:m})}catch(e){throw new o}},[h,f,y,m,g]),I=(0,r.useCallback)(async()=>{if(!h||!f||!y)throw new a;l({messageInstanceId:h}),e.batchSendEvent({messageInstanceId:h,messageTemplateId:f,transactionAccountId:p,type:c.Viewed,placement:y,createdAt:Date.now(),analyticsDetails:m,context:g})},[e,h,f,y,m,g,p,l]),T=(0,r.useCallback)(async()=>{if(!h||!f||!y)throw new a;d({messageInstanceId:h}),e.batchSendEvent({messageInstanceId:h,messageTemplateId:f,transactionAccountId:p,type:c.Clicked,placement:y,createdAt:Date.now(),analyticsDetails:m,context:g})},[e,h,f,y,m,g,p,d]),E=(0,r.useCallback)(async()=>{if(!h||!f||!y)throw new a;e.batchSendEvent({messageInstanceId:h,messageTemplateId:f,transactionAccountId:p,type:c.ClickedSecondary,placement:y,createdAt:Date.now(),analyticsDetails:m,context:g})},[e,h,f,y,m,g,p]),x=(0,r.useCallback)(async()=>{if(!h||!f||!y)throw new a;e.batchSendEvent({messageInstanceId:h,messageTemplateId:f,transactionAccountId:p,type:c.Acknowledged,placement:y,createdAt:Date.now(),analyticsDetails:m,context:g})},[e,h,f,y,m,g,p]);return{markAllAsRead:b,messageRead:v,messageUnread:w,messageViewed:I,messageClicked:T,messageClickedSecondary:E,messageAcknowledged:x,messageDismissed:(0,r.useCallback)(async()=>{if(!h||!f||!y)throw new a;t({messageInstanceId:h}),e.batchSendEvent({messageInstanceId:h,messageTemplateId:f,transactionAccountId:p,type:c.Dismissed,placement:y,createdAt:Date.now(),analyticsDetails:m,context:g})},[e,h,f,y,m,g,p,t]),messageSnoozed:(0,r.useCallback)(async t=>{if(!h||!f||!y)throw new a;u({messageInstanceId:h});let n=Date.now()+864e5*t;e.batchSendEvent({messageInstanceId:h,messageTemplateId:f,transactionAccountId:p,type:c.Snoozed,placement:y,createdAt:Date.now(),statusExpiryTime:n,analyticsDetails:m,context:g})},[e,h,f,y,m,g,p,u])}}}),r("cQglR",function(e,r){n(e.exports),t(e.exports,"__esModule",()=>a,e=>a=e),t(e.exports,"default",()=>o,e=>o=e);var a=!0,o=void 0,i=s("42omo"),c=f(s("56GFp")),d=f(s("fvKTt")),l=s("jC1t2"),u=s("l998X"),h=["onEnterViewport","onLeaveViewport"];function f(e){return e&&e.__esModule?e:{default:e}}function p(){return(p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e}).apply(null,arguments)}o=function(e,t,n){void 0===t&&(t=l.defaultOptions),void 0===n&&(n=l.defaultConfig);var s=(0,i.forwardRef)((t,n)=>(0,u.jsx)(e,p({},t,{forwardedRef:n}))),r=e=>{var{onEnterViewport:r=l.noop,onLeaveViewport:a=l.noop}=e,o=function(e,t){if(null==e)return{};var n={};for(var s in e)if(({}).hasOwnProperty.call(e,s)){if(t.includes(s))continue;n[s]=e[s]}return n}(e,h),c=(0,i.useRef)(null),{inViewport:f,enterCount:m,leaveCount:y}=(0,d.default)(c,t,n,{onEnterViewport:r,onLeaveViewport:a}),g=p({},o,{inViewport:f,enterCount:m,leaveCount:y});return(0,u.jsx)(s,p({},g,{ref:c}))};return r.displayName="handleViewport("+(e.displayName||e.name||"Component")+")",(0,c.default)(r,s)}}),r("fvKTt",function(e,r){n(e.exports),t(e.exports,"__esModule",()=>a,e=>a=e),t(e.exports,"default",()=>o,e=>o=e);var a=!0,o=void 0,i=s("42omo"),c=s("jC1t2"),d={attributes:!0,childList:!0,subtree:!0};o=function(e,t,n,s){void 0===t&&(t=c.defaultOptions),void 0===n&&(n=c.defaultConfig),void 0===s&&(s=c.defaultProps);var{onEnterViewport:r,onLeaveViewport:a}=s,[,o]=(0,i.useState)(),l=(0,i.useRef)(),u=(0,i.useRef)(!1),h=(0,i.useRef)(!1),f=(0,i.useRef)(0),p=(0,i.useRef)(0),[m,y]=(0,i.useState)(!!e.current),g=e=>{var{isIntersecting:t,intersectionRatio:s}=e[0]||{},i=void 0!==t?t:s>0;if(!h.current&&i){h.current=!0,null==r||r(),f.current+=1,u.current=i,o(i);return}h.current&&!i&&(h.current=!1,null==a||a(),n.disconnectOnLeave&&l.current&&l.current.disconnect(),p.current+=1,u.current=i,o(i))};return(0,i.useEffect)(()=>{var n=l.current;return!function(t){var{observerRef:n}=t,s=e.current;s&&s&&(null==n||n.observe(s))}({observerRef:n=function(e){var{observerRef:n}=e;return n||(l.current=new IntersectionObserver(g,t),l.current)}({observerRef:n})}),()=>{!function(t){var{observerRef:n}=t,s=e.current;s&&s&&(null==n||n.unobserve(s)),null==n||n.disconnect(),l.current=null}({observerRef:n})}},[e.current,t,n,r,a]),(0,i.useEffect)(()=>{var t=e.current,n=null;return t?y(!0):(n=new MutationObserver(()=>{e.current&&!m&&(y(!0),n&&n.disconnect())})).observe(document.body,d),()=>{n&&n.disconnect()}},[e.current]),{inViewport:u.current,enterCount:f.current,leaveCount:p.current}}}),r("jC1t2",function(e,n){t(e.exports,"noop",()=>r,e=>r=e),t(e.exports,"defaultProps",()=>s,e=>s=e),t(e.exports,"defaultOptions",()=>a,e=>a=e),t(e.exports,"defaultConfig",()=>o,e=>o=e);var s,r=s=a=o=void 0,a={},o={disconnectOnLeave:!1},i=()=>{};r=i,s={onEnterViewport:i,onLeaveViewport:i}});
//# sourceMappingURL=render.b7ccb0f0.js.map
