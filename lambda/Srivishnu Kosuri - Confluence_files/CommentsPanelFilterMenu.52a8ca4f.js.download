function e(e){return e&&e.__esModule?e.default:e}var r=globalThis.parcelRequired477,o=r.register;o("a6t12",function(o,l){var t=r("3u0dr"),i=r("frIzR"),a=r("42omo"),s=r("T1bCI"),n=r("5XsiK"),u=r("6OL2O"),d=r("dD7ks"),f=r("gj42z");let c=(0,r("cgtv4").defineMessages)({viewProfile:{id:"profile.card.viewProfile",defaultMessage:"View profile"}}),g=({push:o,userId:l})=>({label:e(a).createElement(r("gtD4K").default,c.viewProfile),id:"view-profile",callback:()=>(0,r("4qzKl").getAtlassianPeopleProfileUrlAsync)(l).then(o),shouldRender:e=>!!e&&e.status&&"inactive"!==e.status,link:(0,r("4qzKl").getAtlassianPeopleProfileUrl)(l,"",r("jlIaF").CONTEXT_PATH)}),p=({navigate:o,url:l})=>({label:e(a).createElement(r("gtD4K").default,c.viewProfile),id:"view-profile",callback:o,shouldRender:e=>!!e&&e.status&&"inactive"!==e.status,link:l}),w=({loggedInUserId:o,getToggleFollowUser:l,renderFeedFollow:t,userId:i,followedUsers:s})=>{let n=!!(i&&s?.includes(i));return{label:e(a).createElement(r("bedVD").FeedFollow,{followed:n}),id:"feed-follow-user",callback:l(i,n,"profileCard"),shouldRender:e=>t&&!!i&&i!==o&&e?.status==="active"}},E=(0,t.isReactCompilerActiveV1)()?o=>{let l,t,c,E,F,b,C,I,T,P=(0,i.c)(44),{position:A,userId:y,isAnonymous:U,canViewProfile:v,children:S,trigger:h,fullName:R,disabledAriaAttributes:D,onVisibilityChange:N,offset:_,ariaLabel:M}=o,j=void 0===A?"bottom-start":A,L=void 0===h?"hover":h,{push:q}=(0,r("dPJCf").useRouteActions)(),{canViewUserProfile:k}=(0,r("jyPfN").useViewUserProfile)(),{userId:x,cloudId:V,featureFlags:z,orgId:Q}=(0,r("bQm3c").useSessionData)(),{createAnalyticsEvent:O}=(0,r("inPa6").useAnalyticsEvents)();P[0]===Symbol.for("react.memo_cache_sentinel")?(l={type:"LANDING"},P[0]=l):l=P[0];let K=(0,d.useNavigateToTeamsApp)(l);P[1]!==Q?(t=e=>(0,u.getNavigateToTeamsApp)(Q||"",{type:"USER",payload:{userId:e}}),P[1]=Q,P[2]=t):t=P[2];let Y=t,X=y||"";P[3]!==X?(c={type:"USER",payload:{userId:X}},P[3]=X,P[4]=c):c=P[4];let $=(0,d.useNavigateToTeamsApp)(c);P[5]!==K?(E=(0,n.isTeamsAppEnabled)()?K.href:`${r("jlIaF").CONTEXT_PATH}/people`,P[5]=K,P[6]=E):E=P[6];let G=E,[H,J]=(0,a.useState)(!1),{feedConfigError:W,followedUsers:Z,getToggleFollowUser:B,mutationError:ee,renderFeedFollow:er}=(0,r("4GlQ9").useFeedFollow)();P[7]!==q||P[8]!==y||P[9]!==$?(F=(0,n.isTeamsAppEnabled)()?p({navigate:$.onNavigate,url:$.href}):g({push:q,userId:y}),P[7]=q,P[8]=y,P[9]=$,P[10]=F):F=P[10];let eo=F;P[11]!==Z||P[12]!==B||P[13]!==x||P[14]!==er||P[15]!==y?(b=w({loggedInUserId:x,getToggleFollowUser:B,renderFeedFollow:er,userId:y,followedUsers:Z}),P[11]=Z,P[12]=B,P[13]=x,P[14]=er,P[15]=y,P[16]=b):b=P[16];let el=b;if(void 0!==U&&U||!(void 0===v||v)||!y||!x||!k){let r;return P[17]!==S?(r=e(a).createElement(e(a).Fragment,null,S),P[17]=S,P[18]=r):r=P[18],r}P[19]!==O||P[20]!==Y||P[21]!==q?(C=e=>{if(O({type:"sendUIEvent",data:{source:"profileCardWrapper",action:"clicked",actionSubject:"viewProfile",actionSubjectId:"userProfileCard",attributes:{clickTarget:"userReportingLine"}}}).fire(),(0,n.isTeamsAppEnabled)())return Y(e).onNavigate(),!1;window.self!==window.top?window.open((0,r("4qzKl").getAtlassianPeopleProfileUrl)(e,"",r("jlIaF").CONTEXT_PATH),"_blank","noreferrer"):(0,r("4qzKl").getAtlassianPeopleProfileUrlAsync)(e).then(q,m)},P[19]=O,P[20]=Y,P[21]=q,P[22]=C):C=P[22];let et=C;return P[23]===Symbol.for("react.memo_cache_sentinel")?(I=[r("gqqjz").FlagsStateContainer],P[23]=I):I=P[23],P[24]!==M||P[25]!==S||P[26]!==V||P[27]!==D||P[28]!==z||P[29]!==W||P[30]!==el||P[31]!==R||P[32]!==H||P[33]!==x||P[34]!==ee||P[35]!==_||P[36]!==N||P[37]!==j||P[38]!==et||P[39]!==G||P[40]!==L||P[41]!==y||P[42]!==eo?(T=e(a).createElement(s.Subscribe,{to:I},o=>e(a).createElement(a.Fragment,null,e(a).createElement(f.FeedFollowErrorDisplay,{feedConfigError:W,mutationError:ee,showErrorFlag:!0}),e(a).createElement(r("8j9VY").default,{cloudId:V,userId:y,resourceClient:(0,r("bumSD").getProfileClient)(V,z),position:j,trigger:L,actions:[eo,el],reportingLinesProfileUrl:G,onReportingLinesClick:e=>et(e.accountIdentifier),addFlag:e=>o.showFlag(e),prepopulatedData:{fullName:R},disabledAriaAttributes:D,isVisible:(0,r("9wGTI").fg)("fix_profilecard_trigger_isvisible")?void 0:H,onVisibilityChange:N||(e=>{J(e)}),offset:_,testId:"profileCardTrigger",viewingUserId:x,ariaLabel:M},S))),P[24]=M,P[25]=S,P[26]=V,P[27]=D,P[28]=z,P[29]=W,P[30]=el,P[31]=R,P[32]=H,P[33]=x,P[34]=ee,P[35]=_,P[36]=N,P[37]=j,P[38]=et,P[39]=G,P[40]=L,P[41]=y,P[42]=eo,P[43]=T):T=P[43],T}:({position:o="bottom-start",userId:l,isAnonymous:t=!1,canViewProfile:i=!0,children:c,trigger:E="hover",fullName:m,disabledAriaAttributes:F,onVisibilityChange:b,offset:C,ariaLabel:I})=>{let{push:T}=(0,r("dPJCf").useRouteActions)(),{canViewUserProfile:P}=(0,r("jyPfN").useViewUserProfile)(),{userId:A,cloudId:y,featureFlags:U,orgId:v}=(0,r("bQm3c").useSessionData)(),{createAnalyticsEvent:S}=(0,r("inPa6").useAnalyticsEvents)(),h=(0,d.useNavigateToTeamsApp)({type:"LANDING"}),R=e=>(0,u.getNavigateToTeamsApp)(v||"",{type:"USER",payload:{userId:e}}),D=(0,d.useNavigateToTeamsApp)({type:"USER",payload:{userId:l||""}}),N=(0,n.isTeamsAppEnabled)()?h.href:`${r("jlIaF").CONTEXT_PATH}/people`,[_,M]=(0,a.useState)(!1),{feedConfigError:j,followedUsers:L,getToggleFollowUser:q,mutationError:k,renderFeedFollow:x}=(0,r("4GlQ9").useFeedFollow)(),V=(0,a.useMemo)(()=>(0,n.isTeamsAppEnabled)()?p({navigate:D.onNavigate,url:D.href}):g({push:T,userId:l}),[T,l,D]),z=(0,a.useMemo)(()=>w({loggedInUserId:A,getToggleFollowUser:q,renderFeedFollow:x,userId:l,followedUsers:L}),[A,q,x,l,L]);if(t||!i||!l||!A||!P)return e(a).createElement(e(a).Fragment,null,c);let Q=e=>{if(S({type:"sendUIEvent",data:{source:"profileCardWrapper",action:"clicked",actionSubject:"viewProfile",actionSubjectId:"userProfileCard",attributes:{clickTarget:"userReportingLine"}}}).fire(),(0,n.isTeamsAppEnabled)())return R(e).onNavigate(),!1;window.self!==window.top?window.open((0,r("4qzKl").getAtlassianPeopleProfileUrl)(e,"",r("jlIaF").CONTEXT_PATH),"_blank","noreferrer"):(0,r("4qzKl").getAtlassianPeopleProfileUrlAsync)(e).then(T,()=>{})};return e(a).createElement(s.Subscribe,{to:[r("gqqjz").FlagsStateContainer]},t=>e(a).createElement(a.Fragment,null,e(a).createElement(f.FeedFollowErrorDisplay,{feedConfigError:j,mutationError:k,showErrorFlag:!0}),e(a).createElement(r("8j9VY").default,{cloudId:y,userId:l,resourceClient:(0,r("bumSD").getProfileClient)(y,U),position:o,trigger:E,actions:[V,z],reportingLinesProfileUrl:N,onReportingLinesClick:e=>Q(e.accountIdentifier),addFlag:e=>t.showFlag(e),prepopulatedData:{fullName:m},disabledAriaAttributes:F,isVisible:(0,r("9wGTI").fg)("fix_profilecard_trigger_isvisible")?void 0:_,onVisibilityChange:b||(e=>{M(e)}),offset:C,testId:"profileCardTrigger",viewingUserId:A,ariaLabel:I},c)))};function m(){}o.exports.ProfileCardWrapper=E}),o("jyPfN",function(e,o){e.exports.useViewUserProfile=()=>{let{isExternalCollaborator:e}=(0,r("foQ4a").useIsExternalCollaborator)();return{canViewUserProfile:!e}}}),o("bedVD",function(o,l){var t=r("3u0dr"),i=r("frIzR"),a=r("42omo");let s=(0,r("cgtv4").defineMessages)({follow:{id:"profile.card.follow",defaultMessage:"Follow"},unfollow:{id:"profile.card.unfollow",defaultMessage:"Unfollow"},followTooltip:{id:"profile.card.follow.tooltip",defaultMessage:"See activity in feed"},unfollowTooltip:{id:"profile.card.unfollow.tooltip",defaultMessage:"Stop seeing activity in feed"}}),n=(0,t.isReactCompilerActiveV1)()?o=>{let l,t,n,u,d=(0,i.c)(11),{followed:f}=o,c=(0,r("8C5kA").default)();return d[0]!==f||d[1]!==c?(l=c.formatMessage(f?s.unfollowTooltip:s.followTooltip),d[0]=f,d[1]=c,d[2]=l):l=d[2],d[3]!==f||d[4]!==c?(t=c.formatMessage(f?s.unfollow:s.follow),d[3]=f,d[4]=c,d[5]=t):t=d[5],d[6]!==t?(n=e(a).createElement("span",null,t),d[6]=t,d[7]=n):n=d[7],d[8]!==l||d[9]!==n?(u=e(a).createElement(r("3gadb").default,{content:l,position:"bottom",testId:"feed-follow-tooltip"},n),d[8]=l,d[9]=n,d[10]=u):u=d[10],u}:({followed:o})=>{let l=(0,r("8C5kA").default)();return e(a).createElement(r("3gadb").default,{content:l.formatMessage(o?s.unfollowTooltip:s.followTooltip),position:"bottom",testId:"feed-follow-tooltip"},e(a).createElement("span",null,l.formatMessage(o?s.unfollow:s.follow)))};o.exports.FeedFollow=n}),o("4GlQ9",function(e,o){var l=r("42omo");let t=(0,r("eSUdr").default)`query useFeedFollowFeedFollowQuery{getFeedUserConfig{accountIds}}`,i=(0,r("eSUdr").default)`mutation useFeedFollowFeedFollowMutation($follow:[ID]$unfollow:[ID]){setFeedUserConfig(input:{followUsers:$follow unfollowUsers:$unfollow}){success}}`,a=e=>e?.graphQLErrors?.some(e=>e?.path?.includes("getFeedUserConfig")&&e?.message?.includes("User not permitted to access Confluence")),s=!1;e.exports.useFeedFollow=function(){let{isLicensed:e}=(0,r("bQm3c").useSessionData)(),{createAnalyticsEvent:o}=(0,r("inPa6").useAnalyticsEvents)(),{data:n,loading:u,error:d}=(0,r("xQxzY").useQuery)(t,{skip:!e||s,onError:e=>s=a(e)}),[f,{error:c}]=(0,r("1KmJq").useMutation)(i,{refetchQueries:[{query:t},"FeedFollowQuery"]}),g=n?.getFeedUserConfig?.accountIds,p=(0,l.useCallback)((e,r,l)=>async()=>{if(e){o({type:"sendUIEvent",data:{action:"clicked",actionSubject:"button",actionSubjectId:"feedFollow",source:l,attributes:{id:e,settingType:"user",actionType:r?"unfollow":"follow"}}}).fire();try{r?await f({variables:{unfollow:[e]}}):await f({variables:{follow:[e]}})}catch(e){}}},[f,o]),w={renderFeedFollow:!(u||d||s)&&e,loading:u,getToggleFollowUser:p,feedConfigError:d,mutationError:c,followedUsers:g},E=(0,l.useMemo)(()=>({renderFeedFollow:!(u||d||s)&&e,loading:u,getToggleFollowUser:p,feedConfigError:d,mutationError:c,followedUsers:g??[]}),[u,d,e,p,c,g]);return(0,r("6mKj3").expValEquals)("confluence_edit_page_rerender_optimizations","isEnabled",!0)?E:w}}),o("bumSD",function(e,o){let l={url:"/gateway/api/directory/graphql",cacheSize:100,cacheMaxAge:3e5},t=(0,r("2XqLN").default)((e,o)=>{let t={...l,productIdentifier:"confluence",cloudId:e};return new(0,r("7c52C").default)(t,{userClient:new(0,r("bp86Z").UserProfileClientForConfluence)(t)})});e.exports.getProfileClient=t}),o("bp86Z",function(e,o){class l extends r("8zKPT").default{async makeRequest(e,o){r("9jSPN").PROFILE_CARD_QUERY_METRIC.start();let l=(0,r("hp2SH").getApolloClient)().query({query:r("2A84u").UserProfileClientForConfluenceQuery,variables:{userId:o}}),[t,i]=await Promise.allSettled([l,super.makeRequest(e,o)]);if("rejected"===i.status)return r("9jSPN").PROFILE_CARD_QUERY_METRIC.stop({customData:{success:!1}}),Promise.reject(i.reason);let a=[];if("fulfilled"===t.status){let e=t.value.data;(0,r("7lu50").getExternalCollaboratorEntitlementFromQuery)(e)&&e?.user?.confluence?.permissionType===r("ldOrZ").SitePermissionType.EXTERNAL&&a.push({...r("9fywD").ExternalUserLozengeProps,key:"ExternalUserLozenge"})}return r("9jSPN").PROFILE_CARD_QUERY_METRIC.stop({customData:{success:!0}}),{...i.value,customLozenges:a}}}e.exports.UserProfileClientForConfluence=l}),o("ldOrZ",function(e,r){var o,l=((o={}).ANONYMOUS="ANONYMOUS",o.APP="APP",o.EXTERNAL="EXTERNAL",o.INTERNAL="INTERNAL",o.JSD="JSD",o);e.exports.SitePermissionType=l}),o("2A84u",function(e,o){let l=(0,r("eSUdr").default)`query UserProfileClientForConfluenceQuery($userId:ID){user:confluence_atlassianUser(current:false id:$userId){id confluence{permissionType}}entitlements{externalCollaborator{isEntitled}}}`;e.exports.UserProfileClientForConfluenceQuery=l}),o("9jSPN",function(e,o){let l=(0,r("lSOAM").createCustomMetric)({key:r("fd6g2").PROFILE_CARD_QUERY_CUSTOM_KEY});e.exports.PROFILE_CARD_QUERY_METRIC=l}),o("gj42z",function(o,l){var t=r("3u0dr"),i=r("frIzR"),a=r("42omo"),s=r("T1bCI"),n=r("b3j2Y");let u=(0,r("cgtv4").defineMessages)({followMutationErrorTitle:{id:"profile.card.feed.follow.mutation.error.title",defaultMessage:"We're having trouble doing that"},followMutationErrorDescription:{id:"profile.card.feed.follow.mutation.error.description",defaultMessage:"Try following or unfollowing this user again "}}),d=(0,t.isReactCompilerActiveV1)()?o=>{let l,t,d,f=(0,i.c)(8),{feedConfigError:c,mutationError:g,showErrorFlag:p}=o;return f[0]!==c?(l=c?e(a).createElement(n.ErrorDisplay,{error:c}):null,f[0]=c,f[1]=l):l=f[1],f[2]!==g||f[3]!==p?(t=g?e(a).createElement(n.ErrorDisplay,{error:g},e(a).createElement(s.Subscribe,{to:[r("gqqjz").FlagsStateContainer]},o=>(p&&o.showErrorFlag({title:e(a).createElement(r("gtD4K").default,u.followMutationErrorTitle),description:e(a).createElement(r("gtD4K").default,u.followMutationErrorDescription)}),null))):null,f[2]=g,f[3]=p,f[4]=t):t=f[4],f[5]!==l||f[6]!==t?(d=e(a).createElement(e(a).Fragment,null,l,t),f[5]=l,f[6]=t,f[7]=d):d=f[7],d}:({feedConfigError:o,mutationError:l,showErrorFlag:t})=>e(a).createElement(e(a).Fragment,null,o?e(a).createElement(n.ErrorDisplay,{error:o}):null,l?e(a).createElement(n.ErrorDisplay,{error:l},e(a).createElement(s.Subscribe,{to:[r("gqqjz").FlagsStateContainer]},o=>(t&&o.showErrorFlag({title:e(a).createElement(r("gtD4K").default,u.followMutationErrorTitle),description:e(a).createElement(r("gtD4K").default,u.followMutationErrorDescription)}),null))):null);o.exports.FeedFollowErrorDisplay=d});
//# sourceMappingURL=CommentsPanelFilterMenu.52a8ca4f.js.map
