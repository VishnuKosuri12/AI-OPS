function e(e,t,r,i){Object.defineProperty(e,t,{get:r,set:i,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var r=globalThis,i={},n={},o=r.parcelRequired477;null==o&&(o=function(e){var t=i[e];if(void 0!==t)return t.exports;var r=n[e];if(void 0!==r){delete n[e];var o={id:e,exports:{}};return i[e]=o,r.call(o.exports,o,o.exports),o.exports}var s=Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s},o.register=function(e,t){n[e]=t},r.parcelRequired477=o);var s=o.register;r.lb||(r.lb=new Set,r.bq=[],r.rlb=e=>{r.lb.add(e),r.pq()},r.rwr=(e,t,i)=>{r.bq.push({b:e,r:t,d:i}),r.pq()},r.pq=()=>{var e=r.bq.find(e=>e.d.every(e=>r.lb.has(e)));e&&(r.bq=r.bq.filter(t=>t.b!==e.b),e.r(),r.pq())}),s("eTj7Y",function(e,t){o("kyRHQ"),e.exports.isSSR=function(){try{return"undefined"==typeof document}catch(e){return!1}}}),s("1bFdN",function(e,t){var r,i=o("kyRHQ"),n=function(){function e(e,t){var r;if("function"!=typeof e)throw TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but got: "+e+".");this._batchLoadFn=e,this._maxBatchSize=function(e){if(!(!e||!1!==e.batch))return 1;var t=e&&e.maxBatchSize;if(void 0===t)return 1/0;if("number"!=typeof t||t<1)throw TypeError("maxBatchSize must be a positive number: "+t);return t}(t),this._batchScheduleFn=function(e){var t=e&&e.batchScheduleFn;if(void 0===t)return s;if("function"!=typeof t)throw TypeError("batchScheduleFn must be a function: "+t);return t}(t),this._cacheKeyFn=function(e){var t=e&&e.cacheKeyFn;if(void 0===t)return function(e){return e};if("function"!=typeof t)throw TypeError("cacheKeyFn must be a function: "+t);return t}(t),this._cacheMap=function(e){if(!(!e||!1!==e.cache))return null;var t=e&&e.cacheMap;if(void 0===t)return new Map;if(null!==t){var r=["get","set","delete","clear"].filter(function(e){return t&&"function"!=typeof t[e]});if(0!==r.length)throw TypeError("Custom cacheMap missing methods: "+r.join(", "))}return t}(t),this._batch=null,this.name=(r=t)&&r.name?r.name:null}var t=e.prototype;return t.load=function(e){if(null==e)throw TypeError("The loader.load() function must be called with a value, but got: "+String(e)+".");var t,r=function(e){var t=e._batch;if(null!==t&&!t.hasDispatched&&t.keys.length<e._maxBatchSize)return t;var r={hasDispatched:!1,keys:[],callbacks:[]};return e._batch=r,e._batchScheduleFn(function(){!function(e,t){var r;if(t.hasDispatched=!0,0===t.keys.length)return l(t);try{r=e._batchLoadFn(t.keys)}catch(r){return a(e,t,TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function errored synchronously: "+String(r)+"."))}if(!r||"function"!=typeof r.then)return a(e,t,TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function did not return a Promise: "+String(r)+"."));r.then(function(e){if(!c(e))throw TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function did not return a Promise of an Array: "+String(e)+".");if(e.length!==t.keys.length)throw TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function did not return a Promise of an Array of the same length as the Array of keys.\n\nKeys:\n"+String(t.keys)+"\n\nValues:\n"+String(e));l(t);for(var r=0;r<t.callbacks.length;r++){var i=e[r];i instanceof Error?t.callbacks[r].reject(i):t.callbacks[r].resolve(i)}}).catch(function(r){a(e,t,r)})}(e,r)}),r}(this),i=this._cacheMap;if(i){t=this._cacheKeyFn(e);var n=i.get(t);if(n){var o=r.cacheHits||(r.cacheHits=[]);return new Promise(function(e){o.push(function(){e(n)})})}}r.keys.push(e);var s=new Promise(function(e,t){r.callbacks.push({resolve:e,reject:t})});return i&&i.set(t,s),s},t.loadMany=function(e){if(!c(e))throw TypeError("The loader.loadMany() function must be called with Array<key> but got: "+e+".");for(var t=[],r=0;r<e.length;r++)t.push(this.load(e[r]).catch(function(e){return e}));return Promise.all(t)},t.clear=function(e){var t=this._cacheMap;if(t){var r=this._cacheKeyFn(e);t.delete(r)}return this},t.clearAll=function(){var e=this._cacheMap;return e&&e.clear(),this},t.prime=function(e,t){var r=this._cacheMap;if(r){var i,n=this._cacheKeyFn(e);void 0===r.get(n)&&(t instanceof Error?(i=Promise.reject(t)).catch(function(){}):i=Promise.resolve(t),r.set(n,i))}return this},e}(),s="object"==typeof i&&"function"==typeof i.nextTick?function(e){r||(r=Promise.resolve()),r.then(function(){i.nextTick(e)})}:"function"==typeof setImmediate?function(e){setImmediate(e)}:function(e){setTimeout(e)};function a(e,t,r){l(t);for(var i=0;i<t.keys.length;i++)e.clear(t.keys[i]),t.callbacks[i].reject(r)}function l(e){if(e.cacheHits)for(var t=0;t<e.cacheHits.length;t++)e.cacheHits[t]()}function c(e){return"object"==typeof e&&null!==e&&"number"==typeof e.length&&(0===e.length||e.length>0&&Object.prototype.hasOwnProperty.call(e,e.length-1))}e.exports=n}),s("9trs7",function(e,t){var r;e.exports,function(e){let t=Symbol("newer"),r=Symbol("older");class i{_markEntryAsUsed(e){e!==this.newest&&(e[t]&&(e===this.oldest&&(this.oldest=e[t]),e[t][r]=e[r]),e[r]&&(e[r][t]=e[t]),e[t]=void 0,e[r]=this.newest,this.newest&&(this.newest[t]=e),this.newest=e)}assign(e){let i,o=this.limit||Number.MAX_VALUE;this._keymap.clear();let s=e[Symbol.iterator]();for(let e=s.next();!e.done;e=s.next()){let s=new n(e.value[0],e.value[1]);if(this._keymap.set(s.key,s),i?(i[t]=s,s[r]=i):this.oldest=s,i=s,0==o--)throw Error("overflow")}this.newest=i,this.size=this._keymap.size}get(e){var t=this._keymap.get(e);return t?(this._markEntryAsUsed(t),t.value):void 0}set(e,i){var o=this._keymap.get(e);return o?(o.value=i,this._markEntryAsUsed(o)):(this._keymap.set(e,o=new n(e,i)),this.newest?(this.newest[t]=o,o[r]=this.newest):this.oldest=o,this.newest=o,++this.size,this.size>this.limit&&this.shift()),this}shift(){var e=this.oldest;if(e)return this.oldest[t]?(this.oldest=this.oldest[t],this.oldest[r]=void 0):(this.oldest=void 0,this.newest=void 0),e[t]=e[r]=void 0,this._keymap.delete(e.key),--this.size,[e.key,e.value]}find(e){let t=this._keymap.get(e);return t?t.value:void 0}has(e){return this._keymap.has(e)}delete(e){var i=this._keymap.get(e);return i?(this._keymap.delete(i.key),i[t]&&i[r]?(i[r][t]=i[t],i[t][r]=i[r]):i[t]?(i[t][r]=void 0,this.oldest=i[t]):i[r]?(i[r][t]=void 0,this.newest=i[r]):this.oldest=this.newest=void 0,this.size--,i.value):void 0}clear(){this.oldest=this.newest=void 0,this.size=0,this._keymap.clear()}keys(){return new s(this.oldest)}values(){return new a(this.oldest)}entries(){return this}[Symbol.iterator](){return new o(this.oldest)}forEach(e,r){"object"!=typeof r&&(r=this);let i=this.oldest;for(;i;)e.call(r,i.value,i.key,this),i=i[t]}toJSON(){for(var e=Array(this.size),r=0,i=this.oldest;i;)e[r++]={key:i.key,value:i.value},i=i[t];return e}toString(){for(var e="",r=this.oldest;r;)e+=String(r.key)+":"+r.value,(r=r[t])&&(e+=" < ");return e}constructor(e,t){"number"!=typeof e&&(t=e,e=0),this.size=0,this.limit=e,this.oldest=this.newest=void 0,this._keymap=new Map,t&&(this.assign(t),e<1&&(this.limit=this.size))}}function n(e,i){this.key=e,this.value=i,this[t]=void 0,this[r]=void 0}function o(e){this.entry=e}function s(e){this.entry=e}function a(e){this.entry=e}e.LRUMap=i,o.prototype[Symbol.iterator]=function(){return this},o.prototype.next=function(){let e=this.entry;return e?(this.entry=e[t],{done:!1,value:[e.key,e.value]}):{done:!0,value:void 0}},s.prototype[Symbol.iterator]=function(){return this},s.prototype.next=function(){let e=this.entry;return e?(this.entry=e[t],{done:!1,value:e.key}):{done:!0,value:void 0}},a.prototype[Symbol.iterator]=function(){return this},a.prototype.next=function(){let e=this.entry;return e?(this.entry=e[t],{done:!1,value:e.value}):{done:!0,value:void 0}}}(e.exports)}),s("ibzAc",function(e,t){o("dwp40");var r=o("hzQni"),i=o("dwp40");class n{loadMediaImage(e){let t=this.pendingRequests.get(e);if(void 0!==t)return t;let r=new Promise((t,r)=>{this.mediaImageQueue.push({url:e,resolve:t,reject:r}),this.processFromQueue()}).then(t=>(this.pendingRequests.delete(e),t)).catch(t=>{throw this.pendingRequests.delete(e),t});return this.pendingRequests.set(e,r),r}getQueueSize(){return this.mediaImageQueue.length}getActiveDownloads(){return this.activeProcessing}processFromQueue(){for(;this.activeProcessing<this.concurrentDownloadLimit&&this.mediaImageQueue.length>0;){this.activeProcessing++;let{url:e,resolve:t,reject:r}=this.mediaImageQueue.shift();this.tokenManager.getToken("read",!1).then(i=>{this.requestMediaEmoji(e,i,!0).then(e=>{t(e),this.completedItem()}).catch(e=>{r(e),this.completedItem()})}).catch(e=>{r(e),this.completedItem()})}}completedItem(){this.activeProcessing--,this.processFromQueue()}delay(e){return new Promise(t=>setTimeout(t,e))}requestMediaEmoji(e,t,r,i=2){return(0,o("khxnJ").imageAcceptHeader)().then(n=>fetch(e,{headers:{Authorization:`Bearer ${t.jwt}`,"X-Client-Id":t.clientId,Accept:n}}).then(n=>{if(404===n.status&&i>0)return this.delay(600/i).then(()=>this.requestMediaEmoji(e,t,!1,i-1));if(403===n.status&&r)return this.tokenManager.getToken("read",!0).then(t=>this.requestMediaEmoji(e,t,!1));if(n.ok)return n.blob().then(e=>this.readBlob(e));throw Error(`Unable to load media image. Status=${n.status} ${n.statusText}`)}))}readBlob(e){return new Promise((t,r)=>{let i=new FileReader;i.addEventListener("load",()=>t(i.result)),i.addEventListener("error",()=>r(i.error)),i.readAsDataURL(e)})}constructor(e,t){this.tokenManager=void 0,this.mediaImageQueue=[],this.activeProcessing=0,this.concurrentDownloadLimit=void 0,this.pendingRequests=new Map,this.concurrentDownloadLimit=t&&t.concurrentDownloadLimit||16,this.tokenManager=e}}var s=o("9trs7");let a=(e,t)=>t?e.altRepresentation:e.representation,l=()=>{let e=!!document.documentMode,t=!e&&!!window.StyleMedia;return e||t};class c{loadEmoji(e,t){let r=a(e,t);if(!(0,o("40rXS").isMediaRepresentation)(r))return e;let{mediaPath:i}=r;return this.cachedImageUrls.has(i)?e:this.mediaImageLoader.loadMediaImage(i).then(()=>(this.cachedImageUrls.add(i),e)).catch(()=>{})}optimisticRendering(){return!0}static supported(e,t){return l()?Promise.resolve(!1):t.loadMediaImage(e).then(()=>new Promise(t=>{let r=new Image;r.addEventListener("load",()=>{t(!0)}),r.addEventListener("error",()=>{t(!1)}),r.src=e})).catch(()=>!1)}constructor(e){this.cachedImageUrls=new Set,this.mediaImageLoader=void 0,(0,o("fB3RY").default)("BrowserCacheStrategy"),this.mediaImageLoader=e}}class u{loadEmoji(e,t){let r=a(e,t);if(!(0,o("40rXS").isMediaRepresentation)(r))return e;let{mediaPath:i}=r,n=this.dataURLCache.get(i);return n?(0,o("40rXS").convertMediaToImageEmoji)(e,n,t):this.mediaImageLoader.loadMediaImage(i).then(r=>{let n=(0,o("40rXS").convertMediaToImageEmoji)(e,r,t);return r.length<=1e4?this.dataURLCache.set(i,r):(0,o("fB3RY").default)("No caching as image is too large",r.length,r.slice(0,15),e.shortName),n}).catch(()=>{})}optimisticRendering(){return!1}constructor(e){this.dataURLCache=void 0,this.mediaImageLoader=void 0,(0,o("fB3RY").default)("MemoryCacheStrategy"),this.mediaImageLoader=e,this.dataURLCache=new(0,s.LRUMap)(1e3)}}class d{loadEmoji(e,t){let r=a(e,t);if(!(0,o("40rXS").isMediaRepresentation)(r))return e;let{mediaPath:i}=r,n=this.getCache(i);return(0,o("40rXS").isPromise)(n)?n.then(r=>r.loadEmoji(e,t)).catch(()=>void 0):n.loadEmoji(e,t)}optimisticRendering(e){let t=this.getCache(e);return(0,o("40rXS").isPromise)(t)?t.then(e=>e.optimisticRendering()).catch(()=>!1):t.optimisticRendering()}getCache(e){return this.cache?this.cache:(this.waitingInitUrls.push(e),this.cacheLoading||(this.cacheLoading=this.initCache().then(e=>(this.cache=e,this.cacheLoading=void 0,e)).catch(e=>{throw this.cacheLoading=void 0,e})),this.cacheLoading)}initCache(){let e=this.waitingInitUrls.pop();return e?c.supported(e,this.mediaImageLoader).then(e=>(this.waitingInitUrls=[],this.cacheLoading=void 0,e)?new c(this.mediaImageLoader):new u(this.mediaImageLoader)).catch(()=>this.initCache()):Promise.reject("Unable to initialise cache based on provided url(s)")}constructor(e){this.cache=void 0,this.waitingInitUrls=[],this.cacheLoading=void 0,this.mediaImageLoader=void 0,(0,o("fB3RY").default)("MediaEmojiCache"),this.mediaImageLoader=new n(e)}}class p{isValidToken(e){return Date.now()/1e3<e.expiresAt-30}fetchNewToken(e){return i.utils.requestService(this.siteServiceConfig,{path:`token/${e}`})}addToken(e,t){this.tokens.set(e,{mediaApiToken:t})}getToken(e,t){let r=this.tokens.get(e);r||(r={},this.tokens.set(e,r));let{mediaApiToken:i,activeTokenRefresh:n}=r;return i&&this.isValidToken(i)&&!t?Promise.resolve(i):n||(r.activeTokenRefresh=this.fetchNewToken(e).then(e=>(r.mediaApiToken=e,r.activeTokenRefresh=void 0,e)),r.activeTokenRefresh)}constructor(e){this.siteServiceConfig=void 0,this.tokens=void 0,this.siteServiceConfig=e,this.tokens=new Map}}class h{async generateTokenisedMediaURLS(e,t){if(!(0,o("40rXS").isMediaRepresentation)(e))return{representation:e,altRepresentation:t};try{let r=await this.tokenManager.getToken("read");return Object.entries({representation:e,altRepresentation:t}).reduce((e,[t,i])=>{if(i&&(0,o("40rXS").isMediaRepresentation)(i)){let n=new URL(i.mediaPath),o=n.searchParams;o.get("token")!==r.jwt&&o.set("token",r.jwt),o.get("client")!==r.clientId&&o.set("client",r.clientId),e[t]={...i,mediaPath:n.toString()}}return e},{representation:e,altRepresentation:t})}catch(r){return{representation:e,altRepresentation:t}}}loadMediaEmoji(e,t){if(!(0,o("40rXS").isMediaEmoji)(e))throw Error("Only supported for media emoji");return this.mediaEmojiCache.loadEmoji(e,t)}optimisticRendering(e,t){let r=t?e.altRepresentation:e.representation;if(!(0,o("40rXS").isMediaRepresentation)(r))throw Error("Only supported for media emoji");let{mediaPath:i}=r;return this.mediaEmojiCache.optimisticRendering(i)}uploadEmoji(e,t=!1,r){let i=Date.now();return this.tokenManager.getToken("upload",t).then(t=>{let n=Date.now()-i;return(0,o("fB3RY").default)("upload token load time",n),new Promise((s,a)=>{let{url:l,clientId:c,collectionName:u}=t,d=(0,o("grxv4").getMediaClient)({authProvider:()=>Promise.resolve({clientId:c,token:t.jwt,baseUrl:l}),useSha256ForUploads:!0}).file.upload({content:e.dataURL,name:e.filename,collection:u}).subscribe({next:t=>{if("uploading"===t.status&&r)r({percent:.95*t.progress});else if("processing"===t.status||"processed"===t.status){d.unsubscribe();let r=Date.now()-i;(0,o("fB3RY").default)("total upload / media upload times",r,r-n),this.postToEmojiService(e,t.id).then(e=>{s(e)}).catch(e=>{a(e.reason||e)})}},error(e){a(e)}})})})}hasUploadToken(){return this.tokenManager.getToken("upload").then(e=>void 0!==e,()=>!1)}prepareForUpload(){this.tokenManager.getToken("upload")}findEmoji(e){if(!e.id)return Promise.reject(!1);let t=`../${encodeURIComponent(e.id)}`;return(0,o("jDv0c").emojiRequest)(this.siteServiceConfig,{path:t}).then(e=>(0,o("jDv0c").denormaliseEmojiServiceResponse)(e).emojis[0]).catch(t=>{(0,o("fB3RY").default)("failed to load emoji",e,t)})}deleteEmoji(e){if(!(0,o("40rXS").isMediaEmoji)(e)&&!(0,o("40rXS").isLoadedMediaEmoji)(e)||!e.id)return Promise.reject(!1);let t=`${encodeURIComponent(e.id)}`;return i.utils.requestService(this.siteServiceConfig,{path:t,requestInit:{method:"DELETE"}}).then(()=>!0).catch(()=>!1)}constructor(e,t){this.siteServiceConfig=void 0,this.mediaApiToken=void 0,this.mediaEmojiCache=void 0,this.tokenManager=void 0,this.postToEmojiService=(e,t)=>{let{shortName:r,name:n}=e,{width:s,height:a}=e,l={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({shortName:r,name:n,width:s,height:a,fileId:t})};return i.utils.requestService(this.siteServiceConfig,{requestInit:l}).then(e=>{let{emojis:t}=e;if(t.length){let{altRepresentations:e,...r}=t[0],i={...r,representation:(0,o("40rXS").convertImageToMediaRepresentation)(r.representation)},n=(0,o("jDv0c").getAltRepresentation)(e||{}),s=n?(0,o("40rXS").convertImageToMediaRepresentation)(n):void 0;return(0,o("40rXS").buildEmojiDescriptionWithAltRepresentation)(i,s)}throw Error("No emoji returns from upload. Upload failed.")})},this.siteServiceConfig=e,this.mediaApiToken=t,this.tokenManager=new p(e),this.tokenManager.addToken("read",t),this.mediaEmojiCache=new d(this.tokenManager)}}class f extends r.AbstractResource{async getEmojiProvider(e={fetchAtStart:!this.fetchOnDemand}){if(e.fetchAtStart)try{await this.fetchEmojiProvider()}catch(e){(0,o("fB3RY").default)(e)}return Promise.resolve(this)}async fetchIndividualProvider(e,t){let r=this.getProviderType(e);try{(0,o("7ZWaV").sampledUfoEmojiResourceFetched)(r).start({samplingRate:o("fhsiz").SAMPLING_RATE_EMOJI_RESOURCE_FETCHED_EXP}),(0,o("7ZWaV").sampledUfoEmojiResourceFetched)(r).addMetadata({type:r});let i=new(0,o("dS4Ej").default)(e),n=await i.loadEmoji();(0,o("7ZWaV").sampledUfoEmojiResourceFetched)(r).success(),this.emojiResponses[t]=n,this.initEmojiRepository(this.emojiResponses),await this.initSiteEmojiResource(n,e),this.activeLoaders--,this.performRetries(),this.refreshLastFilter()}catch(t){throw this.activeLoaders--,this.notifyError(t),(0,o("7ZWaV").sampledUfoEmojiResourceFetched)(r).failure({metadata:{reason:t,source:"EmojiProvider",providerUrl:e.url}}),(0,o("fB3RY").default)(`failed to fetch emoji provider for ${e.url}`,t),Error(`failed to fetch emoji from ${e.url}`)}}async fetchEmojiProvider(e=!1){return!e&&(this.isRepositoryAvailable(this.emojiRepository)||this.isInitialised)||(this.isInitialised=!0,this.emojiResponses=[],await Promise.all(this.emojiProviderConfig.providers.map((e,t)=>this.fetchIndividualProvider(e,t)))),Promise.resolve(this.emojiRepository)}onlyFetchOnDemand(){return this.fetchOnDemand}async fetchByEmojiId(e,t){if(this.isLoaded()&&this.isRepositoryAvailable(this.emojiRepository)){let t=await this.findByEmojiId(e);if(t)return await this.getMediaEmojiDescriptionURLWithInlineToken(t)}if(this.emojiProviderConfig.singleEmojiApi&&t){let t={url:this.emojiProviderConfig.singleEmojiApi.getUrl(e),securityProvider:this.emojiProviderConfig.singleEmojiApi.securityProvider},r=new(0,o("dS4Ej").default)(t);try{let e=await r.loadEmoji();if(!e.emojis[0])return;return this.isRepositoryAvailable(this.siteEmojiResource)||await this.initSiteEmojiResource(e,t),this.getMediaEmojiDescriptionURLWithInlineToken(e.emojis[0])}catch{let t=await this.findByEmojiId(e);if(!t)return;return this.getMediaEmojiDescriptionURLWithInlineToken(t)}}let r=await this.findByEmojiId(e);if(r)return this.getMediaEmojiDescriptionURLWithInlineToken(r)}getProviderType(e){return e.url.includes("/site")?o("aGYoD").ProviderTypes.SITE:e.url.includes("/standard")?o("aGYoD").ProviderTypes.STANDARD:e.url.includes("/atlassian")?o("aGYoD").ProviderTypes.ATLASSIAN:o("aGYoD").ProviderTypes.UNKNOWN}initEmojiRepository(e){let t=[];e.forEach(e=>{t=t.concat(e.emojis)}),this.emojiRepository=new(0,o("cnv66").default)(t)}initSiteEmojiResource(e,t){if(!this.isRepositoryAvailable(this.siteEmojiResource)&&e.mediaApiToken){this.siteEmojiResource=new h(t,e.mediaApiToken);let{emojis:r}=e;if(r.length){let e=this.siteEmojiResource.optimisticRendering(r[0]);if((0,o("40rXS").isPromise)(e))return e.then(()=>{(0,o("fB3RY").default)("Primed siteEmojiResource")}).catch(()=>{(0,o("fB3RY").default)("Failed to prime siteEmojiResource")});(0,o("fB3RY").default)("Already primed siteEmojiResource")}else(0,o("fB3RY").default)("No emoji to prime siteEmojiResource with")}return Promise.resolve()}performRetries(){let e=this.retries;this.retries=new Map,e.forEach((e,t)=>{let r=t();(0,o("40rXS").isPromise)(r)?r.then(t=>{e.resolve(t)}).catch(t=>{e.reject(t)}):e.resolve(r)})}loadStoredTone(){if("undefined"==typeof window)return;let e=window.localStorage.getItem(o("fhsiz").selectedToneStorageKey);if(e){let t=parseInt(e,10);return isNaN(t)?void 0:t}}refreshLastFilter(){if(void 0!==this.lastQuery){let{query:e,options:t}=this.lastQuery;this.filter(e,t)}}retryIfLoading(e,t){return this.isLoaded()?Promise.resolve(t):new Promise((t,r)=>{this.retries.set(e,{resolve:t,reject:r})})}notifyResult(e){this.lastQuery&&e.query===this.lastQuery.query&&super.notifyResult(e)}async getMediaEmojiDescriptionURLWithInlineToken(e){if(this.isRepositoryAvailable(this.siteEmojiResource)){let{representation:t,altRepresentation:r}=await this.siteEmojiResource.generateTokenisedMediaURLS(e.representation,e.altRepresentation);return{...e,representation:t,altRepresentation:r}}return e}loadMediaEmoji(e,t){return this.isRepositoryAvailable(this.siteEmojiResource)&&(0,o("40rXS").isMediaEmoji)(e)?this.siteEmojiResource.loadMediaEmoji(e,t):e}optimisticMediaRendering(e,t){if(!(0,o("40rXS").isMediaEmoji)(e))return!0;if(!this.isRepositoryAvailable(this.siteEmojiResource))return!1;let r=this.siteEmojiResource.optimisticRendering(e,t);return!(0,o("40rXS").isPromise)(r)&&r}filter(e,t){if(o("7ZWaV").ufoExperiences["emoji-searched"].start(),o("7ZWaV").ufoExperiences["emoji-searched"].addMetadata({queryLength:e?.length||0}),this.lastQuery={query:e,options:t},this.isRepositoryAvailable(this.emojiRepository)){let r=this.emojiRepository.search(e,t);this.notifyResult(r),o("7ZWaV").ufoExperiences["emoji-searched"].success({metadata:{emojisLength:r.emojis.length,source:t?.source||"typeahead"}})}else this.notifyNotReady()}findByShortName(e){return this.isLoaded()&&this.isRepositoryAvailable(this.emojiRepository)?this.emojiRepository.findByShortName(e):this.retryIfLoading(()=>this.findByShortName(e),void 0)}findByEmojiId(e){let{id:t,shortName:r}=e;if(this.isRepositoryAvailable(this.emojiRepository))if(!t)return this.findByShortName(r);else{let i=this.emojiRepository.findById(t);if(i)return i;if(this.isLoaded())return this.isRepositoryAvailable(this.siteEmojiResource)?this.siteEmojiResource.findEmoji(e).then(e=>e?(this.addUnknownEmoji(e),e):this.findByShortName(r)):this.findByShortName(r)}return this.retryIfLoading(()=>this.findByEmojiId(e),void 0)}findById(e){return this.isLoaded()&&this.isRepositoryAvailable(this.emojiRepository)?this.emojiRepository.findById(e):this.retryIfLoading(()=>this.findById(e),void 0)}findInCategory(e){return this.isLoaded()&&this.isRepositoryAvailable(this.emojiRepository)?Promise.resolve(this.emojiRepository.findInCategory(e)):this.retryIfLoading(()=>this.findInCategory(e),[])}getAsciiMap(){return this.isLoaded()&&this.isRepositoryAvailable(this.emojiRepository)?Promise.resolve(this.emojiRepository.getAsciiMap()):this.retryIfLoading(()=>this.getAsciiMap(),new Map)}getFrequentlyUsed(e){return this.isLoaded()&&this.isRepositoryAvailable(this.emojiRepository)?Promise.resolve(this.emojiRepository.getFrequentlyUsed(e)):this.retryIfLoading(()=>this.getFrequentlyUsed(e),[])}recordSelection(e){let{recordConfig:t}=this;if(this.isRepositoryAvailable(this.emojiRepository)&&this.emojiRepository.used(e),t){let r={emojiId:(0,o("40rXS").toEmojiId)(e)};return i.utils.requestService(t,{queryParams:r,requestInit:{method:"POST"}})}return Promise.resolve()}deleteSiteEmoji(e){return this.isRepositoryAvailable(this.siteEmojiResource)&&e.id?this.siteEmojiResource.deleteEmoji(e).then(t=>!!(t&&this.isRepositoryAvailable(this.emojiRepository))&&(this.emojiRepository.delete(e),!0)).catch(e=>(console.error("failed to delete site emoji",e),!1)):this.retryIfLoading(()=>this.deleteSiteEmoji(e),!1)}getSelectedTone(){return this.selectedTone}setSelectedTone(e){if(this.selectedTone=e,"undefined"!=typeof window&&(0,o("eu2js").default)("localStorage"))try{window.localStorage.setItem(o("fhsiz").selectedToneStorageKey,e?e.toString():"")}catch(e){console.error("failed to store selected emoji skin tone",e)}}calculateDynamicCategories(){return this.isLoaded()&&this.isRepositoryAvailable(this.emojiRepository)?Promise.resolve(this.emojiRepository.getDynamicCategoryList()):this.retryIfLoading(()=>this.calculateDynamicCategories(),[])}getCurrentUser(){return this.currentUser}addUnknownEmoji(e){this.isRepositoryAvailable(this.emojiRepository)&&this.emojiRepository.addUnknownEmoji(e)}constructor(e){if(super(),this.recordConfig=void 0,this.emojiRepository=void 0,this.lastQuery=void 0,this.activeLoaders=0,this.initialLoaders=0,this.retries=new Map,this.siteEmojiResource=void 0,this.selectedTone=void 0,this.currentUser=void 0,this.isInitialised=!1,this.fetchOnDemand=!1,this.emojiResponses=void 0,this.emojiProviderConfig=void 0,this.getOptimisticImageURL=e=>{if(this.emojiProviderConfig.optimisticImageApi)return this.emojiProviderConfig.optimisticImageApi.getUrl(e)},this.isRepositoryAvailable=e=>!!e,this.isLoaded=()=>0!==this.initialLoaders&&0===this.activeLoaders,this.emojiProviderConfig=e,this.recordConfig=e.recordConfig,this.currentUser=e.currentUser,(0,o("eu2js").default)("localStorage")&&(this.selectedTone=this.loadStoredTone()),0===e.providers.length)throw Error("No providers specified");this.fetchOnDemand=!!e.options&&!!e.options.onlyFetchOnDemand,this.initialLoaders=this.emojiProviderConfig.providers.length,this.activeLoaders=this.emojiProviderConfig.providers.length,this.emojiResponses=[]}}e.exports.supportsUploadFeature=e=>!!e.isUploadSupported&&!!e.uploadCustomEmoji&&!!e.prepareForUpload,e.exports.default=class extends f{isUploadSupported(){return this.allowUpload?this.isRepositoryAvailable(this.siteEmojiResource)?this.siteEmojiResource.hasUploadToken():this.retryIfLoading(()=>this.isUploadSupported(),!1):Promise.resolve(!1)}uploadCustomEmoji(e,t=!1,r=12e3){return this.isUploadSupported().then(i=>i&&this.isRepositoryAvailable(this.siteEmojiResource)?function(e,t,r="Timed out"){return Promise.race([e,new Promise((e,i)=>setTimeout(()=>i(Error(r)),t))])}(this.siteEmojiResource.uploadEmoji(e,t).then(t=>(t.representation.imagePath=e.dataURL,this.addUnknownEmoji(t),this.refreshLastFilter(),t)),r,"uploadCustomEmoji timed out"):Promise.reject("No media api support is configured"))}prepareForUpload(){return this.isRepositoryAvailable(this.siteEmojiResource)&&this.siteEmojiResource.prepareForUpload(),this.retryIfLoading(()=>this.prepareForUpload(),void 0)}constructor(e){super(e),this.allowUpload=void 0,this.allowUpload=!!e.allowUpload}}}),s("dwp40",function(t,r){e(t.exports,"AbstractResource",()=>o("hzQni").AbstractResource),e(t.exports,"utils",()=>h),o("eMprr"),o("hzQni");var i={},n=o("eMprr");let s={},a=(e,t="",r,i)=>{let n=new URLSearchParams(new URL(e,"https://BASE_FALLBACK").search||void 0);if(e=e.split("?")[0],r)for(let e in r)({}).hasOwnProperty.call(r,e)&&n.append(e,r[e]);if(i&&i.params){for(let e in i.params)if(({}).hasOwnProperty.call(i.params,e)){let t=i.params[e];if(Array.isArray(t))for(let r=0;r<t.length;r++)n.append(e,t[r]);else n.append(e,t)}}let o="";t&&"/"!==e.substr(-1)&&!t.startsWith("/")&&(o="/");let s=n.toString();return s&&(s="?"+s),`${e}${o}${t}${s}`},l=(e,t)=>{if(t){for(let r in t)if(({}).hasOwnProperty.call(t,r)){let i=t[r];if(Array.isArray(i))for(let t=0;t<i.length;t++)e[r]=i[t];else e[r]=i}}},c=(e,t)=>{let r={};return l(r,t),e&&l(r,e.headers),r},u=(e,t)=>{let{url:r,securityProvider:i,refreshedSecurityProvider:l}=e,{path:d,queryParams:p,requestInit:h}=t||s,f=i&&i(),m=a(r,d,p,f),g=c(f,h&&h.headers),y=(0,n.buildCredentials)(f),v=t?.ignoreResponsePayload||!1,x=(0,o("lMdlY").getActiveTraceHttpRequestHeaders)(r);return fetch(m,{...h,headers:{...g,...x},credentials:y}).then(e=>204===e.status?Promise.resolve():e.ok?v?Promise.resolve():e.json():401===e.status&&l?l().then(e=>u({url:r,securityProvider:()=>e},t)):Promise.reject({code:e.status,reason:e.statusText}))};i.requestService=u;var d=new TextDecoder;async function p(e,t){if(!e.ok||!e.body||e.bodyUsed)return e;let r=e.headers.get("content-type");if(!r||!~r.indexOf("multipart/"))return e;let i=r.indexOf("boundary="),n="-";if(~i){let e=i+9,t=r.indexOf(";",e);n=r.slice(e,t>-1?t:void 0).trim().replace(/"/g,"")}return async function*(e,t,r){let i,n,o,s=e.getReader(),a=!r||!r.multiple,l=t.length,c="",u=[];try{let e;e:for(;!(e=await s.read()).done;){let r=d.decode(e.value);i=c.length,c+=r;let s=r.indexOf(t);for(~s?i+=s:i=c.indexOf(t),u=[];~i;){let e=c.slice(0,i),r=c.slice(i+l);if(n){let t=e.indexOf("\r\n\r\n")+4,i=e.lastIndexOf("\r\n",t),n=!1,s=e.slice(t,i>-1?void 0:i),l=String(e.slice(0,t)).trim().split("\r\n"),c={},d=l.length;for(;o=l[--d];c[(o=o.split(": ")).shift().toLowerCase()]=o.join(": "));if((o=c["content-type"])&&~o.indexOf("application/json"))try{s=JSON.parse(s),n=!0}catch(e){}if(o={headers:c,body:s,json:n},a?yield o:u.push(o),"--"===r.slice(0,2))break e}else t="\r\n"+t,n=l+=2;i=(c=r).indexOf(t)}u.length&&(yield u)}}finally{u.length&&(yield u),await s.cancel()}}(e.body,`--${n}`,t)}let h=i}),s("fhsiz",function(e,t){let r="fabric.emoji",i=`${r}.selectedTone`;var n,o,s=((n={}).ArrowLeft="ArrowLeft",n.ArrowRight="ArrowRight",n.ArrowUp="ArrowUp",n.ArrowDown="ArrowDown",n.PageUp="PageUp",n.PageDown="PageDown",n.Home="Home",n.End="End",n.Enter="Enter",n.Tab="Tab",n.Space=" ",n.Backspace="Backspace",n),a=((o={}).Down="Down",o.Up="Up",o.Left="Left",o.Right="Right",o);e.exports.customCategory="CUSTOM",e.exports.frequentCategory="FREQUENT",e.exports.searchCategory="SEARCH",e.exports.yourUploadsCategory="USER_CUSTOM",e.exports.customTitle="allUploadsCustomCategory",e.exports.userCustomTitle="userUploadsCustomCategory",e.exports.dataURLPrefix="data:",e.exports.deleteEmojiLabel="delete-emoji",e.exports.MAX_ORDINAL=1e5,e.exports.scaledEmojiHeightH1=28,e.exports.scaledEmojiHeightH2=26,e.exports.scaledEmojiHeightH3=24,e.exports.scaledEmojiHeightH4=22,e.exports.denseEmojiHeightH1=24.25,e.exports.denseEmojiHeightH2=22.25,e.exports.denseEmojiHeightH3=20.25,e.exports.denseEmojiHeightH4=18.25,e.exports.defaultEmojiHeight=20,e.exports.defaultDenseEmojiHeight=16.25,e.exports.emojiPickerWidth=350,e.exports.sizeGap=80,e.exports.defaultEmojiPickerSize="medium",e.exports.emojiPickerListHeight=237,e.exports.localStoragePrefix=r,e.exports.selectedToneStorageKey=i,e.exports.defaultCategories=["PEOPLE","NATURE","FOODS","ACTIVITY","PLACES","OBJECTS","SYMBOLS","FLAGS"],e.exports.KeyboardKeys=s,e.exports.KeyboardNavigationDirection=a,e.exports.CATEGORYSELECTOR_KEYBOARD_KEYS_SUPPORTED=["ArrowRight","ArrowLeft","Home","End"],e.exports.EMOJI_KEYBOARD_KEYS_SUPPORTED=["Enter","Backspace"," "],e.exports.TONESELECTOR_KEYBOARD_KEYS_SUPPORTED=["Enter","Tab"," "],e.exports.EMOJIPICKERLIST_KEYBOARD_KEYS_SUPPORTED=["ArrowRight","ArrowLeft","Home","End","ArrowUp","ArrowDown","PageUp","PageDown"],e.exports.DEFAULT_TONE=0,e.exports.EMOJI_LIST_COLUMNS=8,e.exports.EMOJI_LIST_PAGE_COUNT=5,e.exports.EMOJI_SEARCH_DEBOUNCE=150,e.exports.SAMPLING_RATE_EMOJI_RENDERED_EXP=20,e.exports.SAMPLING_RATE_EMOJI_RESOURCE_FETCHED_EXP=100}),s("fB3RY",function(t,r){e(t.exports,"default",()=>i);function i(e,...t){}}),s("40rXS",function(e,t){let r=e=>!!(e&&e.imagePath),i=e=>!!(e&&e.mediaPath),n=e=>r(e)&&0===e.imagePath.indexOf(o("fhsiz").dataURLPrefix),s=(e,t)=>e===t||e&&t&&e.id===t.id&&e.shortName===t.shortName,a=(e,t)=>({imagePath:t||e.mediaPath,height:e.height,width:e.width}),l=(e,t)=>t?{...e,altRepresentation:t}:e;e.exports.isSpriteServiceRepresentation=e=>!!(e&&e.spriteRef),e.exports.isSpriteRepresentation=e=>!!(e&&e.sprite),e.exports.isImageRepresentation=r,e.exports.isMediaRepresentation=i,e.exports.isPromise=e=>!!(e&&e.then),e.exports.isEmojiDescription=e=>e&&e.shortName&&e.type,e.exports.isMediaEmoji=e=>i(e.representation),e.exports.isLoadedMediaEmoji=e=>e.category===o("fhsiz").customCategory&&n(e.representation),e.exports.isEmojiDescriptionWithVariations=e=>!!(e&&e.skinVariations),e.exports.isEmojiVariationDescription=e=>"baseId"in e,e.exports.isMessagesKey=e=>e in o("8Tx5v").messages,e.exports.toEmojiId=e=>({shortName:e.shortName,id:e.id,fallback:e.fallback}),e.exports.containsEmojiId=(e,t)=>{if(!t)return!1;for(let r=0;r<e.length;r++)if(s(e[r],t))return!0;return!1},e.exports.convertImageToMediaRepresentation=e=>({mediaPath:e.imagePath,height:e.height,width:e.width}),e.exports.convertMediaToImageEmoji=(e,t,r)=>{let n=e.representation,o=e.altRepresentation,s=r?void 0:t;if(!i(n)&&!i(o))return e;let c=i(n)?a(n,s):n,u=i(o)?a(o,r?t:void 0):o;return l({...e,representation:c},u)},e.exports.buildEmojiDescriptionWithAltRepresentation=l,e.exports.getCategoryId=e=>e.category}),s("8Tx5v",function(e,t){let r=(0,o("cgtv4").defineMessages)({deleteEmojiTooltip:{id:"fabric.emoji.delete.tooltip",defaultMessage:"Delete"},deleteEmojiTooltipForScreenreader:{id:"fabric.emoji.delete.screenreader.tooltip",defaultMessage:"To delete {shortName} emoji, press Backspace"},deleteEmojiTitle:{id:"fabric.emoji.delete.title",defaultMessage:"Remove emoji"},deleteEmojiDescription:{id:"fabric.emoji.delete.description",defaultMessage:"All existing instances of this emoji will be replaced with {emojiShortName}"},deleteEmojiLabel:{id:"fabric.emoji.delete.label",defaultMessage:"Remove"},addCustomEmojiLabel:{id:"fabric.emoji.add.custom.emoji.label",defaultMessage:"Add your own emoji"},emojiPlaceholder:{id:"fabric.emoji.placeholder",defaultMessage:"e.g. hello"},emojiNameAriaLabel:{id:"fabric.emoji.name.ariaLabel",defaultMessage:"Enter a name for the new emoji"},emojiChooseFileTitle:{id:"fabric.emoji.choose.file.title",defaultMessage:"Choose file"},emojiChooseFileScreenReaderDescription:{id:"fabric.emoji.choose.file.screenReaderDescription",defaultMessage:"Choose a file for the emoji. JPG, PNG or GIF. Max size 1 MB"},emojiSelectSkinToneButtonAriaLabelText:{id:"fabric.emoji.select.skin.tone.ariaLabel",defaultMessage:"Choose your skin tone, {selectedTone} selected"},emojiSelectSkinToneListAriaLabelText:{id:"fabric.emoji.select.skin.list.ariaLabel",defaultMessage:"Skin tone selector"},emojiImageRequirements:{id:"fabric.emoji.image.requirements",defaultMessage:"JPG, PNG or GIF. Max size 1 MB."},emojiPreviewTitle:{id:"fabric.emoji.preview.title",defaultMessage:"Preview"},emojiPreview:{id:"fabric.emoji.preview",defaultMessage:"Your new emoji {emoji} looks great"},addEmojiLabel:{id:"fabric.emoji.add.label",defaultMessage:"Add emoji"},retryLabel:{id:"fabric.emoji.retry.label",defaultMessage:"Retry"},cancelLabel:{id:"fabric.emoji.cancel.label",defaultMessage:"Cancel"},searchPlaceholder:{id:"fabric.emoji.search.placeholder",defaultMessage:"Search"},searchLabel:{id:"fabric.emoji.search.label",defaultMessage:"Emoji name"},searchResultsStatus:{id:"fabric.emoji.search.status.count",defaultMessage:"Found {count} emojis"},searchResultsStatusSeeAll:{id:"fabric.emoji.search.status",defaultMessage:"Seeing all emojis"},categoriesSelectorLabel:{id:"fabric.emoji.categories.label",defaultMessage:"Choose an emoji category"},categoriesSearchResults:{id:"fabric.emoji.categories.search.results",defaultMessage:"Search results"},frequentCategory:{id:"fabric.emoji.category.frequent",defaultMessage:"Frequent"},peopleCategory:{id:"fabric.emoji.category.people",defaultMessage:"People"},natureCategory:{id:"fabric.emoji.category.nature",defaultMessage:"Nature"},foodsCategory:{id:"fabric.emoji.category.foods",defaultMessage:"Food & Drink"},activityCategory:{id:"fabric.emoji.category.activity",defaultMessage:"Activity"},placesCategory:{id:"fabric.emoji.category.places",defaultMessage:"Travel & Places"},objectsCategory:{id:"fabric.emoji.category.objects",defaultMessage:"Objects"},symbolsCategory:{id:"fabric.emoji.category.symbols",defaultMessage:"Symbols"},flagsCategory:{id:"fabric.emoji.category.flags",defaultMessage:"Flags"},productivityCategory:{id:"fabric.emoji.category.productivity",defaultMessage:"Atlassian & productivity"},userUploadsCustomCategory:{id:"fabric.emoji.category.user.uploads",defaultMessage:"Your uploads"},allUploadsCustomCategory:{id:"fabric.emoji.category.all.uploads",defaultMessage:"All uploads"},deleteEmojiFailed:{id:"fabric.emoji.error.delete.failed",defaultMessage:"Remove failed"},emojiInvalidImage:{id:"fabric.emoji.error.invalid.image",defaultMessage:"Selected image is invalid"},emojiUploadFailed:{id:"fabric.emoji.error.upload.failed",defaultMessage:"Upload failed"},emojiUploadTimeout:{id:"fabric.emoji.error.upload.timeout",defaultMessage:"Upload timed out"},emojiImageTooBig:{id:"fabric.emoji.error.image.too.big",defaultMessage:"Selected image is more than 1 MB"},emojiPickerTitle:{id:"fabric.emoji.picker",defaultMessage:"Emoji picker"},emojiPickerListPanel:{id:"fabric.emoji.pickerlist.tabpanel",defaultMessage:"Emojis actions and list panel"},emojiPickerGrid:{id:"fabric.emoji.pickerlist.grid",defaultMessage:"{showSearchResults, select, true{Search results} other{Emojis}}"},emojiButtonRoleDescription:{id:"fabric.emoji.emojipicker.emoi.roledescription",defaultMessage:"emoji button"},error:{id:"fabric.emoji.emojipicker.error",defaultMessage:"Error!"}});e.exports.messages=r}),s("aGYoD",function(e,t){var r,i,n,o,s,a,l,c=((r={})[r.None=0]="None",r[r.Default=1]="Default",r[r.UsageFrequency=2]="UsageFrequency",r),u=((i={}).PICKER="picker",i.TYPEAHEAD="typeahead",i),d=((n={}).SITE="SITE",n.STANDARD="STANDARD",n.ATLASSIAN="ATLASSIAN",n.UNKNOWN="UNKNOWN",n.SINGLE="SINGLE",n),p=((o={}).EMOJI_RENDERED="emoji-rendered",o.EMOJI_RESOURCE_FETCHED="emoji-resource-fetched",o.EMOJI_PICKER_OPENED="emoji-picker-opened",o.EMOJI_SELECTION_RECORDED="emoji-selection-recorded",o.EMOJI_UPLOADED="emoji-uploaded",o.EMOJI_SEARCHED="emoji-searched",o),h=((s={}).EMOJI="emoji",s.EMOJI_PICKER="emoji-picker",s.EMOJI_PROVIDER="emoji-provider",s),f=((a={}).FMP="fmp",a.MOUNTED="emoji-mount",a.METADATA="emoji-metadata",a.MEDIADATA="emoji-media",a.ONLOAD="emoji-onload",a),m=((l={}).FMP_END="fmp",l.MOUNTED_END="emoji-mount_end",l.METADATA_START="emoji-metadata_start",l.METADATA_END="emoji-metadata_end",l.MEDIA_START="emoji-media_start",l.MEDIA_END="emoji-media_end",l.ONLOAD_START="emoji-onload_start",l.ONLOAD_END="emoji-onload_end",l);e.exports.SearchSort=c,e.exports.SearchSourceTypes=u,e.exports.ProviderTypes=d,e.exports.UfoExperienceName=p,e.exports.UfoComponentName=h,e.exports.UfoEmojiTimingsKeys=f,e.exports.UfoEmojiTimings=m}),s("cnv66",function(e,t){(function(){}).prototype.expandToken=function(e){for(var t,r=[],i=0,n=e.length;i<n;++i){t="";for(var o=i;o<n;++o)t+=e.charAt(o),r.push(t)}return r},(function(){}).prototype.expandToken=function(e){return e?[e]:[]};var r,i=function(){function e(){}return e.prototype.expandToken=function(e){for(var t=[],r="",i=0,n=e.length;i<n;++i)t.push(r+=e.charAt(i));return t},e}();(function(){}).prototype.sanitize=function(e){return e?e.trim():""};var n=function(){function e(){}return e.prototype.sanitize=function(e){return e?e.toLocaleLowerCase().trim():""},e}();function s(e,t){t=t||[];for(var r=e=e||{},i=0;i<t.length;i++)if(null==(r=r[t[i]]))return null;return r}var a=function(){function e(e){this._uidFieldName=e,this._tokenToIdfCache={},this._tokenMap={}}var t=e.prototype;return t.indexDocument=function(e,t,r){this._tokenToIdfCache={};var i,n=this._tokenMap;"object"!=typeof n[e]?n[e]=i={$numDocumentOccurrences:0,$totalNumOccurrences:1,$uidMap:{}}:(i=n[e],i.$totalNumOccurrences++);var o=i.$uidMap;"object"!=typeof o[t]?(i.$numDocumentOccurrences++,o[t]={$document:r,$numTokenOccurrences:1}):o[t].$numTokenOccurrences++},t.search=function(e,t){for(var r={},i=0,n=e.length;i<n;i++){var o=e[i],s=this._tokenMap[o];if(!s)return[];if(0===i)for(var a=Object.keys(s.$uidMap),l=0,c=a.length;l<c;l++){var u=a[l];r[u]=s.$uidMap[u].$document}else for(var a=Object.keys(r),l=0,c=a.length;l<c;l++){var u=a[l];"object"!=typeof s.$uidMap[u]&&delete r[u]}}var d=[];for(var u in r)d.push(r[u]);var p=this._createCalculateTfIdf();return d.sort(function(r,i){return p(e,i,t)-p(e,r,t)})},t._createCalculateIdf=function(){var e=this._tokenMap,t=this._tokenToIdfCache;return function(r,i){if(!t[r]){var n=void 0!==e[r]?e[r].$numDocumentOccurrences:0;t[r]=1+Math.log(i.length/(1+n))}return t[r]}},t._createCalculateTfIdf=function(){var e=this._tokenMap,t=this._uidFieldName,r=this._createCalculateIdf();return function(i,n,o){for(var a=0,l=0,c=i.length;l<c;++l){var u,d=i[l],p=r(d,o);p===1/0&&(p=0),u=t instanceof Array?n&&s(n,t):n&&n[t],a+=(void 0!==e[d]&&void 0!==e[d].$uidMap[u]?e[d].$uidMap[u].$numTokenOccurrences:0)*p}return a}},e}(),l=function(){function e(){this._tokenToUidToDocumentMap={}}var t=e.prototype;return t.indexDocument=function(e,t,r){"object"!=typeof this._tokenToUidToDocumentMap[e]&&(this._tokenToUidToDocumentMap[e]={}),this._tokenToUidToDocumentMap[e][t]=r},t.search=function(e,t){for(var r={},i=this._tokenToUidToDocumentMap,n=0,o=e.length;n<o;n++){var s=i[e[n]];if(!s)return[];if(0===n)for(var a=Object.keys(s),l=0,c=a.length;l<c;l++){var u=a[l];r[u]=s[u]}else for(var a=Object.keys(r),l=0,c=a.length;l<c;l++){var u=a[l];"object"!=typeof s[u]&&delete r[u]}}for(var a=Object.keys(r),d=[],n=0,c=a.length;n<c;n++){var u=a[n];d.push(r[u])}return d},e}(),c=/[^a-zа-яё0-9\-']+/i,u=function(){function e(){}return e.prototype.tokenize=function(e){return e.split(c).filter(function(e){return e})},e}();(function(e,t){this._stemmingFunction=e,this._tokenizer=t}).prototype.tokenize=function(e){return this._tokenizer.tokenize(e).map(this._stemmingFunction)};var d={a:!0,able:!0,about:!0,across:!0,after:!0,all:!0,almost:!0,also:!0,am:!0,among:!0,an:!0,and:!0,any:!0,are:!0,as:!0,at:!0,be:!0,because:!0,been:!0,but:!0,by:!0,can:!0,cannot:!0,could:!0,dear:!0,did:!0,do:!0,does:!0,either:!0,else:!0,ever:!0,every:!0,for:!0,from:!0,get:!0,got:!0,had:!0,has:!0,have:!0,he:!0,her:!0,hers:!0,him:!0,his:!0,how:!0,however:!0,i:!0,if:!0,in:!0,into:!0,is:!0,it:!0,its:!0,just:!0,least:!0,let:!0,like:!0,likely:!0,may:!0,me:!0,might:!0,most:!0,must:!0,my:!0,neither:!0,no:!0,nor:!0,not:!0,of:!0,off:!0,often:!0,on:!0,only:!0,or:!0,other:!0,our:!0,own:!0,rather:!0,said:!0,say:!0,says:!0,she:!0,should:!0,since:!0,so:!0,some:!0,than:!0,that:!0,the:!0,their:!0,them:!0,then:!0,there:!0,these:!0,they:!0,this:!0,tis:!0,to:!0,too:!0,twas:!0,us:!0,wants:!0,was:!0,we:!0,were:!0,what:!0,when:!0,where:!0,which:!0,while:!0,who:!0,whom:!0,why:!0,will:!0,with:!0,would:!0,yet:!0,you:!0,your:!0};d.constructor=!1,d.hasOwnProperty=!1,d.isPrototypeOf=!1,d.propertyIsEnumerable=!1,d.toLocaleString=!1,d.toString=!1,d.valueOf=!1,(function(e){this._tokenizer=e}).prototype.tokenize=function(e){return this._tokenizer.tokenize(e).filter(function(e){return!d[e]})};var p=function(){function e(e){if(!e)throw Error("js-search requires a uid field name constructor parameter");this._uidFieldName=e,this._indexStrategy=new i,this._searchIndex=new a(e),this._sanitizer=new n,this._tokenizer=new u,this._documents=[],this._searchableFields=[]}var t,r=e.prototype;return r.addDocument=function(e){this.addDocuments([e])},r.addDocuments=function(e){this._documents=this._documents.concat(e),this.indexDocuments_(e,this._searchableFields)},r.addIndex=function(e){this._searchableFields.push(e),this.indexDocuments_(this._documents,[e])},r.search=function(e){var t=this._tokenizer.tokenize(this._sanitizer.sanitize(e));return this._searchIndex.search(t,this._documents)},r.indexDocuments_=function(e,t){this._initialized=!0;for(var r=this._indexStrategy,i=this._sanitizer,n=this._searchIndex,o=this._tokenizer,a=this._uidFieldName,l=0,c=e.length;l<c;l++){var u=e[l];h=a instanceof Array?s(u,a):u[a];for(var d=0,p=t.length;d<p;d++){var h,f,m=t[d];if(null!=(f=m instanceof Array?s(u,m):u[m])&&"string"!=typeof f&&f.toString&&(f=f.toString()),"string"==typeof f)for(var g=o.tokenize(i.sanitize(f)),y=0,v=g.length;y<v;y++)for(var x=g[y],b=r.expandToken(x),E=0,S=b.length;E<S;E++){var w=b[E];n.indexDocument(w,h,u)}}}},t=[{key:"indexStrategy",set:function(e){if(this._initialized)throw Error("IIndexStrategy cannot be set after initialization");this._indexStrategy=e},get:function(){return this._indexStrategy}},{key:"sanitizer",set:function(e){if(this._initialized)throw Error("ISanitizer cannot be set after initialization");this._sanitizer=e},get:function(){return this._sanitizer}},{key:"searchIndex",set:function(e){if(this._initialized)throw Error("ISearchIndex cannot be set after initialization");this._searchIndex=e},get:function(){return this._searchIndex}},{key:"tokenizer",set:function(e){if(this._initialized)throw Error("ITokenizer cannot be set after initialization");this._tokenizer=e},get:function(){return this._tokenizer}}],function(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(e.prototype,t),e}();(r=(function(e,t,r){this._indexStrategy=e||new i,this._sanitizer=t||new n,this._wrapperTagName=r||"mark"}).prototype).highlight=function(e,t){for(var r=this._wrapText("").length,i=Object.create(null),n=0,o=t.length;n<o;n++)for(var s=this._sanitizer.sanitize(t[n]),a=this._indexStrategy.expandToken(s),l=0,c=a.length;l<c;l++){var u=a[l];i[u]?i[u].push(s):i[u]=[s]}for(var d="",p="",h=0,n=0,f=e.length;n<f;n++){var m=e.charAt(n);" "===m?(d="",p="",h=n+1):(d+=m,p+=this._sanitizer.sanitize(m)),i[p]&&i[p].indexOf(p)>=0&&(d=this._wrapText(d),e=e.substring(0,h)+d+e.substring(n+1),n+=r,f+=r)}return e},r._wrapText=function(e){var t=this._wrapperTagName;return"<"+t+">"+e+"</"+t+">"};let h=RegExp("[⺀-⺙⺛-⻳⼀-⿕々〇〡-〩〸-〻㐀-䶵一-鿯豈-舘並-龎]|[A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࢠ-ࢴࢶ-ࢽऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛱ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢄᢇ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎↃↄⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〆〱-〵〻〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿯ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛥꜗ-ꜟꜢ-ꞈꞋ-ꞹꟷ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭥꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ|0-9²³¹¼-¾٠-٩۰-۹߀-߉०-९০-৯৴-৹੦-੯૦-૯୦-୯୲-୷௦-௲౦-౯౸-౾೦-೯൘-൞൦-൸෦-෯๐-๙໐-໙༠-༳၀-၉႐-႙፩-፼ᛮ-ᛰ០-៩៰-៹᠐-᠙᥆-᥏᧐-᧚᪀-᪉᪐-᪙᭐-᭙᮰-᮹᱀-᱉᱐-᱙⁰⁴-⁹₀-₉⅐-ↂↅ-↉①-⒛⓪-⓿❶-➓⳽〇〡-〩〸-〺㆒-㆕㈠-㈩㉈-㉏㉑-㉟㊀-㊉㊱-㊿꘠-꘩ꛦ-ꛯ꠰-꠵꣐-꣙꤀-꤉꧐-꧙꧰-꧹꩐-꩙꯰-꯹０-９]+[̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-ٰٟۖ-ۜ۟-۪ۤۧۨ-ܑۭܰ-݊ަ-ް߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛࣓-ࣣ࣡-ंऺ़ु-ै्॑-ॗॢॣঁ়ু-ৄ্ৢৣ৾ਁਂ਼ੁੂੇੈੋ-੍ੑੰੱੵઁં઼ુ-ૅેૈ્ૢૣૺ-૿ଁ଼ିୁ-ୄ୍ୖୢୣஂீ்ఀఄా-ీె-ైొ-్ౕౖౢౣಁ಼ಿೆೌ್ೢೣഀഁ഻഼ു-ൄ്ൢൣ්ි-ුූัิ-ฺ็-๎ັິ-ູົຼ່-ໍཱ༹༘༙༵༷-ཾྀ-྄྆྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္်ွှၘၙၞ-ၠၱ-ၴႂႅႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳ឴឵ិ-ួំ៉-៓៝᠋-᠍ᢅᢆᢩᤠ-ᤢᤧᤨᤲ᤹-᤻ᨘᨗᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀᮁᮢ-ᮥᮨᮩ᮫-ᮭ᯦ᯨᯩᯭᯯ-ᯱᰬ-ᰳᰶ᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸᳹᷀-᷹᷻-᷿⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〭꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠥꠦ꣄ꣅ꣠-꣱ꣿꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱꨲꨵꨶꩃꩌꩼꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫬꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯|']*[A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࢠ-ࢴࢶ-ࢽऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛱ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢄᢇ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎↃↄⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〆〱-〵〻〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿯ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛥꜗ-ꜟꜢ-ꞈꞋ-ꞹꟷ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭥꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]*","gi");class f{compare(e,t){for(let r=0;r<this.chain.length;r++){let i=this.chain[r].compare(e,t);if(0!==i)return i}return 0}constructor(...e){this.chain=void 0,this.chain=e}}class m{compare(e,t){let r=e.ascii&&-1!==e.ascii.indexOf(this.query),i=t.ascii&&-1!==t.ascii.indexOf(this.query);return r&&!i?-1:!r&&i?1:0}constructor(e){this.query=void 0,this.query=e}}class g{compare(e,t){return e.shortName===this.colonQuery&&t.shortName===this.colonQuery?this.typeComparator.compare(e,t):e.shortName===this.colonQuery?-1:1*(t.shortName===this.colonQuery)}constructor(e){this.colonQuery=void 0,this.typeComparator=void 0,this.colonQuery=`:${e}:`,this.typeComparator=new y(!0)}}class y{compare(e,t){return this.emojiTypeToOrdinal(e)-this.emojiTypeToOrdinal(t)}emojiTypeToOrdinal(e){let t=this.typeToNumber.get(e.type);return void 0===t&&(t=10),t}constructor(e){this.typeToNumber=void 0,e?this.typeToNumber=new Map([["SITE",0],["ATLASSIAN",1],["STANDARD",2]]):this.typeToNumber=new Map([["STANDARD",0],["ATLASSIAN",1],["SITE",2]])}}class v{compare(e,t){return e.id&&t.id?this.getPositionInOrder(e)-this.getPositionInOrder(t):0}getPositionInOrder(e){let t=e.id?e.id:"0";(0,o("40rXS").isEmojiVariationDescription)(e)&&(t=e.baseId);let r=this.positionLookup.get(t);return r||o("fhsiz").MAX_ORDINAL}constructor(e){this.positionLookup=void 0,this.positionLookup=new Map,e.map((e,t)=>this.positionLookup.set(e,t+1))}}class x{getScore(e){let t=e[this.propertyName],r=t?t.indexOf(this.query):o("fhsiz").MAX_ORDINAL;return -1===r?o("fhsiz").MAX_ORDINAL:r}compare(e,t){return this.getScore(e)-this.getScore(t)}constructor(e,t){if(this.propertyName=void 0,this.query=void 0,this.query=e,!t)throw Error("propertyToCompare is required");this.propertyName=t}}class b{static get Instance(){return this.INSTANCE||(this.INSTANCE=new this)}compare(e,t){return(e.order?e.order:o("fhsiz").MAX_ORDINAL)-(t.order?t.order:o("fhsiz").MAX_ORDINAL)}constructor(){}}b.INSTANCE=void 0;class E{static get Instance(){return this.INSTANCE||(this.INSTANCE=new this)}compare(e,t){return e.shortName.localeCompare(t.shortName)}constructor(){}}E.INSTANCE=void 0;class S{tokenize(e){return this.tokenizeAsTokens(e).map(e=>e.token)}tokenizeAsTokens(e){let t,r=[];for(h.lastIndex=0;null!==(t=h.exec(e));)t[0]&&r.push({token:t[0],start:t.index});return r}}let w=(e,t,r)=>{let i=t(e);r.has(i)||r.set(i,[]);let n=r.get(i);if(n&&n.push(e),(0,o("40rXS").isEmojiDescriptionWithVariations)(e)){let i=e.skinVariations;i&&i.forEach(e=>w(e,t,r))}},k=(e,t)=>{let r=e.get(t);if(r&&r.length)return r[r.length-1]},_=(e="")=>0===e.indexOf(":")?{nameQuery:e.slice(1),asciiQuery:e}:{nameQuery:e,asciiQuery:""},j=(e,t)=>{if((0,o("40rXS").isEmojiDescriptionWithVariations)(e)&&t){let r=t.skinTone;if(r&&e.skinVariations&&e.skinVariations.length){let t=e.skinVariations[r-1];if(t)return t}}return e},M=(e,t)=>{let r=t.id,i=-1;return e.forEach((e,n)=>{if(e.id&&e.id===r||!e.id&&!r&&e.shortName===t.shortName){i=n;return}}),i};class I{all(){let e={sort:o("aGYoD").SearchSort.None};return this.search("",e)}search(e,t){let r=[],{nameQuery:i,asciiQuery:n}=_(e);return i?(r=this.getSearchIndex().search(i),n&&(r=this.withAsciiMatch(n,r))):r=this.getAllSearchableEmojis(),{emojis:r=this.applySearchOptions(r,e,t),query:e}}findAllMatchingShortName(e){return this.shortNameMap.get(e)||[]}findByShortName(e){return k(this.shortNameMap,e)}findById(e){return k(this.idMap,e)}findByAsciiRepresentation(e){return this.asciiMap.get(e)}findInCategory(e){return e===o("fhsiz").frequentCategory?this.getFrequentlyUsed():this.all().emojis.filter(t=>t.category===e)}addUnknownEmoji(e){this.emojis=[...this.emojis,e],this.getSearchIndex().addDocuments([e]),this.addToMaps(e),this.addToDynamicCategories(e)}getAsciiMap(){return this.asciiMap}getFrequentlyUsed(e){let t=this.usageTracker.getOrder().map(e=>this.findById(e)).filter(e=>void 0!==e);return e&&(t=this.applySearchOptions(t,"",e)),t}getDynamicCategoryList(){return this.dynamicCategoryList.slice()}used(e){this.usageTracker.recordUsage(e),-1===this.dynamicCategoryList.indexOf(o("fhsiz").frequentCategory)&&"undefined"!=typeof window&&window.setTimeout(()=>{this.dynamicCategoryList.push(o("fhsiz").frequentCategory)})}delete(e){let t=M(this.emojis,e);-1!==t&&(this.emojis.splice(t,1),this.initMembers(this.usageTracker))}withAsciiMatch(e,t){let r=t,i=this.findByAsciiRepresentation(e);return i&&(r=t.filter(e=>e.id!==i.id),r=[i,...r]),r}applySearchOptions(e,t,r){let i;return(r||(r={}),void 0===r.sort&&(r.sort=o("aGYoD").SearchSort.Default),r.sort===o("aGYoD").SearchSort.Default?i=function(e,t){let r=e?e.replace(/:/g,"").toLowerCase().trim():void 0,i=[];e&&i.push(new m(e)),r&&i.push(new g(r)),t&&t.length&&i.push(new v(t)),r&&i.push(new x(r,"shortName"),new x(r,"name")),i.push(b.Instance,E.Instance);let n=new f(...i);return n.compare=n.compare.bind(n),n}(t,this.usageTracker.getOrder()):r.sort===o("aGYoD").SearchSort.UsageFrequency&&(i=function(e){let t=new f(new v(e),new y,b.Instance);return t.compare=t.compare.bind(t),t}(this.usageTracker.getOrder())),i&&(i.compare=i.compare.bind(i),e=e.sort(i.compare)),r.limit&&r.limit>0&&(e=e.slice(0,r.limit)),r.skinTone)?e.map(e=>j(e,r)):e}initMembers(e){this.usageTracker=e||new(0,o("aUjB3").UsageFrequencyTracker),this.initRepositoryMetadata(),(0,o("dh538").fg)("platform_index_emoji_just_in_time")||this.initSearchIndex()}initRepositoryMetadata(){this.shortNameMap=new Map,this.idMap=new Map,this.asciiMap=new Map;let e=new Set;this.emojis.forEach(t=>{e.add(t.category),this.addToMaps(t)}),this.usageTracker.getOrder().length&&e.add(o("fhsiz").frequentCategory),this.dynamicCategoryList=Array.from(e).filter(e=>-1===o("fhsiz").defaultCategories.indexOf(e))}initSearchIndex(){this.fullSearch=new p("id"),this.fullSearch.tokenizer=new S,this.fullSearch.searchIndex=new l,this.fullSearch.addIndex("name"),this.fullSearch.addIndex("shortName"),this.fullSearch.addDocuments(this.getAllSearchableEmojis()),this.fullSearchReady=!0}getSearchIndex(){return this.fullSearchReady||this.initSearchIndex(),this.fullSearch}getAllSearchableEmojis(){return this.emojis.filter(e=>e.searchable)}addToMaps(e){(void 0===e.order||-1===e.order)&&(e.order=I.defaultEmojiWeight),void 0===e.id&&(e.id=I.defaultEmojiWeight.toString()),w(e,e=>e.shortName,this.shortNameMap),w(e,e=>e.id,this.idMap),e.ascii&&e.ascii.forEach(t=>this.asciiMap.set(t,e))}addToDynamicCategories(e){let t=(0,o("40rXS").getCategoryId)(e);-1===o("fhsiz").defaultCategories.indexOf(t)&&-1===this.dynamicCategoryList.indexOf(t)&&this.dynamicCategoryList.push(t)}constructor(e,t){this.emojis=void 0,this.fullSearch=void 0,this.fullSearchReady=!1,this.shortNameMap=void 0,this.idMap=void 0,this.asciiMap=void 0,this.dynamicCategoryList=void 0,this.usageTracker=void 0,this.emojis=e,this.initMembers(t)}}I.defaultEmojiWeight=1e6,e.exports.getEmojiVariation=j,e.exports.default=I}),s("grxv4",function(e,t){let r=new Map;e.exports.getMediaClient=e=>{if(!e)return new(0,o("9CkUQ").MediaClient)({authProvider:()=>Promise.resolve({clientId:"",token:"",baseUrl:""})});let t=r.get(e);return t||(t=new(0,o("9CkUQ").MediaClient)(e),r.set(e,t)),t}}),s("9CkUQ",function(e,t){var r=o("majy4");o("5vzpD");var i=o("9zykx");class n{async fetchToken(e){return(await fetch(`${this.baseUrl}/media/auth/smartedge`,{credentials:"include",headers:{"x-client-id":e}})).json()}isTokenExpired(e){let t=new Date().getTime()/1e3;return e.data.iat+e.data.expiresIn-t<0}constructor(e){this.baseUrl=void 0,this.baseUrl=e||"/gateway/api"}}o("9EPd0");var s=o("eUfuX");e.exports.MediaClient=class{__DO_NOT_USE__getMediaStore(){return this.store}getImage(e,t,r,i,n){return this.mediaStore.getImage(e,t,r,i,n)}getImageUrl(e,t){return this.mediaStore.getFileImageURL(e,t)}getImageUrlSync(e,t){return this.mediaStore.getFileImageURLSync(e,t)}async getImageMetadata(e,t){return(await this.mediaStore.getImageMetadata(e,t)).metadata}async mobileUploadPromise(){if(this.mobileUpload)return this.mobileUpload;let e=await o("1kgKO");return this.mobileUpload=new e.MobileUploadImpl(this.mediaStore,this.store),this.mobileUpload}async removeFileFromCollection(e,t,r,i){await this.mediaStore.removeCollectionFile(e,t,r,i)}on(e,t){this.eventEmitter.on(e,t)}off(e,t){this.eventEmitter.off(e,t)}emit(e,t){return this.eventEmitter.emit(e,t)}constructor(e,t=s.mediaStore,a){this.mediaClientConfig=e,this.store=t,this.mediaStore=void 0,this.file=void 0,this.stargate=void 0,this.eventEmitter=void 0,this.mobileUpload=void 0,this.config=void 0,this.mediaStore=a??new(0,o("dPp8R").MediaStore)({authProvider:e.authProvider,initialAuth:e.initialAuth,chunkHashAlgorithm:i.ChunkHashAlgorithm.Sha256,authProviderTimeout:e.authProviderTimeoutMs}),this.config=e,this.file=new(0,o("fO7zn").FileFetcherImpl)(this.mediaStore,this.store),this.eventEmitter=new(0,r.EventEmitter2),this.stargate=new n(e.stargateBaseUrl)}}}),s("majy4",function(e,t){var r=o("kyRHQ");!function(t){var i=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};function n(){this._events={},this._conf&&o.call(this,this._conf)}function o(e){e?(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),this._maxListeners=e.maxListeners!==t?e.maxListeners:10,e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this.newListener=e.newListener),e.verboseMemoryLeak&&(this.verboseMemoryLeak=e.verboseMemoryLeak),this.wildcard&&(this.listenerTree={})):this._maxListeners=10}function s(e,t){var i="(node) warning: possible EventEmitter memory leak detected. "+e+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(i+=" Event name: "+t+"."),void 0!==r&&r.emitWarning){var n=Error(i);n.name="MaxListenersExceededWarning",n.emitter=this,n.count=e,r.emitWarning(n)}else console.error(i),console.trace&&console.trace()}function a(e){this._events={},this.newListener=!1,this.verboseMemoryLeak=!1,o.call(this,e)}function l(e,t,r,i){if(!r)return[];var n,o,s,a,c,u,d,p=[],h=t.length,f=t[i],m=t[i+1];if(i===h&&r._listeners)if("function"==typeof r._listeners)return e&&e.push(r._listeners),[r];else{for(n=0,o=r._listeners.length;n<o;n++)e&&e.push(r._listeners[n]);return[r]}if("*"===f||"**"===f||r[f]){if("*"===f){for(s in r)"_listeners"!==s&&r.hasOwnProperty(s)&&(p=p.concat(l(e,t,r[s],i+1)));return p}if("**"===f){for(s in(d=i+1===h||i+2===h&&"*"===m)&&r._listeners&&(p=p.concat(l(e,t,r,h))),r)"_listeners"!==s&&r.hasOwnProperty(s)&&("*"===s||"**"===s?(r[s]._listeners&&!d&&(p=p.concat(l(e,t,r[s],h))),p=p.concat(l(e,t,r[s],i))):p=s===m?p.concat(l(e,t,r[s],i+2)):p.concat(l(e,t,r[s],i)));return p}p=p.concat(l(e,t,r[f],i+1))}if((a=r["*"])&&l(e,t,a,i+1),c=r["**"])if(i<h)for(s in c._listeners&&l(e,t,c,h),c)"_listeners"!==s&&c.hasOwnProperty(s)&&(s===m?l(e,t,c[s],i+2):s===f?l(e,t,c[s],i+1):((u={})[s]=c[s],l(e,t,{"**":u},i+1)));else c._listeners?l(e,t,c,h):c["*"]&&c["*"]._listeners&&l(e,t,c["*"],h);return p}function c(e,r){e="string"==typeof e?e.split(this.delimiter):e.slice();for(var i=0,n=e.length;i+1<n;i++)if("**"===e[i]&&"**"===e[i+1])return;for(var o=this.listenerTree,a=e.shift();a!==t;){if(o[a]||(o[a]={}),o=o[a],0===e.length){o._listeners?("function"==typeof o._listeners&&(o._listeners=[o._listeners]),o._listeners.push(r),!o._listeners.warned&&this._maxListeners>0&&o._listeners.length>this._maxListeners&&(o._listeners.warned=!0,s.call(this,o._listeners.length,a))):o._listeners=r;break}a=e.shift()}return!0}a.EventEmitter2=a,a.prototype.delimiter=".",a.prototype.setMaxListeners=function(e){e!==t&&(this._maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},a.prototype.event="",a.prototype.once=function(e,t){return this._once(e,t,!1)},a.prototype.prependOnceListener=function(e,t){return this._once(e,t,!0)},a.prototype._once=function(e,t,r){return this._many(e,1,t,r),this},a.prototype.many=function(e,t,r){return this._many(e,t,r,!1)},a.prototype.prependMany=function(e,t,r){return this._many(e,t,r,!0)},a.prototype._many=function(e,t,r,i){var n=this;if("function"!=typeof r)throw Error("many only accepts instances of Function");function o(){return 0==--t&&n.off(e,o),r.apply(this,arguments)}return o._origin=r,this._on(e,o,i),n},a.prototype.emit=function(){this._events||n.call(this);var e,t,r,i,o,s=arguments[0];if("newListener"===s&&!this.newListener&&!this._events.newListener)return!1;var a=arguments.length;if(this._all&&this._all.length){if(o=this._all.slice(),a>3)for(i=0,e=Array(a);i<a;i++)e[i]=arguments[i];for(r=0,t=o.length;r<t;r++)switch(this.event=s,a){case 1:o[r].call(this,s);break;case 2:o[r].call(this,s,arguments[1]);break;case 3:o[r].call(this,s,arguments[1],arguments[2]);break;default:o[r].apply(this,e)}}if(this.wildcard){o=[];var c="string"==typeof s?s.split(this.delimiter):s.slice();l.call(this,o,c,this.listenerTree,0)}else{if("function"==typeof(o=this._events[s])){switch(this.event=s,a){case 1:o.call(this);break;case 2:o.call(this,arguments[1]);break;case 3:o.call(this,arguments[1],arguments[2]);break;default:for(i=1,e=Array(a-1);i<a;i++)e[i-1]=arguments[i];o.apply(this,e)}return!0}o&&(o=o.slice())}if(o&&o.length){if(a>3)for(i=1,e=Array(a-1);i<a;i++)e[i-1]=arguments[i];for(r=0,t=o.length;r<t;r++)switch(this.event=s,a){case 1:o[r].call(this);break;case 2:o[r].call(this,arguments[1]);break;case 3:o[r].call(this,arguments[1],arguments[2]);break;default:o[r].apply(this,e)}return!0}if(!this._all&&"error"===s)if(arguments[1]instanceof Error)throw arguments[1];else throw Error("Uncaught, unspecified 'error' event.");return!!this._all},a.prototype.emitAsync=function(){this._events||n.call(this);var e,t,r,i,o,s=arguments[0];if("newListener"===s&&!this.newListener&&!this._events.newListener)return Promise.resolve([!1]);var a=[],c=arguments.length;if(this._all){if(c>3)for(i=1,e=Array(c);i<c;i++)e[i]=arguments[i];for(r=0,t=this._all.length;r<t;r++)switch(this.event=s,c){case 1:a.push(this._all[r].call(this,s));break;case 2:a.push(this._all[r].call(this,s,arguments[1]));break;case 3:a.push(this._all[r].call(this,s,arguments[1],arguments[2]));break;default:a.push(this._all[r].apply(this,e))}}if(this.wildcard){o=[];var u="string"==typeof s?s.split(this.delimiter):s.slice();l.call(this,o,u,this.listenerTree,0)}else o=this._events[s];if("function"==typeof o)switch(this.event=s,c){case 1:a.push(o.call(this));break;case 2:a.push(o.call(this,arguments[1]));break;case 3:a.push(o.call(this,arguments[1],arguments[2]));break;default:for(i=1,e=Array(c-1);i<c;i++)e[i-1]=arguments[i];a.push(o.apply(this,e))}else if(o&&o.length){if(o=o.slice(),c>3)for(i=1,e=Array(c-1);i<c;i++)e[i-1]=arguments[i];for(r=0,t=o.length;r<t;r++)switch(this.event=s,c){case 1:a.push(o[r].call(this));break;case 2:a.push(o[r].call(this,arguments[1]));break;case 3:a.push(o[r].call(this,arguments[1],arguments[2]));break;default:a.push(o[r].apply(this,e))}}else if(!this._all&&"error"===s)if(arguments[1]instanceof Error)return Promise.reject(arguments[1]);else return Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(a)},a.prototype.on=function(e,t){return this._on(e,t,!1)},a.prototype.prependListener=function(e,t){return this._on(e,t,!0)},a.prototype.onAny=function(e){return this._onAny(e,!1)},a.prototype.prependAny=function(e){return this._onAny(e,!0)},a.prototype.addListener=a.prototype.on,a.prototype._onAny=function(e,t){if("function"!=typeof e)throw Error("onAny only accepts instances of Function");return this._all||(this._all=[]),t?this._all.unshift(e):this._all.push(e),this},a.prototype._on=function(e,t,r){if("function"==typeof e)return this._onAny(e,t),this;if("function"!=typeof t)throw Error("on only accepts instances of Function");return(this._events||n.call(this),this.emit("newListener",e,t),this.wildcard)?c.call(this,e,t):this._events[e]?("function"==typeof this._events[e]&&(this._events[e]=[this._events[e]]),r?this._events[e].unshift(t):this._events[e].push(t),!this._events[e].warned&&this._maxListeners>0&&this._events[e].length>this._maxListeners&&(this._events[e].warned=!0,s.call(this,this._events[e].length,e))):this._events[e]=t,this},a.prototype.off=function(e,r){if("function"!=typeof r)throw Error("removeListener only takes instances of Function");var n,o=[];if(this.wildcard){var s="string"==typeof e?e.split(this.delimiter):e.slice();o=l.call(this,null,s,this.listenerTree,0)}else{if(!this._events[e])return this;n=this._events[e],o.push({_listeners:n})}for(var a=0;a<o.length;a++){var c=o[a];if(i(n=c._listeners)){for(var u=-1,d=0,p=n.length;d<p;d++)if(n[d]===r||n[d].listener&&n[d].listener===r||n[d]._origin&&n[d]._origin===r){u=d;break}if(u<0)continue;return this.wildcard?c._listeners.splice(u,1):this._events[e].splice(u,1),0===n.length&&(this.wildcard?delete c._listeners:delete this._events[e]),this.emit("removeListener",e,r),this}(n===r||n.listener&&n.listener===r||n._origin&&n._origin===r)&&(this.wildcard?delete c._listeners:delete this._events[e],this.emit("removeListener",e,r))}return!function e(r){if(r!==t){var i=Object.keys(r);for(var n in i){var o=i[n],s=r[o];s instanceof Function||"object"!=typeof s||null===s||(Object.keys(s).length>0&&e(r[o]),0===Object.keys(s).length&&delete r[o])}}}(this.listenerTree),this},a.prototype.offAny=function(e){var t,r=0,i=0;if(e&&this._all&&this._all.length>0){for(r=0,i=(t=this._all).length;r<i;r++)if(e===t[r]){t.splice(r,1),this.emit("removeListenerAny",e);break}}else{for(r=0,i=(t=this._all).length;r<i;r++)this.emit("removeListenerAny",t[r]);this._all=[]}return this},a.prototype.removeListener=a.prototype.off,a.prototype.removeAllListeners=function(e){if(0==arguments.length)return this._events&&n.call(this),this;if(this.wildcard)for(var t="string"==typeof e?e.split(this.delimiter):e.slice(),r=l.call(this,null,t,this.listenerTree,0),i=0;i<r.length;i++)r[i]._listeners=null;else this._events&&(this._events[e]=null);return this},a.prototype.listeners=function(e){if(this.wildcard){var t=[],r="string"==typeof e?e.split(this.delimiter):e.slice();return l.call(this,t,r,this.listenerTree,0),t}return this._events||n.call(this),this._events[e]||(this._events[e]=[]),i(this._events[e])||(this._events[e]=[this._events[e]]),this._events[e]},a.prototype.eventNames=function(){return Object.keys(this._events)},a.prototype.listenerCount=function(e){return this.listeners(e).length},a.prototype.listenersAny=function(){return this._all?this._all:[]},"function"==typeof define&&define.amd?define(function(){return a}):e.exports=a}()}),s("5vzpD",function(t,r){e(t.exports,"mediaState",()=>o("dAAeA").mediaState),e(t.exports,"isClientBasedAuth",()=>o("3HtSd").isClientBasedAuth),e(t.exports,"authToOwner",()=>o("3HtSd").authToOwner),e(t.exports,"ChunkHashAlgorithm",()=>o("9zykx").ChunkHashAlgorithm),o("dAAeA"),o("3HtSd"),o("9zykx")}),s("dPp8R",function(e,t){o("5vzpD");var r=o("9zykx"),i=o("3HtSd");class n extends o("dIgeg").BaseMediaClientError{get attributes(){let{reason:e,innerError:t}=this;return{reason:e,innerError:t}}constructor(e,t){super(e,void 0,t)}}let s=(e,t)=>new Promise((r,i)=>{setTimeout(i,e,t)}),a=1e4,l=async(e,t,r=a)=>{let i,l=performance.now(),c=!1,u=(0,o("dh538").fg)("platform_media_auth_provider_analytics")?e(t).then(e=>{let i=performance.now()-l;if(c){let e=new n("authProviderTimedOut");o("eGqQQ").globalMediaEventEmitter.emit("auth-provider-failed",{durationMs:i,timeoutMs:r,authContext:t,error:e})}else c=!0,o("eGqQQ").globalMediaEventEmitter.emit("auth-provider-succeeded",{durationMs:i,timeoutMs:r,authContext:t});return e}).catch(e=>{let i=performance.now()-l;throw c=!0,o("eGqQQ").globalMediaEventEmitter.emit("auth-provider-failed",{durationMs:i,timeoutMs:r,authContext:t,error:e}),e}):e(t);try{i=await Promise.race([u,s(r,new n("authProviderTimedOut"))])}catch(e){if(!c&&(0,o("dh538").fg)("platform_media_auth_provider_analytics")&&(c=!0),e instanceof n)throw e;throw new n("failedAuthProvider",e instanceof Error?e:void 0)}if(!i)throw new n("emptyAuth");return i},c=e=>{if(!e)throw new n("missingInitialAuth");return e},u="media-api-region",d="media-api-environment",p=(e,t=!1)=>({...e,"max-age":e?.["max-age"]??o("3x2Xc").FILE_CACHE_MAX_AGE,allowAnimated:e?.allowAnimated??!0,mode:e?.mode??"crop",...t?{width:o("3x2Xc").MAX_RESOLUTION,height:o("3x2Xc").MAX_RESOLUTION}:{}}),h={Accept:"application/json","Content-Type":"application/json"},f=e=>{let t=e;return(0,o("4HHlm").isCDNEnabled)()&&(t+="/cdn"),t},m=e=>window&&window.sessionStorage&&window.sessionStorage.getItem(e)||void 0,g=(e,t)=>{t&&window&&window.sessionStorage&&window.sessionStorage.getItem(e)!==t&&window.sessionStorage.setItem(e,t)};e.exports.MediaStore=class{async removeCollectionFile(e,t,r,i){let n={...{method:"PUT",endpoint:"/collection/{collectionName}"},authContext:{collectionName:t},headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({actions:[{action:"remove",item:{type:"file",id:e,occurrenceKey:r}}]}),traceContext:i};await this.request(`/collection/${t}`,n)}createUpload(e=1,t,r){let i={method:"POST",endpoint:"/upload"},n={...i,authContext:{collectionName:t},params:{createUpTo:e,hashAlgorithm:this._chunkHashAlgorithm},headers:{Accept:"application/json"},traceContext:r};return this.request("/upload",n).then((0,o("4lI5c").createMapResponseToJson)(i))}async uploadChunk(e,t,r,i,n,o){await this.request(`/chunk/${e}`,{method:"PUT",endpoint:"/chunk/{etag}",params:{uploadId:r,partNumber:i},authContext:{collectionName:n},body:t,traceContext:o})}createFileFromUpload(e,t={},r){let i={method:"POST",endpoint:"/file/upload"},n={...i,authContext:{collectionName:t.collection},params:t,headers:h,body:JSON.stringify(e),traceContext:r};return this.request("/file/upload",n).then((0,o("4lI5c").createMapResponseToJson)(i))}getRejectedResponseFromDescriptor(e,t){return{fileId:e.fileId,error:{code:"ExceedMaxFileSizeLimit",title:"The expected file size exceeded the maximum size limit.",href:"https://dt-api-filestore--app.ap-southeast-2.dev.atl-paas.net/api.html#BadRequest",limit:t,size:e.size}}}async touchFiles(e,t={},r){let i={method:"POST",endpoint:"/upload/createWithFiles"},n={...i,authContext:{collectionName:t.collection},headers:h,body:JSON.stringify(e),traceContext:r,params:{hashAlgorithm:this._chunkHashAlgorithm}};return this.request("/upload/createWithFiles",n).then((0,o("4lI5c").createMapResponseToJson)(i))}getFile(e,t={},r){let i={method:"GET",endpoint:"/file/{fileId}"},n={...i,authContext:{collectionName:t.collection},params:t,traceContext:r};return this.request(`/file/${e}`,n).then((0,o("4lI5c").createMapResponseToJson)(i))}async getFileImageURL(e,t){let{collection:r}=t||{},i=await this.resolveAuth({collectionName:r});return this.createFileImageURL(e,i,t)}getFileImageURLSync(e,t){let r=this.resolveInitialAuth();return this.createFileImageURL(e,r,t)}createFileImageURL(e,t,r){let i={params:p(r),auth:t},n=f("image");return(0,o("deNRp").isPathBasedEnabled)()?(0,o("deNRp").mapToPathBasedUrl)((0,o("4lI5c").createUrl)(`${t.baseUrl}/file/${e}/${n}`,i)):(0,o("4HHlm").mapToMediaCdnUrl)((0,o("4lI5c").createUrl)(`${t.baseUrl}/file/${e}/${n}`,i),t.token)}async getFileBinary(e,t,r,i=o("3x2Xc").FILE_CACHE_MAX_AGE){let n=f("binary"),s={method:"GET",endpoint:`/file/{fileId}/${n}`},a={...s,authContext:{collectionName:t},headers:{},params:{collection:t,"max-age":`${i}`}};return this.request(`/file/${e}/${n}`,a,r,!0).then((0,o("4lI5c").createMapResponseToBlob)(s))}async getFileBinaryURL(e,t,r=o("3x2Xc").FILE_CACHE_MAX_AGE){let i=await this.resolveAuth({collectionName:t}),n={params:{dl:!0,collection:t,"max-age":r},auth:i},s=f("binary");return(0,o("deNRp").isPathBasedEnabled)()?(0,o("deNRp").mapToPathBasedUrl)((0,o("4lI5c").createUrl)(`${i.baseUrl}/file/${e}/${s}`,n)):(0,o("4HHlm").mapToMediaCdnUrl)((0,o("4lI5c").createUrl)(`${i.baseUrl}/file/${e}/${s}`,n),i.token)}async getArtifactURL(e,t,r,i=o("3x2Xc").FILE_CACHE_MAX_AGE){let n=(0,o("cMT0u").getArtifactUrl)(e,t);if(!n)throw Error(`artifact ${t} not found`);let s=await this.resolveAuth({collectionName:r}),a=(0,o("4HHlm").mapToMediaCdnUrl)((0,o("4lI5c").createUrl)(`${s.baseUrl}${n}`,{params:{collection:r,"max-age":i},auth:s}),s.token);return(0,o("deNRp").isPathBasedEnabled)()?(0,o("deNRp").mapToPathBasedUrl)(a):a}async getImage(e,t,r,i,n){let s=f("image"),a={method:"GET",endpoint:`/file/{fileId}/${s}`},l={...a,authContext:{collectionName:t&&t.collection},params:p(t,i),headers:{},traceContext:n,addMediaClientParam:!0};return this.request(`/file/${e}/${s}`,l,r,!0).then((0,o("4lI5c").createMapResponseToBlob)(a))}async getItems(e,t,r,i){let n=e.map(e=>({type:"file",id:e,collection:t})),s={method:"POST",endpoint:"/items"},a={...s,authContext:{collectionName:t},headers:h,body:JSON.stringify({descriptors:n,includeHashForDuplicateFiles:i}),traceContext:r};return this.request("/items",a).then((0,o("4lI5c").createMapResponseToJson)(s))}async getImageMetadata(e,t,r){let i={method:"GET",endpoint:"/file/{fileId}/image/metadata"},n={...i,authContext:{collectionName:t&&t.collection},params:t,traceContext:r};return this.request(`/file/${e}/image/metadata`,n).then((0,o("4lI5c").createMapResponseToJson)(i))}async getDocumentContent(e,t,r){let i=!t.password,n=i?f("contents"):"contents",s={method:"GET",endpoint:`/file/{fileId}/document/${n}`},a=t.password?{"x-document-authorization":`Basic ${t.password}`}:{},l={...s,authContext:{collectionName:t.collectionName},headers:a,params:{collection:t.collectionName,pageStart:t.pageStart,pageEnd:t.pageEnd,"max-age":i?o("3x2Xc").FILE_CACHE_MAX_AGE:0},traceContext:r};return this.request(`/file/${e}/document/${n}`,l).then((0,o("4lI5c").createMapResponseToJson)(s))}async getDocumentPageImage(e,t,r){let i=!t.password,n=i?f("page"):"page",s={method:"GET",endpoint:`/file/{fileId}/document/${n}`},a=t.password?{"x-document-authorization":`Basic ${t.password}`}:{},l={...s,authContext:{collectionName:t.collectionName},headers:a,params:{collection:t.collectionName,page:t.page,zoom:t.zoom,"max-age":i?o("3x2Xc").FILE_CACHE_MAX_AGE:0},traceContext:r};return this.request(`/file/${e}/document/${n}`,l).then((0,o("4lI5c").createMapResponseToBlob)(s))}async appendChunksToUpload(e,t,r,i){let n={...{method:"PUT",endpoint:"/upload/{uploadId}/chunks"},authContext:{collectionName:r},headers:h,body:JSON.stringify(t),traceContext:i};await this.request(`/upload/${e}/chunks`,n)}copyFileWithToken(e,t,r){let i={method:"POST",endpoint:"/file/copy/withToken"},n={...i,authContext:{collectionName:t.collection},params:t,headers:h,body:JSON.stringify(e),traceContext:r};return this.request("/file/copy/withToken",n).then((0,o("4lI5c").createMapResponseToJson)(i))}copyFile(e,t,r){let i={method:"POST",endpoint:"/v2/file/copy"},n={...i,authContext:{collectionName:t.collection},params:t,headers:h,body:JSON.stringify({id:e}),traceContext:r,clientOptions:{retryOptions:{shouldRetryError:e=>(0,o("4lI5c").defaultShouldRetryError)(e)||(0,o("2ASLw").isRequestError)(e)&&e?.metadata?.statusCode===401}}};return this.request("/v2/file/copy",n).then((0,o("4lI5c").createMapResponseToJson)(i))}async registerCopyIntents(e,t,r){let i={...{method:"POST",endpoint:"/file/copy/intents"},headers:h,body:JSON.stringify({files:e}),traceContext:t,resolvedAuth:r};await this.request("/file/copy/intents",i)}async request(e,t={method:"GET",endpoint:void 0,authContext:{}},r,n){let{method:s,endpoint:a,authContext:l,params:c,headers:p,body:h,clientOptions:f,traceContext:m,addMediaClientParam:y,resolvedAuth:v}=t,x=v??await this.resolveAuth(l),b=(0,i.isClientBasedAuth)(x)?x.clientId:void 0,E=(0,o("4lI5c").extendTraceContext)(m),S=y?{...c,clientId:b}:c,w=`${x.baseUrl}${e}`;n&&(w=(0,o("4HHlm").mapToMediaCdnUrl)(w,x.token)),(0,o("deNRp").isPathBasedEnabled)()&&(w=(0,o("deNRp").mapToPathBasedUrl)(w));let k=await (0,o("6Nh2I").request)(w,{method:s,endpoint:a,auth:x,params:S,headers:p,body:h,clientOptions:f,traceContext:E},r);return g(u,k.headers.get("x-media-region")),g(d,k.headers.get("x-media-env")),k}async testUrl(e,t={}){let{traceContext:r}=t;await (0,o("6Nh2I").request)(e,{method:"HEAD",traceContext:(0,o("4lI5c").extendTraceContext)(r),clientOptions:{retryOptions:{maxAttempts:1}}})}get chunkHashAlgorithm(){return this._chunkHashAlgorithm}constructor(e){this.config=e,this._chunkHashAlgorithm=void 0,this.getArtifactBinary=async(e,t,{collectionName:r,abortController:i,maxAge:n=o("3x2Xc").FILE_CACHE_MAX_AGE,traceContext:s})=>{let a={method:"GET",endpoint:"artifact-cdn-url"},l=(0,o("4lI5c").extendTraceContext)(s),c={...a,traceContext:l},u=await this.getArtifactURL(e,t,r,n);return(0,o("6Nh2I").request)(u,c,i).then((0,o("4lI5c").createMapResponseToBlob)(a))},this.uploadArtifact=async(e,t,r,i,n)=>{let s={method:"POST",endpoint:"/file/{fileId}/artifact/binary"},a={Accept:"application/json","Content-Type":t.type},l={...r,name:t.name,collection:i},c={...s,authContext:{collectionName:i,access:[{type:"file",id:e,actions:["update"]}]},headers:a,params:l,body:t,traceContext:n};return this.request(`/file/${e}/artifact/binary`,c).then((0,o("4lI5c").createMapResponseToJson)(s))},this.deleteArtifact=async(e,t,r,i)=>{await this.request(`/file/${e}/artifact/${t}`,{method:"DELETE",endpoint:"/file/{fileId}/artifact/{artifactName}",authContext:{collectionName:r,access:[{type:"file",id:e,actions:["update"]}]},traceContext:i,params:{collection:r}})},this.resolveAuth=e=>l(this.config.authProvider,e,this.config.authProviderTimeout),this.resolveInitialAuth=()=>c(this.config.initialAuth),this._chunkHashAlgorithm=e.chunkHashAlgorithm||r.ChunkHashAlgorithm.Sha256}},e.exports.getMediaEnvironment=()=>m(d),e.exports.getMediaRegion=()=>m(u)}),s("3x2Xc",function(e,t){let r=5*o("I3W8S").DATA_UNIT.MB,i=2*o("I3W8S").DATA_UNIT.TB;e.exports.RECENTS_COLLECTION="recents",e.exports.FILE_CACHE_MAX_AGE=2592e3,e.exports.MAX_RESOLUTION=4096,e.exports.CHUNK_SIZE=r,e.exports.PROCESSING_BATCH_SIZE=1e3,e.exports.MAX_UPLOAD_FILE_SIZE=i}),s("I3W8S",function(e,t){var r,i=((r={})[r.MB=1048576]="MB",r[r.GB=0x40000000]="GB",r[r.TB=0x10000000000]="TB",r);e.exports.isNotFoundMediaItemDetails=e=>"type"in e&&"not-found"===e.type,e.exports.DATA_UNIT=i}),s("cMT0u",function(e,t){e.exports.getArtifactUrl=(e,t)=>(0,o("4HHlm").isCDNEnabled)()&&e[t]?.url?`${e[t]?.url}/cdn`:e[t]?.url}),s("2ASLw",function(e,t){class r extends o("dIgeg").BaseMediaClientError{get attributes(){let{reason:e,metadata:{method:t,endpoint:r,mediaRegion:i,mediaEnv:n,attempts:o,clientExhaustedRetries:s,statusCode:a,traceContext:l}={},innerError:c}=this;return{reason:e,method:t,endpoint:r,mediaRegion:i,mediaEnv:n,attempts:o,clientExhaustedRetries:s,statusCode:a,metadata:{traceContext:l},innerError:c}}constructor(e,t,r){super(e,t,r)}}e.exports.RequestError=r,e.exports.isRequestError=function(e){return e instanceof r}}),s("dIgeg",function(e,t){class r extends Error{constructor(e,t,r){super(e),this.reason=e,this.metadata=t,this.innerError=r,Object.setPrototypeOf(this,new.target.prototype),"captureStackTrace"in Error&&Error.captureStackTrace(this,new.target)}}class i extends r{get attributes(){return{reason:this.reason}}constructor(e,t,r){super(e,t,r)}}e.exports.BaseMediaClientError=r,e.exports.CommonMediaClientError=i,e.exports.isCommonMediaClientError=function(e){return!!e&&(e instanceof i||"string"==typeof e.reason&&("metadata"in e||void 0===e.metadata)&&("innerError"in e||void 0===e.innerError))},e.exports.toCommonMediaClientError=e=>{let t=e.details?.error;return new i(t?.reason||"unknown-reason",t?.metadata,t?.innerError)},e.exports.fromCommonMediaClientError=(e,t,r)=>({status:"error",id:e,occurrenceKey:t,reason:r.reason,details:{error:{reason:r?.reason,metadata:r?.metadata,innerError:r?.innerError},...r?.attributes},message:r?.message})}),s("7a3Fn",function(e,t){e.exports.getMediaClientErrorReason=function(e){return e instanceof Object&&"attributes"in e&&e.attributes instanceof Object&&"reason"in e.attributes&&e instanceof Error?e.attributes.reason:"unknown"}}),s("6Nh2I",function(e,t){var r=()=>{if("undefined"!=typeof window&&void 0!==window.navigator)return window.navigator};async function i(e,t={},n){let{method:s="GET",endpoint:a,auth:l,params:c,headers:u,body:d,clientOptions:p={},traceContext:h}=t,{retryOptions:f}=p,m={method:s,endpoint:a,traceContext:h},g=()=>fetch((0,o("4lI5c").createUrl)(e,{params:c}),{method:s,body:d,headers:(0,o("4lI5c").extendHeaders)(u,l,h),signal:n&&n.signal}).then((0,o("4lI5c").createProcessFetchResponse)(m));if((0,o("dh538").fg)("platform_media_retry_edge_error"))try{return await (0,o("4lI5c").fetchRetry)(g,m,{...f,shouldRetryError:e=>!((0,o("4lI5c").isFetchNetworkError)(e)&&r()?.userAgent.includes("Edg/"))&&(0,o("4lI5c").defaultShouldRetryError)(e)})}catch(t){if((0,o("4lI5c").isFetchNetworkError)(t)&&r()?.userAgent.includes("Edg/"))return(0,o("4lI5c").fetchRetry)(()=>fetch((0,o("4lI5c").createUrl)((0,o("deNRp").mapRetryUrlToPathBasedUrl)(e).toString(),{params:c}),{method:s,body:d,headers:(0,o("4lI5c").extendHeaders)(u,l,h),signal:n&&n.signal}).then((0,o("4lI5c").createProcessFetchResponse)(m)),m,f);throw t}return(0,o("4lI5c").fetchRetry)(g,m,f)}e.exports.request=i}),s("fCrf0",function(e,t){function r(e){return[...Array(2*e)].map(()=>Math.floor(16*Math.random()).toString(16)).join("")}function i(e){let t;if(window?.crypto)try{t=Array.from(window.crypto.getRandomValues(new Uint8Array(e))).map(e=>e.toString(16).padStart(2,"0")).join("")}catch(i){t=r(e)}else t=r(e);return t}e.exports.isUndefined=e=>void 0===e,e.exports.omitBy=(e,t)=>Object.fromEntries(Object.entries(e).filter(([,e])=>!t(e))),e.exports.getRandomHex=i,e.exports.getRandomTelemetryId=function(){return i(8)}}),s("eGqQQ",function(e,t){o("5vzpD");var r=o("dAAeA");e.exports.globalMediaEventEmitter={on(e,t){r.mediaState.eventEmitter&&r.mediaState.eventEmitter.on(e,t)},off(e,t){r.mediaState.eventEmitter&&r.mediaState.eventEmitter.off(e,t)},emit(e,t){if(r.mediaState.eventEmitter)return r.mediaState.eventEmitter.emit(e,t)}}}),s("fO7zn",function(r,i){e(r.exports,"FileFetcherError",()=>o("eiASo").FileFetcherError);var n,s,a=o("8v4h5"),l=o("2QGAA"),c=o("cUcZ5");o("5vzpD");var u=o("3HtSd"),d=o("5NXxU"),p=o("iBgx8"),h=o("e2TX1");n=o("2e4BA").PromiseObservable.create,s=o("loLAD").RangeObservable.create;let f=(e,{size:t})=>s(0,Math.ceil(e.size/t)).pipe((0,l.map)(r=>({partNumber:r+1,blob:e.slice(r*t,(r+1)*t)})));var m=o("YgydF"),g=o("XrDsM");async function y(e){return"string"==typeof e?await fetch(e).then(e=>e.blob()):e}let v=(e,t,r)=>{let i={notifyIfReady:()=>!1};return e.then(e=>{i.notifyIfReady=()=>(t.next(e),t.complete(),!0),r(i)},e=>{i.notifyIfReady=()=>(t.error(e),!0),r(i)}),i},x=e=>{let t=[],r=()=>{let e=t.findIndex(e=>!e.notifyIfReady());e>0&&t.splice(0,e)};return i=>new(0,m.Observable)(n=>{t.push(v(e(i),n,r))})},b=(e,t)=>(0,g.mergeMap)(x(e),t),E=e=>t=>e(t.blob).then(e=>({blob:t.blob,hash:`${e}-${t.blob.size}`,partNumber:t.partNumber})),S=(e,{hasher:t,concurrency:r})=>b(E(t),r)(e),w=(e,t)=>e.pipe(b(e=>t.uploader(e).then(()=>e),t.concurrency)),k=(e,t)=>e.pipe((0,h.bufferCount)(t.batchSize)).pipe((0,p.concatMap)(e=>t.processor?t.processor(e).then(()=>e):Promise.resolve(e)));var _=o("gosUm");let j=(e,t,r)=>n(y(e)).pipe((0,p.concatMap)(e=>{let{chunkSize:i}=t,{onProgress:n}=r,o=Math.ceil(e.size/i),s=S(f(e,{size:i}),{concurrency:t.hashingConcurrency,hasher:t.hashingFunction}),a=0,l=w(s,{concurrency:t.uploadingConcurrency,uploader:t.uploadingFunction});return n&&(l=l.pipe((0,d.tap)(()=>{n((a+=1)/o)}))),k(l,{batchSize:t.processingBatchSize,processor:t.processingFunction}).pipe((0,p.concatMap)(e=>(0,_.from)(e)),(0,h.bufferCount)(o))})),M=(e,t,r)=>j(e,t,r);o("5vzpD");var I=o("9zykx");let A=null,O=null,T=async e=>{try{if(e===I.ChunkHashAlgorithm.Sha256){if(!O){let{SimpleHasher:e}=await o("ansNH");O=new e}return O}}catch(e){}let{SimpleHasher:t}=await o("bCzM0");return new t};class C extends o("dIgeg").BaseMediaClientError{get attributes(){let{reason:e,metadata:{id:t,collectionName:r,occurrenceKey:i}}=this;return{reason:e,id:t,collectionName:r,occurrenceKey:i}}constructor(e,t){super(e,t,void 0),this.id=void 0,this.id=t.id}}let R="fileSizeExceedsLimit",N=e=>{if(e>o("3x2Xc").MAX_UPLOAD_FILE_SIZE)throw Error(R);return e<=5*o("I3W8S").DATA_UNIT.GB?5*o("I3W8S").DATA_UNIT.MB:e>5*o("I3W8S").DATA_UNIT.GB&&e<=50*o("I3W8S").DATA_UNIT.GB?50*o("I3W8S").DATA_UNIT.MB:e>50*o("I3W8S").DATA_UNIT.GB&&e<=.95*o("I3W8S").DATA_UNIT.TB?100*o("I3W8S").DATA_UNIT.MB:210*o("I3W8S").DATA_UNIT.MB},F=async(e,t)=>(await T(t)).hash(e),P=(e,t,r,i)=>async n=>await e.uploadChunk(n.hash,n.blob,await t,n.partNumber,r,i),D=(e,t,r,i)=>{let n=0;return async o=>{await e.appendChunksToUpload(await t,{chunks:B(o),offset:n},r,i),n+=o.length}},L=async(e,t,r,i,n)=>{let{collection:o,name:s,mimeType:a}=e,{id:l,occurrenceKey:c}=r,u=e.size?{uploadId:i,name:s,mimeType:a,conditions:{size:e.size}}:{uploadId:i,name:s,mimeType:a};return t.createFileFromUpload(u,{occurrenceKey:c,collection:o,replaceFileId:l},n)},U=(e,t,r,i,n)=>{let{content:s,collection:a}=e,{deferredUploadId:l,id:c,occurrenceKey:u}=r,d=o("3x2Xc").CHUNK_SIZE;try{s instanceof Blob&&(d=N(s.size))}catch(e){return e instanceof Error&&e.message===R&&i?.onUploadFinish(new C(e.message,{id:c,collectionName:a,occurrenceKey:u})),{cancel:()=>{i?.onUploadFinish("canceled")}}}let h=M(s,{hashingFunction:e=>F(e,t.chunkHashAlgorithm),hashingConcurrency:5,chunkSize:d,uploadingConcurrency:3,uploadingFunction:P(t,l,a,n),processingBatchSize:o("3x2Xc").PROCESSING_BATCH_SIZE,processingFunction:D(t,l,a,n)},{onProgress(e){i&&i.onProgress(e)}}),f=i&&i.onUploadFinish||(()=>{}),m=(0,_.from)(l).pipe((0,p.concatMap)(i=>h.pipe((0,p.concatMap)(()=>(0,_.from)(L(e,t,r,i,n)))))).subscribe({error:e=>f(e),complete:()=>f()});return{cancel:()=>{m.unsubscribe(),f("canceled")}}},B=e=>e.map(e=>e.hash);var z=o("chIYi");let G=e=>{if(!(e.content instanceof Blob))return"unknown";{let t=e.content.type;return(0,o("24z7I").getMediaTypeFromMimeType)(t)}},q=(e,t)=>(0,o("hZ6O7").isErrorFileState)(e)||"unknown"!==e.mediaType?{}:{mediaType:t},$=e=>{let t=atob(e.split(",")[1]),r=[];for(let e=0;e<t.length;e+=512){let i=t.slice(e,e+512),n=new Uint8Array(i.split("").map((e,t)=>i.charCodeAt(t)));r.push(n)}return new Blob(r,{type:"image/jpeg"})};function W(e){return{subscribe:t=>{let r=(t instanceof Function,e.subscribe(t));return{unsubscribe:()=>{r.unsubscribe()}}}}}let H=(e,t=new(0,a.Subscription))=>new Promise((r,i)=>t.add(e.subscribe({next:e=>{r(e),t.unsubscribe()},error:e=>{i(e),t.unsubscribe()}})));o("9EPd0");var J=o("eUfuX"),V=o("1bFdN");let Z=e=>!!e.authProvider,K=e=>!!e.authProvider;r.exports.FileFetcherImpl=class{getFileState(e,r={}){let{collectionName:i,occurrenceKey:n,includeHashForDuplicateFiles:s,forceRefresh:a}=r;if(!t(z)(e)){let t=(0,o("3iVuE").createMediaSubject)(),r=new(0,o("eiASo").FileFetcherError)("invalidFileId",{id:e,collectionName:i,occurrenceKey:n}),s=this.getErrorFileState(r,e,n);return t.error(r),this.setFileState(e,s),W(t)}return a&&(0,o("4vGex").getFileStreamsCache)().remove(e),W((0,o("4vGex").getFileStreamsCache)().getOrInsert(e,()=>{let t=this.createDownloadFileStream(e,i,void 0,s,a);return t.subscribe({next:t=>{this.setFileState(e,t)},error:t=>{let r=this.getErrorFileState(t,e,n);this.setFileState(e,r)}}),t}))}getCurrentState(e,t){return H(this.getFileState(e,t))}getArtifactURL(e,t,r){return this.mediaApi.getArtifactURL(e,t,r)}getFileBinaryURL(e,t,r){return this.mediaApi.getFileBinaryURL(e,t,r)}touchFiles(e,t,r){return this.mediaApi.touchFiles({descriptors:e},{collection:t},r).then(({data:e})=>e)}generateUploadableFileUpfrontIds(e,r){let i=t(c)(),n=t(c)(),o=this.touchFiles([{fileId:i,occurrenceKey:n,collection:e}],e,r).then(e=>e.created[0].uploadId);return{id:i,occurrenceKey:n,deferredUploadId:o}}async uploadExternal(e,t,r){let i=this.generateUploadableFileUpfrontIds(t,r),{id:n,occurrenceKey:s}=i,a=(0,o("3iVuE").createMediaSubject)(),l=fetch(e).then(e=>e.blob()).catch(()=>void 0),c=new Promise(async(e,t)=>{let r=await l;r||t("Could not fetch the blob"),e({value:r,origin:"remote"})}),u=e.split("/").pop()||"",d={status:"processing",name:u,size:0,mediaType:"unknown",mimeType:"",id:n,occurrenceKey:s,preview:c};return a.next(d),(0,o("4vGex").getFileStreamsCache)().set(n,a),this.setFileState(n,d),new Promise(async(e,d)=>{let p,h=await l;if(!h)return d("Could not download remote file");let{type:f,size:m}=h,g=(0,o("24z7I").getMediaTypeFromMimeType)(f);a.next({status:"processing",name:u,size:m,mediaType:g,mimeType:f,id:n,occurrenceKey:s,preview:c}),this.upload({content:h,mimeType:f,collection:t,name:u,size:m},void 0,i,r);try{p=await (0,o("ezhv2").getDimensionsFromBlob)(g,h)}catch(e){d(e);return}e({dimensions:p,mimeType:f,uploadableFileUpfrontIds:i})})}upload(e,t,r,i){let{collection:n}=e,s=r||this.generateUploadableFileUpfrontIds(n,i),{id:c,occurrenceKey:u}=s,d=this.getUploadingFileStateBase(e,s),p=(0,o("3iVuE").createMediaSubject)();(0,o("4vGex").getFileStreamsCache)().set(c,p);let h=e=>{let t={status:"uploading",...d,progress:e};p.next(t),this.setFileState(c,t)},f=new(0,a.Subscription),{cancel:m}=U(e,this.mediaApi,s,{onUploadFinish:e=>{if(e){let t=this.getErrorFileState(e,c,u);return this.setFileState(c,t),p.error(e)}f=this.createDownloadFileStream(c,n,u).pipe((0,l.map)(e=>({...d,...e,...q(e,d.mediaType)}))).subscribe({next:e=>{p.next(e),this.setFileState(c,e)},error:e=>{let t=this.getErrorFileState(e,c,u);p.error(e),this.setFileState(c,t)},complete:p.complete})},onProgress:h},i);return t?.setAbort(()=>{m(),f.unsubscribe()}),setTimeout(h,0,0),W(p)}async downloadBinary(e,t="download",r,i){let n=await this.mediaApi.getFileBinaryURL(e,r);(0,o("dfdbH").downloadUrl)(n,{name:t}),o("eGqQQ").globalMediaEventEmitter.emit("media-viewed",{fileId:e,isUserCollection:r===o("3x2Xc").RECENTS_COLLECTION,viewingLevel:"download"}),await this.mediaApi.testUrl(n,{traceContext:i})}async registerCopyIntent(e,t){let r=await this.mediaApi.resolveAuth({collectionName:t}),i={id:e,collectionName:t,resolvedAuth:r},n=await this.copyIntentRegisterationBatcher.load(i);if(n)throw(0,o("4lI5c").defaultShouldRetryError)(n)&&this.copyIntentRegisterationBatcher.clear(i),n}async copyFileWithToken(e,t,r){let{authProvider:i,collection:n,id:s}=e,{authProvider:a,collection:l,replaceFileId:c,occurrenceKey:d}=t,p=t.mediaStore||new(0,o("dPp8R").MediaStore)({authProvider:a}),h=(0,u.authToOwner)(await i({collectionName:n})),{data:f}=await p.copyFileWithToken({sourceFile:{id:s,collection:n,owner:h}},{collection:l,replaceFileId:c,occurrenceKey:d},r);return f}async copyFileWithIntent(e,t,r){let{data:i}=await this.mediaApi.copyFile(e.id,{sourceCollection:e.collection,collection:t.collection,replaceFileId:t.replaceFileId},r);return i}async copyFile(e,t,r={},i){let n,{id:s}=e,{collection:a,replaceFileId:l,occurrenceKey:c}=t,{preview:u,mimeType:d}=r,p=(0,o("4vGex").getFileStreamsCache)();try{let r,l={...r=Z(e)&&K(t)?await this.copyFileWithToken(e,t,i):await this.copyFileWithIntent(e,t,i),...d?{mimeType:d}:void 0},{id:h,mimeType:f}=l,m=f?(0,o("24z7I").getMediaTypeFromMimeType)(f):"unknown",g=(0,o("hZ6O7").mapMediaFileToFileState)({data:l}),y=p.get(h)||(0,o("3iVuE").createMediaSubject)(),v=!(0,o("hZ6O7").isErrorFileState)(g)&&u?{preview:u}:{};if(!(0,o("hZ6O7").isFinalFileState)(g)&&f&&await (0,o("kSxxi").shouldFetchRemoteFileStates)(m,f,u)){let e={...g,...q(g,m),...v};y.next(e),this.setFileState(h,e),n=this.createDownloadFileStream(h,a,c).subscribe({next:e=>{let t={...e,...q(e,m),...!(0,o("hZ6O7").isErrorFileState)(e)&&v};return this.setFileState(h,t),y.next(t)},error:e=>{let t=this.getErrorFileState(e,s,c);return this.setFileState(h,t),y.error(e)},complete:()=>y.complete()})}else if(!(0,o("hZ6O7").isProcessingFileState)(g)){let e={...g,...!(0,o("hZ6O7").isErrorFileState)(g)&&v};y.next(e),this.setFileState(h,e)}return p.has(h)||(0,o("4vGex").getFileStreamsCache)().set(h,y),r}catch(e){if(n&&n.unsubscribe(),l){let t=p.get(l),r=this.store.getState().files[l];t?t.error(e):p.set(s,(0,o("3iVuE").createMediaSubject)(e));let i=r?l:s,n=this.getErrorFileState(e,s,c);this.setFileState(i,n)}throw e}}constructor(e,r=J.mediaStore){this.mediaApi=e,this.store=r,this.dataloader=void 0,this.copyIntentRegisterationBatcher=void 0,this.getErrorFileState=(e,t,r)=>{if((0,o("dIgeg").isCommonMediaClientError)(e))return(0,o("dIgeg").fromCommonMediaClientError)(t,r,e);if("string"==typeof e){let i=new(0,o("dIgeg").CommonMediaClientError)(e);return(0,o("dIgeg").fromCommonMediaClientError)(t,r,i)}{let i=new(0,o("dIgeg").CommonMediaClientError)(e?.reason||"unknown",e?.metadata,e?.innerError);return(0,o("dIgeg").fromCommonMediaClientError)(t,r,i)}},this.setFileState=(e,t)=>{this.store.setState(r=>{r.files[e]=t})},this.createDownloadFileStream=(e,t,r,i,n)=>{let s=(0,o("3iVuE").createMediaSubject)(),a=new(0,o("5h2n5").PollingFunction);return a.onError=e=>s.error(e),a.execute(async()=>{n&&this.dataloader.clear({id:e,collectionName:t,includeHashForDuplicateFiles:i});let l=await this.dataloader.load({id:e,collectionName:t,includeHashForDuplicateFiles:i});if((0,o("I3W8S").isNotFoundMediaItemDetails)(l))throw new(0,o("eiASo").FileFetcherError)("emptyItems",{id:e,collectionName:t,occurrenceKey:r,traceContext:l.metadataTraceContext});if((0,o("ld7ZZ").isEmptyFile)(l))throw new(0,o("eiASo").FileFetcherError)("zeroVersionFile",{id:e,collectionName:t,occurrenceKey:r,traceContext:l.metadataTraceContext});let c=(0,o("hZ6O7").mapMediaItemToFileState)(e,l);switch(s.next(c),c.status){case"processing":a.next();break;case"processed":s.complete()}}),s},this.getUploadingFileStateBase=(e,t)=>{let r;"string"==typeof e.content&&(e.content=$(e.content));let{content:i,name:n=""}=e,{id:o,occurrenceKey:s}=t,a=0,l="";return i instanceof Blob&&(a=i.size,l=i.type,r={value:i,origin:"local"}),{id:o,occurrenceKey:s,name:n,size:a,mediaType:G(e),mimeType:l,preview:r}},this.uploadArtifact=async(e,t,r,i,n)=>{let{data:s}=await this.mediaApi.uploadArtifact(e,t,r,i,n),{data:a}=await this.mediaApi.getItems([e],i,n),l=a.items[0].details;return this.setFileState(e,(0,o("hZ6O7").mapMediaItemToFileState)(e,l)),s},this.deleteArtifact=async(e,t,r,i)=>{await this.mediaApi.deleteArtifact(e,t,r,i);let n=this.store.getState().files[e];if(n&&"processed"===n.status&&n.artifacts){let r={...n.artifacts};delete r[t];let i={...n,artifacts:r};this.setFileState(e,i)}},this.getOrFetchFileState=async(e,t)=>this.store.getState().files[e]??await this.getCurrentState(e,{collectionName:t}),this.getDurationOfVideo=async(e,t)=>{let r=await this.getOrFetchFileState(e,t);if("processed"!==r.status||"video"!==r.mediaType||!r.artifacts["video.mp4"])throw Error("File is not a video");if("mediaMetadata"in r&&r.mediaMetadata?.duration)return r.mediaMetadata.duration;let i=new URL(await this.getArtifactURL(r.artifacts,"video.mp4",t)),n=`${i.pathname}${i.search}`,o=await this.mediaApi.request(n,{headers:{Range:"bytes=0-199"}}),s=await o.arrayBuffer(),a=new Uint8Array(s),l=new Uint8Array([109,118,104,100]),c=-1;for(let e=0;e<=a.length-l.length;e++){c=e;for(let t=0;t<l.length;t++)if(a[e+t]!==l[t]){c=-1;break}if(-1!==c)break}if(-1===c)throw Error("Unable to find mvhd bytes");let u=new DataView(s),d=c+16;if(d+8>s.byteLength)return 0;let p=u.getUint32(d,!1),h=u.getUint32(d+4,!1);if(0===p)throw Error("Timescale is invalid");return Math.floor(h/p)},this.getVideoDurations=async e=>{let t=e.map(async({id:e,collectionName:t})=>{try{return await this.getDurationOfVideo(e,t)}catch(e){return -1}});return(await Promise.all(t)).reduce((t,r,i)=>(-1!==r&&(t[e[i].id]=r),t),{})},this.dataloader=(0,o("3vFPy").createFileDataloader)(e),this.copyIntentRegisterationBatcher=new(t(V))(async t=>{let r=t.reduce((e,t)=>{let r=t.resolvedAuth.token;return e[r]=e[r]||[],e[r].some(({id:e,collectionName:r})=>t.id===e&&r===t.collectionName)||e[r].push(t),e},{}),i=[];return await Promise.all(Object.keys(r).map(async t=>{let n={traceId:(0,o("fCrf0").getRandomTelemetryId)(),spanId:(0,o("fCrf0").getRandomTelemetryId)()},s=r[t].map(e=>({id:e.id,collection:e.collectionName})),a=r[t][0].resolvedAuth;try{await e.registerCopyIntents(s,n,a)}catch(e){s.forEach(({id:t,collection:r})=>{i.push({id:t,collection:r,error:e})})}})),t.map(({id:e,collectionName:t})=>i.find(r=>r.id===e&&r.collection===t)?.error)},{maxBatchSize:100,cacheKeyFn:({id:e,collectionName:t="default",resolvedAuth:r})=>`${e}-${t}-${r.token}`})}}}),s("8v4h5",function(t,r){e(t.exports,"Subscription",()=>i,e=>i=e);var i,n=o("fvPwd"),s=o("1SUM9"),a=o("bEhXH"),l=o("3FcLR"),c=o("6LPWz"),u=o("jbEVV");function d(e){return e.reduce(function(e,t){return e.concat(t instanceof u.UnsubscriptionError?t.errors:t)},[])}i=function(){var e;function t(e){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}return t.prototype.unsubscribe=function(){var e,t=!1;if(!this.closed){var r=this._parent,i=this._parents,o=this._unsubscribe,p=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var h=-1,f=i?i.length:0;r;)r.remove(this),r=++h<f&&i[h]||null;if(a.isFunction(o)){var m=l.tryCatch(o).call(this);m===c.errorObject&&(t=!0,e=e||(c.errorObject.e instanceof u.UnsubscriptionError?d(c.errorObject.e.errors):[c.errorObject.e]))}if(n.isArray(p))for(h=-1,f=p.length;++h<f;){var g=p[h];if(s.isObject(g)){var m=l.tryCatch(g.unsubscribe).call(g);if(m===c.errorObject){t=!0,e=e||[];var y=c.errorObject.e;y instanceof u.UnsubscriptionError?e=e.concat(d(y.errors)):e.push(y)}}}if(t)throw new u.UnsubscriptionError(e)}},t.prototype.add=function(e){if(!e||e===t.EMPTY)return t.EMPTY;if(e===this)return this;var r=e;switch(typeof e){case"function":r=new t(e);case"object":if(r.closed||"function"!=typeof r.unsubscribe)return r;if(this.closed)return r.unsubscribe(),r;if("function"!=typeof r._addParent){var i=r;(r=new t)._subscriptions=[i]}break;default:throw Error("unrecognized teardown "+e+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(r),r._addParent(this),r},t.prototype.remove=function(e){var t=this._subscriptions;if(t){var r=t.indexOf(e);-1!==r&&t.splice(r,1)}},t.prototype._addParent=function(e){var t=this._parent,r=this._parents;t&&t!==e?r?-1===r.indexOf(e)&&r.push(e):this._parents=[e]:this._parent=e},(e=new t).closed=!0,t.EMPTY=e,t}()}),s("fvPwd",function(t,r){var i;e(t.exports,"isArray",()=>i,e=>i=e),i=Array.isArray||function(e){return e&&"number"==typeof e.length}}),s("3FcLR",function(t,r){e(t.exports,"tryCatch",()=>i,e=>i=e);var i,n,s=o("6LPWz");function a(){try{return n.apply(this,arguments)}catch(e){return s.errorObject.e=e,s.errorObject}}i=function(e){return n=e,a}}),s("6LPWz",function(t,r){var i;e(t.exports,"errorObject",()=>i,e=>i=e),i={e:{}}}),s("2QGAA",function(e,t){var r=e.exports&&e.exports.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},i=o("axeml");e.exports.map=function(e,t){return function(r){if("function"!=typeof e)throw TypeError("argument is not a function. Are you looking for `mapTo()`?");return r.lift(new n(e,t))}};var n=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.project,this.thisArg))},e}();e.exports.MapOperator=n;var s=function(e){function t(t,r,i){e.call(this,t),this.project=r,this.count=0,this.thisArg=i||this}return r(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){this.destination.error(e);return}this.destination.next(t)},t}(i.Subscriber)}),s("axeml",function(e,t){var r=e.exports&&e.exports.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},i=o("bEhXH"),n=o("8v4h5"),s=o("kmYd0"),a=o("1GCxN"),l=function(e){function t(t,r,i){switch(e.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=s.empty;break;case 1:if(!t){this.destination=s.empty;break}if("object"==typeof t){var n;if((n=t)instanceof l||"syncErrorThrowable"in n&&n[a.rxSubscriber]){var o=t[a.rxSubscriber]();this.syncErrorThrowable=o.syncErrorThrowable,this.destination=o,o.add(this)}else this.syncErrorThrowable=!0,this.destination=new c(this,t);break}default:this.syncErrorThrowable=!0,this.destination=new c(this,t,r,i)}}return r(t,e),t.prototype[a.rxSubscriber]=function(){return this},t.create=function(e,r,i){var n=new t(e,r,i);return n.syncErrorThrowable=!1,n},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parent,t=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=e,this._parents=t,this},t}(n.Subscription);e.exports.Subscriber=l;var c=function(e){function t(t,r,n,o){e.call(this),this._parentSubscriber=t;var a,l=this;i.isFunction(r)?a=r:r&&(a=r.next,n=r.error,o=r.complete,r!==s.empty&&(l=Object.create(r),i.isFunction(l.unsubscribe)&&this.add(l.unsubscribe.bind(l)),l.unsubscribe=this.unsubscribe.bind(this))),this._context=l,this._next=a,this._error=n,this._complete=o}return r(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber;if(this._error)t.syncErrorThrowable?this.__tryOrSetError(t,this._error,e):this.__tryOrUnsub(this._error,e),this.unsubscribe();else if(t.syncErrorThrowable)t.syncErrorValue=e,t.syncErrorThrown=!0,this.unsubscribe();else throw this.unsubscribe(),e}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var r=function(){return e._complete.call(e._context)};t.syncErrorThrowable?this.__tryOrSetError(t,r):this.__tryOrUnsub(r),this.unsubscribe()}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){throw this.unsubscribe(),e}},t.prototype.__tryOrSetError=function(e,t,r){try{t.call(this._context,r)}catch(t){return e.syncErrorValue=t,e.syncErrorThrown=!0,!0}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(l)}),s("4iRIL",function(t,i){e(t.exports,"root",()=>n,e=>n=e);var n,o="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,s=void 0!==r&&r,a="undefined"!=typeof window&&window||s||o;if(n=a,!a)throw Error("RxJS could not find any global context (window, self, global)")}),s("dfdbH",function(e,t){e.exports.downloadUrl=(e,t)=>{let r=!!window.MSInputMethodContext&&!!document.documentMode,i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),n="media-download-iframe",o=document.createElement("a"),s=document.getElementById(n);s||((s=document.createElement("iframe")).style.display="none",s.id=n,s.name=n,document.body.appendChild(s)),o.href=e,t&&t.name&&(o.download=t.name),o.target=r||i?"_blank":n,document.body.appendChild(o),o.click(),document.body.removeChild(o)}}),s("hZ6O7",function(e,t){let r=e=>{let{id:t,name:r,size:i,processingStatus:n,artifacts:o,mediaType:s,mimeType:a,representations:l,createdAt:c,metadataTraceContext:u,hash:d,abuseClassification:p,mediaMetadata:h}=e.data,f={id:t,name:r,size:i,mediaType:s,mimeType:a,artifacts:o,representations:l,createdAt:c,hash:d,metadataTraceContext:u,abuseClassification:p,mediaMetadata:h};switch(n){case"pending":case void 0:return{...f,status:"processing"};case"succeeded":return{...f,status:"processed"};case"failed":return{...f,status:"failed-processing"}}};e.exports.isUploadingFileState=e=>"uploading"===e.status,e.exports.isProcessingFileState=e=>"processing"===e.status,e.exports.isProcessedFileState=e=>"processed"===e.status,e.exports.isErrorFileState=e=>"error"===e.status,e.exports.isFinalFileState=e=>["processed","failed-processing","error"].includes(e.status),e.exports.isNonErrorFinalFileState=e=>["processed","failed-processing"].includes(e.status),e.exports.hasArtifacts=e=>"artifacts"in e&&void 0!==e.artifacts,e.exports.isImageRepresentationReady=e=>{switch(e.status){case"processing":case"processed":case"failed-processing":return!!(e.representations&&e.representations.image);default:return!1}},e.exports.mapMediaFileToFileState=r,e.exports.mapMediaItemToFileState=(e,t)=>r({data:{id:e,...t}})}),s("5NXxU",function(e,t){var r=e.exports&&e.exports.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},i=o("axeml");e.exports.tap=function(e,t,r){return function(i){return i.lift(new n(e,t,r))}};var n=function(){function e(e,t,r){this.nextOrObserver=e,this.error=t,this.complete=r}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.nextOrObserver,this.error,this.complete))},e}(),s=function(e){function t(t,r,n,o){e.call(this,t);var s=new i.Subscriber(r,n,o);s.syncErrorThrowable=!0,this.add(s),this.safeSubscriber=s}return r(t,e),t.prototype._next=function(e){var t=this.safeSubscriber;t.next(e),t.syncErrorThrown?this.destination.error(t.syncErrorValue):this.destination.next(e)},t.prototype._error=function(e){var t=this.safeSubscriber;t.error(e),t.syncErrorThrown?this.destination.error(t.syncErrorValue):this.destination.error(e)},t.prototype._complete=function(){var e=this.safeSubscriber;e.complete(),e.syncErrorThrown?this.destination.error(e.syncErrorValue):this.destination.complete()},t}(i.Subscriber)}),s("iBgx8",function(t,r){e(t.exports,"concatMap",()=>i,e=>i=e);var i,n=o("XrDsM");i=function(e,t){return n.mergeMap(e,t,1)}}),s("XrDsM",function(e,t){var r=e.exports&&e.exports.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},i=o("dZ9AU"),n=o("iwB6M");e.exports.mergeMap=function(e,t,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),function(i){return"number"==typeof t&&(r=t,t=null),i.lift(new s(e,t,r))}};var s=function(){function e(e,t,r){void 0===r&&(r=Number.POSITIVE_INFINITY),this.project=e,this.resultSelector=t,this.concurrent=r}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.project,this.resultSelector,this.concurrent))},e}();e.exports.MergeMapOperator=s;var a=function(e){function t(t,r,i,n){void 0===n&&(n=Number.POSITIVE_INFINITY),e.call(this,t),this.project=r,this.resultSelector=i,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return r(t,e),t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var t,r=this.index++;try{t=this.project(e,r)}catch(e){this.destination.error(e);return}this.active++,this._innerSub(t,e,r)},t.prototype._innerSub=function(e,t,r){this.add(i.subscribeToResult(this,e,t,r))},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},t.prototype.notifyNext=function(e,t,r,i,n){this.resultSelector?this._notifyResultSelector(e,t,r,i):this.destination.next(t)},t.prototype._notifyResultSelector=function(e,t,r,i){var n;try{n=this.resultSelector(e,t,r,i)}catch(e){this.destination.error(e);return}this.destination.next(n)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(n.OuterSubscriber);e.exports.MergeMapSubscriber=a}),s("dZ9AU",function(t,r){e(t.exports,"subscribeToResult",()=>i,e=>i=e);var i,n=o("4iRIL"),s=o("2RoPK"),a=o("lggQy"),l=o("1SUM9"),c=o("YgydF"),u=o("kNaF1"),d=o("lLPMj"),p=o("1v1oG");i=function(e,t,r,i){var o=new d.InnerSubscriber(e,r,i);if(o.closed)return null;if(t instanceof c.Observable)if(!t._isScalar)return o.syncErrorThrowable=!0,t.subscribe(o);else o.next(t.value),o.complete();else if(s.isArrayLike(t)){for(var h=0,f=t.length;h<f&&!o.closed;h++)o.next(t[h]);o.closed||o.complete()}else if(a.isPromise(t))return t.then(function(e){o.closed||(o.next(e),o.complete())},function(e){return o.error(e)}).then(null,function(e){n.root.setTimeout(function(){throw e})}),o;else if(t&&"function"==typeof t[u.iterator])for(var m=t[u.iterator]();;){var g=m.next();if(g.done){o.complete();break}if(o.next(g.value),o.closed)break}else if(t&&"function"==typeof t[p.observable]){var y=t[p.observable]();if("function"==typeof y.subscribe)return y.subscribe(new d.InnerSubscriber(e,r,i));o.error(TypeError("Provided object does not correctly implement Symbol.observable"))}else{var v=l.isObject(t)?"an invalid object":"'"+t+"'";o.error(TypeError("You provided "+v+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable."))}return null}}),s("YgydF",function(t,r){e(t.exports,"Observable",()=>i,e=>i=e);var i,n,s=o("4iRIL"),a=o("axeml"),l=o("1GCxN"),c=o("kmYd0");n=function(e,t,r){if(e){if(e instanceof a.Subscriber)return e;if(e[l.rxSubscriber])return e[l.rxSubscriber]()}return e||t||r?new a.Subscriber(e,t,r):new a.Subscriber(c.empty)};var u=o("1v1oG"),d=o("5wWzN");i=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(e,t,r){var i=this.operator,o=n(e,t,r);if(i?i.call(o,this.source):o.add(this.source||!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.syncErrorThrown=!0,e.syncErrorValue=t,e.error(t)}},e.prototype.forEach=function(e,t){var r=this;if(!t&&(s.root.Rx&&s.root.Rx.config&&s.root.Rx.config.Promise?t=s.root.Rx.config.Promise:s.root.Promise&&(t=s.root.Promise)),!t)throw Error("no Promise impl found");return new t(function(t,i){var n;n=r.subscribe(function(t){if(n)try{e(t)}catch(e){i(e),n.unsubscribe()}else e(t)},i,t)})},e.prototype._subscribe=function(e){return this.source.subscribe(e)},e.prototype[u.observable]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return 0===e.length?this:d.pipeFromArray(e)(this)},e.prototype.toPromise=function(e){var t=this;if(!e&&(s.root.Rx&&s.root.Rx.config&&s.root.Rx.config.Promise?e=s.root.Rx.config.Promise:s.root.Promise&&(e=s.root.Promise)),!e)throw Error("no Promise impl found");return new e(function(e,r){var i;t.subscribe(function(e){return i=e},function(e){return r(e)},function(){return e(i)})})},e.create=function(t){return new e(t)},e}()}),s("5wWzN",function(t,r){e(t.exports,"pipe",()=>i,e=>i=e),e(t.exports,"pipeFromArray",()=>n,e=>n=e);var i,n,s=o("6qxzH");function a(e){return e?1===e.length?e[0]:function(t){return e.reduce(function(e,t){return t(e)},t)}:s.noop}i=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return a(e)},n=a}),s("6qxzH",function(t,r){var i;e(t.exports,"noop",()=>i,e=>i=e),i=function(){}}),s("kNaF1",function(t,r){var i;e(t.exports,"iterator",()=>i,e=>i=e),i=function(e){var t=e.Symbol;if("function"==typeof t)return t.iterator||(t.iterator=t("iterator polyfill")),t.iterator;var r=e.Set;if(r&&"function"==typeof new r()["@@iterator"])return"@@iterator";var i=e.Map;if(i)for(var n=Object.getOwnPropertyNames(i.prototype),o=0;o<n.length;++o){var s=n[o];if("entries"!==s&&"size"!==s&&i.prototype[s]===i.prototype.entries)return s}return"@@iterator"}(o("4iRIL").root)}),s("iwB6M",function(e,t){var r=e.exports&&e.exports.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},i=function(e){function t(){e.apply(this,arguments)}return r(t,e),t.prototype.notifyNext=function(e,t,r,i,n){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(o("axeml").Subscriber);e.exports.OuterSubscriber=i}),s("e2TX1",function(e,t){var r=e.exports&&e.exports.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},i=o("axeml");e.exports.bufferCount=function(e,t){return void 0===t&&(t=null),function(r){return r.lift(new n(e,t))}};var n=function(){function e(e,t){this.bufferSize=e,this.startBufferEvery=t,t&&e!==t?this.subscriberClass=a:this.subscriberClass=s}return e.prototype.call=function(e,t){return t.subscribe(new this.subscriberClass(e,this.bufferSize,this.startBufferEvery))},e}(),s=function(e){function t(t,r){e.call(this,t),this.bufferSize=r,this.buffer=[]}return r(t,e),t.prototype._next=function(e){var t=this.buffer;t.push(e),t.length==this.bufferSize&&(this.destination.next(t),this.buffer=[])},t.prototype._complete=function(){var t=this.buffer;t.length>0&&this.destination.next(t),e.prototype._complete.call(this)},t}(i.Subscriber),a=function(e){function t(t,r,i){e.call(this,t),this.bufferSize=r,this.startBufferEvery=i,this.buffers=[],this.count=0}return r(t,e),t.prototype._next=function(e){var t=this.bufferSize,r=this.startBufferEvery,i=this.buffers,n=this.count;this.count++,n%r==0&&i.push([]);for(var o=i.length;o--;){var s=i[o];s.push(e),s.length===t&&(i.splice(o,1),this.destination.next(s))}},t.prototype._complete=function(){for(var t=this.buffers,r=this.destination;t.length>0;){var i=t.shift();i.length>0&&r.next(i)}e.prototype._complete.call(this)},t}(i.Subscriber)}),s("gosUm",function(t,r){var i;e(t.exports,"from",()=>i,e=>i=e),i=o("e3P0W").FromObservable.create}),s("e3P0W",function(e,t){var r=e.exports&&e.exports.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},i=o("fvPwd"),n=o("2RoPK"),s=o("lggQy"),a=o("2e4BA"),l=o("ufz07"),c=o("HHFyQ"),u=o("lCIqm"),d=o("kNaF1"),p=o("YgydF"),h=o("jHUX7"),f=o("1v1oG"),m=function(e){function t(t,r){e.call(this,null),this.ish=t,this.scheduler=r}return r(t,e),t.create=function(e,r){if(null!=e){if("function"==typeof e[f.observable])return e instanceof p.Observable&&!r?e:new t(e,r);else if(i.isArray(e))return new c.ArrayObservable(e,r);else if(s.isPromise(e))return new a.PromiseObservable(e,r);else if("function"==typeof e[d.iterator]||"string"==typeof e)return new l.IteratorObservable(e,r);else if(n.isArrayLike(e))return new u.ArrayLikeObservable(e,r)}throw TypeError((null!==e&&typeof e||e)+" is not observable")},t.prototype._subscribe=function(e){var t=this.ish,r=this.scheduler;return null==r?t[f.observable]().subscribe(e):t[f.observable]().subscribe(new h.ObserveOnSubscriber(e,r,0))},t}(p.Observable);e.exports.FromObservable=m}),s("HHFyQ",function(e,t){var r=e.exports&&e.exports.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},i=o("YgydF"),n=o("5OUhL"),s=o("b5CQv"),a=o("5Dgek"),l=function(e){function t(t,r){e.call(this),this.array=t,this.scheduler=r,r||1!==t.length||(this._isScalar=!0,this.value=t[0])}return r(t,e),t.create=function(e,r){return new t(e,r)},t.of=function(){for(var e=[],r=0;r<arguments.length;r++)e[r-0]=arguments[r];var i=e[e.length-1];a.isScheduler(i)?e.pop():i=null;var o=e.length;return o>1?new t(e,i):1===o?new n.ScalarObservable(e[0],i):new s.EmptyObservable(i)},t.dispatch=function(e){var t=e.array,r=e.index,i=e.count,n=e.subscriber;if(r>=i)return void n.complete();n.next(t[r]),n.closed||(e.index=r+1,this.schedule(e))},t.prototype._subscribe=function(e){var r=this.array,i=r.length,n=this.scheduler;if(n)return n.schedule(t.dispatch,0,{array:r,index:0,count:i,subscriber:e});for(var o=0;o<i&&!e.closed;o++)e.next(r[o]);e.complete()},t}(i.Observable);e.exports.ArrayObservable=l}),s("5OUhL",function(e,t){var r=e.exports&&e.exports.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},i=function(e){function t(t,r){e.call(this),this.value=t,this.scheduler=r,this._isScalar=!0,r&&(this._isScalar=!1)}return r(t,e),t.create=function(e,r){return new t(e,r)},t.dispatch=function(e){var t=e.done,r=e.value,i=e.subscriber;if(t)return void i.complete();i.next(r),i.closed||(e.done=!0,this.schedule(e))},t.prototype._subscribe=function(e){var r=this.value,i=this.scheduler;if(i)return i.schedule(t.dispatch,0,{done:!1,value:r,subscriber:e});e.next(r),e.closed||e.complete()},t}(o("YgydF").Observable);e.exports.ScalarObservable=i}),s("b5CQv",function(e,t){var r=e.exports&&e.exports.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},i=function(e){function t(t){e.call(this),this.scheduler=t}return r(t,e),t.create=function(e){return new t(e)},t.dispatch=function(e){e.subscriber.complete()},t.prototype._subscribe=function(e){var r=this.scheduler;if(r)return r.schedule(t.dispatch,0,{subscriber:e});e.complete()},t}(o("YgydF").Observable);e.exports.EmptyObservable=i}),s("5Dgek",function(t,r){var i;e(t.exports,"isScheduler",()=>i,e=>i=e),i=function(e){return e&&"function"==typeof e.schedule}}),s("jHUX7",function(e,t){var r=e.exports&&e.exports.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},i=o("axeml"),n=o("6j5QO");e.exports.observeOn=function(e,t){return void 0===t&&(t=0),function(r){return r.lift(new s(e,t))}};var s=function(){function e(e,t){void 0===t&&(t=0),this.scheduler=e,this.delay=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.scheduler,this.delay))},e}();e.exports.ObserveOnOperator=s;var a=function(e){function t(t,r,i){void 0===i&&(i=0),e.call(this,t),this.scheduler=r,this.delay=i}return r(t,e),t.dispatch=function(e){var t=e.notification,r=e.destination;t.observe(r),this.unsubscribe()},t.prototype.scheduleMessage=function(e){this.add(this.scheduler.schedule(t.dispatch,this.delay,new l(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(n.Notification.createNext(e))},t.prototype._error=function(e){this.scheduleMessage(n.Notification.createError(e))},t.prototype._complete=function(){this.scheduleMessage(n.Notification.createComplete())},t}(i.Subscriber);e.exports.ObserveOnSubscriber=a;var l=function(e,t){this.notification=e,this.destination=t};e.exports.ObserveOnMessage=l}),s("6j5QO",function(t,r){e(t.exports,"Notification",()=>i,e=>i=e);var i,n=o("YgydF");i=function(){function e(e,t,r){this.kind=e,this.value=t,this.error=r,this.hasValue="N"===e}return e.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},e.prototype.do=function(e,t,r){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return r&&r()}},e.prototype.accept=function(e,t,r){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,r)},e.prototype.toObservable=function(){switch(this.kind){case"N":return n.Observable.of(this.value);case"E":return n.Observable.throw(this.error);case"C":return n.Observable.empty()}throw Error("unexpected notification kind value")},e.createNext=function(t){return void 0!==t?new e("N",t):e.undefinedValueNotification},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e}()}),s("ansNH",function(e,t){let r=o("4mJKd")(5);e.exports=Promise.all([r("d6s42"),r("dXN7B")]).then(()=>o("lzjf5"))}),s("4mJKd",function(e,t){e.exports=e=>t=>import(o("8tirZ").shardUrl(o("02nRr").resolve(t),e))}),s("8tirZ",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.applyShardToDomain=s,e.exports.domainShardingKey=void 0,e.exports.getDomainShardIndex=i,e.exports.shardUrl=function(e,t){return globalThis[r]?a(e,t):e},e.exports.shardUrlUnchecked=a;let r="__ATLASPACK_ENABLE_DOMAIN_SHARDS";function i(e,t){let r=t+1,i=e.split("").reduce((e,t)=>{let i=(e<<r)-e+t.charCodeAt(0);return i&i},0);return(i%=r)<0&&(i+=r),i}let n=/-\d+$/;function o(e){if(!n.test(e))return e;let t=e.lastIndexOf("-");return e.slice(0,t)}function s(e,t){let r=e.indexOf("."),i=0===t?"":`-${t-1}`;if(-1===r)return`${o(e)}${i}`;let n=o(e.slice(0,r));return`${n}${i}${e.slice(r)}`}function a(e,t){let r=new URL(e),n=i(function(e){let t=e.lastIndexOf("/");if(-1===t||t===e.length-1)throw Error("Expected an absolute URL with a file name, unable to apply sharding.");return e.slice(t+1)}(r.pathname),t);return r.hostname=s(r.hostname,n),r.toString()}e.exports.domainShardingKey=r}),s("02nRr",function(t,r){e(t.exports,"register",()=>i,e=>i=e),e(t.exports,"resolve",()=>n,e=>n=e);var i,n,o=new Map;i=function(e,t){for(var r=0;r<t.length-1;r+=2)o.set(t[r],{baseUrl:e,path:t[r+1]})},n=function(e){var t=o.get(e);if(null==t)throw Error("Could not resolve bundle with id "+e);return new URL(t.path,t.baseUrl).toString()}}),s("bCzM0",function(e,t){let r=o("4mJKd")(5);e.exports=Promise.all([r("jSdjl"),r("l2EUC"),r("tLGOl")]).then(()=>o("anKEx"))}),s("4vGex",function(e,t){let r;class i{has(e){return!!this.streams.find(e)}set(e,t){this.streams.set(e,t)}get(e){return this.streams.get(e)}getOrInsert(e,t){return this.has(e)||this.set(e,t()),this.get(e)}removeAll(){this.streams.clear()}remove(e){this.streams.delete(e)}get size(){return this.streams.size}constructor(e){this.streams=e}}e.exports.getFileStreamsCache=()=>(r||(r=new i(o("dAAeA").mediaState.streams)),r)}),s("chIYi",function(e,t){for(var r=o("iA9co").Buffer,i=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[0-9a-f]{4}-[0-9a-f]{12}$/i,n=[],s=0;s<256;s++)n[s]=(s+256).toString(16).substr(1);e.exports=function(e,t){var o,s;if(r.isBuffer(e))s=0,o=n[e[s++]]+n[e[s++]]+n[e[s++]]+n[e[s++]]+"-"+n[e[s++]]+n[e[s++]]+"-"+n[e[s++]]+n[e[s++]]+"-"+n[e[s++]]+n[e[s++]]+"-"+n[e[s++]]+n[e[s++]]+n[e[s++]]+n[e[s++]]+n[e[s++]]+n[e[s++]];else{if("[object String]"!==Object.prototype.toString.call(e))return!1;o=e}if(o=o.toLowerCase(),!i.test(o))return!1;if(void 0===t)t=a(o);else if(a(o)!==t)return!1;switch(t){case 1:case 2:return!0;case 3:case 4:case 5:return -1!==["8","9","a","b"].indexOf(o.charAt(19));default:throw Error("Invalid version provided.")}};var a=e.exports.version=function(e){return 0|e.charAt(14)}}),s("3vFPy",function(e,r){var i=o("1bFdN");let n=e=>e.error instanceof Error,s=e=>"details"in e,a=(e,t)=>t?`${e}-${t}`:e,l=(e,t)=>{let r=t.reduce((e,t)=>{let{id:r,collection:i}=t,o=a(r,i);return n(t)?e[o]=t.error:s(t)?e[o]={...t.details,metadataTraceContext:t.metadataTraceContext}:e[o]={id:r,collection:i,type:"not-found",metadataTraceContext:t.metadataTraceContext},e},{});return e.map(e=>{let{id:t,collectionName:i}=e;return r[a(t,i)]||{id:t,type:"not-found"}})};e.exports.createFileDataloader=function(e){return new(t(i))(async t=>{let r="__media-single-file-collection__",i=t.reduce((e,t)=>{let i=t.collectionName||r;return t.includeHashForDuplicateFiles&&(e[i]=t.includeHashForDuplicateFiles),e},{}),n=t.reduce((e,t)=>{let i=t.collectionName||r,n=e[i]||[];return -1===n.indexOf(t.id)&&n.push(t.id),e[i]=n,e},{}),s=[];return await Promise.all(Object.keys(n).map(async t=>{let a={traceId:(0,o("fCrf0").getRandomTelemetryId)(),spanId:(0,o("fCrf0").getRandomTelemetryId)()},l=n[t],c=i[t],u=t===r?void 0:t;try{let t=(await e.getItems(l,u,a,c)).data.items.map(e=>({...e,metadataTraceContext:a}));s.push(...t);let r=t.map(e=>e.id);l.filter(e=>!r.includes(e)).forEach(e=>{s.push({id:e,collection:u,type:"not-found",metadataTraceContext:a})})}catch(e){l.forEach(t=>{s.push({id:t,collection:u,error:e})})}})),l(t,s)},{maxBatchSize:100})}}),s("24z7I",function(t,r){e(t.exports,"isImageMimeTypeSupportedByBrowser",()=>o("JXmwv").isImageMimeTypeSupportedByBrowser),e(t.exports,"isVideoMimeTypeSupportedByBrowser",()=>o("JXmwv").isVideoMimeTypeSupportedByBrowser);let i=e=>["application/x-archive","application/x-cpio","application/x-shar","application/x-iso9660-image","application/x-sbx","application/x-tar","application/x-bzip2","application/gzip","application/x-gzip","application/x-lzip","application/x-lzma","application/x-lzop","application/x-snappy-framed","application/x-xz","application/x-compress","application/zstd","application/x-7z-compressed","application/x-ace-compressed","application/x-astrotite-afa","application/x-alz-compressed","application/vnd.android.package-archive","application/x-freearc","application/x-arj","application/x-b1","application/vnd.ms-cab-compressed","application/x-cfs-compressed","application/x-dar","application/x-dgc-compressed","application/x-apple-diskimage","application/x-gca-compressed","application/java-archive","application/x-lzh","application/x-lzx","application/x-rar-compressed","application/x-stuffit","application/x-stuffitx","application/x-gtar","application/x-ms-wim","application/x-xar","application/zip","application/x-zoo","application/x-par2"].indexOf(e.toLowerCase())>-1;t.exports.getMediaTypeFromMimeType=e=>i(e)?"archive":(0,o("JXmwv").isImageMimeTypeSupportedByBrowser)(e)||(0,o("6rtaQ").isImageMimeTypeSupportedByServer)(e)?"image":(0,o("JXmwv").isDocumentMimeTypeSupportedByBrowser)(e)||(0,o("6rtaQ").isDocumentMimeTypeSupportedByServer)(e)?"doc":(0,o("JXmwv").isAudioMimeTypeSupportedByBrowser)(e)||(0,o("6rtaQ").isAudioMimeTypeSupportedByServer)(e)?"audio":(0,o("JXmwv").isVideoMimeTypeSupportedByBrowser)(e)||(0,o("6rtaQ").isVideoMimeTypeSupportedByServer)(e)?"video":"unknown"}),s("JXmwv",function(e,t){let r=e=>["image/apng","image/bmp","image/gif","image/x-icon","image/jpeg","image/png","image/webp"].indexOf(e.toLowerCase())>-1,i=e=>"application/pdf"===e.toLowerCase(),n=e=>["audio/aac","audio/flac","audio/mp4","audio/mpeg","audio/ogg","audio/x-ogg","audio/wav","audio/x-wav"].indexOf(e.toLowerCase())>-1,o=e=>["video/mp4","video/quicktime"].indexOf(e.toLowerCase())>-1;e.exports.isImageMimeTypeSupportedByBrowser=r,e.exports.isDocumentMimeTypeSupportedByBrowser=i,e.exports.isAudioMimeTypeSupportedByBrowser=n,e.exports.isVideoMimeTypeSupportedByBrowser=o,e.exports.isMimeTypeSupportedByBrowser=e=>i(e)||r(e)||n(e)||o(e)}),s("3iVuE",function(e,t){var r=o("jXDcc");e.exports.createMediaSubject=function(e){let t=new(0,r.ReplaySubject)(1);return e instanceof Error?t.error(e):e&&t.next(e),t}}),s("jXDcc",function(e,t){var r,i=e.exports&&e.exports.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},n=o("augeV"),s=o("74JhH");r=new(o("1qr9n")).QueueScheduler(s.QueueAction);var a=o("8v4h5"),l=o("jHUX7"),c=o("bGuMq"),u=o("lQpfG"),d=function(e){function t(t,r,i){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===r&&(r=Number.POSITIVE_INFINITY),e.call(this),this.scheduler=i,this._events=[],this._bufferSize=t<1?1:t,this._windowTime=r<1?1:r}return i(t,e),t.prototype.next=function(t){var r=this._getNow();this._events.push(new p(r,t)),this._trimBufferThenGetEvents(),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){var t,r=this._trimBufferThenGetEvents(),i=this.scheduler;if(this.closed)throw new c.ObjectUnsubscribedError;this.hasError||this.isStopped?t=a.Subscription.EMPTY:(this.observers.push(e),t=new u.SubjectSubscription(this,e)),i&&e.add(e=new l.ObserveOnSubscriber(e,i));for(var n=r.length,o=0;o<n&&!e.closed;o++)e.next(r[o].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t},t.prototype._getNow=function(){return(this.scheduler||r).now()},t.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),t=this._bufferSize,r=this._windowTime,i=this._events,n=i.length,o=0;o<n&&!(e-i[o].time<r);)o++;return n>t&&(o=Math.max(o,n-t)),o>0&&i.splice(0,o),i},t}(n.Subject);e.exports.ReplaySubject=d;var p=function(e,t){this.time=e,this.value=t}}),s("augeV",function(e,t){var r=e.exports&&e.exports.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},i=o("YgydF"),n=o("axeml"),s=o("8v4h5"),a=o("bGuMq"),l=o("lQpfG"),c=o("1GCxN"),u=function(e){function t(t){e.call(this,t),this.destination=t}return r(t,e),t}(n.Subscriber);e.exports.SubjectSubscriber=u;var d=function(e){function t(){e.call(this),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}return r(t,e),t.prototype[c.rxSubscriber]=function(){return new u(this)},t.prototype.lift=function(e){var t=new p(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new a.ObjectUnsubscribedError;if(!this.isStopped)for(var t=this.observers,r=t.length,i=t.slice(),n=0;n<r;n++)i[n].next(e)},t.prototype.error=function(e){if(this.closed)throw new a.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,r=t.length,i=t.slice(),n=0;n<r;n++)i[n].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new a.ObjectUnsubscribedError;this.isStopped=!0;for(var e=this.observers,t=e.length,r=e.slice(),i=0;i<t;i++)r[i].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(!this.closed)return e.prototype._trySubscribe.call(this,t);throw new a.ObjectUnsubscribedError},t.prototype._subscribe=function(e){if(this.closed)throw new a.ObjectUnsubscribedError;return this.hasError?(e.error(this.thrownError),s.Subscription.EMPTY):this.isStopped?(e.complete(),s.Subscription.EMPTY):(this.observers.push(e),new l.SubjectSubscription(this,e))},t.prototype.asObservable=function(){var e=new i.Observable;return e.source=this,e},t.create=function(e,t){return new p(e,t)},t}(i.Observable);e.exports.Subject=d;var p=function(e){function t(t,r){e.call(this),this.destination=t,this.source=r}return r(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):s.Subscription.EMPTY},t}(d);e.exports.AnonymousSubject=p}),s("bGuMq",function(e,t){var r=e.exports&&e.exports.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},i=function(e){function t(){var t=e.call(this,"object unsubscribed");this.name=t.name="ObjectUnsubscribedError",this.stack=t.stack,this.message=t.message}return r(t,e),t}(Error);e.exports.ObjectUnsubscribedError=i}),s("k8JsH",function(e,t){var r=e.exports&&e.exports.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},i=o("4iRIL"),n=function(e){function t(t,r){e.call(this,t,r),this.scheduler=t,this.pending=!1,this.work=r}return r(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e,this.pending=!0;var r=this.id,i=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(i,r,t)),this.delay=t,this.id=this.id||this.requestAsyncId(i,this.id,t),this},t.prototype.requestAsyncId=function(e,t,r){return void 0===r&&(r=0),i.root.setInterval(e.flush.bind(e,this),r)},t.prototype.recycleAsyncId=function(e,t,r){if(void 0===r&&(r=0),null!==r&&this.delay===r&&!1===this.pending)return t;i.root.clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return Error("executing a cancelled action");this.pending=!1;var r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var r=!1,i=void 0;try{this.work(e)}catch(e){r=!0,i=!!e&&e||Error(e)}if(r)return this.unsubscribe(),i},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,r=t.actions,i=r.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==i&&r.splice(i,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},t}(o("47xz6").Action);e.exports.AsyncAction=n}),s("iOeLv",function(e,t){var r=e.exports&&e.exports.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},i=function(e){function t(){e.apply(this,arguments),this.actions=[],this.active=!1,this.scheduled=void 0}return r(t,e),t.prototype.flush=function(e){var t,r=this.actions;if(this.active)return void r.push(e);this.active=!0;do if(t=e.execute(e.state,e.delay))break;while(e=r.shift())if(this.active=!1,t){for(;e=r.shift();)e.unsubscribe();throw t}},t}(function(){function e(t,r){void 0===r&&(r=e.now),this.SchedulerAction=t,this.now=r}return e.prototype.schedule=function(e,t,r){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(r,t)},e.now=Date.now?Date.now:function(){return+new Date},e}());e.exports.AsyncScheduler=i}),s("ezhv2",function(e,t){let r=e=>new Promise((t,r)=>{let i=new Image;i.src=e,i.onload=()=>t({width:i.width,height:i.height}),i.onerror=r}),i=async(e,t)=>{switch(e){case"image":{let e=URL.createObjectURL(t);try{return await r(e)}finally{URL.revokeObjectURL(e)}}case"video":return(0,o("jcSqS").getVideoDimensionsFromBlob)(t);default:throw Error(`Can't extract dimensions from ${e}`)}};e.exports.getDimensionsFromBlob=i}),s("kSxxi",function(e,t){async function r(e,t,r){if(("doc"===e||!(0,o("JXmwv").isMimeTypeSupportedByBrowser)(t)||!r)&&(0,o("6rtaQ").isMimeTypeSupportedByServer)(t))return!0;if("video"===e&&r){let e=(await r).value;if(!(e instanceof Blob))return!1;try{let{width:t,height:r}=await (0,o("jcSqS").getVideoDimensionsFromBlob)(e);return!t&&!r}catch(e){return!0}}return!1}e.exports.shouldFetchRemoteFileStates=r}),s("5h2n5",function(e,t){let r={poll_intervalMs:3e3,poll_maxAttempts:30,poll_backoffFactor:1.25,poll_maxIntervalMs:2e5};e.exports.PollingFunction=class{async execute(e){let{poll_maxAttempts:t}=this.options;if(0===t)return this.fail(new(0,o("2WUwQ").PollingError)("pollingMaxAttemptsExceeded",{attempts:this.attempt}));try{if(this.shouldIterate=!1,await e(),!this.shouldIterate)return;if(this.attempt>=t)return this.fail(new(0,o("2WUwQ").PollingError)("pollingMaxAttemptsExceeded",{attempts:this.attempt}));this.poll_intervalMs=this.getIntervalMsForIteration(this.attempt),this.attempt++,this.timeoutId=window.setTimeout(()=>this.execute(e),this.poll_intervalMs)}catch(e){this.fail(e)}}fail(e){let{onError:t}=this;this.cancel(),t&&t(e)}getIntervalMsForIteration(e){let t=this.options.poll_intervalMs;if(1===e)return t;for(let r=2;r<=e;r++)t*=this.options.poll_backoffFactor;return Math.min(Math.round(t),this.options.poll_maxIntervalMs)}next(){this.shouldIterate=!0}cancel(){window.clearTimeout(this.timeoutId),this.timeoutId=0}constructor(e){this.options=void 0,this.poll_intervalMs=0,this.attempt=1,this.shouldIterate=!0,this.onError=void 0,this.timeoutId=0,this.options={...r,...e},this.poll_intervalMs=this.options.poll_intervalMs}}}),s("ld7ZZ",function(e,t){e.exports.isEmptyFile=function(e,t=Date.now()){let{artifacts:r,mediaType:i,mimeType:n,name:o,processingStatus:s,representations:a,size:l,createdAt:c}=e;return!r&&!i&&!n&&!o&&!s&&!a&&!l&&"number"==typeof c&&!!(t-c>432e5)||!1}}),s("9EPd0",function(t,r){e(t.exports,"mediaStore",()=>o("eUfuX").mediaStore),o("eUfuX")}),s("fl9IL",function(e,t){function r(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map(function(e){return"'"+e+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function i(e){return!!e&&!!e[J]}function n(e){var t;return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object||"function"==typeof r&&Function.toString.call(r)===Z}(e)||Array.isArray(e)||!!e[H]||!!(null==(t=e.constructor)?void 0:t[H])||d(e)||p(e))}function o(e,t,r){void 0===r&&(r=!1),0===s(e)?(r?Object.keys:K)(e).forEach(function(i){r&&"symbol"==typeof i||t(i,e[i],e)}):e.forEach(function(r,i){return t(i,r,e)})}function s(e){var t=e[J];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:d(e)?2:3*!!p(e)}function a(e,t){return 2===s(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function l(e,t){return 2===s(e)?e.get(t):e[t]}function c(e,t,r){var i=s(e);2===i?e.set(t,r):3===i?e.add(r):e[t]=r}function u(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function d(e){return G&&e instanceof Map}function p(e){return q&&e instanceof Set}function h(e){return e.o||e.t}function f(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=X(e);delete t[J];for(var r=K(t),i=0;i<r.length;i++){var n=r[i],o=t[n];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[n]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[n]})}return Object.create(Object.getPrototypeOf(e),t)}function m(e,t){return void 0===t&&(t=!1),y(e)||i(e)||!n(e)||(s(e)>1&&(e.set=e.add=e.clear=e.delete=g),Object.freeze(e),t&&o(e,function(e,t){return m(t,!0)},!0)),e}function g(){r(2)}function y(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function v(e){var t=Y[e];return t||r(18,e),t}function x(e,t){Y[e]||(Y[e]=t)}function b(e,t){t&&(v("Patches"),e.u=[],e.s=[],e.v=t)}function E(e){S(e),e.p.forEach(k),e.p=null}function S(e){e===B&&(B=e.l)}function w(e){return B={p:[],l:B,h:e,m:!0,_:0}}function k(e){var t=e[J];0===t.i||1===t.i?t.j():t.g=!0}function _(e,t){t._=t.p.length;var i=t.p[0],o=void 0!==e&&e!==i;return t.h.O||v("ES5").S(t,e,o),o?(i[J].P&&(E(t),r(4)),n(e)&&(e=j(t,e),t.l||I(t,e)),t.u&&v("Patches").M(i[J].t,e,t.u,t.s)):e=j(t,i,[]),E(t),t.u&&t.v(t.u,t.s),e!==W?e:void 0}function j(e,t,r){if(y(t))return t;var i=t[J];if(!i)return o(t,function(n,o){return M(e,i,t,n,o,r)},!0),t;if(i.A!==e)return t;if(!i.P)return I(e,i.t,!0),i.t;if(!i.I){i.I=!0,i.A._--;var n=4===i.i||5===i.i?i.o=f(i.k):i.o,s=n,a=!1;3===i.i&&(s=new Set(n),n.clear(),a=!0),o(s,function(t,o){return M(e,i,n,t,o,r,a)}),I(e,n,!1),r&&e.u&&v("Patches").N(i,r,e.u,e.s)}return i.o}function M(e,t,r,o,s,l,u){if(i(s)){var d=j(e,s,l&&t&&3!==t.i&&!a(t.R,o)?l.concat(o):void 0);if(c(r,o,d),!i(d))return;e.m=!1}else u&&r.add(s);if(n(s)&&!y(s)){if(!e.h.D&&e._<1)return;j(e,s),t&&t.A.l||I(e,s)}}function I(e,t,r){void 0===r&&(r=!1),!e.l&&e.h.D&&e.m&&m(t,r)}function A(e,t){var r=e[J];return(r?h(r):e)[t]}function O(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var i=Object.getOwnPropertyDescriptor(r,t);if(i)return i;r=Object.getPrototypeOf(r)}}function T(e){e.P||(e.P=!0,e.l&&T(e.l))}function C(e){e.o||(e.o=f(e.t))}function R(e,t,r){var i,n,o,s,a,l,c,u=d(t)?v("MapSet").F(t,r):p(t)?v("MapSet").T(t,r):e.O?(o=n={i:+!!(i=Array.isArray(t)),A:r?r.A:B,P:!1,I:!1,R:{},l:r,t:t,k:null,o:null,j:null,C:!1},s=Q,i&&(o=[n],s=ee),l=(a=Proxy.revocable(o,s)).revoke,n.k=c=a.proxy,n.j=l,c):v("ES5").J(t,r);return(r?r.A:B).p.push(u),u}function N(e){return i(e)||r(22,e),function e(t){if(!n(t))return t;var r,i=t[J],a=s(t);if(i){if(!i.P&&(i.i<4||!v("ES5").K(i)))return i.t;i.I=!0,r=F(t,a),i.I=!1}else r=F(t,a);return o(r,function(t,n){i&&l(i.t,t)===n||c(r,t,e(n))}),3===a?new Set(r):r}(e)}function F(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return f(e)}function P(){function e(e,t){var r=s[e];return r?r.enumerable=t:s[e]=r={configurable:!0,enumerable:t,get:function(){var t=this[J];return Q.get(t,e)},set:function(t){var r=this[J];Q.set(r,e,t)}},r}function t(e){for(var t=e.length-1;t>=0;t--){var i=e[t][J];if(!i.P)switch(i.i){case 5:n(i)&&T(i);break;case 4:r(i)&&T(i)}}}function r(e){for(var t=e.t,r=e.k,i=K(r),n=i.length-1;n>=0;n--){var o=i[n];if(o!==J){var s=t[o];if(void 0===s&&!a(t,o))return!0;var l=r[o],c=l&&l[J];if(c?c.t!==s:!u(l,s))return!0}}var d=!!t[J];return i.length!==K(t).length+ +!d}function n(e){var t=e.k;if(t.length!==e.t.length)return!0;var r=Object.getOwnPropertyDescriptor(t,t.length-1);if(r&&!r.get)return!0;for(var i=0;i<t.length;i++)if(!t.hasOwnProperty(i))return!0;return!1}var s={};x("ES5",{J:function(t,r){var i=Array.isArray(t),n=function(t,r){if(t){for(var i=Array(r.length),n=0;n<r.length;n++)Object.defineProperty(i,""+n,e(n,!0));return i}var o=X(r);delete o[J];for(var s=K(o),a=0;a<s.length;a++){var l=s[a];o[l]=e(l,t||!!o[l].enumerable)}return Object.create(Object.getPrototypeOf(r),o)}(i,t),o={i:i?5:4,A:r?r.A:B,P:!1,I:!1,R:{},l:r,t:t,k:n,o:null,g:!1,C:!1};return Object.defineProperty(n,J,{value:o,writable:!0}),n},S:function(e,r,s){s?i(r)&&r[J].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var r=t[J];if(r){var i=r.t,s=r.k,l=r.R,c=r.i;if(4===c)o(s,function(t){t!==J&&(void 0!==i[t]||a(i,t)?l[t]||e(s[t]):(l[t]=!0,T(r)))}),o(i,function(e){void 0!==s[e]||a(s,e)||(l[e]=!1,T(r))});else if(5===c){if(n(r)&&(T(r),l.length=!0),s.length<i.length)for(var u=s.length;u<i.length;u++)l[u]=!1;else for(var d=i.length;d<s.length;d++)l[d]=!0;for(var p=Math.min(s.length,i.length),h=0;h<p;h++)s.hasOwnProperty(h)||(l[h]=!0),void 0===l[h]&&e(s[h])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?r(e):n(e)}})}function D(){function e(t){if(!n(t))return t;if(Array.isArray(t))return t.map(e);if(d(t))return new Map(Array.from(t.entries()).map(function(t){return[t[0],e(t[1])]}));if(p(t))return new Set(Array.from(t).map(e));var r=Object.create(Object.getPrototypeOf(t));for(var i in t)r[i]=e(t[i]);return a(t,H)&&(r[H]=t[H]),r}function t(t){return i(t)?e(t):t}x("Patches",{$:function(t,i){return i.forEach(function(i){for(var n=i.path,o=i.op,a=t,c=0;c<n.length-1;c++){var u=s(a),d=n[c];"string"!=typeof d&&"number"!=typeof d&&(d=""+d),0!==u&&1!==u||"__proto__"!==d&&"constructor"!==d||r(24),"function"==typeof a&&"prototype"===d&&r(24),"object"!=typeof(a=l(a,d))&&r(15,n.join("/"))}var p=s(a),h=e(i.value),f=n[n.length-1];switch(o){case"replace":switch(p){case 2:return a.set(f,h);case 3:r(16);default:return a[f]=h}case"add":switch(p){case 1:return"-"===f?a.push(h):a.splice(f,0,h);case 2:return a.set(f,h);case 3:return a.add(h);default:return a[f]=h}case"remove":switch(p){case 1:return a.splice(f,1);case 2:return a.delete(f);case 3:return a.delete(i.value);default:return delete a[f]}default:r(17,o)}}),t},N:function(e,r,i,n){var s,c,u,d,p;switch(e.i){case 0:case 4:case 2:return s=e.t,c=e.o,void o(e.R,function(e,o){var u=l(s,e),d=l(c,e),p=o?a(s,e)?"replace":"add":"remove";if(u!==d||"replace"!==p){var h=r.concat(e);i.push("remove"===p?{op:p,path:h}:{op:p,path:h,value:d}),n.push("add"===p?{op:"remove",path:h}:"remove"===p?{op:"add",path:h,value:t(u)}:{op:"replace",path:h,value:t(u)})}});case 5:case 1:return function(e,r,i,n){var o=e.t,s=e.R,a=e.o;if(a.length<o.length){var l=[a,o];o=l[0],a=l[1];var c=[n,i];i=c[0],n=c[1]}for(var u=0;u<o.length;u++)if(s[u]&&a[u]!==o[u]){var d=r.concat([u]);i.push({op:"replace",path:d,value:t(a[u])}),n.push({op:"replace",path:d,value:t(o[u])})}for(var p=o.length;p<a.length;p++){var h=r.concat([p]);i.push({op:"add",path:h,value:t(a[p])})}o.length<a.length&&n.push({op:"replace",path:r.concat(["length"]),value:o.length})}(e,r,i,n);case 3:return u=e.t,d=e.o,p=0,void(u.forEach(function(e){if(!d.has(e)){var t=r.concat([p]);i.push({op:"remove",path:t,value:e}),n.unshift({op:"add",path:t,value:e})}p++}),p=0,d.forEach(function(e){if(!u.has(e)){var t=r.concat([p]);i.push({op:"add",path:t,value:e}),n.unshift({op:"remove",path:t,value:e})}p++}))}},M:function(e,t,r,i){r.push({op:"replace",path:[],value:t===W?void 0:t}),i.push({op:"replace",path:[],value:e})}})}function L(){function e(e,t){function r(){this.constructor=e}a(e,t),r.prototype=t.prototype,e.prototype=new r}function t(e){e.o||(e.R=new Map,e.o=new Map(e.t))}function i(e){e.o||(e.o=new Set,e.t.forEach(function(t){if(n(t)){var r=R(e.A.h,t,e);e.p.set(t,r),e.o.add(r)}else e.o.add(t)}))}function s(e){e.g&&r(3,JSON.stringify(h(e)))}var a=function(e,t){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},l=function(){function r(e,t){return this[J]={i:2,l:t,A:t?t.A:B,P:!1,I:!1,o:void 0,R:void 0,t:e,k:this,C:!1,g:!1},this}e(r,Map);var i=r.prototype;return Object.defineProperty(i,"size",{get:function(){return h(this[J]).size}}),i.has=function(e){return h(this[J]).has(e)},i.set=function(e,r){var i=this[J];return s(i),h(i).has(e)&&h(i).get(e)===r||(t(i),T(i),i.R.set(e,!0),i.o.set(e,r),i.R.set(e,!0)),this},i.delete=function(e){if(!this.has(e))return!1;var r=this[J];return s(r),t(r),T(r),r.t.has(e)?r.R.set(e,!1):r.R.delete(e),r.o.delete(e),!0},i.clear=function(){var e=this[J];s(e),h(e).size&&(t(e),T(e),e.R=new Map,o(e.t,function(t){e.R.set(t,!1)}),e.o.clear())},i.forEach=function(e,t){var r=this;h(this[J]).forEach(function(i,n){e.call(t,r.get(n),n,r)})},i.get=function(e){var r=this[J];s(r);var i=h(r).get(e);if(r.I||!n(i)||i!==r.t.get(e))return i;var o=R(r.A.h,i,r);return t(r),r.o.set(e,o),o},i.keys=function(){return h(this[J]).keys()},i.values=function(){var e,t=this,r=this.keys();return(e={})[V]=function(){return t.values()},e.next=function(){var e=r.next();return e.done?e:{done:!1,value:t.get(e.value)}},e},i.entries=function(){var e,t=this,r=this.keys();return(e={})[V]=function(){return t.entries()},e.next=function(){var e=r.next();if(e.done)return e;var i=t.get(e.value);return{done:!1,value:[e.value,i]}},e},i[V]=function(){return this.entries()},r}(),c=function(){function t(e,t){return this[J]={i:3,l:t,A:t?t.A:B,P:!1,I:!1,o:void 0,t:e,k:this,p:new Map,g:!1,C:!1},this}e(t,Set);var r=t.prototype;return Object.defineProperty(r,"size",{get:function(){return h(this[J]).size}}),r.has=function(e){var t=this[J];return s(t),t.o?!!t.o.has(e)||!(!t.p.has(e)||!t.o.has(t.p.get(e))):t.t.has(e)},r.add=function(e){var t=this[J];return s(t),this.has(e)||(i(t),T(t),t.o.add(e)),this},r.delete=function(e){if(!this.has(e))return!1;var t=this[J];return s(t),i(t),T(t),t.o.delete(e)||!!t.p.has(e)&&t.o.delete(t.p.get(e))},r.clear=function(){var e=this[J];s(e),h(e).size&&(i(e),T(e),e.o.clear())},r.values=function(){var e=this[J];return s(e),i(e),e.o.values()},r.entries=function(){var e=this[J];return s(e),i(e),e.o.entries()},r.keys=function(){return this.values()},r[V]=function(){return this.values()},r.forEach=function(e,t){for(var r=this.values(),i=r.next();!i.done;)e.call(t,i.value,i.value,this),i=r.next()},t}();x("MapSet",{F:function(e,t){return new l(e,t)},T:function(e,t){return new c(e,t)}})}var U,B,z="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),G="undefined"!=typeof Map,q="undefined"!=typeof Set,$="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,W=z?Symbol.for("immer-nothing"):((U={})["immer-nothing"]=!0,U),H=z?Symbol.for("immer-draftable"):"__$immer_draftable",J=z?Symbol.for("immer-state"):"__$immer_state",V="undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator",Z=""+Object.prototype.constructor,K="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,X=Object.getOwnPropertyDescriptors||function(e){var t={};return K(e).forEach(function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)}),t},Y={},Q={get:function(e,t){if(t===J)return e;var r,i,o=h(e);if(!a(o,t))return(i=O(o,t))?"value"in i?i.value:null==(r=i.get)?void 0:r.call(e.k):void 0;var s=o[t];return e.I||!n(s)?s:s===A(e.t,t)?(C(e),e.o[t]=R(e.A.h,s,e)):s},has:function(e,t){return t in h(e)},ownKeys:function(e){return Reflect.ownKeys(h(e))},set:function(e,t,r){var i=O(h(e),t);if(null==i?void 0:i.set)return i.set.call(e.k,r),!0;if(!e.P){var n=A(h(e),t),o=null==n?void 0:n[J];if(o&&o.t===r)return e.o[t]=r,e.R[t]=!1,!0;if(u(r,n)&&(void 0!==r||a(e.t,t)))return!0;C(e),T(e)}return e.o[t]===r&&(void 0!==r||t in e.o)||Number.isNaN(r)&&Number.isNaN(e.o[t])||(e.o[t]=r,e.R[t]=!0),!0},deleteProperty:function(e,t){return void 0!==A(e.t,t)||t in e.t?(e.R[t]=!1,C(e),T(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=h(e),i=Reflect.getOwnPropertyDescriptor(r,t);return i?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:i.enumerable,value:r[t]}:i},defineProperty:function(){r(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){r(12)}},ee={};o(Q,function(e,t){ee[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),ee.deleteProperty=function(e,t){return ee.set.call(this,e,t,void 0)},ee.set=function(e,t,r){return Q.set.call(this,e[0],t,r,e[0])};var et=function(){function e(e){var t=this;this.O=$,this.D=!0,this.produce=function(e,i,o){if("function"==typeof e&&"function"!=typeof i){var s,a=i;return i=e,function(e){var r=this;void 0===e&&(e=a);for(var n=arguments.length,o=Array(n>1?n-1:0),s=1;s<n;s++)o[s-1]=arguments[s];return t.produce(e,function(e){var t;return(t=i).call.apply(t,[r,e].concat(o))})}}if("function"!=typeof i&&r(6),void 0!==o&&"function"!=typeof o&&r(7),n(e)){var l=w(t),c=R(t,e,void 0),u=!0;try{s=i(c),u=!1}finally{u?E(l):S(l)}return"undefined"!=typeof Promise&&s instanceof Promise?s.then(function(e){return b(l,o),_(e,l)},function(e){throw E(l),e}):(b(l,o),_(s,l))}if(!e||"object"!=typeof e){if(void 0===(s=i(e))&&(s=e),s===W&&(s=void 0),t.D&&m(s,!0),o){var d=[],p=[];v("Patches").M(e,s,d,p),o(d,p)}return s}r(21,e)},this.produceWithPatches=function(e,r){if("function"==typeof e)return function(r){for(var i=arguments.length,n=Array(i>1?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];return t.produceWithPatches(r,function(t){return e.apply(void 0,[t].concat(n))})};var i,n,o=t.produce(e,r,function(e,t){i=e,n=t});return"undefined"!=typeof Promise&&o instanceof Promise?o.then(function(e){return[e,i,n]}):[o,i,n]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){n(e)||r(8),i(e)&&(e=N(e));var t=w(this),o=R(this,e,void 0);return o[J].C=!0,S(t),o},t.finishDraft=function(e,t){var r=(e&&e[J]).A;return b(r,t),_(void 0,r)},t.setAutoFreeze=function(e){this.D=e},t.setUseProxies=function(e){e&&!$&&r(20),this.O=e},t.applyPatches=function(e,t){for(r=t.length-1;r>=0;r--){var r,n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}r>-1&&(t=t.slice(r+1));var o=v("Patches").$;return i(e)?o(e,t):this.produce(e,function(e){return o(e,t)})},e}(),er=new et,ei=er.produce,en=er.produceWithPatches.bind(er),eo=er.setAutoFreeze.bind(er),es=er.setUseProxies.bind(er),ea=er.applyPatches.bind(er),el=er.createDraft.bind(er),ec=er.finishDraft.bind(er);e.exports.isDraft=i,e.exports.isDraftable=n,e.exports.immerable=H,e.exports.original=function(e){return i(e)||r(23,e),e[J].t},e.exports.freeze=m,e.exports.nothing=W,e.exports.current=N,e.exports.enableES5=P,e.exports.enablePatches=D,e.exports.enableMapSet=L,e.exports.enableAllPlugins=function(){P(),L(),D()},e.exports.castDraft=function(e){return e},e.exports.castImmutable=function(e){return e},e.exports.Immer=et,e.exports.produce=ei,e.exports.produceWithPatches=en,e.exports.setAutoFreeze=eo,e.exports.setUseProxies=es,e.exports.applyPatches=ea,e.exports.createDraft=el,e.exports.finishDraft=ec,e.exports.default=ei}),s("l7KxQ",function(e,t){var r=Object.assign(Object.create(null),{url:"file:///../node_modules/zustand/esm/vanilla.mjs"});let i=e=>{let t,i=new Set,n=(e,r)=>{let n="function"==typeof e?e(t):e;if(!Object.is(n,t)){let e=t;t=(null!=r?r:"object"!=typeof n||null===n)?n:Object.assign({},t,n),i.forEach(r=>r(t,e))}},o=()=>t,s={setState:n,getState:o,getInitialState:()=>a,subscribe:e=>(i.add(e),()=>i.delete(e)),destroy:()=>{(r.env?r.env.MODE:void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),i.clear()}},a=t=e(n,o,s);return s};e.exports.createStore=e=>e?i(e):i}),s("1kgKO",function(e,t){e.exports=o("4mJKd")(5)("haemK").then(()=>o("kVKIu"))}),s("khxnJ",function(e,t){let r,i=()=>void 0!==r?Promise.resolve(r):new Promise(e=>{let t=new Image,i=()=>{e(r=2===t.height)};t.addEventListener("load",i),t.addEventListener("error",i),t.src="data:image/webp;base64,UklGRi4AAABXRUJQVlA4TCEAAAAvAUAAEB8wAiMwAgSSNtse/cXjxyCCmrYNWPwmHRH9jwMA"});e.exports.getNaturalImageSize=e=>new Promise((t,r)=>{let i=new Image;i.addEventListener("load",()=>{t({width:i.naturalWidth,height:i.naturalHeight})}),i.addEventListener("error",r),i.src=e}),e.exports.parseImage=e=>new Promise((t,r)=>{let i=new Image;i.onload=()=>t({src:i.src}),i.onerror=()=>r(),i.src=e}),e.exports.hasFileExceededSize=e=>e&&e.size>1048576,e.exports.imageAcceptHeader=()=>i().then(e=>e?"image/webp,image/*,*/*;q=0.8":"image/*,*/*;q=0.8")}),s("7ZWaV",function(e,t){let r=e=>({platform:{component:e},type:o("iqaft").ExperienceTypes.Load,performanceType:o("iqaft").ExperiencePerformanceTypes.PageSegmentLoad}),i=e=>({platform:{component:e},type:o("iqaft").ExperienceTypes.Experience,performanceType:o("iqaft").ExperiencePerformanceTypes.InlineResult}),n=[{key:o("aGYoD").UfoEmojiTimingsKeys.FMP,endMark:o("aGYoD").UfoEmojiTimings.FMP_END},{key:o("aGYoD").UfoEmojiTimingsKeys.METADATA,component:"resourced-emoji",startMark:o("aGYoD").UfoEmojiTimings.METADATA_START,endMark:o("aGYoD").UfoEmojiTimings.METADATA_END},{key:o("aGYoD").UfoEmojiTimingsKeys.MEDIADATA,component:"caching-emoji",startMark:o("aGYoD").UfoEmojiTimings.MEDIA_START,endMark:o("aGYoD").UfoEmojiTimings.MEDIA_END},{key:o("aGYoD").UfoEmojiTimingsKeys.MOUNTED,component:"emoji",endMark:o("aGYoD").UfoEmojiTimings.MOUNTED_END},{key:o("aGYoD").UfoEmojiTimingsKeys.ONLOAD,startMark:o("aGYoD").UfoEmojiTimings.ONLOAD_START,endMark:o("aGYoD").UfoEmojiTimings.ONLOAD_END}],s={"emoji-rendered":new(0,o("9801n").ConcurrentExperience)(o("aGYoD").UfoExperienceName.EMOJI_RENDERED,{platform:{component:o("aGYoD").UfoComponentName.EMOJI},type:o("iqaft").ExperienceTypes.Operation,performanceType:o("iqaft").ExperiencePerformanceTypes.Custom,timings:n}),"emoji-resource-fetched":new(0,o("9801n").ConcurrentExperience)(o("aGYoD").UfoExperienceName.EMOJI_RESOURCE_FETCHED,r(o("aGYoD").UfoComponentName.EMOJI_PROVIDER)),"emoji-picker-opened":new(0,o("4SCyD").UFOExperience)(o("aGYoD").UfoExperienceName.EMOJI_PICKER_OPENED,r(o("aGYoD").UfoComponentName.EMOJI_PICKER)),"emoji-selection-recorded":new(0,o("4SCyD").UFOExperience)(o("aGYoD").UfoExperienceName.EMOJI_SELECTION_RECORDED,i(o("aGYoD").UfoComponentName.EMOJI_PROVIDER)),"emoji-uploaded":new(0,o("4SCyD").UFOExperience)(o("aGYoD").UfoExperienceName.EMOJI_UPLOADED,i(o("aGYoD").UfoComponentName.EMOJI_PICKER)),"emoji-searched":new(0,o("4SCyD").UFOExperience)(o("aGYoD").UfoExperienceName.EMOJI_SEARCHED,i(o("aGYoD").UfoComponentName.EMOJI_PICKER))};e.exports.ufoExperiences=s,e.exports.sampledUfoRenderedEmoji=e=>(0,o("cGMbZ").withSampling)(s["emoji-rendered"].getInstance(e.id||e.shortName)),e.exports.hasUfoMarked=(e,t)=>e.metrics.marks.some(e=>e.name===t),e.exports.sampledUfoEmojiResourceFetched=e=>(0,o("cGMbZ").withSampling)(s["emoji-resource-fetched"].getInstance(e))}),s("9801n",function(e,t){e.exports.ConcurrentExperience=class{getInstance(e){return this.instances[e]||(this.instances[e]=new(0,o("4SCyD").UFOExperience)(this.experienceId,this.config,e)),this.instances[e]}release(e){(0,o("fJPgb").ufolog)("instanceId",e),this.instances[e]&&this.instances[e].abort(),delete this.instances[e]}constructor(e,t){this.experienceId=void 0,this.config=void 0,this.instances={},this.experienceId=e,this.config=t}}}),s("fJPgb",function(e,t){class r{log(...e){this.enabled&&console.log(r.UFOprefix,...e)}warn(...e){this.enabled&&console.warn(r.UFOprefix,...e)}enable(){this.enabled=!0}disable(){this.enabled=!1}constructor(){this.enabled=!1}}r.UFOprefix="[ufo\uD83D\uDEF8]";let i=new r;e.exports.ufolog=(...e)=>{i.log(...e)},e.exports.ufowarn=(...e)=>{i.warn(...e)}}),s("4SCyD",function(e,t){var r,i,n,s,a,l=o("dQl1W"),c=((r={})[r.EXPERIENCE_PAYLOAD=0]="EXPERIENCE_PAYLOAD",r[r.SUBSCRIBE=1]="SUBSCRIBE",r[r.UNSUBSCRIBE=2]="UNSUBSCRIBE",r),u=((i={}).VISIBLE="visible",i.HIDDEN="hidden",i.MIXED="mixed",i);(n={}).fmp="fmp",n.tti="tti",(s={}).fmp="fmp",s.tti="tti",(a={}).response="response",a.result="result";let d="__SUBSCRIBE_ALL__",p="inline-response",h=()=>{if(!globalThis.__UFO_GLOBAL_EVENT_STREAM__){let e=(()=>{let e=[];return{__buffer_only__:!0,push:t=>{e.length<250&&e.push(t)},getStream:()=>e}})();globalThis.__UFO_GLOBAL_EVENT_STREAM__=e}return globalThis.__UFO_GLOBAL_EVENT_STREAM__},f=(e,t)=>({type:c.SUBSCRIBE,payload:{experienceId:e,callback:t}}),m=(e,t)=>({type:c.UNSUBSCRIBE,payload:{experienceId:e,callback:t}}),g=e=>({type:c.EXPERIENCE_PAYLOAD,payload:e}),y=()=>"undefined"!=typeof window,v=new class{start(){!this.started&&(this.started=!0,document.addEventListener("visibilitychange",this.broadcast),y()&&window.addEventListener("pagehide",this.broadcast))}subscribe(e){this.observers.push(e)}unsubscribe(e){this.observers=this.observers.filter(t=>t!==e)}constructor(){this.started=!1,this.observers=[],this.broadcast=()=>{this.observers.forEach(e=>e()),this.observers=[]}}},x=()=>~~performance.now(),b={[o("28cxD").UFOExperienceState.NOT_STARTED.id]:[o("28cxD").UFOExperienceState.STARTED.id],[o("28cxD").UFOExperienceState.STARTED.id]:[o("28cxD").UFOExperienceState.IN_PROGRESS.id,o("28cxD").UFOExperienceState.BLOCKED.id,o("28cxD").UFOExperienceState.SUCCEEDED.id,o("28cxD").UFOExperienceState.SUCCEEDED_WAITING_FOR_DEPS.id,o("28cxD").UFOExperienceState.FAILED.id,o("28cxD").UFOExperienceState.ABORTED.id],[o("28cxD").UFOExperienceState.IN_PROGRESS.id]:[o("28cxD").UFOExperienceState.BLOCKED.id,o("28cxD").UFOExperienceState.SUCCEEDED.id,o("28cxD").UFOExperienceState.SUCCEEDED_WAITING_FOR_DEPS.id,o("28cxD").UFOExperienceState.FAILED.id,o("28cxD").UFOExperienceState.ABORTED.id],[o("28cxD").UFOExperienceState.BLOCKED.id]:[o("28cxD").UFOExperienceState.RECOVERED.id,o("28cxD").UFOExperienceState.ABORTED.id],[o("28cxD").UFOExperienceState.RECOVERED.id]:[o("28cxD").UFOExperienceState.STARTED.id,o("28cxD").UFOExperienceState.SUCCEEDED.id,o("28cxD").UFOExperienceState.SUCCEEDED_WAITING_FOR_DEPS.id,o("28cxD").UFOExperienceState.FAILED.id,o("28cxD").UFOExperienceState.ABORTED.id],[o("28cxD").UFOExperienceState.SUCCEEDED.id]:[o("28cxD").UFOExperienceState.STARTED.id],[o("28cxD").UFOExperienceState.SUCCEEDED_WAITING_FOR_DEPS.id]:[o("28cxD").UFOExperienceState.SUCCEEDED.id,o("28cxD").UFOExperienceState.FAILED.id,o("28cxD").UFOExperienceState.ABORTED.id],[o("28cxD").UFOExperienceState.FAILED.id]:[o("28cxD").UFOExperienceState.STARTED.id],[o("28cxD").UFOExperienceState.ABORTED.id]:[o("28cxD").UFOExperienceState.STARTED.id]},E=(e,t)=>b[e.id]&&b[e.id].includes(t.id),S=()=>y()&&window.document&&"visible"!==window.document.visibilityState?u.HIDDEN:u.VISIBLE,w=e=>void 0!==e?~~e:x();class k{async transition(e,t){if((0,o("fJPgb").ufolog)("async transition",this.id,this.state.id,e.id),E(this.state,e)){if((0,o("fJPgb").ufolog)(`TRANSITION: ${this.id} from ${this.state.id} to ${e.id} successful`,this.state.final,!e.final),e===o("28cxD").UFOExperienceState.STARTED&&this._reset(),this.state.final&&!e.final&&(this.metrics.startTime=w(t),this.uuid=(0,l.v4)()),this.state=e,e.final){this.metrics.endTime=w(t),this._isManualStateEnabled()||h().push(m(d,this.handleDoneBind));let e=await this.exportData();(0,o("fJPgb").ufolog)("this.parent",this.parent),h().push(g(e))}return!0}return(0,o("fJPgb").ufolog)(`TRANSITION: ${this.id} from ${this.state.id} to ${e.id} unsuccessful`),(0,o("fJPgb").ufowarn)(`transition of ${this.id} from ${this.state} to ${e} is not possible`),!1}async start(e){await this.transition(o("28cxD").UFOExperienceState.STARTED,e)&&(this.pageVisibleState=S(),v.subscribe(this.setPageVisibleStateToMixed),this._isManualStateEnabled()||((0,o("fJPgb").ufolog)("subscribed",this.id),h().push(f(d,this.handleDoneBind))))}mark(e,t){"fmp"!==e&&e!==p?this._mark(e,t):(0,o("fJPgb").ufowarn)("please use markFMP or markInlineResponse for specialised marks")}_mark(e,t){this.metrics.marks.push({name:e,time:w(t)}),this.transition(o("28cxD").UFOExperienceState.IN_PROGRESS)}markFMP(e){this._mark("fmp",e)}markInlineResponse(e){this._mark(p,e)}_isManualStateEnabled(){return null===this.until}_validateManualState(){return!!this._isManualStateEnabled()||((0,o("fJPgb").ufowarn)('manual change of state not allowed as "until" is defined'),!1)}switchToEndState(e,t){return t?.force||this._validateManualState()?(t?.metadata&&this.addMetadata(t.metadata),v.unsubscribe(this.setPageVisibleStateToMixed),this.transition(e)):null}async success(e){return this.switchToEndState(o("28cxD").UFOExperienceState.SUCCEEDED,e)}async failure(e){return this.switchToEndState(o("28cxD").UFOExperienceState.FAILED,e)}async abort(e){return this.switchToEndState(o("28cxD").UFOExperienceState.ABORTED,e)}addMetadata(e){Object.assign(this.metadata,e)}_handleDoneExperience(e){if((0,o("fJPgb").ufolog)("_handleDoneExperience in",this.id,e.state,e,this._until),e.state.final&&null!==this._until){let{done:t,state:r}=this._until(e);t&&!this.state.final&&this.transition(r)}}async getId(){return this.id}async exportData(){return{id:await this.getId(),uuid:this.uuid,type:this.type,schemaVersion:"0.1.5",performanceType:this.performanceType,category:this.category,state:this.state,metadata:{...this.metadata},metrics:{...this.metrics},children:[...this.childExperiences],result:{success:!!this.state.success,startTime:this.metrics.startTime,duration:(this.metrics.endTime||0)-(this.metrics.startTime||0)},platform:this.config.platform||null,pageVisibleState:this.pageVisibleState,featureFlags:this.featureFlags,isSSROutputAsFMP:this.isSSROutputAsFMP,timings:this.timings,explicitTimings:this.explicitTimings,performanceConfig:this.performanceConfig}}_reset(){this.parent=null,this.metadata={},this.onDoneCallbacks=[],this.childExperiences=[],this.metrics={startTime:null,endTime:null,marks:[]},this._until=this.until?this.until():null}constructor(e,t,r=null){this.state=o("28cxD").UFOExperienceState.NOT_STARTED,this.id=void 0,this.instanceId=null,this.parent=null,this.category=null,this.type=void 0,this.performanceType=void 0,this.metadata={},this.onDoneCallbacks=[],this.childExperiences=[],this.featureFlags=void 0,this.timings=void 0,this.explicitTimings={},this.isSSROutputAsFMP=!1,this.handleDoneBind=void 0,this.uuid=null,this.until=void 0,this._until=null,this.pageVisibleState=void 0,this.metrics={startTime:null,endTime:null,marks:[]},this.performanceConfig={},this.config=void 0,this.setPageVisibleStateToMixed=()=>{this.pageVisibleState=u.MIXED,v.unsubscribe(this.setPageVisibleStateToMixed)},this.id=e,this.category=t?.category||null,this.until=t?.until||null,this.instanceId=r,this.handleDoneBind=this._handleDoneExperience.bind(this),this.type=t.type,this.performanceType=t.performanceType,this.performanceConfig=t.performanceConfig||{},this.config=t,this.pageVisibleState=S(),this.featureFlags=t.featureFlags||[],this.timings=t.timings||[],(t.performanceType===o("iqaft").ExperiencePerformanceTypes.PageLoad||t.performanceType===o("iqaft").ExperiencePerformanceTypes.PageSegmentLoad)&&(this.isSSROutputAsFMP=t.isSSROutputAsFMP||!1)}}e.exports.UFOExperience=class extends k{}}),s("28cxD",function(e,t){e.exports.UFOExperienceState={NOT_STARTED:{id:"NOT_STARTED",final:!0},STARTED:{id:"STARTED"},IN_PROGRESS:{id:"IN_PROGRESS"},BLOCKED:{id:"BLOCKED"},RECOVERED:{id:"RECOVERED"},SUCCEEDED:{id:"SUCCEEDED",final:!0,success:!0},SUCCEEDED_WAITING_FOR_DEPS:{id:"SUCCEEDED_WAITING_FOR_DEPS"},FAILED:{id:"FAILED",final:!0},ABORTED:{id:"ABORTED",final:!0}}}),s("iqaft",function(e,t){var r,i,n=((r={}).Load="load",r.Experience="experience",r.Operation="operation",r),o=((i={}).PageLoad="page-load",i.PageSegmentLoad="page-segment-load",i.InlineResult="inline-result",i.Custom="custom",i);e.exports.ExperienceTypes=n,e.exports.ExperiencePerformanceTypes=o}),s("cGMbZ",function(e,t){let r={},i=e=>1===e||0!==e&&Math.random()*e<=1,n=e=>!!r[e.id]&&(e.instanceId?r[e.id].sampledInstance[e.instanceId]:r[e.id].sampled);e.exports.withSampling=e=>{let t=async t=>{if(!n(e)){if(!(t.samplingFunc||i)(t.samplingRate)){e.instanceId&&(r[e.id].sampledInstance[e.instanceId]=!1),r[e.id].sampled=!1;return}return e.instanceId&&(r[e.id].sampledInstance[e.instanceId]=!0,r[e.id].sampled=!0),e.start(t.startTime)}},o=async t=>n(e)?e.success(t):null,s=async t=>n(e)?e.failure(t):null,a=async t=>n(e)?e.abort(t):null;return r[e.id]||(r[e.id]={sampled:!1,sampledInstance:{}}),{...e,start:t,addMetadata:t=>{if(n(e))return e.addMetadata(t)},success:o,failure:s,abort:a,mark:(t,r)=>{if(n(e))return e.mark(t,r)},markFMP:t=>{if(n(e))return e.markFMP(t)},markInlineResponse:t=>{if(n(e))return e.markInlineResponse(t)}}}}),s("kbdB6",function(e,t){for(var r={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},i={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},n="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),o="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),s=0;s<10;s++)r[48+s]=r[96+s]=String(s);for(var s=1;s<=24;s++)r[s+111]="F"+s;for(var s=65;s<=90;s++)r[s]=String.fromCharCode(s+32),i[s]=String.fromCharCode(s);for(var a in r)i.hasOwnProperty(a)||(i[a]=r[a]);e.exports.base=r,e.exports.shift=i,e.exports.keyName=function(e){var t=!(n&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||o&&e.shiftKey&&e.key&&1==e.key.length||"Unidentified"==e.key)&&e.key||(e.shiftKey?i:r)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}}),s("ks2lK",function(e,t){let r=Object.create(null);class i{get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=o("5SAOw").Slice.empty){let r=t.content.lastChild,i=null;for(let e=0;e<t.openEnd;e++)i=r,r=r.lastChild;let n=e.steps.length,s=this.ranges;for(let a=0;a<s.length;a++){let{$from:l,$to:c}=s[a],u=e.mapping.slice(n);e.replaceRange(u.map(l.pos),u.map(c.pos),a?o("5SAOw").Slice.empty:t),0==a&&m(e,n,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,t){let r=e.steps.length,i=this.ranges;for(let n=0;n<i.length;n++){let{$from:o,$to:s}=i[n],a=e.mapping.slice(r),l=a.map(o.pos),c=a.map(s.pos);n?e.deleteRange(l,c):(e.replaceRangeWith(l,c,t),m(e,r,t.isInline?-1:1))}}static findFrom(e,t,r=!1){let i=e.parent.inlineContent?new l(e):f(e.node(0),e.parent,e.pos,e.index(),t,r);if(i)return i;for(let i=e.depth-1;i>=0;i--){let n=t<0?f(e.node(0),e.node(i),e.before(i+1),e.index(i),t,r):f(e.node(0),e.node(i),e.after(i+1),e.index(i)+1,t,r);if(n)return n}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new p(e.node(0))}static atStart(e){return f(e,e,0,0,1)||new p(e)}static atEnd(e){return f(e,e,e.content.size,e.childCount,-1)||new p(e)}static fromJSON(e,t){if(!t||!t.type)throw RangeError("Invalid input for Selection.fromJSON");let i=r[t.type];if(!i)throw RangeError(`No selection type ${t.type} defined`);return i.fromJSON(e,t)}static jsonID(e,t){if(e in r)throw RangeError("Duplicate use of selection JSON ID "+e);return r[e]=t,t.prototype.jsonID=e,t}getBookmark(){return l.between(this.$anchor,this.$head).getBookmark()}constructor(e,t,r){this.$anchor=e,this.$head=t,this.ranges=r||[new n(e.min(t),e.max(t))]}}i.prototype.visible=!0;class n{constructor(e,t){this.$from=e,this.$to=t}}let s=!1;function a(e){s||e.parent.inlineContent||(s=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}class l extends i{get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let r=e.resolve(t.map(this.head));if(!r.parent.inlineContent)return i.near(r);let n=e.resolve(t.map(this.anchor));return new l(n.parent.inlineContent?n:r,r)}replace(e,t=o("5SAOw").Slice.empty){if(super.replace(e,t),t==o("5SAOw").Slice.empty){let t=this.$from.marksAcross(this.$to);t&&e.ensureMarks(t)}}eq(e){return e instanceof l&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new c(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if("number"!=typeof t.anchor||"number"!=typeof t.head)throw RangeError("Invalid input for TextSelection.fromJSON");return new l(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){let i=e.resolve(t);return new this(i,r==t?i:e.resolve(r))}static between(e,t,r){let n=e.pos-t.pos;if((!r||n)&&(r=n>=0?1:-1),!t.parent.inlineContent){let e=i.findFrom(t,r,!0)||i.findFrom(t,-r,!0);if(!e)return i.near(t,r);t=e.$head}return e.parent.inlineContent||(0==n?e=t:(e=(i.findFrom(e,-r,!0)||i.findFrom(e,r,!0)).$anchor).pos<t.pos!=n<0&&(e=t)),new l(e,t)}constructor(e,t=e){a(e),a(t),super(e,t)}}i.jsonID("text",l);class c{map(e){return new c(e.map(this.anchor),e.map(this.head))}resolve(e){return l.between(e.resolve(this.anchor),e.resolve(this.head))}constructor(e,t){this.anchor=e,this.head=t}}class u extends i{map(e,t){let{deleted:r,pos:n}=t.mapResult(this.anchor),o=e.resolve(n);return r?i.near(o):new u(o)}content(){return new(0,o("5SAOw").Slice)(o("5SAOw").Fragment.from(this.node),0,0)}eq(e){return e instanceof u&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new d(this.anchor)}static fromJSON(e,t){if("number"!=typeof t.anchor)throw RangeError("Invalid input for NodeSelection.fromJSON");return new u(e.resolve(t.anchor))}static create(e,t){return new u(e.resolve(t))}static isSelectable(e){return!e.isText&&!1!==e.type.spec.selectable}constructor(e){let t=e.nodeAfter;super(e,e.node(0).resolve(e.pos+t.nodeSize)),this.node=t}}u.prototype.visible=!1,i.jsonID("node",u);class d{map(e){let{deleted:t,pos:r}=e.mapResult(this.anchor);return t?new c(r,r):new d(r)}resolve(e){let t=e.resolve(this.anchor),r=t.nodeAfter;return r&&u.isSelectable(r)?new u(t):i.near(t)}constructor(e){this.anchor=e}}class p extends i{replace(e,t=o("5SAOw").Slice.empty){if(t==o("5SAOw").Slice.empty){e.delete(0,e.doc.content.size);let t=i.atStart(e.doc);t.eq(e.selection)||e.setSelection(t)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new p(e)}map(e){return new p(e)}eq(e){return e instanceof p}getBookmark(){return h}constructor(e){super(e.resolve(0),e.resolve(e.content.size))}}i.jsonID("all",p);let h={map(){return this},resolve:e=>new p(e)};function f(e,t,r,i,n,o=!1){if(t.inlineContent)return l.create(e,r);for(let s=i-(n>0?0:1);n>0?s<t.childCount:s>=0;s+=n){let i=t.child(s);if(i.isAtom){if(!o&&u.isSelectable(i))return u.create(e,r-(n<0?i.nodeSize:0))}else{let t=f(e,i,r+n,n<0?i.childCount:0,n,o);if(t)return t}r+=i.nodeSize*n}return null}function m(e,t,r){let n,s=e.steps.length-1;if(s<t)return;let a=e.steps[s];(a instanceof o("aXG5V").ReplaceStep||a instanceof o("aXG5V").ReplaceAroundStep)&&(e.mapping.maps[s].forEach((e,t,r,i)=>{null==n&&(n=i)}),e.setSelection(i.near(e.doc.resolve(n),r)))}class g extends o("aXG5V").Transform{get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(1|this.updated)&-3,this.storedMarks=null,this}get selectionSet(){return(1&this.updated)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=2,this}ensureMarks(e){return o("5SAOw").Mark.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(2&this.updated)>0}addStep(e,t){super.addStep(e,t),this.updated=-3&this.updated,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let r=this.selection;return t&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||o("5SAOw").Mark.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,r){let n=this.doc.type.schema;if(null==t)return e?this.replaceSelectionWith(n.text(e),!0):this.deleteSelection();{if(null==r&&(r=t),r=null==r?t:r,!e)return this.deleteRange(t,r);let o=this.storedMarks;if(!o){let e=this.doc.resolve(t);o=r==t?e.marks():e.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(t,r,n.text(e,o)),this.selection.empty||this.setSelection(i.near(this.selection.$to)),this}}setMeta(e,t){return this.meta["string"==typeof e?e:e.key]=t,this}getMeta(e){return this.meta["string"==typeof e?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=4,this}get scrolledIntoView(){return(4&this.updated)>0}constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}}function y(e,t){return t&&e?e.bind(t):e}class v{constructor(e,t,r){this.name=e,this.init=y(t.init,r),this.apply=y(t.apply,r)}}let x=[new v("doc",{init:e=>e.doc||e.schema.topNodeType.createAndFill(),apply:e=>e.doc}),new v("selection",{init:(e,t)=>e.selection||i.atStart(t.doc),apply:e=>e.selection}),new v("storedMarks",{init:e=>e.storedMarks||null,apply:(e,t,r,i)=>i.selection.$cursor?e.storedMarks:null}),new v("scrollToSelection",{init:()=>0,apply:(e,t)=>e.scrolledIntoView?t+1:t})];class b{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=x.slice(),t&&t.forEach(e=>{if(this.pluginsByKey[e.key])throw RangeError("Adding different instances of a keyed plugin ("+e.key+")");this.plugins.push(e),this.pluginsByKey[e.key]=e,e.spec.state&&this.fields.push(new v(e.key,e.spec.state,e))})}}class E{get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=t){let t=this.config.plugins[r];if(t.spec.filterTransaction&&!t.spec.filterTransaction.call(t,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],r=this.applyInner(e),i=null;for(;;){let n=!1;for(let o=0;o<this.config.plugins.length;o++){let s=this.config.plugins[o];if(s.spec.appendTransaction){let a=i?i[o].n:0,l=i?i[o].state:this,c=a<t.length&&s.spec.appendTransaction.call(s,a?t.slice(a):t,l,r);if(c&&r.filterTransaction(c,o)){if(c.setMeta("appendedTransaction",e),!i){i=[];for(let e=0;e<this.config.plugins.length;e++)i.push(e<o?{state:r,n:t.length}:{state:this,n:0})}t.push(c),r=r.applyInner(c),n=!0}i&&(i[o]={state:r,n:t.length})}}if(!n)return{state:r,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw RangeError("Applying a mismatched transaction");let t=new E(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let n=r[i];t[n.name]=n.apply(e,this[n.name],this,t)}return t}get tr(){return new g(this)}static create(e){let t=new b(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new E(t);for(let i=0;i<t.fields.length;i++)r[t.fields[i].name]=t.fields[i].init(e,r);return r}reconfigure(e){let t=new b(this.schema,e.plugins),r=t.fields,i=new E(t);for(let t=0;t<r.length;t++){let n=r[t].name;i[n]=this.hasOwnProperty(n)?this[n]:r[t].init(e,i)}return i}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(e=>e.toJSON())),e&&"object"==typeof e)for(let r in e){if("doc"==r||"selection"==r)throw RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],n=i.spec.state;n&&n.toJSON&&(t[r]=n.toJSON.call(i,this[i.key]))}return t}static fromJSON(e,t,r){if(!t)throw RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw RangeError("Required config field 'schema' missing");let n=new b(e.schema,e.plugins),s=new E(n);return n.fields.forEach(n=>{if("doc"==n.name)s.doc=o("5SAOw").Node.fromJSON(e.schema,t.doc);else if("selection"==n.name)s.selection=i.fromJSON(s.doc,t.selection);else if("storedMarks"==n.name)t.storedMarks&&(s.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let i in r){let o=r[i],a=o.spec.state;if(o.key==n.name&&a&&a.fromJSON&&Object.prototype.hasOwnProperty.call(t,i)){s[n.name]=a.fromJSON.call(o,e,t[i],s);return}}s[n.name]=n.init(e,s)}}),s}constructor(e){this.config=e}}let S=Object.create(null);function w(e){return e in S?e+"$"+ ++S[e]:(S[e]=0,e+"$")}e.exports.Selection=i,e.exports.TextSelection=l,e.exports.AllSelection=p,e.exports.SelectionRange=n,e.exports.NodeSelection=u,e.exports.Transaction=g,e.exports.EditorState=E,e.exports.Plugin=class{getState(e){return e[this.key]}constructor(e){this.spec=e,this.props={},e.props&&function e(t,r,i){for(let n in t){let o=t[n];o instanceof Function?o=o.bind(r):"handleDOMEvents"==n&&(o=e(o,r,{})),i[n]=o}return i}(e.props,this,this.props),this.key=e.key?e.key.key:w("plugin")}},e.exports.PluginKey=class{get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}constructor(e="key"){this.key=w(e)}}}),s("5SAOw",function(e,t){function r(e){this.content=e}r.prototype={constructor:r,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return -1},get:function(e){var t=this.find(e);return -1==t?void 0:this.content[t+1]},update:function(e,t,i){var n=i&&i!=e?this.remove(i):this,o=n.find(e),s=n.content.slice();return -1==o?s.push(i||e,t):(s[o+1]=t,i&&(s[o]=i)),new r(s)},remove:function(e){var t=this.find(e);if(-1==t)return this;var i=this.content.slice();return i.splice(t,2),new r(i)},addToStart:function(e,t){return new r([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var i=this.remove(e).content.slice();return i.push(e,t),new r(i)},addBefore:function(e,t,i){var n=this.remove(t),o=n.content.slice(),s=n.find(e);return o.splice(-1==s?o.length:s,0,t,i),new r(o)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return(e=r.from(e)).size?new r(e.content.concat(this.subtract(e).content)):this},append:function(e){return(e=r.from(e)).size?new r(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=r.from(e);for(var i=0;i<e.content.length;i+=2)t=t.remove(e.content[i]);return t},toObject:function(){var e={};return this.forEach(function(t,r){e[t]=r}),e},get size(){return this.content.length>>1}},r.from=function(e){if(e instanceof r)return e;var t=[];if(e)for(var i in e)t.push(i,e[i]);return new r(t)};class i{nodesBetween(e,t,r,i=0,n){for(let o=0,s=0;s<t;o++){let a=this.content[o],l=s+a.nodeSize;if(l>e&&!1!==r(a,i+s,n||null,o)&&a.content.size){let n=s+1;a.nodesBetween(Math.max(0,e-n),Math.min(a.content.size,t-n),r,i+n)}s=l}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,i){let n="",o=!0;return this.nodesBetween(e,t,(s,a)=>{let l=s.isText?s.text.slice(Math.max(e,a)-a,t-a):s.isLeaf?i?"function"==typeof i?i(s):i:s.type.spec.leafText?s.type.spec.leafText(s):"":"";s.isBlock&&(s.isLeaf&&l||s.isTextblock)&&r&&(o?o=!1:n+=r),n+=l},0),n}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,n=this.content.slice(),o=0;for(t.isText&&t.sameMarkup(r)&&(n[n.length-1]=t.withText(t.text+r.text),o=1);o<e.content.length;o++)n.push(e.content[o]);return new i(n,this.size+e.size)}cut(e,t=this.size){if(0==e&&t==this.size)return this;let r=[],n=0;if(t>e)for(let i=0,o=0;o<t;i++){let s=this.content[i],a=o+s.nodeSize;a>e&&((o<e||a>t)&&(s=s.isText?s.cut(Math.max(0,e-o),Math.min(s.text.length,t-o)):s.cut(Math.max(0,e-o-1),Math.min(s.content.size,t-o-1))),r.push(s),n+=s.nodeSize),o=a}return new i(r,n)}cutByIndex(e,t){return e==t?i.empty:0==e&&t==this.content.length?this:new i(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let n=this.content.slice(),o=this.size+t.nodeSize-r.nodeSize;return n[e]=t,new i(n,o)}addToStart(e){return new i([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new i(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let i=this.content[t];e(i,r,t),r+=i.nodeSize}}findDiffStart(e,t=0){return function e(t,r,i){for(let n=0;;n++){if(n==t.childCount||n==r.childCount)return t.childCount==r.childCount?null:i;let o=t.child(n),s=r.child(n);if(o==s){i+=o.nodeSize;continue}if(!o.sameMarkup(s))return i;if(o.isText&&o.text!=s.text){for(let e=0;o.text[e]==s.text[e];e++)i++;return i}if(o.content.size||s.content.size){let t=e(o.content,s.content,i+1);if(null!=t)return t}i+=o.nodeSize}}(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return function e(t,r,i,n){for(let o=t.childCount,s=r.childCount;;){if(0==o||0==s)return o==s?null:{a:i,b:n};let a=t.child(--o),l=r.child(--s),c=a.nodeSize;if(a==l){i-=c,n-=c;continue}if(!a.sameMarkup(l))return{a:i,b:n};if(a.isText&&a.text!=l.text){let e=0,t=Math.min(a.text.length,l.text.length);for(;e<t&&a.text[a.text.length-e-1]==l.text[l.text.length-e-1];)e++,i--,n--;return{a:i,b:n}}if(a.content.size||l.content.size){let t=e(a.content,l.content,i-1,n-1);if(t)return t}i-=c,n-=c}}(this,e,t,r)}findIndex(e,t=-1){if(0==e)return o(0,e);if(e==this.size)return o(this.content.length,e);if(e>this.size||e<0)throw RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let n=i+this.child(r).nodeSize;if(n>=e){if(n==e||t>0)return o(r+1,n);return o(r,i)}i=n}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return i.empty;if(!Array.isArray(t))throw RangeError("Invalid input for Fragment.fromJSON");return new i(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return i.empty;let t,r=0;for(let i=0;i<e.length;i++){let n=e[i];r+=n.nodeSize,i&&n.isText&&e[i-1].sameMarkup(n)?(t||(t=e.slice(0,i)),t[t.length-1]=n.withText(t[t.length-1].text+n.text)):t&&t.push(n)}return new i(t||e,r)}static from(e){if(!e)return i.empty;if(e instanceof i)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new i([e],e.nodeSize);throw RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}constructor(e,t){if(this.content=e,this.size=t||0,null==t)for(let t=0;t<e.length;t++)this.size+=e[t].nodeSize}}i.empty=new i([],0);let n={index:0,offset:0};function o(e,t){return n.index=e,n.offset=t,n}function s(e,t){if(e===t)return!0;if(!(e&&"object"==typeof e)||!(t&&"object"==typeof t))return!1;let r=Array.isArray(e);if(Array.isArray(t)!=r)return!1;if(r){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!s(e[r],t[r]))return!1}else{for(let r in e)if(!(r in t)||!s(e[r],t[r]))return!1;for(let r in t)if(!(r in e))return!1}return!0}class a{addToSet(e){let t,r=!1;for(let i=0;i<e.length;i++){let n=e[i];if(this.eq(n))return e;if(this.type.excludes(n.type))t||(t=e.slice(0,i));else{if(n.type.excludes(this.type))return e;!r&&n.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),r=!0),t&&t.push(n)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&s(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw RangeError(`There is no mark type ${t.type} in this schema`);let i=r.create(t.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&0==e.length)return a.none;if(e instanceof a)return[e];let t=e.slice();return t.sort((e,t)=>e.type.rank-t.type.rank),t}constructor(e,t){this.type=e,this.attrs=t}}a.none=[];class l extends Error{}class c{get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=function e(t,r,i,n){let{index:o,offset:s}=t.findIndex(r),a=t.maybeChild(o);if(s==r||a.isText)return n&&!n.canReplace(o,o,i)?null:t.cut(0,r).append(i).append(t.cut(r));let l=e(a.content,r-s-1,i);return l&&t.replaceChild(o,a.copy(l))}(this.content,e+this.openStart,t);return r&&new c(r,this.openStart,this.openEnd)}removeBetween(e,t){return new c(function e(t,r,i){let{index:n,offset:o}=t.findIndex(r),s=t.maybeChild(n),{index:a,offset:l}=t.findIndex(i);if(o==r||s.isText){if(l!=i&&!t.child(a).isText)throw RangeError("Removing non-flat range");return t.cut(0,r).append(t.cut(i))}if(n!=a)throw RangeError("Removing non-flat range");return t.replaceChild(n,s.copy(e(s.content,r-o-1,i-o-1)))}(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return c.empty;let r=t.openStart||0,n=t.openEnd||0;if("number"!=typeof r||"number"!=typeof n)throw RangeError("Invalid input for Slice.fromJSON");return new c(i.fromJSON(e,t.content),r,n)}static maxOpen(e,t=!0){let r=0,i=0;for(let i=e.firstChild;i&&!i.isLeaf&&(t||!i.type.spec.isolating);i=i.firstChild)r++;for(let r=e.lastChild;r&&!r.isLeaf&&(t||!r.type.spec.isolating);r=r.lastChild)i++;return new c(e,r,i)}constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}}function u(e,t){if(!t.type.compatibleContent(e.type))throw new l("Cannot join "+t.type.name+" onto "+e.type.name)}function d(e,t,r){let i=e.node(r);return u(i,t.node(r)),i}function p(e,t){let r=t.length-1;r>=0&&e.isText&&e.sameMarkup(t[r])?t[r]=e.withText(t[r].text+e.text):t.push(e)}function h(e,t,r,i){let n=(t||e).node(r),o=0,s=t?t.index(r):n.childCount;e&&(o=e.index(r),e.depth>r?o++:e.textOffset&&(p(e.nodeAfter,i),o++));for(let e=o;e<s;e++)p(n.child(e),i);t&&t.depth==r&&t.textOffset&&p(t.nodeBefore,i)}function f(e,t){return e.type.checkContent(t),e.copy(t)}function m(e,t,r){let n=[];return h(null,e,r,n),e.depth>r&&p(f(d(e,t,r+1),m(e,t,r+1)),n),h(t,null,r,n),new i(n)}c.empty=new c(i.empty,0,0);class g{resolveDepth(e){return null==e?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[3*this.resolveDepth(e)]}index(e){return this.path[3*this.resolveDepth(e)+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e!=this.depth||this.textOffset?1:0)}start(e){return 0==(e=this.resolveDepth(e))?0:this.path[3*e-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(!(e=this.resolveDepth(e)))throw RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]}after(e){if(!(e=this.resolveDepth(e)))throw RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]+this.path[3*e].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(t);return r?e.child(t).cut(r):i}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):0==e?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let r=this.path[3*t],i=0==t?0:this.path[3*t-1]+1;for(let t=0;t<e;t++)i+=r.child(t).nodeSize;return i}marks(){let e=this.parent,t=this.index();if(0==e.content.size)return a.none;if(this.textOffset)return e.child(t).marks;let r=e.maybeChild(t-1),i=e.maybeChild(t);if(!r){let e=r;r=i,i=e}let n=r.marks;for(var o=0;o<n.length;o++)!1!==n[o].type.spec.inclusive||i&&n[o].isInSet(i.marks)||(n=n[o--].removeFromSet(n));return n}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let r=t.marks,i=e.parent.maybeChild(e.index());for(var n=0;n<r.length;n++)!1!==r[n].type.spec.inclusive||i&&r[n].isInSet(i.marks)||(r=r[n--].removeFromSet(r));return r}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!t||t(this.node(r))))return new b(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw RangeError("Position "+t+" out of range");let r=[],i=0,n=t;for(let t=e;;){let{index:e,offset:o}=t.content.findIndex(n),s=n-o;if(r.push(t,e,i+o),!s||(t=t.child(e)).isText)break;n=s-1,i+=o+1}return new g(t,r,n)}static resolveCached(e,t){let r=x.get(e);if(r)for(let e=0;e<r.elts.length;e++){let i=r.elts[e];if(i.pos==t)return i}else x.set(e,r=new y);let i=r.elts[r.i]=g.resolve(e,t);return r.i=(r.i+1)%v,i}constructor(e,t,r){this.pos=e,this.path=t,this.parentOffset=r,this.depth=t.length/3-1}}class y{constructor(){this.elts=[],this.i=0}}let v=12,x=new WeakMap;class b{get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}constructor(e,t,r){this.$from=e,this.$to=t,this.depth=r}}let E=Object.create(null);class S{get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,r,i=0){this.content.nodesBetween(e,t,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,r,i){return this.content.textBetween(e,t,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,r){return this.type==e&&s(this.attrs,t||e.defaultAttrs||E)&&a.sameSet(this.marks,r||a.none)}copy(e=null){return e==this.content?this:new S(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new S(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return 0==e&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,r=!1){if(e==t)return c.empty;let i=this.resolve(e),n=this.resolve(t),o=r?0:i.sharedDepth(t),s=i.start(o);return new c(i.node(o).content.cut(i.pos-s,n.pos-s),i.depth-o,n.depth-o)}replace(e,t,r){var n=this.resolve(e),o=this.resolve(t);if(r.openStart>n.depth)throw new l("Inserted content deeper than insertion position");if(n.depth-r.openStart!=o.depth-r.openEnd)throw new l("Inconsistent open depths");return function e(t,r,n,o){let s=t.index(o),a=t.node(o);if(s==r.index(o)&&o<t.depth-n.openStart){let i=e(t,r,n,o+1);return a.copy(a.content.replaceChild(s,i))}if(!n.content.size)return f(a,m(t,r,o));if(n.openStart||n.openEnd||t.depth!=o||r.depth!=o){let{start:e,end:s}=function(e,t){let r=t.depth-e.openStart,n=t.node(r).copy(e.content);for(let e=r-1;e>=0;e--)n=t.node(e).copy(i.from(n));return{start:n.resolveNoCache(e.openStart+r),end:n.resolveNoCache(n.content.size-e.openEnd-r)}}(n,t);return f(a,function e(t,r,n,o,s){let a=t.depth>s&&d(t,r,s+1),l=o.depth>s&&d(n,o,s+1),c=[];return h(null,t,s,c),a&&l&&r.index(s)==n.index(s)?(u(a,l),p(f(a,e(t,r,n,o,s+1)),c)):(a&&p(f(a,m(t,r,s+1)),c),h(r,n,s,c),l&&p(f(l,m(n,o,s+1)),c)),h(o,null,s,c),new i(c)}(t,e,s,r,o))}{let e=t.parent,i=e.content;return f(e,i.cut(0,t.parentOffset).append(n.content).append(i.cut(r.parentOffset)))}}(n,o,r,0)}nodeAt(e){for(let t=this;;){let{index:r,offset:i}=t.content.findIndex(e);if(!(t=t.maybeChild(r)))return null;if(i==e||t.isText)return t;e-=i+1}}childAfter(e){let{index:t,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:r}}childBefore(e){if(0==e)return{node:null,index:0,offset:0};let{index:t,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(t),index:t,offset:r};let i=this.content.child(t-1);return{node:i,index:t-1,offset:r-i.nodeSize}}resolve(e){return g.resolveCached(this,e)}resolveNoCache(e){return g.resolve(this,e)}rangeHasMark(e,t,r){let i=!1;return t>e&&this.nodesBetween(e,t,e=>(r.isInSet(e.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),k(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,r=i.empty,n=0,o=r.childCount){let s=this.contentMatchAt(e).matchFragment(r,n,o),a=s&&s.matchFragment(this.content,t);if(!a||!a.validEnd)return!1;for(let e=n;e<o;e++)if(!this.type.allowsMarks(r.child(e).marks))return!1;return!0}canReplaceWith(e,t,r,i){if(i&&!this.type.allowsMarks(i))return!1;let n=this.contentMatchAt(e).matchType(r),o=n&&n.matchFragment(this.content,t);return!!o&&o.validEnd}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=a.none;for(let t=0;t<this.marks.length;t++){let r=this.marks[t];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!a.sameSet(e,this.marks))throw RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(e=>e.type.name)}`);this.content.forEach(e=>e.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(e=>e.toJSON())),e}static fromJSON(e,t){let r;if(!t)throw RangeError("Invalid input for Node.fromJSON");if(t.marks){if(!Array.isArray(t.marks))throw RangeError("Invalid mark data for Node.fromJSON");r=t.marks.map(e.markFromJSON)}if("text"==t.type){if("string"!=typeof t.text)throw RangeError("Invalid text node in JSON");return e.text(t.text,r)}let n=i.fromJSON(e,t.content),o=e.nodeType(t.type).create(t.attrs,n,r);return o.type.checkAttrs(o.attrs),o}constructor(e,t,r,n=a.none){this.type=e,this.attrs=t,this.marks=n,this.content=r||i.empty}}S.prototype.text=void 0;class w extends S{toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):k(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new w(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new w(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return 0==e&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}constructor(e,t,r,i){if(super(e,t,null,i),!r)throw RangeError("Empty text nodes are not allowed");this.text=r}}function k(e,t){for(let r=e.length-1;r>=0;r--)t=e[r].type.name+"("+t+")";return t}class _{static parse(e,t){var r;let i,n=new j(e,t);if(null==n.next)return _.empty;let o=function e(t){let r=[];do r.push(function(t){let r=[];do r.push(function(t){let r=function(t){if(t.eat("(")){let r=e(t);return t.eat(")")||t.err("Missing closing paren"),r}if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=(function(e,t){let r=e.nodeTypes,i=r[t];if(i)return[i];let n=[];for(let e in r){let i=r[e];i.isInGroup(t)&&n.push(i)}return 0==n.length&&e.err("No node type or group '"+t+"' found"),n})(t,t.next).map(e=>(null==t.inline?t.inline=e.isInline:t.inline!=e.isInline&&t.err("Mixing inline and block content"),{type:"name",value:e}));return t.pos++,1==e.length?e[0]:{type:"choice",exprs:e}}}(t);for(;;)if(t.eat("+"))r={type:"plus",expr:r};else if(t.eat("*"))r={type:"star",expr:r};else if(t.eat("?"))r={type:"opt",expr:r};else if(t.eat("{"))r=function(e,t){let r=M(e),i=r;return e.eat(",")&&(i="}"!=e.next?M(e):-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:r,max:i,expr:t}}(t,r);else break;return r}(t));while(t.next&&")"!=t.next&&"|"!=t.next)return 1==r.length?r[0]:{type:"seq",exprs:r}}(t));while(t.eat("|"))return 1==r.length?r[0]:{type:"choice",exprs:r}}(n);n.next&&n.err("Unexpected trailing text");let s=(r=function(e){let t=[[]];return n(function e(t,o){if("choice"==t.type)return t.exprs.reduce((t,r)=>t.concat(e(r,o)),[]);if("seq"==t.type)for(let i=0;;i++){let s=e(t.exprs[i],o);if(i==t.exprs.length-1)return s;n(s,o=r())}else if("star"==t.type){let s=r();return i(o,s),n(e(t.expr,s),s),[i(s)]}else if("plus"==t.type){let s=r();return n(e(t.expr,o),s),n(e(t.expr,s),s),[i(s)]}else if("opt"==t.type)return[i(o)].concat(e(t.expr,o));else if("range"==t.type){let s=o;for(let i=0;i<t.min;i++){let i=r();n(e(t.expr,s),i),s=i}if(-1==t.max)n(e(t.expr,s),s);else for(let o=t.min;o<t.max;o++){let o=r();i(s,o),n(e(t.expr,s),o),s=o}return[i(s)]}else if("name"==t.type)return[i(o,void 0,t.value)];else throw Error("Unknown expr type")}(e,0),r()),t;function r(){return t.push([])-1}function i(e,r,i){let n={term:i,to:r};return t[e].push(n),n}function n(e,t){e.forEach(e=>e.to=t)}}(o),i=Object.create(null),function e(t){let n=[];t.forEach(e=>{r[e].forEach(({term:e,to:t})=>{let i;if(e){for(let t=0;t<n.length;t++)n[t][0]==e&&(i=n[t][1]);A(r,t).forEach(t=>{i||n.push([e,i=[]]),-1==i.indexOf(t)&&i.push(t)})}})});let o=i[t.join(",")]=new _(t.indexOf(r.length-1)>-1);for(let t=0;t<n.length;t++){let r=n[t][1].sort(I);o.next.push({type:n[t][0],next:i[r.join(",")]||e(r)})}return o}(A(r,0)));return function(e,t){for(let r=0,i=[e];r<i.length;r++){let e=i[r],n=!e.validEnd,o=[];for(let t=0;t<e.next.length;t++){let{type:r,next:s}=e.next[t];o.push(r.name),n&&!(r.isText||r.hasRequiredAttrs())&&(n=!1),-1==i.indexOf(s)&&i.push(s)}n&&t.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(s,n),s}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,r=e.childCount){let i=this;for(let n=t;i&&n<r;n++)i=i.matchType(e.child(n).type);return i}get inlineContent(){return 0!=this.next.length&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let r=0;r<e.next.length;r++)if(this.next[t].type==e.next[r].type)return!0;return!1}fillBefore(e,t=!1,r=0){let n=[this];return function o(s,a){let l=s.matchFragment(e,r);if(l&&(!t||l.validEnd))return i.from(a.map(e=>e.createAndFill()));for(let e=0;e<s.next.length;e++){let{type:t,next:r}=s.next[e];if(!(t.isText||t.hasRequiredAttrs())&&-1==n.indexOf(r)){n.push(r);let e=o(r,a.concat(t));if(e)return e}}return null}(this,[])}findWrapping(e){for(let t=0;t<this.wrapCache.length;t+=2)if(this.wrapCache[t]==e)return this.wrapCache[t+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),n=i.match;if(n.matchType(e)){let e=[];for(let t=i;t.type;t=t.via)e.push(t.type);return e.reverse()}for(let e=0;e<n.next.length;e++){let{type:o,next:s}=n.next[e];o.isLeaf||o.hasRequiredAttrs()||o.name in t||i.type&&!s.validEnd||(r.push({match:o.contentMatch,type:o,via:i}),t[o.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];return!function t(r){e.push(r);for(let i=0;i<r.next.length;i++)-1==e.indexOf(r.next[i].next)&&t(r.next[i].next)}(this),e.map((t,r)=>{let i=r+(t.validEnd?"*":" ")+" ";for(let r=0;r<t.next.length;r++)i+=(r?", ":"")+t.next[r].type.name+"->"+e.indexOf(t.next[r].next);return i}).join("\n")}constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}}_.empty=new _(!0);class j{get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw SyntaxError(e+" (in content expression '"+this.string+"')")}constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}}function M(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function I(e,t){return t-e}function A(e,t){let r=[];return function t(i){let n=e[i];if(1==n.length&&!n[0].term)return t(n[0].to);r.push(i);for(let e=0;e<n.length;e++){let{term:i,to:o}=n[e];i||-1!=r.indexOf(o)||t(o)}}(t),r.sort(I)}function O(e){let t=Object.create(null);for(let r in e){let i=e[r];if(!i.hasDefault)return null;t[r]=i.default}return t}function T(e,t){let r=Object.create(null);for(let i in e){let n=t&&t[i];if(void 0===n){let t=e[i];if(t.hasDefault)n=t.default;else throw RangeError("No value supplied for attribute "+i)}r[i]=n}return r}function C(e,t,r,i){for(let i in t)if(!(i in e))throw RangeError(`Unsupported attribute ${i} for ${r} of type ${i}`);for(let r in e){let i=e[r];i.validate&&i.validate(t[r])}}function R(e,t){let r=Object.create(null);if(t)for(let i in t)r[i]=new F(e,i,t[i]);return r}class N{get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==_.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:T(this.attrs,e)}create(e=null,t,r){if(this.isText)throw Error("NodeType.create can't construct text nodes");return new S(this,this.computeAttrs(e),i.from(t),a.setFrom(r))}createChecked(e=null,t,r){return t=i.from(t),this.checkContent(t),new S(this,this.computeAttrs(e),t,a.setFrom(r))}createAndFill(e=null,t,r){if(e=this.computeAttrs(e),(t=i.from(t)).size){let e=this.contentMatch.fillBefore(t);if(!e)return null;t=e.append(t)}let n=this.contentMatch.matchFragment(t),o=n&&n.fillBefore(i.empty,!0);return o?new S(this,e,t.append(o),a.setFrom(r)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let t=0;t<e.childCount;t++)if(!this.allowsMarks(e.child(t).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){C(this.attrs,e,"node",this.name)}allowsMarkType(e){return null==this.markSet||this.markSet.indexOf(e)>-1}allowsMarks(e){if(null==this.markSet)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){let t;if(null==this.markSet)return e;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?t&&t.push(e[r]):t||(t=e.slice(0,r));return t?t.length?t:a.none:e}static compile(e,t){let r=Object.create(null);e.forEach((e,i)=>r[e]=new N(e,t,i));let i=t.spec.topNode||"doc";if(!r[i])throw RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw RangeError("Every schema needs a 'text' type");for(let e in r.text.attrs)throw RangeError("The text node type should not have attributes");return r}constructor(e,t,r){this.name=e,this.schema=t,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=R(e,r.attrs),this.defaultAttrs=O(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||"text"==e),this.isText="text"==e}}class F{get isRequired(){return!this.hasDefault}constructor(e,t,r){let i;this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate="string"==typeof r.validate?(i=r.validate.split("|"),r=>{let n=null===r?"null":typeof r;if(0>i.indexOf(n))throw RangeError(`Expected value of type ${i} for attribute ${t} on type ${e}, got ${n}`)}):r.validate}}class P{create(e=null){return!e&&this.instance?this.instance:new a(this,T(this.attrs,e))}static compile(e,t){let r=Object.create(null),i=0;return e.forEach((e,n)=>r[e]=new P(e,i++,t,n)),r}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){C(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}constructor(e,t,r,i){this.name=e,this.rank=t,this.schema=r,this.spec=i,this.attrs=R(e,i.attrs),this.excluded=null;let n=O(this.attrs);this.instance=n?new a(this,n):null}}function D(e,t){let r=[];for(let i=0;i<t.length;i++){let n=t[i],o=e.marks[n],s=o;if(o)r.push(o);else for(let t in e.marks){let i=e.marks[t];("_"==n||i.spec.group&&i.spec.group.split(" ").indexOf(n)>-1)&&r.push(s=i)}if(!s)throw SyntaxError("Unknown mark type: '"+t[i]+"'")}return r}class L{parse(e,t={}){let r=new $(this,t,!1);return r.addAll(e,a.none,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new $(this,t,!0);return r.addAll(e,a.none,t.from,t.to),c.maxOpen(r.finish())}matchTag(e,t,r){for(let o=r?this.tags.indexOf(r)+1:0;o<this.tags.length;o++){var i,n;let r=this.tags[o];if(i=e,n=r.tag,(i.matches||i.msMatchesSelector||i.webkitMatchesSelector||i.mozMatchesSelector).call(i,n)&&(void 0===r.namespace||e.namespaceURI==r.namespace)&&(!r.context||t.matchesContext(r.context))){if(r.getAttrs){let t=r.getAttrs(e);if(!1===t)continue;r.attrs=t||void 0}return r}}}matchStyle(e,t,r,i){for(let n=i?this.styles.indexOf(i)+1:0;n<this.styles.length;n++){let i=this.styles[n],o=i.style;if(0==o.indexOf(e)&&(!i.context||r.matchesContext(i.context))&&(!(o.length>e.length)||61==o.charCodeAt(e.length)&&o.slice(e.length+1)==t)){if(i.getAttrs){let e=i.getAttrs(t);if(!1===e)continue;i.attrs=e||void 0}return i}}}static schemaRules(e){let t=[];function r(e){let r=null==e.priority?50:e.priority,i=0;for(;i<t.length;i++){let e=t[i];if((null==e.priority?50:e.priority)<r)break}t.splice(i,0,e)}for(let t in e.marks){let i=e.marks[t].spec.parseDOM;i&&i.forEach(e=>{r(e=W(e)),e.mark||e.ignore||e.clearMark||(e.mark=t)})}for(let t in e.nodes){let i=e.nodes[t].spec.parseDOM;i&&i.forEach(e=>{r(e=W(e)),e.node||e.ignore||e.mark||(e.node=t)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new L(e,L.schemaRules(e)))}constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let r=this.matchedStyles=[];t.forEach(e=>{if(null!=e.tag)this.tags.push(e);else if(null!=e.style){let t=/[^=]*/.exec(e.style)[0];0>r.indexOf(t)&&r.push(t),this.styles.push(e)}}),this.normalizeLists=!this.tags.some(t=>{if(!/^(ul|ol)\b/.test(t.tag)||!t.node)return!1;let r=e.nodes[t.node];return r.contentMatch.matchType(r)})}}let U={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},B={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},z={ol:!0,ul:!0};function G(e,t,r){return null!=t?!!t|2*("full"===t):e&&"pre"==e.whitespace?3:-5&r}class q{findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(i.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let t=this.type.contentMatch,r;return(r=t.findWrapping(e.type))?(this.match=t,r):null}}return this.match.findWrapping(e.type)}finish(e){if(!(1&this.options)){let e=this.content[this.content.length-1],t;e&&e.isText&&(t=/[ \t\r\n\u000c]+$/.exec(e.text))&&(e.text.length==t[0].length?this.content.pop():this.content[this.content.length-1]=e.withText(e.text.slice(0,e.text.length-t[0].length)))}let t=i.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(i.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!U.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}constructor(e,t,r,i,n,o){this.type=e,this.attrs=t,this.marks=r,this.solid=i,this.options=o,this.content=[],this.activeMarks=a.none,this.match=n||(4&o?null:e.contentMatch)}}class ${get top(){return this.nodes[this.open]}addDOM(e,t){3==e.nodeType?this.addTextNode(e,t):1==e.nodeType&&this.addElement(e,t)}addTextNode(e,t){let r=e.nodeValue,i=this.top,n=2&i.options?"full":this.localPreserveWS||(1&i.options)>0;if("full"===n||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(n)r="full"!==n?r.replace(/\r?\n|\r/g," "):r.replace(/\r\n?/g,"\n");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let t=i.content[i.content.length-1],n=e.previousSibling;(!t||n&&"BR"==n.nodeName||t.isText&&/[ \t\r\n\u000c]$/.test(t.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),t),this.findInText(e)}else this.findInside(e)}addElement(e,t,r){let i=this.localPreserveWS,n=this.top;("PRE"==e.tagName||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let o=e.nodeName.toLowerCase(),s;z.hasOwnProperty(o)&&this.parser.normalizeLists&&function(e){for(let t=e.firstChild,r=null;t;t=t.nextSibling){let e=1==t.nodeType?t.nodeName.toLowerCase():null;e&&z.hasOwnProperty(e)&&r?(r.appendChild(t),t=r):"li"==e?r=t:e&&(r=null)}}(e);let a=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(s=this.parser.matchTag(e,this,r));t:if(a?a.ignore:B.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,t);else if(!a||a.skip||a.closeParent){a&&a.closeParent?this.open=Math.max(0,this.open-1):a&&a.skip.nodeType&&(e=a.skip);let r,i=this.needsBlock;if(U.hasOwnProperty(o))n.content.length&&n.content[0].isInline&&this.open&&(this.open--,n=this.top),r=!0,n.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break t}let s=a&&a.skip?t:this.readStyles(e,t);s&&this.addAll(e,s),r&&this.sync(n),this.needsBlock=i}else{let r=this.readStyles(e,t);r&&this.addElementByRule(e,a,r,!1===a.consuming?s:void 0)}this.localPreserveWS=i}leafFallback(e,t){"BR"==e.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode("\n"),t)}ignoreFallback(e,t){"BR"!=e.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"),t)}readStyles(e,t){let r=e.style;if(r&&r.length)for(let e=0;e<this.parser.matchedStyles.length;e++){let i=this.parser.matchedStyles[e],n=r.getPropertyValue(i);if(n)for(let e;;){let r=this.parser.matchStyle(i,n,this,e);if(!r)break;if(r.ignore)return null;if(t=r.clearMark?t.filter(e=>!r.clearMark(e)):t.concat(this.parser.schema.marks[r.mark].create(r.attrs)),!1===r.consuming)e=r;else break}}return t}addElementByRule(e,t,r,i){let n,o;if(t.node)if((o=this.parser.schema.nodes[t.node]).isLeaf)this.insertNode(o.create(t.attrs),r)||this.leafFallback(e,r);else{let e=this.enter(o,t.attrs||null,r,t.preserveWhitespace);e&&(n=!0,r=e)}else{let e=this.parser.schema.marks[t.mark];r=r.concat(e.create(t.attrs))}let s=this.top;if(o&&o.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(e=>this.insertNode(e,r));else{let i=e;"string"==typeof t.contentElement?i=e.querySelector(t.contentElement):"function"==typeof t.contentElement?i=t.contentElement(e):t.contentElement&&(i=t.contentElement),this.findAround(e,i,!0),this.addAll(i,r),this.findAround(e,i,!1)}n&&this.sync(s)&&this.open--}addAll(e,t,r,i){let n=r||0;for(let o=r?e.childNodes[r]:e.firstChild,s=null==i?null:e.childNodes[i];o!=s;o=o.nextSibling,++n)this.findAtPoint(e,n),this.addDOM(o,t);this.findAtPoint(e,n)}findPlace(e,t){let r,i;for(let t=this.open;t>=0;t--){let n=this.nodes[t],o=n.findWrapping(e);if(o&&(!r||r.length>o.length)&&(r=o,i=n,!o.length)||n.solid)break}if(!r)return null;this.sync(i);for(let e=0;e<r.length;e++)t=this.enterInner(r[e],null,t,!1);return t}insertNode(e,t){if(e.isInline&&this.needsBlock&&!this.top.type){let e=this.textblockFromContext();e&&(t=this.enterInner(e,null,t))}let r=this.findPlace(e,t);if(r){this.closeExtra();let t=this.top;t.match&&(t.match=t.match.matchType(e.type));let i=a.none;for(let n of r.concat(e.marks))(t.type?t.type.allowsMarkType(n.type):H(n.type,e.type))&&(i=n.addToSet(i));return t.content.push(e.mark(i)),!0}return!1}enter(e,t,r,i){let n=this.findPlace(e.create(t),r);return n&&(n=this.enterInner(e,t,r,!0,i)),n}enterInner(e,t,r,i=!1,n){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let s=G(e,n,o.options);4&o.options&&0==o.content.length&&(s|=4);let l=a.none;return r=r.filter(t=>(o.type?!o.type.allowsMarkType(t.type):!H(t.type,e))||(l=t.addToSet(l),!1)),this.nodes.push(new q(e,t,l,i,null,s)),this.open++,r}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;else this.localPreserveWS&&(this.nodes[t].options|=1);return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let t=r.length-1;t>=0;t--)e+=r[t].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)null==this.find[t].pos&&1==e.nodeType&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)null==this.find[i].pos&&1==e.nodeType&&e.contains(this.find[i].node)&&t.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),n=-(r?r.depth+1:0)+ +!i,o=(e,s)=>{for(;e>=0;e--){let a=t[e];if(""==a){if(e==t.length-1||0==e)continue;for(;s>=n;s--)if(o(e-1,s))return!0;return!1}{let e=s>0||0==s&&i?this.nodes[s].type:r&&s>=n?r.node(s-n).type:null;if(!e||e.name!=a&&!e.isInGroup(a))return!1;s--}}return!0};return o(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let e in this.parser.schema.nodes){let t=this.parser.schema.nodes[e];if(t.isTextblock&&t.defaultAttrs)return t}}constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=t.topNode,n,o=G(null,t.preserveWhitespace,0)|4*!!r;n=i?new q(i.type,i.attrs,a.none,!0,t.topMatch||i.type.contentMatch,o):r?new q(null,null,a.none,!0,null,o):new q(e.schema.topNodeType,null,a.none,!0,null,o),this.nodes=[n],this.find=t.findPositions,this.needsBlock=!1}}function W(e){let t={};for(let r in e)t[r]=e[r];return t}function H(e,t){let r=t.schema.nodes;for(let i in r){let n=r[i];if(!n.allowsMarkType(e))continue;let o=[],s=e=>{o.push(e);for(let r=0;r<e.edgeCount;r++){let{type:i,next:n}=e.edge(r);if(i==t||0>o.indexOf(n)&&s(n))return!0}};if(s(n.contentMatch))return!0}}class J{serializeFragment(e,t={},r){r||(r=Z(t).createDocumentFragment());let i=r,n=[];return e.forEach(e=>{if(n.length||e.marks.length){let r=0,o=0;for(;r<n.length&&o<e.marks.length;){let t=e.marks[o];if(!this.marks[t.type.name]){o++;continue}if(!t.eq(n[r][0])||!1===t.type.spec.spanning)break;r++,o++}for(;r<n.length;)i=n.pop()[1];for(;o<e.marks.length;){let r=e.marks[o++],s=this.serializeMark(r,e.isInline,t);s&&(n.push([r,i]),i.appendChild(s.dom),i=s.contentDOM||s.dom)}}i.appendChild(this.serializeNodeInner(e,t))}),r}serializeNodeInner(e,t){let{dom:r,contentDOM:i}=X(Z(t),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,i)}return r}serializeNode(e,t={}){let r=this.serializeNodeInner(e,t);for(let i=e.marks.length-1;i>=0;i--){let n=this.serializeMark(e.marks[i],e.isInline,t);n&&((n.contentDOM||n.dom).appendChild(r),r=n.dom)}return r}serializeMark(e,t,r={}){let i=this.marks[e.type.name];return i&&X(Z(r),i(e,t),null,e.attrs)}static renderSpec(e,t,r=null,i){return X(e,t,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new J(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=V(e.nodes);return t.text||(t.text=e=>e.text),t}static marksFromSchema(e){return V(e.marks)}constructor(e,t){this.nodes=e,this.marks=t}}function V(e){let t={};for(let r in e){let i=e[r].spec.toDOM;i&&(t[r]=i)}return t}function Z(e){return e.document||window.document}let K=new WeakMap;function X(e,t,r,i){let n,o,s;if("string"==typeof t)return{dom:e.createTextNode(t)};if(null!=t.nodeType)return{dom:t};if(t.dom&&null!=t.dom.nodeType)return t;let a=t[0],l;if("string"!=typeof a)throw RangeError("Invalid array passed to renderSpec");if(i&&(void 0===(o=K.get(i))&&K.set(i,(s=null,!function e(t){if(t&&"object"==typeof t)if(Array.isArray(t))if("string"==typeof t[0])s||(s=[]),s.push(t);else for(let r=0;r<t.length;r++)e(t[r]);else for(let r in t)e(t[r])}(i),o=s)),l=o)&&l.indexOf(t)>-1)throw RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let c=a.indexOf(" ");c>0&&(r=a.slice(0,c),a=a.slice(c+1));let u=r?e.createElementNS(r,a):e.createElement(a),d=t[1],p=1;if(d&&"object"==typeof d&&null==d.nodeType&&!Array.isArray(d)){for(let e in p=2,d)if(null!=d[e]){let t=e.indexOf(" ");t>0?u.setAttributeNS(e.slice(0,t),e.slice(t+1),d[e]):u.setAttribute(e,d[e])}}for(let o=p;o<t.length;o++){let s=t[o];if(0===s){if(o<t.length-1||o>p)throw RangeError("Content hole must be the only child of its parent node");return{dom:u,contentDOM:u}}{let{dom:t,contentDOM:o}=X(e,s,r,i);if(u.appendChild(t),o){if(n)throw RangeError("Multiple content holes");n=o}}}return{dom:u,contentDOM:n}}e.exports.Fragment=i,e.exports.Mark=a,e.exports.ReplaceError=l,e.exports.Slice=c,e.exports.ResolvedPos=g,e.exports.NodeRange=b,e.exports.Node=S,e.exports.MarkType=P,e.exports.Schema=class{node(e,t=null,r,i){if("string"==typeof e)e=this.nodeType(e);else if(e instanceof N){if(e.schema!=this)throw RangeError("Node type from different schema used ("+e.name+")")}else throw RangeError("Invalid node type: "+e);return e.createChecked(t,r,i)}text(e,t){let r=this.nodes.text;return new w(r,r.defaultAttrs,e,a.setFrom(t))}mark(e,t){return"string"==typeof e&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return S.fromJSON(this,e)}markFromJSON(e){return a.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw RangeError("Unknown node type: "+e);return t}constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let r in e)t[r]=e[r];t.nodes=r.from(e.nodes),t.marks=r.from(e.marks||{}),this.nodes=N.compile(this.spec.nodes,this),this.marks=P.compile(this.spec.marks,this);let i=Object.create(null);for(let e in this.nodes){if(e in this.marks)throw RangeError(e+" can not be both a node and a mark");let t=this.nodes[e],r=t.spec.content||"",n=t.spec.marks;if(t.contentMatch=i[r]||(i[r]=_.parse(r,this.nodes)),t.inlineContent=t.contentMatch.inlineContent,t.spec.linebreakReplacement){if(this.linebreakReplacement)throw RangeError("Multiple linebreak nodes defined");if(!t.isInline||!t.isLeaf)throw RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=t}t.markSet="_"==n?null:n?D(this,n.split(" ")):""!=n&&t.inlineContent?null:[]}for(let e in this.marks){let t=this.marks[e],r=t.spec.excludes;t.excluded=null==r?[t]:""==r?[]:D(this,r.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}},e.exports.DOMParser=L,e.exports.DOMSerializer=J}),s("aXG5V",function(e,t){class r{get deleted(){return(8&this.delInfo)>0}get deletedBefore(){return(5&this.delInfo)>0}get deletedAfter(){return(6&this.delInfo)>0}get deletedAcross(){return(4&this.delInfo)>0}constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}}class i{recover(e){let t=0,r=65535&e;if(!this.inverted)for(let e=0;e<r;e++)t+=this.ranges[3*e+2]-this.ranges[3*e+1];return this.ranges[3*r]+t+(e-(65535&e))/65536}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,i){let n=0,o=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?n:0);if(l>e)break;let c=this.ranges[a+o],u=this.ranges[a+s],d=l+c;if(e<=d){let o=c?e==l?-1:e==d?1:t:t,s=l+n+(o<0?0:u);if(i)return s;let p=e==(t<0?l:d)?null:a/3+(e-l)*65536,h=e==l?2:e==d?1:4;return(t<0?e!=l:e!=d)&&(h|=8),new r(s,h,p)}n+=u-c}return i?e+n:new r(e+n,0,null)}touches(e,t){let r=0,i=65535&t,n=this.inverted?2:1,o=this.inverted?1:2;for(let t=0;t<this.ranges.length;t+=3){let s=this.ranges[t]-(this.inverted?r:0);if(s>e)break;let a=this.ranges[t+n];if(e<=s+a&&t==3*i)return!0;r+=this.ranges[t+o]-a}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,n=0;i<this.ranges.length;i+=3){let o=this.ranges[i],s=o-(this.inverted?n:0),a=o+(this.inverted?0:n),l=this.ranges[i+t],c=this.ranges[i+r];e(s,s+l,a,a+c),n+=c-l}}invert(){return new i(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return 0==e?i.empty:new i(e<0?[0,-e,0]:[0,0,e])}constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&i.empty)return i.empty}}i.empty=new i([]);class n{slice(e=0,t=this.maps.length){return new n(this.maps,this.mirror,e,t)}copy(){return new n(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,t){this.to=this.maps.push(e),null!=t&&this.setMirror(this.maps.length-1,t)}appendMapping(e){for(let t=0,r=this.maps.length;t<e.maps.length;t++){let i=e.getMirror(t);this.appendMap(e.maps[t],null!=i&&i<t?r+i:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,r=this.maps.length+e.maps.length;t>=0;t--){let i=e.getMirror(t);this.appendMap(e.maps[t].invert(),null!=i&&i>t?r-i-1:void 0)}}invert(){let e=new n;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let r=this.from;r<this.to;r++)e=this.maps[r].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,i){let n=0;for(let r=this.from;r<this.to;r++){let i=this.maps[r].mapResult(e,t);if(null!=i.recover){let t=this.getMirror(r);if(null!=t&&t>r&&t<this.to){r=t,e=this.maps[t].recover(i.recover);continue}}n|=i.delInfo,e=i.pos}return i?e:new r(e,n,null)}constructor(e=[],t,r=0,i=e.length){this.maps=e,this.mirror=t,this.from=r,this.to=i}}let s=Object.create(null);class a{getMap(){return i.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw RangeError("Invalid input for Step.fromJSON");let r=s[t.stepType];if(!r)throw RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in s)throw RangeError("Duplicate use of step JSON ID "+e);return s[e]=t,t.prototype.jsonID=e,t}}class l{static ok(e){return new l(e,null)}static fail(e){return new l(null,e)}static fromReplace(e,t,r,i){try{return l.ok(e.replace(t,r,i))}catch(e){if(e instanceof o("5SAOw").ReplaceError)return l.fail(e.message);throw e}}constructor(e,t){this.doc=e,this.failed=t}}function c(e,t,r){let i=[];for(let n=0;n<e.childCount;n++){let o=e.child(n);o.content.size&&(o=o.copy(c(o.content,t,o))),o.isInline&&(o=t(o,r,n)),i.push(o)}return o("5SAOw").Fragment.fromArray(i)}class u extends a{apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),n=new(0,o("5SAOw").Slice)(c(t.content,(e,t)=>e.isAtom&&t.type.allowsMarkType(this.mark.type)?e.mark(this.mark.addToSet(e.marks)):e,i),t.openStart,t.openEnd);return l.fromReplace(e,this.from,this.to,n)}invert(){return new d(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new u(t.pos,r.pos,this.mark)}merge(e){return e instanceof u&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new u(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw RangeError("Invalid input for AddMarkStep.fromJSON");return new u(t.from,t.to,e.markFromJSON(t.mark))}constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}}a.jsonID("addMark",u);class d extends a{apply(e){let t=e.slice(this.from,this.to),r=new(0,o("5SAOw").Slice)(c(t.content,e=>e.mark(this.mark.removeFromSet(e.marks)),e),t.openStart,t.openEnd);return l.fromReplace(e,this.from,this.to,r)}invert(){return new u(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new d(t.pos,r.pos,this.mark)}merge(e){return e instanceof d&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new d(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw RangeError("Invalid input for RemoveMarkStep.fromJSON");return new d(t.from,t.to,e.markFromJSON(t.mark))}constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}}a.jsonID("removeMark",d);class p extends a{apply(e){let t=e.nodeAt(this.pos);if(!t)return l.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return l.fromReplace(e,this.pos,this.pos+1,new(0,o("5SAOw").Slice)(o("5SAOw").Fragment.from(r),0,+!t.isLeaf))}invert(e){let t=e.nodeAt(this.pos);if(t){let e=this.mark.addToSet(t.marks);if(e.length==t.marks.length){for(let r=0;r<t.marks.length;r++)if(!t.marks[r].isInSet(e))return new p(this.pos,t.marks[r]);return new p(this.pos,this.mark)}}return new h(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new p(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if("number"!=typeof t.pos)throw RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new p(t.pos,e.markFromJSON(t.mark))}constructor(e,t){super(),this.pos=e,this.mark=t}}a.jsonID("addNodeMark",p);class h extends a{apply(e){let t=e.nodeAt(this.pos);if(!t)return l.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return l.fromReplace(e,this.pos,this.pos+1,new(0,o("5SAOw").Slice)(o("5SAOw").Fragment.from(r),0,+!t.isLeaf))}invert(e){let t=e.nodeAt(this.pos);return t&&this.mark.isInSet(t.marks)?new p(this.pos,this.mark):this}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new h(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if("number"!=typeof t.pos)throw RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new h(t.pos,e.markFromJSON(t.mark))}constructor(e,t){super(),this.pos=e,this.mark=t}}a.jsonID("removeNodeMark",h);class f extends a{apply(e){return this.structure&&g(e,this.from,this.to)?l.fail("Structure replace would overwrite content"):l.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new i([this.from,this.to-this.from,this.slice.size])}invert(e){return new f(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new f(t.pos,Math.max(t.pos,r.pos),this.slice)}merge(e){if(!(e instanceof f)||e.structure||this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart)if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;else{let t=this.slice.size+e.slice.size==0?o("5SAOw").Slice.empty:new(0,o("5SAOw").Slice)(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new f(e.from,this.to,t,this.structure)}{let t=this.slice.size+e.slice.size==0?o("5SAOw").Slice.empty:new(0,o("5SAOw").Slice)(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new f(this.from,this.to+(e.to-e.from),t,this.structure)}}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw RangeError("Invalid input for ReplaceStep.fromJSON");return new f(t.from,t.to,o("5SAOw").Slice.fromJSON(e,t.slice),!!t.structure)}constructor(e,t,r,i=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=i}}a.jsonID("replace",f);class m extends a{apply(e){if(this.structure&&(g(e,this.from,this.gapFrom)||g(e,this.gapTo,this.to)))return l.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return l.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?l.fromReplace(e,this.from,this.to,r):l.fail("Content does not fit in gap")}getMap(){return new i([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new m(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),n=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||i<t.pos||n>r.pos?null:new m(t.pos,r.pos,i,n,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to||"number"!=typeof t.gapFrom||"number"!=typeof t.gapTo||"number"!=typeof t.insert)throw RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new m(t.from,t.to,t.gapFrom,t.gapTo,o("5SAOw").Slice.fromJSON(e,t.slice),t.insert,!!t.structure)}constructor(e,t,r,i,n,o,s=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=i,this.slice=n,this.insert=o,this.structure=s}}function g(e,t,r){let i=e.resolve(t),n=r-t,o=i.depth;for(;n>0&&o>0&&i.indexAfter(o)==i.node(o).childCount;)o--,n--;if(n>0){let e=i.node(o).maybeChild(i.indexAfter(o));for(;n>0;){if(!e||e.isLeaf)return!0;e=e.firstChild,n--}}return!1}function y(e,t,r,i=r.contentMatch,n=!0){let s=e.doc.nodeAt(t),a=[],l=t+1;for(let t=0;t<s.childCount;t++){let c=s.child(t),u=l+c.nodeSize,p=i.matchType(c.type);if(p){i=p;for(let t=0;t<c.marks.length;t++)r.allowsMarkType(c.marks[t].type)||e.step(new d(l,u,c.marks[t]));if(n&&c.isText&&"pre"!=r.whitespace){let e,t=/\r?\n|\r/g,i;for(;e=t.exec(c.text);)i||(i=new(0,o("5SAOw").Slice)(o("5SAOw").Fragment.from(r.schema.text(" ",r.allowedMarks(c.marks))),0,0)),a.push(new f(l+e.index,l+e.index+e[0].length,i))}}else a.push(new f(l,u,o("5SAOw").Slice.empty));l=u}if(!i.validEnd){let t=i.fillBefore(o("5SAOw").Fragment.empty,!0);e.replace(l,l,new(0,o("5SAOw").Slice)(t,0,0))}for(let t=a.length-1;t>=0;t--)e.step(a[t])}function v(e){return{type:e,attrs:null}}function x(e,t,r,i){t.forEach((n,o)=>{if(n.isText){let s,a=/\r?\n|\r/g;for(;s=a.exec(n.text);){let n=e.mapping.slice(i).map(r+1+o+s.index);e.replaceWith(n,n+1,t.type.schema.linebreakReplacement.create())}}})}function b(e,t,r,i){t.forEach((n,o)=>{if(n.type==n.type.schema.linebreakReplacement){let n=e.mapping.slice(i).map(r+1+o);e.replaceWith(n,n+1,t.type.schema.text("\n"))}})}function E(e,t){return!!(e&&t&&!e.isLeaf&&function(e,t){t.content.size||e.type.compatibleContent(t.type);let r=e.contentMatchAt(e.childCount),{linebreakReplacement:i}=e.type.schema;for(let n=0;n<t.childCount;n++){let o=t.child(n),s=o.type==i?e.type.schema.nodes.text:o.type;if(!(r=r.matchType(s))||!e.type.allowsMarks(o.marks))return!1}return r.validEnd}(e,t))}function S(e,t,r){let i=e.resolve(t);if(i.parent.canReplaceWith(i.index(),i.index(),r))return t;if(0==i.parentOffset)for(let e=i.depth-1;e>=0;e--){let t=i.index(e);if(i.node(e).canReplaceWith(t,t,r))return i.before(e+1);if(t>0)return null}if(i.parentOffset==i.parent.content.size)for(let e=i.depth-1;e>=0;e--){let t=i.indexAfter(e);if(i.node(e).canReplaceWith(t,t,r))return i.after(e+1);if(t<i.node(e).childCount)break}return null}function w(e,t,r=t,i=o("5SAOw").Slice.empty){if(t==r&&!i.size)return null;let n=e.resolve(t),s=e.resolve(r);return k(n,s,i)?new f(t,r,i):new _(n,s,i).fit()}function k(e,t,r){return!r.openStart&&!r.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),r.content)}a.jsonID("replaceAround",m);class _{get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let e=this.findFittable();e?this.placeNodes(e):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let n=this.placed,s=r.depth,a=i.depth;for(;s&&a&&1==n.childCount;)n=n.firstChild.content,s--,a--;let l=new(0,o("5SAOw").Slice)(n,s,a);return e>-1?new m(r.pos,e,this.$to.pos,this.$to.end(),l,t):l.size||r.pos!=this.$to.pos?new f(r.pos,i.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let n=t.firstChild;if(t.childCount>1&&(i=0),n.type.spec.isolating&&i<=r){e=r;break}t=n.content}for(let t=1;t<=2;t++)for(let r=1==t?e:this.unplaced.openStart;r>=0;r--){let e,i=null,n=(r?(i=I(this.unplaced.content,r-1).firstChild).content:this.unplaced.content).firstChild;for(let e=this.depth;e>=0;e--){let{type:s,match:a}=this.frontier[e],l,c=null;if(1==t&&(n?a.matchType(n.type)||(c=a.fillBefore(o("5SAOw").Fragment.from(n),!1)):i&&s.compatibleContent(i.type)))return{sliceDepth:r,frontierDepth:e,parent:i,inject:c};if(2==t&&n&&(l=a.findWrapping(n.type)))return{sliceDepth:r,frontierDepth:e,parent:i,wrap:l};if(i&&a.matchType(i.type))break}}}openMore(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=I(e,t);return!!i.childCount&&!i.firstChild.isLeaf&&(this.unplaced=new(0,o("5SAOw").Slice)(e,t+1,Math.max(r,i.size+t>=e.size-r?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=I(e,t);if(i.childCount<=1&&t>0){let n=e.size-t<=t+i.size;this.unplaced=new(0,o("5SAOw").Slice)(j(e,t-1,1),t-1,n?t-1:r)}else this.unplaced=new(0,o("5SAOw").Slice)(j(e,t,1),t,r)}placeNodes({sliceDepth:e,frontierDepth:t,parent:r,inject:i,wrap:n}){for(;this.depth>t;)this.closeFrontierNode();if(n)for(let e=0;e<n.length;e++)this.openFrontierNode(n[e]);let s=this.unplaced,a=r?r.content:s.content,l=s.openStart-e,c=0,u=[],{match:d,type:p}=this.frontier[t];if(i){for(let e=0;e<i.childCount;e++)u.push(i.child(e));d=d.matchFragment(i)}let h=a.size+e-(s.content.size-s.openEnd);for(;c<a.childCount;){let e=a.child(c),t=d.matchType(e.type);if(!t)break;(++c>1||0==l||e.content.size)&&(d=t,u.push(function e(t,r,i){if(r<=0)return t;let n=t.content;return r>1&&(n=n.replaceChild(0,e(n.firstChild,r-1,1==n.childCount?i-1:0))),r>0&&(n=t.type.contentMatch.fillBefore(n).append(n),i<=0&&(n=n.append(t.type.contentMatch.matchFragment(n).fillBefore(o("5SAOw").Fragment.empty,!0)))),t.copy(n)}(e.mark(p.allowedMarks(e.marks)),1==c?l:0,c==a.childCount?h:-1)))}let f=c==a.childCount;f||(h=-1),this.placed=M(this.placed,t,o("5SAOw").Fragment.from(u)),this.frontier[t].match=d,f&&h<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let e=0,t=a;e<h;e++){let e=t.lastChild;this.frontier.push({type:e.type,match:e.contentMatchAt(e.childCount)}),t=e.content}this.unplaced=f?0==e?o("5SAOw").Slice.empty:new(0,o("5SAOw").Slice)(j(s.content,e-1,1),e-1,h<0?s.openEnd:e-1):new(0,o("5SAOw").Slice)(j(s.content,e,c),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return -1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!A(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return -1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){r:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:r,type:i}=this.frontier[t],n=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),o=A(e,t,i,r,n);if(o){for(let r=t-1;r>=0;r--){let{match:t,type:i}=this.frontier[r],n=A(e,r,i,t,!0);if(!n||n.childCount)continue r}return{depth:t,fit:o,move:n?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=M(this.placed,t.depth,t.fit)),e=t.move;for(let r=t.depth+1;r<=e.depth;r++){let t=e.node(r),i=t.type.contentMatch.fillBefore(t.content,!0,e.index(r));this.openFrontierNode(t.type,t.attrs,i)}return e}openFrontierNode(e,t=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=M(this.placed,this.depth,o("5SAOw").Fragment.from(e.create(t,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let e=this.frontier.pop().match.fillBefore(o("5SAOw").Fragment.empty,!0);e.childCount&&(this.placed=M(this.placed,this.frontier.length,e))}constructor(e,t,r){this.$from=e,this.$to=t,this.unplaced=r,this.frontier=[],this.placed=o("5SAOw").Fragment.empty;for(let t=0;t<=e.depth;t++){let r=e.node(t);this.frontier.push({type:r.type,match:r.contentMatchAt(e.indexAfter(t))})}for(let t=e.depth;t>0;t--)this.placed=o("5SAOw").Fragment.from(e.node(t).copy(this.placed))}}function j(e,t,r){return 0==t?e.cutByIndex(r,e.childCount):e.replaceChild(0,e.firstChild.copy(j(e.firstChild.content,t-1,r)))}function M(e,t,r){return 0==t?e.append(r):e.replaceChild(e.childCount-1,e.lastChild.copy(M(e.lastChild.content,t-1,r)))}function I(e,t){for(let r=0;r<t;r++)e=e.firstChild.content;return e}function A(e,t,r,i,n){let o=e.node(t),s=n?e.indexAfter(t):e.index(t);if(s==o.childCount&&!r.compatibleContent(o.type))return null;let a=i.fillBefore(o.content,!0,s);return a&&!function(e,t,r){for(let i=r;i<t.childCount;i++)if(!e.allowsMarks(t.child(i).marks))return!0;return!1}(r,o.content,s)?a:null}function O(e,t){let r=[],i=Math.min(e.depth,t.depth);for(let n=i;n>=0;n--){let i=e.start(n);if(i<e.pos-(e.depth-n)||t.end(n)>t.pos+(t.depth-n)||e.node(n).type.spec.isolating||t.node(n).type.spec.isolating)break;(i==t.start(n)||n==e.depth&&n==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&n&&t.start(n-1)==i-1)&&r.push(n)}return r}class T extends a{apply(e){let t=e.nodeAt(this.pos);if(!t)return l.fail("No node at attribute step's position");let r=Object.create(null);for(let e in t.attrs)r[e]=t.attrs[e];r[this.attr]=this.value;let i=t.type.create(r,null,t.marks);return l.fromReplace(e,this.pos,this.pos+1,new(0,o("5SAOw").Slice)(o("5SAOw").Fragment.from(i),0,+!t.isLeaf))}getMap(){return i.empty}invert(e){return new T(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new T(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if("number"!=typeof t.pos||"string"!=typeof t.attr)throw RangeError("Invalid input for AttrStep.fromJSON");return new T(t.pos,t.attr,t.value)}constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r}}a.jsonID("attr",T);class C extends a{apply(e){let t=Object.create(null);for(let r in e.attrs)t[r]=e.attrs[r];t[this.attr]=this.value;let r=e.type.create(t,e.content,e.marks);return l.ok(r)}getMap(){return i.empty}invert(e){return new C(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if("string"!=typeof t.attr)throw RangeError("Invalid input for DocAttrStep.fromJSON");return new C(t.attr,t.value)}constructor(e,t){super(),this.attr=e,this.value=t}}a.jsonID("docAttr",C);let R=class extends Error{};(R=function e(t){let r=Error.call(this,t);return r.__proto__=e.prototype,r}).prototype=Object.create(Error.prototype),R.prototype.constructor=R,R.prototype.name="TransformError",e.exports.StepMap=i,e.exports.Mapping=n,e.exports.Step=a,e.exports.StepResult=l,e.exports.AddMarkStep=u,e.exports.RemoveMarkStep=d,e.exports.AddNodeMarkStep=p,e.exports.RemoveNodeMarkStep=h,e.exports.ReplaceStep=f,e.exports.ReplaceAroundStep=m,e.exports.liftTarget=function(e){let t=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let r=e.depth;;--r){let i=e.$from.node(r),n=e.$from.index(r),o=e.$to.indexAfter(r);if(r<e.depth&&i.canReplace(n,o,t))return r;if(0==r||i.type.spec.isolating||!((0==n||i.canReplace(n,i.childCount))&&(o==i.childCount||i.canReplace(0,o))))break}return null},e.exports.findWrapping=function(e,t,r=null,i=e){let n=function(e,t){let{parent:r,startIndex:i,endIndex:n}=e,o=r.contentMatchAt(i).findWrapping(t);if(!o)return null;let s=o.length?o[0]:t;return r.canReplaceWith(i,n,s)?o:null}(e,t),o=n&&function(e,t){let{parent:r,startIndex:i,endIndex:n}=e,o=r.child(i),s=t.contentMatch.findWrapping(o.type);if(!s)return null;let a=(s.length?s[s.length-1]:t).contentMatch;for(let e=i;a&&e<n;e++)a=a.matchType(r.child(e).type);return a&&a.validEnd?s:null}(i,t);return o?n.map(v).concat({type:t,attrs:r}).concat(o.map(v)):null},e.exports.canSplit=function(e,t,r=1,i){let n=e.resolve(t),o=n.depth-r,s=i&&i[i.length-1]||n.parent;if(o<0||n.parent.type.spec.isolating||!n.parent.canReplace(n.index(),n.parent.childCount)||!s.type.validContent(n.parent.content.cutByIndex(n.index(),n.parent.childCount)))return!1;for(let e=n.depth-1,t=r-2;e>o;e--,t--){let r=n.node(e),o=n.index(e);if(r.type.spec.isolating)return!1;let s=r.content.cutByIndex(o,r.childCount),a=i&&i[t+1];a&&(s=s.replaceChild(0,a.type.create(a.attrs)));let l=i&&i[t]||r;if(!r.canReplace(o+1,r.childCount)||!l.type.validContent(s))return!1}let a=n.indexAfter(o),l=i&&i[0];return n.node(o).canReplaceWith(a,a,l?l.type:n.node(o+1).type)},e.exports.canJoin=function(e,t){let r=e.resolve(t),i=r.index();return E(r.nodeBefore,r.nodeAfter)&&r.parent.canReplace(i,i+1)},e.exports.joinPoint=function(e,t,r=-1){let i=e.resolve(t);for(let e=i.depth;;e--){let n,o,s=i.index(e);if(e==i.depth?(n=i.nodeBefore,o=i.nodeAfter):r>0?(n=i.node(e+1),s++,o=i.node(e).maybeChild(s)):(n=i.node(e).maybeChild(s-1),o=i.node(e+1)),n&&!n.isTextblock&&E(n,o)&&i.node(e).canReplace(s,s+1))return t;if(0==e)break;t=r<0?i.before(e):i.after(e)}},e.exports.insertPoint=S,e.exports.dropPoint=function(e,t,r){let i=e.resolve(t);if(!r.content.size)return t;let n=r.content;for(let e=0;e<r.openStart;e++)n=n.firstChild.content;for(let e=1;e<=(0==r.openStart&&r.size?2:1);e++)for(let t=i.depth;t>=0;t--){let r=t==i.depth?0:i.pos<=(i.start(t+1)+i.end(t+1))/2?-1:1,o=i.index(t)+ +(r>0),s=i.node(t),a=!1;if(1==e)a=s.canReplace(o,o,n);else{let e=s.contentMatchAt(o).findWrapping(n.firstChild.type);a=e&&s.canReplaceWith(o,o,e[0])}if(a)return 0==r?i.pos:r<0?i.before(t+1):i.after(t+1)}return null},e.exports.replaceStep=w,e.exports.AttrStep=T,e.exports.DocAttrStep=C,e.exports.Transform=class{get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new R(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,r=o("5SAOw").Slice.empty){let i=w(this.doc,e,t,r);return i&&this.step(i),this}replaceWith(e,t,r){return this.replace(e,t,new(0,o("5SAOw").Slice)(o("5SAOw").Fragment.from(r),0,0))}delete(e,t){return this.replace(e,t,o("5SAOw").Slice.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,r){return!function(e,t,r,i){if(!i.size)return e.deleteRange(t,r);let n=e.doc.resolve(t),s=e.doc.resolve(r);if(k(n,s,i))return e.step(new f(t,r,i));let a=O(n,e.doc.resolve(r));0==a[a.length-1]&&a.pop();let l=-(n.depth+1);a.unshift(l);for(let e=n.depth,t=n.pos-1;e>0;e--,t--){let r=n.node(e).type.spec;if(r.defining||r.definingAsContext||r.isolating)break;a.indexOf(e)>-1?l=e:n.before(e)==t&&a.splice(1,0,-e)}let c=a.indexOf(l),u=[],d=i.openStart;for(let e=i.content,t=0;;t++){let r=e.firstChild;if(u.push(r),t==i.openStart)break;e=r.content}for(let e=d-1;e>=0;e--){var p;let t=u[e],r=(p=t.type).spec.defining||p.spec.definingForContent;if(r&&!t.sameMarkup(n.node(Math.abs(l)-1)))d=e;else if(r||!t.type.isTextblock)break}for(let t=i.openStart;t>=0;t--){let l=(t+d+1)%(i.openStart+1),p=u[l];if(p)for(let t=0;t<a.length;t++){let u=a[(t+c)%a.length],d=!0;u<0&&(d=!1,u=-u);let h=n.node(u-1),f=n.index(u-1);if(h.canReplaceWith(f,f,p.type,p.marks))return e.replace(n.before(u),d?s.after(u):r,new(0,o("5SAOw").Slice)(function e(t,r,i,n,s){if(r<i){let o=t.firstChild;t=t.replaceChild(0,o.copy(e(o.content,r+1,i,n,o)))}if(r>n){let e=s.contentMatchAt(0),r=e.fillBefore(t).append(t);t=r.append(e.matchFragment(r).fillBefore(o("5SAOw").Fragment.empty,!0))}return t}(i.content,0,i.openStart,l),l,i.openEnd))}}let h=e.steps.length;for(let o=a.length-1;o>=0&&(e.replace(t,r,i),!(e.steps.length>h));o--){let e=a[o];e<0||(t=n.before(e),r=s.after(e))}}(this,e,t,r),this}replaceRangeWith(e,t,r){var i=e,n=t;if(!r.isInline&&i==n&&this.doc.resolve(i).parent.content.size){let e=S(this.doc,i,r.type);null!=e&&(i=n=e)}return this.replaceRange(i,n,new(0,o("5SAOw").Slice)(o("5SAOw").Fragment.from(r),0,0)),this}deleteRange(e,t){return!function(e,t,r){let i=e.doc.resolve(t),n=e.doc.resolve(r),o=O(i,n);for(let t=0;t<o.length;t++){let r=o[t],s=t==o.length-1;if(s&&0==r||i.node(r).type.contentMatch.validEnd)return e.delete(i.start(r),n.end(r));if(r>0&&(s||i.node(r-1).canReplace(i.index(r-1),n.indexAfter(r-1))))return e.delete(i.before(r),n.after(r))}for(let o=1;o<=i.depth&&o<=n.depth;o++)if(t-i.start(o)==i.depth-o&&r>i.end(o)&&n.end(o)-r!=n.depth-o&&i.start(o-1)==n.start(o-1)&&i.node(o-1).canReplace(i.index(o-1),n.index(o-1)))return e.delete(i.before(o),r);e.delete(t,r)}(this,e,t),this}lift(e,t){return!function(e,t,r){let{$from:i,$to:n,depth:s}=t,a=i.before(s+1),l=n.after(s+1),c=a,u=l,d=o("5SAOw").Fragment.empty,p=0;for(let e=s,t=!1;e>r;e--)t||i.index(e)>0?(t=!0,d=o("5SAOw").Fragment.from(i.node(e).copy(d)),p++):c--;let h=o("5SAOw").Fragment.empty,f=0;for(let e=s,t=!1;e>r;e--)t||n.after(e+1)<n.end(e)?(t=!0,h=o("5SAOw").Fragment.from(n.node(e).copy(h)),f++):u++;e.step(new m(c,u,a,l,new(0,o("5SAOw").Slice)(d.append(h),p,f),d.size-p,!0))}(this,e,t),this}join(e,t=1){return!function(e,t,r){let i=null,{linebreakReplacement:n}=e.doc.type.schema,s=e.doc.resolve(t-r),a=s.node().type;if(n&&a.inlineContent){let e="pre"==a.whitespace,t=!!a.contentMatch.matchType(n);e&&!t?i=!1:!e&&t&&(i=!0)}let l=e.steps.length;if(!1===i){let i=e.doc.resolve(t+r);b(e,i.node(),i.before(),l)}a.inlineContent&&y(e,t+r-1,a,s.node().contentMatchAt(s.index()),null==i);let c=e.mapping.slice(l),u=c.map(t-r);if(e.step(new f(u,c.map(t+r,-1),o("5SAOw").Slice.empty,!0)),!0===i){let t=e.doc.resolve(u);x(e,t.node(),t.before(),e.steps.length)}}(this,e,t),this}wrap(e,t){return!function(e,t,r){let i=o("5SAOw").Fragment.empty;for(let e=r.length-1;e>=0;e--){if(i.size){let t=r[e].type.contentMatch.matchFragment(i);if(!t||!t.validEnd)throw RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}i=o("5SAOw").Fragment.from(r[e].type.create(r[e].attrs,i))}let n=t.start,s=t.end;e.step(new m(n,s,n,s,new(0,o("5SAOw").Slice)(i,0,0),r.length,!0))}(this,e,t),this}setBlockType(e,t=e,r,i=null){var n=this;if(!r.isTextblock)throw RangeError("Type given to setBlockType should be a textblock");let s=n.steps.length;return n.doc.nodesBetween(e,t,(e,t)=>{var a,l,c;let u,d,p="function"==typeof i?i(e):i;if(e.isTextblock&&!e.hasMarkup(r,p)&&(a=n.doc,l=n.mapping.slice(s).map(t),c=r,d=(u=a.resolve(l)).index(),u.parent.canReplaceWith(d,d+1,c))){let i=null;if(r.schema.linebreakReplacement){let e="pre"==r.whitespace,t=!!r.contentMatch.matchType(r.schema.linebreakReplacement);e&&!t?i=!1:!e&&t&&(i=!0)}!1===i&&b(n,e,t,s),y(n,n.mapping.slice(s).map(t,1),r,void 0,null===i);let a=n.mapping.slice(s),l=a.map(t,1),c=a.map(t+e.nodeSize,1);return n.step(new m(l,c,l+1,c-1,new(0,o("5SAOw").Slice)(o("5SAOw").Fragment.from(r.create(p,null,e.marks)),0,0),1,!0)),!0===i&&x(n,e,t,s),!1}}),this}setNodeMarkup(e,t,r=null,i){return!function(e,t,r,i,n){let s=e.doc.nodeAt(t);if(!s)throw RangeError("No node at given position");r||(r=s.type);let a=r.create(i,null,n||s.marks);if(s.isLeaf)return e.replaceWith(t,t+s.nodeSize,a);if(!r.validContent(s.content))throw RangeError("Invalid content for node type "+r.name);e.step(new m(t,t+s.nodeSize,t+1,t+s.nodeSize-1,new(0,o("5SAOw").Slice)(o("5SAOw").Fragment.from(a),0,0),1,!0))}(this,e,t,r,i),this}setNodeAttribute(e,t,r){return this.step(new T(e,t,r)),this}setDocAttribute(e,t){return this.step(new C(e,t)),this}addNodeMark(e,t){return this.step(new p(e,t)),this}removeNodeMark(e,t){if(!(t instanceof o("5SAOw").Mark)){let r=this.doc.nodeAt(e);if(!r)throw RangeError("No node at position "+e);if(!(t=t.isInSet(r.marks)))return this}return this.step(new h(e,t)),this}split(e,t=1,r){return!function(e,t,r=1,i){let n=e.doc.resolve(t),s=o("5SAOw").Fragment.empty,a=o("5SAOw").Fragment.empty;for(let e=n.depth,t=n.depth-r,l=r-1;e>t;e--,l--){s=o("5SAOw").Fragment.from(n.node(e).copy(s));let t=i&&i[l];a=o("5SAOw").Fragment.from(t?t.type.create(t.attrs,a):n.node(e).copy(a))}e.step(new f(t,t,new(0,o("5SAOw").Slice)(s.append(a),r,r),!0))}(this,e,t,r),this}addMark(e,t,r){var i;let n,o,s,a;return i=this,s=[],a=[],i.doc.nodesBetween(e,t,(i,l,c)=>{if(!i.isInline)return;let p=i.marks;if(!r.isInSet(p)&&c.type.allowsMarkType(r.type)){let c=Math.max(l,e),h=Math.min(l+i.nodeSize,t),f=r.addToSet(p);for(let e=0;e<p.length;e++)p[e].isInSet(f)||(n&&n.to==c&&n.mark.eq(p[e])?n.to=h:s.push(n=new d(c,h,p[e])));o&&o.to==c?o.to=h:a.push(o=new u(c,h,r))}}),s.forEach(e=>i.step(e)),a.forEach(e=>i.step(e)),this}removeMark(e,t,r){var i;let n,s;return i=this,n=[],s=0,i.doc.nodesBetween(e,t,(i,a)=>{if(!i.isInline)return;s++;let l=null;if(r instanceof o("5SAOw").MarkType){let e=i.marks,t;for(;t=r.isInSet(e);)(l||(l=[])).push(t),e=t.removeFromSet(e)}else r?r.isInSet(i.marks)&&(l=[r]):l=i.marks;if(l&&l.length){let r=Math.min(a+i.nodeSize,t);for(let t=0;t<l.length;t++){let i=l[t],o;for(let e=0;e<n.length;e++){let t=n[e];t.step==s-1&&i.eq(n[e].style)&&(o=t)}o?(o.to=r,o.step=s):n.push({style:i,from:Math.max(a,e),to:r,step:s})}}}),n.forEach(e=>i.step(new d(e.from,e.to,e.style))),this}clearIncompatible(e,t,r){return y(this,e,t,r),this}constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new n}}}),s("aeAfU",function(e,t){var r=o("7Rqpr"),i=o("8ihu7");function n({experimentName:e,experimentParam:t,defaultValue:n,fireExperimentExposure:s}){let a=r.editorExperimentsConfig[e];if(void 0===a)throw Error(`Editor experiment configuration is not defined ${e}. Likely the experiment does not exist or editor package versions are misaligned`);if(void 0!==i._overrides[e])return i._overrides[e];let l=i._paramOverrides[e]?.[t];if(void 0!==l)return l;if(!o("c6GJD").default.initializeCompleted()||!i._product||!a?.productKeys?.[i._product])return n;let c=o("c6GJD").default.getExperimentValue(e,t,n,{fireExperimentExposure:s});return o("c6GJD").default.getExperimentValue("cc_editor_experiments_ufo_gate_reporting_expval","isEnabled",!1)&&(0,o("g68Gk").addFeatureFlagAccessed)(`${e}:${t}`,c),c}e.exports.expVal=function(e,t,r){return n({experimentName:e,experimentParam:t,defaultValue:r,fireExperimentExposure:!0})},e.exports.expValNoExposure=function(e,t,r){return n({experimentName:e,experimentParam:t,defaultValue:r,fireExperimentExposure:!1})}}),s("4wH3g",function(e,t){var r=o("jmjWc").createLoadable,i=o("398ES").LoadingPriority;e.exports=function(e){let{overrideReactLoadablePriority:t}=e;return r(void 0!==t?t:i.AFTER_PAINT)({...e,isReactLoadable:!0})}}),s("kVNt7",function(e,r){var i=o("42omo");function n(e){let{emoji:r,onSelection:n,onMouseMove:s,selected:a,emojiProvider:l,forwardedRef:c}=e,u=t(i).useCallback(e=>{(0,o("2s0fd").leftClick)(e)&&n&&(e.preventDefault(),n((0,o("40rXS").toEmojiId)(r),r,e))},[r,n]),d=t(i).useCallback(e=>{s&&s((0,o("40rXS").toEmojiId)(r),r,e)},[r,s]);return t(i).createElement(o("jYWS5").EmojiCommonProvider,{emojiProvider:l},t(i).createElement("div",{className:(0,o("gMc0m").default)(["_1reo15vq _18m915vq _80omtlke _1e0c1ule _2mzuglyw _1bsb1edt",a&&"_bfhki8nm",`ak-emoji-typeahead-item ${a?"emoji-typeahead-selected":""}`]),onMouseDown:u,onMouseMove:d,"data-emoji-id":r.shortName,ref:c},t(i).createElement("div",{className:(0,o("gMc0m").default)(["_1e0c1txw _2lx2vrvc _1n261g80 _s7n4nkob"])},r&&t(i).createElement(o("5uONf").EmojiPreviewComponent,{emoji:r}))))}let s=t(i).forwardRef((e,r)=>t(i).createElement(n,{...e,forwardedRef:r}));e.exports.default=s}),s("jYWS5",function(e,r){var i=o("42omo");e.exports.EmojiCommonProvider=e=>{let r=(0,i.useMemo)(()=>e.emojiProvider?{emoji:{emojiProvider:e.emojiProvider}}:void 0,[e.emojiProvider]);return r?t(i).createElement(o("03yfx").EmojiContextProvider,{emojiContextValue:r},e.children):t(i).createElement(t(i).Fragment,null,e.children)}}),s("2s0fd",function(e,t){e.exports.leftClick=function(e){return 0===e.button&&!e.altKey&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey}}),s("5uONf",function(e,t){var r=o("42omo");e.exports.EmojiPreviewComponent=({emoji:e})=>r.createElement("div",{className:(0,o("gMc0m").default)(["_ca0q19bv _u5f319bv _n3td19bv _19bv19bv _1e0c1txw _2lx2vrvc _1n261q9c _4t3izwfg _4cvr1h6o"])},r.createElement("span",{className:(0,o("gMc0m").default)(["_1e0c1o8l _1bsbzwfg _12s6idpf _1e4didpf _1dvqidpf _vwlxidpf _1gdiidpf _1f45idpf _pdfdidpf _mwo3idpf _5ilezwfg _boltzwfg _1pc7zwfg _u5wqzwfg _w7981kw7 _1vqe1kw7 _1l4xidpf _1l79idpf _118didpf _1pa4idpf _1pglh2mm _1vjf1ssb _1h6o1ssb _8fp6dbra _1os4zwfg _1e7azwfg _7mh21ule"])},r.createElement(o("dcj1K").default,{key:e.id||e.shortName,emoji:e})),r.createElement("div",{className:(0,o("gMc0m").default)(["_1e0c1txw _2lx21bp4 _1wpz1h6o _19pk1i6y _18u019bv _p12f3sup _1bsb3sup _16jlkb7n _1o9zkb7n"])},e.name&&r.createElement("div",{className:(0,o("gMc0m").default)(["_1reo15vq _18m915vq _1e0c1ule _syazi7uo _1bto1l2s _o5721q9c _299mangw"])},e.name),r.createElement("div",{className:(0,o("gMc0m").default)(["_11c8dcr7 _1reo15vq _18m915vq _1e0c1ule _syazazsu _vwz4kb7n _otyr1i6y _n3tdv77o _1bto1l2s _o5721q9c _10hw2smr _pnmbi7uo"])},e.shortName)))}),s("dcj1K",function(r,i){e(r.exports,"default",()=>c);var n=o("42omo"),s=e=>{let{emoji:r,selected:i,selectOnHover:s,className:a}=e,{fallback:l,shortName:c}=r,u=`${o("8hpYf").emojiNodeStyles} ${i?o("8hpYf").commonSelectedStyles:""} ${s?o("8hpYf").selectOnHoverStyles:""} ${a||""}`;return t(n).createElement(o("8Yr6I").EmojiNodeWrapper,{type:"image",...e,className:u},t(n).createElement("span",{className:(0,o("gMc0m").default)(["_1reo15vq _18m915vq _1e0c1txw _1bsb1osq _4t3i1osq _1bah1h6o _4cvr1h6o"])},l||c))};let a=e=>{let{emoji:r,...i}=e,[a,l]=(0,n.useState)(!1);return a?t(n).createElement(s,{emoji:r,...i}):t(n).createElement(o("8Yr6I").default,{emoji:r,onLoadError:e=>{l(!0)},...i})},l=e=>{let{emoji:r,placeholderSize:i,showTooltip:s,fitToHeight:a,children:l,...c}=e,{shortName:u,representation:d}=r,[p,h]=(0,n.useState)(),[f,m]=(0,n.useState)(!1),{emojiProvider:g}=(0,o("MdjHG").useEmoji)(),y=(0,n.useCallback)(e=>{(0,o("fB3RY").default)("Loading image via media cache",r.shortName),(0,o("7ZWaV").sampledUfoRenderedEmoji)(r).mark(o("aGYoD").UfoEmojiTimings.MEDIA_START),e.getMediaEmojiDescriptionURLWithInlineToken(r).then(e=>{h(e),m(!1),(0,o("7ZWaV").sampledUfoRenderedEmoji)(r).mark(o("aGYoD").UfoEmojiTimings.MEDIA_END)}).catch(e=>{h(void 0),m(!0),(0,o("7ZWaV").sampledUfoRenderedEmoji)(r).failure({metadata:{error:(0,o("injKz").extractErrorInfo)(e),reason:"failed to load media emoji",source:"CachingMediaEmoji",emojiId:r.id}})})},[r]);return((0,n.useEffect)(()=>{g&&y(g)},[g,y]),p&&!f)?t(n).createElement(o("8Yr6I").default,{...c,showTooltip:s,fitToHeight:a,emoji:p,onLoadError:e=>{(0,o("7ZWaV").sampledUfoRenderedEmoji)(e).failure({metadata:{reason:"load error",source:"CachingMediaEmoji",emojiId:e.id}}),m(!0)}}):t(n).createElement(o("eTjjM").default,{size:a||i,shortName:u,showTooltip:s,representation:d})};var c=(0,n.memo)(e=>{let{emoji:r,placeholderSize:i,...s}=e;return(0,o("li2rw").useSampledUFOComponentExperience)(o("7ZWaV").ufoExperiences["emoji-rendered"].getInstance(r.id||r.shortName),o("fhsiz").SAMPLING_RATE_EMOJI_RENDERED_EXP,{source:"CachingEmoji",emojiId:r.id}),(0,n.useEffect)(()=>{(0,o("7ZWaV").hasUfoMarked)((0,o("7ZWaV").sampledUfoRenderedEmoji)(r),"fmp")||(0,o("7ZWaV").sampledUfoRenderedEmoji)(r).markFMP()},[]),t(n).createElement(o("jPINf").UfoErrorBoundary,{experiences:[o("7ZWaV").ufoExperiences["emoji-rendered"].getInstance(e.emoji.id||e.emoji.shortName)]},(0,o("40rXS").isMediaEmoji)(r)?t(n).createElement(l,{emoji:r,placeholderSize:i,...s}):t(n).createElement(a,{emoji:r,...s}))})}),s("8Yr6I",function(e,r){var i=o("42omo"),n=e=>i.createElement("span",{className:(0,o("gMc0m").default)(["_3um015vq _1e0c1txw _kqswstnw _154ix0bf _1xi2x0bf _1pbykb7n _13t3idpf",o("8hpYf").emojiDeleteButton]),"data-testid":"render-emoji-delete-button"},i.createElement(o("eEA8O").default,{iconBefore:i.createElement(o("gdv5Z").default,{xcss:"_1bsbf6fq _4t3if6fq"},i.createElement(t(o("bRp3h")),{label:o("fhsiz").deleteEmojiLabel,color:"var(--ds-text-subtle, #505258)",LEGACY_size:"small",size:"small"})),onClick:e.onClick,appearance:"subtle-link",spacing:"none",testId:"emoji-delete-button",tabIndex:-1}));let s={mac:!1,supportsIntersectionObserver:!1};"undefined"!=typeof navigator&&(s.mac=/Mac/.test(navigator.platform),s.supportsIntersectionObserver="undefined"!=typeof window&&"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype);let a=e=>{let t=(0,o("iHQDd").useInView)(e);return s.supportsIntersectionObserver?t:[void 0,!0]},l=function(e,t){let r=t.replace(/Mod/i,"Ctrl"),i=t.replace(/Mod/i,"Cmd");return{description:e,windows:r.replace(/Mod/i,"Ctrl"),mac:i.replace(/Mod/i,"Cmd"),common:t}}("Backspace","Backspace"),c={ARROWLEFT:"←",ARROWRIGHT:"→",ARROWUP:"↑",ARROWDOWN:"↓"},u=t(i).memo(({description:e,shortcutOverride:r,keymap:n})=>{let a=r||n&&function(e){let t,r=(s.mac?e.mac.replace(/Cmd/i,"⌘").replace(/Shift/i,"⇧").replace(/Ctrl/i,"⌃").replace(/Alt/i,"⌥").replace(/Backspace/i,"⌫").replace(/Enter/i,"⏎"):e.windows.replace(/Backspace/i,"⌫")).split("-"),i=r[r.length-1];return 1===i.length&&(i=i.toUpperCase()),r[r.length-1]=c[i.toUpperCase()]||i,r.join(s.mac?"":"+")}(n);return a||e?t(i).createElement(i.Fragment,null,e,a&&e&&" ",a&&t(i).createElement("span",{className:(0,o("gMc0m").default)(["_2rkofajl _bfhk1vck _ca0qidpf _n3tdidpf _19bvv77o _u5f3v77o _jqf61teg"])},a)):null}),d=()=>{let{formatMessage:e}=(0,o("8C5kA").default)();return t(i).createElement(u,{description:e(o("8Tx5v").messages.deleteEmojiTooltip),keymap:l})},p=({emoji:e})=>t(i).createElement(o("6F6hl").default,{id:`screenreader-emoji-${e.id}`},t(i).createElement(o("gtD4K").default,{...o("8Tx5v").messages.deleteEmojiTooltipForScreenreader,values:{shortName:e.shortName}}));var h=o("kyRHQ"),f=o("1oCLl");let m=(e,t)=>{if(t.target instanceof Element&&t.target.getAttribute("aria-label")===o("fhsiz").deleteEmojiLabel)return;let{emoji:r,onSelected:i}=e;i&&(0,o("2s0fd").leftClick)(t)&&i((0,o("40rXS").toEmojiId)(r),r,t)},g=(e,t)=>{if(!o("fhsiz").EMOJI_KEYBOARD_KEYS_SUPPORTED.includes(t.key))return;t.preventDefault(),t.stopPropagation();let{emoji:r,onSelected:i,showDelete:n}=e;i&&(t.key===o("fhsiz").KeyboardKeys.Enter||t.key===o("fhsiz").KeyboardKeys.Space)&&i((0,o("40rXS").toEmojiId)(r),r,t),n&&t.key===o("fhsiz").KeyboardKeys.Backspace&&x(e,t)},y=(e,t)=>{let{emoji:r,onMouseMove:i}=e;i&&i((0,o("40rXS").toEmojiId)(r),r,t)},v=(e,t)=>{let{emoji:r,onFocus:i}=e;i&&i((0,o("40rXS").toEmojiId)(r),r,t)},x=(e,t)=>{let{emoji:r,onDelete:i}=e;i&&i((0,o("40rXS").toEmojiId)(r),r,t)},b=(e,t)=>{let{emoji:r,onLoadError:i}=e;t.target&&(t.target.style.visibility="hidden"),i&&i((0,o("40rXS").toEmojiId)(r),r,t)},E=e=>{let{emoji:r,fitToHeight:n,selected:s,selectOnHover:a,className:l}=e,c=r.representation,u=c.sprite,d=`${o("8hpYf").emojiNodeStyles} ${s?o("8hpYf").commonSelectedStyles:""} ${a?o("8hpYf").selectOnHoverStyles:""} ${l||""}`,p={};n&&(p=(0,f.expValEquals)("platform_editor_lovability_emoji_scaling","isEnabled",!0)?{minHeight:`${n}px`,minWidth:`${n}px`}:{width:`${n}px`,height:`${n}px`,minHeight:`${n}px`,minWidth:`${n}px`});let h=100/(u.column-1)*(c.xIndex-0),m=100/(u.row-1)*(c.yIndex-0),g={backgroundImage:`url(${u.url})`,backgroundPosition:`${h}% ${m}%`,backgroundSize:`${100*u.column}% ${100*u.row}%`,...p};return t(i).createElement(w,{...e,type:"sprite",className:d},t(i).createElement("span",{className:o("8hpYf").emojiSprite,style:g}))},S=e=>{let r,l,c,{emoji:u,fitToHeight:f,selected:m,selectOnHover:g,className:y,showDelete:v,onLoadSuccess:E,disableLazyLoad:S,autoWidth:k}=e,[_,j]=a({triggerOnce:!0}),M=(0,i.useMemo)(()=>(0,o("7ZWaV").sampledUfoRenderedEmoji)(u),[u]),I=`${o("8hpYf").emojiMainStyle} ${o("8hpYf").emojiNodeStyles} ${m?o("8hpYf").commonSelectedStyles:""} ${g?o("8hpYf").selectOnHoverStyles:""} ${o("8hpYf").emojiImage} ${y||""} ${v?o("8hpYf").deletableEmoji:""}`,A=(0,o("jDv0c").shouldUseAltRepresentation)(u,f)?u.altRepresentation:u.representation;(0,o("40rXS").isImageRepresentation)(A)?(c=A.imagePath,r=A.width,l=A.height):(0,o("40rXS").isMediaRepresentation)(A)&&(c=A.mediaPath,r=A.width,l=A.height);let O={};f&&r&&l&&(O={width:k&&(!function(){try{return!!("undefined"==typeof document||void 0!==h&&h?.env?.REACT_SSR)}catch(e){return!1}}()||(0,o("dh538").fg)("platform_emoji_ssr_width_auto_allowed"))?"auto":f/l*r,height:f});let T=(0,i.useCallback)(t=>{b({emoji:e.emoji,onLoadError:e.onLoadError},t)},[e.emoji,e.onLoadError]),C=(0,i.useCallback)(()=>{let e=M.metrics.marks.find(e=>e.name===o("aGYoD").UfoEmojiTimings.MOUNTED_END);(0,o("7ZWaV").hasUfoMarked)(M,o("aGYoD").UfoEmojiTimings.ONLOAD_START)||M.mark(o("aGYoD").UfoEmojiTimings.ONLOAD_START,e?.time);let t=M.metrics.marks.find(e=>e.name===o("aGYoD").UfoEmojiTimings.ONLOAD_START);e&&t&&M.addMetadata({lazyLoad:t.time>e.time}),(0,o("7ZWaV").hasUfoMarked)(M,o("aGYoD").UfoEmojiTimings.ONLOAD_END)||M.mark(o("aGYoD").UfoEmojiTimings.ONLOAD_END),M.success({metadata:{IBSupported:s.supportsIntersectionObserver}}),E&&E(u)},[u,E,M]),R=(0,i.useCallback)(()=>{(0,o("7ZWaV").hasUfoMarked)(M,o("aGYoD").UfoEmojiTimings.ONLOAD_START)||M.mark(o("aGYoD").UfoEmojiTimings.ONLOAD_START)},[M]),N=(0,i.useCallback)(e=>{document.activeElement?.contains(e.target)||e.stopPropagation()},[]);(0,i.useEffect)(()=>{j&&R()},[j,R]);let F=t(i).createElement("img",{loading:S?"eager":"lazy",src:c,key:c,alt:u.name||u.shortName,"data-emoji-short-name":u.shortName,"data-emoji-id":u.id,"data-emoji-text":u.fallback||u.shortName,className:"emoji",style:{visibility:"visible"},onError:T,onLoad:C,...O,"data-vc":"emoji"});return v?t(i).createElement(o("3gadb").default,{content:t(i).createElement(d,null),position:"right-start",tag:"span"},t(i).createElement(w,{...e,"aria-labelledby":`screenreader-emoji-${u.id}`,type:"image",className:I,ref:_,showTooltip:!1,onMouseOver:N},F,t(i).createElement(n,{onClick:t=>x(e,t)}),t(i).createElement(p,{emoji:u}))):t(i).createElement(w,{...e,type:"image",className:I,ref:_},F)},w=(0,i.forwardRef)((e,r)=>{let n,{emoji:s,fitToHeight:a,selected:l,selectOnHover:c,className:u,showTooltip:d,showDelete:p,shouldBeInteractive:h=!1,tabIndex:f,onSelected:x,onMouseMove:b,onFocus:E,onDelete:S,onLoadError:w,onLoadSuccess:k,disableLazyLoad:_,autoWidth:j,children:M,type:I,editorEmoji:A,...O}=e;return n=A?{role:void 0}:h?{role:"button","aria-label":s.shortName}:{role:"img","aria-label":s.shortName},t(i).createElement("span",{...n,ref:r,"data-testid":`${I}-emoji-${s.shortName}`,"data-emoji-type":I,tabIndex:h?f||0:void 0,className:(0,o("gMc0m").default)(["sprite"===I?"_19pk1n1a _2hwxidpf _otyr1n1a _18u0idpf _1e0c1o8l _jr50g2xd _ylp71o8l _pkaxgktf _1hdcgktf _109tnkob _tn8j1dpa _3naf1dpa _nt751r31 _49pcglyw _1hvw1o36 _7ehi1y54 _491113zc":"_2rkofajl _19pk1n1a _2hwxidpf _otyr1n1a _18u0idpf _bfhk1j28 _1e0c1o8l _s7n4nkob _v4pn1ule _tn8j1dpa _3naf1dpa _160jewfl _1theewfl _1kogh2mm _qyp0ewfl _nt751r31 _49pcglyw _1hvw1o36 _7ehi1y54 _491113zc",u]),onKeyDown:t=>g(e,t),onMouseDown:t=>{m(e,t)},onMouseEnter:t=>{y(e,t)},onFocus:t=>{v(e,t)},title:d?s.shortName:void 0,...O},M)});e.exports.EmojiNodeWrapper=w,e.exports.default=e=>{let{emoji:r}=e;return((0,o("li2rw").useSampledUFOComponentExperience)(o("7ZWaV").ufoExperiences["emoji-rendered"].getInstance(r.id||r.shortName),o("fhsiz").SAMPLING_RATE_EMOJI_RENDERED_EXP,{source:"Emoji",emojiId:r.id}),(0,i.useEffect)(()=>{let e=(0,o("7ZWaV").sampledUfoRenderedEmoji)(r);(0,o("7ZWaV").hasUfoMarked)(e,"fmp")||e.markFMP(),(0,o("7ZWaV").hasUfoMarked)(e,o("aGYoD").UfoEmojiTimings.MOUNTED_END)||e.mark(o("aGYoD").UfoEmojiTimings.MOUNTED_END)},[]),(0,o("40rXS").isSpriteRepresentation)(r.representation))?t(i).createElement(E,e):t(i).createElement(S,e)}}),s("8hpYf",function(e,t){e.exports.commonSelectedStyles="emoji-common-selected",e.exports.selectOnHoverStyles="emoji-common-select-on-hover",e.exports.emojiSprite="emoji-common-emoji-sprite",e.exports.emojiNodeStyles="emoji-common-node",e.exports.emojiImage="emoji-common-emoji-image",e.exports.emojiDeleteButton="emoji-common-deleteButton",e.exports.emojiMainStyle="emoji-common-main-styles",e.exports.deletableEmoji="emoji-common-deletable",e.exports.placeholder="emoji-common-placeholder",e.exports.emojiPickerAddEmoji="emoji-picker-add-emoji"}),s("iHQDd",function(e,t){var r=o("42omo"),i=o("dRnqM");function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function a(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var l=new Map,c=new Map,u=new Map,d=0;function p(e,t,r){void 0===r&&(r={}),r.threshold||(r.threshold=0);var n=r,o=n.root,s=n.rootMargin,a=n.threshold;if(l.has(e)&&(0,i.default)(!1),e){var p=(o?u.has(o)?u.get(o):(d+=1,u.set(o,d.toString()),u.get(o)+"_"):"")+(s?a.toString()+"_"+s:a.toString()),h=c.get(p);!h&&(h=new IntersectionObserver(f,r),p&&c.set(p,h));var m={callback:t,element:e,inView:!1,observerId:p,observer:h,thresholds:h.thresholds||(Array.isArray(a)?a:[a])};return l.set(e,m),h.observe(e),m}}function h(e){if(e){var t=l.get(e);if(t){var r=t.observerId,i=t.observer,n=i.root;i.unobserve(e);var o=!1,s=!1;r&&l.forEach(function(t,i){i!==e&&(t.observerId===r&&(o=!0,s=!0),t.observer.root===n&&(s=!0))}),!s&&n&&u.delete(n),i&&!o&&i.disconnect(),l.delete(e)}}}function f(e){e.forEach(function(e){var t=e.isIntersecting,r=e.intersectionRatio,i=e.target,n=l.get(i);if(n&&r>=0){var o=n.thresholds.some(function(e){return n.inView?r>e:r>=e});void 0!==t&&(o=o&&t),n.inView=o,n.callback(o,e)}})}var m=function(e){function t(){for(var t,r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return n(a(t=e.call.apply(e,[this].concat(i))||this),"state",{inView:!1,entry:void 0}),n(a(t),"node",null),n(a(t),"handleNode",function(e){t.node&&(h(t.node),e||t.props.triggerOnce||t.setState({inView:!1,entry:void 0})),t.node=e||null,t.observeNode()}),n(a(t),"handleChange",function(e,r){(e!==t.state.inView||e)&&t.setState({inView:e,entry:r}),t.props.onChange&&t.props.onChange(e,r)}),t}t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e;var o=t.prototype;return o.componentDidMount=function(){this.node||(0,i.default)(!1)},o.componentDidUpdate=function(e,t){(e.rootMargin!==this.props.rootMargin||e.root!==this.props.root||e.threshold!==this.props.threshold)&&(h(this.node),this.observeNode()),t.inView!==this.state.inView&&this.state.inView&&this.props.triggerOnce&&(h(this.node),this.node=null)},o.componentWillUnmount=function(){this.node&&(h(this.node),this.node=null)},o.observeNode=function(){if(this.node){var e=this.props,t=e.threshold,r=e.root,i=e.rootMargin;p(this.node,this.handleChange,{threshold:t,root:r,rootMargin:i})}},o.render=function(){var e=this.state,t=e.inView,i=e.entry;if("function"==typeof this.props.children)return this.props.children({inView:t,entry:i,ref:this.handleNode});var n=this.props,o=n.children,a=n.as,l=n.tag,c=(n.triggerOnce,n.threshold,n.root,n.rootMargin,n.onChange,function(e,t){if(null==e)return{};var r,i,n={},o=Object.keys(e);for(i=0;i<o.length;i++)t.indexOf(r=o[i])>=0||(n[r]=e[r]);return n}(n,["children","as","tag","triggerOnce","threshold","root","rootMargin","onChange"]));return(0,r.createElement)(a||l||"div",s({ref:this.handleNode},c),o)},t}(r.Component);n(m,"displayName","InView"),n(m,"defaultProps",{threshold:0,triggerOnce:!1});var g={inView:!1,entry:void 0};e.exports.useInView=function(e){void 0===e&&(e={});var t=(0,r.useRef)(),i=(0,r.useState)(g),n=i[0],o=i[1],s=(0,r.useCallback)(function(r){t.current&&h(t.current),r&&p(r,function(t,i){o({inView:t,entry:i}),t&&e.triggerOnce&&h(r)},e),t.current=r},[e.threshold,e.root,e.rootMargin,e.triggerOnce]);return(0,r.useEffect)(function(){t.current||n===g||e.triggerOnce||o(g)}),[s,n.inView,n.entry]}}),s("eTjjM",function(e,t){var r=o("42omo"),i=o("1oCLl");let n=e=>`emoji-placeholder-${e}`;e.exports.default=e=>{let t,s,{shortName:a,size:l=o("fhsiz").defaultEmojiHeight,showTooltip:c,representation:u,loading:d=!1,xcss:p}=e;if(u&&l){let e=u.width,r=u.height;e&&r&&(t=l/r*e,s=l)}let h=t||l,f=s||l,m=(0,i.expValEquals)("platform_editor_lovability_emoji_scaling","isEnabled",!0)?{fill:"f7f7f7",minWidth:`${o("fhsiz").defaultDenseEmojiHeight}px`,minHeight:`${o("fhsiz").defaultDenseEmojiHeight}px`}:{fill:"f7f7f7",minWidth:`${h}px`,width:`${h}px`,height:`${f}px`};return r.createElement("span",{"data-testid":n(a),"aria-busy":d,role:"status","aria-label":a,className:(0,o("gMc0m").default)(["_19pk1n1a _2hwxidpf _otyr1n1a _18u0idpf _2rkofajl _1reo15vq _18m915vq _kqswh2mm _1e0c1o8l _bfhk1l7x _s7n4nkob _o5721q9c _y3gn1h6o",[o("8hpYf").placeholder,p].join(" ")]),style:m,title:c?a:""})}}),s("MdjHG",function(e,t){var r=o("42omo");let i=e=>!!e.isUploadSupported&&!!e.uploadCustomEmoji&&!!e.prepareForUpload;e.exports.useEmoji=()=>{let e=(0,r.useContext)(o("fXFeB").EmojiContext),[t,n]=(0,r.useState)(!1);if(!e)throw Error("useEmoji must be used within EmojiContext");let{emojiProvider:s}=e.emoji;return(0,r.useEffect)(()=>{i(s)&&(async()=>{try{let e=await s.isUploadSupported();return n(e),!0}catch(e){return!1}})()},[s]),{emojiProvider:s,isUploadSupported:t}}}),s("injKz",function(e,t){let r=(0,o("eWRwJ").default)("fabric-elements"),i=(e,t,r,i,n={})=>({eventType:e,action:t,actionSubject:r,actionSubjectId:i,attributes:{packageName:"platform-pkg",packageVersion:"0.0.0-use.local",...n}}),n=e=>t=>i("operational","succeeded","recordEmojiSelection",void 0,{source:t,emojiId:e?.id,emojiType:e?.type,emojiCategory:e?.category}),s=e=>t=>i("operational","failed","recordEmojiSelection",void 0,{source:t,emojiId:e?.id,emojiType:e?.type,emojiCategory:e?.category}),a=(e,t={},r)=>i("ui",e,"emojiPicker",r,t),l=[{id:"-1f3fb",skinToneModifier:"light"},{id:"-1f3fc",skinToneModifier:"mediumLight"},{id:"-1f3fd",skinToneModifier:"medium"},{id:"-1f3fe",skinToneModifier:"mediumDark"},{id:"-1f3ff",skinToneModifier:"dark"}],c=e=>{if(!e)return{};for(let{id:t,skinToneModifier:r}of l)if(-1!==e.indexOf(t))return{skinToneModifier:r,baseEmojiId:e.replace(t,"")};return{}},u=(e,t={})=>i("ui",e,"emojiSkintoneSelector",void 0,t),d=(e,t,r)=>i("ui",e,"emojiUploader",t,r);e.exports.createAndFireEventInElementsChannel=r,e.exports.recordSucceededEmoji=n,e.exports.recordFailedEmoji=s,e.exports.openedPickerEvent=()=>a("opened"),e.exports.closedPickerEvent=e=>a("closed",e),e.exports.pickerClickedEvent=e=>a("clicked",{...c(e.emojiId),...e},"emoji"),e.exports.categoryClickedEvent=e=>a("clicked",e,"category"),e.exports.pickerSearchedEvent=e=>a("searched",e,"query"),e.exports.toneSelectedEvent=e=>u("clicked",e),e.exports.toneSelectorOpenedEvent=e=>u("opened",e),e.exports.toneSelectorClosedEvent=()=>u("cancelled"),e.exports.uploadBeginButton=()=>d("clicked","addButton"),e.exports.uploadConfirmButton=e=>d("clicked","confirmButton",e),e.exports.uploadCancelButton=()=>d("clicked","cancelButton"),e.exports.uploadSucceededEvent=e=>i("operational","finished","emojiUploader",void 0,e),e.exports.uploadFailedEvent=e=>i("operational","failed","emojiUploader",void 0,e),e.exports.deleteBeginEvent=e=>i("ui","clicked","emojiPicker","deleteEmojiTrigger",e),e.exports.deleteConfirmEvent=e=>i("ui","clicked","emojiPicker","deleteEmojiConfirm",e),e.exports.deleteCancelEvent=e=>i("ui","clicked","emojiPicker","deleteEmojiCancel",e),e.exports.selectedFileEvent=()=>i("ui","clicked","emojiUploader","selectFile"),e.exports.recordSelectionSucceededSli=(e,t)=>()=>{t&&t.createAnalyticsEvent&&(0,o("eWRwJ").default)("editor")(n(e)(o("aGYoD").SearchSourceTypes.TYPEAHEAD))(t.createAnalyticsEvent)},e.exports.recordSelectionFailedSli=(e,t)=>r=>(t&&t.createAnalyticsEvent&&(0,o("eWRwJ").default)("editor")(s(e)(o("aGYoD").SearchSourceTypes.TYPEAHEAD))(t.createAnalyticsEvent),Promise.reject(r)),e.exports.extractErrorInfo=e=>e instanceof Error?{name:e.name,message:e.message}:e}),s("lGf1F",function(e,r){var i=o("42omo");class n extends i.Component{componentDidMount(){this.state.asyncLoadedComponent||this.asyncLoadComponent()}componentDidUpdate(e){this.props!==e&&this.loadEmojiProvider(this.props.emojiProvider)}componentWillUnmount(){this.isUnmounted=!0}loadEmojiProvider(e){e.then(e=>{this.isUnmounted||this.setState({loadedEmojiProvider:e})}).catch(()=>{this.isUnmounted||this.setState({loadedEmojiProvider:void 0})})}setAsyncState(e){this.isUnmounted||this.setState({asyncLoadedComponent:e})}renderLoading(){return null}render(){if(this.loaded(this.state)){let{loadedEmojiProvider:e,asyncLoadedComponent:t}=this.state;return this.renderLoaded(e,t)}return this.renderLoading()}constructor(e,t){super(e),this.isUnmounted=!1,this.loaded=e=>!!e.asyncLoadedComponent&&!!e.loadedEmojiProvider,this.state=t,this.loadEmojiProvider(this.props.emojiProvider)}}function s(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let a=()=>o("gHa3k"),l=()=>a().then(e=>e.default);class c extends n{asyncLoadComponent(){l().then(e=>{c.AsyncLoadedComponent=e,this.setAsyncState(e)})}renderLoading(){let e=new(0,o("5Qd4j").LoadingItem);return o("7ZWaV").ufoExperiences["emoji-picker-opened"].markFMP(),t(i).createElement("div",{ref:e=>{this.props.onPickerRef&&this.props.onPickerRef(e)},className:(0,o("gMc0m").default)(["_19itahnd _2rkofajl _1e0c1txw _2lx21bp4 _1bah1yb4 _bfhk1bhr _16qs130s _4t3iixjv _1bsb1edt _1ul91edt _1tke5x59 _c71l1y6z"])},e.renderItem())}renderLoaded(e,r){let{emojiProvider:n,...s}=this.props;return t(i).createElement(o("jPINf").UfoErrorBoundary,{experiences:[o("7ZWaV").ufoExperiences["emoji-picker-opened"]]},t(i).createElement(o("jYWS5").EmojiCommonProvider,{emojiProvider:e},t(i).createElement(r,s)))}constructor(e){super(e,{}),s(this,"state",{asyncLoadedComponent:c.AsyncLoadedComponent}),o("7ZWaV").ufoExperiences["emoji-picker-opened"].start()}}s(c,"AsyncLoadedComponent",void 0),s(c,"defaultProps",{size:o("fhsiz").defaultEmojiPickerSize});let u=(0,o("1DWH0").default)()(c);e.exports.preloadEmojiPicker=()=>{l().then(e=>{c.AsyncLoadedComponent=e})},e.exports.default=u}),s("5Qd4j",function(e,t){var r=o("42omo"),i=({id:e,title:t,className:i})=>r.createElement("div",{id:e,"data-category-id":e,className:i,"data-testid":"render-emoji-picker-categorty-heading",role:"rowheader"},r.createElement("div",{className:(0,o("gMc0m").default)(["_11c82smr _vchhusvi _syazi7uo _ca0q12x7 _n3td12x7 _19bvu2gc _u5f3u2gc _1p1d1qyh _299mangw"])},(0,o("40rXS").isMessagesKey)(t)?r.createElement(o("gtD4K").default,o("8Tx5v").messages[t]):t)),n=(0,r.memo)(({emojis:e,onSelected:t,onMouseMove:i,onFocus:n,title:s,showDelete:a,onDelete:l,virtualItemContext:c})=>{let{currentEmojisFocus:u,setEmojisFocus:d}=(0,o("jVQt9").useEmojiPickerListContext)(),p=c?.index||0,{formatMessage:h}=(0,o("8C5kA").default)(),f=e=>(t,r,i)=>{d({rowIndex:p,columnIndex:e}),n&&n(t,r,i)};return r.createElement("div",{role:"presentation",className:(0,o("gMc0m").default)(["_18u0u2gc"])},e.map((e,n)=>{let{shortName:c,id:d}=e,m=d?`${d}-${s}`:`${c}-${s}`,g=u.rowIndex===p&&u.columnIndex===n;return r.createElement("span",{key:m,role:"gridcell","aria-colindex":n+1,className:(0,o("gMc0m").default)(["_1e0c1o8l _y3gn1h6o _1bsb1ylp _1wcg1qi0 _1678tlke _7b50u2gc _1rf4u2gc _b4kiu2gc _bm9mu2gc _1lvc1tcg _1cf71tcg _8vlfze3t _1909ze3t _1tcfze3t _n7xcze3t _4ubfu2gc _18x3u2gc _fw9su2gc _29jju2gc _qpkw1tcg _elsp1tcg _vtzrze3t _w2q0ze3t _o5kcze3t _1mc3ze3t _115ch2mm _yrst1ssb _85ft1ssb _5mfndbra _1k8z1tcg _17dz1tcg _zdyf1ule _1mn81tcg _u5ah1tcg"])},r.createElement(o("dcj1K").default,{emoji:e,selectOnHover:!0,onSelected:t,onMouseMove:i,onFocus:f(n),showDelete:a,onDelete:l,placeholderSize:24,"data-focus-index":`${p}-${n}`,tabIndex:g?0:-1,"aria-roledescription":h(o("8Tx5v").messages.emojiButtonRoleDescription),shouldBeInteractive:!0}))}))});function s(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a{constructor(e,t){s(this,"height",void 0),s(this,"props",void 0),s(this,"renderItem",void 0),this.props=e,this.height=t}}e.exports.EmojisRowItem=class extends a{constructor(e){super(e,o("4U4Dj").sizes.emojiRowHeight),s(this,"renderItem",e=>r.createElement(n,{...this.props,virtualItemContext:e}))}},e.exports.LoadingItem=class extends a{constructor(){super({},o("4U4Dj").sizes.loadingRowHeight),s(this,"renderItem",()=>r.createElement("div",{className:(0,o("gMc0m").default)(["_1e0c1txw _1bsb1osq _4t3i1w81 _1bah1h6o _4cvr1h6o _nphsidpf _t1edidpf _1t3b1wug"])},r.createElement("div",null,r.createElement(o("9hlns").default,{size:"medium"}))))}},e.exports.CategoryHeadingItem=class extends a{constructor(e){super(e,o("4U4Dj").sizes.categoryHeadingHeight),s(this,"renderItem",()=>r.createElement(i,this.props))}},e.exports.virtualItemRenderer=(e,t)=>{let{index:i,key:n}=t,o=e[i];return r.createElement("div",{key:n},o&&o.renderItem(t))}}),s("jVQt9",function(e,t){var r=o("42omo");e.exports.useEmojiPickerListContext=()=>(0,r.useContext)(o("ifWhS").EmojiPickerListContext)}),s("ifWhS",function(e,r){var i=o("42omo");let n=(0,i.createContext)({currentEmojisFocus:{rowIndex:0,columnIndex:0},setEmojisFocus:()=>{}});e.exports.EmojiPickerListContext=n,e.exports.EmojiPickerListContextProvider=e=>{let[r,o]=(0,i.useState)(e.initialEmojisFocus);return t(i).createElement(n.Provider,{value:{currentEmojisFocus:r,setEmojisFocus:o}},e.children)}}),s("4U4Dj",function(e,t){let r={listHeight:o("fhsiz").emojiPickerListHeight,listWidth:o("fhsiz").emojiPickerWidth,searchHeight:52,categoryHeadingHeight:30,emojiRowHeight:40,addEmojiHeight:32,loadingRowHeight:150,uploadActionHeight:40,emojiPerRow:8};e.exports.sizes=r}),s("gHa3k",function(e,t){let r=o("4mJKd")(5);e.exports=Promise.all([r("92LGf"),r("6wr18"),r("4S0zt"),r("Wowvf"),r("1cGGc"),r("ljaqI"),r("a5PnA"),r("f1x0y"),r("ffEVr"),r("5t3NJ"),r("1RolH")]).then(()=>o("cqieh"))}),s("iu6m9",function(e,t){var r=o("7Rqpr"),i=o("8ihu7");e.exports.editorExperiment=function(e,t,n={exposure:!1}){let s=r.editorExperimentsConfig[e];if(void 0!==i._overrides[e])return i._overrides[e]===t;if(void 0===s)throw Error(`Editor experiment configuration is not defined ${e}. Likely the experiment does not exist or editor package versions are misaligned`);if(!i._product)return s.defaultValue===t;let a=s?.productKeys?.[i._product];if(!a)return r.editorExperimentsConfig[e]?.defaultValue===t;let l=o("c6GJD").default.getExperimentValue(a,s.param,s.defaultValue,{typeGuard:s.typeGuard,fireExperimentExposure:n.exposure});return o("c6GJD").default.getExperimentValue("cc_editor_experiments_ufo_gate_reporting","isEnabled",!1)&&(0,o("g68Gk").addFeatureFlagAccessed)(`${e}:${s.param}`,l),t===l},e.exports.unstable_editorExperimentParam=function(e,t,r){return i._paramOverrides[e]?.[t]!==void 0?i._paramOverrides[e][t]:o("c6GJD").default.getExperimentValue(e,t,r.defaultValue,{typeGuard:r.typeGuard,fireExperimentExposure:r.exposure??!1})}}),s("cUycv",function(e,t){var r,i,n=((r={}).INLINE_COMMENT="inlineComment",r),s=((i={}).RESOLVED="resolved",i.ACTIVE="active",i);function a({id:e,annotationType:t,state:r}){let i={"data-mark-type":"annotation","data-mark-annotation-type":t,"data-id":e};return r?{...i,"data-mark-annotation-state":r}:i}let l=(0,o("6bXvD").annotation)({parseDOM:[{tag:'span[data-mark-type="annotation"]',mark:"annotation",getAttrs:e=>({id:e.getAttribute("data-id"),annotationType:e.getAttribute("data-mark-annotation-type")})}],toDOM:e=>["span",{class:"fabric-editor-annotation",...a({id:e.attrs.id,annotationType:e.attrs.annotationType})},0]});e.exports.AnnotationTypes=n,e.exports.AnnotationMarkStates=s,e.exports.buildDataAttributes=a,e.exports.annotation=l}),s("6bXvD",function(e,t){let r=(0,o("2ZyjG").createPMMarkSpecFactory)({attrs:{align:{}},excludes:"alignment indentation",group:"alignment"}),i=(0,o("2ZyjG").createPMMarkSpecFactory)({attrs:{id:{default:""},annotationType:{default:"inlineComment"}},inclusive:!0,excludes:"",group:"annotation"}),n=(0,o("2ZyjG").createPMMarkSpecFactory)({attrs:{color:{}},inclusive:!0,excludes:"color",group:"color"}),s=(0,o("2ZyjG").createPMMarkSpecFactory)({attrs:{size:{},color:{}},inclusive:!1}),a=(0,o("2ZyjG").createPMMarkSpecFactory)({attrs:{mode:{default:"wide"},width:{default:null}},inclusive:!1,spanning:!1}),l=(0,o("2ZyjG").createPMMarkSpecFactory)({inclusive:!0,excludes:"fontStyle link searchQuery color"}),c=(0,o("2ZyjG").createPMMarkSpecFactory)({attrs:{reference:{default:""}},inclusive:!1,excludes:""}),u=(0,o("2ZyjG").createPMMarkSpecFactory)({attrs:{sources:{default:[]}}}),d=(0,o("2ZyjG").createPMMarkSpecFactory)({inclusive:!0,group:"fontStyle"}),p=(0,o("2ZyjG").createPMMarkSpecFactory)({attrs:{localId:{default:""},name:{default:null}},inclusive:!1,excludes:""}),h=(0,o("2ZyjG").createPMMarkSpecFactory)({attrs:{level:{}},excludes:"indentation alignment",group:"indentation"}),f=(0,o("2ZyjG").createPMMarkSpecFactory)({attrs:{href:{},__confluenceMetadata:{default:null}},inclusive:!1,excludes:"link",group:"link"}),m=(0,o("2ZyjG").createPMMarkSpecFactory)({inclusive:!0,group:"fontStyle"}),g=(0,o("2ZyjG").createPMMarkSpecFactory)({inclusive:!0,group:"fontStyle"}),y=(0,o("2ZyjG").createPMMarkSpecFactory)({attrs:{type:{default:"sub"}},inclusive:!0,group:"fontStyle"}),v=(0,o("2ZyjG").createPMMarkSpecFactory)({attrs:{color:{}},inclusive:!0,group:"color"}),x=(0,o("2ZyjG").createPMMarkSpecFactory)({attrs:{trigger:{default:""}},inclusive:!0,group:"searchQuery"}),b=(0,o("2ZyjG").createPMMarkSpecFactory)({inclusive:!0,group:"fontStyle"}),E=(0,o("2ZyjG").createPMMarkSpecFactory)({attrs:{originalValue:{}},excludes:""}),S=(0,o("2ZyjG").createPMMarkSpecFactory)({attrs:{unsupported:{},type:{}}});e.exports.alignment=r,e.exports.annotation=i,e.exports.backgroundColor=n,e.exports.border=s,e.exports.breakout=a,e.exports.code=l,e.exports.confluenceInlineComment=c,e.exports.dataConsumer=u,e.exports.em=d,e.exports.fragment=p,e.exports.indentation=h,e.exports.link=f,e.exports.strike=m,e.exports.strong=g,e.exports.subsup=y,e.exports.textColor=v,e.exports.typeAheadQuery=x,e.exports.underline=b,e.exports.unsupportedMark=E,e.exports.unsupportedNodeAttribute=S}),s("bIZRt",function(e,t){let r=(0,o("17CG5").emoji)({parseDOM:[{tag:"div.ak-editor-panel__icon span",ignore:!0},{tag:"span[data-emoji-short-name]",getAttrs:e=>({shortName:e.getAttribute("data-emoji-short-name")||r.attrs.shortName.default,id:e.getAttribute("data-emoji-id")||r.attrs.id.default,text:e.getAttribute("data-emoji-text")||r.attrs.text.default})},{tag:"img[data-emoticon-name]",getAttrs:e=>(0,o("22kLH").acNameToEmoji)(e.getAttribute("data-emoticon-name"))},{tag:"img[data-hipchat-emoticon]",getAttrs:e=>(0,o("22kLH").acShortcutToEmoji)(e.getAttribute("data-hipchat-emoticon"))},{tag:"img.emoji[data-emoji-short-name]",getAttrs:e=>({shortName:e.getAttribute("data-emoji-short-name")||r.attrs.shortName.default,id:e.getAttribute("data-emoji-id")||r.attrs.id.default,text:e.getAttribute("data-emoji-text")||r.attrs.text.default})}],toDOM(e){let{shortName:t,id:r,text:i}=e.attrs;return["span",{"data-emoji-short-name":t,"data-emoji-id":r,"data-emoji-text":i,contenteditable:"false"},i]}}),i=(0,o("17CG5").emoji)({parseDOM:[{tag:"div.ak-editor-panel__icon span",ignore:!0},{tag:"span[data-emoji-short-name]",getAttrs:e=>({shortName:e.getAttribute("data-emoji-short-name")||r.attrs.shortName.default,id:e.getAttribute("data-emoji-id")||r.attrs.id.default,text:e.getAttribute("data-emoji-text")||r.attrs.text.default,localId:o("fO7hX").uuid.generate()})},{tag:"img[data-emoticon-name]",getAttrs:e=>({...(0,o("22kLH").acNameToEmoji)(e.getAttribute("data-emoticon-name")),localId:o("fO7hX").uuid.generate()})},{tag:"img[data-hipchat-emoticon]",getAttrs:e=>({...(0,o("22kLH").acShortcutToEmoji)(e.getAttribute("data-hipchat-emoticon")),localId:o("fO7hX").uuid.generate()})},{tag:"img.emoji[data-emoji-short-name]",getAttrs:e=>({shortName:e.getAttribute("data-emoji-short-name")||r.attrs.shortName.default,id:e.getAttribute("data-emoji-id")||r.attrs.id.default,text:e.getAttribute("data-emoji-text")||r.attrs.text.default,localId:o("fO7hX").uuid.generate()})}],toDOM(e){let{shortName:t,id:r,text:i}=e.attrs;return["span",{"data-emoji-short-name":t,"data-emoji-id":r,"data-emoji-text":i,contenteditable:"false","data-local-id":e?.attrs?.localId||void 0},i]}});e.exports.emoji=r,e.exports.emojiWithLocalId=i}),s("22kLH",function(e,t){let r="2b50",i={smile:["1f642",":slight_smile:","\uD83D\uDE42"],sad:["1f641",":slight_frown:","\uD83D\uDE41"],cheeky:["1f61b",":stuck_out_tongue:","\uD83D\uDE1B"],laugh:["1f600",":grinning:","\uD83D\uDE00"],wink:["1f609",":wink:","\uD83D\uDE09"],information:["2139",":information_source:","ℹ"],tick:["2705",":white_check_mark:","✅"],cross:["274c",":x:","❌"],warning:["26a0",":warning:","⚠"],plus:["2795",":heavy_plus_sign:","➕"],minus:["2796",":heavy_minus_sign:","➖"],question:["2753",":question:","?"],"thumbs-up":["1f44d",":thumbsup:","\uD83D\uDC4D"],"thumbs-down":["1f44e",":thumbsdown:","\uD83D\uDC4E"],"light-on":["1f4a1",":bulb:","\uD83D\uDCA1"],"yellow-star":["2b50",":star:","\uD83D\uDC9B"],"light-off":["1f6ab",":no_entry_sign:","\uD83D\uDEAB"],"red-star":["2764",":heart:","❤️"],"green-star":["1f49a",":green_heart:","\uD83D\uDC9A"],"blue-star":["1f499",":blue_heart:","\uD83D\uDC99"],heart:["2764",":heart:","❤️"],"broken-heart":["1f494",":broken_heart:","\uD83D\uDC94"]};e.exports.acNameToEmoji=function(e){let t=i[e];return t?{id:t[0],shortName:t[1],text:t[2]}:{id:r,shortName:`:${e}:`,text:""}},e.exports.acShortcutToEmoji=function(e){return{id:`atlassian-${e}`,shortName:`:${e}:`,text:""}},e.exports.getEmojiAcName=function({id:e,shortName:t}){if(r===e){let e=t.slice(+(":"===t[0]),":"===t[t.length-1]?-1:t.length);if(e in i)return e}return Object.keys(i).filter(t=>!!i[t]&&i[t][0]===e)[0]||"blue-star"}}),s("17CG5",function(e,t){let r=(0,o("2ZyjG").createPMNodeSpecFactory)({group:"block",attrs:{localId:{default:null},url:{default:null},datasource:{default:null},width:{default:null},layout:{default:null},data:{default:null}},selectable:!0,draggable:!0}),i=(0,o("2ZyjG").createPMNodeSpecFactory)({content:"(paragraph | orderedList | bulletList | unsupportedBlock | codeBlock | mediaSingle | mediaGroup | extension)+",marks:"unsupportedMark unsupportedNodeAttribute dataConsumer fragment",group:"block",attrs:{localId:{default:null}},selectable:!0,defining:!0}),n=(0,o("2ZyjG").createPMNodeSpecFactory)({content:"(paragraph | unsupportedBlock)+",marks:"unsupportedMark unsupportedNodeAttribute",group:"block",attrs:{localId:{default:null}},selectable:!0,defining:!0}),s=(0,o("2ZyjG").createPMNodeSpecFactory)({content:"(paragraph | extension) (paragraph | extension)*",marks:"dataConsumer fragment unsupportedMark unsupportedNodeAttribute",attrs:{localId:{default:""},state:{default:"TODO"}},selectable:!1,defining:!0}),a=(0,o("2ZyjG").createPMNodeSpecFactory)({content:"(paragraph | panel | blockquote | orderedList | bulletList | rule | heading | codeBlock | mediaGroup | mediaSingle | decisionList | taskList | table | blockCard | embedCard | extension | unsupportedBlock)+",marks:"dataConsumer fragment unsupportedMark unsupportedNodeAttribute",group:"block",attrs:{extensionKey:{default:""},extensionType:{default:""},parameters:{default:null},text:{default:null},layout:{default:"default"},localId:{default:null}},selectable:!0,defining:!0,isolating:!0});(0,o("2ZyjG").createPMNodeSpecFactory)({marks:"dataConsumer fragment unsupportedMark unsupportedNodeAttribute",group:"block",attrs:{extensionKey:{default:""},extensionType:{default:""},parameters:{default:null},text:{default:null},layout:{default:"default"},localId:{default:null}},selectable:!0,defining:!0,isolating:!0});let l=(0,o("2ZyjG").createPMNodeSpecFactory)({content:"(paragraph | blockCard | blockquote | bulletList | codeBlock | confluenceUnsupportedBlock | decisionList | embedCard | expand | heading | layoutSection | mediaGroup | mediaSingle | orderedList | panel | rule | table | taskList | unsupportedBlock)+",marks:"unsupportedMark unsupportedNodeAttribute alignment indentation breakout link fragment",attrs:{resourceId:{default:""},localId:{default:""}},selectable:!0,isolating:!0}),c=(0,o("2ZyjG").createPMNodeSpecFactory)({content:"listItem+",marks:"unsupportedMark unsupportedNodeAttribute",group:"block",attrs:{localId:{default:null}},selectable:!1}),u=(0,o("2ZyjG").createPMNodeSpecFactory)({content:"(hardBreak | mention | emoji | date | placeholder | inlineCard | status | text | unsupportedInline)*",marks:"_",attrs:{localId:{default:null}},selectable:!1,isolating:!0}),d=(0,o("2ZyjG").createPMNodeSpecFactory)({content:"(text | unsupportedInline)*",marks:"unsupportedMark unsupportedNodeAttribute",group:"block",attrs:{language:{default:null},uniqueId:{default:null},localId:{default:null}},code:!0,defining:!0});(0,o("2ZyjG").createPMNodeSpecFactory)({content:"(text | unsupportedInline)*",marks:"unsupportedMark unsupportedNodeAttribute",attrs:{language:{default:null},uniqueId:{default:null},localId:{default:null}},code:!0,defining:!0});let p=(0,o("2ZyjG").createPMNodeSpecFactory)({group:"inline",inline:!0,atom:!0,attrs:{issueKey:{default:""},macroId:{default:null},schemaVersion:{default:null},server:{default:null},serverId:{default:null}}}),h=(0,o("2ZyjG").createPMNodeSpecFactory)({group:"block",attrs:{cxhtml:{default:null}}}),f=(0,o("2ZyjG").createPMNodeSpecFactory)({group:"inline",inline:!0,atom:!0,attrs:{cxhtml:{default:null}}}),m=(0,o("2ZyjG").createPMNodeSpecFactory)({group:"inline",inline:!0,attrs:{timestamp:{default:""},localId:{default:null}},selectable:!0});(0,o("2ZyjG").createPMNodeSpecFactory)({group:"inline",inline:!0,attrs:{timestamp:{default:""},localId:{default:null}},selectable:!0});let g=(0,o("2ZyjG").createPMNodeSpecFactory)({content:"inline*",marks:"_",attrs:{localId:{default:""},state:{default:"DECIDED"}},defining:!0}),y=(0,o("2ZyjG").createPMNodeSpecFactory)({content:"(decisionItem | unsupportedBlock)+",marks:"unsupportedMark unsupportedNodeAttribute",group:"block",attrs:{localId:{default:""}},selectable:!1,defining:!0}),v=(0,o("2ZyjG").createPMNodeSpecFactory)({content:"(block | codeBlock | layoutSection | blockRootOnly | expand | syncBlock | bodiedSyncBlock)+",marks:"unsupportedMark unsupportedNodeAttribute alignment indentation dataConsumer fragment breakout"}),x=(0,o("2ZyjG").createPMNodeSpecFactory)({group:"block",attrs:{url:{default:""},layout:{default:"center"},width:{default:100},originalHeight:{default:null},originalWidth:{default:null},localId:{default:null}},selectable:!0}),b=(0,o("2ZyjG").createPMNodeSpecFactory)({group:"inline",inline:!0,attrs:{shortName:{default:""},id:{default:""},text:{default:""},localId:{default:null}},selectable:!0});(0,o("2ZyjG").createPMNodeSpecFactory)({group:"inline",inline:!0,attrs:{shortName:{default:""},id:{default:""},text:{default:""},localId:{default:null}},selectable:!0});let E=(0,o("2ZyjG").createPMNodeSpecFactory)({content:"(paragraph | panel | blockquote | orderedList | bulletList | rule | heading | codeBlock | mediaGroup | mediaSingle | decisionList | taskList | table | blockCard | embedCard | extension | unsupportedBlock | nestedExpand)+",marks:"unsupportedMark unsupportedNodeAttribute fragment dataConsumer",group:"block",attrs:{title:{default:""},__expanded:{default:!0},localId:{default:null}},selectable:!0,isolating:!0});(0,o("2ZyjG").createPMNodeSpecFactory)({content:"(paragraph | panel | blockquote | orderedList | bulletList | rule | heading | codeBlock | mediaGroup | mediaSingle | decisionList | taskList | table | blockCard | embedCard | extension | unsupportedBlock | nestedExpand)+",marks:"unsupportedMark unsupportedNodeAttribute fragment dataConsumer",attrs:{title:{default:""},__expanded:{default:!0},localId:{default:null}},selectable:!0,isolating:!0});let S=(0,o("2ZyjG").createPMNodeSpecFactory)({group:"block",atom:!0,attrs:{extensionKey:{default:""},extensionType:{default:""},parameters:{default:null},text:{default:null},layout:{default:"default"},localId:{default:null}},selectable:!0});(0,o("2ZyjG").createPMNodeSpecFactory)({group:"block",atom:!0,attrs:{extensionKey:{default:""},extensionType:{default:""},parameters:{default:null},text:{default:null},layout:{default:"default"},localId:{default:null}},selectable:!0});let w=(0,o("2ZyjG").createPMNodeSpecFactory)({content:"(paragraph | panel | blockquote | orderedList | bulletList | rule | heading | codeBlock | mediaGroup | mediaSingle | decisionList | taskList | table | extension | bodiedExtension | unsupportedBlock | blockCard | embedCard)+",marks:"dataConsumer fragment unsupportedMark unsupportedNodeAttribute",attrs:{},selectable:!1,definingAsContext:!1,definingForContent:!0,isolating:!0}),k=(0,o("2ZyjG").createPMNodeSpecFactory)({group:"inline",inline:!0,attrs:{text:{default:"\n"},localId:{default:null}},selectable:!1,linebreakReplacement:!0}),_=(0,o("2ZyjG").createPMNodeSpecFactory)({content:"inline*",marks:"link em strong strike subsup underline textColor annotation backgroundColor typeAheadQuery confluenceInlineComment unsupportedNodeAttribute unsupportedMark code dataConsumer fragment border",group:"block",attrs:{level:{default:1},localId:{default:null}},selectable:!1,defining:!0});(0,o("2ZyjG").createPMNodeSpecFactory)({group:"block",attrs:{level:{default:1},localId:{default:null}},selectable:!1,defining:!0}),(0,o("2ZyjG").createPMNodeSpecFactory)({group:"block",attrs:{level:{default:1},localId:{default:null}},selectable:!1,defining:!0}),(0,o("2ZyjG").createPMNodeSpecFactory)({group:"block",attrs:{level:{default:1},localId:{default:null}},selectable:!1,defining:!0});let j=(0,o("2ZyjG").createPMNodeSpecFactory)({group:"inline",inline:!0,attrs:{src:{default:""},alt:{default:""},title:{default:null}},draggable:!0}),M=(0,o("2ZyjG").createPMNodeSpecFactory)({group:"inline",inline:!0,attrs:{url:{default:null},localId:{default:null},data:{default:null}},selectable:!0,draggable:!0});(0,o("2ZyjG").createPMNodeSpecFactory)({group:"inline",inline:!0,attrs:{url:{default:null},localId:{default:null},data:{default:null}},selectable:!0,draggable:!0}),(0,o("2ZyjG").createPMNodeSpecFactory)({group:"inline",inline:!0,attrs:{extensionKey:{default:""},extensionType:{default:""},parameters:{default:null},text:{default:null},localId:{default:null}},selectable:!0});let I=(0,o("2ZyjG").createPMNodeSpecFactory)({group:"inline",inline:!0,attrs:{extensionKey:{default:""},extensionType:{default:""},parameters:{default:null},text:{default:null},localId:{default:null}},selectable:!0}),A=(0,o("2ZyjG").createPMNodeSpecFactory)({content:"(block | unsupportedBlock)+",marks:"unsupportedMark unsupportedNodeAttribute alignment indentation dataConsumer fragment",attrs:{width:{default:void 0},localId:{default:null}},selectable:!1,isolating:!0}),O=(0,o("2ZyjG").createPMNodeSpecFactory)({content:"(layoutColumn | unsupportedBlock){1,3} unsupportedBlock*",marks:"unsupportedMark unsupportedNodeAttribute",attrs:{localId:{default:null}},isolating:!0}),T=(0,o("2ZyjG").createPMNodeSpecFactory)({content:"(layoutColumn | unsupportedBlock){2,3}",marks:"unsupportedMark unsupportedNodeAttribute",attrs:{localId:{default:null}},isolating:!0}),C=(0,o("2ZyjG").createPMNodeSpecFactory)({content:"(layoutColumn | unsupportedBlock){1,5} unsupportedBlock*",marks:"unsupportedMark unsupportedNodeAttribute",attrs:{columnRuleStyle:{default:null},localId:{default:null}},isolating:!0}),R=(0,o("2ZyjG").createPMNodeSpecFactory)({content:"(paragraph | mediaSingle | codeBlock | unsupportedBlock | extension) (paragraph | bulletList | orderedList | taskList | mediaSingle | codeBlock | unsupportedBlock | extension)*",marks:"dataConsumer fragment unsupportedMark unsupportedNodeAttribute",attrs:{localId:{default:null}},selectable:!1,defining:!0}),N=(0,o("2ZyjG").createPMNodeSpecFactory)({content:"(paragraph | mediaSingle | codeBlock | unsupportedBlock | decisionList | extension) (paragraph | bulletList | orderedList | taskList | mediaSingle | codeBlock | unsupportedBlock | decisionList | extension)*",marks:"unsupportedMark unsupportedNodeAttribute dataConsumer fragment",attrs:{localId:{default:null}},selectable:!1,defining:!0}),F=(0,o("2ZyjG").createPMNodeSpecFactory)({attrs:{type:{default:"file"},localId:{default:null},id:{default:""},alt:{default:""},collection:{default:""},height:{default:null},occurrenceKey:{default:null},width:{default:null},__contextId:{default:null},__displayType:{default:null},__external:{default:!1},__fileMimeType:{default:null},__fileName:{default:null},__fileSize:{default:null},__mediaTraceId:{default:null},url:{default:null}},selectable:!0}),P=(0,o("2ZyjG").createPMNodeSpecFactory)({content:"(media | unsupportedBlock)+",marks:"link annotation border unsupportedMark unsupportedNodeAttribute",group:"block",attrs:{},selectable:!1}),D=(0,o("2ZyjG").createPMNodeSpecFactory)({group:"inline",inline:!0,attrs:{type:{default:"file"},localId:{default:null},url:{default:null},id:{default:""},alt:{default:""},collection:{default:""},occurrenceKey:{default:null},width:{default:null},height:{default:null},__fileName:{default:null},__fileSize:{default:null},__fileMimeType:{default:null},__displayType:{default:null},__contextId:{default:null},__mediaTraceId:{default:null},__external:{default:!1}},selectable:!0}),L=(0,o("2ZyjG").createPMNodeSpecFactory)({group:"block",atom:!0,attrs:{layout:{default:"center"},width:{default:null}},selectable:!0,content:"media|unsupportedBlock+|media unsupportedBlock+",marks:"annotation border link unsupportedMark unsupportedNodeAttribute"}),U=(0,o("2ZyjG").createPMNodeSpecFactory)({content:"media|unsupportedBlock+|media (caption|unsupportedBlock) unsupportedBlock*",marks:"link annotation border unsupportedMark unsupportedNodeAttribute",group:"block",atom:!1,attrs:{layout:{default:"center"},width:{default:null}},selectable:!0}),B=(0,o("2ZyjG").createPMNodeSpecFactory)({content:"media|unsupportedBlock+|media (caption|unsupportedBlock) unsupportedBlock*",marks:"link annotation border unsupportedMark unsupportedNodeAttribute",group:"block",atom:!1,attrs:{localId:{default:null},width:{default:null},layout:{default:"center"},widthType:{default:null}},selectable:!0}),z=(0,o("2ZyjG").createPMNodeSpecFactory)({content:"media|unsupportedBlock+|media unsupportedBlock+",marks:"link annotation border unsupportedMark unsupportedNodeAttribute",group:"block",atom:!0,attrs:{localId:{default:null},width:{default:null},layout:{default:"center"},widthType:{default:null}},selectable:!0}),G=(0,o("2ZyjG").createPMNodeSpecFactory)({group:"inline",inline:!0,attrs:{id:{default:""},localId:{default:null},text:{default:""},accessLevel:{default:""},userType:{default:null}},selectable:!0});(0,o("2ZyjG").createPMNodeSpecFactory)({group:"inline",inline:!0,attrs:{id:{default:""},localId:{default:null},text:{default:""},accessLevel:{default:""},userType:{default:null}},selectable:!0});let q=(0,o("2ZyjG").createPMNodeSpecFactory)({content:"extensionFrame+",marks:"unsupportedNodeAttribute unsupportedMark",group:"blockRootOnly",attrs:{extensionKey:{default:""},extensionType:{default:""},parameters:{default:null},text:{default:null},layout:{default:"default"},localId:{default:null}},selectable:!0,definingAsContext:!0}),$=(0,o("2ZyjG").createPMNodeSpecFactory)({content:"(paragraph | heading | mediaSingle | mediaGroup | codeBlock | bulletList | orderedList | taskList | decisionList | rule | panel | blockquote | unsupportedBlock | extension)+",marks:"unsupportedMark unsupportedNodeAttribute dataConsumer fragment",attrs:{title:{default:""},__expanded:{default:!0},localId:{default:null}},selectable:!0,isolating:!0});(0,o("2ZyjG").createPMNodeSpecFactory)({attrs:{title:{default:""},__expanded:{default:!0},localId:{default:null}},selectable:!0,isolating:!0});let W=(0,o("2ZyjG").createPMNodeSpecFactory)({content:"listItem+",marks:"unsupportedMark unsupportedNodeAttribute",group:"block",attrs:{order:{default:1},localId:{default:null}},selectable:!1}),H=(0,o("2ZyjG").createPMNodeSpecFactory)({content:"(paragraph | heading | bulletList | orderedList | blockCard | mediaGroup | mediaSingle | codeBlock | taskList | rule | decisionList | unsupportedBlock | extension)+",marks:"unsupportedMark unsupportedNodeAttribute dataConsumer fragment",group:"block",attrs:{panelType:{default:"info"},panelIcon:{default:null},panelIconId:{default:null},panelIconText:{default:null},panelColor:{default:null},localId:{default:null}},selectable:!0}),J=(0,o("2ZyjG").createPMNodeSpecFactory)({content:"inline*",marks:"link em strong strike subsup underline textColor annotation backgroundColor typeAheadQuery confluenceInlineComment unsupportedNodeAttribute unsupportedMark code dataConsumer fragment border",group:"block",attrs:{localId:{default:null}},selectable:!1});(0,o("2ZyjG").createPMNodeSpecFactory)({group:"block",attrs:{localId:{default:null}},selectable:!1}),(0,o("2ZyjG").createPMNodeSpecFactory)({group:"block",attrs:{localId:{default:null}},selectable:!1}),(0,o("2ZyjG").createPMNodeSpecFactory)({group:"block",attrs:{localId:{default:null}},selectable:!1});let V=(0,o("2ZyjG").createPMNodeSpecFactory)({marks:"",group:"inline",inline:!0,attrs:{text:{default:""},localId:{default:null}},selectable:!1}),Z=(0,o("2ZyjG").createPMNodeSpecFactory)({group:"block",attrs:{localId:{default:null}}}),K=(0,o("2ZyjG").createPMNodeSpecFactory)({group:"inline",inline:!0,attrs:{text:{default:""},color:{default:""},localId:{default:""},style:{default:""}},selectable:!0});(0,o("2ZyjG").createPMNodeSpecFactory)({group:"inline",inline:!0,attrs:{text:{default:""},color:{default:""},localId:{default:""},style:{default:""}},selectable:!0});let X=(0,o("2ZyjG").createPMNodeSpecFactory)({attrs:{resourceId:{default:""},localId:{default:""}},selectable:!0}),Y=(0,o("2ZyjG").createPMNodeSpecFactory)({content:"tableRow+",marks:"unsupportedMark unsupportedNodeAttribute",group:"block",attrs:{displayMode:{default:null},isNumberColumnEnabled:{default:!1},layout:{default:"default"},localId:{default:""},width:{default:null},__autoSize:{default:!1}},selectable:!0,isolating:!0,tableRole:"table"}),Q=(0,o("2ZyjG").createPMNodeSpecFactory)({content:"tableRow+",marks:"unsupportedMark unsupportedNodeAttribute",group:"block",attrs:{displayMode:{default:null},isNumberColumnEnabled:{default:!1},layout:{default:"default"},localId:{default:""},width:{default:null},__autoSize:{default:!1}},selectable:!0,isolating:!0,tableRole:"table"}),ee=(0,o("2ZyjG").createPMNodeSpecFactory)({content:"(paragraph | panel | blockquote | orderedList | bulletList | rule | heading | codeBlock | mediaSingle | mediaGroup | decisionList | taskList | blockCard | embedCard | extension | nestedExpand | unsupportedBlock)+",marks:"alignment unsupportedMark unsupportedNodeAttribute dataConsumer fragment",attrs:{colspan:{default:1},rowspan:{default:1},colwidth:{default:null},background:{default:null},localId:{default:null}},selectable:!1,isolating:!0,tableRole:"cell"}),et=(0,o("2ZyjG").createPMNodeSpecFactory)({content:"(paragraph | panel | blockquote | orderedList | bulletList | rule | heading | codeBlock | mediaSingle | mediaGroup | decisionList | taskList | blockCard | embedCard | extension | nestedExpand | unsupportedBlock | table)+",marks:"alignment unsupportedMark unsupportedNodeAttribute dataConsumer fragment",attrs:{colspan:{default:1},rowspan:{default:1},colwidth:{default:null},background:{default:null},localId:{default:null}},selectable:!1,isolating:!0,tableRole:"cell"}),er=(0,o("2ZyjG").createPMNodeSpecFactory)({content:"(paragraph | panel | blockquote | orderedList | bulletList | rule | heading | codeBlock | mediaSingle | mediaGroup | decisionList | taskList | blockCard | embedCard | extension | nestedExpand)+",marks:"alignment unsupportedMark unsupportedNodeAttribute dataConsumer fragment",attrs:{colspan:{default:1},rowspan:{default:1},colwidth:{default:null},background:{default:null},localId:{default:null}},selectable:!1,isolating:!0,tableRole:"header_cell"}),ei=(0,o("2ZyjG").createPMNodeSpecFactory)({content:"(paragraph | panel | blockquote | orderedList | bulletList | rule | heading | codeBlock | mediaSingle | mediaGroup | decisionList | taskList | blockCard | embedCard | extension | nestedExpand | table)+",marks:"alignment unsupportedMark unsupportedNodeAttribute dataConsumer fragment",attrs:{colspan:{default:1},rowspan:{default:1},colwidth:{default:null},background:{default:null},localId:{default:null}},selectable:!1,isolating:!0,tableRole:"header_cell"}),en=(0,o("2ZyjG").createPMNodeSpecFactory)({content:"(tableCell | tableHeader)+",marks:"unsupportedMark unsupportedNodeAttribute",attrs:{localId:{default:null}},selectable:!1,tableRole:"row"}),eo=(0,o("2ZyjG").createPMNodeSpecFactory)({content:"(tableCell | tableHeader)+",marks:"unsupportedMark unsupportedNodeAttribute",attrs:{localId:{default:null}},selectable:!1,tableRole:"row"}),es=(0,o("2ZyjG").createPMNodeSpecFactory)({content:"inline*",marks:"_",attrs:{localId:{default:""},state:{default:"TODO"}},selectable:!1,defining:!0}),ea=(0,o("2ZyjG").createPMNodeSpecFactory)({content:"(taskItem | unsupportedBlock | blockTaskItem)+ (taskItem | taskList | unsupportedBlock | blockTaskItem)*",marks:"unsupportedMark unsupportedNodeAttribute",group:"block",attrs:{localId:{default:""}},selectable:!1,defining:!0}),el=(0,o("2ZyjG").createPMNodeSpecFactory)({group:"inline"});(0,o("2ZyjG").createPMNodeSpecFactory)({group:"inline"}),(0,o("2ZyjG").createPMNodeSpecFactory)({group:"inline"}),(0,o("2ZyjG").createPMNodeSpecFactory)({});let ec=(0,o("2ZyjG").createPMNodeSpecFactory)({group:"block",atom:!0,attrs:{originalValue:{default:{}}},selectable:!0}),eu=(0,o("2ZyjG").createPMNodeSpecFactory)({group:"inline",inline:!0,attrs:{originalValue:{default:{}}},selectable:!0});e.exports.blockCard=r,e.exports.blockquote=i,e.exports.blockquoteLegacy=n,e.exports.blockTaskItem=s,e.exports.bodiedExtension=a,e.exports.bodiedSyncBlock=l,e.exports.bulletList=c,e.exports.caption=u,e.exports.codeBlock=d,e.exports.confluenceJiraIssue=p,e.exports.confluenceUnsupportedBlock=h,e.exports.confluenceUnsupportedInline=f,e.exports.date=m,e.exports.decisionItem=g,e.exports.decisionList=y,e.exports.doc=v,e.exports.embedCard=x,e.exports.emoji=b,e.exports.expand=E,e.exports.extension=S,e.exports.extensionFrameStage0=w,e.exports.hardBreak=k,e.exports.heading=_,e.exports.image=j,e.exports.inlineCard=M,e.exports.inlineExtensionWithMarks=I,e.exports.layoutColumn=A,e.exports.layoutSection=O,e.exports.layoutSectionFull=T,e.exports.layoutSectionWithSingleColumnStage0=C,e.exports.listItem=R,e.exports.listItemWithNestedDecisionStage0=N,e.exports.media=F,e.exports.mediaGroup=P,e.exports.mediaInline=D,e.exports.mediaSingle=L,e.exports.mediaSingleCaption=U,e.exports.mediaSingleFull=B,e.exports.mediaSingleWidthType=z,e.exports.mention=G,e.exports.multiBodiedExtensionStage0=q,e.exports.nestedExpand=$,e.exports.orderedList=W,e.exports.panel=H,e.exports.paragraph=J,e.exports.placeholder=V,e.exports.rule=Z,e.exports.status=K,e.exports.syncBlock=X,e.exports.table=Y,e.exports.tableWithNestedTable=Q,e.exports.tableCell=ee,e.exports.tableCellWithNestedTable=et,e.exports.tableHeader=er,e.exports.tableHeaderWithNestedTable=ei,e.exports.tableRow=en,e.exports.tableRowWithNestedTable=eo,e.exports.taskItem=es,e.exports.taskList=ea,e.exports.text=el,e.exports.unsupportedBlock=ec,e.exports.unsupportedInline=eu}),s("fO7hX",function(e,t){let r=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,e=>{let t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}),i=!1;e.exports.generateUuid=r,e.exports.uuid={setStatic(e){i=e},generate:()=>i||r()}}),s("aFUXX",function(e,t){var r=o("1oCLl"),i=o("iu6m9");[["White","#000000"],["Light blue","#0C294F"],["Light teal","#0C343B"],["Light green","#052E21"],["Light yellow","#484123"],["Light red","#441C13"],["Light purple","#282249"],["Light gray","#202328"],["Blue","#0B3165"],["Teal","#044853"],["Green","#053927"],["Yellow","#6F5C25"],["Red","#582013"],["Purple","#3E327B"],["Gray","#475262"],["Dark blue","#003884"],["Dark teal","#055866"],["Dark green","#044932"],["Dark yellow","#82641C"],["Dark red","#6B2A19"],["Dark purple","#4D38B2"]].map(([e,t])=>{var r,i;return r=e,i=t,`
  &[colorname="${r}"] {
    background-color: ${i} !important; // !important to override default style color
  }
  `}).join("\n"),e.exports.akEditorFullPageDefaultFontSize=16,e.exports.akEditorFullPageDenseFontSize=13,e.exports.akEditorSubtleAccent="var(--ds-background-accent-gray-subtler, #DDDEE1)",e.exports.akEditorBlockquoteBorderColor="var(--ds-border, #0B120E24)",e.exports.akEditorDeleteBorder="var(--ds-border-danger, #E2483D)",e.exports.akEditorDeleteIconColor="var(--ds-icon-danger, #C9372C)",e.exports.akEditorCustomIconSize=20,e.exports.akEditorSelectedBorderColor="var(--ds-border-selected, #1868DB)",e.exports.akEditorSelectedBorderSize=1,e.exports.akEditorSelectedBorderBoldSize=2,e.exports.akEditorSelectedBorder="1px solid var(--ds-border-selected, #1868DB)",e.exports.akEditorSelectedBoxShadow="0 0 0 1px var(--ds-border-selected, #1868DB)",e.exports.akEditorUnitZIndex=1,e.exports.akEditorShadowZIndex=2,e.exports.akEditorStickyHeaderZIndex=11,e.exports.akEditorSmallZIndex=12,e.exports.akEditorGridLineZIndex=2,e.exports.akEditorMenuZIndex=500,e.exports.akEditorFloatingPanelZIndex=400,e.exports.akEditorFloatingDialogZIndex=510,e.exports.akEditorTableCellOnStickyHeaderZIndex=505,e.exports.akEditorFloatingOverlapPanelZIndex=405,e.exports.akEditorTableToolbarSize=11,e.exports.akEditorTableBorder="var(--ds-background-accent-gray-subtler, #DDDEE1)",e.exports.akEditorTableToolbar="var(--ds-background-accent-gray-subtlest, #F0F1F2)",e.exports.akEditorTableHeaderCellBackground="#F1F2F4",e.exports.akEditorTableBorderSelected="var(--ds-border-focused, #4688EC)",e.exports.akEditorFullPageMaxWidth=680,e.exports.akEditorDefaultLayoutWidth=760,e.exports.akEditorWideLayoutWidth=960,e.exports.akEditorFullWidthLayoutWidth=1800,e.exports.akEditorMaxWidthLayoutWidth=4e3,e.exports.akEditorMaxLayoutWidth=4e3,e.exports.akEditorTableNumberColumnWidth=42,e.exports.akEditorBreakoutPadding=96,e.exports.akEditorGutterPadding=32,e.exports.akEditorGutterPaddingDynamic=()=>(0,o("dh538").fg)("platform_editor_controls_increase_full_page_gutter")&&(0,i.editorExperiment)("platform_editor_controls","variant1")?72:52,e.exports.akEditorGutterPaddingReduced=24,e.exports.akEditorFullPageNarrowBreakout=600,e.exports.akEditorMobileBreakoutPoint=720,e.exports.akEditorTableCellMinWidth=48,e.exports.akEditorTableLegacyCellMinWidth=128,e.exports.akEditorMediaResizeHandlerPaddingWide=12,e.exports.akEditorMediaResizeHandlerPadding=4,e.exports.akEditorSwoopCubicBezier="cubic-bezier(0.15, 1, 0.3, 1)",e.exports.gridMediumMaxWidth=1024,e.exports.breakoutWideScaleRatio=1.33,e.exports.akEditorCalculatedWideLayoutWidthSmallViewport=905,e.exports.akEditorCalculatedWideLayoutWidth=1011,e.exports.akRichMediaResizeZIndex=99,e.exports.akLayoutGutterOffset=12,e.exports.akEditorLineHeight=1.714,e.exports.akEditorContextPanelWidth=320,e.exports.akEditorTableCellBlanketSelected="rgba(179, 212, 255, 0.3)",e.exports.akEditorTableCellBlanketDeleted="rgba(255, 235, 230, 0.3)",e.exports.akEditorWrappedNodeZIndex=2,e.exports.layoutBreakpointWidth={SMALL:550,MEDIUM:760},e.exports.blockNodesVerticalMargin="0.75rem",e.exports.scaledBlockNodesVerticalMargin="0.75em",e.exports.DEFAULT_EMBED_CARD_WIDTH=680,e.exports.DEFAULT_EMBED_CARD_HEIGHT=480,e.exports.MAX_BROWSER_SCROLLBAR_HEIGHT=20,e.exports.FULL_PAGE_EDITOR_TOOLBAR_HEIGHT=e=>(void 0===e?((0,i.editorExperiment)("platform_editor_toolbar_aifc",!0)||(0,o("dh538").fg)("platform_editor_ai_aifc_streaming"))&&(0,r.expValEquals)("platform_editor_toolbar_aifc_patch_3","isEnabled",!0):e&&(0,r.expValEquals)("platform_editor_toolbar_aifc_patch_3","isEnabled",!0))?"44px":((0,i.editorExperiment)("platform_editor_controls","variant1",{exposure:!0}),"var(--ds-space-500, 40px)"),e.exports.akEditorFullPageToolbarHeight=40,e.exports.akEditorSelectedNodeClassName="ak-editor-selected-node",e.exports.editorFontSize=({theme:e})=>e&&e.baseFontSize?e.baseFontSize:14,e.exports.relativeFontSizeToBase16=e=>{if("string"==typeof e&&(e=parseInt(e)),isNaN(e))throw Error(`Invalid font size: '${e}'`);return`${e/16}rem`},e.exports.relativeSizeToBaseFontSize=e=>`calc(${e} * var(--ak-editor-base-font-size) / 16)`,e.exports.VIEWPORT_SIZES={a4KMonitor:{width:3440,height:1440},laptopHiDPI:{width:1440,height:900},laptopMDPI:{width:1280,height:800},tabletL:{width:1024,height:1366},tabletS:{width:768,height:1024},mobileM:{width:414,height:736},mobileS:{width:375,height:667},mobileXS:{width:320,height:568}},e.exports.akEditorMobileMaxWidth=0,e.exports.participantColors=[{textColor:"var(--ds-text-inverse, #FFFFFF)",backgroundColor:"var(--ds-background-accent-red-bolder, #C9372C)",svgBackgroundColor:"var(--ds-background-accent-red-subtler, #FFD5D2)"},{textColor:"var(--ds-text-inverse, #FFFFFF)",backgroundColor:"var(--ds-background-accent-blue-bolder, #1868DB)",svgBackgroundColor:"var(--ds-background-accent-blue-subtler, #CFE1FD)"},{textColor:"var(--ds-text-inverse, #FFFFFF)",backgroundColor:"var(--ds-background-accent-green-bolder, #1F845A)",svgBackgroundColor:"var(--ds-background-accent-green-subtler, #BAF3DB)"},{textColor:"var(--ds-text-inverse, #FFFFFF)",backgroundColor:"var(--ds-background-accent-yellow-bolder, #946F00)",svgBackgroundColor:"var(--ds-background-accent-yellow-subtler, #F5E989)"},{textColor:"var(--ds-text-inverse, #FFFFFF)",backgroundColor:"var(--ds-background-accent-purple-bolder, #964AC0)",svgBackgroundColor:"var(--ds-background-accent-purple-subtler, #EED7FC)"},{textColor:"var(--ds-text-inverse, #FFFFFF)",backgroundColor:"var(--ds-background-accent-magenta-bolder, #AE4787)",svgBackgroundColor:"var(--ds-background-accent-magenta-subtler, #FDD0EC)"},{textColor:"var(--ds-text-inverse, #FFFFFF)",backgroundColor:"var(--ds-background-accent-teal-bolder, #227D9B)",svgBackgroundColor:"var(--ds-background-accent-teal-subtler, #C6EDFB)"},{textColor:"var(--ds-text-inverse, #FFFFFF)",backgroundColor:"var(--ds-background-accent-orange-bolder, #BD5B00)",svgBackgroundColor:"var(--ds-background-accent-orange-subtler, #FCE4A6)"},{textColor:"var(--ds-text-inverse, #FFFFFF)",backgroundColor:"var(--ds-background-accent-lime-bolder, #5B7F24)",svgBackgroundColor:"var(--ds-background-accent-lime-subtler, #D3F1A7)"},{textColor:"var(--ds-text-inverse, #FFFFFF)",backgroundColor:"var(--ds-background-accent-gray-bolder, #6B6E76)",svgBackgroundColor:"var(--ds-background-accent-gray-subtler, #DDDEE1)"},{textColor:"var(--ds-text-accent-gray-bolder, #1E1F21)",backgroundColor:"var(--ds-background-accent-blue-subtle, #669DF1)",svgBackgroundColor:"var(--ds-background-accent-blue-subtlest, #E9F2FE)"},{textColor:"var(--ds-text-accent-gray-bolder, #1E1F21)",backgroundColor:"var(--ds-background-accent-red-subtle, #F87168)",svgBackgroundColor:"var(--ds-background-accent-red-subtlest, #FFECEB)"},{textColor:"var(--ds-text-accent-gray-bolder, #1E1F21)",backgroundColor:"var(--ds-background-accent-orange-subtle, #FCA700)",svgBackgroundColor:"var(--ds-background-accent-orange-subtlest, #FFF5DB)"},{textColor:"var(--ds-text-accent-gray-bolder, #1E1F21)",backgroundColor:"var(--ds-background-accent-yellow-subtle, #EED12B)",svgBackgroundColor:"var(--ds-background-accent-yellow-subtlest, #FEF7C8)"},{textColor:"var(--ds-text-accent-gray-bolder, #1E1F21)",backgroundColor:"var(--ds-background-accent-green-subtle, #4BCE97)",svgBackgroundColor:"var(--ds-background-accent-green-subtlest, #DCFFF1)"},{textColor:"var(--ds-text-accent-gray-bolder, #1E1F21)",backgroundColor:"var(--ds-background-accent-teal-subtle, #6CC3E0)",svgBackgroundColor:"var(--ds-background-accent-teal-subtlest, #E7F9FF)"},{textColor:"var(--ds-text-accent-gray-bolder, #1E1F21)",backgroundColor:"var(--ds-background-accent-purple-subtle, #C97CF4)",svgBackgroundColor:"var(--ds-background-accent-purple-subtlest, #F8EEFE)"},{textColor:"var(--ds-text-accent-gray-bolder, #1E1F21)",backgroundColor:"var(--ds-background-accent-magenta-subtle, #E774BB)",svgBackgroundColor:"var(--ds-background-accent-magenta-subtlest, #FFECF8)"}]}),s("dZ8uq",function(e,t){var r=o("8Qxmq");e.exports.expValEqualsNoExposure=function(e,t,i,n=null){return(0,r.expValEqualsInternal)(e,t,i,n,!1)}}),s("fnia6",function(t,r){e(t.exports,"default",()=>i),e(t.exports,"EmojiPicker",()=>o("lGf1F").default),o("dwp40"),o("hzQni");var i=o("lGf1F").default}),s("etuMO",function(e,r){var i,n=o("42omo"),s=((i=s||{}).INITIAL="INITIAL",i.FALLBACK="FALLBACK",i.EMOJI="EMOJI",i);let a=({emojiProvider:e,emojiId:r,showTooltip:i=!1,customFallback:s,fitToHeight:a=o("fhsiz").defaultEmojiHeight,optimistic:l=!1,optimisticImageURL:c,editorEmoji:u,pageTitleEmoji:d=!1,placeholderXcss:p,onEmojiLoadSuccess:h,onEmojiLoadFail:f})=>{let{shortName:m,id:g,fallback:y}=r,[v,x]=(0,n.useState)(),[b,E]=(0,n.useState)(!1),[S,w]=(0,n.useState)(!1),[k,_]=(0,n.useState)(),j=(0,n.useCallback)(async(e,t,r=!1)=>{if(!e.fetchByEmojiId){x(void 0);let e="missing fetchByEmojiId interface";f&&f(t.id,e),(0,o("7ZWaV").sampledUfoRenderedEmoji)(t).failure({metadata:{reason:e,source:"ResourcedEmojiComponent"}})}let i=e.fetchByEmojiId(t,r);(0,o("7ZWaV").sampledUfoRenderedEmoji)(t).mark(o("aGYoD").UfoEmojiTimings.METADATA_START),(0,o("40rXS").isPromise)(i)?(E(!1),i.then(e=>{if(x(e),!e){let e="failed to find";f&&f(t.id,e),(0,o("7ZWaV").sampledUfoRenderedEmoji)(t).failure({metadata:{reason:e,source:"ResourcedEmojiComponent",data:{emoji:{id:t.id,shortName:t.shortName}}}})}}).catch(()=>{x(void 0);let e="failed to load";f&&f(t.id,e),(0,o("7ZWaV").sampledUfoRenderedEmoji)(t).failure({metadata:{reason:e,source:"ResourcedEmojiComponent",data:{emoji:{id:t.id,shortName:t.shortName}}}})}).finally(()=>{E(!0),(0,o("7ZWaV").sampledUfoRenderedEmoji)(t).mark(o("aGYoD").UfoEmojiTimings.METADATA_END)})):(x(i),E(!0),(0,o("7ZWaV").sampledUfoRenderedEmoji)(t).mark(o("aGYoD").UfoEmojiTimings.METADATA_END))},[f]);(0,n.useEffect)(()=>{r&&((0,o("7ZWaV").hasUfoMarked)((0,o("7ZWaV").sampledUfoRenderedEmoji)(r),o("aGYoD").UfoEmojiTimings.FMP_END)||(0,o("7ZWaV").sampledUfoRenderedEmoji)(r).markFMP())},[r]),(0,n.useMemo)(()=>{k&&r&&j(k,r,l)},[k,r,l,j]),(0,n.useEffect)(()=>{Promise.resolve(e).then(e=>{_(e)})},[e]);let M=(0,n.useMemo)(()=>v||b||c?!v&&b||S?"FALLBACK":"EMOJI":"INITIAL",[v,b,c,S]),I=(0,n.useMemo)(()=>{if(d&&c&&(0,o("dh538").fg)("platform_emoji_prevent_img_src_changing"))return{id:g,shortName:m,fallback:y,type:"",category:"",searchable:!0,representation:{height:a||o("fhsiz").defaultEmojiHeight,width:a||o("fhsiz").defaultEmojiHeight,imagePath:c}};if(c)if(!(v&&((0,o("40rXS").isImageRepresentation)(v.representation)||(0,o("40rXS").isMediaRepresentation)(v?.representation))))return{id:g,shortName:m,fallback:y,type:"",category:"",representation:{height:a||o("fhsiz").defaultEmojiHeight,width:a||o("fhsiz").defaultEmojiHeight,imagePath:c},searchable:!0};else{let{width:e,height:t}=v.representation;return{...v,representation:{width:e,height:t,imagePath:c}}}return v},[v,c,y,a,g,m,d]),A=(0,n.useCallback)(e=>{w(!0);let t="load error";f&&f(e.id,t),(0,o("7ZWaV").sampledUfoRenderedEmoji)(e).failure({metadata:{reason:t,source:"ResourcedEmojiComponent",emojiId:e.id}})},[f]),O=(0,n.useCallback)(e=>{h&&h(e.id)},[h]),T=(0,o("dh538").fg)("platform_emoji_width_auto_fittoheight")?!!a:!v;return t(n).createElement(o("jYWS5").EmojiCommonProvider,{emojiProvider:k},t(n).createElement("span",{"data-emoji-id":g,"data-emoji-short-name":m,"data-emoji-text":y||m,"data-ssr-placeholder":`emoji-${g??m}`,"data-ssr-placeholder-replace":`emoji-${g??m}`},"INITIAL"===M&&t(n).createElement(o("eTjjM").default,{shortName:m,showTooltip:i,size:a||o("fhsiz").defaultEmojiHeight,loading:!0,xcss:p}),"FALLBACK"===M&&t(n).createElement(t(n).Fragment,null,s||y||m),"EMOJI"===M&&I&&t(n).createElement(o("8Yr6I").default,{emoji:I,onLoadError:A,onLoadSuccess:O,showTooltip:i,fitToHeight:a,autoWidth:T,editorEmoji:u})))};e.exports.default=e=>{let{emojiId:r,optimisticImageURL:i}=e;return(0,n.useEffect)(()=>{if(r)return(0,o("7ZWaV").sampledUfoRenderedEmoji)(r).start({samplingRate:o("fhsiz").SAMPLING_RATE_EMOJI_RENDERED_EXP}),o("7ZWaV").ufoExperiences["emoji-rendered"].getInstance(r.id||r.shortName).addMetadata({source:"ResourcedEmoji",emojiId:r.id,isOptimisticImageURL:!!i}),()=>{(0,o("7ZWaV").sampledUfoRenderedEmoji)(r).abort({metadata:{source:"ResourcedEmoji",reason:"unmount"}})}},[r,i]),t(n).createElement(o("jPINf").UfoErrorBoundary,{experiences:[o("7ZWaV").ufoExperiences["emoji-rendered"].getInstance(e.emojiId.id||e.emojiId.shortName)]},t(n).createElement(a,e))}}),s("eMprr",function(e,t){e.exports.buildCredentials=e=>e&&e.omitCredentials?"omit":"include"}),s("hzQni",function(e,t){e.exports.AbstractResource=class{subscribe(e){this.listeners.add(e),this.lastResult&&e.result(this.lastResult)}unsubscribe(e){this.listeners.delete(e)}notifyResult(e){this.listeners.forEach(t=>{t.result(e)})}notifyError(e){this.listeners.forEach(t=>{t.error&&t.error(e)})}notifyInfo(e){this.listeners.forEach(t=>{t.info&&t.info(e)})}notifyNotReady(){this.listeners.forEach(e=>{e.notReady&&e.notReady()})}constructor(){this.lastResult=void 0,this.listeners=new Set}}}),s("eu2js",function(t,r){e(t.exports,"default",()=>i);function i(e){if("undefined"==typeof window)return!1;try{var t=window[e],r="__storage_test__";return t.setItem(r,r),t.removeItem(r),!0}catch(e){return e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&t&&0!==t.length}}}),s("dAAeA",function(e,t){var r=o("majy4");let i={streams:new(0,o("9trs7").LRUMap)(1e3),stateDeferreds:new Map,eventEmitter:new(0,r.EventEmitter2)};e.exports.mediaState=i}),s("3HtSd",function(e,t){e.exports.isClientBasedAuth=function(e){return!!e.clientId},e.exports.authToOwner=e=>e.asapIssuer?e:{id:e.clientId,baseUrl:e.baseUrl,token:e.token}}),s("9zykx",function(e,t){var r,i=((r={}).Sha256="sha256",r);e.exports.ChunkHashAlgorithm=i}),s("4HHlm",function(e,t){let r={"api.media.atlassian.com":"media-cdn.atlassian.com","media.staging.atl-paas.net":"media-cdn.stg.atlassian.com"};function i(){return(0,o("57XaE").isCommercial)()&&!(0,o("T9xHm").isIsolatedCloud)()&&(0,o("dh538").fg)("platform_media_cdn_delivery")&&!(0,o("deNRp").isPathBasedEnabled)()}e.exports.isCDNEnabled=i,e.exports.mapToMediaCdnUrl=function(e,t){let n=t?.length??0;if(!i()||n>7e3)return e;if((0,o("dh538").fg)("platform_media_cdn_delivery")&&(0,o("dh538").fg)("platform_media_cdn_single_host"))try{let t=new URL(e),i=r[t.host];if(!i)return e;return t.host=i,t.toString()}catch(e){}return e}}),s("4lI5c",function(e,t){o("5vzpD");var r=o("3HtSd");let i=e=>(0,o("2ASLw").isRequestError)(e)&&e.metadata?.statusCode&&e.metadata.statusCode;function n(e){return e instanceof TypeError}let s={traceId:"x-b3-traceid",spanId:"x-b3-spanid"},a=e=>e?{[s.traceId]:e.traceId,[s.spanId]:e.spanId}:{},l=e=>{let t=i(e);return n(e)||!!t&&t>=500},c={startTimeoutInMs:1e3,maxAttempts:5,factor:2};async function u(e,t,r={}){let i,{startTimeoutInMs:n,maxAttempts:s,factor:a,shouldRetryError:d=l}={...c,...r},p=0,h=n,f=async()=>{var e;await (e=h,new Promise(t=>setTimeout(t,e))),h*=a,p+=1};for(;p<s;)try{return await e()}catch(e){if(i=e,e instanceof Error&&"request_cancelled"===e.message||e&&"AbortError"===e.name)throw new(0,o("2ASLw").RequestError)("clientAbortedRequest",t,e);if(!d(e))throw e;await f()}if((0,o("2ASLw").isRequestError)(i))throw function(e,t){let{reason:r,metadata:i,innerError:n}=e;return new(0,o("2ASLw").RequestError)(r,{...i,...t},n)}(i,{attempts:p,clientExhaustedRetries:!0});throw new(0,o("2ASLw").RequestError)("serverUnexpectedError",{...t,attempts:p,clientExhaustedRetries:!0},i)}function d(e){let{headers:t}=e;return{mediaRegion:t.get("x-media-region")||"unknown",mediaEnv:t.get("x-media-env")||"unknown"}}e.exports.isFetchNetworkError=n,e.exports.extendTraceContext=e=>e?{...e,spanId:e?.spanId||(0,o("fCrf0").getRandomTelemetryId)()}:void 0,e.exports.createUrl=function(e,{params:t,auth:r}){let i=new URL(e,r?.baseUrl),n=r&&(0,o("9Bvtr").mapAuthToQueryParameters)(r)||{};return Object.entries({...t,...n}).filter(([e,t])=>null!=t).forEach(e=>{i.searchParams.set(...e)}),i.searchParams.sort(),i.toString()},e.exports.extendHeaders=function(e,t,i){if(t||i||e)return{...e??{},...!t?{}:(0,r.isClientBasedAuth)(t)?{"X-Client-Id":t.clientId,Authorization:`Bearer ${t.token}`}:{"X-Issuer":t.asapIssuer,Authorization:`Bearer ${t.token}`},...a(i)}},e.exports.createMapResponseToJson=function(e){return async t=>{try{return await t.json()}catch(r){throw new(0,o("2ASLw").RequestError)("serverInvalidBody",{...e,...d(t),statusCode:t.status},r instanceof Error?r:void 0)}}},e.exports.createMapResponseToBlob=function(e){return async t=>{try{return await t.blob()}catch(r){throw new(0,o("2ASLw").RequestError)("serverInvalidBody",{...e,...d(t),statusCode:t.status},r instanceof Error?r:void 0)}}},e.exports.defaultShouldRetryError=l,e.exports.fetchRetry=u,e.exports.createProcessFetchResponse=function(e){return t=>{if(t.ok||t.status<400)return t;throw function(e,t){let{status:r}=t,i=function(e){switch(e){case 400:return"serverBadRequest";case 401:return"serverUnauthorized";case 403:return"serverForbidden";case 404:return"serverNotFound";case 422:return"serverUnprocessableEntity";case 423:return"serverEntityLocked";case 429:return"serverRateLimited";case 500:return"serverInternalError";case 502:return"serverBadGateway";default:return"serverUnexpectedError"}}(r);return new(0,o("2ASLw").RequestError)(i,{...e,...d(t),statusCode:r})}(e,t)}}}),s("deNRp",function(e,t){let r="/media-api";function i(){let e=(0,o("dP5kx").default)()?.location?.hostname==="localhost";return(0,o("dh538").fg)("platform_media_path_based_route")&&!e}e.exports.isPathBasedEnabled=i,e.exports.mapToPathBasedUrl=function(e){if(i()){let t=new URL(e);t.pathname.startsWith(r)||(t.pathname=`${r}${t.pathname}`);let i=(0,o("dP5kx").default)()?.location;if(!i){let e=new URL(t.toString());return`${e.pathname}${e.search}${e.hash}`}return t.host=i.host,t.toString()}return e},e.exports.mapRetryUrlToPathBasedUrl=function(e){let t=new URL(e);t.host=(0,o("dP5kx").default)()?.location.host??"";let i=t.pathname;return i.endsWith("/cdn")&&(t.pathname=i.replace("/cdn","")),t.pathname.startsWith(r)||(t.pathname=`${r}${t.pathname}`),t}}),s("eiASo",function(e,t){class r extends o("dIgeg").BaseMediaClientError{get attributes(){let{reason:e,metadata:{id:t,collectionName:r,occurrenceKey:i,traceContext:n}}=this;return{reason:e,id:t,collectionName:r,occurrenceKey:i,...n&&{metadata:{traceContext:n}}}}constructor(e,t){super(e,t,void 0),this.id=void 0,this.id=t.id}}e.exports.FileFetcherError=r}),s("2e4BA",function(e,t){var r=e.exports&&e.exports.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},i=o("4iRIL"),n=function(e){function t(t,r){e.call(this),this.promise=t,this.scheduler=r}return r(t,e),t.create=function(e,r){return new t(e,r)},t.prototype._subscribe=function(e){var t=this,r=this.promise,n=this.scheduler;if(null==n)this._isScalar?e.closed||(e.next(this.value),e.complete()):r.then(function(r){t.value=r,t._isScalar=!0,e.closed||(e.next(r),e.complete())},function(t){e.closed||e.error(t)}).then(null,function(e){i.root.setTimeout(function(){throw e})});else if(this._isScalar){if(!e.closed)return n.schedule(s,0,{value:this.value,subscriber:e})}else r.then(function(r){t.value=r,t._isScalar=!0,e.closed||e.add(n.schedule(s,0,{value:r,subscriber:e}))},function(t){e.closed||e.add(n.schedule(a,0,{err:t,subscriber:e}))}).then(null,function(e){i.root.setTimeout(function(){throw e})})},t}(o("YgydF").Observable);function s(e){var t=e.value,r=e.subscriber;r.closed||(r.next(t),r.complete())}function a(e){var t=e.err,r=e.subscriber;r.closed||r.error(t)}e.exports.PromiseObservable=n}),s("loLAD",function(e,t){var r=e.exports&&e.exports.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},i=function(e){function t(t,r,i){e.call(this),this.start=t,this._count=r,this.scheduler=i}return r(t,e),t.create=function(e,r,i){return void 0===e&&(e=0),void 0===r&&(r=0),new t(e,r,i)},t.dispatch=function(e){var t=e.start,r=e.index,i=e.count,n=e.subscriber;if(r>=i)return void n.complete();n.next(t),n.closed||(e.index=r+1,e.start=t+1,this.schedule(e))},t.prototype._subscribe=function(e){var r=0,i=this.start,n=this._count,o=this.scheduler;if(o)return o.schedule(t.dispatch,0,{index:r,count:n,start:i,subscriber:e});for(;;){if(r++>=n){e.complete();break}if(e.next(i++),e.closed)break}},t}(o("YgydF").Observable);e.exports.RangeObservable=i}),s("jbEVV",function(e,t){var r=e.exports&&e.exports.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},i=function(e){function t(t){e.call(this),this.errors=t;var r=Error.call(this,t?t.length+" errors occurred during unsubscription:\n  "+t.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"");this.name=r.name="UnsubscriptionError",this.stack=r.stack,this.message=r.message}return r(t,e),t}(Error);e.exports.UnsubscriptionError=i}),s("bEhXH",function(t,r){var i;e(t.exports,"isFunction",()=>i,e=>i=e),i=function(e){return"function"==typeof e}}),s("1GCxN",function(t,r){e(t.exports,"rxSubscriber",()=>i,e=>i=e);var i,n=o("4iRIL").root.Symbol;i="function"==typeof n&&"function"==typeof n.for?n.for("rxSubscriber"):"@@rxSubscriber"}),s("1SUM9",function(t,r){var i;e(t.exports,"isObject",()=>i,e=>i=e),i=function(e){return null!=e&&"object"==typeof e}}),s("lLPMj",function(e,t){var r=e.exports&&e.exports.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},i=function(e){function t(t,r,i){e.call(this),this.parent=t,this.outerValue=r,this.outerIndex=i,this.index=0}return r(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(o("axeml").Subscriber);e.exports.InnerSubscriber=i}),s("1v1oG",function(t,r){var i,n,s;e(t.exports,"observable",()=>s,e=>s=e),"function"==typeof(n=o("4iRIL").root.Symbol)?n.observable?i=n.observable:(i=n("observable"),n.observable=i):i="@@observable",s=i}),s("kmYd0",function(t,r){var i;e(t.exports,"empty",()=>i,e=>i=e),i={closed:!0,next:function(e){},error:function(e){throw e},complete:function(){}}}),s("2RoPK",function(t,r){var i;e(t.exports,"isArrayLike",()=>i,e=>i=e),i=function(e){return e&&"number"==typeof e.length}}),s("lggQy",function(t,r){var i;e(t.exports,"isPromise",()=>i,e=>i=e),i=function(e){return e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}}),s("ufz07",function(e,t){var r=e.exports&&e.exports.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},i=o("4iRIL"),n=o("YgydF"),s=o("kNaF1"),a=function(e){function t(t,r){if(e.call(this),this.scheduler=r,null==t)throw Error("iterator cannot be null.");this.iterator=function(e){var t=e[s.iterator];if(!t&&"string"==typeof e)return new l(e);if(!t&&void 0!==e.length)return new c(e);if(!t)throw TypeError("object is not iterable");return e[s.iterator]()}(t)}return r(t,e),t.create=function(e,r){return new t(e,r)},t.dispatch=function(e){var t=e.index,r=e.hasError,i=e.iterator,n=e.subscriber;if(r)return void n.error(e.error);var o=i.next();if(o.done)return void n.complete();if(n.next(o.value),e.index=t+1,n.closed){"function"==typeof i.return&&i.return();return}this.schedule(e)},t.prototype._subscribe=function(e){var r=this.iterator,i=this.scheduler;if(i)return i.schedule(t.dispatch,0,{index:0,iterator:r,subscriber:e});for(;;){var n=r.next();if(n.done){e.complete();break}if(e.next(n.value),e.closed){"function"==typeof r.return&&r.return();break}}},t}(n.Observable);e.exports.IteratorObservable=a;var l=function(){function e(e,t,r){void 0===t&&(t=0),void 0===r&&(r=e.length),this.str=e,this.idx=t,this.len=r}return e.prototype[s.iterator]=function(){return this},e.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.str.charAt(this.idx++)}:{done:!0,value:void 0}},e}(),c=function(){function e(e,t,r){var n,o,s;void 0===t&&(t=0),void 0===r&&(r=isNaN(n=+e.length)?0:0!==n&&"number"==typeof(o=n)&&i.root.isFinite(o)?(n=(0==(s=+n)||isNaN(s)?s:s<0?-1:1)*Math.floor(Math.abs(n)))<=0?0:n>u?u:n:n),this.arr=e,this.idx=t,this.len=r}return e.prototype[s.iterator]=function(){return this},e.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.arr[this.idx++]}:{done:!0,value:void 0}},e}(),u=0x1fffffffffffff}),s("lCIqm",function(e,t){var r=e.exports&&e.exports.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},i=o("YgydF"),n=o("5OUhL"),s=o("b5CQv"),a=function(e){function t(t,r){e.call(this),this.arrayLike=t,this.scheduler=r,r||1!==t.length||(this._isScalar=!0,this.value=t[0])}return r(t,e),t.create=function(e,r){var i=e.length;return 0===i?new s.EmptyObservable:1===i?new n.ScalarObservable(e[0],r):new t(e,r)},t.dispatch=function(e){var t=e.arrayLike,r=e.index,i=e.length,n=e.subscriber;if(!n.closed){if(r>=i)return void n.complete();n.next(t[r]),e.index=r+1,this.schedule(e)}},t.prototype._subscribe=function(e){var r=this.arrayLike,i=this.scheduler,n=r.length;if(i)return i.schedule(t.dispatch,0,{arrayLike:r,index:0,length:n,subscriber:e});for(var o=0;o<n&&!e.closed;o++)e.next(r[o]);e.complete()},t}(i.Observable);e.exports.ArrayLikeObservable=a}),s("6rtaQ",function(e,t){let r=e=>["image/bmp","image/x-windows-bmp","application/dicom","image/gif","image/jpeg","image/jpg","image/jp_","application/jpg","application/x-jpg","image/png","application/png","application/x-png","application/vnd.adobe.photoshop","image/vnd.adobe.photoshop","image/photoshop","image/x-photoshop","image/psd","application/photoshop","application/psd","zz-application/zz-winassoc-psd","image/tiff","image/x-tif","image/x-tiff","application/tif","application/x-tif","application/tiff","application/x-tiff","image/svg+xml","image/heif","image/heif-sequence","image/heic","image/heic-sequence"].indexOf(e.toLowerCase())>-1,i=e=>["application/pdf","application/x-pdf","application/acrobat","applications/vnd.pdf","text/pdf","text/x-pdf","application/vnd.adobe.illustrator","application/vnd.ms-office","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.wordprocessingml.template","application/vnd.ms-word.document.macroenabled.12","application/vnd.ms-word.template.macroenabled.12","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.openxmlformats-officedocument.spreadsheetml.template","application/vnd.ms-excel.sheet.macroenabled.12","application/vnd.ms-excel.template.macroenabled.12","application/vnd.ms-excel.addin.macroenabled.12","application/vnd.ms-excel.sheet.macroenabled","application/vnd.ms-excel.template.macroenabled","application/vnd.ms-excel.addin.macroenabled","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.presentationml.template","application/vnd.openxmlformats-officedocument.presentationml.slideshow","application/vnd.ms-powerpoint.presentation.macroenabled.12","application/vnd.ms-powerpoint.template.macroenabled.12","application/vnd.ms-powerpoint.slideshow.macroenabled.12","application/vnd.sun.xml.writer","application/vnd.sun.xml.writer.template","application/vnd.sun.xml.draw","application/vnd.sun.xml.draw.template","application/vnd.oasis.opendocument.graphics","application/vnd.oasis.opendocument.presentation","application/x-vnd.oasis.opendocument.presentation","application/vnd.sun.xml.calc","application/vnd.sun.xml.calc.template","application/vnd.oasis.opendocument.spreadsheet","application/x-vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.spreadsheet-template","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.text-template","application/vnd.oasis.opendocument.text-master","application/x-vnd.oasis.opendocument.text","application/x-vnd.oasis.opendocument.text-template","application/x-vnd.oasis.opendocument.text-master","application/vnd.wordperfect","text/csv","text/x-diff","text/x-perl","text/x-python","text/x-ruby","text/rtf","text/richtext","text/plain","application/txt","application/rtf","application/x-rtf","application/postscript"].indexOf(e.toLowerCase())>-1,n=e=>["audio/aac","audio/x-hx-aac-adts","audio/vnd.dolby.dd-raw","audio/aiff","audio/x-aiff","audio/x-monkeys-audio","audio/x-ape","audio/basic","audio/flac","audio/mp4","audio/midi","audio/x-matroska","audio/x-mod","audio/mpeg","audio/ogg","audio/x-ogg","audio/x-pn-realaudio","audio/wav","audio/x-wav","audio/x-ms-wma"].indexOf(e.toLowerCase())>-1,o=e=>["video/3gpp","video/3gpp2","video/x-ms-asf","video/avi","video/msvideo","video/x-msvideo","video/x-dv","video/x-flv","video/m2ts","video/x-m4v","video/x-matroska","video/quicktime","video/mp4","video/mpeg","video/ogg","video/x-ogg","video/webm","video/x-ms-wmv"].indexOf(e.toLowerCase())>-1,s=e=>["binary/octet-stream"].indexOf(e.toLowerCase())>-1;e.exports.isImageMimeTypeSupportedByServer=r,e.exports.isDocumentMimeTypeSupportedByServer=i,e.exports.isAudioMimeTypeSupportedByServer=n,e.exports.isVideoMimeTypeSupportedByServer=o,e.exports.isMimeTypeSupportedByServer=e=>r(e)||i(e)||n(e)||o(e)||s(e)}),s("74JhH",function(e,t){var r=e.exports&&e.exports.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},i=function(e){function t(t,r){e.call(this,t,r),this.scheduler=t,this.work=r}return r(t,e),t.prototype.schedule=function(t,r){return(void 0===r&&(r=0),r>0)?e.prototype.schedule.call(this,t,r):(this.delay=r,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,r){return r>0||this.closed?e.prototype.execute.call(this,t,r):this._execute(t,r)},t.prototype.requestAsyncId=function(t,r,i){return(void 0===i&&(i=0),null!==i&&i>0||null===i&&this.delay>0)?e.prototype.requestAsyncId.call(this,t,r,i):t.flush(this)},t}(o("k8JsH").AsyncAction);e.exports.QueueAction=i}),s("1qr9n",function(e,t){var r=e.exports&&e.exports.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},i=function(e){function t(){e.apply(this,arguments)}return r(t,e),t}(o("iOeLv").AsyncScheduler);e.exports.QueueScheduler=i}),s("lQpfG",function(e,t){var r=e.exports&&e.exports.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},i=function(e){function t(t,r){e.call(this),this.subject=t,this.subscriber=r,this.closed=!1}return r(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var r=t.indexOf(this.subscriber);-1!==r&&t.splice(r,1)}}},t}(o("8v4h5").Subscription);e.exports.SubjectSubscription=i}),s("47xz6",function(e,t){var r=e.exports&&e.exports.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function i(){this.constructor=e}e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},i=function(e){function t(t,r){e.call(this)}return r(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(o("8v4h5").Subscription);e.exports.Action=i}),s("jcSqS",function(e,t){let r=async e=>new Promise((t,r)=>{let i=URL.createObjectURL(e),n=document.createElement("video");n.preload="metadata",n.src=i,n.muted=!0,n.addEventListener("loadedmetadata",function e(){n.removeEventListener("loadedmetadata",e),t({width:n.videoWidth,height:n.videoHeight}),URL.revokeObjectURL(i)}),n.addEventListener("error",()=>{r(Error("failed to load video")),URL.revokeObjectURL(i)})});e.exports.getVideoDimensionsFromBlob=r}),s("2WUwQ",function(e,t){class r extends o("dIgeg").BaseMediaClientError{get attributes(){let{reason:e,metadata:{attempts:t}}=this;return{reason:e,attempts:t}}constructor(e,t){super(e,t,void 0)}}e.exports.PollingError=r}),s("eUfuX",function(e,t){var r=Object.assign(Object.create(null),{url:"file:///../node_modules/zustand/esm/middleware.mjs"});let i=new Map,n=e=>{let t=i.get(e);return t?Object.fromEntries(Object.entries(t.stores).map(([e,t])=>[e,t.getState()])):{}},s=(e,t,r)=>{if(void 0===e)return{type:"untracked",connection:t.connect(r)};let n=i.get(r.name);if(n)return{type:"tracked",store:e,...n};let o={connection:t.connect(r),stores:{}};return i.set(r.name,o),{type:"tracked",store:e,...o}},a=(e,t)=>{let r;try{r=JSON.parse(e)}catch(e){console.error("[zustand devtools middleware] Could not parse the received json",e)}void 0!==r&&t(r)},l=e=>(t,r,i)=>{let n=i.subscribe;return i.subscribe=(e,t,r)=>{let o=e;if(t){let n=(null==r?void 0:r.equalityFn)||Object.is,s=e(i.getState());o=r=>{let i=e(r);if(!n(s,i)){let e=s;t(s=i,e)}},(null==r?void 0:r.fireImmediately)&&t(s,s)}return n(o)},e(t,r,i)},c=e=>(t,r,i)=>(i.setState=(e,r,...i)=>t("function"==typeof e?(0,o("fl9IL").produce)(e):e,r,...i),e(i.setState,r,i)),u=(0,o("l7KxQ").createStore)()(l(c(()=>({files:{}}))));(0,o("l7KxQ").createStore)()(((e,t={})=>(i,o,l)=>{let c,{enabled:u,anonymousActionType:d,store:p,...h}=t;try{c=(null!=u?u:(r.env?r.env.MODE:void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch(e){}if(!c)return(r.env?r.env.MODE:void 0)!=="production"&&u&&console.warn("[zustand devtools middleware] Please install/enable Redux devtools extension"),e(i,o,l);let{connection:f,...m}=s(p,c,h),g=!0;l.setState=(e,t,r)=>{let s=i(e,t);if(!g)return s;let a=void 0===r?{type:d||"anonymous"}:"string"==typeof r?{type:r}:r;return void 0===p?null==f||f.send(a,o()):null==f||f.send({...a,type:`${p}/${a.type}`},{...n(h.name),[p]:l.getState()}),s};let y=(...e)=>{let t=g;g=!1,i(...e),g=t},v=e(l.setState,o,l);if("untracked"===m.type?null==f||f.init(v):(m.stores[m.store]=l,null==f||f.init(Object.fromEntries(Object.entries(m.stores).map(([e,t])=>[e,e===m.store?v:t.getState()])))),l.dispatchFromDevtools&&"function"==typeof l.dispatch){let e=!1,t=l.dispatch;l.dispatch=(...i)=>{(r.env?r.env.MODE:void 0)==="production"||"__setState"!==i[0].type||e||(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),e=!0),t(...i)}}return f.subscribe(e=>{var t;switch(e.type){case"ACTION":if("string"!=typeof e.payload)return void console.error("[zustand devtools middleware] Unsupported action format");return a(e.payload,e=>{if("__setState"===e.type){if(void 0===p)return void y(e.state);1!==Object.keys(e.state).length&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format. 
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);let t=e.state[p];return void(null==t||JSON.stringify(l.getState())!==JSON.stringify(t)&&y(t))}l.dispatchFromDevtools&&"function"==typeof l.dispatch&&l.dispatch(e)});case"DISPATCH":switch(e.payload.type){case"RESET":if(y(v),void 0===p)return null==f?void 0:f.init(l.getState());return null==f?void 0:f.init(n(h.name));case"COMMIT":if(void 0===p){null==f||f.init(l.getState());break}return null==f?void 0:f.init(n(h.name));case"ROLLBACK":return a(e.state,e=>{if(void 0===p){y(e),null==f||f.init(l.getState());return}y(e[p]),null==f||f.init(n(h.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return a(e.state,e=>{if(void 0===p)return void y(e);JSON.stringify(l.getState())!==JSON.stringify(e[p])&&y(e[p])});case"IMPORT_STATE":{let{nextLiftedState:r}=e.payload,i=null==(t=r.computedStates.slice(-1)[0])?void 0:t.state;if(!i)return;void 0===p?y(i):y(i[p]),null==f||f.send(null,r);break}case"PAUSE_RECORDING":return g=!g}return}}),v})(l(c(()=>({files:{}}))))),e.exports.mediaStore=u}),s("jDv0c",function(e,t){var r=o("dwp40");let i=e=>e()>1?{scale:"XHDPI",altScale:"XXXHDPI"}:{altScale:"XHDPI"},n=()=>"undefined"==typeof window?0:window.devicePixelRatio,s=e=>e[i(n).altScale],a=(e,t)=>!!(t&&t.mediaApiToken&&0===e.indexOf(t.mediaApiToken.url)),l=(e,t)=>{if((0,o("40rXS").isSpriteServiceRepresentation)(e)&&t&&t.spriteSheets){let{height:r,width:i,x:n,y:o,xIndex:s,yIndex:a,spriteRef:l}=e,c=t.spriteSheets[l];if(c)return{sprite:c,height:r,width:i,x:n,y:o,xIndex:s,yIndex:a}}else if((0,o("40rXS").isImageRepresentation)(e)){let{height:r,width:i,imagePath:n}=e;return a(n,t)?(0,o("40rXS").convertImageToMediaRepresentation)(e):{height:r,width:i,imagePath:n}}(0,o("fB3RY").default)("failed conversion for representation",e,t)},c=(e,t)=>e&&0!==Object.keys(e).length?l(s(e),t):void 0,u=(e,t)=>{if(!e.skinVariations)return[];let r=e.skinVariations,i=e.id;return r.map(e=>{let{representation:r,altRepresentations:n,...o}=e;return{baseId:i,representation:l(r,t),altRepresentation:c(n,t),...o}})},d=e=>n()>1?2*e:e;e.exports.emojiRequest=(e,t)=>{let{getRatio:o=n,...s}=e,a=i(o),{queryParams:l={},...c}=t||{},u={...c,queryParams:{...a,...l,preferredRepresentation:"IMAGE"}};return r.utils.requestService(s,u)},e.exports.getAltRepresentation=s,e.exports.denormaliseEmojiServiceResponse=e=>({emojis:e.emojis.map(t=>{let r=l(t.representation,e.meta),i=c(t.altRepresentations,e.meta),n=u(t,e.meta),{representation:s,skinVariations:a,altRepresentations:d,...p}=t,h={...p,representation:r,skinVariations:n};return(0,o("40rXS").buildEmojiDescriptionWithAltRepresentation)(h,i)}),mediaApiToken:e.meta&&e.meta.mediaApiToken}),e.exports.shouldUseAltRepresentation=(e,t)=>!!(t&&e.altRepresentation&&d(t)>e.representation.height)}),s("li2rw",function(e,t){var r=o("42omo");let i=e=>{let t=(0,r.useRef)(!1);return t.current||(e(),t.current=!0),null};e.exports.useSampledUFOComponentExperience=(e,t,n)=>((0,r.useEffect)(()=>()=>{(0,o("cGMbZ").withSampling)(e).abort()},[]),i(()=>{(0,o("cGMbZ").withSampling)(e).start({samplingRate:t});let r=0===Object.keys(e.metadata).length;n&&r&&e.addMetadata(n)}),null)}),s("fXFeB",function(e,t){let r=(0,o("42omo").createContext)(null);e.exports.EmojiContext=r}),s("jPINf",function(e,r){var i=o("42omo");class n extends t(i).Component{componentDidCatch(e,t){for(let r of this.props.experiences){let{name:i,message:n}=e,o=t.componentStack&&void 0!==t.componentStack?t.componentStack:void 0;r.failure({metadata:{source:"UfoErrorBoundary",reason:"error",error:{name:i,message:n,infoStack:o}}})}}render(){return this.props.children}}e.exports.UfoErrorBoundary=n}),s("2ZyjG",function(e,t){e.exports.createPMNodeSpecFactory=e=>({parseDOM:t,toDOM:r,toDebugString:i})=>({...e,...t&&{parseDOM:t},...r&&{toDOM:r},...i&&{toDebugString:i}}),e.exports.createPMMarkSpecFactory=e=>({parseDOM:t,toDOM:r,toDebugString:i})=>({...e,...t&&{parseDOM:t},...r&&{toDOM:r},...i&&{toDebugString:i}})}),s("dS4Ej",function(e,t){e.exports.default=class{loadEmoji(){return(0,o("jDv0c").emojiRequest)(this.config).then(e=>(0,o("jDv0c").denormaliseEmojiServiceResponse)(e))}constructor(e){this.config=void 0,this.config=e}}}),s("aUjB3",function(e,t){class r{recordUsage(e){let t=e.id;t&&((0,o("40rXS").isEmojiVariationDescription)(e)&&(t=e.baseId),this.gateway.submit(()=>{t&&this.queue.enqueue(t)}))}getOrder(){return this.queue.getItemsOrderedByDuplicateCount()}clear(){this.queue.clear()}constructor(e=!0){this.queue=void 0,this.gateway=void 0;let t=r.queueOptions;if(e&&t.storage){let e={...t,storage:t.storage};this.queue=new(0,o("9ueIZ").default)(e)}else this.queue=new(0,o("ldT24").default)(t);this.gateway=new i(10)}}r.queueOptions={storage:(0,o("eu2js").default)("localStorage")?window.localStorage:void 0,storagePrefix:o("fhsiz").localStoragePrefix,maxDuplicates:25,minUniqueItems:5};class i{submit(e){return!(this.count>=this.maximumPermitted)&&(this.count++,"undefined"!=typeof window&&window.setTimeout(()=>{try{e()}finally{this.completed()}}),!0)}completed(){this.count--}constructor(e){if(this.maximumPermitted=void 0,this.count=void 0,e<1)throw RangeError("The maximumPermitted parameter must be 1 or more.");this.maximumPermitted=e,this.count=0}}e.exports.UsageFrequencyTracker=r}),s("03yfx",function(e,r){var i=o("42omo");e.exports.EmojiContextProvider=({children:e,emojiContextValue:r})=>{let n=(0,i.useMemo)(()=>r,[r]);return(0,i.useEffect)(()=>{async function e(){try{await n?.emoji.emojiProvider.fetchEmojiProvider()}catch(e){(0,o("fB3RY").default)("fetchEmojiProvider error catched from outside",e)}}n?.emoji.emojiProvider.onlyFetchOnDemand&&n?.emoji.emojiProvider.onlyFetchOnDemand()||e()},[n]),t(i).createElement(o("fXFeB").EmojiContext.Provider,{value:n},e)}}),s("57XaE",function(e,t){e.exports.isCommercial=function(){let e=globalThis,t=e.MICROS_PERIMETER||e.UNSAFE_ATL_CONTEXT_BOUNDARY;return t?"commercial"===t:!e.location?.hostname?.match(/(atlassian-us-gov-mod\.(com|net)|atlassian-us-gov\.(com|net)|atlassian-fex\.(com|net)|atlassian-stg-fedm\.(com|net))/)}}),s("9Bvtr",function(e,t){o("5vzpD");var r=o("3HtSd");e.exports.mapAuthToQueryParameters=function(e){return(0,r.isClientBasedAuth)(e)?{client:e.clientId,token:e.token}:{issuer:e.asapIssuer,token:e.token}}}),s("dP5kx",function(t,r){e(t.exports,"default",()=>i);var i=()=>{if("undefined"!=typeof window&&void 0!==window.document)return window.document}}),s("ldT24",function(e,t){e.exports.default=class{enqueue(e){this.enqueueWithoutOrdering(e),this.itemsOrderedByFrequency=this.orderItemsByFrequency()}getItemsOrderedByDuplicateCount(){return this.itemsOrderedByFrequency}clear(){this.createEmptyState()}bulkEnqueue(e){e.map(e=>this.enqueueWithoutOrdering(e)),this.itemsOrderedByFrequency=this.orderItemsByFrequency()}getItems(){return this.items}createEmptyState(){this.items=[],this.itemCountMap=new Map,this.itemsOrderedByFrequency=[]}enqueueWithoutOrdering(e){let t=this.itemCountMap.get(e);t&&t>=this.perItemSize?this.removeFirstOccurrence(e):this.items.length>=this.maximumSize&&this.remove(),this.add(e)}orderItemsByFrequency(){return Array.from(this.itemCountMap.entries()).sort((e,t)=>t[1]-e[1]).map(e=>e[0])}decrementCount(e){let t=this.itemCountMap.get(e);t&&(--t>0?this.itemCountMap.set(e,t):this.itemCountMap.delete(e))}removeFirstOccurrence(e){let t=this.items.indexOf(e);-1!==t&&(this.items.splice(t,1),this.decrementCount(e))}remove(){let e=this.items.shift();return void 0!==e&&this.decrementCount(e),e}add(e){this.items.push(e);let t=this.itemCountMap.get(e);t?this.itemCountMap.set(e,t+1):this.itemCountMap.set(e,1)}constructor(e){if(this.maximumSize=void 0,this.perItemSize=void 0,this.items=void 0,this.itemCountMap=void 0,this.itemsOrderedByFrequency=void 0,e.maxDuplicates<1)throw RangeError("The maxDuplicates option must be at least 1");if(e.minUniqueItems<1)throw RangeError("The minUniqueItems option must be at least 1");this.maximumSize=e.maxDuplicates*e.minUniqueItems,this.perItemSize=e.maxDuplicates,this.createEmptyState()}}}),s("9ueIZ",function(e,t){class r extends o("ldT24").default{enqueue(e){super.enqueue(e),this.save()}clear(){super.clear(),this.storage.removeItem(this.prefixedStorageKey)}load(){let e=this.storage.getItem(this.prefixedStorageKey);if(e)try{let t=JSON.parse(e);this.bulkEnqueue(t)}catch(e){(0,o("fB3RY").default)(`Error parsing the queue stored as ${this.prefixedStorageKey} key from storage`,e)}}save(){let e=JSON.stringify(this.getItems());try{this.storage.setItem(this.prefixedStorageKey,e)}catch(e){(0,o("fB3RY").default)(`Error saving the queued items as ${this.prefixedStorageKey}`,e)}}constructor(e){super(e),this.storage=void 0,this.prefixedStorageKey=void 0,this.storage=e.storage,this.prefixedStorageKey=`${e.storagePrefix}.${r.storageKey}`,this.load()}}r.storageKey="lastUsed",e.exports.default=r}),r.rlb("92LGf");
//# sourceMappingURL=EmojiPickerComponent.24b82c2e.js.map
