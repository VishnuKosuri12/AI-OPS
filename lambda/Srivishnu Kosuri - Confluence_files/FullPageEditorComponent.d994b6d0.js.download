function e(e){return e&&e.__esModule?e.default:e}var t=globalThis.parcelRequired477,n=t.register;n("7qvmT",function(n,a){var o,r,i,s=t("42omo"),l=((o={}).ATLAS_DOC_FORMAT="ATLAS_DOC_FORMAT",o.EDITOR="EDITOR",o.EDITOR2="EDITOR2",o.EXPORT_VIEW="EXPORT_VIEW",o.PLAIN="PLAIN",o.RAW="RAW",o.STORAGE="STORAGE",o.STYLED_VIEW="STYLED_VIEW",o.VIEW="VIEW",o.WIKI="WIKI",o),c=((r={}).ANDROID="ANDROID",r.IOS="IOS",r.WEB="WEB",r);(i={}).ANONYMOUS="ANONYMOUS",i.APP="APP",i.EXTERNAL="EXTERNAL",i.INTERNAL="INTERNAL",i.JSD="JSD";let d=(e,n)=>{if(!n)return!1;let a=e.target,o=a===e.currentTarget,r=!!a.closest(`[data-testid="comment-thread-${n}-parent"]`),i=!!a.closest(`[data-testid="comment-thread-${n}-reply-list"]`),s=!!a.closest('[data-testid="replies-toggler-container"]'),l=!!a.closest('button, a, input, textarea, [role="button"]'),c=!!a.closest('[data-testid="emoji-add-icon"], [data-emoji-short-name]'),d=!!a.closest('[data-testid="comments-panel-reply-scroller-container"]'),m=!!document.getElementById(`footer-comment-thread-${n}-container`),p=d&&!m&&(0,t("9wGTI").fg)("confluence_frontend_content_wrapper");return(o||r||i||s||d)&&(!l||p)&&!c},m=(e,n=!1,a=!1)=>a&&(0,t("9wGTI").fg)("confluence_frontend_new_dangling_comments_ux")?0:n&&e<=5?5:(0,t("6mKj3").expValEquals)("confluence_comments_tuneup","isEnabled",!0)?e>=4?2:3:2,p=e=>e?t("irVI7").REPLY_TO_INLINE_COMMENT_PUBLISH_EXPERIENCE:t("irVI7").REPLY_TO_PAGE_COMMENT_PUBLISH_EXPERIENCE,u=({threadKey:e,isResolved:n,pageMode:a,setCurrentlySelectedThreadKey:o,eventEmitter:r,commentType:i,scrollCommentsPanelToThread:s,shouldScrollCommentsPanel:l=!1,event:c,id:m,hasKeyPressed:p})=>{if(e&&!n){if(c&&!d(c,m)?o(e):o(e,i),i===t("8i27m").CommentType.INLINE){let n=document.getElementById(e);if(n)if((0,t("9wGTI").fg)("confluence_comments_unified_navigation")){let o=a===t("cD1qu").PageMode.EDIT||a===t("cD1qu").PageMode.LIVE?t("9FoVw").NavigationContext.EDITOR:t("9FoVw").NavigationContext.RENDERER;(0,t("9FoVw").handleInlineAnnotationNavigation)({scrollBehavior:t("9FoVw").ScrollBehavior.SMOOTH,context:o,block:"center",inline:"nearest",markElement:n,annotationId:e})}else a===t("cD1qu").PageMode.EDIT||a===t("cD1qu").PageMode.LIVE?((c&&d(c,m)||p)&&(0,t("i49vP").checkElementExpandInEditor)(n),(0,t("i49vP").scrollToElementInEditor)({targetElement:n,viewingRoomOffset:-300}),r?.emit("setselectedannotation",e)):(r?.emit(t("21K7m").AnnotationUpdateEvent.SET_ANNOTATION_FOCUS,{annotationId:e}),(c&&d(c,m)||p)&&(0,t("aHcFH").scrollCommentIntoView)({commentElement:n,isFabricPage:!0,useInstantScroll:!1,commentThreadAnnotationId:e,isCommentsPanel:!0,scrollCommentsPanelToThread:s,shouldScrollCommentsPanel:l}))}else i===t("8i27m").CommentType.GENERAL&&(0,t("9FoVw").handleFooterCommentsNavigation)({scrollBehavior:t("9FoVw").ScrollBehavior.SMOOTH,block:"center",inline:"nearest",commentId:e});l&&s&&(0,t("9wGTI").fg)("confluence_frontend_content_wrapper")&&!(0,t("9wGTI").fg)("confluence_comments_unified_navigation")&&s({annotationId:e,commentType:i,hasKeyPressed:p})}},f=({pageId:e,parentCommentId:n,adf:a,isEditor:o,pageMode:r,threadKey:i,includeReactionsFlag:s})=>({variables:{input:{containerId:e,parentCommentId:n,commentBody:{value:JSON.stringify(a),representationFormat:l.ATLAS_DOC_FORMAT},createdFrom:(0,t("g0DaR").getCommentCreationLocation)(o,r===t("cD1qu").PageMode.LIVE)},pageId:e,includeReactions:s},update:(0,t("g0DaR").updateApolloCacheCallback)("create",{pageId:e,contentStatus:["CURRENT","DRAFT"],annotationId:i},n)}),_=({pageId:e,cloudId:n,parentCommentId:a,adf:o,includeReactionsFlag:r,isReactionsEnabled:i})=>({variables:{pageId:e,cloudId:n,input:{commentBody:{value:JSON.stringify(o),representationFormat:l.ATLAS_DOC_FORMAT},commentSource:c.WEB,containerId:e,parentCommentId:a},includeReactions:r},update:(0,t("87CZC").updateApolloCacheReplyCallback)("create",{pageId:e,contentStatus:["CURRENT","DRAFT"],type:["FOOTER"]},a,i)}),E=({pageId:e,cloudId:n,parentCommentId:a,adf:o,addCommentInCommentsDataManagerCacheFn:r,experienceTracker:i,isInlineComment:s})=>({variables:{cloudId:n,input:{commentBody:{value:JSON.stringify(o),representationFormat:l.ATLAS_DOC_FORMAT},commentSource:c.WEB,containerId:e,parentCommentId:a},pageId:e},update:(...e)=>{let[n,o]=e;r?.({newComment:(0,t("ag51I").addEmptyObjectRepliesArray)(o.data.createFooterComment),onError:e=>{(0,t("8dA1U").handleMutationFailure)({experienceTracker:i,experienceName:p(s),error:e,commentId:a,shouldReturnError:!0})}})}}),g=({pageId:e,cloudId:n,parentCommentId:a,adf:o,isReactionsEnabled:r})=>({variables:{pageId:e,cloudId:n,input:{commentBody:{value:JSON.stringify(o),representationFormat:l.ATLAS_DOC_FORMAT},commentSource:c.WEB,containerId:e,parentCommentId:a}},update:(0,t("87CZC").updateApolloCacheReplyCallback)("create",{pageId:e,contentStatus:["CURRENT","DRAFT"],type:["FOOTER"]},a,r)}),I=async({pageId:e,parentCommentId:n,cloudId:a,adf:o,onSuccess:r,pageMode:i,editCommentQueryId:s,setCommentForEdit:l,createAnalyticsEvent:c,pageType:d,experienceTracker:m,createInlineReplyFn:u,createGeneralReplyFn:I,createObjectReplyFn:C,addCommentInCommentsDataManagerCacheFn:y,createFooterReplyFn:v,selectedAnnotation:T,addReplyToCommentThread:w,threadKey:b,updateReadCommentsListState:R,commentType:h,searchSessionId:N,isReactionsEnabled:S,analyticsSource:A,contentTypesCommentService:x,isFooterComment:D,setReplyToCommentId:k,resetContentChanged:M,setReplyView:O})=>{let P,F=h===t("8i27m").CommentType.INLINE,L=i===t("cD1qu").PageMode.EDIT,V=t("irVI7").REPLY_TO_INLINE_COMMENT_PUBLISH_EXPERIENCE;return F||(V=t("irVI7").REPLY_TO_PAGE_COMMENT_PUBLISH_EXPERIENCE),m.start({name:V,timeout:t("aJPUt").ExperienceTimeout.EDITOR_PUBLISH,attributes:(0,t("gtj7V").getCommentsDataManagerExperimentAttributes)()}),(P=(0,t("6mKj3").expVal)("cc_comments_new_comments_data_manager","isEnabled",!1)?F?u?.(f({pageId:e,parentCommentId:n,adf:o,isEditor:L,pageMode:i,threadKey:b,includeReactionsFlag:!1}),e=>{(0,t("8dA1U").handleMutationFailure)({experienceTracker:m,experienceName:p(F),error:e,commentId:n,shouldReturnError:!0})}):C?C(E({pageId:e,cloudId:a,parentCommentId:n,adf:o,addCommentInCommentsDataManagerCacheFn:y,experienceTracker:m,isInlineComment:F})):D?v?.(g({pageId:e,cloudId:a,parentCommentId:n,adf:o,isReactionsEnabled:S})):I?.(_({pageId:e,cloudId:a,parentCommentId:n,adf:o,includeReactionsFlag:!1,isReactionsEnabled:S})):F?u&&u(f({pageId:e,parentCommentId:n,adf:o,isEditor:L,pageMode:i,threadKey:b,includeReactionsFlag:!1}),()=>{}):D?v&&v(g({pageId:e,cloudId:a,parentCommentId:n,adf:o,isReactionsEnabled:S})):I&&I(_({pageId:e,cloudId:a,parentCommentId:n,adf:o,includeReactionsFlag:!1,isReactionsEnabled:S})))&&P.then(({data:a})=>{let o=F?a.replyInlineComment:a.createFooterComment,p={isUnread:!1,type:F?t("8i27m").CommentType.INLINE:t("8i27m").CommentType.GENERAL,...o};R(e=>new Set([...e,p.id])),w(b,p,h),x?.onUpdateComment?.(b),k({parentCommentId:void 0}),M(),O(t("ibqdE").ViewReplyOptions.ALL),F?(0,t("g0DaR").handleCreateReplySuccess)({onSuccess:r,editCommentQueryId:s,setCommentForEdit:l,data:a,createAnalyticsEvent:c,pageId:e,pageType:d,analyticsSource:A,commentId:n,pageMode:i,selectedAnnotation:T,getInlineNodeTypes:void 0,experienceTracker:m,isEditor:L}):(0,t("87CZC").handleCreateReplySuccess)({onSuccess:r,editCommentQueryId:s,setCommentForEdit:l,data:a,createAnalyticsEvent:c,pageId:e,pageType:d,analyticsSource:A,commentId:n,pageMode:i,experienceTracker:m,searchSessionId:N,isFooterComment:D})}).catch(e=>{let a;return(0,t("6mKj3").expVal)("cc_comments_new_comments_data_manager","isEnabled",!1)?a=p(F):(a=t("irVI7").REPLY_TO_INLINE_COMMENT_PUBLISH_EXPERIENCE,F||(a=t("irVI7").REPLY_TO_PAGE_COMMENT_PUBLISH_EXPERIENCE)),(0,t("8dA1U").handleMutationFailure)({experienceTracker:m,experienceName:a,error:e,commentId:n,shouldReturnError:!0})})};n.exports.getDefaultNumVisibleReplies=m,n.exports.handleCommentThreadSelection=({parentComment:e,pageMode:n,setCurrentlySelectedThreadKey:a,scrollCommentsPanelToThread:o,eventEmitter:r,event:i,handleSelectThread:s})=>{let l=e.type===t("8i27m").CommentType.INLINE?e.location.inlineMarkerRef:e.id,c=!e.isOpen;l&&s&&s(l),u({threadKey:l,isResolved:c,pageMode:n,setCurrentlySelectedThreadKey:a,eventEmitter:r,commentType:e.type,scrollCommentsPanelToThread:o,shouldScrollCommentsPanel:!0,event:i,id:e.id})},n.exports.handlePanelSelectionAndScroll=u,n.exports.onSaveReply=I,n.exports.getCommentThreadsToBatch=(t,n,a,o)=>t.map((t,r)=>e(s).createElement(a,{key:t.id,parentComment:t,shouldRenderCommentTypeSeparator:r===o,...n})),n.exports.getDefaultReplyView=(e,n,a=!1)=>(0,t("9wGTI").fg)("confluence_frontend_cp_visible_replies_refactor")?n?t("ibqdE").ViewReplyOptions.HIDDEN:a&&(0,t("9wGTI").fg)("confluence_comment_expand_all_standalone_replies")||e<=m(e,a)?t("ibqdE").ViewReplyOptions.ALL:t("ibqdE").ViewReplyOptions.LIMITED:t("ibqdE").ViewReplyOptions.DEFAULT,n.exports.getAdfForQuickReplyMention=e=>{if(e&&e.displayName&&e.accountId)return(0,t("caRYB").doc)((0,t("2FFuS").paragraph)((0,t("bAT9l").mention)({id:e.accountId,text:`@${e.displayName}`}),(0,t("aoDcQ").text)(" ")))}}),n("g0DaR",function(n,a){var o=t("7CLBv"),r=t("56QzY");let i=(0,t("7W8i8").getLogger)("inline-comments-common"),s=(e,t)=>{if(e){let n=e.replies.findIndex(e=>e?.id===t);-1!==n&&e.replies.splice(n,1)}},l=(e,t)=>{if(!e)return;let n=t.replyInlineComment;n?.reactionsSummary||(n.reactionsSummary=c),e.replies.push(n)},c={ari:"",containerAri:"",reactionsCount:0,reactionsSummaryForEmoji:[],__typename:"ReactionsSummaryResponse"};n.exports.defaultReactionsSummary=c,n.exports.updateApolloCacheCallback=(n,a,r,c)=>(d,m)=>{if(m&&m.data){if((0,t("9wGTI").fg)("confluence_frontend_comments_panel_v2"))try{let i=(0,t("9rE3H").buildConsistentActiveCommentsQueryVariables)({pageId:a.pageId}),p=d.readQuery({query:(0,t("86okN").toDocumentNode)(t("eg9xl").ActiveCommentsQuery),variables:i});if(p){let a=e(o)(p),u=a?.comments?.nodes?.find(e=>e?.id===r);u&&("delete"===n?s(u,c):l(u,m.data)),d.writeQuery({query:(0,t("86okN").toDocumentNode)(t("eg9xl").ActiveCommentsQuery),variables:i,data:a})}}catch(e){i.error`An Error occurred when updating comments panel cache for ${n} reply - ${e}`}try{let e={...a},o=d.readQuery({query:t("3B9cR").InlineCommentQuery,variables:e});if(o){let a={...o},i=a?.comments?.nodes?.find(e=>e?.id===r);i&&("delete"===n?s(i,c):l(i,m.data)),d.writeQuery({query:t("3B9cR").InlineCommentQuery,variables:e,data:a})}}catch(e){i.error`An Error occurred when updating inline comments cache for ${n} reply - ${e}`}}},n.exports.updateApolloCacheCallbackForGA=(e,n,a,o)=>(r,c)=>{if(c&&c.data)try{let i={pageId:n.pageId,contentStatus:n.contentStatus,inlineMarkerRefList:[n.annotationId]},d=r.readQuery({query:t("1C8XP").ActiveInlineCommentsQuery,variables:i});if(d){let n={...d},m=n?.comments?.nodes?.find(e=>e?.id===a);m&&("delete"===e?s(m,o):l(m,c.data)),r.writeQuery({query:t("1C8XP").ActiveInlineCommentsQuery,variables:i,data:n})}}catch(t){i.error`An Error occurred when updating comments panel cache for ${e} reply - ${t}`}},n.exports.getCommentCreationLocation=(e,n)=>n?t("afGoD").CommentCreationLocation.LIVE:e?t("afGoD").CommentCreationLocation.EDITOR:t("afGoD").CommentCreationLocation.RENDERER,n.exports.handleCreateReplySuccess=({onSuccess:e,editCommentQueryId:n,setCommentForEdit:a,data:o,createAnalyticsEvent:i,pageId:s,pageType:l,analyticsSource:c,commentId:d,pageMode:m,selectedAnnotation:p,getInlineNodeTypes:u,experienceTracker:f,isEditor:_})=>{e(),n&&a("");let E=o?.replyInlineComment,g=E?.location?.inlineMarkerRef;i({type:"sendTrackEvent",data:{action:"created",actionSubject:"comment",actionSubjectId:E?.id,objectType:l,objectId:s,source:c,attributes:{...(0,t("gtj7V").getCommentsDataManagerExperimentAttributes)(),source:c,commentType:t("en1dX").CommentType.INLINE,parentCommentId:d??null,isReply:!0,pageMode:m,framework:t("24amZ").InlineCommentFramework.ANNOTATION_PROVIDER,navdexPointType:r.END,inlineNodeTypes:p&&u?u(p.id):void 0,targetNodeType:(0,t("asNlu").getTargetNodeType)(g,_)}}}).fire(),f.updateAttributes({name:t("irVI7").REPLY_TO_INLINE_COMMENT_EXPERIENCE,attributes:{replyCommentId:E?.id}}),f.succeed({name:t("irVI7").REPLY_TO_INLINE_COMMENT_PUBLISH_EXPERIENCE,attributes:{replyCommentId:E?.id}})},n.exports.insertReopenedCommentAnnotation=(e,t,n,a)=>{let o=e.indexOf(t);if(-1===o)throw Error("Marker ref is not present in the annotations list");let r=n.findIndex(t=>e.indexOf(t)>o),i=-1===r?n.length:r;a([...n.slice(0,i),t,...n.slice(i)])},n.exports.inlineCommentExists=e=>{let t=`.inline-comment-marker[data-ref="${e}"]`,n=`[id="${e}"][data-mark-annotation-type="inlineComment"]`;return!!document.querySelector(`${t}, ${n}`)},n.exports.updateReactionsCacheCallbackForGA=(e,n,a,o,r,s,l)=>{try{let i,d,m={pageId:o,inlineMarkerRefList:[r.id],contentStatus:[s?"ARCHIVED":"DRAFT","CURRENT"]},p=l?.readQuery({query:t("1C8XP").ActiveInlineCommentsQuery,variables:m});if(!p?.comments?.nodes?.[0])return;let u=p.comments.nodes[0];if(u.id===a?i=u.reactionsSummary?{...u.reactionsSummary}:c:(d=u.replies.find(e=>e?.id===a))&&(i=d.reactionsSummary?{...d.reactionsSummary}:c),!i)return;let f=i.ari||"",_=i.containerAri||"",E=i.reactionsCount||0,g={...i},I=[...i.reactionsSummaryForEmoji||[]];if("add"===n){let t=I.find(t=>t?.emojiId===e);if(t&&!t.reacted)t.count++,t.reacted=!0;else{let t={emojiId:e,count:1,reacted:!0,id:`${_}|${f}|${e}`,__typename:"ReactionsSummaryForEmoji"};I.push(t)}++E}else if("delete"===n){let t=I.findIndex(t=>t?.emojiId===e);if(-1!==t){let e=I[t];e&&e.count>1?(e.count--,e.reacted=!1):I.splice(t,1),--E}}g.reactionsSummaryForEmoji=I,g.reactionsCount=E??0;let C={...u,replies:u.replies.map(e=>e?.id===a?{...e,reactionsSummary:g}:e)};u.id===a&&(C.reactionsSummary=g),l?.writeQuery({query:t("1C8XP").ActiveInlineCommentsQuery,variables:m,data:{comments:{nodes:[C],__typename:"PaginatedCommentList"}}})}catch(e){i.error`An error occurred when updating reactions cache for ${n} - ${e}`}}}),n("1C8XP",function(e,n){let a=(0,t("eSUdr").default)`query ActiveInlineCommentsQuery($inlineMarkerRefList:[String!]!$pageId:ID!$contentStatus:[GraphQLContentStatus]){comments(inlineMarkerRefList:$inlineMarkerRefList pageId:$pageId contentStatus:$contentStatus){nodes{id body(representation:ATLAS_DOC_FORMAT){value}contentStatus createdAt{value}createdAtNonLocalized links{webui editui}location{type ...on InlineComment{inlineMarkerRef inlineText inlineResolveProperties{resolved isDangling resolvedFriendlyDate resolvedTime resolvedUser}}...on FooterComment{commentResolveProperties{resolved resolvedFriendlyDate resolvedTime resolvedUser}}}parentId permissions{isEditable isRemovable isResolvable}version{by{displayName}when number}author{displayName profilePicture{path}permissionType ...on KnownUser{accountId}}location{type ...on InlineComment{inlineMarkerRef inlineText inlineResolveProperties{isDangling resolvedTime resolvedFriendlyDate resolvedUser resolved}}...on FooterComment{commentResolveProperties{resolved resolvedFriendlyDate resolvedTime resolvedUser}}}createdAt{value}createdAtNonLocalized replies{id body(representation:ATLAS_DOC_FORMAT){value}contentStatus createdAt{value}createdAtNonLocalized links{webui editui}location{type ...on InlineComment{inlineMarkerRef inlineText inlineResolveProperties{resolved isDangling resolvedFriendlyDate resolvedTime resolvedUser}}...on FooterComment{commentResolveProperties{resolved resolvedFriendlyDate resolvedTime resolvedUser}}}parentId permissions{isEditable isRemovable isResolvable}version{by{displayName}when number}author{displayName profilePicture{path}permissionType ...on KnownUser{accountId}}createdAt{value}createdAtNonLocalized reactionsSummary(pageId:$pageId contentType:"page" childType:"comment"){ari containerAri reactionsCount reactionsSummaryForEmoji{id emojiId count reacted}}}reactionsSummary(pageId:$pageId contentType:"page" childType:"comment"){ari containerAri reactionsCount reactionsSummaryForEmoji{id emojiId count reacted}}}}}`;e.exports.ActiveInlineCommentsQuery=a}),n("asNlu",function(e,n){e.exports.getTargetNodeType=(e,n)=>{if(!e)return"unknown";let a=document.querySelector(`[id="${e}"]`);if(!a)return"unknown";if(a.closest("[data-media-caption]"))return"caption";if(n)return a.querySelector(`.${t("ag6aQ").ClassNames.MEDIA_CONTAINER}`)?"media":"text";{let e=a.querySelector("[data-node-type]");return e?e.dataset.nodeType:"text"}}}),n("8dA1U",function(e,n){let a={TASK_ABORT:"taskAbort"};var o=t("56QzY");e.exports.handleResolveSuccess=({commentId:e,parentCommentMarkerRef:n,pageId:a,pageMode:r,eventEmitter:i,source:s,commentType:l,removeUnresolvedInlineComment:c,createAnalyticsEvent:d,getInlineNodeTypes:m,setEditorViewProps:p})=>{c&&c(n),d({type:"sendTrackEvent",data:{action:"resolved",actionSubject:"comment",actionSubjectId:e,objectType:"page",objectId:a,source:s,attributes:{...(0,t("gtj7V").getCommentsDataManagerExperimentAttributes)(),source:s,commentType:l,pageMode:r,framework:t("kmHPt").InlineCommentFramework.ANNOTATION_PROVIDER,navdexPointType:o.END,inlineNodeTypes:n&&m?m(n):void 0,targetNodeType:(0,t("asNlu").getTargetNodeType)(n,r!==t("cD1qu").PageMode.VIEW)}}}).fire(),r===t("cD1qu").PageMode.VIEW?i?.emit(t("21K7m").AnnotationUpdateEvent.SET_ANNOTATION_STATE,{[n]:{id:n,annotationType:t("cUycv").AnnotationTypes.INLINE_COMMENT,state:t("cUycv").AnnotationMarkStates.RESOLVED}}):(i?.emit("resolve",n),p&&p(null))},e.exports.handleDeleteSuccess=({commentId:e,annotationId:n,pageId:a,pageMode:o,isReply:r,source:i,inlineNodeTypes:s,removeUnresolvedInlineComment:l,createAnalyticsEvent:c,onSuccess:d})=>{if(!n)throw Error("No annotationId for delete");l(n),c({type:"sendTrackEvent",data:{action:"deleted",actionSubject:"comment",actionSubjectId:e,objectType:"page",objectId:a,source:i,attributes:{...(0,t("gtj7V").getCommentsDataManagerExperimentAttributes)(),commentType:t("en1dX").CommentType.INLINE,source:i,pageMode:o,framework:t("kmHPt").InlineCommentFramework.ANNOTATION_PROVIDER,inlineNodeTypes:s,isReply:r,targetNodeType:(0,t("asNlu").getTargetNodeType)(n,o!==t("cD1qu").PageMode.VIEW)}}}).fire(),d(n)},e.exports.handleMutationFailure=({experienceTracker:e,experienceName:n,error:o,commentId:r,shouldReturnError:i=!1,shouldAbortForExpectedError:s=!1,compoundExperienceName:l})=>{let{message:c}=(0,t("isdzP").parseError)(o),d=(0,t("isdzP").getTranslatedError)(c,r);if((0,t("isdzP").isUnexpectedError)(d)){if(e.stopOnError({name:n,error:o}),l){let t=e.getExperienceState(n);t?.stopState===a.TASK_ABORT&&e.stopOnError({name:l,error:o})}}else if((0,t("7Sm4c").markErrorAsHandled)(o),s){let t="string"==typeof d.defaultMessage?d.defaultMessage:c;e.abort({name:n,reason:t}),l&&e.abort({name:l,reason:t})}if(i)return Promise.reject({error:d})}}),n("ibqdE",function(e,n){var a,o=((a={}).ALL="ALL",a.DEFAULT="DEFAULT",a.HIDDEN="HIDDEN",a.LIMITED="LIMITED",a);let r=(e,t)=>e.filter(({parentId:e})=>e===t);e.exports.DEFAULT_NUM_VISIBLE_REPLIES=2,e.exports.ViewReplyOptions=o,e.exports.legacyUpdateVisibleReplies=({allReplies:e,commentType:n,isParentCommentOpen:a,currentReplyView:o,latestReplies:r,latestReplyIds:i,parentCommentId:s,setVisibleReplies:l,shouldShowLatestReplies:c,numOfHiddenReplies:d})=>{"ALL"===o?(l(n!==t("8i27m").CommentType.GENERAL?e:e.filter(e=>e.parentId===s)),d.current=0):(d.current=e.length,a?c&&r&&i&&i.size>0&&(l(r),d.current-=i.size):l([]))},e.exports.updateVisibleReplies=({currentReplyView:e,setVisibleReplies:n,allReplies:a,isParentCommentOpen:o,latestReplies:i,parentCommentId:s,currentView:l,allowNestedReplies:c=!1})=>{if(!o&&l!==t("3mVfX").ViewValues.RESOLVED)return void n([]);switch(e){case"ALL":n(c?a:r(a,s));break;case"HIDDEN":n([]);break;case"LIMITED":n(i)}},e.exports.getCommentReplies=r,e.exports.getNumOfHiddenReplies=({replies:e,latestReplyIds:t,currentReplyView:n})=>{switch(n){case"HIDDEN":return e.length;case"LIMITED":return e.length-t.size;default:return 0}},e.exports.getDefaultHiddenReplies=({replies:e,shouldShowLatestReplies:n,isParentOpen:a,latestReplyIds:o})=>e.filter(e=>(0,t("9wGTI").fg)("confluence_frontend_new_dangling_comments_ux")?!n||!o.has(e.id):!n||!a||!o.has(e.id)),e.exports.getProfilePicturesOfHiddenReplies=e=>{if(!(0,t("9wGTI").fg)("confluence_frontend_comments_panel_v2"))return[];let n=new Map;for(let t=e.length-1;t>=0;t--){let a,o=e[t],{displayName:r,profilePicture:i}=o.author;a="accountId"in o.author&&o.author.accountId?o.author.accountId:`anonymous-${t}`,n.has(a)||n.set(a,{displayName:r??"",profilePicturePath:i?.path})}return Array.from(n.values())}}),n("1Sjzs",function(n,a){var o=t("42omo");n.exports.WithCurvedBranchingStyle=({showDefaultStyles:n,children:a,customStyles:r,onClick:i,testId:s,disableLeftProp:l})=>e(o).createElement("div",{style:{...(()=>{let{height:e,left:t,...n}=r||{};return n})(),...r?.height&&{"--customHeight":r.height},...r?.left?{"--customBeforeLeft":r.left}:{"--customBeforeLeft":l?"0px":"-24px"}},onClick:i,"data-testid":s,className:(0,t("gMc0m").default)([n&&"_kqswh2mm _1n1j11qs _4k1c11qs _1kt9b3bt _1cs8stnw _qnec1gkm _1aukidpf _1mp41skh _kfgt1pfq _fik81mok"])},a)}),n("58Zuw",function(n,a){var o=t("42omo");let r={dot:"_2rko1rr0 _18s81b66 _4t3iftgi _1bsbftgi _bfhk1856",pressableContainer:"_18u0pxbi _19bv1ejb",pressableContainerWithBranch:"_18u0pxbi _19bv1ejb _kqswh2mm _1n1j11qs _1kt9b3bt _1cs8stnw _kfgt1osq _qnecidpf",pressable:"_1yt4u2gc _2rko12b0 _1bsb1osq _syazazsu _bfhksm61 _uiztglyw _k48p1wq8 _d0altlke _irr31dpa _1di6fcek"},i="show-hidden-replies",s=({showHiddenReplies:n,hiddenReplies:a,hasHiddenUnreadReplies:s,analyticsContext:l,message:c,children:d})=>{let m=(0,o.useMemo)(()=>(0,t("ibqdE").getProfilePicturesOfHiddenReplies)(a),[a]);return e(o).createElement(t("fVUfS").default,{onClick:n,xcss:r.pressable,analyticsContext:l,testId:i,interactionName:i},e(o).createElement(t("u9agA").default,{alignBlock:"center",space:"space.100",spread:"space-between"},e(o).createElement(t("u9agA").default,{alignBlock:"center",space:"space.100"},d,e(o).createElement(t("gdv5Z").default,{as:"span"},e(o).createElement(t("2Pg7f").default,{onMoreClick:()=>{},data:m.map(({displayName:e,profilePicturePath:t})=>({name:e,src:t})),maxCount:3,appearance:"stack",size:"small",shouldPopupRenderToParent:!0,testId:"replies-toggler-profile-pictures"})),e(o).createElement(t("iXCQx").default,{color:"color.text.subtle",weight:"medium"},c)),s&&e(o).createElement(t("gdv5Z").default,{as:"span",xcss:r.dot,testId:"unread-comment-replies-indicator"})))},l={height:"var(--ds-space-250, 20px)"},c=({hiddenReplies:n,showHiddenReplies:a,hasHiddenUnreadReplies:i,analyticsContext:c,message:d,isHiddenReplyView:m,expandReplyEditor:p})=>{let u=e(o).createElement(s,{hiddenReplies:n,showHiddenReplies:a,hasHiddenUnreadReplies:i,analyticsContext:c,message:d},!m&&e(o).createElement(e(t("lFPm8")),{label:""}));return m?e(o).createElement(t("gdv5Z").default,{xcss:p?r.pressableContainerWithBranch:r.pressableContainer},e(o).createElement(t("1Sjzs").WithCurvedBranchingStyle,{showDefaultStyles:!0,customStyles:l},u)):u},d={cursor:"pointer",display:"flex",alignItems:"center",height:"24px",left:0},m={paddingTop:"var(--ds-space-100, 8px)",paddingBottom:"var(--ds-space-100, 8px)",left:0},p=(0,t("ecnYn").xcss)({alignItems:"center",gap:"space.075"}),u=(0,t("ecnYn").xcss)({color:"color.text.subtle",backgroundColor:"color.background.neutral.subtle",paddingTop:"space.050",paddingBottom:"space.050",paddingLeft:"space.150",paddingRight:"space.150",borderRadius:"radius.small",userSelect:"none",fontWeight:"var(--ds-font-weight-medium, 500)",":hover":{cursor:"pointer",backgroundColor:"color.background.neutral.subtle.hovered"},":active":{backgroundColor:"color.background.neutral.subtle.pressed"}}),f=(0,t("cgtv4").defineMessages)({hideRepliesText:{id:"comments-common.comment-thread.hide.replies",defaultMessage:"Hide replies"},hideReplyText:{id:"comments-common.comment-thread.hide.reply",defaultMessage:"Hide reply"},showMoreRepliesText:{id:"comments-common.comment-thread.show.more.replies",defaultMessage:"Show {numOfHiddenReplies, plural, one {# more reply} other {# more replies}}"},showMoreRepliesTextForStandalone:{id:"comments-common.comment-thread.show.more.replies.for.standalone",defaultMessage:"{numOfHiddenReplies, plural, one {# more reply} other {# more replies}}"},showReplyText:{id:"comments-common.comment-thread.show.reply",defaultMessage:"Show reply"}}),_=({repliesLength:e,isStandaloneComment:t,numOfHiddenReplies:n,formatMessage:a})=>1===e?a(f.showReplyText):a(t?f.showMoreRepliesTextForStandalone:f.showMoreRepliesText,{numOfHiddenReplies:n}),E=({analyticsSource:e,commentType:t,replies:n,hasHiddenUnreadReplies:a,currentNumOfHiddenReplies:o,shouldShowShowMoreRepliesToggle:r})=>({attributes:r?{name:"repliesToggler",source:e,commentType:t,hasHiddenUnreadReplies:a,numOfHiddenReplies:o,numOfReplies:n.length}:{attributes:{name:"hideReplies",source:e,commentType:t,numOfReplies:n.length}}});n.exports.RepliesToggler=({replies:n,setVisibleReplies:a,unreadReplyIds:r,setReplyView:i,threadKey:s,currentReplyView:l,numOfHiddenReplies:g,commentType:I,parentCommentId:C,isParentOpen:y,canAddComments:v,shouldShowLatestReplies:T,setShouldShowLatestReplies:w,latestReplyIds:b,isStandaloneComment:R=!1,onMouseEnter:h,onMouseLeave:N,analyticsSource:S,expandReplyEditor:A})=>{let x=(0,t("dPJCf").createSingleQueryParamHook)("focusedCommentId"),D=(0,t("dPJCf").createSingleQueryParamHook)("replyToComment"),k=x(),M=D(),{removeCommentQueryParams:O}=(0,t("liGyh").useInlineCommentQueryParams)(),{formatMessage:P}=(0,t("8C5kA").default)(),[{commentsMarkedAsRead:F},{setCommentsInThreadToBeMarkedAsRead:L}]=(0,t("3mVfX").useCommentsPanel)();(0,o.useEffect)(()=>{let e=k||M;e&&n?.map(e=>e?.id)?.includes(e)&&i(t("ibqdE").ViewReplyOptions.ALL)},[k,M,i,n]);let V=(0,o.useMemo)(()=>l===t("ibqdE").ViewReplyOptions.HIDDEN?n:(0,t("ibqdE").getDefaultHiddenReplies)({replies:n,shouldShowLatestReplies:T,isParentOpen:y,latestReplyIds:b}),[n,T,y,b,l]),G=(0,o.useMemo)(()=>{if(!(0,t("9wGTI").fg)("confluence_frontend_unread_comments_fixes"))return r.filter(e=>{let t=F[I][s];return!t||!t.has(e)}).filter(e=>!b.has(e)).length>0;{let e=new Set(V.map(e=>e.id));return r.some(t=>e.has(t))}},[r,b,F,s,I,V]),j=(0,t("9wGTI").fg)("confluence_frontend_cp_visible_replies_refactor")?(0,t("ibqdE").getNumOfHiddenReplies)({replies:n,latestReplyIds:b,currentReplyView:l}):g.current,q=j>0,U=l!==t("ibqdE").ViewReplyOptions.ALL&&q,H=!y&&q,B=(0,o.useRef)(U?(0,t("ibqdE").getProfilePicturesOfHiddenReplies)((0,t("9wGTI").fg)("confluence_frontend_unread_comments_fixes")?V:(0,t("ibqdE").getDefaultHiddenReplies)({replies:n,shouldShowLatestReplies:T,isParentOpen:y,latestReplyIds:b})):[]),X=(0,o.useCallback)(e=>{if(e.stopPropagation(),i(t("ibqdE").ViewReplyOptions.ALL),(k||M)&&O(),!(0,t("9wGTI").fg)("confluence_frontend_cp_visible_replies_refactor")){if(I===t("8i27m").CommentType.GENERAL&&(0,t("9wGTI").fg)("confluence_frontend_content_wrapper")){let e=new Set(n.filter(e=>e.parentId===C).map(e=>e.id));a(n.filter(t=>e.has(t.id)))}else a(n);g.current=0}B.current=[]},[i,I,g,n,a,C,k,M,O]),z=(0,o.useCallback)(e=>{e.stopPropagation(),(k||M)&&O(),(0,t("9wGTI").fg)("confluence_frontend_cp_visible_replies_refactor")?i(t("ibqdE").ViewReplyOptions.HIDDEN):(i(t("ibqdE").ViewReplyOptions.DEFAULT),a([]),w(!1),g.current=n.length),(0,t("9wGTI").fg)("confluence_frontend_unread_comments_fixes")||L({threadKey:s,commentIds:r,commentType:I}),B.current=(0,t("ibqdE").getProfilePicturesOfHiddenReplies)(n)},[s,n,i,a,L,r,g,I,w,k,M,O]);if((0,t("6mKj3").expValEquals)("confluence_comments_tuneup","isEnabled",!0)&&!q)return null;let K=_({repliesLength:n.length,isStandaloneComment:R,numOfHiddenReplies:j,formatMessage:P}),Y=E({analyticsSource:S,commentType:I,replies:n,hasHiddenUnreadReplies:G,currentNumOfHiddenReplies:j,shouldShowShowMoreRepliesToggle:q});return(0,t("6mKj3").expValEquals)("confluence_comments_tuneup","isEnabled",!0)?e(o).createElement(t("6f0Oj").default,{testId:"replies-toggler-container",onMouseEnter:()=>h(C),onMouseLeave:()=>N()},e(o).createElement(c,{hiddenReplies:V,message:K,showHiddenReplies:X,hasHiddenUnreadReplies:G,analyticsContext:Y,isHiddenReplyView:l===t("ibqdE").ViewReplyOptions.HIDDEN,expandReplyEditor:A})):e(o).createElement("div",{onMouseEnter:()=>(0,t("9wGTI").fg)("confluence_frontend_content_wrapper")&&h(C),onMouseLeave:()=>(0,t("9wGTI").fg)("confluence_frontend_content_wrapper")&&N(),className:(0,t("gMc0m").default)([n.length>0&&(0,t("9wGTI").fg)("confluence_frontend_comments_panel_v2")&&(v||0===j)&&"_kqswh2mm _1n1j11qs _1kt9b3bt _1cs8stnw _qnecidpf _1aukidpf _kfgt1wqb",n.length>0&&(0,t("9wGTI").fg)("confluence_frontend_comments_panel_v2")&&H&&"_kfgtgktf",n.length>0&&(0,t("9wGTI").fg)("confluence_frontend_comments_panel_v2")&&l===t("ibqdE").ViewReplyOptions.HIDDEN&&R&&(0,t("9wGTI").fg)("confluence_frontend_content_wrapper")&&"_kfgtn7od"])},e(o).createElement(t("1Sjzs").WithCurvedBranchingStyle,{testId:"replies-toggler-container",showDefaultStyles:n.length>0&&(0,t("9wGTI").fg)("confluence_frontend_comments_panel_v2"),disableLeftProp:!0,customStyles:{...d,...(0,t("9wGTI").fg)("confluence_frontend_comments_panel_v2")?m:{}}},e(o).createElement("div",{className:(0,t("gMc0m").default)(["_18u0utpp"])},q?e(o).createElement(t("2W0qg").default,{onClick:X,testId:"show-hidden-replies",analyticsContext:Y,xcss:u,interactionName:"show-hidden-replies"},e(o).createElement(t("bUlM5").default,{alignItems:"center",gap:R?"space.150":"space.050"},U&&B.current.length>0&&e(o).createElement(t("2Pg7f").default,{data:B.current.map(e=>({name:e.displayName,src:e.profilePicturePath})),maxCount:3,appearance:"stack",size:"small",shouldPopupRenderToParent:!0,testId:"replies-toggler-profile-pictures"}),!(0,t("9wGTI").fg)("confluence_frontend_comments_panel_v2")&&e(o).createElement(e(t("ghftu")),{spacing:"compact",label:"show-more-replies-button",size:"small"}),e(o).createElement(t("bUlM5").default,{xcss:p},K,G&&e(o).createElement("span",{"data-testid":"unread-comment-replies-indicator",className:(0,t("gMc0m").default)(["_2rko1rr0 _18s81b66 _4t3iu2gc _1bsbu2gc _bfhk1856"])})))):e(o).createElement(t("ccHMk").default,{onClick:z,testId:"hide-replies",appearance:"subtle",analyticsContext:Y,interactionName:"hide-replies"},e(o).createElement(t("bUlM5").default,{alignItems:"center",gap:"space.050"},!(0,t("9wGTI").fg)("confluence_frontend_comments_panel_v2")&&e(o).createElement(e(t("2AytZ")),{spacing:"compact",label:"hide-replies-button",size:"small"}),e(o).createElement(t("5dK2X").default,{color:"color.text",size:"medium",weight:"medium"},P(1===n.length?f.hideReplyText:f.hideRepliesText)))))))}}),n("lLpk8",function(n,a){var o=t("42omo"),r=t("daq5m");let i=(0,t("cgtv4").defineMessages)({reply:{id:"comments-common.comments.replies.footer.reply",defaultMessage:"Reply"}}),s=({handleReplyButtonClick:n,isParentCommentOpen:a,isStandaloneComment:r,isOffline:s})=>{let{formatMessage:l}=(0,t("8C5kA").default)(),[c=""]=(0,t("ep3mz").usePageContentId)(),{canAddComments:d}=(0,t("dANtQ").useAddCommentPermissionCheck)(c);return d&&a&&!r?e(o).createElement(t("ccHMk").default,{appearance:"subtle",isDisabled:s,onClick:n,iconBefore:e(t("diR4K"))},l(i.reply)):null},l={repliesFooter:"_1bah1yb4 _19bv1ejb _ca0qu2gc",editorContainer:"_1bsb1osq"},c={height:"var(--ds-space-200, 16px)"},d={height:"var(--ds-space-200, 16px)",top:"var(--ds-space-negative-100, -8px)"},m=(0,t("cgtv4").defineMessages)({hideReplies:{id:"comments-common.comments.replies.footer.hideReplies",defaultMessage:"{numOfVisibleReplies, plural, one {Hide reply} other {Hide replies}}"}});n.exports.RepliesFooter=({replyView:n,setReplyView:a,isEditorExpanded:i,numOfVisibleReplies:p,isParentCommentOpen:u,children:f,handleReplyButtonClick:_,scrollToId:E,location:g,isStandaloneComment:I=!1,isOffline:C=!1})=>{let{formatMessage:y}=(0,t("8C5kA").default)(),{userId:v}=(0,t("bQm3c").useSessionData)(),T=!i&&!I&&n!==t("ibqdE").ViewReplyOptions.HIDDEN&&p>0,w=async e=>{if(e.stopPropagation(),a(t("ibqdE").ViewReplyOptions.HIDDEN),g===t("i6UMJ").LocationValue.FOOTER)return(0,t("9FoVw").handleFooterCommentsNavigation)({inline:"start",block:"center",commentId:E,scrollBehavior:t("9FoVw").ScrollBehavior.SMOOTH});await (0,t("9FoVw").handleCommentsPanelNavigation)({block:"start",annotationId:E,context:t("9FoVw").NavigationContext.PANEL,scrollBehavior:t("9FoVw").ScrollBehavior.SMOOTH})};return e(o).createElement(t("1s5hv").default,{testId:"replies-footer",xcss:l.repliesFooter,gap:i?"space.100":"space.0",direction:i?"column":"row",alignItems:i?"start":"center"},i?e(o).createElement(t("1Sjzs").WithCurvedBranchingStyle,{showDefaultStyles:!0,customStyles:0===p?d:c},e(o).createElement(r.CommentAuthor,{size:"small",commentMode:"create",userId:v})):e(o).createElement(s,{isParentCommentOpen:u,isStandaloneComment:I,handleReplyButtonClick:_,isOffline:C}),T&&e(o).createElement(t("ccHMk").default,{appearance:"subtle",iconBefore:e(t("jPqj0")),onClick:w},y(m.hideReplies,{numOfVisibleReplies:p})),i&&e(o).createElement(t("gdv5Z").default,{testId:"reply-editor-container",xcss:l.editorContainer},f))}}),n("8gR6k",function(e,n){var a=t("42omo");e.exports.useUpdateVisibleReplies=({allReplies:e,commentType:n,isParentCommentOpen:o,currentReplyView:r,latestReplies:i,latestReplyIds:s,parentCommentId:l,setVisibleReplies:c,shouldShowLatestReplies:d,numOfHiddenReplies:m,allowNestedReplies:p=!1})=>{let{currentView:u}=(0,t("3mVfX").useCommentsPanelState)();(0,a.useLayoutEffect)(()=>{(0,t("9wGTI").fg)("confluence_frontend_cp_visible_replies_refactor")&&(0,t("ibqdE").updateVisibleReplies)({parentCommentId:l,currentReplyView:r,setVisibleReplies:c,allReplies:e,isParentCommentOpen:o,latestReplies:i,currentView:u,allowNestedReplies:p})},[e,r,o,i,m,l,c,u,p]),(0,a.useEffect)(()=>{(0,t("9wGTI").fg)("confluence_frontend_cp_visible_replies_refactor")||(0,t("ibqdE").legacyUpdateVisibleReplies)({allReplies:e,commentType:n,isParentCommentOpen:o,currentReplyView:r,latestReplies:i,latestReplyIds:s,parentCommentId:l,setVisibleReplies:c,shouldShowLatestReplies:d,numOfHiddenReplies:m})},[e,i,s])}}),n("auGhu",function(n,a){var o,r=t("42omo"),i=t("abN8T"),s=t("7EEGh"),l=t("lesF8"),c=t("hXzKU"),d=t("56QzY"),m=((o={}).ATLAS_DOC_FORMAT="ATLAS_DOC_FORMAT",o.EDITOR="EDITOR",o.EDITOR2="EDITOR2",o.EXPORT_VIEW="EXPORT_VIEW",o.PLAIN="PLAIN",o.RAW="RAW",o.STORAGE="STORAGE",o.STYLED_VIEW="STYLED_VIEW",o.VIEW="VIEW",o.WIKI="WIKI",o),p=t("daq5m");let u=(0,t("eSUdr").default)`mutation EditCommentUpdateCommentMutation($input:UpdateCommentInput!$includeVersionFields:Boolean=false){updateComment(input:$input){id body(representation:ATLAS_DOC_FORMAT)@include(if:$includeVersionFields){value}version@include(if:$includeVersionFields){number when by{displayName}}}}`,f=(0,t("cgtv4").defineMessages)({cannotEditTitle:{id:"inline-comments-common.could.not.edit.title",defaultMessage:"Unable to edit comment"}}),_=(0,t("7W8i8").getLogger)("inline-comments-common:edit-comment"),E=(0,t("ecnYn").xcss)({paddingBlock:"space.150",paddingInline:"space.200"}),g=(0,t("ecnYn").xcss)({padding:"unset",paddingTop:"space.100"}),I=(0,t("ecnYn").xcss)({paddingLeft:"space.300",marginLeft:"space.200",marginTop:"space.050",borderLeft:"1.5px solid var(--ds-background-accent-gray-subtlest-hovered, #DDDEE1)"}),C=(0,t("ecnYn").xcss)({paddingBottom:"space.100"}),y=(0,t("ecnYn").xcss)({marginLeft:"space.100",marginBottom:"space.0",paddingBlock:"space.0",paddingRight:"space.0",paddingTop:"space.0"}),v=(0,t("ecnYn").xcss)({margin:"0",padding:"0",paddingTop:"space.100"}),T=(0,t("ecnYn").xcss)({marginLeft:"-1px"}),w=(0,t("ecnYn").xcss)({marginLeft:"space.negative.200",paddingRight:"space.0",paddingTop:"space.0"}),b=(0,t("ecnYn").xcss)({paddingLeft:"space.300",marginLeft:"space.negative.100",borderLeft:"1.5px solid var(--ds-background-accent-gray-subtlest-hovered, #DDDEE1)",paddingBottom:"space.100"}),R=(0,t("ecnYn").xcss)({paddingLeft:"space.300",paddingBottom:"space.200",marginLeft:"space.negative.300",marginBottom:"space.negative.150"}),h=(0,t("ecnYn").xcss)({borderLeft:"1.5px solid var(--ds-background-accent-gray-subtlest-hovered, #DDDEE1)"}),N=(0,t("7aRa9").withFlags)(({pageId:n,pageType:a,annotationId:o,commentId:N,spaceId:S,content:A,displayCommentInViewMode:x,isReply:D,isEdited:k,avatarUrl:M,date:O,dateUrl:P,createdAtNonLocalized:F,versionByDisplayName:L,versionDate:V,resolveProperties:G,displayName:j,mode:q,hasMediaUploadPermissions:U,isCommentsPanel:H,isFooterComment:B=!1,adjustForFooterReplies:X=!1,isLastNestedFooterReply:z=!1,onCancelEdit:K,getInlineNodeTypes:Y,commentType:W,flags:$,isStandaloneComment:Q,isOffline:J,isCurrentUserAnonymous:Z,isLastUnnestableReply:ee=!1,hasParentMaxHeight:et=!1})=>{let en,{userId:ea,displayName:eo}=(0,t("bQm3c").useSessionData)(),{createAnalyticsEvent:er}=(0,t("inPa6").useAnalyticsEvents)(),ei=(0,r.useContext)(t("1kHsc").ExperienceTrackerContext),{onChange:es,resetContentChanged:el}=(0,t("bSvtO").useCommentsContentActions)(),{isReactionsEnabled:ec}=(0,r.useContext)(t("8SCD6").ReactionsContext),{updateCommentBody:ed}=(0,t("8i27m").useCommentsDataActions)(),{commentService:em}=(0,t("6hmtW").useCommentService)(),{setStoredCommentData:ep}=(0,t("cZa7r").useAnnotationsDispatch)(),{storedCommentData:eu}=(0,t("cZa7r").useAnnotations)(),ef=(0,r.useRef)(null),e_=(0,t("aSsfA").useGetPageMode)(),[eE]=(0,t("1KmJq").useMutation)(u),{updateCommentInCache:eg}=(0,t("jbF1h").useUpdateCommentInCache)(),eI=(0,r.useCallback)(e=>{ei.stopOnError({name:W===t("8i27m").CommentType.GENERAL?t("irVI7").EDIT_PAGE_COMMENT_PUBLISH_EXPERIENCE:t("irVI7").EDIT_INLINE_COMMENT_PUBLISH_EXPERIENCE,error:e})},[W,ei]),eC=(0,r.useCallback)((e,n)=>eg({mutationResult:n,commentId:N,updateCallback:t("jbF1h").updateCommentBodyInCacheCallback,onError:eI}),[N,eI,eg]);try{en=JSON.parse(A)}catch(e){_.error`Unable to parse content ADF, ${e}`}let ey=B&&D||(Q||H)&&D&&(0,t("9wGTI").fg)("confluence_frontend_content_wrapper"),ev=(0,r.useCallback)(({children:n})=>{let a=X?"25px":"90px",o=z?"-24px":"-25px";return(Q||H)&&(0,t("9wGTI").fg)("confluence_frontend_content_wrapper")?(a="65px",o=Q?"-24px":"-25px"):B&&(0,t("9wGTI").fg)("confluence-fe-footer-comment-left-border")&&(o="-24px"),ey?e(r).createElement(t("1Sjzs").WithCurvedBranchingStyle,{showDefaultStyles:!0,customStyles:{height:a,left:o}},n):e(r).createElement(e(r).Fragment,null,n)},[X,H,B,z,Q,ey]);return e(r).createElement(ev,null,e(r).createElement(t("6f0Oj").default,{xcss:[E,B&&g,Q&&D&&(0,t("9wGTI").fg)("confluence_frontend_content_wrapper")&&w,H&&!D&&(0,t("9wGTI").fg)("confluence_frontend_content_wrapper")&&y,(H||Q)&&D&&(0,t("9wGTI").fg)("confluence_frontend_content_wrapper")&&v,H&&D&&(0,t("9wGTI").fg)("confluence_frontend_content_wrapper")&&T],"data-cy":"editor-edit-container",ref:ef},e(r).createElement(p.CommentAuthor,{commentMode:"edit",userId:ea,date:O,createdAtNonLocalized:F,versionByDisplayName:L,versionDate:V,displayName:j,avatarUrl:M,commentDateUrl:P,resolveProperties:G,commentId:Z?N:null,isCommentsPanel:H,isGeneralComments:W===t("8i27m").CommentType.GENERAL,isReply:D,isEdited:k,isFooterComment:B,isStandaloneComment:Q}),e(r).createElement(t("6f0Oj").default,{xcss:[B&&C,B&&X&&I,Q&&D&&(0,t("9wGTI").fg)("confluence_frontend_content_wrapper")&&R,Q&&D&&!ee&&(0,t("9wGTI").fg)("confluence_frontend_content_wrapper")&&h,H&&!D&&(0,t("9wGTI").fg)("confluence_frontend_content_wrapper")&&b]},e(r).createElement(c.LazyCommentEditor,{pageId:n,pageType:a,spaceId:S,appearance:B?"comment":"chromeless",EditorComponent:B?l.CommentEditor:s.ChromelessEditor,commentId:N,commentMode:"edit",commentType:"view"===q?"inline":"edit-inline",onSaveComment:(s,l)=>{W===t("8i27m").CommentType.GENERAL?(0,t("8Ss4E").startEditorSubExperience)({name:t("irVI7").EDIT_PAGE_COMMENT_PUBLISH_EXPERIENCE,timeout:t("aJPUt").ExperienceTimeout.EDITOR_PUBLISH,attributes:{mode:e_}}):(0,t("8Ss4E").startEditorSubExperience)({name:t("irVI7").EDIT_INLINE_COMMENT_PUBLISH_EXPERIENCE,timeout:t("aJPUt").ExperienceTimeout.EDITOR_PUBLISH,attributes:{mode:e_}});let c=!1;(0,t("6mKj3").expVal)("cc_comments_new_comments_data_manager","isEnabled",!1)&&(c=!0);let p=JSON.stringify(s),u={input:{commentId:N,commentBody:{value:p,representationFormat:m.ATLAS_DOC_FORMAT}},includeVersionFields:c},E=()=>H||B?t("jkPJy").CommentsPanelQuery:Q&&(0,t("9wGTI").fg)("confluence_frontend_content_wrapper")?t("1C8XP").ActiveInlineCommentsQuery:t("3B9cR").InlineCommentQuery,g=()=>H||B?{pageId:n}:Q&&(0,t("9wGTI").fg)("confluence_frontend_content_wrapper")?{inlineMarkerRefList:[o],pageId:n,contentStatus:["DRAFT","CURRENT"]}:{annotationId:o,pageId:n,contentStatus:["DRAFT","CURRENT"]};return eE({variables:u,update:(0,t("6mKj3").expVal)("cc_comments_new_comments_data_manager","isEnabled",!1)?eC:a=>{try{let t,n=a.readQuery({query:E(),variables:g()}),o=Object.assign({},n),r=H||B?o?.comments?.nodes?.findIndex(e=>e?.id===N)||-1:0;if(-1===r)return;D?(o?.comments?.nodes[r].replies??[]).forEach(e=>{e?.id===N&&(t=e)}):t=o?.comments?.nodes[r],t&&(e(i)(t,"body.value",p),e(i)(t,"version.number",(t.version?.number??0)+1),e(i)(t,"version.when",new Date().toISOString()),e(i)(t,"version.by.displayName",eo)),a.writeQuery({query:E(),variables:g(),data:o})}catch(e){_.error`An Error occurred when updating cache for edit reply in panel or inline - ${e}`}W===t("8i27m").CommentType.GENERAL&&(0,t("87CZC").updateFooterApolloCacheOnEdit)(N,p,n,ec,a,eo)}}).then(()=>{if(W===t("8i27m").CommentType.GENERAL?ei.succeed({name:t("irVI7").EDIT_PAGE_COMMENT_PUBLISH_EXPERIENCE,attributes:{mode:e_,type:D?"reply":"topLevel"}}):ei.succeed({name:t("irVI7").EDIT_INLINE_COMMENT_PUBLISH_EXPERIENCE,attributes:{mode:e_,type:D?"reply":"topLevel"}}),er({type:"sendTrackEvent",data:{action:"updated",actionSubject:"comment",actionSubjectId:N,objectType:a,objectId:n,source:e_===t("cD1qu").PageMode.VIEW?"viewPageScreen":"editPageScreen",attributes:{commentType:W,pageType:a,source:H?t("en1dX").AnalyticsSource.COMMENTS_PANEL:B?t("en1dX").AnalyticsSource.PAGE_FOOTER:t("en1dX").AnalyticsSource.STANDALONE,pageMode:e_,isReply:D,navdexPointType:d.END,isLivePage:e_===t("cD1qu").PageMode.LIVE,inlineNodeTypes:Y&&o?Y(o):void 0}}}).fire(),o&&ed(N,o,p,W,eo),o&&em.onUpdateComment?.(o),ep&&eu)if(D){let e=eu.replies;if(e&&e.length>0){let t=e.findIndex(e=>e.id===N);if(-1!==t){let n=[...e],a=n[t];a&&a.version&&(n[t]={...a,body:{value:p},version:{...a.version,by:{...a.version.by,displayName:eo||a.version.by?.displayName||null},number:(a.version.number??0)+1,when:new Date().toISOString()}}),ep({...eu,replies:n})}}}else eu.version&&ep({...eu,body:{value:p},version:{...eu.version,by:{...eu.version.by,displayName:eo||eu.version.by?.displayName||null},number:(eu.version.number??0)+1,when:new Date().toISOString()}});l(),el(),x()}).catch(n=>{let{message:a}=(0,t("isdzP").parseError)(n),o=(0,t("isdzP").getTranslatedError)(a,N);return(0,t("9wGTI").fg)("confluence_frontend_show_already_deleted_flag")&&(0,t("isdzP").isAlreadyDeletedError)(o)&&($.showWarningFlag({title:e(r).createElement(t("gtD4K").default,f.cannotEditTitle),description:e(r).createElement(t("gtD4K").default,o)}),ei.abort({name:t("irVI7").EDIT_INLINE_COMMENT_PUBLISH_EXPERIENCE,reason:"Comment already deleted"})),(0,t("isdzP").isUnexpectedError)(o)?eI(n):(0,t("7Sm4c").markErrorAsHandled)(n),Promise.reject({error:o})})},content:en,onCancelComment:()=>{x(),el(),K&&K()},onContentChange:es,showCancelButton:!0,useNewWarningModal:!0,onEditorReady:()=>{W===t("8i27m").CommentType.GENERAL?ei.succeed({name:t("irVI7").EDIT_PAGE_COMMENT_LOAD_EXPERIENCE}):ei.succeed({name:t("irVI7").EDIT_INLINE_COMMENT_LOAD_EXPERIENCE})},hideWatchCheckbox:!0,pageMode:q,hasMediaUploadPermissions:U,commentContainerElementRef:ef,isStandaloneComment:Q,isFooterComment:B,isCommentsPanel:H,isOffline:J,hasParentMaxHeight:et}))))});n.exports.EditComment=N}),n("jkPJy",function(e,n){let a=(0,t("eSUdr").default)`query CommentsPanelQuery($pageId:ID!){comments(pageId:$pageId type:UNRESOLVED depth:ROOT first:50){nodes{id body(representation:ATLAS_DOC_FORMAT){value}contentStatus createdAt{value}createdAtNonLocalized links{webui editui}location{type ...on InlineComment{inlineMarkerRef inlineText inlineResolveProperties{resolved isDangling resolvedFriendlyDate resolvedTime resolvedUser}}...on FooterComment{commentResolveProperties{resolved resolvedFriendlyDate resolvedTime resolvedUser}}}parentId permissions{isEditable isRemovable isResolvable}version{by{displayName}when number}author{displayName profilePicture{path}permissionType ...on KnownUser{accountId}}createdAt{value}createdAtNonLocalized replies{id body(representation:ATLAS_DOC_FORMAT){value}contentStatus createdAt{value}createdAtNonLocalized links{webui editui}location{type ...on InlineComment{inlineMarkerRef inlineText inlineResolveProperties{resolved isDangling resolvedFriendlyDate resolvedTime resolvedUser}}...on FooterComment{commentResolveProperties{resolved resolvedFriendlyDate resolvedTime resolvedUser}}}parentId permissions{isEditable isRemovable isResolvable}version{by{displayName}when number}author{displayName profilePicture{path}permissionType ...on KnownUser{accountId}}createdAt{value}createdAtNonLocalized}}totalCount}}`;e.exports.CommentsPanelQuery=a}),n("kEmgx",function(n,a){var o=t("42omo"),r=t("c6FO3"),i=t("3u0dr"),s=t("frIzR");let l={argumentDefinitions:[],kind:"Fragment",name:"CommentActionsWriteReactionsSummaryFragment",selections:[{kind:"ScalarField",name:"ari"},{kind:"ScalarField",name:"containerAri"},{kind:"ScalarField",name:"reactionsCount"},{concreteType:"ReactionsSummaryForEmoji",kind:"LinkedField",name:"reactionsSummaryForEmoji",plural:!0,selections:[{kind:"ScalarField",name:"id"},{kind:"ScalarField",name:"emojiId"},{kind:"ScalarField",name:"count"},{kind:"ScalarField",name:"reacted"}]}],type:"ReactionsSummaryResponse"};l.hash="ac7b970423a77e8bceb853bf1fae7a69";let c={argumentDefinitions:[],kind:"Fragment",name:"CommentActionsReadReactionsSummaryFragment",selections:[{kind:"ScalarField",name:"ari"},{kind:"ScalarField",name:"containerAri"},{kind:"ScalarField",name:"reactionsCount"},{concreteType:"ReactionsSummaryForEmoji",kind:"LinkedField",name:"reactionsSummaryForEmoji",plural:!0,selections:[{kind:"ScalarField",name:"id"},{kind:"ScalarField",name:"emojiId"},{kind:"ScalarField",name:"count"},{kind:"ScalarField",name:"reacted"}]}],type:"ReactionsSummaryResponse"};c.hash="e36b984d531a5ed453a45170e33f0598";var d=t("jTxSS");let m=(0,o.forwardRef)(({as:n="div",style:a,...r},i)=>e(o).createElement(n,{...r,style:a,ref:i,className:(0,t("gMc0m").default)(["_1yt41ppf _bfhk1aqn _syaz15cr",r.className])})),p=(0,o.forwardRef)(({as:n="span",style:a,...r},i)=>{let{isReply:s,isInOverflowMenu:l,...c}=r;return e(o).createElement(n,{...c,style:a,ref:i,className:(0,t("gMc0m").default)(["_16jlkb7n _1o9zkb7n _i0dl1wug _80omtlke _uiztglyw",r.isReply?"_syazazsu":"_syaz1rpy",r.isInOverflowMenu?"_1yt4zc28":"_ca0q1wug _u5f31wug _n3td1wug _19bv1wug",r.className])})}),u=(0,o.forwardRef)(({as:n="div",style:a,...r},i)=>e(o).createElement(n,{...r,style:a,ref:i,className:(0,t("gMc0m").default)(["_11c81o8v _1bsbuuw1 _uiztglyw _o5724jg8",r.className])})),f=(0,o.forwardRef)(({as:n="span",style:a,...r},i)=>e(o).createElement(n,{...r,style:a,ref:i,className:(0,t("gMc0m").default)(["_ca0qidpf _u5f3idpf _n3tdidpf _19bvidpf _syaz1oa5 _1e0c1nu9 _80omtlke _9oik1r31 _1bnx8stv _jf4cnqa1",r.className])})),_=({action:n,isReply:a,isInOverflowMenu:r})=>{let{Popup:i}=(0,t("lsxnT").useChoreographerAssets)(),[s,l]=(0,o.useState)(!1),c=document.querySelector('[data-testid="comment-overflow-menu--content"]');c&&c.style&&(c.style.overflow="visible");let d=(0,o.useCallback)(e=>{e.stopPropagation(),l(!s)},[s]),_=e(o).createElement(u,{"data-testid":"disabled-explanation-dialog"},"edit"===n?e(o).createElement(o.Fragment,null,e(o).createElement(f,{"data-testid":"disabled-edit-action-link",onClick:()=>{let e=document.querySelector('[placeholder="Reply"]');e&&(e.focus(),l(!1))}},e(o).createElement(t("gtD4K").default,{id:"comment.no.edit.action.text",defaultMessage:"Add a new comment"}))," ",e(o).createElement(t("gtD4K").default,{id:"comment.no.edit.reason.text",defaultMessage:"since this one cannot be edited; it contains content created in a legacy version of Confluence."})):e(o).createElement(t("gtD4K").default,{id:"comment.no.delete.reason.text",defaultMessage:"You canâ€™t delete this comment because it has replies."})),E=()=>"edit"===n?a?e(o).createElement(t("gtD4K").default,{id:"comment.no.edit.inline.label",defaultMessage:"Edit is not available"}):e(o).createElement(t("gtD4K").default,{id:"comment.no.edit.overflow.menu.label",defaultMessage:"Edit"}):e(o).createElement(t("gtD4K").default,{id:"comment.no.delete.overflow.menu.label",defaultMessage:"Delete"});return e(o).createElement(i,{messageType:"transactional",messageId:"disabled-comment-action",content:()=>e(o).createElement(m,null,_),isOpen:s,placement:a?"bottom":"bottom-end",trigger:t=>e(o).createElement(p,{"data-testid":"disabled-action-container",onClick:d,isReply:a,isInOverflowMenu:r,...t},E())})};var E=t("cMvMc"),g=t("1NF8X");let I=async({cloudId:e})=>{if(e&&(0,t("9wGTI").fg)("dlp-dlm-data-retention-policy"))return(0,t("dYU3e").query)({query:t("d9uxk").default,variables:{cloudId:e},errorPolicy:"all"})},C=(0,t("eSUdr").default)`query CommentActionsReactionsCommentsQuery($contentId:ID!$containerId:ID!){comments(commentId:$contentId contentStatus:[DRAFT CURRENT]){nodes{id reactionsSummary(pageId:$containerId contentType:"page" childType:"comment"){reactionsCount ari containerAri reactionsSummaryForEmoji{emojiId count reacted id}}}}}`,y=(0,t("ecnYn").xcss)({marginTop:"space.0"}),v=(0,t("ecnYn").xcss)({paddingTop:"space.050",marginLeft:"space.200",paddingLeft:"space.300",paddingBottom:"space.100"}),T=(0,t("ecnYn").xcss)({paddingTop:"space.050",paddingBottom:"space.100"}),w=(0,t("ecnYn").xcss)({marginLeft:"space.0",paddingLeft:"space.0",paddingTop:"space.150",paddingBottom:"space.0"}),b=(0,t("ecnYn").xcss)({marginLeft:"space.0"}),R=(0,t("ecnYn").xcss)({borderLeft:"1.5px solid var(--ds-background-accent-gray-subtlest-hovered, #DDDEE1)"}),h=(0,t("ecnYn").xcss)({paddingLeft:"space.0"}),N=(0,o.forwardRef)((0,i.isReactCompilerActiveV1)()?(n,a)=>{let r,i,l,c,d,m,p=(0,s.c)(13);if(p[0]!==a||p[1]!==n){let{as:e,style:o,...s}=n;r=void 0===e?t("dAYOx").default:e,i=s,l=o,c=a,d=(0,t("gMc0m").default)(["_ca0qgrf3 _u5f3grf3 _n3tdgrf3 _19bvgrf3",s.className]),p[0]=a,p[1]=n,p[2]=r,p[3]=i,p[4]=l,p[5]=c,p[6]=d}else r=p[2],i=p[3],l=p[4],c=p[5],d=p[6];return p[7]!==r||p[8]!==i||p[9]!==l||p[10]!==c||p[11]!==d?(m=e(o).createElement(r,{...i,style:l,ref:c,className:d}),p[7]=r,p[8]=i,p[9]=l,p[10]=c,p[11]=d,p[12]=m):m=p[12],m}:({as:n=t("dAYOx").default,style:a,...r},i)=>e(o).createElement(n,{...r,style:a,ref:i,className:(0,t("gMc0m").default)(["_ca0qgrf3 _u5f3grf3 _n3tdgrf3 _19bvgrf3",r.className])})),S=(0,o.forwardRef)((0,i.isReactCompilerActiveV1)()?(n,a)=>{let r,i,l,c,d,m,p=(0,s.c)(13);if(p[0]!==a||p[1]!==n){let{as:e,style:o,...s}=n,{isCommentsPanel:m,enableDropdownForEditMode:u,showClose:f,isUnread:_,isCommentActive:E,...g}=s;r=void 0===e?"span":e,i=g,l=o,c=a,d=(0,t("gMc0m").default)(["_zs121y44 _l58r1y44 _14hp1tcg _1kmv1tcg _jq8g1tcg _k6rd1tcg _u5wqgktf _zbjigktf _boltgktf _5fdigktf",s.isCommentsPanel?"_kqswh2mm":"_kqswstnw",s.isCommentsPanel?"_154iidpf":"view"===s.mode?"_154i1fm0":s.enableDropdownForEditMode?"_154iukr8":s.showClose?"_154ir5cr":"_154i1i6y",s.isCommentsPanel?"_1xi2n7od":"view"!==s.mode?s.enableDropdownForEditMode||s.showClose?"_1xi21ejb":"_1xi21b66":s.isCommentsPanel?s.isUnread?"_1xi21ejb":"_1xi2ze3t":"_1xi21jfw",s.isCommentActive||"view-all"!==s.mode?"_3um0ewfl":"_3um015vq",s.className]),p[0]=a,p[1]=n,p[2]=r,p[3]=i,p[4]=l,p[5]=c,p[6]=d}else r=p[2],i=p[3],l=p[4],c=p[5],d=p[6];return p[7]!==r||p[8]!==i||p[9]!==l||p[10]!==c||p[11]!==d?(m=e(o).createElement(r,{...i,style:l,ref:c,className:d}),p[7]=r,p[8]=i,p[9]=l,p[10]=c,p[11]=d,p[12]=m):m=p[12],m}:({as:n="span",style:a,...r},i)=>{let{isCommentsPanel:s,enableDropdownForEditMode:l,showClose:c,isUnread:d,isCommentActive:m,...p}=r;return e(o).createElement(n,{...p,style:a,ref:i,className:(0,t("gMc0m").default)(["_zs121y44 _l58r1y44 _14hp1tcg _1kmv1tcg _jq8g1tcg _k6rd1tcg _u5wqgktf _zbjigktf _boltgktf _5fdigktf",r.isCommentsPanel?"_kqswh2mm":"_kqswstnw",r.isCommentsPanel?"_154iidpf":"view"===r.mode?"_154i1fm0":r.enableDropdownForEditMode?"_154iukr8":r.showClose?"_154ir5cr":"_154i1i6y",r.isCommentsPanel?"_1xi2n7od":"view"!==r.mode?r.enableDropdownForEditMode||r.showClose?"_1xi21ejb":"_1xi21b66":r.isCommentsPanel?r.isUnread?"_1xi21ejb":"_1xi2ze3t":"_1xi21jfw",r.isCommentActive||"view-all"!==r.mode?"_3um0ewfl":"_3um015vq",r.className])})}),A=(0,t("ecnYn").xcss)({cursor:"pointer"}),x=(0,o.forwardRef)((0,i.isReactCompilerActiveV1)()?(n,a)=>{let r,i,l,c,d,m,p=(0,s.c)(13);if(p[0]!==a||p[1]!==n){let{as:e,style:o,...s}=n;r=void 0===e?"div":e,i=s,l=o,c=a,d=(0,t("gMc0m").default)(["_ae4v1h6o _80omtlke",s.className]),p[0]=a,p[1]=n,p[2]=r,p[3]=i,p[4]=l,p[5]=c,p[6]=d}else r=p[2],i=p[3],l=p[4],c=p[5],d=p[6];return p[7]!==r||p[8]!==i||p[9]!==l||p[10]!==c||p[11]!==d?(m=e(o).createElement(r,{...i,style:l,ref:c,className:d}),p[7]=r,p[8]=i,p[9]=l,p[10]=c,p[11]=d,p[12]=m):m=p[12],m}:({as:n="div",style:a,...r},i)=>e(o).createElement(n,{...r,style:a,ref:i,className:(0,t("gMc0m").default)(["_ae4v1h6o _80omtlke",r.className])})),D=(0,o.forwardRef)((0,i.isReactCompilerActiveV1)()?(n,a)=>{let r,i,l,c,d,m,p=(0,s.c)(13);if(p[0]!==a||p[1]!==n){let{as:e,style:o,...s}=n,{hasReactions:m,isCommentsPanel:u,...f}=s;r=void 0===e?"div":e,i=f,l=o,c=a,d=(0,t("gMc0m").default)(["",s.hasReactions?"_1e0c1ule":"_1e0c116y",s.hasReactions?"_i0dl1osq":"_i0dl1wug",s.isCommentsPanel||s.hasReactions?"_19pkze3t":"_19pk1b66",s.isCommentsPanel||s.hasReactions?"_18u0ze3t":"_18u01b66",s.className]),p[0]=a,p[1]=n,p[2]=r,p[3]=i,p[4]=l,p[5]=c,p[6]=d}else r=p[2],i=p[3],l=p[4],c=p[5],d=p[6];return p[7]!==r||p[8]!==i||p[9]!==l||p[10]!==c||p[11]!==d?(m=e(o).createElement(r,{...i,style:l,ref:c,className:d}),p[7]=r,p[8]=i,p[9]=l,p[10]=c,p[11]=d,p[12]=m):m=p[12],m}:({as:n="div",style:a,...r},i)=>{let{hasReactions:s,isCommentsPanel:l,...c}=r;return e(o).createElement(n,{...c,style:a,ref:i,className:(0,t("gMc0m").default)(["",r.hasReactions?"_1e0c1ule":"_1e0c116y",r.hasReactions?"_i0dl1osq":"_i0dl1wug",r.isCommentsPanel||r.hasReactions?"_19pkze3t":"_19pk1b66",r.isCommentsPanel||r.hasReactions?"_18u0ze3t":"_18u01b66",r.className])})}),k=(0,o.forwardRef)((0,i.isReactCompilerActiveV1)()?(n,a)=>{let r,i,l,c,d,m,p=(0,s.c)(13);if(p[0]!==a||p[1]!==n){let{as:e,style:o,...s}=n;r=void 0===e?"li":e,i=s,l=o,c=a,d=(0,t("gMc0m").default)(["_2lx2vrvc _1n261q9c _1e0c116y _syazazsu _1tke1tcg _4cvr1h6o _xrwlcs5v _144bkb7n _14p1f1ug _ekv61o8v _6wjiesu3 _43ds1oa5 _1pzmusic _ep9t1b66 _5lhmtlke _1tzjf4df _8bo21mp2 _nqnuazsu _d32vazsu _nlwjglyw _49cd7g83",s.className]),p[0]=a,p[1]=n,p[2]=r,p[3]=i,p[4]=l,p[5]=c,p[6]=d}else r=p[2],i=p[3],l=p[4],c=p[5],d=p[6];return p[7]!==r||p[8]!==i||p[9]!==l||p[10]!==c||p[11]!==d?(m=e(o).createElement(r,{...i,style:l,ref:c,className:d}),p[7]=r,p[8]=i,p[9]=l,p[10]=c,p[11]=d,p[12]=m):m=p[12],m}:({as:n="li",style:a,...r},i)=>e(o).createElement(n,{...r,style:a,ref:i,className:(0,t("gMc0m").default)(["_2lx2vrvc _1n261q9c _1e0c116y _syazazsu _1tke1tcg _4cvr1h6o _xrwlcs5v _144bkb7n _14p1f1ug _ekv61o8v _6wjiesu3 _43ds1oa5 _1pzmusic _ep9t1b66 _5lhmtlke _1tzjf4df _8bo21mp2 _nqnuazsu _d32vazsu _nlwjglyw _49cd7g83",r.className])})),M=(0,o.forwardRef)((0,i.isReactCompilerActiveV1)()?(n,a)=>{let r,i,l,c,d,m,p=(0,s.c)(13);if(p[0]!==a||p[1]!==n){let{as:e,style:o,...s}=n;r=void 0===e?"button":e,i=s,l=o,c=a,d=(0,t("gMc0m").default)(["_11q7glyw _19itglyw _ca0qidpf _u5f3idpf _n3tdidpf _19bvidpf _12ji1r31 _1qu21kw7 _12y31o36 _syaz1kw7 _1wyb1kw7 _80omtlke _1as91r31 _j4qy8stv _1wwgnqa1 _y2mv7g83 _1bg4yh40",s.className]),p[0]=a,p[1]=n,p[2]=r,p[3]=i,p[4]=l,p[5]=c,p[6]=d}else r=p[2],i=p[3],l=p[4],c=p[5],d=p[6];return p[7]!==r||p[8]!==i||p[9]!==l||p[10]!==c||p[11]!==d?(m=e(o).createElement(r,{...i,style:l,ref:c,className:d}),p[7]=r,p[8]=i,p[9]=l,p[10]=c,p[11]=d,p[12]=m):m=p[12],m}:({as:n="button",style:a,...r},i)=>e(o).createElement(n,{...r,style:a,ref:i,className:(0,t("gMc0m").default)(["_11q7glyw _19itglyw _ca0qidpf _u5f3idpf _n3tdidpf _19bvidpf _12ji1r31 _1qu21kw7 _12y31o36 _syaz1kw7 _1wyb1kw7 _80omtlke _1as91r31 _j4qy8stv _1wwgnqa1 _y2mv7g83 _1bg4yh40",r.className])})),O=(0,t("ecnYn").xcss)({":hover":{textDecoration:"underline"}}),P=(0,t("ecnYn").xcss)({position:"absolute",right:"space.0",display:"flex",gap:"space.075",justifyContent:"space-between",alignItems:"center",paddingLeft:"space.150"}),F=(0,t("ecnYn").xcss)({top:"space.0"}),L=(0,t("ecnYn").xcss)({top:"space.150",right:"space.200"}),V=(0,t("ecnYn").xcss)({top:"space.100"}),G=(0,t("ecnYn").xcss)({background:"var(--ds-surface-raised, #FFFFFF)"}),j=(0,t("ecnYn").xcss)({background:"var(--ds-surface, #FFFFFF)"}),q=(0,t("ecnYn").xcss)({background:"var(--ds-background-input, #FFFFFF)"}),U=(0,t("ecnYn").xcss)({background:"var(--ds-background-input-hovered, #F8F8F8)"}),H=(0,t("ecnYn").xcss)({paddingLeft:"space.050"}),B=(0,i.isReactCompilerActiveV1)()?n=>{let a,r,i,m,p,u,f,B,z,K,Y,W,$,Q,J,Z,ee,et,en,ea,eo,er,ei,es,el,ec,ed,em,ep,eu,ef,e_,eE,eg,eI,eC,ey,ev,eT,ew,eb,eR,eh=(0,s.c)(283),{pageId:eN,pageType:eS,commentId:eA,permissions:ex,isReply:eD,parentCommentId:ek,restrictEdit:eM,restrictDelete:eO,deleteComment:eP,editComment:eF,resolveComment:eL,isCommentActive:eV,mode:eG,onClose:ej,overflowMenuPortal:eq,supportedActions:eU,isCommentsPanel:eH,isHovered:eB,annotationId:eX,resolveProperties:ez,reopenComment:eK,replyToComment:eY,isUnread:eW,inheritedReactionsData:e$,reactionsCacheUpdateFn:eQ,commentDateUrl:eJ,isResolvedByAnotherUser:eZ,commentType:e1,hideBranchingStyle:e0,canAddComments:e2,isDeletedByAnotherUser:e9,isSelected:e8,isParentCommentOpen:e3,isFooterComment:e6,isStandaloneComment:e7,isOffline:e5,numReplies:e4,isFabricPage:te,authorName:tt,isArchived:tn}=n;eh[0]!==eU?(a=void 0===eU?["edit","delete","resolve"]:eU,eh[0]=eU,eh[1]=a):a=eh[1];let ta=a,to=void 0!==eH&&eH,tr=void 0!==eW&&eW,ti=void 0!==e0&&e0,ts=void 0===e2||e2,tl=void 0!==e9&&e9,tc=void 0!==e8&&e8,td=void 0!==e6&&e6,tm=void 0!==e7&&e7,tp=void 0!==e5&&e5,tu=void 0===te||te,tf=(0,t("1pSma").default)("delete-comment-action"),t_=(0,t("1pSma").default)("start-edit-comment-action"),tE=(0,t("1pSma").default)("start-reply-comment-action"),tg=(0,t("1pSma").default)("resolve-comment-action"),[tI,tC]=(0,o.useState)(!1),[ty,tv]=(0,o.useState)(!1),[tT,tw]=(0,o.useState)(!1),[tb,tR]=(0,o.useState)(!1),[th,tN]=(0,o.useState)(!1),[tS,tA]=(0,o.useState)(!1),tx=(0,o.useContext)(t("1kHsc").ExperienceTrackerContext),{isReactionsEnabled:tD}=(0,o.useContext)(t("8SCD6").ReactionsContext),[tk,tM]=(0,o.useState)(e$?.reactionsCount||0);eh[2]===Symbol.for("react.memo_cache_sentinel")?(r={},eh[2]=r):r=eh[2];let[tO,tP]=(0,o.useState)(r),{hasContentChanged:tF}=(0,t("bSvtO").useCommentsContentState)(),{resetContentChanged:tL}=(0,t("bSvtO").useCommentsContentActions)(),{showModal:tV}=(0,t("8aF6s").useDialogs)(),{updateReactionsSummary:tG}=(0,t("8i27m").useCommentsDataActions)();eh[3]===Symbol.for("react.memo_cache_sentinel")?(i={fragmentSpec:c},eh[3]=i):i=eh[3];let tj=(0,t("fFmJj").useReadFragmentInterop)(i);eh[4]===Symbol.for("react.memo_cache_sentinel")?(m={fragmentSpec:l},eh[4]=m):m=eh[4];let tq=(0,t("ij4CE").useWriteFragmentInterop)(m),{edition:tU,cloudId:tH}=(0,t("bQm3c").useSessionData)(),{commentService:tB}=(0,t("6hmtW").useCommentService)(),tX=(0,t("3jwuS").useIsCurrentPageLive)(),[tz]=(0,t("ep3mz").usePageContentId)();eh[5]!==tz?(p=(0,t("9sGCn").getCachedPageData)(tz),eh[5]=tz,eh[6]=p):p=eh[6];let{subType:tK}=p,{formatMessage:tY}=(0,t("8C5kA").default)();eh[7]!==tx?(u=e=>{tx.stopOnError({name:t("irVI7").VIEW_REACTIONS_EXPERIENCE,error:e})},eh[7]=tx,eh[8]=u):u=eh[8];let tW=u;eh[9]!==eA||eh[10]!==eN?(f={contentId:eA,containerId:eN},eh[9]=eA,eh[10]=eN,eh[11]=f):f=eh[11];let t$=!!e$;eh[12]!==tW||eh[13]!==f||eh[14]!==t$?(B={variables:f,onError:tW,fetchPolicy:"cache-and-network",skip:t$},eh[12]=tW,eh[13]=f,eh[14]=t$,eh[15]=B):B=eh[15];let{data:tQ,loading:tJ}=(0,t("xQxzY").useQuery)(C,B);eh[16]!==e$||eh[17]!==tQ?.comments?.nodes?.[0]?.reactionsSummary?.reactionsCount?(z=()=>{tM((void 0===e$?tQ?.comments?.nodes?.[0]?.reactionsSummary?.reactionsCount:e$?.reactionsCount)||0)},eh[16]=e$,eh[17]=tQ?.comments?.nodes?.[0]?.reactionsSummary?.reactionsCount,eh[18]=z):z=eh[18],eh[19]!==e$||eh[20]!==tQ?(K=[tQ,e$],eh[19]=e$,eh[20]=tQ,eh[21]=K):K=eh[21],(0,o.useEffect)(z,K),eh[22]!==eX||eh[23]!==e1||eh[24]!==eP||eh[25]!==eF||eh[26]!==to||eh[27]!==tu||eh[28]!==eB||eh[29]!==tp||eh[30]!==eD||eh[31]!==eZ||eh[32]!==eG||eh[33]!==ex?.isEditable||eh[34]!==ex?.isRemovable||eh[35]!==ex?.isResolvable||eh[36]!==eK||eh[37]!==eL||eh[38]!==ez?.isDangling||eh[39]!==ez?.resolved||eh[40]!==ta?(Y=()=>{let e=tp&&(0,t("6mKj3").expVal)("platform_editor_offline_editing_web","isEnabled",!1),n=!!(ex?.isEditable&&eF&&ta.includes("edit")&&!e),a=!!(ex?.isRemovable&&eP&&ta.includes("delete")&&!e),o=!!(ex?.isResolvable&&eL&&ta.includes("resolve")&&!e),r=!!(eK&&ta.includes("reopen")&&ex?.isResolvable&&!eD)&&!e;ez?.resolved&&ez?.isDangling?(0,t("9wGTI").fg)("confluence_frontend_content_wrapper")?tA(r):tA(!1):tA(!!(r&&(ez?.resolved||eZ)&&(eX&&(0,t("g0DaR").inlineCommentExists)(eX)||e1===t("8i27m").CommentType.GENERAL))),"view"===eG||"edit"===eG?(eD?tN(!1):tN(o),to||tu&&(0,t("9wGTI").fg)("confluence_frontend_content_wrapper")?tv(!!(0,t("9wGTI").fg)("confluence_frontend_content_wrapper")||!!eB&&!(0,t("9wGTI").fg)("confluence_frontend_content_wrapper")&&(n||a||o)):!eD&&(n||a||o)&&tv(!0),tR(a),tw(n)):(tR(a),tw(n),tN(o&&!eD))},eh[22]=eX,eh[23]=e1,eh[24]=eP,eh[25]=eF,eh[26]=to,eh[27]=tu,eh[28]=eB,eh[29]=tp,eh[30]=eD,eh[31]=eZ,eh[32]=eG,eh[33]=ex?.isEditable,eh[34]=ex?.isRemovable,eh[35]=ex?.isResolvable,eh[36]=eK,eh[37]=eL,eh[38]=ez?.isDangling,eh[39]=ez?.resolved,eh[40]=ta,eh[41]=Y):Y=eh[41];let tZ=ez?.isDangling,t1=ez?.resolved;eh[42]!==eX||eh[43]!==e1||eh[44]!==eP||eh[45]!==eF||eh[46]!==to||eh[47]!==tu||eh[48]!==eB||eh[49]!==tp||eh[50]!==eD||eh[51]!==eZ||eh[52]!==eG||eh[53]!==ex||eh[54]!==eK||eh[55]!==eL||eh[56]!==ta||eh[57]!==tZ||eh[58]!==t1?(W=[eG,ex,eB,eD,to,ta,eP,eF,eL,eK,tZ,eX,t1,eZ,e1,tp,tu],eh[42]=eX,eh[43]=e1,eh[44]=eP,eh[45]=eF,eh[46]=to,eh[47]=tu,eh[48]=eB,eh[49]=tp,eh[50]=eD,eh[51]=eZ,eh[52]=eG,eh[53]=ex,eh[54]=eK,eh[55]=eL,eh[56]=ta,eh[57]=tZ,eh[58]=t1,eh[59]=W):W=eh[59],(0,o.useEffect)(Y,W),eh[60]!==to||eh[61]!==tI||eh[62]!==eB?($=()=>{to&&tI&&!(0,t("9wGTI").fg)("confluence_frontend_content_wrapper")&&!eB&&tC(!1)},Q=[to,tI,eB,tC],eh[60]=to,eh[61]=tI,eh[62]=eB,eh[63]=$,eh[64]=Q):($=eh[63],Q=eh[64]),(0,o.useEffect)($,Q),eh[65]!==tX||eh[66]!==eG?(J=()=>{switch(eG){case"view":return t("ad6ZE").InlineCommentMode.VIEW;case"edit":if(tX)return t("ad6ZE").InlineCommentMode.LIVE;return t("ad6ZE").InlineCommentMode.EDIT}},eh[65]=tX,eh[66]=eG,eh[67]=J):J=eh[67];let t0=J;if(eh[68]!==eX||eh[69]!==e1||eh[70]!==eP||eh[71]!==tf||eh[72]!==tx||eh[73]!==t0||eh[74]!==to||eh[75]!==eD||eh[76]!==tV){Z=()=>{e1===t("8i27m").CommentType.INLINE?tx.start({name:t("irVI7").DELETE_INLINE_COMMENT_EXPERIENCE,attributes:{...(0,t("gtj7V").getCommentsDataManagerExperimentAttributes)(),mode:t0(),framework:t("kmHPt").InlineCommentFramework.ANNOTATION_PROVIDER,isReply:eD,source:to?t("en1dX").AnalyticsSource.COMMENTS_PANEL:t("en1dX").AnalyticsSource.STANDALONE,annotationId:eX}}):tx.start({name:t("irVI7").DELETE_PAGE_COMMENT_EXPERIENCE,attributes:{...(0,t("gtj7V").getCommentsDataManagerExperimentAttributes)(),isReply:eD}}),tV(E.CommentWarningDialog,{onConfirm:()=>{e()},isDelete:!0,onCancel:()=>{tx.abort({name:e1===t("8i27m").CommentType.INLINE?t("irVI7").DELETE_INLINE_COMMENT_EXPERIENCE:t("irVI7").DELETE_PAGE_COMMENT_EXPERIENCE,reason:"delete dialog closed"})}})};let e=()=>{eP&&(tf(),eP())};eh[68]=eX,eh[69]=e1,eh[70]=eP,eh[71]=tf,eh[72]=tx,eh[73]=t0,eh[74]=to,eh[75]=eD,eh[76]=tV,eh[77]=Z}else Z=eh[77];eh[78]!==eX||eh[79]!==e1||eh[80]!==eF||eh[81]!==tU||eh[82]!==t0||eh[83]!==td||eh[84]!==eD?(ee=()=>{e1===t("8i27m").CommentType.INLINE?(0,t("8Ss4E").startEditorExperiences)({name:t("irVI7").EDIT_INLINE_COMMENT_EXPERIENCE,attributes:{...(0,t("gtj7V").getCommentsDataManagerExperimentAttributes)(),mode:t0(),framework:t("kmHPt").InlineCommentFramework.ANNOTATION_PROVIDER,isReply:eD,type:eD?"reply":"topLevel",annotationId:eX}},{name:t("irVI7").EDIT_INLINE_COMMENT_LOAD_EXPERIENCE},{name:t("irVI7").EDIT_INLINE_COMMENT_PUBLISH_EXPERIENCE}):(0,t("8Ss4E").startEditorExperiences)({name:t("irVI7").EDIT_PAGE_COMMENT_EXPERIENCE,attributes:{...(0,t("gtj7V").getCommentsDataManagerExperimentAttributes)(),editor:"FABRIC",isSingleExperience:!0,edition:tU,type:eD?"reply":"topLevel",source:td?t("en1dX").AnalyticsSource.PAGE_FOOTER:t("en1dX").AnalyticsSource.COMMENTS_PANEL}},{name:t("irVI7").EDIT_PAGE_COMMENT_LOAD_EXPERIENCE},{name:t("irVI7").EDIT_PAGE_COMMENT_PUBLISH_EXPERIENCE}),eF&&eF()},eh[78]=eX,eh[79]=e1,eh[80]=eF,eh[81]=tU,eh[82]=t0,eh[83]=td,eh[84]=eD,eh[85]=ee):ee=eh[85];let t2=ee;eh[86]!==t_||eh[87]!==t2?(et=()=>{t_(),t2()},eh[86]=t_,eh[87]=t2,eh[88]=et):et=eh[88];let t9=et;if(eh[89]!==eA||eh[90]!==tF||eh[91]!==td||eh[92]!==ek||eh[93]!==tE||eh[94]!==eY||eh[95]!==tL||eh[96]!==tV){en=()=>{let t=td?eA:ek||eA;tF?tV(E.CommentWarningDialog,{onConfirm:()=>{tL(),e(t)}}):e(t)};let e=e=>{eY&&(tE(),eY(e))};eh[89]=eA,eh[90]=tF,eh[91]=td,eh[92]=ek,eh[93]=tE,eh[94]=eY,eh[95]=tL,eh[96]=tV,eh[97]=en}else en=eh[97];eh[98]!==eJ?(ea=async()=>{let e=`${window.location.origin}/wiki${eJ}`;(0,t("aHcFH").isClipboardApiSupported)()?await (0,t("aHcFH").copyToClipboard)(e):(0,t("aHcFH").isIEClipboardApiSupported)()&&await (0,t("aHcFH").copyToClipboardIE)(e)},eh[98]=eJ,eh[99]=ea):ea=eh[99];let t8=ea;if(eh[100]!==eX||eh[101]!==eA||eh[102]!==e1||eh[103]!==tx||eh[104]!==t0||eh[105]!==tF||eh[106]!==tL||eh[107]!==eL||eh[108]!==tg||eh[109]!==tV){eo=()=>{let n=()=>{e1===t("8i27m").CommentType.INLINE?tx.start({name:t("irVI7").RESOLVE_INLINE_COMMENT_EXPERIENCE,id:eA,attributes:{...(0,t("gtj7V").getCommentsDataManagerExperimentAttributes)(),mode:t0(),framework:t("kmHPt").InlineCommentFramework.ANNOTATION_PROVIDER,annotationId:eX}}):tx.start({name:t("irVI7").RESOLVE_PAGE_COMMENT_EXPERIENCE,id:eA,attributes:{...(0,t("gtj7V").getCommentsDataManagerExperimentAttributes)(),annotationId:eX}}),e()};tF?tV(E.CommentWarningDialog,{onConfirm:()=>{tL(),n()}}):n()};let e=()=>{eL&&(tg(),eL())};eh[100]=eX,eh[101]=eA,eh[102]=e1,eh[103]=tx,eh[104]=t0,eh[105]=tF,eh[106]=tL,eh[107]=eL,eh[108]=tg,eh[109]=tV,eh[110]=eo}else eo=eh[110];eh[111]!==eK?(er=()=>{eK&&eK()},eh[111]=eK,eh[112]=er):er=eh[112];let t3=er;eh[113]===Symbol.for("react.memo_cache_sentinel")?(ei=(e,t)=>{tP(n=>({...n,[e]:t}))},eh[113]=ei):ei=eh[113];let t6=ei;eh[114]!==t2||eh[115]!==t9||eh[116]!==eD?(es=(n,a)=>a?n?e(o).createElement(N,{testId:"disabled-edit-comment-dropdown-action"},e(o).createElement(_,{action:"edit",isReply:eD,isInOverflowMenu:!0})):e(o).createElement(t("dAYOx").default,{testId:"edit-comment-dropdown-action","data-cy":"edit-comment-action",onClick:t2,interactionName:"start-edit-comment-action"},e(o).createElement(t("gtD4K").default,t("9CnRS").i18n.edit)):n?e(o).createElement(_,{action:"edit",isReply:eD,isInOverflowMenu:!0}):e(o).createElement(M,{"data-testid":"edit-comment-action","data-cy":"edit-comment-action",onClick:t9},e(o).createElement(t("gtD4K").default,t("9CnRS").i18n.edit)),eh[114]=t2,eh[115]=t9,eh[116]=eD,eh[117]=es):es=eh[117];let t7=es;eh[118]!==tH||eh[119]!==Z||eh[120]!==eD?(el=(n,a)=>a?n?e(o).createElement(N,{testId:"disabled-delete-comment-dropdown-action"},e(o).createElement(_,{action:"delete",isReply:eD,isInOverflowMenu:!0})):e(o).createElement(t("dAYOx").default,{testId:"delete-comment-dropdown-action",onClick:Z},e(o).createElement(t("gtD4K").default,t("9CnRS").i18n.delete)):n?e(o).createElement(_,{action:"delete",isReply:eD}):e(o).createElement(M,{"data-testid":"delete-comment-action",onClick:Z,onMouseEnter:()=>I({cloudId:tH})},e(o).createElement(t("gtD4K").default,t("9CnRS").i18n.delete)),eh[118]=tH,eh[119]=Z,eh[120]=eD,eh[121]=el):el=eh[121];let t5=el;eh[122]!==tS||eh[123]!==tY||eh[124]!==t3||eh[125]!==to||eh[126]!==eZ||eh[127]!==ez?.isDangling?(ec=()=>tS&&e(o).createElement("div",{className:(0,t("gMc0m").default)(["_zulp12x7 _1e0c1txw _1bah1h6o _4cvr1h6o"])},eZ&&!(0,t("9wGTI").fg)("confluence_frontend_content_wrapper")&&e(o).createElement("div",{className:(0,t("gMc0m").default)(["_11c81vhk _syazazsu"])},tY(t("9CnRS").i18n.resolved)),e(o).createElement(t("1qfLF").default,{icon:n=>e(o).createElement(e(t("3sFtD")),{...n,spacing:"spacious",color:"var(--ds-icon-success, #6A9A23)",label:tY(t("9CnRS").i18n.reopen)}),label:tY(t("9CnRS").i18n.reopen),isTooltipDisabled:!1,onClick:t3,appearance:"subtle",testId:"reopen-comment-action",analyticsContext:{attributes:{name:t("en1dX").ActionName.REOPEN_COMMENT,source:to?t("en1dX").AnalyticsSource.COMMENTS_PANEL:t("en1dX").AnalyticsSource.STANDALONE,isDanglingComment:ez?.isDangling}}})),eh[122]=tS,eh[123]=tY,eh[124]=t3,eh[125]=to,eh[126]=eZ,eh[127]=ez?.isDangling,eh[128]=ec):ec=eh[128];let t4=ec;eh[129]!==en||eh[130]!==to?(ed=()=>{if(to||(0,t("9wGTI").fg)("confluence_frontend_comments_panel_v2"))return e(o).createElement(x,null,e(o).createElement(M,{"data-testid":"reply-comment-action","data-cy":"reply-comment-action",onClick:en},e(o).createElement(t("gtD4K").default,t("9CnRS").i18n.replyPlaceholder)))},eh[129]=en,eh[130]=to,eh[131]=ed):ed=eh[131];let ne=ed;eh[132]!==t8?(em=()=>e(o).createElement(t("dAYOx").default,{testId:"copy-link-dropdown-action",onClick:t8},e(o).createElement(t("gtD4K").default,t("9CnRS").i18n.copyLink)),eh[132]=t8,eh[133]=em):em=eh[133];let nt=em;eh[134]!==eo||eh[135]!==to||eh[136]!==eD?(ep=()=>{if(!(to&&eD&&(0,t("9wGTI").fg)("confluence-frontend-comments-panel")))return e(o).createElement(t("dAYOx").default,{testId:"resolve-comment-dropdown-action",onClick:eo},e(o).createElement(t("gtD4K").default,t("9CnRS").i18n.resolve))},eh[134]=eo,eh[135]=to,eh[136]=eD,eh[137]=ep):ep=eh[137];let nn=ep;eh[138]!==tH||eh[139]!==e1||eh[140]!==tY||eh[141]!==eV||eh[142]!==to||eh[143]!==tI||eh[144]!==tT||eh[145]!==tu||eh[146]!==td||eh[147]!==tb||eh[148]!==eD||eh[149]!==th||eh[150]!==tr||eh[151]!==eG||eh[152]!==ej||eh[153]!==eq||eh[154]!==nt||eh[155]!==t5||eh[156]!==t7||eh[157]!==nn||eh[158]!==ty?(eu=(n,a)=>{let r=!tT&&!tb&&(eD||!th),i=!to&&r,s=to&&r&&!(0,t("9wGTI").fg)("confluence_frontend_comments_panel_v2");if(i||s)return e(o).createElement(e(o).Fragment,null);let l=e(o).createElement(S,{"data-cy":"comment-overflow-actions-menu","data-testid":"comment-overflow-actions-menu",isCommentActive:eV,mode:eG,showClose:!!ej,enableDropdownForEditMode:(0,t("9wGTI").fg)("confluence-frontend-comments-panel")||"edit"===eG,isCommentsPanel:(to||(0,t("9wGTI").fg)("confluence_frontend_content_wrapper"))&&tu,isUnread:tr},e(o).createElement(t("52EPl").default,{testId:"comment-overflow-menu",isOpen:tI,placement:"bottom-end",onOpenChange:e=>{let{isOpen:t,event:n}=e;n?.stopPropagation(),tC(t),tb&&I({cloudId:tH})},trigger:n=>{let{triggerRef:a,...r}=n;return e(o).createElement(t("1qfLF").default,{...r,testId:"comment-overflow-menu-trigger",ref:a,label:tY(t("9CnRS").i18n.commentActionsMenuLabel),appearance:"subtle",icon:e(t("9VJDA")),isTooltipDisabled:!1,isSelected:tI,analyticsContext:{attributes:{name:"moreActionsButton",source:to?t("en1dX").AnalyticsSource.COMMENTS_PANEL:t("en1dX").AnalyticsSource.STANDALONE,commentType:e1}}})}},e(o).createElement(t("ahaN7").default,null,tu&&(to||(0,t("9wGTI").fg)("confluence_frontend_content_wrapper"))&&(0,t("9wGTI").fg)("confluence_frontend_comments_panel_v2")&&nt(),(!to&&!(0,t("9wGTI").fg)("confluence_frontend_content_wrapper")||!tu&&!td)&&th&&nn(),tT&&t7(n,ty),tb&&t5(a,ty))));return eq&&!(0,t("9wGTI").fg)("confluence_frontend_content_wrapper")?(0,d.createPortal)(l,eq):l},eh[138]=tH,eh[139]=e1,eh[140]=tY,eh[141]=eV,eh[142]=to,eh[143]=tI,eh[144]=tT,eh[145]=tu,eh[146]=td,eh[147]=tb,eh[148]=eD,eh[149]=th,eh[150]=tr,eh[151]=eG,eh[152]=ej,eh[153]=eq,eh[154]=nt,eh[155]=t5,eh[156]=t7,eh[157]=nn,eh[158]=ty,eh[159]=eu):eu=eh[159];let na=eu;e:{let e;if(eQ){ef=eQ;break e}eh[160]!==eX||eh[161]!==tB||eh[162]!==e1||eh[163]!==e$||eh[164]!==to||eh[165]!==tj||eh[166]!==tG||eh[167]!==tq?(e=void 0!==e$&&to?(e,t,n,a,o)=>(tP(n=>({...n,[e]:"add"===t})),eX&&e&&t&&tB?.onUpdateReaction(eX,e,t),tG(e,t,n,e1,tj,tq,a,eX,o)):void 0,eh[160]=eX,eh[161]=tB,eh[162]=e1,eh[163]=e$,eh[164]=to,eh[165]=tj,eh[166]=tG,eh[167]=tq,eh[168]=e):e=eh[168],ef=e}let no=ef;eh[169]!==tt||eh[170]!==tY||eh[171]!==en?(e_=()=>e(o).createElement(t("1qfLF").default,{testId:"comment-reply-button",label:(0,t("6mKj3").expVal)("confluence_frontend_comments_a11y_kb_exp","isEnabled",!1)?tY(t("9CnRS").i18n.replyPlaceholderWithName,{name:tt||tY(t("3ejfs").commentsi18n.anonymous)}):tY(t("9CnRS").i18n.replyPlaceholder),appearance:"subtle",spacing:"compact",icon:(0,t("6mKj3").expValEquals)("confluence_comments_tuneup","isEnabled",!0)?e(t("diR4K")):e(t("c6fYi")),onClick:en,isTooltipDisabled:!1}),eh[169]=tt,eh[170]=tY,eh[171]=en,eh[172]=e_):e_=eh[172];let nr=e_;eh[173]!==e1||eh[174]!==tY||eh[175]!==eo||eh[176]!==to?(eE=()=>e(o).createElement(t("1qfLF").default,{testId:"comment-resolve-action-item",label:(0,t("6mKj3").expVal)("confluence_frontend_comments_a11y_kb_exp","isEnabled",!1)?tY(t("9CnRS").i18n.resolveThread):tY(t("9CnRS").i18n.resolve),appearance:"subtle",spacing:"compact",icon:e(t("cvXh8")),onClick:eo,isTooltipDisabled:!1,analyticsContext:{attributes:{name:"resolveActionsButton",source:to?t("en1dX").AnalyticsSource.COMMENTS_PANEL:t("en1dX").AnalyticsSource.STANDALONE,commentType:e1}},className:(0,t("gMc0m").default)(["_ca0qidpf _u5f3idpf _n3tdidpf _19bvidpf"])}),eh[173]=e1,eh[174]=tY,eh[175]=eo,eh[176]=to,eh[177]=eE):eE=eh[177];let ni=eE;eh[178]!==tt||eh[179]!==eA||eh[180]!==tY||eh[181]!==e$||eh[182]!==to||eh[183]!==tu||eh[184]!==eD||eh[185]!==eG||eh[186]!==eN||eh[187]!==eS||eh[188]!==tO||eh[189]!==tk||eh[190]!==tQ?.comments?.nodes?.[0]?.reactionsSummary||eh[191]!==no||eh[192]!==tK?(eg=n=>{let{onlyRenderPicker:a,readOnly:r}=void 0===n?{}:n,i=void 0!==a&&a;return e(o).createElement(D,{hasReactions:tk>0,isCommentsPanel:(to||(0,t("9wGTI").fg)("confluence_frontend_content_wrapper"))&&tu,onClick:X,...(0,t("6mKj3").expVal)("confluence_frontend_comments_a11y_kb_exp","isEnabled",!1)?{"aria-label":tY(t("9CnRS").i18n.reactionAriaLabelWithName,{name:tt||tY(t("3ejfs").commentsi18n.anonymous)})}:{}},e(o).createElement(g.ReactionsLoader,{readOnly:void 0!==r&&r,contentId:eA,containerId:eN,containerType:eS,location:"edit"===eG?t("2ttXz").ReactionLocation.EDITOR_INLINE_COMMENT:t("2ttXz").ReactionLocation.INLINE_COMMENT,hidePlaceholder:0===tk||void 0!==e$||null!==e$,reactionsData:null==e$?tQ?.comments?.nodes?.[0]?.reactionsSummary:e$,updateCache:no,onlyRenderPicker:i,isSubtle:to||(0,t("9wGTI").fg)("confluence_frontend_content_wrapper"),showAddReactionText:!1,customAnalyticsAttributes:{source:to?t("en1dX").AnalyticsSource.COMMENTS_PANEL:t("en1dX").AnalyticsSource.STANDALONE,isReply:eD,mode:eG},contentSubType:tK,isListItem:!1,key:`reactions-${eA}-${i}`,particleEffectByEmoji:tO,onParticleEffectChange:t6}))},eh[178]=tt,eh[179]=eA,eh[180]=tY,eh[181]=e$,eh[182]=to,eh[183]=tu,eh[184]=eD,eh[185]=eG,eh[186]=eN,eh[187]=eS,eh[188]=tO,eh[189]=tk,eh[190]=tQ?.comments?.nodes?.[0]?.reactionsSummary,eh[191]=no,eh[192]=tK,eh[193]=eg):eg=eh[193];let ns=eg;eh[194]!==t3?(eI=()=>e(o).createElement(t("2W0qg").default,{testId:"old-reopen-comment-action",onClick:t3,padding:"space.0",backgroundColor:"color.background.neutral.subtle",xcss:O},e(o).createElement(t("5dK2X").default,{color:"color.text.subtlest",size:"small"},e(o).createElement(t("gtD4K").default,t("9CnRS").i18n.reopen))),eh[194]=t3,eh[195]=eI):eI=eh[195];let nl=eI;eh[196]!==to||eh[197]!==eB||eh[198]!==tc?(eC=()=>{if(to){if(tc)return"var(--ds-background-input-hovered, #F8F8F8)";else if(eB)return"var(--ds-surface-raised, #FFFFFF)"}return"var(--ds-surface, #FFFFFF)"},eh[196]=to,eh[197]=eB,eh[198]=tc,eh[199]=eC):eC=eh[199];let nc=eC;eh[200]!==ts||eh[201]!==nc||eh[202]!==tn||eh[203]!==to||eh[204]!==tu||eh[205]!==td||eh[206]!==eB||eh[207]!==tp||eh[208]!==tD||eh[209]!==eD||eh[210]!==th||eh[211]!==eZ||eh[212]!==tc||eh[213]!==tm||eh[214]!==tJ||eh[215]!==na||eh[216]!==ns||eh[217]!==nr||eh[218]!==ni||eh[219]!==ez?.resolved||eh[220]!==eO||eh[221]!==eM?(ey=()=>e(o).createElement(t("6f0Oj").default,{"data-testId":"comment-action-items",xcss:[P,A,tm&&j,eB&&!(0,t("9wGTI").fg)("confluence_frontend_content_wrapper")&&q,eB&&(0,t("9wGTI").fg)("confluence_frontend_content_wrapper")&&(td||tm||!to?j:G),tc&&!tm&&U,td&&V,(to||(0,t("9wGTI").fg)("confluence_frontend_content_wrapper"))&&tu&&!td&&F,!to&&!td&&(0,t("9wGTI").fg)("confluence_frontend_content_wrapper")&&tu&&L,to&&eD&&(0,t("9wGTI").fg)("confluence_frontend_content_wrapper")&&V,(0,t("6mKj3").expValEquals)("confluence_cohiti_comment_hover_actions","isEnabled",!0)&&H]},e(o).createElement("div",{style:{boxShadow:(0,t("6mKj3").expValEquals)("confluence_cohiti_comment_hover_actions","isEnabled",!0)?`-10px 0 10px 0px ${nc()}`:""},"data-testId":"comment-hover-actions-container",className:(0,t("gMc0m").default)(["_zulp12x7 _1e0c1txw _1bah1h6o _4cvr1h6o",(0,t("6mKj3").expValEquals)("confluence_cohiti_comment_hover_actions","isEnabled",!0)&&"_1reo15vq _18m915vq _2rko12b0 _kqswh2mm _c71l1kw7"])},!ez?.resolved&&!eZ&&(!eD||td||to&&(0,t("9wGTI").fg)("confluence_frontend_content_wrapper"))&&!tn&&ts&&nr(),tD&&!tJ&&e(o).createElement("div",null,ns({onlyRenderPicker:!0,readOnly:tp&&(0,t("6mKj3").expVal)("platform_editor_offline_editing_web","isEnabled",!1)})),!eD&&!ez?.resolved&&!eZ&&th&&e(o).createElement("div",null,ni()),e(o).createElement("div",null,na(eM,eO)))),eh[200]=ts,eh[201]=nc,eh[202]=tn,eh[203]=to,eh[204]=tu,eh[205]=td,eh[206]=eB,eh[207]=tp,eh[208]=tD,eh[209]=eD,eh[210]=th,eh[211]=eZ,eh[212]=tc,eh[213]=tm,eh[214]=tJ,eh[215]=na,eh[216]=ns,eh[217]=nr,eh[218]=ni,eh[219]=ez?.resolved,eh[220]=eO,eh[221]=eM,eh[222]=ey):ey=eh[222];let nd=ey;eh[223]!==to||eh[224]!==tu||eh[225]!==td||eh[226]!==eZ||eh[227]!==t4||eh[228]!==nl||eh[229]!==ez?.resolved?(ev=()=>{let n=ez?.resolved||eZ;return e(o).createElement(e(o).Fragment,null,n&&e(o).createElement(t("6f0Oj").default,{xcss:(0,t("9wGTI").fg)("confluence_frontend_comments_panel_v2")&&[P,(to||(0,t("9wGTI").fg)("confluence_frontend_content_wrapper"))&&tu&&!td&&F,td&&V],testId:"static-actions-items"},(0,t("9wGTI").fg)("confluence_frontend_comments_panel_v2")?t4():nl()))},eh[223]=to,eh[224]=tu,eh[225]=td,eh[226]=eZ,eh[227]=t4,eh[228]=nl,eh[229]=ez?.resolved,eh[230]=ev):ev=eh[230];let nm=ev;eh[231]!==ts||eh[232]!==ti||eh[233]!==to||eh[234]!==tl||eh[235]!==tI||eh[236]!==tu||eh[237]!==td||eh[238]!==eB||eh[239]!==tp||eh[240]!==e3||eh[241]!==tD||eh[242]!==eD||eh[243]!==eZ||eh[244]!==e4||eh[245]!==tk||eh[246]!==tJ||eh[247]!==nd||eh[248]!==ns||eh[249]!==ne||eh[250]!==nm||eh[251]!==ez?.resolved?(eT=()=>{let n=!ez?.resolved&&!eZ&&!(0,t("9wGTI").fg)("confluence_frontend_comments_panel_v2"),a=ez?.resolved||eD&&!e3,r=e(o).createElement(e(o).Fragment,null,n&&ne(),tD&&!tJ&&tk>0&&e(o).createElement(t("6f0Oj").default,{xcss:[y,(to||(0,t("9wGTI").fg)("confluence_frontend_content_wrapper"))&&tu&&v,(to||(0,t("9wGTI").fg)("confluence_frontend_content_wrapper"))&&tu&&(0,t("9wGTI").fg)("confluence_frontend_comments_panel_v2")&&T,(to||(0,t("9wGTI").fg)("confluence_frontend_content_wrapper"))&&tu&&eD&&(0,t("9wGTI").fg)("confluence_frontend_comments_panel_v2")&&w,(to||(0,t("9wGTI").fg)("confluence_frontend_content_wrapper"))&&tu&&!eD&&(!ti&&ts||a&&0!==e4)&&(0,t("9wGTI").fg)("confluence_frontend_comments_panel_v2")&&R,!to&&(0,t("9wGTI").fg)("confluence_frontend_content_wrapper")&&tu&&b,!to&&!td&&ti&&(0,t("9wGTI").fg)("confluence_frontend_content_wrapper")&&tu&&h]},ns({readOnly:a||tp&&(0,t("6mKj3").expVal)("platform_editor_offline_editing_web","isEnabled",!1)}))),i=(!eD||e3)&&(eB||tI&&(0,t("9wGTI").fg)("confluence_frontend_content_wrapper"))&&!ez?.resolved&&!tl?nd():nm();return e(o).createElement(e(o).Fragment,null,i,r)},eh[231]=ts,eh[232]=ti,eh[233]=to,eh[234]=tl,eh[235]=tI,eh[236]=tu,eh[237]=td,eh[238]=eB,eh[239]=tp,eh[240]=e3,eh[241]=tD,eh[242]=eD,eh[243]=eZ,eh[244]=e4,eh[245]=tk,eh[246]=tJ,eh[247]=nd,eh[248]=ns,eh[249]=ne,eh[250]=nm,eh[251]=ez?.resolved,eh[252]=eT):eT=eh[252];let np=eT;eh[253]!==eo||eh[254]!==to||eh[255]!==tT||eh[256]!==tp||eh[257]!==tD||eh[258]!==tb||eh[259]!==eD||eh[260]!==th||eh[261]!==eG||eh[262]!==tJ||eh[263]!==t5||eh[264]!==t7||eh[265]!==ns||eh[266]!==ne||eh[267]!==ez?.resolved||eh[268]!==eO||eh[269]!==eM||eh[270]!==ty?(ew=()=>e(o).createElement(t("666Tc").ActionsContainer,null,e(o).createElement(k,{"aria-hidden":"true"}),!eD&&th&&e(o).createElement(k,{mode:eG,isReply:eD},e(o).createElement(M,{"data-testid":"resolve-comment-action","data-cy":"resolve-comment-action",onClick:eo},e(o).createElement(t("gtD4K").default,t("9CnRS").i18n.resolve))),!ty&&tT&&e(o).createElement(k,{mode:eG,isReply:eD},t7(eM,ty)),!ty&&tb&&e(o).createElement(k,{mode:eG,isReply:eD},t5(eO,ty)),tD&&!tJ&&!ez?.resolved&&ns({readOnly:tp&&(0,t("6mKj3").expVal)("platform_editor_offline_editing_web","isEnabled",!1)}),!ez?.resolved||to&&(0,t("9wGTI").fg)("confluence-frontend-comments-panel")&&ne()),eh[253]=eo,eh[254]=to,eh[255]=tT,eh[256]=tp,eh[257]=tD,eh[258]=tb,eh[259]=eD,eh[260]=th,eh[261]=eG,eh[262]=tJ,eh[263]=t5,eh[264]=t7,eh[265]=ns,eh[266]=ne,eh[267]=ez?.resolved,eh[268]=eO,eh[269]=eM,eh[270]=ty,eh[271]=ew):ew=eh[271];let nu=ew;eh[272]!==eD||eh[273]!==na||eh[274]!==nu||eh[275]!==eO||eh[276]!==eM?(eb=()=>e(o).createElement(e(o).Fragment,null,!eD&&na(eM,eO),nu()),eh[272]=eD,eh[273]=na,eh[274]=nu,eh[275]=eO,eh[276]=eM,eh[277]=eb):eb=eh[277];let nf=eb;return eh[278]!==to||eh[279]!==tu||eh[280]!==np||eh[281]!==nf?(eR=e(o).createElement(o.Fragment,null,(to||(0,t("9wGTI").fg)("confluence_frontend_content_wrapper"))&&tu?np():nf()),eh[278]=to,eh[279]=tu,eh[280]=np,eh[281]=nf,eh[282]=eR):eR=eh[282],eR}:({pageId:n,pageType:a,commentId:r,permissions:i,isReply:s,parentCommentId:m,restrictEdit:p,restrictDelete:u,deleteComment:f,editComment:B,resolveComment:X,isCommentActive:z,mode:K,onClose:Y,overflowMenuPortal:W,supportedActions:$=["edit","delete","resolve"],isCommentsPanel:Q=!1,isHovered:J,annotationId:Z,resolveProperties:ee,reopenComment:et,replyToComment:en,isUnread:ea=!1,inheritedReactionsData:eo,reactionsCacheUpdateFn:er,commentDateUrl:ei,isResolvedByAnotherUser:es,commentType:el,hideBranchingStyle:ec=!1,canAddComments:ed=!0,isDeletedByAnotherUser:em=!1,isSelected:ep=!1,isParentCommentOpen:eu,isFooterComment:ef=!1,isStandaloneComment:e_=!1,isOffline:eE=!1,numReplies:eg,isFabricPage:eI=!0,authorName:eC,isArchived:ey})=>{let ev=(0,t("1pSma").default)("delete-comment-action"),eT=(0,t("1pSma").default)("start-edit-comment-action"),ew=(0,t("1pSma").default)("start-reply-comment-action"),eb=(0,t("1pSma").default)("resolve-comment-action"),[eR,eh]=(0,o.useState)(!1),[eN,eS]=(0,o.useState)(!1),[eA,ex]=(0,o.useState)(!1),[eD,ek]=(0,o.useState)(!1),[eM,eO]=(0,o.useState)(!1),[eP,eF]=(0,o.useState)(!1),eL=(0,o.useContext)(t("1kHsc").ExperienceTrackerContext),{isReactionsEnabled:eV}=(0,o.useContext)(t("8SCD6").ReactionsContext),[eG,ej]=(0,o.useState)(eo?.reactionsCount||0),[eq,eU]=(0,o.useState)({}),{hasContentChanged:eH}=(0,t("bSvtO").useCommentsContentState)(),{resetContentChanged:eB}=(0,t("bSvtO").useCommentsContentActions)(),{showModal:eX}=(0,t("8aF6s").useDialogs)(),{updateReactionsSummary:ez}=(0,t("8i27m").useCommentsDataActions)(),eK=(0,t("fFmJj").useReadFragmentInterop)({fragmentSpec:c}),eY=(0,t("ij4CE").useWriteFragmentInterop)({fragmentSpec:l}),{edition:eW,cloudId:e$}=(0,t("bQm3c").useSessionData)(),{commentService:eQ}=(0,t("6hmtW").useCommentService)(),eJ=(0,t("3jwuS").useIsCurrentPageLive)(),[eZ]=(0,t("ep3mz").usePageContentId)(),{subType:e1}=(0,t("9sGCn").getCachedPageData)(eZ),{formatMessage:e0}=(0,t("8C5kA").default)(),{data:e2,loading:e9}=(0,t("xQxzY").useQuery)(C,{variables:{contentId:r,containerId:n},onError:e=>{eL.stopOnError({name:t("irVI7").VIEW_REACTIONS_EXPERIENCE,error:e})},fetchPolicy:"cache-and-network",skip:!!eo});(0,o.useEffect)(()=>{ej((void 0===eo?e2?.comments?.nodes?.[0]?.reactionsSummary?.reactionsCount:eo?.reactionsCount)||0)},[e2,eo]),(0,o.useEffect)(()=>{let e=eE&&(0,t("6mKj3").expVal)("platform_editor_offline_editing_web","isEnabled",!1),n=!!(i?.isEditable&&B&&$.includes("edit")&&!e),a=!!(i?.isRemovable&&f&&$.includes("delete")&&!e),o=!!(i?.isResolvable&&X&&$.includes("resolve")&&!e),r=!!(et&&$.includes("reopen")&&i?.isResolvable&&!s)&&!e;ee?.resolved&&ee?.isDangling?(0,t("9wGTI").fg)("confluence_frontend_content_wrapper")?eF(r):eF(!1):eF(!!(r&&(ee?.resolved||es)&&(Z&&(0,t("g0DaR").inlineCommentExists)(Z)||el===t("8i27m").CommentType.GENERAL))),"view"===K||"edit"===K?(s?eO(!1):eO(o),Q||eI&&(0,t("9wGTI").fg)("confluence_frontend_content_wrapper")?eS(!!(0,t("9wGTI").fg)("confluence_frontend_content_wrapper")||!!J&&!(0,t("9wGTI").fg)("confluence_frontend_content_wrapper")&&(n||a||o)):!s&&(n||a||o)&&eS(!0),ek(a),ex(n)):(ek(a),ex(n),eO(o&&!s))},[K,i,J,s,Q,$,f,B,X,et,ee?.isDangling,Z,ee?.resolved,es,el,eE,eI]),(0,o.useEffect)(()=>{Q&&eR&&!(0,t("9wGTI").fg)("confluence_frontend_content_wrapper")&&!J&&eh(!1)},[Q,eR,J,eh]);let e8=()=>{switch(K){case"view":return t("ad6ZE").InlineCommentMode.VIEW;case"edit":if(eJ)return t("ad6ZE").InlineCommentMode.LIVE;return t("ad6ZE").InlineCommentMode.EDIT}},e3=()=>{el===t("8i27m").CommentType.INLINE?eL.start({name:t("irVI7").DELETE_INLINE_COMMENT_EXPERIENCE,attributes:{...(0,t("gtj7V").getCommentsDataManagerExperimentAttributes)(),mode:e8(),framework:t("kmHPt").InlineCommentFramework.ANNOTATION_PROVIDER,isReply:s,source:Q?t("en1dX").AnalyticsSource.COMMENTS_PANEL:t("en1dX").AnalyticsSource.STANDALONE,annotationId:Z}}):eL.start({name:t("irVI7").DELETE_PAGE_COMMENT_EXPERIENCE,attributes:{...(0,t("gtj7V").getCommentsDataManagerExperimentAttributes)(),isReply:s}}),eX(E.CommentWarningDialog,{onConfirm:()=>{e6()},isDelete:!0,onCancel:()=>{eL.abort({name:el===t("8i27m").CommentType.INLINE?t("irVI7").DELETE_INLINE_COMMENT_EXPERIENCE:t("irVI7").DELETE_PAGE_COMMENT_EXPERIENCE,reason:"delete dialog closed"})}})},e6=()=>{f&&(ev(),f())},e7=()=>{el===t("8i27m").CommentType.INLINE?(0,t("8Ss4E").startEditorExperiences)({name:t("irVI7").EDIT_INLINE_COMMENT_EXPERIENCE,attributes:{...(0,t("gtj7V").getCommentsDataManagerExperimentAttributes)(),mode:e8(),framework:t("kmHPt").InlineCommentFramework.ANNOTATION_PROVIDER,isReply:s,type:s?"reply":"topLevel",annotationId:Z}},{name:t("irVI7").EDIT_INLINE_COMMENT_LOAD_EXPERIENCE},{name:t("irVI7").EDIT_INLINE_COMMENT_PUBLISH_EXPERIENCE}):(0,t("8Ss4E").startEditorExperiences)({name:t("irVI7").EDIT_PAGE_COMMENT_EXPERIENCE,attributes:{...(0,t("gtj7V").getCommentsDataManagerExperimentAttributes)(),editor:"FABRIC",isSingleExperience:!0,edition:eW,type:s?"reply":"topLevel",source:ef?t("en1dX").AnalyticsSource.PAGE_FOOTER:t("en1dX").AnalyticsSource.COMMENTS_PANEL}},{name:t("irVI7").EDIT_PAGE_COMMENT_LOAD_EXPERIENCE},{name:t("irVI7").EDIT_PAGE_COMMENT_PUBLISH_EXPERIENCE}),B&&B()},e5=()=>{eT(),e7()},e4=()=>{let e=ef?r:m||r;eH?eX(E.CommentWarningDialog,{onConfirm:()=>{eB(),te(e)}}):te(e)},te=e=>{en&&(ew(),en(e))},tt=async()=>{let e=`${window.location.origin}/wiki${ei}`;(0,t("aHcFH").isClipboardApiSupported)()?await (0,t("aHcFH").copyToClipboard)(e):(0,t("aHcFH").isIEClipboardApiSupported)()&&await (0,t("aHcFH").copyToClipboardIE)(e)},tn=()=>{let e=()=>{el===t("8i27m").CommentType.INLINE?eL.start({name:t("irVI7").RESOLVE_INLINE_COMMENT_EXPERIENCE,id:r,attributes:{...(0,t("gtj7V").getCommentsDataManagerExperimentAttributes)(),mode:e8(),framework:t("kmHPt").InlineCommentFramework.ANNOTATION_PROVIDER,annotationId:Z}}):eL.start({name:t("irVI7").RESOLVE_PAGE_COMMENT_EXPERIENCE,id:r,attributes:{...(0,t("gtj7V").getCommentsDataManagerExperimentAttributes)(),annotationId:Z}}),ta()};eH?eX(E.CommentWarningDialog,{onConfirm:()=>{eB(),e()}}):e()},ta=()=>{X&&(eb(),X())},to=()=>{et&&et()},tr=(0,o.useCallback)((e,t)=>{eU(n=>({...n,[e]:t}))},[]),ti=(n,a)=>a?n?e(o).createElement(N,{testId:"disabled-edit-comment-dropdown-action"},e(o).createElement(_,{action:"edit",isReply:s,isInOverflowMenu:!0})):e(o).createElement(t("dAYOx").default,{testId:"edit-comment-dropdown-action","data-cy":"edit-comment-action",onClick:e7,interactionName:"start-edit-comment-action"},e(o).createElement(t("gtD4K").default,t("9CnRS").i18n.edit)):n?e(o).createElement(_,{action:"edit",isReply:s,isInOverflowMenu:!0}):e(o).createElement(M,{"data-testid":"edit-comment-action","data-cy":"edit-comment-action",onClick:e5},e(o).createElement(t("gtD4K").default,t("9CnRS").i18n.edit)),ts=(n,a)=>a?n?e(o).createElement(N,{testId:"disabled-delete-comment-dropdown-action"},e(o).createElement(_,{action:"delete",isReply:s,isInOverflowMenu:!0})):e(o).createElement(t("dAYOx").default,{testId:"delete-comment-dropdown-action",onClick:e3},e(o).createElement(t("gtD4K").default,t("9CnRS").i18n.delete)):n?e(o).createElement(_,{action:"delete",isReply:s}):e(o).createElement(M,{"data-testid":"delete-comment-action",onClick:e3,onMouseEnter:()=>I({cloudId:e$})},e(o).createElement(t("gtD4K").default,t("9CnRS").i18n.delete)),tl=()=>eP&&e(o).createElement("div",{className:(0,t("gMc0m").default)(["_zulp12x7 _1e0c1txw _1bah1h6o _4cvr1h6o"])},es&&!(0,t("9wGTI").fg)("confluence_frontend_content_wrapper")&&e(o).createElement("div",{className:(0,t("gMc0m").default)(["_11c81vhk _syazazsu"])},e0(t("9CnRS").i18n.resolved)),e(o).createElement(t("1qfLF").default,{icon:n=>e(o).createElement(e(t("3sFtD")),{...n,spacing:"spacious",color:"var(--ds-icon-success, #6A9A23)",label:e0(t("9CnRS").i18n.reopen)}),label:e0(t("9CnRS").i18n.reopen),isTooltipDisabled:!1,onClick:to,appearance:"subtle",testId:"reopen-comment-action",analyticsContext:{attributes:{name:t("en1dX").ActionName.REOPEN_COMMENT,source:Q?t("en1dX").AnalyticsSource.COMMENTS_PANEL:t("en1dX").AnalyticsSource.STANDALONE,isDanglingComment:ee?.isDangling}}})),tc=()=>{if(Q||(0,t("9wGTI").fg)("confluence_frontend_comments_panel_v2"))return e(o).createElement(x,null,e(o).createElement(M,{"data-testid":"reply-comment-action","data-cy":"reply-comment-action",onClick:e4},e(o).createElement(t("gtD4K").default,t("9CnRS").i18n.replyPlaceholder)))},td=()=>e(o).createElement(t("dAYOx").default,{testId:"copy-link-dropdown-action",onClick:tt},e(o).createElement(t("gtD4K").default,t("9CnRS").i18n.copyLink)),tm=()=>{if(!(Q&&s&&(0,t("9wGTI").fg)("confluence-frontend-comments-panel")))return e(o).createElement(t("dAYOx").default,{testId:"resolve-comment-dropdown-action",onClick:tn},e(o).createElement(t("gtD4K").default,t("9CnRS").i18n.resolve))},tp=(n,a)=>{let r=!eA&&!eD&&(s||!eM),i=!Q&&r,l=Q&&r&&!(0,t("9wGTI").fg)("confluence_frontend_comments_panel_v2");if(i||l)return e(o).createElement(e(o).Fragment,null);let c=e(o).createElement(S,{"data-cy":"comment-overflow-actions-menu","data-testid":"comment-overflow-actions-menu",isCommentActive:z,mode:K,showClose:!!Y,enableDropdownForEditMode:(0,t("9wGTI").fg)("confluence-frontend-comments-panel")||"edit"===K,isCommentsPanel:(Q||(0,t("9wGTI").fg)("confluence_frontend_content_wrapper"))&&eI,isUnread:ea},e(o).createElement(t("52EPl").default,{testId:"comment-overflow-menu",isOpen:eR,placement:"bottom-end",onOpenChange:({isOpen:e,event:t})=>{t?.stopPropagation(),eh(e),eD&&I({cloudId:e$})},trigger:({triggerRef:n,...a})=>e(o).createElement(t("1qfLF").default,{...a,testId:"comment-overflow-menu-trigger",ref:n,label:e0(t("9CnRS").i18n.commentActionsMenuLabel),appearance:"subtle",icon:e(t("9VJDA")),isTooltipDisabled:!1,isSelected:eR,analyticsContext:{attributes:{name:"moreActionsButton",source:Q?t("en1dX").AnalyticsSource.COMMENTS_PANEL:t("en1dX").AnalyticsSource.STANDALONE,commentType:el}}})},e(o).createElement(t("ahaN7").default,null,eI&&(Q||(0,t("9wGTI").fg)("confluence_frontend_content_wrapper"))&&(0,t("9wGTI").fg)("confluence_frontend_comments_panel_v2")&&td(),(!Q&&!(0,t("9wGTI").fg)("confluence_frontend_content_wrapper")||!eI&&!ef)&&eM&&tm(),eA&&ti(n,eN),eD&&ts(a,eN))));return W&&!(0,t("9wGTI").fg)("confluence_frontend_content_wrapper")?(0,d.createPortal)(c,W):c},tu=(0,o.useMemo)(()=>er||(void 0!==eo&&Q?(e,t,n,a,o)=>(eU(n=>({...n,[e]:"add"===t})),Z&&e&&t&&eQ?.onUpdateReaction(Z,e,t),ez(e,t,n,el,eK,eY,a,Z,o)):void 0),[eo,er,Q,Z,el,ez,eQ,eK,eY]),tf=()=>e(o).createElement(t("1qfLF").default,{testId:"comment-reply-button",label:(0,t("6mKj3").expVal)("confluence_frontend_comments_a11y_kb_exp","isEnabled",!1)?e0(t("9CnRS").i18n.replyPlaceholderWithName,{name:eC||e0(t("3ejfs").commentsi18n.anonymous)}):e0(t("9CnRS").i18n.replyPlaceholder),appearance:"subtle",spacing:"compact",icon:(0,t("6mKj3").expValEquals)("confluence_comments_tuneup","isEnabled",!0)?e(t("diR4K")):e(t("c6fYi")),onClick:e4,isTooltipDisabled:!1}),t_=()=>e(o).createElement(t("1qfLF").default,{testId:"comment-resolve-action-item",label:(0,t("6mKj3").expVal)("confluence_frontend_comments_a11y_kb_exp","isEnabled",!1)?e0(t("9CnRS").i18n.resolveThread):e0(t("9CnRS").i18n.resolve),appearance:"subtle",spacing:"compact",icon:e(t("cvXh8")),onClick:tn,isTooltipDisabled:!1,analyticsContext:{attributes:{name:"resolveActionsButton",source:Q?t("en1dX").AnalyticsSource.COMMENTS_PANEL:t("en1dX").AnalyticsSource.STANDALONE,commentType:el}},className:(0,t("gMc0m").default)(["_ca0qidpf _u5f3idpf _n3tdidpf _19bvidpf"])}),tE=({onlyRenderPicker:i=!1,readOnly:l=!1}={})=>e(o).createElement(D,{hasReactions:eG>0,isCommentsPanel:(Q||(0,t("9wGTI").fg)("confluence_frontend_content_wrapper"))&&eI,onClick:e=>e.stopPropagation(),...(0,t("6mKj3").expVal)("confluence_frontend_comments_a11y_kb_exp","isEnabled",!1)?{"aria-label":e0(t("9CnRS").i18n.reactionAriaLabelWithName,{name:eC||e0(t("3ejfs").commentsi18n.anonymous)})}:{}},e(o).createElement(g.ReactionsLoader,{readOnly:l,contentId:r,containerId:n,containerType:a,location:"edit"===K?t("2ttXz").ReactionLocation.EDITOR_INLINE_COMMENT:t("2ttXz").ReactionLocation.INLINE_COMMENT,hidePlaceholder:0===eG||void 0!==eo||null!==eo,reactionsData:null==eo?e2?.comments?.nodes?.[0]?.reactionsSummary:eo,updateCache:tu,onlyRenderPicker:i,isSubtle:Q||(0,t("9wGTI").fg)("confluence_frontend_content_wrapper"),showAddReactionText:!1,customAnalyticsAttributes:{source:Q?t("en1dX").AnalyticsSource.COMMENTS_PANEL:t("en1dX").AnalyticsSource.STANDALONE,isReply:s,mode:K},contentSubType:e1,isListItem:!1,key:`reactions-${r}-${i}`,particleEffectByEmoji:eq,onParticleEffectChange:tr})),tg=()=>e(o).createElement(t("2W0qg").default,{testId:"old-reopen-comment-action",onClick:to,padding:"space.0",backgroundColor:"color.background.neutral.subtle",xcss:O},e(o).createElement(t("5dK2X").default,{color:"color.text.subtlest",size:"small"},e(o).createElement(t("gtD4K").default,t("9CnRS").i18n.reopen))),tI=()=>{if(Q){if(ep)return"var(--ds-background-input-hovered, #F8F8F8)";else if(J)return"var(--ds-surface-raised, #FFFFFF)"}return"var(--ds-surface, #FFFFFF)"},tC=()=>e(o).createElement(t("6f0Oj").default,{"data-testId":"comment-action-items",xcss:[P,A,e_&&j,J&&!(0,t("9wGTI").fg)("confluence_frontend_content_wrapper")&&q,J&&(0,t("9wGTI").fg)("confluence_frontend_content_wrapper")&&(ef||e_||!Q?j:G),ep&&!e_&&U,ef&&V,(Q||(0,t("9wGTI").fg)("confluence_frontend_content_wrapper"))&&eI&&!ef&&F,!Q&&!ef&&(0,t("9wGTI").fg)("confluence_frontend_content_wrapper")&&eI&&L,Q&&s&&(0,t("9wGTI").fg)("confluence_frontend_content_wrapper")&&V,(0,t("6mKj3").expValEquals)("confluence_cohiti_comment_hover_actions","isEnabled",!0)&&H]},e(o).createElement("div",{style:{boxShadow:(0,t("6mKj3").expValEquals)("confluence_cohiti_comment_hover_actions","isEnabled",!0)?`-10px 0 10px 0px ${tI()}`:""},"data-testId":"comment-hover-actions-container",className:(0,t("gMc0m").default)(["_zulp12x7 _1e0c1txw _1bah1h6o _4cvr1h6o",(0,t("6mKj3").expValEquals)("confluence_cohiti_comment_hover_actions","isEnabled",!0)&&"_1reo15vq _18m915vq _2rko12b0 _kqswh2mm _c71l1kw7"])},!ee?.resolved&&!es&&(!s||ef||Q&&(0,t("9wGTI").fg)("confluence_frontend_content_wrapper"))&&!ey&&ed&&tf(),eV&&!e9&&e(o).createElement("div",null,tE({onlyRenderPicker:!0,readOnly:eE&&(0,t("6mKj3").expVal)("platform_editor_offline_editing_web","isEnabled",!1)})),!s&&!ee?.resolved&&!es&&eM&&e(o).createElement("div",null,t_()),e(o).createElement("div",null,tp(p,u)))),ty=()=>{let n=ee?.resolved||es;return e(o).createElement(e(o).Fragment,null,n&&e(o).createElement(t("6f0Oj").default,{xcss:(0,t("9wGTI").fg)("confluence_frontend_comments_panel_v2")&&[P,(Q||(0,t("9wGTI").fg)("confluence_frontend_content_wrapper"))&&eI&&!ef&&F,ef&&V],testId:"static-actions-items"},(0,t("9wGTI").fg)("confluence_frontend_comments_panel_v2")?tl():tg()))};return e(o).createElement(o.Fragment,null,(Q||(0,t("9wGTI").fg)("confluence_frontend_content_wrapper"))&&eI?(()=>{let n=!ee?.resolved&&!es&&!(0,t("9wGTI").fg)("confluence_frontend_comments_panel_v2"),a=ee?.resolved||s&&!eu,r=e(o).createElement(e(o).Fragment,null,n&&tc(),eV&&!e9&&eG>0&&e(o).createElement(t("6f0Oj").default,{xcss:[y,(Q||(0,t("9wGTI").fg)("confluence_frontend_content_wrapper"))&&eI&&v,(Q||(0,t("9wGTI").fg)("confluence_frontend_content_wrapper"))&&eI&&(0,t("9wGTI").fg)("confluence_frontend_comments_panel_v2")&&T,(Q||(0,t("9wGTI").fg)("confluence_frontend_content_wrapper"))&&eI&&s&&(0,t("9wGTI").fg)("confluence_frontend_comments_panel_v2")&&w,(Q||(0,t("9wGTI").fg)("confluence_frontend_content_wrapper"))&&eI&&!s&&(!ec&&ed||a&&0!==eg)&&(0,t("9wGTI").fg)("confluence_frontend_comments_panel_v2")&&R,!Q&&(0,t("9wGTI").fg)("confluence_frontend_content_wrapper")&&eI&&b,!Q&&!ef&&ec&&(0,t("9wGTI").fg)("confluence_frontend_content_wrapper")&&eI&&h]},tE({readOnly:a||eE&&(0,t("6mKj3").expVal)("platform_editor_offline_editing_web","isEnabled",!1)}))),i=(!s||eu)&&(J||eR&&(0,t("9wGTI").fg)("confluence_frontend_content_wrapper"))&&!ee?.resolved&&!em?tC():ty();return e(o).createElement(e(o).Fragment,null,i,r)})():e(o).createElement(e(o).Fragment,null,!s&&tp(p,u),e(o).createElement(t("666Tc").ActionsContainer,null,e(o).createElement(k,{"aria-hidden":"true"}),!s&&eM&&e(o).createElement(k,{mode:K,isReply:s},e(o).createElement(M,{"data-testid":"resolve-comment-action","data-cy":"resolve-comment-action",onClick:tn},e(o).createElement(t("gtD4K").default,t("9CnRS").i18n.resolve))),!eN&&eA&&e(o).createElement(k,{mode:K,isReply:s},ti(p,eN)),!eN&&eD&&e(o).createElement(k,{mode:K,isReply:s},ts(u,eN)),eV&&!e9&&!ee?.resolved&&tE({readOnly:eE&&(0,t("6mKj3").expVal)("platform_editor_offline_editing_web","isEnabled",!1)}),!ee?.resolved||Q&&(0,t("9wGTI").fg)("confluence-frontend-comments-panel")&&tc())))};function X(e){return e.stopPropagation()}let z=(0,t("ecnYn").xcss)({marginTop:"space.150"}),K=(0,i.isReactCompilerActiveV1)()?n=>{let a,r,i,l,c,d,m,p,u=(0,s.c)(19),{annotatedText:f}=n,{formatMessage:_}=(0,t("8C5kA").default)(),[E,g]=(0,o.useState)(!1);u[0]!==_?(a=()=>(0,t("9wGTI").fg)("confluence_frontend_new_dangling_comments_ux")?_(t("9CnRS").i18n.thisContentWasDeleted):_(t("9CnRS").i18n.contentDeleted),u[0]=_,u[1]=a):a=u[1];let I=a;return u[2]===Symbol.for("react.memo_cache_sentinel")?(r=!(0,t("9wGTI").fg)("confluence_frontend_new_dangling_comments_ux")&&e(o).createElement(e(t("gKvd9")),{label:"",color:"var(--ds-icon-subtlest, #6B6E76)"}),u[2]=r):r=u[2],u[3]!==I?(i=I(),u[3]=I,u[4]=i):i=u[4],u[5]!==i?(l=e(o).createElement(t("bUlM5").default,{gap:"space.100",alignItems:"center"},r,e(o).createElement(t("5dK2X").default,{size:"small",maxLines:3,color:(0,t("9wGTI").fg)("confluence_frontend_new_dangling_comments_ux")?"color.text":"color.text.subtle",weight:(0,t("9wGTI").fg)("confluence_frontend_new_dangling_comments_ux")?"bold":"regular"},i)),u[5]=i,u[6]=l):l=u[6],u[7]!==_||u[8]!==E?(c=(0,t("9wGTI").fg)("confluence_frontend_new_dangling_comments_ux")&&e(o).createElement(t("3gadb").default,{content:E?_(t("9CnRS").i18n.collapseDeletedContent):_(t("9CnRS").i18n.viewDeletedContent)},e(o).createElement(t("1qfLF").default,{appearance:"subtle",icon:E?e(t("2AytZ")):e(t("ghftu")),label:E?_(t("9CnRS").i18n.collapseDeletedContent):_(t("9CnRS").i18n.viewDeletedContent),onClick:()=>g(!E),testId:E?"dangling-content-toggle-collapse":"dangling-content-toggle-expand",spacing:"compact"})),u[7]=_,u[8]=E,u[9]=c):c=u[9],u[10]!==l||u[11]!==c?(d=e(o).createElement(t("bUlM5").default,{gap:"space.100",alignItems:"center",justifyContent:"space-between"},l,c),u[10]=l,u[11]=c,u[12]=d):d=u[12],u[13]!==f||u[14]!==E?(m=E&&(0,t("9wGTI").fg)("confluence_frontend_new_dangling_comments_ux")&&e(o).createElement(t("6f0Oj").default,{xcss:z},e(o).createElement(t("5dK2X").default,{size:"small",color:"color.text.subtlest",maxLines:3},f)),u[13]=f,u[14]=E,u[15]=m):m=u[15],u[16]!==d||u[17]!==m?(p=e(o).createElement(t("6f0Oj").default,null,d,m),u[16]=d,u[17]=m,u[18]=p):p=u[18],p}:({annotatedText:n})=>{let{formatMessage:a}=(0,t("8C5kA").default)(),[r,i]=(0,o.useState)(!1);return e(o).createElement(t("6f0Oj").default,null,e(o).createElement(t("bUlM5").default,{gap:"space.100",alignItems:"center",justifyContent:"space-between"},e(o).createElement(t("bUlM5").default,{gap:"space.100",alignItems:"center"},!(0,t("9wGTI").fg)("confluence_frontend_new_dangling_comments_ux")&&e(o).createElement(e(t("gKvd9")),{label:"",color:"var(--ds-icon-subtlest, #6B6E76)"}),e(o).createElement(t("5dK2X").default,{size:"small",maxLines:3,color:(0,t("9wGTI").fg)("confluence_frontend_new_dangling_comments_ux")?"color.text":"color.text.subtle",weight:(0,t("9wGTI").fg)("confluence_frontend_new_dangling_comments_ux")?"bold":"regular"},a((0,t("9wGTI").fg)("confluence_frontend_new_dangling_comments_ux")?t("9CnRS").i18n.thisContentWasDeleted:t("9CnRS").i18n.contentDeleted))),(0,t("9wGTI").fg)("confluence_frontend_new_dangling_comments_ux")&&e(o).createElement(t("3gadb").default,{content:a(r?t("9CnRS").i18n.collapseDeletedContent:t("9CnRS").i18n.viewDeletedContent)},e(o).createElement(t("1qfLF").default,{appearance:"subtle",icon:r?e(t("2AytZ")):e(t("ghftu")),label:a(r?t("9CnRS").i18n.collapseDeletedContent:t("9CnRS").i18n.viewDeletedContent),onClick:()=>i(!r),testId:r?"dangling-content-toggle-collapse":"dangling-content-toggle-expand",spacing:"compact"}))),r&&(0,t("9wGTI").fg)("confluence_frontend_new_dangling_comments_ux")&&e(o).createElement(t("6f0Oj").default,{xcss:z},e(o).createElement(t("5dK2X").default,{size:"small",color:"color.text.subtlest",maxLines:3},n)))};var Y=t("daq5m");let W=(0,i.isReactCompilerActiveV1)()?()=>{let t,n=(0,s.c)(1);return n[0]===Symbol.for("react.memo_cache_sentinel")?(t=e(o).createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"2",height:"22",viewBox:"0 0 2 22",fill:"none"},e(o).createElement("path",{d:"M1 1L1 21",stroke:"var(--ds-background-accent-yellow-subtlest-pressed, #EFDD4E)",strokeWidth:"2",strokeLinecap:"round"})),n[0]=t):t=n[0],t}:()=>e(o).createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"2",height:"22",viewBox:"0 0 2 22",fill:"none"},e(o).createElement("path",{d:"M1 1L1 21",stroke:"var(--ds-background-accent-yellow-subtlest-pressed, #EFDD4E)",strokeWidth:"2",strokeLinecap:"round"})),$={argumentDefinitions:[],kind:"Fragment",name:"useCommentActionsWriteReactionsSummaryFragment",selections:[{kind:"ScalarField",name:"ari"},{kind:"ScalarField",name:"containerAri"},{kind:"ScalarField",name:"reactionsCount"},{concreteType:"ReactionsSummaryForEmoji",kind:"LinkedField",name:"reactionsSummaryForEmoji",plural:!0,selections:[{kind:"ScalarField",name:"id"},{kind:"ScalarField",name:"emojiId"},{kind:"ScalarField",name:"count"},{kind:"ScalarField",name:"reacted"}]}],type:"ReactionsSummaryResponse"};$.hash="f6aafe0b5386657eb31d9d2871489adf";let Q={argumentDefinitions:[],kind:"Fragment",name:"useCommentActionsReadReactionsSummaryFragment",selections:[{kind:"ScalarField",name:"ari"},{kind:"ScalarField",name:"containerAri"},{kind:"ScalarField",name:"reactionsCount"},{concreteType:"ReactionsSummaryForEmoji",kind:"LinkedField",name:"reactionsSummaryForEmoji",plural:!0,selections:[{kind:"ScalarField",name:"id"},{kind:"ScalarField",name:"emojiId"},{kind:"ScalarField",name:"count"},{kind:"ScalarField",name:"reacted"}]}],type:"ReactionsSummaryResponse"};Q.hash="9642a68f9c63ffd5916eb7291af87c98";let J=(0,t("eSUdr").default)`query useCommentActionsReactionsCommentsQuery($contentId:ID!$containerId:ID!){comments(commentId:$contentId contentStatus:[DRAFT CURRENT]){nodes{id reactionsSummary(pageId:$containerId contentType:"page" childType:"comment"){reactionsCount ari containerAri reactionsSummaryForEmoji{emojiId count reacted id}}}}}`,Z=(0,t("ecnYn").xcss)({marginTop:"space.0"}),ee=(0,t("ecnYn").xcss)({paddingTop:"space.050",marginLeft:"space.200",paddingLeft:"space.300",paddingBottom:"space.100"}),et=(0,t("ecnYn").xcss)({paddingTop:"space.050",paddingBottom:"space.100"}),en=(0,t("ecnYn").xcss)({marginLeft:"space.0",paddingLeft:"space.0",paddingTop:"space.150",paddingBottom:"space.0"}),ea=(0,t("ecnYn").xcss)({marginLeft:"space.0"}),eo=(0,t("ecnYn").xcss)({borderLeft:"1.5px solid var(--ds-background-accent-gray-subtlest-hovered, #DDDEE1)"}),er=(0,t("ecnYn").xcss)({paddingLeft:"space.0"}),ei=(0,o.forwardRef)((0,i.isReactCompilerActiveV1)()?(n,a)=>{let r,i,l,c,d,m,p=(0,s.c)(13);if(p[0]!==a||p[1]!==n){let{as:e,style:o,...s}=n;r=void 0===e?t("dAYOx").default:e,i=s,l=o,c=a,d=(0,t("gMc0m").default)(["_ca0qgrf3 _u5f3grf3 _n3tdgrf3 _19bvgrf3",s.className]),p[0]=a,p[1]=n,p[2]=r,p[3]=i,p[4]=l,p[5]=c,p[6]=d}else r=p[2],i=p[3],l=p[4],c=p[5],d=p[6];return p[7]!==r||p[8]!==i||p[9]!==l||p[10]!==c||p[11]!==d?(m=e(o).createElement(r,{...i,style:l,ref:c,className:d}),p[7]=r,p[8]=i,p[9]=l,p[10]=c,p[11]=d,p[12]=m):m=p[12],m}:({as:n=t("dAYOx").default,style:a,...r},i)=>e(o).createElement(n,{...r,style:a,ref:i,className:(0,t("gMc0m").default)(["_ca0qgrf3 _u5f3grf3 _n3tdgrf3 _19bvgrf3",r.className])})),es=(0,t("ecnYn").xcss)({cursor:"pointer"}),el=(0,o.forwardRef)((0,i.isReactCompilerActiveV1)()?(n,a)=>{let r,i,l,c,d,m,p=(0,s.c)(13);if(p[0]!==a||p[1]!==n){let{as:e,style:o,...s}=n;r=void 0===e?"div":e,i=s,l=o,c=a,d=(0,t("gMc0m").default)(["_ae4v1h6o _80omtlke",s.className]),p[0]=a,p[1]=n,p[2]=r,p[3]=i,p[4]=l,p[5]=c,p[6]=d}else r=p[2],i=p[3],l=p[4],c=p[5],d=p[6];return p[7]!==r||p[8]!==i||p[9]!==l||p[10]!==c||p[11]!==d?(m=e(o).createElement(r,{...i,style:l,ref:c,className:d}),p[7]=r,p[8]=i,p[9]=l,p[10]=c,p[11]=d,p[12]=m):m=p[12],m}:({as:n="div",style:a,...r},i)=>e(o).createElement(n,{...r,style:a,ref:i,className:(0,t("gMc0m").default)(["_ae4v1h6o _80omtlke",r.className])})),ec=(0,o.forwardRef)((0,i.isReactCompilerActiveV1)()?(n,a)=>{let r,i,l,c,d,m,p=(0,s.c)(13);if(p[0]!==a||p[1]!==n){let{as:e,style:o,...s}=n,{hasReactions:m,isCommentsPanel:u,...f}=s;r=void 0===e?"div":e,i=f,l=o,c=a,d=(0,t("gMc0m").default)(["",s.hasReactions?"_1e0c1ule":"_1e0c116y",s.hasReactions?"_i0dl1osq":"_i0dl1wug",s.isCommentsPanel||s.hasReactions?"_19pkze3t":"_19pk1b66",s.isCommentsPanel||s.hasReactions?"_18u0ze3t":"_18u01b66",s.className]),p[0]=a,p[1]=n,p[2]=r,p[3]=i,p[4]=l,p[5]=c,p[6]=d}else r=p[2],i=p[3],l=p[4],c=p[5],d=p[6];return p[7]!==r||p[8]!==i||p[9]!==l||p[10]!==c||p[11]!==d?(m=e(o).createElement(r,{...i,style:l,ref:c,className:d}),p[7]=r,p[8]=i,p[9]=l,p[10]=c,p[11]=d,p[12]=m):m=p[12],m}:({as:n="div",style:a,...r},i)=>{let{hasReactions:s,isCommentsPanel:l,...c}=r;return e(o).createElement(n,{...c,style:a,ref:i,className:(0,t("gMc0m").default)(["",r.hasReactions?"_1e0c1ule":"_1e0c116y",r.hasReactions?"_i0dl1osq":"_i0dl1wug",r.isCommentsPanel||r.hasReactions?"_19pkze3t":"_19pk1b66",r.isCommentsPanel||r.hasReactions?"_18u0ze3t":"_18u01b66",r.className])})}),ed=(0,o.forwardRef)((0,i.isReactCompilerActiveV1)()?(n,a)=>{let r,i,l,c,d,m,p=(0,s.c)(13);if(p[0]!==a||p[1]!==n){let{as:e,style:o,...s}=n;r=void 0===e?"li":e,i=s,l=o,c=a,d=(0,t("gMc0m").default)(["_2lx2vrvc _1n261q9c _1e0c116y _syazazsu _1tke1tcg _4cvr1h6o _xrwlcs5v _144bkb7n _14p1f1ug _ekv61o8v _6wjiesu3 _43ds1oa5 _1pzmusic _ep9t1b66 _5lhmtlke _1tzjf4df _8bo21mp2 _nqnuazsu _d32vazsu _nlwjglyw _49cd7g83",s.className]),p[0]=a,p[1]=n,p[2]=r,p[3]=i,p[4]=l,p[5]=c,p[6]=d}else r=p[2],i=p[3],l=p[4],c=p[5],d=p[6];return p[7]!==r||p[8]!==i||p[9]!==l||p[10]!==c||p[11]!==d?(m=e(o).createElement(r,{...i,style:l,ref:c,className:d}),p[7]=r,p[8]=i,p[9]=l,p[10]=c,p[11]=d,p[12]=m):m=p[12],m}:({as:n="li",style:a,...r},i)=>e(o).createElement(n,{...r,style:a,ref:i,className:(0,t("gMc0m").default)(["_2lx2vrvc _1n261q9c _1e0c116y _syazazsu _1tke1tcg _4cvr1h6o _xrwlcs5v _144bkb7n _14p1f1ug _ekv61o8v _6wjiesu3 _43ds1oa5 _1pzmusic _ep9t1b66 _5lhmtlke _1tzjf4df _8bo21mp2 _nqnuazsu _d32vazsu _nlwjglyw _49cd7g83",r.className])})),em=(0,o.forwardRef)((0,i.isReactCompilerActiveV1)()?(n,a)=>{let r,i,l,c,d,m,p=(0,s.c)(13);if(p[0]!==a||p[1]!==n){let{as:e,style:o,...s}=n;r=void 0===e?"button":e,i=s,l=o,c=a,d=(0,t("gMc0m").default)(["_11q7glyw _19itglyw _ca0qidpf _u5f3idpf _n3tdidpf _19bvidpf _12ji1r31 _1qu21kw7 _12y31o36 _syaz1kw7 _1wyb1kw7 _80omtlke _1as91r31 _j4qy8stv _1wwgnqa1 _y2mv7g83 _1bg4yh40",s.className]),p[0]=a,p[1]=n,p[2]=r,p[3]=i,p[4]=l,p[5]=c,p[6]=d}else r=p[2],i=p[3],l=p[4],c=p[5],d=p[6];return p[7]!==r||p[8]!==i||p[9]!==l||p[10]!==c||p[11]!==d?(m=e(o).createElement(r,{...i,style:l,ref:c,className:d}),p[7]=r,p[8]=i,p[9]=l,p[10]=c,p[11]=d,p[12]=m):m=p[12],m}:({as:n="button",style:a,...r},i)=>e(o).createElement(n,{...r,style:a,ref:i,className:(0,t("gMc0m").default)(["_11q7glyw _19itglyw _ca0qidpf _u5f3idpf _n3tdidpf _19bvidpf _12ji1r31 _1qu21kw7 _12y31o36 _syaz1kw7 _1wyb1kw7 _80omtlke _1as91r31 _j4qy8stv _1wwgnqa1 _y2mv7g83 _1bg4yh40",r.className])})),ep=(0,t("ecnYn").xcss)({":hover":{textDecoration:"underline"}}),eu=(0,t("ecnYn").xcss)({position:"absolute",right:"space.0",display:"flex",gap:"space.075",justifyContent:"space-between",alignItems:"center",paddingLeft:"space.150"}),ef=(0,t("ecnYn").xcss)({top:"space.0"}),e_=(0,t("ecnYn").xcss)({top:"space.150",right:"space.200"}),eE=(0,t("ecnYn").xcss)({top:"space.100"}),eg=(0,t("ecnYn").xcss)({top:"space.050"}),eI=(0,t("ecnYn").xcss)({top:"space.150"}),eC=(0,t("ecnYn").xcss)({top:"space.200"}),ey=(0,t("ecnYn").xcss)({background:"var(--ds-surface-raised, #FFFFFF)"}),ev=(0,t("ecnYn").xcss)({background:"var(--ds-surface, #FFFFFF)"}),eT=(0,t("ecnYn").xcss)({background:"var(--ds-background-input, #FFFFFF)"}),ew=(0,t("ecnYn").xcss)({background:"var(--ds-background-input-hovered, #F8F8F8)"}),eb=(0,t("ecnYn").xcss)({paddingLeft:"space.050"}),eR=({pageId:n,pageType:a,commentId:r,permissions:i,isReply:s,parentCommentId:l,restrictEdit:c,restrictDelete:m,deleteComment:p,editComment:u,resolveComment:f,mode:C,overflowMenuPortal:y,supportedActions:v,isCommentsPanel:T=!1,isHovered:w,annotationId:b,resolveProperties:R,reopenComment:h,replyToComment:N,inheritedReactionsData:S,reactionsCacheUpdateFn:A,commentDateUrl:x,isResolvedByAnotherUser:D,commentType:k,hideBranchingStyle:M=!1,canAddComments:O=!0,isDeletedByAnotherUser:P=!1,isSelected:F=!1,isParentCommentOpen:L,isFooterComment:V=!1,isStandaloneComment:G=!1,isOffline:j=!1,numReplies:q,isFabricPage:U=!0,authorName:H,isArchived:B})=>{let X=(0,t("1pSma").default)("delete-comment-action"),z=(0,t("1pSma").default)("start-edit-comment-action"),K=(0,t("1pSma").default)("start-reply-comment-action"),Y=(0,t("1pSma").default)("resolve-comment-action"),[W,eR]=(0,o.useState)(!1),[eh,eN]=(0,o.useState)(!1),[eS,eA]=(0,o.useState)(!1),[ex,eD]=(0,o.useState)(!1),[ek,eM]=(0,o.useState)(!1),[eO,eP]=(0,o.useState)(!1),eF=(0,o.useContext)(t("1kHsc").ExperienceTrackerContext),{isReactionsEnabled:eL}=(0,o.useContext)(t("8SCD6").ReactionsContext),[eV,eG]=(0,o.useState)(S?.reactionsCount||0),[ej,eq]=(0,o.useState)({}),{hasContentChanged:eU}=(0,t("bSvtO").useCommentsContentState)(),{resetContentChanged:eH}=(0,t("bSvtO").useCommentsContentActions)(),{showModal:eB}=(0,t("8aF6s").useDialogs)(),{updateReactionsSummary:eX}=(0,t("8i27m").useCommentsDataActions)(),ez=(0,t("fFmJj").useReadFragmentInterop)({fragmentSpec:Q}),eK=(0,t("ij4CE").useWriteFragmentInterop)({fragmentSpec:$}),{edition:eY,cloudId:eW}=(0,t("bQm3c").useSessionData)(),{commentService:e$}=(0,t("6hmtW").useCommentService)(),eQ=(0,t("3jwuS").useIsCurrentPageLive)(),[eJ]=(0,t("ep3mz").usePageContentId)(),{subType:eZ}=(0,t("9sGCn").getCachedPageData)(eJ),{formatMessage:e1}=(0,t("8C5kA").default)(),{data:e0,loading:e2}=(0,t("xQxzY").useQuery)(J,{variables:{contentId:r,containerId:n},onError:e=>{eF.stopOnError({name:t("irVI7").VIEW_REACTIONS_EXPERIENCE,error:e})},fetchPolicy:"cache-and-network",skip:!!S});(0,o.useEffect)(()=>{eG((null==S?e0?.comments?.nodes?.[0]?.reactionsSummary?.reactionsCount:S?.reactionsCount)||0)},[e0,S]),(0,o.useEffect)(()=>{let e=j&&(0,t("6mKj3").expVal)("platform_editor_offline_editing_web","isEnabled",!1),n=!!(i?.isEditable&&u&&v.includes("edit")&&!e),a=!!(i?.isRemovable&&p&&v.includes("delete")&&!e),o=!!(i?.isResolvable&&f&&v.includes("resolve")&&!e),r=!!(h&&v.includes("reopen")&&i?.isResolvable&&!s)&&!e;R?.resolved&&R?.isDangling?(0,t("9wGTI").fg)("confluence_frontend_content_wrapper")?eP(r):eP(!1):eP(!!(r&&(R?.resolved||D)&&(b&&(0,t("g0DaR").inlineCommentExists)(b)||k===t("8i27m").CommentType.GENERAL))),"view"===C||"edit"===C?(s?eM(!1):eM(o),T||U&&(0,t("9wGTI").fg)("confluence_frontend_content_wrapper")?eN(!!w&&(n||a||o)):!s&&(n||a||o)&&eN(!0),eD(a),eA(n)):(eD(a),eA(n),eM(o&&!s))},[C,i,w,s,T,v,p,u,f,h,R?.isDangling,b,R?.resolved,D,k,j,U]),(0,o.useEffect)(()=>{W&&!w&&eR(!1)},[T,W,w,eR]);let e9=()=>{switch(C){case"view":return t("ad6ZE").InlineCommentMode.VIEW;case"edit":if(eQ)return t("ad6ZE").InlineCommentMode.LIVE;return t("ad6ZE").InlineCommentMode.EDIT}},e8=()=>{k===t("8i27m").CommentType.INLINE?eF.start({name:t("irVI7").DELETE_INLINE_COMMENT_EXPERIENCE,attributes:{...(0,t("gtj7V").getCommentsDataManagerExperimentAttributes)(),mode:e9(),framework:t("kmHPt").InlineCommentFramework.ANNOTATION_PROVIDER,isReply:s,source:T?t("en1dX").AnalyticsSource.COMMENTS_PANEL:t("en1dX").AnalyticsSource.STANDALONE,annotationId:b}}):eF.start({name:t("irVI7").DELETE_PAGE_COMMENT_EXPERIENCE,attributes:{...(0,t("gtj7V").getCommentsDataManagerExperimentAttributes)(),isReply:s}}),eB(E.CommentWarningDialog,{onConfirm:()=>{e3()},isDelete:!0,onCancel:()=>{eF.abort({name:k===t("8i27m").CommentType.INLINE?t("irVI7").DELETE_INLINE_COMMENT_EXPERIENCE:t("irVI7").DELETE_PAGE_COMMENT_EXPERIENCE,reason:"delete dialog closed"})}})},e3=()=>{p&&(X(),p())},e6=()=>{k===t("8i27m").CommentType.INLINE?(0,t("8Ss4E").startEditorExperiences)({name:t("irVI7").EDIT_INLINE_COMMENT_EXPERIENCE,attributes:{...(0,t("gtj7V").getCommentsDataManagerExperimentAttributes)(),mode:e9(),framework:t("kmHPt").InlineCommentFramework.ANNOTATION_PROVIDER,isReply:s,type:s?"reply":"topLevel",annotationId:b}},{name:t("irVI7").EDIT_INLINE_COMMENT_LOAD_EXPERIENCE},{name:t("irVI7").EDIT_INLINE_COMMENT_PUBLISH_EXPERIENCE}):(0,t("8Ss4E").startEditorExperiences)({name:t("irVI7").EDIT_PAGE_COMMENT_EXPERIENCE,attributes:{...(0,t("gtj7V").getCommentsDataManagerExperimentAttributes)(),editor:"FABRIC",isSingleExperience:!0,edition:eY,type:s?"reply":"topLevel",source:V?t("en1dX").AnalyticsSource.PAGE_FOOTER:t("en1dX").AnalyticsSource.COMMENTS_PANEL}},{name:t("irVI7").EDIT_PAGE_COMMENT_LOAD_EXPERIENCE},{name:t("irVI7").EDIT_PAGE_COMMENT_PUBLISH_EXPERIENCE}),u&&u()},e7=()=>{z(),e6()},e5=()=>{let e=V?r:l||r;eU?eB(E.CommentWarningDialog,{onConfirm:()=>{eH(),e4(e)}}):e4(e)},e4=e=>{N&&(K(),N(e))},te=async()=>{let e=`${window.location.origin}/wiki${x}`;(0,t("aHcFH").isClipboardApiSupported)()?await (0,t("aHcFH").copyToClipboard)(e):(0,t("aHcFH").isIEClipboardApiSupported)()&&await (0,t("aHcFH").copyToClipboardIE)(e)},tt=()=>{let e=()=>{k===t("8i27m").CommentType.INLINE?eF.start({name:t("irVI7").RESOLVE_INLINE_COMMENT_EXPERIENCE,id:r,attributes:{...(0,t("gtj7V").getCommentsDataManagerExperimentAttributes)(),mode:e9(),framework:t("kmHPt").InlineCommentFramework.ANNOTATION_PROVIDER,annotationId:b}}):eF.start({name:t("irVI7").RESOLVE_PAGE_COMMENT_EXPERIENCE,id:r,attributes:{...(0,t("gtj7V").getCommentsDataManagerExperimentAttributes)(),annotationId:b}}),tn()};eU?eB(E.CommentWarningDialog,{onConfirm:()=>{eH(),e()}}):e()},tn=()=>{f&&(Y(),f())},ta=()=>{h&&h()},to=(0,o.useCallback)((e,t)=>{eq(n=>({...n,[e]:t}))},[]),tr=(n,a)=>a?n?e(o).createElement(ei,{testId:"disabled-edit-comment-dropdown-action"},e(o).createElement(_,{action:"edit",isReply:s,isInOverflowMenu:!0})):e(o).createElement(t("dAYOx").default,{testId:"edit-comment-dropdown-action","data-cy":"edit-comment-action",onClick:e6,interactionName:"start-edit-comment-action"},e(o).createElement(t("gtD4K").default,t("9CnRS").i18n.edit)):n?e(o).createElement(_,{action:"edit",isReply:s,isInOverflowMenu:!0}):e(o).createElement(em,{"data-testid":"edit-comment-action","data-cy":"edit-comment-action",onClick:e7},e(o).createElement(t("gtD4K").default,t("9CnRS").i18n.edit)),ti=(n,a)=>a?n?e(o).createElement(ei,{testId:"disabled-delete-comment-dropdown-action"},e(o).createElement(_,{action:"delete",isReply:s,isInOverflowMenu:!0})):e(o).createElement(t("dAYOx").default,{testId:"delete-comment-dropdown-action",onClick:e8},e(o).createElement(t("gtD4K").default,t("9CnRS").i18n.delete)):n?e(o).createElement(_,{action:"delete",isReply:s}):e(o).createElement(em,{"data-testid":"delete-comment-action",onClick:e8,onMouseEnter:()=>I({cloudId:eW})},e(o).createElement(t("gtD4K").default,t("9CnRS").i18n.delete)),ts=()=>eO&&e(o).createElement("div",{className:(0,t("gMc0m").default)(["_zulp12x7 _1e0c1txw _1bah1h6o _4cvr1h6o"])},D&&!(0,t("9wGTI").fg)("confluence_frontend_content_wrapper")&&e(o).createElement("div",{className:(0,t("gMc0m").default)(["_11c81vhk _syazazsu"])},e1(t("9CnRS").i18n.resolved)),e(o).createElement(t("1qfLF").default,{icon:n=>e(o).createElement(e(t("3sFtD")),{...n,spacing:"spacious",color:"var(--ds-icon-success, #6A9A23)",label:e1(t("9CnRS").i18n.reopen)}),label:e1(t("9CnRS").i18n.reopen),isTooltipDisabled:!1,onClick:ta,appearance:"subtle",testId:"reopen-comment-action",analyticsContext:{attributes:{name:t("en1dX").ActionName.REOPEN_COMMENT,source:T?t("en1dX").AnalyticsSource.COMMENTS_PANEL:t("en1dX").AnalyticsSource.STANDALONE,isDanglingComment:R?.isDangling}}})),tl=()=>{if(T||(0,t("9wGTI").fg)("confluence_frontend_comments_panel_v2"))return e(o).createElement(el,null,e(o).createElement(em,{"data-testid":"reply-comment-action","data-cy":"reply-comment-action",onClick:e5},e(o).createElement(t("gtD4K").default,t("9CnRS").i18n.replyPlaceholder)))},tc=()=>e(o).createElement(t("dAYOx").default,{testId:"copy-link-dropdown-action",onClick:te},e(o).createElement(t("gtD4K").default,t("9CnRS").i18n.copyLink)),td=()=>{if(!(T&&s&&(0,t("9wGTI").fg)("confluence-frontend-comments-panel")))return e(o).createElement(t("dAYOx").default,{testId:"resolve-comment-dropdown-action",onClick:tt},e(o).createElement(t("gtD4K").default,t("9CnRS").i18n.resolve))},tm=(n,a)=>{let r=!eS&&!ex&&(s||!ek),i=!T&&r,l=T&&r&&!(0,t("9wGTI").fg)("confluence_frontend_comments_panel_v2");if(i||l)return e(o).createElement(e(o).Fragment,null);let c=e(o).createElement("span",{"data-cy":"comment-overflow-actions-menu","data-testid":"comment-overflow-actions-menu"},e(o).createElement(t("52EPl").default,{strategy:"absolute",shouldRenderToParent:!0,testId:"comment-overflow-menu",isOpen:W,zIndex:501,onOpenChange:({isOpen:e,event:t})=>{t?.stopPropagation(),eR(e),ex&&I({cloudId:eW})},trigger:({triggerRef:n,...a})=>e(o).createElement(t("1qfLF").default,{...a,ref:n,testId:"comment-overflow-menu-trigger",label:e1(t("9CnRS").i18n.commentActionsMenuLabel),appearance:"subtle",spacing:"compact",icon:e(t("9VJDA")),isTooltipDisabled:!1,isSelected:W,analyticsContext:{attributes:{name:"moreActionsButton",source:T?t("en1dX").AnalyticsSource.COMMENTS_PANEL:t("en1dX").AnalyticsSource.STANDALONE,commentType:k}}})},e(o).createElement(t("ahaN7").default,null,U&&(T||(0,t("9wGTI").fg)("confluence_frontend_content_wrapper"))&&(0,t("9wGTI").fg)("confluence_frontend_comments_panel_v2")&&tc(),(!T&&!(0,t("9wGTI").fg)("confluence_frontend_content_wrapper")||!U&&!V)&&ek&&td(),eS&&tr(n,eh),ex&&ti(a,eh))));return y&&!(0,t("9wGTI").fg)("confluence_frontend_content_wrapper")?(0,d.createPortal)(c,y):c},tp=(0,o.useMemo)(()=>A||(void 0!==S&&T?(e,t,n,a,o)=>(eq(n=>({...n,[e]:"add"===t})),b&&e&&t&&e$?.onUpdateReaction(b,e,t),eX(e,t,n,k,ez,eK,a,b,o)):void 0),[S,A,T,b,k,eX,e$,ez,eK]),tu=()=>{let n=e1(t("9CnRS").i18n.replyPlaceholderWithName,{name:H||e1(t("3ejfs").commentsi18n.anonymous)});return e(o).createElement(t("6f0Oj").default,{testId:"comment-reply-button-container",...(0,t("6mKj3").expVal)("confluence_frontend_comments_a11y_kb_exp","isEnabled",!1)?{"aria-label":n}:{}},e(o).createElement(t("1qfLF").default,{testId:"comment-reply-button",label:(0,t("6mKj3").expVal)("confluence_frontend_comments_a11y_kb_exp","isEnabled",!1)?e1(t("9CnRS").i18n.replyPlaceholderWithName,{name:H||e1(t("3ejfs").commentsi18n.anonymous)}):e1(t("9CnRS").i18n.replyPlaceholder),appearance:"subtle",spacing:"compact",icon:(0,t("6mKj3").expValEquals)("confluence_comments_tuneup","isEnabled",!0)?e(t("diR4K")):e(t("c6fYi")),onClick:e5,isTooltipDisabled:!1}))},tf=()=>e(o).createElement(t("1qfLF").default,{testId:"comment-resolve-action-item",label:(0,t("6mKj3").expVal)("confluence_frontend_comments_a11y_kb_exp","isEnabled",!1)?e1(t("9CnRS").i18n.resolveThread):e1(t("9CnRS").i18n.resolve),appearance:"subtle",spacing:"compact",icon:e(t("cvXh8")),onClick:tt,isTooltipDisabled:!1,analyticsContext:{attributes:{name:"resolveActionsButton",source:T?t("en1dX").AnalyticsSource.COMMENTS_PANEL:t("en1dX").AnalyticsSource.STANDALONE,commentType:k}},className:(0,t("gMc0m").default)(["_ca0qidpf _u5f3idpf _n3tdidpf _19bvidpf"])}),t_=({onlyRenderPicker:i=!1,readOnly:l=!1}={})=>e(o).createElement(ec,{hasReactions:eV>0,isCommentsPanel:(T||(0,t("9wGTI").fg)("confluence_frontend_content_wrapper"))&&U,onClick:e=>e.stopPropagation(),...(0,t("6mKj3").expVal)("confluence_frontend_comments_a11y_kb_exp","isEnabled",!1)?{"aria-label":e1(t("9CnRS").i18n.reactionAriaLabelWithName,{name:H||e1(t("3ejfs").commentsi18n.anonymous)})}:{}},e(o).createElement(g.ReactionsLoader,{readOnly:l,contentId:r,containerId:n,containerType:a,location:"edit"===C?t("2ttXz").ReactionLocation.EDITOR_INLINE_COMMENT:t("2ttXz").ReactionLocation.INLINE_COMMENT,hidePlaceholder:0===eV||void 0!==S,reactionsData:null==S?e0?.comments?.nodes?.[0]?.reactionsSummary:S,updateCache:tp,onlyRenderPicker:i,isSubtle:T||(0,t("9wGTI").fg)("confluence_frontend_content_wrapper"),showAddReactionText:!1,customAnalyticsAttributes:{source:T?t("en1dX").AnalyticsSource.COMMENTS_PANEL:t("en1dX").AnalyticsSource.STANDALONE,isReply:s,mode:C},contentSubType:eZ,isListItem:!1,key:`reactions-${r}-${i}`,particleEffectByEmoji:ej,onParticleEffectChange:to})),tE=()=>e(o).createElement(t("2W0qg").default,{testId:"old-reopen-comment-action",onClick:ta,padding:"space.0",backgroundColor:"color.background.neutral.subtle",xcss:ep},e(o).createElement(t("5dK2X").default,{color:"color.text.subtlest",size:"small"},e(o).createElement(t("gtD4K").default,t("9CnRS").i18n.reopen))),tg=()=>{if(T){if(F)return"var(--ds-background-input-hovered, #F8F8F8)";else if(w)return"var(--ds-surface-raised, #FFFFFF)"}return"var(--ds-surface, #FFFFFF)"},tI=()=>e(o).createElement(t("6f0Oj").default,{"data-testId":"comment-action-items",xcss:[eu,es,w&&!(0,t("9wGTI").fg)("confluence_frontend_content_wrapper")&&eT,w&&(0,t("9wGTI").fg)("confluence_frontend_content_wrapper")&&(V||G||!T?ev:ey),F&&T&&ew,V&&eE,(T||(0,t("9wGTI").fg)("confluence_frontend_content_wrapper"))&&U&&!V&&ef,!T&&!V&&(0,t("9wGTI").fg)("confluence_frontend_content_wrapper")&&U&&e_,T&&s&&(0,t("9wGTI").fg)("confluence_frontend_content_wrapper")&&eE,(0,t("6mKj3").expValEquals)("confluence_cohiti_comment_hover_actions","isEnabled",!0)&&eb,(0,t("6mKj3").expValEquals)("confluence_comments_tuneup","isEnabled",!0)&&eC,T&&!s&&(0,t("6mKj3").expValEquals)("confluence_comments_tuneup","isEnabled",!0)&&eg,(s||V)&&(0,t("6mKj3").expValEquals)("confluence_comments_tuneup","isEnabled",!0)&&eI]},e(o).createElement("div",{style:{boxShadow:(0,t("6mKj3").expValEquals)("confluence_cohiti_comment_hover_actions","isEnabled",!0)?`-10px 0 10px 0px ${tg()}`:""},"data-testId":"comment-hover-actions-container",className:(0,t("gMc0m").default)(["_zulp12x7 _1e0c1txw _1bah1h6o _4cvr1h6o",(0,t("6mKj3").expValEquals)("confluence_cohiti_comment_hover_actions","isEnabled",!0)&&"_2rko12b0 _kqswh2mm _c71l1kw7"])},!R?.resolved&&!D&&(!s||V||T&&(0,t("9wGTI").fg)("confluence_frontend_content_wrapper"))&&!B&&O&&tu(),eL&&!e2&&e(o).createElement("div",null,t_({onlyRenderPicker:!0,readOnly:j&&(0,t("6mKj3").expVal)("platform_editor_offline_editing_web","isEnabled",!1)})),!s&&!R?.resolved&&!D&&ek&&e(o).createElement("div",null,tf()),e(o).createElement("div",null,tm(c,m)))),tC=()=>{let n=R?.resolved||D;return e(o).createElement(e(o).Fragment,null,n&&e(o).createElement(t("6f0Oj").default,{xcss:(0,t("9wGTI").fg)("confluence_frontend_comments_panel_v2")&&[eu,(T||(0,t("9wGTI").fg)("confluence_frontend_content_wrapper"))&&U&&!V&&ef,V&&eE],testId:"static-actions-items"},(0,t("9wGTI").fg)("confluence_frontend_comments_panel_v2")?ts():tE()))};return(T||(0,t("9wGTI").fg)("confluence_frontend_content_wrapper"))&&U?(()=>{let n=!R?.resolved&&!D&&!(0,t("9wGTI").fg)("confluence_frontend_comments_panel_v2"),a=R?.resolved||s&&!L;return{mainCommentActions:e(o).createElement(e(o).Fragment,null,n&&tl(),eL&&!e2&&eV>0&&e(o).createElement(t("6f0Oj").default,{xcss:[Z,(T||(0,t("9wGTI").fg)("confluence_frontend_content_wrapper"))&&U&&ee,(T||(0,t("9wGTI").fg)("confluence_frontend_content_wrapper"))&&U&&(0,t("9wGTI").fg)("confluence_frontend_comments_panel_v2")&&et,(T||(0,t("9wGTI").fg)("confluence_frontend_content_wrapper"))&&U&&s&&(0,t("9wGTI").fg)("confluence_frontend_comments_panel_v2")&&en,(T||(0,t("9wGTI").fg)("confluence_frontend_content_wrapper"))&&U&&!s&&(!M&&O||a&&0!==q)&&(0,t("9wGTI").fg)("confluence_frontend_comments_panel_v2")&&eo,!T&&(0,t("9wGTI").fg)("confluence_frontend_content_wrapper")&&U&&ea,!T&&!V&&M&&(0,t("9wGTI").fg)("confluence_frontend_content_wrapper")&&U&&er]},t_({readOnly:a||j&&(0,t("6mKj3").expVal)("platform_editor_offline_editing_web","isEnabled",!1)}))),hoveredActionItems:s&&!L||!w||R?.resolved||P?tC():tI()}})():{mainCommentActions:e(o).createElement(e(o).Fragment,null,!s&&tm(c,m),e(o).createElement(t("666Tc").ActionsContainer,null,e(o).createElement(ed,{"aria-hidden":"true"}),!s&&ek&&e(o).createElement(ed,{mode:C,isReply:s},e(o).createElement(em,{"data-testid":"resolve-comment-action","data-cy":"resolve-comment-action",onClick:tt},e(o).createElement(t("gtD4K").default,t("9CnRS").i18n.resolve))),!eh&&eS&&e(o).createElement(ed,{mode:C,isReply:s},tr(c,eh)),!eh&&ex&&e(o).createElement(ed,{mode:C,isReply:s},ti(m,eh)),eL&&!e2&&!R?.resolved&&t_({readOnly:j&&(0,t("6mKj3").expVal)("platform_editor_offline_editing_web","isEnabled",!1)}),!R?.resolved||T&&(0,t("9wGTI").fg)("confluence-frontend-comments-panel")&&tl())),hoveredActionItems:null}},eh=(0,i.isReactCompilerActiveV1)()?()=>{let e,t,n,a=(0,s.c)(4),[r,i]=(0,o.useState)(0),l=(0,o.useRef)(null);return a[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{let e=l.current,t=new ResizeObserver(e=>{e.forEach(e=>{i(e.contentRect.height)})});if(e)return t.observe(e),()=>{t.unobserve(e)}},t=[],a[0]=e,a[1]=t):(e=a[0],t=a[1]),(0,o.useLayoutEffect)(e,t),a[2]!==r?(n=[l,r],a[2]=r,a[3]=n):n=a[3],n}:()=>{let[e,t]=(0,o.useState)(0),n=(0,o.useRef)(null);return(0,o.useLayoutEffect)(()=>{let e=n.current,a=new ResizeObserver(e=>{e.forEach(e=>{t(e.contentRect.height)})});if(e)return a.observe(e),()=>{a.unobserve(e)}},[]),[n,e]},eN=(0,o.forwardRef)(({as:n="div",style:a,...r},i)=>{let{isCommentsPanel:s,isFabricPage:l,isRemoving:c,isFocused:d,...m}=r;return e(o).createElement(n,{...m,style:{...a,"--_6drwq1":(0,t("7sObp").default)("view-all"===r.mode?"var(--ds-space-400, 32px)":!0===r.isCommentsPanel?"inherit":r.isFabricPage&&(0,t("9wGTI").fg)("confluence_frontend_content_wrapper")?"var(--ds-space-150, 12px) var(--ds-space-200, 16px) var(--ds-space-0, 0px) var(--ds-space-200, 16px)":"var(--ds-space-150, 12px) var(--ds-space-200, 16px)")},ref:i,className:(0,t("gMc0m").default)(["_1yt4431d _12ji1r31 _1qu2glyw _12y31o36 _1kl7idpf _x3doidpf _1e0c1txw _2lx21bp4 _5sag1bs3 _1o51q7pw _tip812c5 _1pglp3kn _1ragidpf _ha8h1rpy",r.isRemoving?"_80om13gf":"_80om1kw7",!!(r.isFocused&&!r.isCommentsPanel)&&"_11q715s3",!!r.isRemoving&&"",!!r.isRemoving&&"_y44vy8h8",r.className])})}),eS=(0,t("ecnYn").xcss)({display:"flex",fontStyle:"italic",padding:"space.150"}),eA=(0,t("ecnYn").xcss)({opacity:"50%"}),ex=(0,t("ecnYn").xcss)({borderWidth:"border.width",borderStyle:"solid",borderColor:"color.border",borderRadius:"radius.small",padding:"space.200",width:"100%",backgroundColor:"elevation.surface",marginBottom:"space.150"}),eD=(0,t("ecnYn").xcss)({borderWidth:"border.width",borderStyle:"solid",borderColor:"color.border",borderRadius:"radius.small",paddingTop:"space.150",paddingBottom:"space.150",paddingLeft:"space.200",paddingRight:"space.200",width:"100%",backgroundColor:"elevation.surface",marginBottom:"space.150"}),ek=(0,t("ecnYn").xcss)({cursor:"pointer"}),eM=(0,t("ecnYn").xcss)({background:"var(--ds-surface-pressed, #DDDEE1)"}),eO=(0,t("ecnYn").xcss)({height:"var(--ds-space-100, 8px)",width:"var(--ds-space-100, 8px)",backgroundColor:"color.background.brand.bold",borderRadius:"radius.full",margin:"space.050"}),eP=(0,t("ecnYn").xcss)({height:"var(--ds-space-100, 8px)",width:"var(--ds-space-100, 8px)",backgroundColor:"color.background.brand.bold",borderRadius:"radius.full",margin:"space.050",transition:"opacity 300ms ease-in-out"}),eF=(0,t("ecnYn").xcss)({opacity:1}),eL=(0,t("ecnYn").xcss)({opacity:0}),eV=(0,o.forwardRef)(({as:n="div",style:a,...r},i)=>e(o).createElement(n,{...r,style:a,ref:i,className:(0,t("gMc0m").default)(["_kqswh2mm _4t3it94y _19pk1n1a",r.className])})),eG=(0,t("ecnYn").xcss)({height:"22px",width:"2px"}),ej=(0,t("ecnYn").xcss)({paddingTop:"space.100"}),eq=(0,t("2XqLN").default)((e,n)=>{if(!e?.length)return null;try{return JSON.parse(e)}catch(e){return n.stopOnError({name:t("irVI7").VIEW_INLINE_COMMENT_EXPERIENCE,error:e,attributes:{stopPoint:"inline-comments-common/CommentBody"}}),null}}),eU=["edit","delete","resolve"];n.exports.CommentBody=({pageId:n,pageType:a,avatarUrl:i,commentId:s,content:l,date:c,createdAt:d,createdAtNonLocalized:m,versionByDisplayName:p,versionDate:u,displayName:f,permissions:_,dateUrl:E,userId:g,deleteComment:I,editComment:C,resolveComment:y,isReply:v,isEdited:T,parentCommentId:w,isFocused:b,shouldScrollIntoView:R,isRemoving:h,numReplies:N,isFabricPage:S,isCommentActive:A,isCurrentUserAnonymous:x,mode:D,onRendered:k,onClose:M,shouldAutofocus:O,onAutoFocused:P,permissionType:F,maxHeight:L,fadeOutHeight:V,onComplete:G,supportedActions:j=eU,isUnread:q=!1,unreadCommentRef:U,isCommentsPanel:H=!1,isHovered:X,isResolvedByAnotherUser:z=!1,resolveProperties:$,annotationId:Q,annotatedText:J,reopenComment:Z,replyToComment:ee,inheritedReactionsData:et,reactionsCacheUpdateFn:en,isDeletedByAnotherUser:ea,currentlySelectedThreadKey:eo,setCurrentlySelectedThreadKey:er,isAnnotatedTextPressed:ei,setAnnotatedTextPressed:es,commentType:el=t("8i27m").CommentType.INLINE,adjustForNestedReplies:ec=!1,hideBranchingStyle:ed=!1,canAddComments:em=!0,isThreadHovered:ep,isParentCommentOpen:eu,isStandalonehovered:ef,isFooterComment:e_=!1,adjustForFooterNestedReplies:eE=!1,isStandaloneComment:eg=!1,isOffline:eI=!1,showRepliesWithCurvedBorders:eC,replyHasNestedObjects:ey=!1})=>{let{formatMessage:ev}=(0,t("8C5kA").default)(),[eT,ew]=(0,o.useState)(!1),[eb,eH]=(0,o.useState)(!1),[eB,eX]=(0,o.useState)(void 0),[ez,eK]=(0,o.useState)(!1),eY=(0,t("aSsfA").useGetPageMode)(),eW=eY===t("cD1qu").PageMode.EDIT||eY===t("cD1qu").PageMode.LIVE?(0,t("gfqXk").getEditorAnnotationEventEmitter)():(0,t("gczDe").getRendererAnnotationEventEmitter)(),e$=eo===Q&&!ef,[eQ]=(0,t("ep3mz").useContentType)(),eJ=(0,o.useContext)(t("1kHsc").ExperienceTrackerContext),[eZ,e1]=eh(),[e0,e2]=(0,o.useState)(null),{getViewedCommentsCacheOnly:e9}=(0,t("d3bcC").useViewedComments)({pageId:n||""}),{userId:e8}=(0,t("bQm3c").useSessionData)(),e3=(0,o.useCallback)(e=>{if(!(0,t("9wGTI").fg)("confluence_frontend_unread_comments_fixes"))return;let n=e9(),a=n.success&&n.data?n.data:new Set,o=(0,t("e4kZB").buildValidationObjectFromProps)({commentId:s,userId:g,createdAt:d,commentType:el===t("8i27m").CommentType.INLINE?"INLINE":"FOOTER",resolveProperties:{resolved:!1}}),r=(0,t("e4kZB").isValidUnreadComment)({comment:o,currentUserId:e8||"",viewedComments:a});e&&r?((0,t("c1UWH").getUnreadCommentsIntersectionObserver)().observeComment(e),e2(e)):e2(null)},[s,g,d,el,e9,e8]),{pageInfo:e6}=(0,t("cAdj8").usePageInfo)(),e7=e6?.status==="archived",{mainCommentActions:e5,hoveredActionItems:e4}=eR({pageId:n,pageType:a,commentId:s,permissions:_,isReply:v,parentCommentId:w,deleteComment:I,editComment:C,resolveComment:y,restrictEdit:eb,restrictDelete:!!N,numReplies:N,mode:D,commentDateUrl:E,overflowMenuPortal:eB,supportedActions:j,isCommentsPanel:H,isHovered:X,annotationId:Q,resolveProperties:$,reopenComment:Z,replyToComment:ee,inheritedReactionsData:et,reactionsCacheUpdateFn:en,isResolvedByAnotherUser:z,commentType:el,hideBranchingStyle:ed,canAddComments:em,isDeletedByAnotherUser:ea,isSelected:e$,isParentCommentOpen:eu,isFooterComment:e_,isStandaloneComment:eg,isOffline:eI,isFabricPage:S,isArchived:e7,authorName:f});(0,o.useEffect)(()=>{R&&b&&eZ&&eZ.current&&!(0,t("9wGTI").fg)("confluence_comments_unified_navigation")&&(0,t("aHcFH").scrollCommentIntoView)({commentElement:eZ.current,isFabricPage:S})},[eZ,b,R,S]),(0,o.useEffect)(()=>{O&&(eZ.current&&eZ.current.focus({preventScroll:!0}),P&&P())},[eZ,O,P]),(0,o.useEffect)(()=>()=>{e0&&(0,t("9wGTI").fg)("confluence_frontend_unread_comments_fixes")&&(0,t("c1UWH").getUnreadCommentsIntersectionObserver)().unobserveComment(e0)},[e0]);let te=eq(l,eJ),tt=(0,o.useCallback)(()=>eH(!0),[]),tn=e=>()=>{ew("enter"===e)},ta=ea||z,to=j.length>0,tr=eC??(H&&v&&(0,t("9wGTI").fg)("confluence_frontend_comments_panel_v2")),ti=J&&H&&!v,ts=$?.isDangling&&(0,t("9wGTI").fg)("confluence_frontend_content_wrapper"),tl=(0,t("6mKj3").expValEquals)("confluence_comments_tuneup","isEnabled",!0)?!1===S:!S;return e(o).createElement(eN,{ref:eZ,"data-comment-id":s,"data-testid":s,isFocused:b,isRemoving:h,mode:D,isCommentsPanel:H,role:"article",tabIndex:-1,onMouseEnter:tn("enter"),onMouseLeave:tn("leave"),isFabricPage:S,className:(0,t("gMc0m").default)(["_kqswh2mm"])},e(o).createElement("div",{ref:(0,t("9wGTI").fg)("confluence_frontend_unread_comments_fixes")?e3:U,"data-comment-id":s},"view"!==D&&e(o).createElement(eV,null,e(o).createElement("div",{"data-testid":"overflow-container",ref:e=>{!eB&&e&&eX(e)}})),e(o).createElement("div",{style:ed?{}:{"--replyBranchHeight":`${e1+53*!!ec}px`},className:(0,t("gMc0m").default)([v&&H&&!ed&&(0,t("9wGTI").fg)("confluence_frontend_comments_panel_v2")&&"_kqswh2mm _1n1j11qs _1kt9b3bt _1cs8stnw _qnec2bgk _1auk7vkz _kfgt1q5s _19wo1ul9 _syaypxbi"])},e(o).createElement(t("1Sjzs").WithCurvedBranchingStyle,{showDefaultStyles:tr,customStyles:{...H?{height:(0,t("9wGTI").fg)("confluence_frontend_content_wrapper")?"28px":"20px"}:{},...e_?{height:"25px"}:{},...eE?{left:"-25px"}:{}}},e(o).createElement(t("6f0Oj").default,{xcss:e_||H&&v&&(0,t("9wGTI").fg)("confluence_frontend_content_wrapper")?ej:void 0},e(o).createElement(t("dcJ7R").default,{spread:"space-between"},e(o).createElement(Y.CommentAuthor,{commentMode:"view",userId:g,date:c,createdAtNonLocalized:m,versionByDisplayName:p,versionDate:u,displayName:f,avatarUrl:i,commentDateUrl:E,commentId:x?s:null,permissionType:F,isInactiveComment:!!("view-all"===D&&!A),showCopyLink:eT,resolveProperties:$,size:(0,t("6mKj3").expValEquals)("confluence_comments_tuneup","isEnabled",!0)?"small":"medium",isCommentsPanel:H,isGeneralComments:el===t("8i27m").CommentType.GENERAL,isReply:v,isEdited:T,isFooterComment:e_,isStandaloneComment:eg}),(0,t("9wGTI").fg)("confluence_frontend_unread_comments_fixes")?e(o).createElement("div",{"data-testid":`unread-comment-indicator-${s}`,style:{visibility:X?"hidden":"visible"},"aria-hidden":X||!q,className:(0,t("gMc0m").default)(["_ca0q1b66",H&&(0,t("9wGTI").fg)("confluence_frontend_comments_panel_v2")&&"_kqswh2mm _154iv77o"])},e(o).createElement(t("6f0Oj").default,{xcss:[eP,q?eF:eL]})):q&&!X&&e(o).createElement("div",{"data-testid":`unread-comment-indicator-${s}`,className:(0,t("gMc0m").default)(["_ca0q1b66",H&&(0,t("9wGTI").fg)("confluence_frontend_comments_panel_v2")&&"_kqswh2mm _154iv77o"])},e(o).createElement(t("6f0Oj").default,{xcss:eO})))))),to&&(0,t("6mKj3").expVal)("confluence_frontend_comments_a11y_kb_exp","isEnabled",!1)&&e4,e(o).createElement("div",{className:(0,t("gMc0m").default)([H&&(0,t("9wGTI").fg)("confluence_frontend_comments_panel_v2")&&"_19pkutpp _18u0pxbi _19bv1ejb _u5f31b66",H&&v&&(0,t("9wGTI").fg)("confluence_frontend_comments_panel_v2")&&"_18u0ze3t _19bvze3t",H&&!v&&!ed&&(0!==N||em)&&(0,t("9wGTI").fg)("confluence_frontend_comments_panel_v2")&&"_1kl711qs _n3tdu2gc",e_&&v&&"_19pku2gc",e_&&v&&ey&&"_18u0u2gc",eg&&v&&"_19pku2gc",H&&v&&(0,t("9wGTI").fg)("confluence_frontend_content_wrapper")&&"_19pku2gc"])},ti&&e(o).createElement(e(o).Fragment,null,$?.resolved&&!(0,t("9wGTI").fg)("confluence_frontend_comments_panel_v2")&&J&&e(o).createElement(t("dcJ7R").default,{space:"space.150",alignBlock:"center",xcss:[z&&eA],testId:"highlight-text"},e(o).createElement(t("6f0Oj").default,{xcss:eG},e(o).createElement(W,null)),e(o).createElement(t("5dK2X").default,{color:"color.text.subtle",size:"medium",maxLines:1},J)),"database"!==eQ&&(0,t("9wGTI").fg)("confluence_frontend_comments_panel_v2")&&e(o).createElement(t("dcJ7R").default,{space:"space.150",alignBlock:"center",xcss:[z&&!(0,t("9wGTI").fg)("confluence_frontend_content_wrapper")&&eA],testId:"highlight-text"},e(o).createElement(t("6f0Oj").default,{"data-testId":"annotated-section-for-inlineComment",xcss:[ts&&(0,t("9wGTI").fg)("confluence_frontend_new_dangling_comments_ux")?eD:ex,!z&&ez&&!ei&&!ts&&ek,!z&&ei&&!ts&&eM],onMouseEnter:()=>{!(0,t("9wGTI").fg)("confluence_frontend_comments_panel_v2")&&Q&&(eY===t("cD1qu").PageMode.EDIT||eY===t("cD1qu").PageMode.LIVE?eW.emit("sethoveredannotation",Q):eW.emit(t("21K7m").AnnotationUpdateEvent.SET_ANNOTATION_HOVERED,{annotationId:Q}),eK(!0))},onMouseLeave:()=>{!(0,t("9wGTI").fg)("confluence_frontend_comments_panel_v2")&&Q&&(eY===t("cD1qu").PageMode.EDIT||eY===t("cD1qu").PageMode.LIVE?eW.emit("removehoveredannotation",Q):eW.emit(t("21K7m").AnnotationUpdateEvent.REMOVE_ANNOTATION_HOVERED,{annotationId:Q}),eK(!1))},onMouseDown:()=>{Q&&es&&es(!0)},onMouseUp:()=>{if(Q&&er){if(!(0,t("9wGTI").fg)("confluence_comments_unified_navigation")){er(Q);let e=document.getElementById(Q);e&&eu&&(eY===t("cD1qu").PageMode.EDIT||eY===t("cD1qu").PageMode.LIVE?((0,t("i49vP").scrollToElementInEditor)({targetElement:e,viewingRoomOffset:-300}),(0,t("i49vP").checkElementExpandInEditor)(e),eW.emit("setselectedannotation",Q)):(eW.emit(t("21K7m").AnnotationUpdateEvent.SET_ANNOTATION_FOCUS,{annotationId:Q}),(0,t("aHcFH").scrollCommentIntoView)({commentElement:e,isFabricPage:!0,useInstantScroll:!1,isAbove:!1,commentThreadAnnotationId:Q,isCommentsPanel:H})))}es&&es(!1)}}},ts?e(o).createElement(K,{annotatedText:J}):J&&e(o).createElement(t("5dK2X").default,{size:"small",maxLines:3},e(o).createElement("span",{style:{background:ei?"var(--ds-background-accent-yellow-subtle-hovered, #DDB30E)":e$?"var(--ds-background-accent-yellow-subtle, #EED12B)":ez||ep&&(0,t("9wGTI").fg)("confluence_frontend_comments_panel_v2")?"var(--ds-background-accent-yellow-subtlest-hovered, #F5E989)":"inherit",borderBottom:ei||e$||ez||ep&&(0,t("9wGTI").fg)("confluence_frontend_comments_panel_v2")?"2px solid var(--ds-icon-accent-yellow, #B38600)":""}},J))))),te&&e(o).createElement(e(o).Fragment,null,e(o).createElement("div",{className:(0,t("gMc0m").default)([H&&ta&&!(0,t("9wGTI").fg)("confluence_frontend_content_wrapper")&&"_tzy41ssb"])},e(o).createElement(r.CommentRenderer,{commentId:s,adf:te,onContentFallback:tt,isTruncatedContent:"view-all"===D&&!A,onRendered:k,onComplete:G,maxHeight:L,fadeOutHeight:V,isInlineComment:!0,isCommentsPanel:H,isEdited:T,versionByDisplayName:p,versionDate:u,commentType:el})),ea&&e(o).createElement(t("6f0Oj").default,{xcss:eS},e(o).createElement(t("5dK2X").default,{weight:"bold"},ev(t("9CnRS").i18n.deletedCommentActionLabel))))),to&&S&&(0,t("9wGTI").fg)("confluence_frontend_content_wrapper")&&(0,t("6mKj3").expVal)("confluence_frontend_comments_a11y_kb_exp","isEnabled",!1)&&e5,to&&(tl||!((0,t("9wGTI").fg)("confluence_frontend_content_wrapper")&&(0,t("6mKj3").expVal)("confluence_frontend_comments_a11y_kb_exp","isEnabled",!1)))&&e(o).createElement(B,{pageId:n,pageType:a,commentId:s,permissions:_,isReply:v,parentCommentId:w,deleteComment:I,editComment:C,resolveComment:y,restrictEdit:eb,restrictDelete:!!N,numReplies:N,isCommentActive:A,mode:D,commentDateUrl:E,onClose:M,overflowMenuPortal:eB,supportedActions:j,isCommentsPanel:H,isHovered:X,annotationId:Q,resolveProperties:$,reopenComment:Z,replyToComment:ee,isUnread:q,inheritedReactionsData:et,reactionsCacheUpdateFn:en,isResolvedByAnotherUser:z,commentType:el,hideBranchingStyle:ed,canAddComments:em,isDeletedByAnotherUser:ea,isSelected:e$,isParentCommentOpen:eu,isFooterComment:e_,isStandaloneComment:eg,isOffline:eI,isFabricPage:S,isArchived:e7,authorName:f})))}}),n("diR4K",function(e,n){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=void 0;var a=r(t("42omo")),o=r(t("aSNrY"));function r(e){return e&&e.__esModule?e:{default:e}}let i=e=>a.default.createElement(o.default,Object.assign({name:"ArrowCurvedUpLeftIcon",dangerouslySetGlyph:'<path fill="currentcolor" d="M13.5 10a3 3 0 0 0-3-3H3.56l3.22 3.22-1.06 1.06-4.5-4.5a.75.75 0 0 1 0-1.06l4.5-4.5 1.06 1.06L3.56 5.5h6.94A4.5 4.5 0 0 1 15 10v5h-1.5z"/>'},e));i.displayName="ArrowCurvedUpLeftIcon",e.exports.default=i});
//# sourceMappingURL=FullPageEditorComponent.d994b6d0.js.map
