function e(e){return e&&e.__esModule?e.default:e}var t=globalThis.parcelRequired477,a=t.register;a("32xcy",function(a,n){var r=t("42omo"),c=t("56QzY"),s=t("b3j2Y"),o=t("882Qs"),l=t("amtnj");let i=(0,t("cgtv4").defineMessages)({searchLabel:{id:"space-views.content-tree-search.placeholder",defaultMessage:"Search by title"},clearSearch:{id:"space-views.content-tree-search.clear-search",defaultMessage:"Clear search"},searchInputDescription:{id:"space-views.content-tree-search.input-description",defaultMessage:"Results will update as you type."},searchResultsCount:{id:"space-views.content-tree-search.results-count",defaultMessage:"{count} {count, plural, one {result} other {results}} found"},disabledSearchTooltip:{id:"space-views.content-tree-search.disabled-label",defaultMessage:"Search is disabled when editing multiple items"}}),u=(0,r.forwardRef)(({as:a="div",style:n,...c},s)=>{let{isNav4Enabled:o,...l}=c;return e(r).createElement(a,{...l,style:n,ref:s,className:(0,t("gMc0m").default)(["_19pku2gc _otyru2gc _1f4s12b0 _1thze4h9",c.isNav4Enabled?"_18u0r5cr":"_18u0u2gc",c.isNav4Enabled?"_n6341l7x":"_n6341wug",c.className])})}),d=(0,r.forwardRef)(({as:a="button",style:n,...c},s)=>e(r).createElement(a,{...c,style:n,ref:s,className:(0,t("gMc0m").default)(["_19itglyw _bfhk1j28 _2hwxt94y _4t3i1ou6 _1bsb1ou6 _u5f3rdoj _1e0c1txw _4cvr1h6o _1bah1h6o _80omtlke",c.className])})),p=(0,r.forwardRef)(function({children:a,...n},c){return e(r).createElement(t("afneb").default,{...n,ref:c,className:(0,t("gMc0m").default)(["_11q71aqn _2rkofajl _11c81o8v _ca0qyh40 _u5f3i2wt _n3tdyh40 _19bvi2wt _syaz15cr _p12f13lo"])},a)}),f=({loading:a,children:n})=>e(r).createElement("div",{"data-vc":"content-tree-search-overlay",className:(0,t("gMc0m").default)(["_1bsb1osq _4t3i1osq",a&&"_tzy4105o _lcxvglyw _80om13gf"])},n),m=(0,t("jmjWc").LoadableAfterPaint)({__loadable_id__:"ceKkd",name:"SpaceViewsMenuLoader",loader:async()=>(await t("4Uzty")).SpaceViewsMenu});a.exports.ContentTreeSearch=({children:a,contentTreeSize:n,shouldRenderAfterIcon:h,selection:E,setSelection:b,isLicensed:g,isSpaceAdminOrSuperAdmin:_,...S})=>{let y=(0,t("luv00").useSSRPlaceholderReplaceIdProp)(),T=(0,t("8C5kA").default)(),[C]=(0,t("ep3mz").usePageSpaceKey)(),[v]=(0,t("ep3mz").usePageContentId)(),{createAnalyticsEvent:R}=(0,t("inPa6").useAnalyticsEvents)(),I=(0,t("gz8ZY").useIsNav4Enabled)(),A=(0,r.useRef)(null),{edition:M}=(0,t("bQm3c").useSessionData)(),[D,w]=(0,r.useState)(""),N=(0,t("ddhUv").useDebounce)(D,200),{searchResult:L,loading:j,error:x}=(0,t("5oz05").useContentTreeSearch)(N,"sideNavigation"),O=(0,t("6MlZq").useIsCreationDropdownEnabled)(),{disableMultiSelect:k,exitMultiSelect:U}=(0,t("bwL2u").useContentTreeSelectionActions)(),[P]=(0,t("2vuKf").useIsMultiSelectActive)(),F=(0,r.useCallback)(e=>{let t=e.currentTarget.value||"";t.length>0?k():U(),w(t)},[k,U]),z=(0,r.useCallback)(()=>{w(""),U()},[U]),q=(0,r.useCallback)((e,t)=>{R({type:"sendUIEvent",data:{action:"clicked",actionSubject:"pageTree",source:"pageTree",objectId:e,attributes:{spaceView:"contentTreeSearch",navdexPointType:c.TOUCH,searchResultCount:L?.length,searchResultIndex:t,contentTreeSize:n}}}).fire()},[R,L,n]),K=(0,r.useCallback)(()=>{R({type:"sendUIEvent",data:{action:"focused",actionSubject:"contentTreeSearch",source:"sideNavigation",attributes:{navdexPointType:c.START_TOUCH,contentTreeSize:n}}}).fire()},[R,n]);return e(r).createElement("div",{"data-vc":"content-tree-search",...y},e(r).createElement(u,{isNav4Enabled:I,id:"contentTreeSearch"},e(r).createElement(t("1s5hv").default,{columnGap:"space.100"},e(r).createElement(t("3gadb").default,{content:P?T.formatMessage(i.disabledSearchTooltip):"",position:"bottom",component:p},a=>e(r).createElement(t("4noo5").default,{...a,ref:(0,t("4rwCt").mergeRefs)([a.ref,A]),"aria-label":T.formatMessage(i.searchLabel),"aria-describedby":"contentTreeSearchInfo",placeholder:T.formatMessage(i.searchLabel),onChange:F,onFocus:K,value:D,elemBeforeInput:I?e(r).createElement(t("gdv5Z").default,{paddingInlineStart:"space.100"},e(r).createElement(e(t("jluld")),{label:"",color:"var(--ds-icon-accent-gray, #7D818A)"})):e(r).createElement("div",{className:(0,t("gMc0m").default)(["_w8l5gktf _1752gktf _t7blv77o _gncu1b66 _i2i31l7b"])},e(r).createElement(e(t("jluld")),{spacing:"spacious",label:"",color:"var(--ds-icon-accent-gray, #7D818A)"})),elemAfterInput:D?e(r).createElement(d,{onClick:z},e(r).createElement(e(t("7yDmn")),{label:T.formatMessage(i.clearSearch),color:"var(--ds-icon-subtle, #505258)"})):null,isCompact:!0,isDisabled:P})),e(r).createElement(t("6F6hl").default,{id:"contentTreeSearchInfo"},T.formatMessage(i.searchInputDescription)),I&&"PREMIUM"===M&&g&&_&&(0,t("6mKj3").expVal)("confluence_bulk_actions_in_content_tree","isEnabled",!1)&&e(r).createElement(m,{selection:E,setSelection:b,isWhiteboardBetaEnabled:O,edition:M,isSpaceAdminOrSuperAdmin:_}))),e(r).createElement(f,{loading:j},e(r).createElement("div",{"aria-live":"assertive","aria-atomic":"true"},x?e(r).createElement(s.ErrorDisplay,{error:x},e(r).createElement(o.ContentTreeSearchErrorLoader,null)):L&&0===L.length?e(r).createElement(o.ContentTreeSearchEmptyLoader,null):null),x?null:L?L.length>0?e(r).createElement(e(r).Fragment,null,e(r).createElement(t("6F6hl").default,null,e(r).createElement(t("gtD4K").default,{...i.searchResultsCount,values:{count:L.length}})),e(r).createElement(l.SpaceViewsList,{pagesList:L,spaceKey:C,contentId:v,onItemClick:q,renderTitle:({title:e})=>(0,t("6p02T").enrichExcerpt)(e),shouldRenderAfterIcon:h,...S})):null:a))}}),a("4rwCt",function(e,a){e.exports.mergeRefs=function(e){return(0,t("JlyMu").createCallbackRef)(a=>e.forEach(e=>(0,t("51c7W").assignRef)(e,a)))}}),a("JlyMu",function(e,t){e.exports.createCallbackRef=function(e){let t=null;return{get current(){return t},set current(value){let a=t;a!==value&&(t=value,e(value,a))}}}}),a("ddhUv",function(e,a){var n=t("42omo");e.exports.useDebounce=(e,t)=>{let[a,r]=(0,n.useState)(e);return(0,n.useEffect)(()=>{if(e!==a){let a=setTimeout(()=>{r(e)},t);return()=>clearTimeout(a)}},[e,a,t]),a}}),a("6MlZq",function(e,t){e.exports.useIsCreationDropdownEnabled=()=>!0}),a("5oz05",function(e,a){var n=t("42omo"),r=t("56QzY");let c=e=>{let t=e?.search?.search?.edges?.map(e=>e.node)||void 0;return t?.map(({entityId:e,title:t,type:a,confluenceEntity:n})=>({id:e,title:t,displayEmoji:n?.metadata?.titleEmojiPublished?.value,type:a,subType:n?.subtype?.toLowerCase()??"",hasRestrictions:!1,hasInheritedRestrictions:!1}))};e.exports.useContentTreeSearch=(e,a,s)=>{let[o]=(0,t("ep3mz").usePageSpaceKey)(),l=s??o,{cloudId:i}=(0,t("bQm3c").useSessionData)(),{createAnalyticsEvent:u}=(0,t("inPa6").useAnalyticsEvents)(),d=(0,t("7QM6o").useSpaceId)(l),{data:p,loading:f,error:m}=(0,t("jMyy4").useQueryInterop)((0,t("eSUdr").default)`query useContentTreeSearchContentTreeSearchQuery($experience:String!$searchText:String!$first:Int$filters:SearchFilterInput!){search{search(experience:$experience query:$searchText first:$first filters:$filters){edges{node{id title type ...on SearchConfluencePageBlogAttachment{entityId confluenceEntity{...on ConfluencePage{id subtype metadata{titleEmojiPublished{id value}}}}}}}}}}`,{variables:{searchText:e,experience:"confluence.searchInTree",first:50,filters:{entities:["ati:cloud:confluence:page","ati:cloud:confluence:whiteboard","ati:cloud:confluence:database","ati:cloud:confluence:embed"],locations:["ari:cloud:confluence::site/".concat(i)],confluenceFilters:{spacesFilter:l?[l]:void 0,contentStatuses:[t("YlCKe").SearchConfluenceDocumentStatus.CURRENT],titleMatchOnly:!0}}},client:(0,t("gKr8t").getAGGClient)(),skip:0===e.length}),h=(0,n.useMemo)(()=>c(p),[p]);return(0,n.useEffect)(()=>{h&&u({type:"sendTrackEvent",data:{action:"searched",actionSubject:"contentTree",source:a,containerId:d,containerType:"space",attributes:{searchResultCount:h.length,navdexPointType:r.TOUCH}}}).fire()},[u,h,d,a]),{searchResult:h,loading:f,error:m}}}),a("YlCKe",function(e,t){(a={}).AND="AND",a.OR="OR";var a,n,r,c,s,o,l,i,u,d,p=((n={}).CURRENT="CURRENT",n.ARCHIVED="ARCHIVED",n.DRAFT="DRAFT",n);(r={}).LASTMODIFIED="LASTMODIFIED",r.CREATED="CREATED",(c={}).ARCHIVED="ARCHIVED",c.CURRENT="CURRENT",(s={}).OPEN="OPEN",s.DONE="DONE",(o={}).FULL_THREAD="FULL_THREAD",o.ALL_MATCHING_MESSAGES="ALL_MATCHING_MESSAGES",o.DEFAULT="DEFAULT",(l={}).MENTIONS="MENTIONS",l.CONTRIBUTOR="CONTRIBUTOR",l.PRESENCE="PRESENCE",(i={}).software="software",i.business="business",i.service_desk="service_desk",i.product_discovery="product_discovery",(u={}).page="page",u.blogpost="blogpost",u.database="database",u.whiteboard="whiteboard",u.embed="embed",u.folder="folder",u.space="space",u.attachment="attachment",u.comment="comment",u.board="board",u.dashboard="dashboard",u.filter="filter",u.issue="issue",u.plan="plan",u.project="project",u.goal="goal",u.project_update="project_update",u.goal_update="goal_update",u.tag="tag",u.focus_area="focus_area",u.focus_area_status_update="focus_area_status_update",u.ask="ask",u.question="question",u.learning="learning",u.document="document",u.repository="repository",u.component="component",u.presentation="presentation",u.spreadsheet="spreadsheet",u.message="message",u.object_schema="object_schema",u.object_type="object_type",u.unrecognised="unrecognised",(d={}).LASTMODIFIED="LASTMODIFIED",d.CREATED="CREATED",e.exports.SearchConfluenceDocumentStatus=p}),a("882Qs",function(e,a){let n=(0,t("jmjWc").LoadableLazy)({__loadable_id__:"BwMOJ",name:"ContentTreeSearchEmptyLoader",loader:async()=>(await t("aMOfG")).ContentTreeSearchEmpty}),r=(0,t("jmjWc").LoadableLazy)({__loadable_id__:"KEbqE",name:"ContentTreeSearchErrorLoader",loader:async()=>(await t("aMOfG")).ContentTreeSearchError});e.exports.ContentTreeSearchEmptyLoader=n,e.exports.ContentTreeSearchErrorLoader=r}),a("aMOfG",function(e,a){e.exports=t("4mJKd")(5)("6FaFk").then(()=>t("wyyi4"))}),a("4Uzty",function(e,a){e.exports=t("4mJKd")(5)("fC3D2").then(()=>t("a0Cao"))});
//# sourceMappingURL=ContentTreeSearch.e20e316f.js.map
