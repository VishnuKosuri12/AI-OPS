function e(e,n,t,a){Object.defineProperty(e,n,{get:t,set:a,enumerable:!0,configurable:!0})}function n(e){return e&&e.__esModule?e.default:e}var t=globalThis,a={},r={},i=t.parcelRequired477;null==i&&((i=function(e){var n=a[e];if(void 0!==n)return n.exports;var t=r[e];if(void 0!==t){delete r[e];var i={id:e,exports:{}};return a[e]=i,t.call(i.exports,i,i.exports),i.exports}var d=Error("Cannot find module '"+e+"'");throw d.code="MODULE_NOT_FOUND",d}).register=function(e,n){r[e]=n},t.parcelRequired477=i);var d=i.register;t.lb||(t.lb=new Set,t.bq=[],t.rlb=e=>{t.lb.add(e),t.pq()},t.rwr=(e,n,a)=>{t.bq.push({b:e,r:n,d:a}),t.pq()},t.pq=()=>{var e=t.bq.find(e=>e.d.every(e=>t.lb.has(e)));e&&(t.bq=t.bq.filter(n=>n.b!==e.b),e.r(),t.pq())}),d("02nRr",function(n,t){e(n.exports,"register",()=>a,e=>a=e),e(n.exports,"resolve",()=>r,e=>r=e);var a,r,i=new Map;a=function(e,n){for(var t=0;t<n.length-1;t+=2)i.set(n[t],{baseUrl:e,path:n[t+1]})},r=function(e){var n=i.get(e);if(null==n)throw Error("Could not resolve bundle with id "+e);return new URL(n.path,n.baseUrl).toString()}}),d("cHKtk",function(e,t){var a=i("42omo"),r=i("4PPzL"),d=i("TCbX7");let s={pageInsights:{requestedEdition:"standard",requestedFeature:"pageInsights"},archiveUpsellDialog:{requestedEdition:"standard",requestedFeature:"archive"},generalAccessLevelSelector:{requestedEdition:"standard",requestedFeature:"pagePermissions"},shareAndRestrictDialogUpsell:{requestedEdition:"standard",requestedFeature:"pagePermissions"},quickSummaryUpsellScreen:{requestedEdition:"premium",requestedFeature:"rovo"},teamCalendarUpsellScreen:{requestedEdition:"premium",requestedFeature:"calendars"},"whiteboardCreationPaywall-upfrontDialog":{requestedEdition:"premium",requestedFeature:"whiteboards"}};e.exports.ELIGIBLE_TOUCHPOINTS=s,e.exports.useEnableEndUserRequestUpgrade=e=>{let{cloudId:n,edition:t,userId:r}=(0,i("bQm3c").useSessionData)(),{isSiteAdmin:d}=(0,a.useContext)(i("1ytiN").SPAViewContext),{createAnalyticsEvent:l}=(0,i("inPa6").useAnalyticsEvents)(),o=s[e]?.requestedEdition??"standard",{loading:u,data:c}=(0,i("jMyy4").useQueryInterop)(i("hG9ZM").default,{variables:{cloudId:n,offeringName:o},fetchPolicy:"cache-first",skip:!(0,i("9wGTI").fg)("connie_end_user_request_kill_switch")||d||t!==i("d9tcB").ConfluenceEdition.FREE||!(e in s),client:(0,i("gKr8t").getAGGClient)()}),p=(0,a.useMemo)(()=>{let e=c?.tenantContexts?.[0]?.entitlementInfo?.entitlement,n=e?.relatesFromEntitlements?.find(e=>e?.relationshipType==="COLLECTION")?.entitlementId,a=e?.experienceCapabilities?.changeOfferingV2?.isAvailableToUser,d=e?.experienceCapabilities?.changeOfferingV2?.experienceUrl,s=!!e?.transactionAccount?.isBillToPresent,l=c?.tenantContexts?.[0]?.entitlementInfo,o=l?.entitlementId,p=e?.transactionAccount?.key;return!!(!u&&!n&&t===i("d9tcB").ConfluenceEdition.FREE&&s&&!(a&&d)&&r&&d&&p&&o)},[c,u,t,r]);return(0,a.useEffect)(()=>{p&&l({type:"sendTrackEvent",data:{action:"exposed",actionSubject:"feature",source:"useEnableEndUserRequestUpgrade",attributes:{cohort:(0,i("6mKj3").expVal)("connie_end_user_request_exp","cohort","not-enrolled"),flagKey:"connie_end_user_request_exp",touchpoint:e}}}).fire()},[p,l,e]),{showRequestUpgradeButton:p&&(0,i("9wGTI").fg)("connie_end_user_request_kill_switch")&&(0,i("6mKj3").expValEquals)("connie_end_user_request_exp","cohort","variation"),showRequestUpgradeButtonAATest:p&&(0,i("9wGTI").fg)("connie_end_user_request_kill_switch")&&"not-enrolled"!==(0,i("6mKj3").expVal)("connie_end_user_request_exp_aa","cohort","not-enrolled"),loading:u}},e.exports.EndUserRequestUpgradeButton=({source:e})=>{let[t,s]=(0,a.useState)(!1),[l,o]=(0,a.useState)(!1),{createAnalyticsEvent:u}=(0,i("inPa6").useAnalyticsEvents)();return(0,a.useEffect)(()=>{u({type:"sendUIEvent",data:{action:"viewed",actionSubject:"button",actionSubjectId:"endUserRequestUpgradeButton",source:e}}).fire()},[u,e]),n(a).createElement(r.ErrorBoundary,{attribution:"growth-transmuters"},n(a).createElement(i("ccHMk").default,{onClick:()=>{o(!0),s(!0),u({type:"sendUIEvent",data:{action:"clicked",actionSubject:"button",actionSubjectId:"endUserRequestUpgradeButton",source:e}}).fire()},appearance:"primary",isLoading:l},n(a).createElement(i("gtD4K").default,{id:"experiment-confluence-enable-end-user-request.request-upgrade-button.label",defaultMessage:"Request to try"})),n(a).createElement(i("6xdDU").default,null,t&&n(a).createElement(d.EndUserRequestUpgradeModalEntrypoint,{source:e,handleCloseModal:()=>{s(!1)},setIsLoadingModal:o})))}}),d("hG9ZM",function(e,n){var t,a,r,i,d,s,l,o,u,c,p,f;let m={fragment:{argumentDefinitions:t=[{defaultValue:null,kind:"LocalArgument",name:"cloudId"},{defaultValue:null,kind:"LocalArgument",name:"offeringName"}],kind:"Fragment",name:"useEnableEndUserRequestUpgradeQuery",selections:[{args:a=[{items:[{kind:"Variable",name:"cloudIds.0",variableName:"cloudId"}],kind:"ListValue",name:"cloudIds"}],concreteType:"TenantContext",kind:"LinkedField",name:"tenantContexts",plural:!0,selections:[{args:r=[{kind:"Literal",name:"hamsProductKey",value:"confluence.ondemand"}],kind:"LinkedField",name:"entitlementInfo",plural:!1,selections:[i={kind:"ScalarField",name:"entitlementId"},{kind:"LinkedField",name:"entitlement",plural:!1,selections:[d={kind:"ScalarField",name:"id"},s={kind:"ScalarField",name:"__typename"},{kind:"LinkedField",name:"experienceCapabilities",plural:!1,selections:[{args:l=[{kind:"Variable",name:"offeringName",variableName:"offeringName"}],kind:"LinkedField",name:"changeOfferingV2",plural:!1,selections:[o={kind:"ScalarField",name:"isAvailableToUser"},u={kind:"ScalarField",name:"experienceUrl"}]}]},{kind:"LinkedField",name:"transactionAccount",plural:!1,selections:[c={kind:"ScalarField",name:"key"},p={kind:"ScalarField",name:"isBillToPresent"}]},{kind:"LinkedField",name:"relatesFromEntitlements",plural:!0,selections:[i,f={kind:"ScalarField",name:"relationshipType"}]}]}],storageKey:'entitlementInfo(hamsProductKey:"confluence.ondemand")'}]}],type:"Query"},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"useEnableEndUserRequestUpgradeQuery",selections:[{args:a,concreteType:"TenantContext",kind:"LinkedField",name:"tenantContexts",plural:!0,selections:[{args:r,kind:"LinkedField",name:"entitlementInfo",plural:!1,selections:[s,i,{kind:"LinkedField",name:"entitlement",plural:!1,selections:[d,s,{kind:"LinkedField",name:"experienceCapabilities",plural:!1,selections:[s,{args:l,kind:"LinkedField",name:"changeOfferingV2",plural:!1,selections:[s,o,u]}]},{kind:"LinkedField",name:"transactionAccount",plural:!1,selections:[s,c,p,{kind:"InlineFragment",selections:[d],type:"Node",abstractKey:"__isNode"}]},{kind:"LinkedField",name:"relatesFromEntitlements",plural:!0,selections:[s,i,f]}]}],storageKey:'entitlementInfo(hamsProductKey:"confluence.ondemand")'}]}]},params:{cacheID:"989abf351aeb67905f94bc68fcbdc6f9",id:"af36fdb75e5ba6fe2375c3d04cb026bb8ab7a77e90b1ba2f68692d54063709a6",metadata:{},name:"useEnableEndUserRequestUpgradeQuery",operationKind:"query",text:'query useEnableEndUserRequestUpgradeQuery($cloudId:ID!,$offeringName:String!){tenantContexts(cloudIds:[$cloudId]){entitlementInfo(hamsProductKey:"confluence.ondemand"){__typename,entitlementId,entitlement{id,__typename,experienceCapabilities{__typename,changeOfferingV2(offeringName:$offeringName){__typename,isAvailableToUser,experienceUrl}},transactionAccount{__typename,key,isBillToPresent,...on Node{__isNode:__typename,id}},relatesFromEntitlements{__typename,entitlementId,relationshipType}}}}}'}};m.hash="0499128be9f3a7a4d5f8ca7826eaa363",e.exports.default=m}),d("TCbX7",function(e,n){let t=(0,i("jmjWc").LoadableAfterPaint)({__loadable_id__:"i-AMj",name:"EndUserRequestUpgradeModalEntrypoint",loader:async()=>(await i("i3CPV")).EndUserRequestUpgradeModal});e.exports.EndUserRequestUpgradeModalEntrypoint=t}),d("i3CPV",function(e,n){let t=i("4mJKd")(5);e.exports=Promise.all([t("6wr18"),t("8UKe0"),t("bjfAh"),t("kiGNy"),t("ffEVr"),t("Wowvf"),t("let0D"),t("hhss7"),t("eRrWU")]).then(()=>i("4YFRT"))}),d("4mJKd",function(e,n){e.exports=e=>n=>import(i("8tirZ").shardUrl(i("02nRr").resolve(n),e))}),d("8tirZ",function(e,n){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.applyShardToDomain=d,e.exports.domainShardingKey=void 0,e.exports.getDomainShardIndex=a,e.exports.shardUrl=function(e,n){return globalThis[t]?s(e,n):e},e.exports.shardUrlUnchecked=s;let t="__ATLASPACK_ENABLE_DOMAIN_SHARDS";function a(e,n){let t=n+1,a=e.split("").reduce((e,n)=>{let a=(e<<t)-e+n.charCodeAt(0);return a&a},0);return(a%=t)<0&&(a+=t),a}let r=/-\d+$/;function i(e){if(!r.test(e))return e;let n=e.lastIndexOf("-");return e.slice(0,n)}function d(e,n){let t=e.indexOf("."),a=0===n?"":`-${n-1}`;if(-1===t)return`${i(e)}${a}`;let r=i(e.slice(0,t));return`${r}${a}${e.slice(t)}`}function s(e,n){let t=new URL(e),r=a(function(e){let n=e.lastIndexOf("/");if(-1===n||n===e.length-1)throw Error("Expected an absolute URL with a file name, unable to apply sharding.");return e.slice(n+1)}(t.pathname),n);return t.hostname=d(t.hostname,r),t.toString()}e.exports.domainShardingKey=t}),i("02nRr").register(new URL("",import.meta.url).toString(),JSON.parse('["fD0v8","ShareButton.222c7006.js","eRrWU","EndUserRequestUpgradeModal.9b9a5cff.js","hhss7","vendors~editor_atlaskit_lg.84cc6606.js","let0D","AgentProfileCard.8bff6584.js","Wowvf","vendors~editor_atlaskit_sm.711db442.js","ffEVr","vendors~editor_icon.645c6cf6.js","kiGNy","render.a63c9358.js","bjfAh","EndUserRequestUpgradeModal.14fd8aa6.js","bGfxQ","error-visual-dark.a52399eb.png","djGcB","error-visual-light.8a0abe86.png","8kpTd","visual-dark.589bc948.png","aPOi6","visual-light.1c3bfa82.png","8UKe0","chart-trend-up.daa97715.js","6wr18","vendors~editor_icon.0f2f072e.js"]')),t.rlb("fD0v8");
//# sourceMappingURL=ShareButton.222c7006.js.map
