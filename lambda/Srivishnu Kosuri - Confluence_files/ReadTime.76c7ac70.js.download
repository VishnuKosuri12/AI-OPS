function e(e,t,n,a){Object.defineProperty(e,t,{get:n,set:a,enumerable:!0,configurable:!0})}var t=globalThis.parcelRequired477,n=t.register;n("72md5",function(e,n){let a=e=>{let t=0;for(let n=0;n<e;n++)t+=Math.max(12-n,3);return t};e.exports.calculateImageReadTime=a,e.exports.calculateEstimatedReadTime=e=>{if(e){let n=(0,t("h3vPv").extractContentFeaturesSkipExpand)(e),r=(n.wordCount/265*60+a(n.imageCount))/60;if(r>.5)return Math.round(r)}return 0},e.exports.getAdf=e=>{if("atlas_doc_format"===e?.content?.nodes?.[0]?.body?.dynamic?.representation){let t=e?.content?.nodes?.[0]?.body?.dynamic?.value;if(t)try{return JSON.parse(t)}catch{}}return null},e.exports.getContentFeatureExtractedEventObject=({contentType:e,contentId:n,adf:a,isInEditor:r})=>({type:"sendOperationalEvent",data:{source:"confluence-frontend",action:"extracted",actionSubject:"contentFeature",objectType:e,objectId:n,attributes:{...(0,t("h3vPv").extractContentFeatures)(a),isInEditor:r}}}),e.exports.getWordCount=e=>e?(0,t("h3vPv").extractContentFeaturesSkipExpand)(e).wordCount:0}),n("h3vPv",function(e,n){let a=(e,t,n)=>{if("expand"===e.type||"nestedExpand"===e.type)return n;let r=t(n,e);return e.content&&(r=e.content.reduce((e,n)=>a(n,t,e),r)),r},r=e=>{if(e){let t=e.match(/\S+/g);if(t)return t.length}return 0},o=(e,t)=>{switch(t.type){case"text":return{...e,textLength:e.textLength+(t.text?t.text.length:0),wordCount:e.wordCount+r(t.text)};case"media":return{...e,imageCount:e.imageCount+1,mediaFiles:t.attrs?.type==="file"&&t.attrs?.id?e.mediaFiles.concat(t.attrs.id):e.mediaFiles};case"inlineExtension":return{...e,inlineMacroCount:e.macroCount+1};case"extension":return{...e,macroCount:e.macroCount+1};case"table":return{...e,tableCount:e.tableCount+1};case"embedCard":let n=t.attrs?.url;if(!n.includes("loom"))break;let a=n?.split("/").pop().split("?")[0];return{...e,looms:a?e.looms.concat({id:a,url:n}):e.looms}}return e};e.exports.extractContentFeatures=e=>{let n={rawLength:JSON.stringify(e).length,textLength:0,wordCount:0,imageCount:0,inlineMacroCount:0,macroCount:0,tableCount:0,mediaFiles:[],looms:[]};return(0,t("1A9t2").reduce)(e,(e,t)=>o(e,t),n)},e.exports.extractContentFeaturesSkipExpand=e=>{let t={rawLength:JSON.stringify(e).length,textLength:0,wordCount:0,imageCount:0,inlineMacroCount:0,macroCount:0,tableCount:0,mediaFiles:[],looms:[]};return a(e,(e,t)=>o(e,t),t)}}),n("h2uld",function(e,n){var a=t("42omo");e.exports.useReadTime=(e,n)=>{let r={variables:{contentId:e},skip:n},{data:o,loading:i,error:d}=(0,t("6mKj3").expValEquals)("confluence_frontend_stop_watching_readtimequery","isEnabled",!0)?(0,t("jtuBN").useQueryNoFurtherUpdateInterop)(t("3T2Zj").ReadTimeQuery,r):(0,t("xQxzY").useQuery)(t("3T2Zj").ReadTimeQuery,{...r,fetchPolicy:"cache-only"}),{adf:u,readTime:s,wordCount:l,features:c,featuresSkipExpand:m}=(0,a.useMemo)(()=>{let n=(0,t("72md5").getAdf)(o??void 0);return!n||i||d||!e?{readTime:null,wordCount:null,features:null,featuresSkipExpand:null}:{adf:n,readTime:(0,t("72md5").calculateEstimatedReadTime)(n),wordCount:(0,t("72md5").getWordCount)(n),features:(0,t("h3vPv").extractContentFeatures)(n),featuresSkipExpand:(0,t("h3vPv").extractContentFeaturesSkipExpand)(n)}},[i,d,o,e]),p=o?.content?.nodes?.[0];return{loading:i,error:d,adf:u,contentType:p?.type,readTime:s,wordCount:l,features:c,featuresSkipExpand:m}}}),n("i1vUz",function(e,n){var a,r,o,i;let d={fragment:{argumentDefinitions:a=[{defaultValue:null,kind:"LocalArgument",name:"contentId"}],kind:"Fragment",name:"useDynamicSplitButtonLastModifiedDateQuery",selections:r=[{args:[{kind:"Variable",name:"id",variableName:"contentId"}],concreteType:"PaginatedContentListWithChild",kind:"LinkedField",name:"content",plural:!1,selections:[{concreteType:"Content",kind:"LinkedField",name:"nodes",plural:!0,selections:[{kind:"ScalarField",name:"id"},{concreteType:"ContentMetadata",kind:"LinkedField",name:"metadata",plural:!1,selections:[{kind:"ScalarField",name:"lastModifiedDate"}]}]}]}],type:"Query"},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"useDynamicSplitButtonLastModifiedDateQuery",selections:r},params:{cacheID:"53828d84c0acb319d0f0762fbd51cfb9",id:"3782297928019afae38deeb994658b9d2bfb75b3dd67df3051fac91d5ebf0e37",metadata:{},name:"useDynamicSplitButtonLastModifiedDateQuery",operationKind:"query",text:"query useDynamicSplitButtonLastModifiedDateQuery($contentId:ID!){content(id:$contentId){nodes{id,metadata{lastModifiedDate}}}}"}};d.hash="cb78a829ad38a06c36dc9615c22411b7";let u={fragment:{argumentDefinitions:o=[{defaultValue:null,kind:"LocalArgument",name:"contentId"}],kind:"Fragment",name:"useDynamicSplitButtonContentHistoryQuery",selections:i=[{args:[{kind:"Variable",name:"contentId",variableName:"contentId"},{kind:"Literal",name:"first",value:1}],concreteType:"PaginatedContentHistoryList",kind:"LinkedField",name:"contentHistory",plural:!1,selections:[{concreteType:"ContentHistory",kind:"LinkedField",name:"nodes",plural:!0,selections:[{concreteType:"ContributorUsers",kind:"LinkedField",name:"collaborators",plural:!1,selections:[{kind:"ScalarField",name:"userAccountIds"}]}]}]}],type:"Query"},kind:"Request",operation:{argumentDefinitions:o,kind:"Operation",name:"useDynamicSplitButtonContentHistoryQuery",selections:i},params:{cacheID:"c82cedffd514ace9062cc5a7ea29b433",id:"7dd5a60846b03a6eacef04466d72dec90722d2cae751b0c9b97f555a408d7190",metadata:{},name:"useDynamicSplitButtonContentHistoryQuery",operationKind:"query",text:"query useDynamicSplitButtonContentHistoryQuery($contentId:ID!){contentHistory(contentId:$contentId,first:1){nodes{collaborators{userAccountIds}}}}"}};u.hash="428e55c833e4f9ecc04af6435214d702";let s=t("8G3G6").default;e.exports.useDynamicSplitButton=(e,n,a=!1)=>{let{isAdminHubAIEnabled:r,userId:o}=(0,t("bQm3c").useSessionData)(),i=(0,t("aSsfA").useGetPageMode)(),l=(0,t("8uM2K").useAIRovoButtonEnablement)(),{readTime:c,loading:m}=(0,t("h2uld").useReadTime)(e,!r||i===t("cD1qu").PageMode.EDIT),{data:p,loading:f,error:y}=(0,t("jMyy4").useQueryInterop)(s,{variables:{contentId:e,contentType:n},skip:!r||i===t("cD1qu").PageMode.EDIT}),{data:h,loading:g}=(0,t("jMyy4").useQueryInterop)(d,{variables:{contentId:e},skip:!r||i===t("cD1qu").PageMode.EDIT}),{data:x,loading:b}=(0,t("jMyy4").useQueryInterop)(u,{variables:{contentId:e},skip:!r||i===t("cD1qu").PageMode.EDIT||!l,fetchPolicy:"network-only"}),C=h?.content?.nodes?.[0]?.metadata?.lastModifiedDate??"",D=Date.parse((p?.catchupGetLastViewedTime?.lastViewedTimeISO??"").replace(/\[.*?\]$/,"")),I=Date.parse(C),k=(x?.contentHistory?.nodes?.[0]?.collaborators?.userAccountIds??[]).some(e=>e===o),S=Number.isNaN(D),v=S?void 0:new Date(D),w=f||g||b||m,E=!1,T=!0;return(D||S)&&I&&!y?l&&i!==t("cD1qu").PageMode.EDIT&&!w&&S&&c&&c>=5&&!k&&a&&(0,t("6mKj3").expValEquals)("rovo_awareness_experiment","cohort","test")?{showCatchupAsDefault:E,showSummarizeAsDefault:T,readTime:c,queryLoading:w}:{showCatchupAsDefault:E=i!==t("cD1qu").PageMode.EDIT&&!w&&I>D&&!k,showSummarizeAsDefault:T=!1,queryLoading:w,lastViewedDate:v}:{showCatchupAsDefault:E,queryLoading:w,queryError:y}}}),n("auLW1",function(e,n){let a=(0,t("jmjWc").LoadableLazy)({__loadable_id__:"wRZLE",name:"PageCatchupComponent",loader:async()=>(await t("cBsw7")).PageCatchupComponentWithErrorBoundary});e.exports.PageCatchupComponent=a}),n("cBsw7",function(e,n){let a=t("4mJKd")(5);e.exports=Promise.all([a("jq3Jz"),a("6wr18"),a("1Jgsw"),a("h2QhJ"),a("ffEVr"),a("7EorR"),a("St9Nk"),a("hhss7"),a("eN6nL")]).then(()=>t("4RbVT"))}),n("4mJKd",function(e,n){e.exports=e=>n=>import(t("8tirZ").shardUrl(t("02nRr").resolve(n),e))}),n("8tirZ",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.applyShardToDomain=i,e.exports.domainShardingKey=void 0,e.exports.getDomainShardIndex=a,e.exports.shardUrl=function(e,t){return globalThis[n]?d(e,t):e},e.exports.shardUrlUnchecked=d;let n="__ATLASPACK_ENABLE_DOMAIN_SHARDS";function a(e,t){let n=t+1,a=e.split("").reduce((e,t)=>{let a=(e<<n)-e+t.charCodeAt(0);return a&a},0);return(a%=n)<0&&(a+=n),a}let r=/-\d+$/;function o(e){if(!r.test(e))return e;let t=e.lastIndexOf("-");return e.slice(0,t)}function i(e,t){let n=e.indexOf("."),a=0===t?"":`-${t-1}`;if(-1===n)return`${o(e)}${a}`;let r=o(e.slice(0,n));return`${r}${a}${e.slice(n)}`}function d(e,t){let n=new URL(e),r=a(function(e){let t=e.lastIndexOf("/");if(-1===t||t===e.length-1)throw Error("Expected an absolute URL with a file name, unable to apply sharding.");return e.slice(t+1)}(n.pathname),t);return n.hostname=i(n.hostname,r),n.toString()}e.exports.domainShardingKey=n}),n("02nRr",function(t,n){e(t.exports,"register",()=>a,e=>a=e),e(t.exports,"resolve",()=>r,e=>r=e);var a,r,o=new Map;a=function(e,t){for(var n=0;n<t.length-1;n+=2)o.set(t[n],{baseUrl:e,path:t[n+1]})},r=function(e){var t=o.get(e);if(null==t)throw Error("Could not resolve bundle with id "+e);return new URL(t.path,t.baseUrl).toString()}});
//# sourceMappingURL=ReadTime.76c7ac70.js.map
