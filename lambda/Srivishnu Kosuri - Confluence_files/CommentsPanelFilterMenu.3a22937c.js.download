function e(e){return e&&e.__esModule?e.default:e}function t(e,t,n,a){Object.defineProperty(e,t,{get:n,set:a,enumerable:!0,configurable:!0})}var n=globalThis.parcelRequired477,a=n.register;a("1qiwK",function(e,t){let a=(0,n("eSUdr").default)`query MediaDownloadTokenQuery($contentId:ID$status:[String]$missingContentId:Boolean=false){content(id:$contentId status:$status)@skip(if:$missingContentId){nodes{id body{atlas_doc_format{mediaToken{token}}}}}mediaConfiguration{clientId fileStoreUrl}}`;e.exports.MediaDownloadTokenQuery=a}),a("yuV6Z",function(e,t){let n=()=>!1,a=()=>!!window.__SSR_RENDERED__,o=(e,t,n)=>`/gateway/api/emoji/${e}/${t}/path?scale=${n??"MDPI"}`,i=e=>{let{isSSR:t,hasCloudId:n,isGuestUser:a}=e;return!!(t&&n)&&!a},r=({onEmojiLoadSuccess:e,onEmojiLoadFail:t})=>{if(e||t)return{onEmojiLoadSuccess:e,onEmojiLoadFail:t}},l=e=>{let{id:t,shortName:n}=e,a=new RegExp(/:([^:]+):/g);return t||(a.test(n)?n.replaceAll(":",""):n)};e.exports.getOptimisticImageURL=o,e.exports.getEmojiSSRSupport=i,e.exports.createEmojiProviderParameters=e=>{let t=n()||a(),s=!e.isLicensed||!e.isLoggedIn,c=e?.cloudId??"",d=e?.userId??void 0,u=e?.disableUpload,p=e?.emojiSSRConfig??{},f=i({isSSR:t,hasCloudId:!!c,isGuestUser:s}),m=f?{optimisticImageApi:{getUrl:e=>o(c,l(e))},...p}:void 0,g=r({onEmojiLoadSuccess:e?.onEmojiLoadSuccess,onEmojiLoadFail:e?.onEmojiLoadFail});return{cloudId:c,userId:d,disableUpload:u,...f&&{emojiSSRConfig:m},emojiLoadCallbacks:g}}}),a("fOjen",function(e,t){var n,a,o=((n={}).APP_ACCESS="APP_ACCESS",n.PAGE_EXPORT="PAGE_EXPORT",n.PUBLIC_LINKS="PUBLIC_LINKS",n);(a={}).ARCHIVED="ARCHIVED",a.CURRENT="CURRENT",a.DRAFT="DRAFT",e.exports.DataSecurityPolicyAction=o}),a("25RVt",function(e,t){let a=(0,n("eSUdr").default)`query DSPIsActionEnabledForContentQuery($action:DataSecurityPolicyAction!$contentId:ID!$contentStatus:DataSecurityPolicyDecidableContentStatus!$contentVersion:Int!$spaceKey:String){dataSecurityPolicy{isActionEnabledForContent(action:$action contentId:$contentId contentStatus:$contentStatus contentVersion:$contentVersion spaceKey:$spaceKey){action allowed}}}`;e.exports.DSPIsActionEnabledForContentQuery=a}),a("i5WUp",function(e,t){var a=n("l998X"),o=n("42omo"),i=n("irOoi");let r=4,l={container:"_11c81o8v"},s=e=>"page"===e?"PAGE":"blogpost"===e?"BLOGPOST":null,c=e=>({product:"confluence",subproduct:"confluence",source:"confluencePage",aiFeatureName:"aiSnippet",proactiveGeneratedAI:1,userGeneratedAI:0,additionalAttributes:{contentId:e.contentId,contentType:e.contentType,from:e.from??"SMARTLINK",productAttributionOverride:"confluence"},enablePlatformEvents:!0}),d=e=>(0,a.jsx)(n("2Rith").AIEventsInstrumentationProvider,{config:c(e),children:(0,a.jsx)(u,{...e})}),u=({contentId:e,contentType:t,cloudId:c,fallbackText:d,fallbackComponent:u,userId:p,displayName:f,source:m="smartlink",maxLines:g=r,isHidden:I=!1,onLoadComplete:y,showFooter:h,showAwareness:k})=>{let[x,S]=(0,i.useQueryLoader)(n("2UyBL").default),E=(0,o.useRef)(!0),{trackAIInteractionInit:T,trackAIResultError:C,trackAIInteractionDismiss:b}=(0,n("fYQcF").useAIEventsInstrumentation)(),{start:A,success:v,failure:w}=(0,n("2Gu9D").useUFOExperience)({id:"ai-snippet-load",component:"ai-snippet",type:n("9NDUe").ExperienceTypes.Load,performanceType:n("9NDUe").ExperiencePerformanceTypes.InlineResult}),_=s(t),M=t&&c&&e&&_,P=(0,n("dh538").fg)("jira-cc-ai-snippet-gate"),L=n("c6GJD").default.getExperimentValue("cc-ai-snippet-experiment-tracking","isEnabled",!1);if((0,o.useEffect)(()=>(I||T(),()=>{E.current&&!I&&b()}),[]),(0,o.useEffect)(()=>{E.current=!x,x&&(L&&v(),y?.())},[x,y,v,L]),(0,o.useEffect)(()=>{M&&(L&&A(),S({contentId:e,contentType:_,cloudId:c,includeMe:P}))},[e,_,c,S,M,P,A,L]),!M)return u;let D=(0,a.jsx)(n("lAJUP").ErrorBoundary,{fallback:(0,a.jsx)(n("in8wv").AISnippetContent,{text:d,contentId:e,showFooter:!1,showAwareness:k,source:m,isHidden:I,maxLines:g}),onError:e=>{I||(L&&w({metadata:{errorCode:"extensions"in e?e.extensions?.statusCode||500:999,errorMessage:e.message||"Unknown error"}}),C({aiErrorCode:"extensions"in e?e.extensions?.statusCode||500:999,aiErrorMessage:e.message||"Unknown error"}))},children:(0,a.jsx)(n("gdv5Z").default,{xcss:(0,n("1Whri").cx)(l.container),children:(0,a.jsx)(o.Suspense,{fallback:(0,a.jsx)(n("au4KV").AIStreamLoading,{}),children:x?(0,a.jsx)(n("kt1Xc").AISnippetLoader,{queryRef:x,fallbackText:d,contentId:e,source:m,isHidden:I,maxLines:g,showFooter:h,showAwareness:k}):(0,a.jsx)(n("au4KV").AIStreamLoading,{})})})});return(0,a.jsx)(n("dpPtd").FlagsProvider,{children:P?D:(0,a.jsx)(n("9Rf00").AIFeedbackPropertiesProvider,{entrypointId:"55dba3ae-58fa-41e0-828b-1e30fe66c0ba",userId:p,displayName:f,children:D})})};e.exports.AISnippetWithRelayEnvironment=e=>(0,a.jsx)(n("gWF6I").RelayEnvironmentProvider,{children:(0,a.jsx)(d,{...e})})}),a("9Rf00",function(e,t){var a=n("l998X"),o=n("42omo");let i="customfield_10047",r=(0,o.createContext)(void 0);e.exports.AIFeedbackPropertiesProvider=({children:e,entrypointId:t,locale:l,feedbackContextId:s=i,feedbackContext:c={},userId:d,displayName:u})=>{let{locale:p}=(0,n("8C5kA").default)(),f=Object.entries(c).map(([e,t])=>`${e}: ${JSON.stringify(t)}`).join(" "),m=(0,o.useMemo)(()=>({entrypointId:t,feedbackContextId:s,feedbackContext:f,locale:l||p,userId:d,displayName:u}),[t,s,f,l,p,d,u]);return(0,a.jsx)(r.Provider,{value:m,children:e})},e.exports.useAIFeedbackProperties=()=>{let e=(0,o.useContext)(r);if(void 0===e)throw Error("useAIFeedbackProperties must be used within a AIFeedbackPropertiesProvider");return e}}),a("in8wv",function(e,t){var a=n("l998X"),o=n("42omo");let i=e=>e?e.replace(/={4,}/g,"===").replace(/-{4,}/g,"---"):"";e.exports.AISnippetContent=({text:e,contentId:t,showFooter:r=!0,showAwareness:l=!1,source:s,isHidden:c,maxLines:d})=>{let u=(0,o.useRef)(null),{getDwellTime:p}=(0,n("fXbFR").usePopupDwellTime)(u,250),{trackAIResultView:f}=(0,n("fYQcF").useAIEventsInstrumentation)(),m=(0,o.useRef)(e),g=n("c6GJD").default.getExperimentValue("cc-ai-snippet-fixes-1025","isEnabled",!1);return(0,o.useEffect)(()=>{let e=m.current;return()=>{let t=p();c||(r&&e&&t>=3e3?f({attributes:{dwellTime:t,source:s,wasShownAIContent:!0}}):f({attributes:{dwellTime:t,source:s,wasShownAIContent:r&&!!e},doesNotMeetMAUCriteria:!0}))}},[]),(0,a.jsxs)(n("eyWa4").default,{space:"space.100",ref:u,children:[l&&(0,a.jsx)(n("aFC6o").AIAwareness,{}),(0,a.jsx)(n("iXCQx").default,{size:"small",maxLines:d,children:g?(0,a.jsx)(n("e6pbP").default,{options:{disableParsingRawHTML:!0},children:i(e||"")}):(0,a.jsx)(n("e6pbP").default,{children:e||""})}),r&&e&&(0,a.jsxs)(n("u9agA").default,{space:"space.100",children:[(0,a.jsx)(n("iuafG").AIDisclaimer,{}),(0,a.jsx)(n("aXh2V").AIFeedbackComponent,{contentId:t})]})]})}}),a("aFC6o",function(e,t){var a=n("l998X");n("42omo");e.exports.AIAwareness=({variant:e="summary"})=>{let t={summary:n("eLAh6").i18n.rovoAwarenessMessage,define:n("eLAh6").i18n.rovoAwarenessDefineMessage},{formatMessage:o}=(0,n("8C5kA").default)(),i=t[e];return(0,a.jsx)(n("gdv5Z").default,{xcss:(0,n("1Whri").cx)("_4bfu1r31 _1hmsglyw _ajmmnqa1"),children:(0,a.jsxs)(n("u9agA").default,{alignBlock:"center",space:"space.050",children:[(0,a.jsx)(n("lAFHW").RovoIcon,{size:"xxsmall",appearance:"brand",shouldUseNewLogoDesign:!0}),(0,a.jsx)(n("iXCQx").default,{color:"color.text.subtlest",children:o(i)})]})})}}),a("eLAh6",function(e,t){let a=(0,n("cgtv4").defineMessages)({rovoAwarenessMessage:{id:"ai-awareness.rovoAwarenessMessage",defaultMessage:"Summary by Rovo"},rovoAwarenessDefineMessage:{id:"ai-awareness-define.message",defaultMessage:"Definition by Rovo"}});e.exports.i18n=a}),a("iuafG",function(e,t){var a=n("l998X");n("42omo");e.exports.AIDisclaimer=()=>{let{formatMessage:e}=(0,n("8C5kA").default)(),t=e(n("fSglY").i18n.disclaimerMessage);return(0,a.jsx)(n("gdv5Z").default,{xcss:(0,n("1Whri").cx)("_4bfu1r31 _1hmsglyw _ajmmnqa1"),children:(0,a.jsx)(n("iXCQx").default,{size:"small",color:"color.text.subtlest",children:t})})}}),a("fSglY",function(e,t){let a=(0,n("cgtv4").defineMessages)({disclaimerMessage:{id:"ai-disclaimer.disclaimerMessage",defaultMessage:"Uses AI. Verify results."}});e.exports.i18n=a}),a("aXh2V",function(t,a){var o=n("l998X"),i=n("42omo");let r=(0,n("cgtv4").defineMessages)({flagTitle:{id:"quick-summary.feedback.flag.title",defaultMessage:"Thanks!"},flagDescription:{id:"quick-summary.feedback.flag.description",defaultMessage:"We appreciate you taking the time to send this feedback."},likeTooltip:{id:"quick-summary.like.tooltip",defaultMessage:"Good response"},dislikeTooltip:{id:"quick-summary.dislike.tooltip",defaultMessage:"Bad response"},feedbackTitle:{id:"quick-summary.feedback.title",defaultMessage:"Help us improve Atlassian Intelligence"},feedbackSummaryTitle:{id:"quick-summary.feedback.summary.title",defaultMessage:"Tell us about your experience"},feedbackSummaryPlaceholder:{id:"quick-summary.feedback.summary.placeholder",defaultMessage:"What did Atlassian Intelligence do well? What could be improved?"},canContactText:{id:"quick-summary.feedback.can-contact.label",defaultMessage:"Atlassian can contact me about this feedback. See our {privacyPolicyLink}."},privacyPolicyLink:{id:"quick-summary.feedback.privacy-policy.link",defaultMessage:"privacy policy"},improveAtlassianText:{id:"quick-summary.feedback.improve-atlassian",defaultMessage:"I’d like to help improve Atlassian products by joining the {researchGroupLink}."},improveAtlassianTextAppify:{id:"quick-summary.feedback.improve-atlassian-appify",defaultMessage:"I’d like to help improve Atlassian apps by joining the {researchGroupLink}."},researchGroupLink:{id:"quick-summary.feedback.research-group.link",defaultMessage:"Atlassian Research Group"}}),l=({link:e})=>(0,n("dh538").fg)("dst-a11y__replace-anchor-with-link__confluence-ai")?(0,o.jsx)(n("2Nwuj").default,{target:"_blank",href:e,children:(0,o.jsx)(n("gtD4K").default,{...r.privacyPolicyLink})}):(0,o.jsx)("a",{target:"_blank",href:e,children:(0,o.jsx)(n("gtD4K").default,{...r.privacyPolicyLink})}),s=({link:e})=>(0,n("dh538").fg)("dst-a11y__replace-anchor-with-link__confluence-ai")?(0,o.jsx)(n("2Nwuj").default,{target:"_blank",href:e,children:(0,o.jsx)(n("gtD4K").default,{...r.researchGroupLink})}):(0,o.jsx)("a",{target:"_blank",href:e,children:(0,o.jsx)(n("gtD4K").default,{...r.researchGroupLink})}),c=()=>(0,o.jsx)(n("gtD4K").default,{...r.canContactText,values:{privacyPolicyLink:(0,o.jsx)(l,{link:"https://www.atlassian.com/legal/privacy-policy"})}}),d=()=>(0,o.jsx)(n("gtD4K").default,{...(0,n("dh538").fg)("product-terminology-refresh")?r.improveAtlassianTextAppify:r.improveAtlassianText,values:{researchGroupLink:(0,o.jsx)(s,{link:"https://www.atlassian.com/research-group"})}}),u=(0,n("ecnYn").xcss)({transform:"rotate(180deg)"}),p=(0,n("ecnYn").xcss)({height:"24px",width:"24px"});t.exports.AIFeedbackComponent=({contentId:t})=>{let{showFlag:a}=(0,n("dpPtd").useFlags)(),{formatMessage:l}=(0,n("8C5kA").default)(),[s,f]=(0,i.useState)(!1),m=(0,n("9Rf00").useAIFeedbackProperties)(),[g,I]=(0,i.useState)(""),[y,h]=(0,i.useState)(!1),[k,x]=(0,i.useState)(!1),S=`contentId: ${t} sentiment: ${g}${m.feedbackContext.length>0?` ${m.feedbackContext}`:""}`,E=()=>{a({title:l(r.flagTitle),description:l(r.flagDescription),icon:(0,o.jsx)(e(n("3sFtD")),{spacing:"spacious",color:`var(--ds-icon-success, ${n("6fnsQ").G300})`,label:"success"}),isAutoDismiss:!0})};return(0,o.jsx)(n("6f0Oj").default,{role:"none",onClick:e=>e.stopPropagation(),children:(0,o.jsxs)(n("dcJ7R").default,{alignBlock:"center",space:"space.050",children:[(0,o.jsx)(n("3gadb").default,{hideTooltipOnMouseDown:!0,content:l(r.likeTooltip),position:"top",children:(0,o.jsx)(n("6f0Oj").default,{xcss:p,children:(0,o.jsx)(n("eEA8O").default,{appearance:"subtle","aria-label":l(r.likeTooltip),spacing:"none",iconBefore:(0,o.jsx)(n("aFwxm").ThumbIcon,{isSelected:y}),onClick:()=>{f(!0),I("good")},testId:"feedback-like-button",isDisabled:y})})}),(0,o.jsx)(n("3gadb").default,{hideTooltipOnMouseDown:!0,content:l(r.dislikeTooltip),position:"top",children:(0,o.jsx)(n("6f0Oj").default,{xcss:p,children:(0,o.jsx)(n("eEA8O").default,{appearance:"subtle","aria-label":l(r.dislikeTooltip),spacing:"none",iconBefore:(0,o.jsx)(n("6f0Oj").default,{xcss:u,children:(0,o.jsx)(n("aFwxm").ThumbIcon,{isSelected:k})}),onClick:()=>{f(!0),I("bad")},testId:"feedback-dislike-button",isDisabled:k})})}),s&&(0,o.jsx)(n("biiXa").default,{locale:m.locale,onSubmit:()=>{E(),f(!1),"good"===g?(h(!0),x(!1)):(x(!0),h(!1))},onClose:()=>f(!1),atlassianAccountId:m.userId,name:m.displayName,entrypointId:m.entrypointId,summaryPlaceholder:l(r.feedbackSummaryPlaceholder),additionalFields:[{id:m.feedbackContextId,value:S}],feedbackTitle:l(r.feedbackTitle),showTypeField:!1,customTextAreaLabel:l(r.feedbackSummaryTitle),canBeContactedLabel:(0,o.jsx)(c,{}),enrolInResearchLabel:(0,o.jsx)(d,{})})]})})}}),a("aFwxm",function(t,a){var o=n("l998X");n("42omo"),t.exports.ThumbIcon=({isSelected:t})=>(0,o.jsx)(e(n("9FnLD")),{color:t?"var(--ds-icon-selected, #1868DB)":"var(--ds-icon-subtle, #505258)",label:""})}),a("kt1Xc",function(e,t){var a=n("l998X");n("42omo");var o=n("irOoi");e.exports.AISnippetLoader=({contentId:e,fallbackText:t,queryRef:i,source:r,isHidden:l,maxLines:s,showFooter:c,showAwareness:d})=>{let u=(0,o.usePreloadedQuery)(n("2UyBL").default,i),p=u?.confluence_latestKnowledgeGraphObjectV2?.objectData,f=(0,a.jsx)(n("in8wv").AISnippetContent,{text:p||t,contentId:e,showFooter:!!p&&c,showAwareness:!!p&&d,source:r,isHidden:l,maxLines:s});return(0,n("dh538").fg)("jira-cc-ai-snippet-gate")?(0,a.jsx)(n("9Rf00").AIFeedbackPropertiesProvider,{entrypointId:"55dba3ae-58fa-41e0-828b-1e30fe66c0ba",userId:u?.me?.user?.accountId,displayName:u?.me?.user?.name,children:f}):f}}),a("2UyBL",function(e,t){var n,a,o,i,r,l,s,c;let d=(s={kind:"ScalarField",name:"accountId"},c={kind:"ScalarField",name:"name"},{fragment:{argumentDefinitions:[n={defaultValue:null,kind:"LocalArgument",name:"cloudId"},a={defaultValue:null,kind:"LocalArgument",name:"contentId"},o={defaultValue:null,kind:"LocalArgument",name:"contentType"},i={defaultValue:null,kind:"LocalArgument",name:"includeMe"}],kind:"Fragment",name:"aiSnippetLoaderQuery",selections:[l={args:[{kind:"Variable",name:"cloudId",variableName:"cloudId"},{kind:"Variable",name:"contentId",variableName:"contentId"},{kind:"Variable",name:"contentType",variableName:"contentType"},{kind:"Literal",name:"objectType",value:"snippet_v2"}],concreteType:"KnowledgeGraphObjectResponseV2",kind:"LinkedField",name:"confluence_latestKnowledgeGraphObjectV2",plural:!1,selections:[r={kind:"ScalarField",name:"__typename"},{kind:"ScalarField",name:"objectData"}]},{condition:"includeMe",kind:"Condition",passingValue:!0,selections:[{concreteType:"AuthenticationContext",kind:"LinkedField",name:"me",plural:!1,selections:[{kind:"LinkedField",name:"user",plural:!1,selections:[s,c]}]}]}],type:"Query"},kind:"Request",operation:{argumentDefinitions:[a,o,n,i],kind:"Operation",name:"aiSnippetLoaderQuery",selections:[l,{condition:"includeMe",kind:"Condition",passingValue:!0,selections:[{concreteType:"AuthenticationContext",kind:"LinkedField",name:"me",plural:!1,selections:[{kind:"LinkedField",name:"user",plural:!1,selections:[r,s,c,{kind:"ScalarField",name:"id"}]}]}]}]},params:{id:"8b58eeaebb38ad38241e0152019eb289a93c640b57ebbf0774ddd0706e3cda40",metadata:{},name:"aiSnippetLoaderQuery",operationKind:"query",text:null}});d.hash="9d618230ccff7c19cd4e4fee2e2c0a2c",e.exports.default=d}),a("84PmI",function(e,t){e.exports.useIsEligibleRovoAwareness=()=>{let{isLoggedIn:e,isRovoLLMEnabled:t,accessStatus:a}=(0,n("bQm3c").useSessionData)(),{locale:o}=(0,n("8C5kA").default)(),i=t&&e&&a!==n("d9tcB").AccessStatus.EXTERNAL_COLLABORATOR_ACCESS,r=o.toLowerCase().startsWith("en");return i&&r&&(0,n("9wGTI").fg)("rovo_awareness_enabled")}}),a("4IoVL",function(e,t){let a,o={clientId:"",fileStoreUrl:""},i=(0,n("kzNtP").cacheWithExp)(async({contentId:e,isExternalShare:t,shareToken:a})=>{if(t&&a&&(0,n("6mKj3").expValEquals)("add_anonid_in_media_token","cohort","test")){let e=await (0,n("kEk2z").fetchExternalContentMediaSessionToken)(a),t=e?.data;return{token:t?.externalContentMediaSession?.accessTokens?.readOnlyToken?.value||"",config:t?.externalContentMediaSession?.configuration||o}}let i=await (t?(0,n("kEk2z").fetchExternalShareMediaToken):(0,n("kEk2z").fetchMediaToken))(e),r=i?.data,l=r?.singleContent,s=t?l:r?.content?.nodes?.[0];return{token:s?.body?.atlas_doc_format?.mediaToken?.token||"",config:r?.mediaConfiguration||o}},e=>e.token),r=e=>async()=>{let t=await e();return{token:t?.token||"",clientId:t?.config?.clientId||"",baseUrl:t?.config?.fileStoreUrl||""}},l=(e,t)=>async n=>{let a=!!n?.access?.find(({type:e,actions:t})=>("file"===e||"collection"==e)&&t.includes("update")),o=await (a?t():e());return{token:o?.token||"",clientId:o?.config?.clientId||"",baseUrl:o?.config?.fileStoreUrl||""}},s=async e=>{let{collectionId:t,templateId:a,spaceKey:o}=(0,n("c4QoG").getTemplateMediaContextValues)(e);if(t||a)return(0,n("c4QoG").getTemplateMediaAuth)({collectionId:t,spaceKey:o,templateId:a});let i=await (0,n("kEk2z").fetchMediaToken)(e),{clientId:r="",fileStoreUrl:l=""}=i?.data?.mediaConfiguration||{};return{clientId:r,token:i?.data?.content?.nodes?.[0]?.body?.atlas_doc_format?.mediaToken?.token||"",baseUrl:l||""}},c=(0,n("kzNtP").cacheWithExp)(async e=>{let t="comment"===e.contentType&&e.cloudId&&(0,n("9wGTI").fg)("confluence_comment_use_comment_media_endpoint")?await (0,n("kEk2z").getCommentUploadToken)(e.contentId,e.cloudId):await (0,n("kEk2z").getUploadToken)(e.contentId),a=t?.data?.contentMediaSession;return{token:a?.token?.value||"",config:a?.configuration||o,collectionId:a?.collection||""}},e=>e.token),d=async e=>(await c.getValue(e)).collectionId,u=e=>()=>c.getValue(e),p=async e=>({authProvider:r(u(e)),getAuthFromContext:s,useSha256ForUploads:!0}),f=(0,n("kzNtP").cacheWithExp)(async({contentId:e,spaceKey:t})=>{let a=await (0,n("kEk2z").getIsExportEnabledForContent)(e,t);return{isExportAllowed:a?.data?.dataSecurityPolicy?.isActionEnabledForContent?.allowed,exp:Date.now()+6e4}},e=>e.exp),m=async e=>{if(!(0,n("9wGTI").fg)("dlp_attachment_download_respects_data_export_dsp"))return!1;let{contentId:t,spaceKey:a,mediaDspContentId:o}=e;if(!(0,n("9wGTI").fg)("dlp_allow_content_dsp_check_without_space_details")&&!a)return!0;try{let e=await f.getValue({contentId:o||t,spaceKey:a});return!e?.isExportAllowed}catch(e){return!0}},g=e=>async()=>{let t={contentId:e.contentId,isExternalShare:e.isExternalShare,shareToken:e.shareToken},n=await i.getValue(t);return e.mediaToken&&(n={...n,token:e.mediaToken}),n.token||(n=await i.forceGetValue(t)),n},I=async e=>({enforceDataSecurityPolicy:await m(e),authProvider:r(g(e)),getAuthFromContext:s}),y=async e=>({enforceDataSecurityPolicy:await m(e),authProvider:l(g(e),u(e)),getAuthFromContext:s}),h=async e=>({viewMediaClientConfig:await I(e)}),k=async e=>{x(e);let[t,a,o,i]=await Promise.all([I(e),p(e),(0,n("9wGTI").fg)("platform_media_video_captions")?y(e):void 0,d(e)]);return{viewMediaClientConfig:t,uploadParams:{collection:i,onUploadRejection:e.onUploadRejection},uploadMediaClientConfig:a,viewAndUploadMediaClientConfig:o}},x=e=>{a&&n("eGqQQ").globalMediaEventEmitter.off("file-added",a),a=(0,n("kQiXs").attachUploadedMedia)(e),n("eGqQQ").globalMediaEventEmitter.on("file-added",a)},S=e=>async()=>g(e())(),E=e=>async()=>u(e())(),T=async e=>{let t=e();return{enforceDataSecurityPolicy:await m(t),authProvider:r(S(e)),getAuthFromContext:s}},C=async e=>{let t=e();return{enforceDataSecurityPolicy:await m(t),authProvider:l(S(e),E(e)),getAuthFromContext:s}},b=async e=>({viewMediaClientConfig:await T(e)}),A=async e=>{let t=e();x(t);let[a,o,i,r]=await Promise.all([T(()=>e()),(async()=>p(e()))(),(0,n("9wGTI").fg)("platform_media_video_captions")?C(()=>e()):void 0,(async()=>d(e()))()]);return{viewMediaClientConfig:a,uploadParams:{collection:r,onUploadRejection:t.onUploadRejection},uploadMediaClientConfig:o,viewAndUploadMediaClientConfig:i}};e.exports.createAuthProvider=r,e.exports.getAuthFromContext=s,e.exports.getViewMediaClientConfig=I,e.exports.createRendererMediaProvider=h,e.exports.createEditorMediaProvider=k,e.exports.controlDataExportOnCertainFeatures=e=>!!n("1NBp8").PDF_EXPORT_PAGE.match(e),e.exports.createRendererMediaProviderDynamic=b,e.exports.createEditorMediaProviderDynamic=A}),a("kzNtP",function(t,a){var o=n("9ILXP"),i=n("a4TK8");let r=[-1/0,null,null];t.exports.cacheWithExp=function(t,n,a=6e4){let l={};async function s(s,c){let d="";try{d=JSON.stringify(s)}catch{}let[u,p,f]=l[d]||r;if(c||u<=Date.now()||!e(i)(p,s)){let e=await t(s),i=null;try{i=n(e)}catch(e){}let c=null;if(i)if(isNaN(i)){if("string"==typeof i)try{c=1e3*(0,o.default)(i).exp-a}catch(e){}}else c=Number(i);return l[d]=null===c?r:[c,s,e],e}return f}return{forceGetValue:e=>s(e,!0),getValue:e=>s(e,!1)}}}),a("c4QoG",function(e,t){let a=e=>!/^[0-9]+$/.test(e),o=e=>!e||""===e,i=e=>e.length,r=(e,t,n)=>o(e)||a(e)&&n||!t?[]:[e],l=(0,n("kzNtP").cacheWithExp)(async e=>{let t=await (0,n("7EQEd").getTemplateUploadToken)({spaceKey:e.spaceKey,templateIds:e.templateIds,collectionId:e.collectionId}),a=t?.data?.templateMediaSession,o=a?.collections?.[0]?.value||"";return{token:a?.uploadToken?.value||"",config:a?.configuration||{fileStoreUrl:"",clientId:""},collectionId:o}},e=>e.token),s=(0,n("kzNtP").cacheWithExp)(async e=>{let t=await (0,n("7EQEd").getTemplateDownloadToken)({spaceKey:e.spaceKey,templateIds:e.templateIds,collectionId:e.collectionId});return{token:t?.data?.templateMediaSession?.downloadToken?.value||"",config:t?.data?.templateMediaSession?.configuration||{fileStoreUrl:"",clientId:""}}},e=>e.token),c=async e=>{let t=r(e.templateId,!e.collectionId,!0);return(await l.getValue({...e,templateIds:t,collectionId:i(t)?null:e.collectionId})).collectionId},d=e=>{let t,n,a=null;try{({collectionId:t,templateId:n,spaceKey:a}=JSON.parse(e))}catch(e){}return{collectionId:t,templateId:n,spaceKey:a}},u=async({templateId:e,collectionId:t,spaceKey:a})=>{let o=await (0,n("7EQEd").getTemplateDownloadToken)({templateIds:e?[e]:[],collectionId:e?null:t,spaceKey:a}),{clientId:i="",fileStoreUrl:r=""}=o?.data?.templateMediaSession?.configuration||{};return{clientId:i,token:o?.data?.templateMediaSession?.downloadToken?.value||"",baseUrl:r}},p=async e=>{let{collectionId:t,templateId:a,spaceKey:o}=d(e);return"string"!=typeof t&&"string"!=typeof a?(0,n("4IoVL").getAuthFromContext)(e):u({collectionId:t,spaceKey:o,templateId:a})},f=e=>({authProvider:(0,n("4IoVL").createAuthProvider)(async()=>s.getValue(e)),getAuthFromContext:p}),m=async e=>{let t=!0,a=e.collectionId,o={authProvider:(0,n("4IoVL").createAuthProvider)(async()=>{let n=r(e.templateId,t,!1);return t=!1,s.getValue({...e,templateIds:n,collectionId:i(n)?null:a})}),getAuthFromContext:e=>(t=!1,p(e))},d={authProvider:(0,n("4IoVL").createAuthProvider)(()=>{let t=r(e.templateId,!a,!0);return l.getValue({...e,templateIds:t,collectionId:i(t)?null:a})}),getAuthFromContext:e=>p(e)},u=await c(e);return a=u||null,{viewMediaClientConfig:o,uploadParams:{collection:u,onUploadRejection:e.onUploadRejection},uploadMediaClientConfig:d}};e.exports.getTemplateUploadCollectionId=c,e.exports.getTemplateMediaContextValues=d,e.exports.getTemplateMediaAuth=u,e.exports.createRendererTemplateMediaProvider=e=>Promise.resolve({viewMediaClientConfig:f(e)}),e.exports.createTemplateEditorMediaProvider=m}),a("7EQEd",function(e,t){let a=async({spaceKey:e,templateIds:t,collectionId:a=null})=>(0,n("hp2SH").getApolloClient)().query({query:n("luiqu").TemplateMediaSessionDownloadQuery,variables:{spaceKey:e||null,templateIds:t,collectionId:a},fetchPolicy:"network-only"}).catch(e=>{(0,n("5ZqQS").getMonitoringClient)().submitError(e,{attribution:n("3IBnw").Attribution.PAGE_MODES}),(0,n("7Sm4c").markErrorAsHandled)(e)}),o=async({spaceKey:e,templateIds:t,collectionId:a=null})=>(0,n("hp2SH").getApolloClient)().query({query:n("enSbc").TemplateMediaSessionUploadQuery,variables:{spaceKey:e||null,templateIds:t,collectionId:a},fetchPolicy:"no-cache"}).catch(e=>{(0,n("5ZqQS").getMonitoringClient)().submitError(e,{attribution:n("3IBnw").Attribution.PAGE_MODES}),(0,n("7Sm4c").markErrorAsHandled)(e)});e.exports.getTemplateDownloadToken=a,e.exports.getTemplateUploadToken=o}),a("luiqu",function(e,t){let a=(0,n("eSUdr").default)`query TemplateMediaSessionDownloadQuery($spaceKey:String$templateIds:[String]!$collectionId:String){templateMediaSession(spaceKey:$spaceKey templateIds:$templateIds collectionId:$collectionId){collections{key value}configuration{fileStoreUrl clientId}downloadToken{value duration}}}`;e.exports.TemplateMediaSessionDownloadQuery=a}),a("enSbc",function(e,t){let a=(0,n("eSUdr").default)`query TemplateMediaSessionUploadQuery($spaceKey:String$templateIds:[String]!$collectionId:String){templateMediaSession(spaceKey:$spaceKey templateIds:$templateIds collectionId:$collectionId){collections{key value}configuration{fileStoreUrl clientId}uploadToken{value duration}}}`;e.exports.TemplateMediaSessionUploadQuery=a}),a("kEk2z",function(t,a){var o=n("5d9b4"),i=n("9ILXP");let r=!0,l=e(o)(e=>{let t;return(e,a)=>{if(a&&(e=(e||[]).concat(a)),e){let a={};for(let o of e){let e=o.message||String(o)||o.originalError?.message||String(o.originalError),{path:i}=o,r=Array.isArray(i)&&i.join(".")||e;if(r){let i=(0,n("aMcHK").getStatusCode)(o)||e;i&&(a[r]=i,t?.[r]===i&&(0,n("7Sm4c").markErrorAsHandled)(o))}}t=a}else t=void 0}}),s=e=>(0,n("hp2SH").getApolloClient)().query({query:n("7tJer").MediaUploadTokenQuery,variables:{contentId:e},fetchPolicy:"no-cache"}),c=async e=>{if(!(0,n("9wGTI").fg)("confluence-media-upload-token-cache"))return s(e);let t=(0,n("hp2SH").getApolloClient)();try{let{data:a}=await t.query({query:n("7tJer").MediaUploadTokenQuery,variables:{contentId:e},fetchPolicy:"cache-first"}),o=a?.contentMediaSession?.token?.value;if(o){let{exp:e}=(0,i.default)(o),t=Math.floor(Date.now()/1e3);if(e>t)return{data:a}}}catch{}return t.query({query:n("7tJer").MediaUploadTokenQuery,variables:{contentId:e},fetchPolicy:"network-only"})},d=async(e,t)=>{let a=(0,n("hp2SH").getApolloClient)();try{let{data:o}=await a.query({query:n("7tJer").CommentMediaUploadTokenQuery,variables:{cloudId:t,contentId:e},fetchPolicy:"cache-first"}),r=o?.contentMediaSession?.token?.value;if(r){let{exp:e}=(0,i.default)(r),t=Math.floor(Date.now()/1e3);if(e>t)return{data:o}}}catch{}return a.query({query:n("7tJer").CommentMediaUploadTokenQuery,variables:{cloudId:t,contentId:e},fetchPolicy:"network-only"})};t.exports.setAttachment=e=>{if(!("comment"===e.contentType&&(0,n("9wGTI").fg)("confluence_comment_use_comment_media_endpoint")))return(0,n("egLSs").experimentalFileUploadMutate)({variables:e})},t.exports.fetchMediaToken=e=>(0,n("hp2SH").getApolloClient)().query({query:n("1qiwK").MediaDownloadTokenQuery,variables:{contentId:e,status:["current","draft","archived"],missingContentId:!e},context:{allowOnExternalPage:!0},fetchPolicy:r?"cache-first":"network-only"}).then(t=>{r=!1;try{l(e)(t?.errors)}catch{}return t},t=>{try{l(e)(t?.graphQLErrors,t?.networkError)}catch{}throw t}),t.exports.fetchExternalShareMediaToken=e=>(0,n("hp2SH").getApolloClient)().query({query:n("gVyaz").ExternalShareMediaDownloadTokenQuery,variables:{contentId:e},context:{allowOnExternalPage:!0},fetchPolicy:"network-only"}),t.exports.fetchExternalContentMediaSessionToken=e=>(0,n("hp2SH").getApolloClient)().query({query:n("gB1dF").ExternalContentMediaSessionQuery,variables:{shareToken:e},context:{allowOnExternalPage:!0},fetchPolicy:"network-only"}),t.exports.getUploadToken=c,t.exports.getCommentUploadToken=d,t.exports.getIsExportEnabledForContent=(e,t)=>{let a={action:n("fOjen").DataSecurityPolicyAction.PAGE_EXPORT,contentId:e,contentStatus:"CURRENT",contentVersion:1};return t&&(a={...a,spaceKey:t}),(0,n("hp2SH").getApolloClient)().query({query:n("25RVt").DSPIsActionEnabledForContentQuery,variables:a,context:{allowOnExternalPage:!0},fetchPolicy:"cache-first"})}}),a("gVyaz",function(e,t){let a=(0,n("eSUdr").default)`query ExternalShareMediaDownloadTokenQuery($contentId:ID!){singleContent(id:$contentId){id body{atlas_doc_format{mediaToken{token}}}}mediaConfiguration{clientId fileStoreUrl}}`;e.exports.ExternalShareMediaDownloadTokenQuery=a}),a("7tJer",function(e,t){let a=(0,n("eSUdr").default)`query MediaUploadTokenQuery($contentId:ID!){contentMediaSession(contentId:$contentId){token{value}configuration{clientId fileStoreUrl}collection}}`,o=(0,n("eSUdr").default)`query CommentMediaUploadTokenQuery($cloudId:ID!$contentId:ID!){contentMediaSession:confluence_commentMediaSession(cloudId:$cloudId contentId:$contentId){token{value}configuration{clientId fileStoreUrl}collection}}`;e.exports.MediaUploadTokenQuery=a,e.exports.CommentMediaUploadTokenQuery=o}),a("egLSs",function(e,t){e.exports.experimentalFileUploadMutate=({variables:e})=>(0,n("4GGNn").experimentalMutate)({url:"/wiki/rest/drag-and-drop/1/filestore/upload",method:"POST",body:JSON.stringify(e),headers:{"Content-Type":n("aBfpe").MediaType.JSON},variables:e,parseResult:()=>({experimentalFileUpload:!0})})}),a("gB1dF",function(e,t){let a=(0,n("eSUdr").default)`query ExternalContentMediaSessionQuery($shareToken:String!){externalContentMediaSession(shareToken:$shareToken){accessTokens{readOnlyToken{value}readWriteToken{value}}configuration{fileStoreUrl clientId}}}`;e.exports.ExternalContentMediaSessionQuery=a}),a("kQiXs",function(e,t){let a=()=>{};e.exports.attachUploadedMedia=e=>e.contentId&&e.contentType?t=>{let{id:a,name:o,size:i,mimeType:r}=t,{contentId:l,contentType:s}=e,c={size:i,contentType:s,mimeType:r,fileName:o,pageId:l,fileStoreId:a,minorEdit:!0,renderEditorHTML:!1,collectionName:`contentId-${l}`,uploadSource:"fabric-editor"};(0,n("kEk2z").setAttachment)(c)}:a}),a("4KFTW",function(e,t){e.exports.MacroExperienceStart=function({attributes:e,children:t=null,contentId:a,extensionKey:o,mode:i,name:r,timeout:l}){return(0,n("2bAZx").useDeepCompareEffect)(()=>{(0,n("5kjCz").getMacroExperienceTracker)(i,a).start({attributes:e,name:r,timeout:l,id:e?.macroId||a})},[e,a,o,i,r,l]),t}}),a("4cOi8",function(e,t){var n,a,o,i,r,l,s,c,d,u,p,f=((n={}).DEFAULT="default",n.ALTERNATIVE_1="alternative_1",n),m=((a={}).ROUNDED="rounded",a.SQUARED="squared",a),g=((o={}).MEDIUM="medium",o.SMALL="small",o.LARGE="large",o),I=((i={}).LEFT="left",i.RIGHT="right",i.CENTER="center",i),y=((r={}).ROW="row",r.STACKED="stacked",r),h=((l={}).FRAME_ABOVE_IMAGE="frame-above-image",l.SPLIT_IMAGE_RIGHT="split-image-right",l.SPLIT_IMAGE_LEFT="split-image-left",l.FULL_IMAGE_BACKGROUND="full-image-background",l.NO_IMAGE_BACKGROUND="no-image-background",l),k=((s={}).CARDS="Cards",s.CAROUSEL="Carousel",s.COMPANY_HUB="Company hub",s.CUSTOMIZE_NAVIGATION="Customize Navigation",s.LINKS_MENU="Links menu",s.SPOTLIGHT="Spotlight",s.SECTION="Section",s.CUSTOM_SEARCH="Custom search",s),x=((c={}).RENDERER="renderer",c.EDITOR="editor",c),S=((d={}).MANUAL="manual",d.DYNAMIC="dynamic",d),E=((u={}).ALL="all",u.EACH="each",u),T=((p={}).CARD_ID="cardId",p.TITLE="title",p.IS_TITLE_USER_EDITED="isTitleUserEdited",p.DESCRIPTION="description",p.IS_DESCRIPTION_USER_EDITED="isDescriptionUserEdited",p.IS_DESCRIPTION_SHOWN="isDescriptionShown",p.LABEL="label",p.IS_LABEL_HIDDEN="isLabelHidden",p.LINK="link",p.IS_LINK_USER_EDITED="isLinkUserEdited",p.IMAGE_SRC="imageSrc",p.CONFLUENCE_PAGE_ID="confluencePageId",p.IMAGE_ALT_TEXT="imageAltText",p.SEGMENTATION_TARGETS="segmentationTarget",p.AUDIENCE_SEGMENTATION_GROUP_IDS="audienceSegmentationGroupIds",p.LINK_RESOURCE_TYPE="linkResourceType",p.BACKGROUND_COLOR="backgroundColor",p.TEXT_COLOR="textColor",p.LABEL_COLOR="labelColor",p.LAYOUT="layout",p.IS_BUTTON_SHOWN="isButtonShown",p.BUTTON_TEXT="buttonText",p.BUTTON_STYLE="buttonStyle",p.HEIGHT="height",p);e.exports.ButtonStyle=f,e.exports.CornerStyle=m,e.exports.Height=g,e.exports.Alignment=I,e.exports.Orientation=y,e.exports.CommonLayout=h,e.exports.FeedbackType=k,e.exports.ExtensionMode=x,e.exports.RenderVariant=S,e.exports.SegmentationTargets=E,e.exports.ITEM_FIELDS=T}),a("fOKpq",function(e,t){n("l998X");var a=n("42omo");let o=(0,a.createContext)({isCompanyHub:!0,isAdminHubAIEnabled:!1,enableLinkInputInMediaPicker:!1,helpCenterAri:"",showConfigPreambleSupportLink:!1,shortcutListener:void 0,smartCardProviderComponent:void 0,orgId:"",userId:"",searchConfigProvider:{peopleDirectoryUrl:"",advancedSearchUrl:"",searchSessionId:""},displayName:"",isSSRProductInDarkMode:void 0,branding:void 0,hideExtensionBorders:!1,useFeedbackCollector:void 0,cloudId:"",useMediaConfig:void 0,createEditorMediaProvider:()=>Promise.resolve({viewMediaClientConfig:{authProvider:async()=>({})},uploadMediaClientConfig:{authProvider:async()=>({})}}),submitError:()=>{},markErrorAsHandled:()=>{},errorDisplayComponent:()=>null,errorBoundaryComponent:void 0,ConfigUpsellScreen:void 0,mediaUploadExperienceTracker:void 0,aiDescriptionExperienceTracker:void 0,experienceSuccessComponent:()=>null,experienceStopComponent:()=>null,experienceStartComponent:()=>null,analyticsContext:{},useSegmentationTargetGroups:()=>{},isTargetAudience:()=>!1,linkPickerConfig:{},enableTargeting:!1,enableUnifiedSearchFeatures:!1,enableSmartCardsFields:!1});e.exports.ProductDependenciesContext=o,e.exports.useProductDependencies=function(){let e=(0,a.useContext)(o);if(!e)throw Error("useProductDependencies must be used within ProductDependenciesProvider");return e}}),a("lOeVN",function(e,t){var a=n("42omo");let o=(0,n("jmjWc").LoadableAfterPaint)({__loadable_id__:"nSIir",name:"FeedbackCollectorLoader",loader:async()=>(await n("b71PS")).FeedbackCollector});e.exports.useFeedbackCollector=function(e){let{showModal:t}=(0,n("8aF6s").useDialogs)(),i=(0,a.useRef)();return i.current=e,(0,a.useCallback)(()=>t(o,i.current),[t])}}),a("b71PS",function(e,t){let a=n("4mJKd")(5);e.exports=Promise.all([a("6wr18"),a("ffEVr"),a("Wowvf"),a("hhss7"),a("cyGuT"),a("bUC6C")]).then(()=>n("cz7bE"))}),a("4mJKd",function(e,t){e.exports=e=>t=>import(n("8tirZ").shardUrl(n("02nRr").resolve(t),e))}),a("8tirZ",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.applyShardToDomain=r,e.exports.domainShardingKey=void 0,e.exports.getDomainShardIndex=a,e.exports.shardUrl=function(e,t){return globalThis[n]?l(e,t):e},e.exports.shardUrlUnchecked=l;let n="__ATLASPACK_ENABLE_DOMAIN_SHARDS";function a(e,t){let n=t+1,a=e.split("").reduce((e,t)=>{let a=(e<<n)-e+t.charCodeAt(0);return a&a},0);return(a%=n)<0&&(a+=n),a}let o=/-\d+$/;function i(e){if(!o.test(e))return e;let t=e.lastIndexOf("-");return e.slice(0,t)}function r(e,t){let n=e.indexOf("."),a=0===t?"":`-${t-1}`;if(-1===n)return`${i(e)}${a}`;let o=i(e.slice(0,n));return`${o}${a}${e.slice(n)}`}function l(e,t){let n=new URL(e),o=a(function(e){let t=e.lastIndexOf("/");if(-1===t||t===e.length-1)throw Error("Expected an absolute URL with a file name, unable to apply sharding.");return e.slice(t+1)}(n.pathname),t);return n.hostname=r(n.hostname,o),n.toString()}e.exports.domainShardingKey=n}),a("02nRr",function(e,n){t(e.exports,"register",()=>a,e=>a=e),t(e.exports,"resolve",()=>o,e=>o=e);var a,o,i=new Map;a=function(e,t){for(var n=0;n<t.length-1;n+=2)i.set(t[n],{baseUrl:e,path:t[n+1]})},o=function(e){var t=i.get(e);if(null==t)throw Error("Could not resolve bundle with id "+e);return new URL(t.path,t.baseUrl).toString()}}),a("iP9x4",function(t,a){var o=n("5yfLD");let i="mediaProvider unavailable, must use initialAuth",r=()=>void 0,l=()=>window.__SSR_RENDERED__,s=e=>{let t=n("4h1jl").mediaConfigRecorder?.get();if(t)return{...t,token:e?.mediaToken||t.token}},c=()=>!!(0,n("9wGTI").fg)("dlp_attachment_download_respects_data_export_dsp")&&!!n("4h1jl").mediaConfigEnforceDSPRecorder?.get(),d=e=>({mode:"server",config:{authProvider:()=>Promise.reject(Error(i)),initialAuth:s(e),enforceDataSecurityPolicy:c()}}),u=({contentId:e,spaceKey:t,isExternalShare:a,mediaToken:o})=>async r=>{if(e&&t){let{viewMediaClientConfig:i}=await (0,n("4IoVL").createRendererMediaProvider)({contentId:e,spaceKey:t,isExternalShare:a,mediaToken:o});return i.authProvider(r)}throw Error(i)},p=e=>({mode:"client",config:{authProvider:u(e),initialAuth:window.__MEDIA_CONFIG__,enforceDataSecurityPolicy:window.__MEDIA_CONFIG_ENFORCE_DSP__}}),f=(0,n("2XqLN").default)(e=>r()?d(e):l()?p(e):void 0,e(o));t.exports.useMediaSSRModeAndAuthConfig=e=>f(e)}),a("4h1jl",function(e,t){let a=new(0,n("2BiLx").ObjectRecorder),o=new(0,n("2BiLx").ObjectRecorder);e.exports.mediaConfigRecorder=a,e.exports.mediaConfigEnforceDSPRecorder=o}),a("2BiLx",function(e,t){e.exports.ObjectRecorder=class{set(e){this.object=e}get(){return this.object}constructor(){this.object=null}}});
//# sourceMappingURL=CommentsPanelFilterMenu.3a22937c.js.map
