function e(e){return e&&e.__esModule?e.default:e}var t=globalThis.parcelRequired477,n=t.register;n("8bw1z",function(n,a){var s,o,r,i,c,l,d,u,p,m,_,E,g,f,S,I,h=t("42omo"),A=t("6DT7W"),T=t("5u6LZ"),R=t("8RR7m");let C=(0,t("dPJCf").createSingleQueryParamHook)("accountId"),b=(0,t("dPJCf").createSingleQueryParamHook)("username"),y=(0,t("dPJCf").createSingleQueryParamHook)("grantAccess"),D=()=>{let e=C(),n=b(),a=y(),{setQueryParams:s}=(0,t("dPJCf").useRouteActions)();return{shouldShowGrantAccess:!!(a&&e||n),clearGrantAccessQueryParams:(0,h.useCallback)(()=>{s({grantAccess:void 0,accessType:void 0,accountId:void 0,username:void 0},!0)},[s])}};var P=t("b8XTE"),k=t("6GD8y");let v=(0,t("jmjWc").LoadableLazy)({__loadable_id__:"1uPaZ",name:"LazyShareNudgeSpotlight",loader:async()=>(await t("6NJY6")).ShareNudgeSpotlight,loading:({children:e})=>e});var N=t("6fwOO"),O=t("3u0dr"),L=t("frIzR");let x={fragment:{argumentDefinitions:[s={defaultValue:null,kind:"LocalArgument",name:"accessType"},o={defaultValue:null,kind:"LocalArgument",name:"contentId"},r={defaultValue:null,kind:"LocalArgument",name:"spaceRoleId"},i={defaultValue:null,kind:"LocalArgument",name:"subjects"}],kind:"Fragment",name:"useRealtimeAccessRequestsFlagsResolveRestrictionsForSubjectsMutation",selections:c=[{args:[{fields:[{kind:"Variable",name:"accessType",variableName:"accessType"},{kind:"Variable",name:"contentId",variableName:"contentId"},{kind:"Variable",name:"spaceRoleId",variableName:"spaceRoleId"},{kind:"Variable",name:"subjects",variableName:"subjects"}],kind:"ObjectValue",name:"input"}],concreteType:"ResolveRestrictionsPayload",kind:"LinkedField",name:"resolveRestrictionsForSubjects",plural:!1,selections:[{kind:"ScalarField",name:"success"},{concreteType:"MutationError",kind:"LinkedField",name:"errors",plural:!0,selections:[{kind:"ScalarField",name:"message"}]}]}],type:"Mutation"},kind:"Request",operation:{argumentDefinitions:[s,o,i,r],kind:"Operation",name:"useRealtimeAccessRequestsFlagsResolveRestrictionsForSubjectsMutation",selections:c},params:{cacheID:"e476390ffa12b3e505bd7e8ac519e061",id:"21f4290cdcdb12ab3f1c90bcbc8c6b47b7fbcce98706579b8ee723ba26cca755",metadata:{},name:"useRealtimeAccessRequestsFlagsResolveRestrictionsForSubjectsMutation",operationKind:"mutation",text:"mutation useRealtimeAccessRequestsFlagsResolveRestrictionsForSubjectsMutation($accessType:ResourceAccessType!,$contentId:Long!,$subjects:[BlockedAccessSubjectInput]!,$spaceRoleId:ID){resolveRestrictionsForSubjects(input:{accessType:$accessType,contentId:$contentId,subjects:$subjects,spaceRoleId:$spaceRoleId}){success,errors{message}}}"}};x.hash="20811ee88362a051210b331b739d34c1";let w={fragment:{argumentDefinitions:l=[{defaultValue:null,kind:"LocalArgument",name:"cloudId"},{defaultValue:null,kind:"LocalArgument",name:"updateContentAccessRequestInput"}],kind:"Fragment",name:"useRealtimeAccessRequestsFlagsMutation",selections:[{args:d=[{kind:"Variable",name:"cloudId",variableName:"cloudId"},{kind:"Variable",name:"updateContentAccessRequestInput",variableName:"updateContentAccessRequestInput"}],concreteType:"ConfluenceUpdateContentAccessRequestPayload",kind:"LinkedField",name:"confluence_updateContentAccessRequest",plural:!1,selections:[u={kind:"ScalarField",name:"success"},{concreteType:"MutationError",kind:"LinkedField",name:"errors",plural:!0,selections:[{kind:"LinkedField",name:"extensions",plural:!1,selections:[p={kind:"ScalarField",name:"errorType"},m={kind:"ScalarField",name:"statusCode"},_={kind:"InlineFragment",selections:[{kind:"ScalarField",name:"displayName"},{kind:"ScalarField",name:"processedRequestStatus"}],type:"ConfluenceUpdateContentAccessRequestMutationErrorExtension"}]},E={kind:"ScalarField",name:"message"}]}]}],type:"Mutation"},kind:"Request",operation:{argumentDefinitions:l,kind:"Operation",name:"useRealtimeAccessRequestsFlagsMutation",selections:[{args:d,concreteType:"ConfluenceUpdateContentAccessRequestPayload",kind:"LinkedField",name:"confluence_updateContentAccessRequest",plural:!1,selections:[u,{concreteType:"MutationError",kind:"LinkedField",name:"errors",plural:!0,selections:[{kind:"LinkedField",name:"extensions",plural:!1,selections:[{kind:"ScalarField",name:"__typename"},p,m,_,{kind:"InlineFragment",selections:[{kind:"ScalarField",name:"id"}],type:"BulkMutationErrorExtension"}]},E]}]}]},params:{cacheID:"0b068909b70e89d0a0fae8e512364ff1",id:"3c517259cfcce8a2b1078b48a4b86e4e113c339413e1ea43968406ff0da3a44f",metadata:{},name:"useRealtimeAccessRequestsFlagsMutation",operationKind:"mutation",text:"mutation useRealtimeAccessRequestsFlagsMutation($cloudId:ID!,$updateContentAccessRequestInput:ConfluenceUpdateContentAccessRequestInput!){confluence_updateContentAccessRequest(cloudId:$cloudId,updateContentAccessRequestInput:$updateContentAccessRequestInput){success,errors{extensions{__typename,errorType,statusCode,...on ConfluenceUpdateContentAccessRequestMutationErrorExtension{displayName,processedRequestStatus},...on BulkMutationErrorExtension{id}},message}}}"}};w.hash="d69609e7d2f2caf0cf2ad975140f6131";let M={fragment:{argumentDefinitions:g=[{defaultValue:null,kind:"LocalArgument",name:"cloudId"},{defaultValue:null,kind:"LocalArgument",name:"contentId"},{defaultValue:5,kind:"LocalArgument",name:"duration"},{defaultValue:10,kind:"LocalArgument",name:"limit"},{defaultValue:null,kind:"LocalArgument",name:"start"}],kind:"Fragment",name:"useRealtimeAccessRequestsFlagsQuery",selections:S=[{args:[{kind:"Variable",name:"cloudId",variableName:"cloudId"},{kind:"Variable",name:"contentId",variableName:"contentId"},{kind:"Variable",name:"duration",variableName:"duration"},{kind:"Variable",name:"limit",variableName:"limit"},{kind:"Variable",name:"start",variableName:"start"}],concreteType:"ConfluenceLatestPendingRequests",kind:"LinkedField",name:"confluence_getLatestPendingRequests",plural:!1,selections:[{concreteType:"ConfluenceContentAccessRequest",kind:"LinkedField",name:"latestPendingRequest",plural:!0,selections:[f={kind:"ScalarField",name:"id"},{kind:"ScalarField",name:"requestAccessType"},{kind:"ScalarField",name:"creatorAaid"},{kind:"ScalarField",name:"creationDateTimestamp"},{concreteType:"AtlassianUser",kind:"LinkedField",name:"user",plural:!1,selections:[f,{kind:"ScalarField",name:"displayName"},{concreteType:"AtlassianUserPhoto",kind:"LinkedField",name:"photos",plural:!0,selections:[{kind:"ScalarField",name:"isPrimary"},{kind:"ScalarField",name:"value"}]}]}]}]}],type:"Query"},kind:"Request",operation:{argumentDefinitions:g,kind:"Operation",name:"useRealtimeAccessRequestsFlagsQuery",selections:S},params:{cacheID:"cc07dc4570c5f23dcae6dba3e01bc64f",id:"869aa59f186c59156b49e7fd84b080a9f741fa74d96ee0e9093d8be9fba90884",metadata:{},name:"useRealtimeAccessRequestsFlagsQuery",operationKind:"query",text:"query useRealtimeAccessRequestsFlagsQuery($cloudId:ID!,$contentId:ID!,$duration:Int=5,$limit:Int=10,$start:String){confluence_getLatestPendingRequests(cloudId:$cloudId,contentId:$contentId,duration:$duration,limit:$limit,start:$start){latestPendingRequest{id,requestAccessType,creatorAaid,creationDateTimestamp,user{id,displayName,photos{isPrimary,value}}}}}"}};M.hash="b94cab17722d3b349c6aeac7cfa04a8f";var U=t("dwkNQ"),F=t("7QoAs");let q=t("1UApO").keys.LAST_SHOWN_REALTIME_REQUEST_CREATED_AT,B=e=>Date.now()-e<3e5,V=e=>!B(e),j=(e,n)=>{(0,t("2Oud5").setCachedTuple)(e,n,q,B)},G=(e,n)=>n>(0,t("2Oud5").getCachedTimestamp)(e,q)&&B(n),H=e=>{(0,t("2Oud5").removeCachedTuple)(e,q,V)},Q=e=>{if(1===e.length){let t=e[0],n=t?.user?.displayName,a=t?.requestAccessType;return`${n} wants to ${a?.toLowerCase()} this content`}if(e.length>1){let t=e[0]?.user?.displayName;if(2===e.length){let n=e[1]?.user?.displayName;return`${t} and ${n} want to access your content`}let n=e.length-1;return`${t} and ${n} others want to access your content`}return""},K=(e,n,a)=>{if(1===e.length&&a){let s=e[0]?.requestAccessType,o=a.restrictedResources?.some(e=>e?.resourceType===t("1chEN").ResourceType.SPACE),r=a.restrictedResources?.some(e=>e?.resourceType!==t("1chEN").ResourceType.SPACE),i=a.restrictedResources?.reduce((e,n)=>e+ +(n?.resourceType!==t("1chEN").ResourceType.SPACE),0)??0,c=n?` as a ${"EDIT"===s?"collaborator":"viewer"}`:"",l=1===i?"item":"items";if(o&&r)return`They'll need to be added to the space${c} and to ${i} parent ${l}.`;if(o)return`They'll need to be added to the space ${c}.`;if(r)return`They'll need to be added to ${i} parent ${l}.`}return null},$=n=>{let a=n.filter(e=>e?.user?.displayName&&e?.requestAccessType).map(e=>({name:e?.user?.displayName,src:e?.user?.photos?.find(e=>e?.isPrimary)?.value??void 0,key:e?.user?.id})),s=1===a.length?1:2;return e(h).createElement(t("2Pg7f").default,{data:a,maxCount:s})},W=(e,t,n,a,s,o)=>{if(1===e.length){let a=t?{content:"View details",onClick:s}:{content:"Deny",onClick:()=>{n(e[0],"DENY",!1),o()}};return[{content:t?"Add to all":"Approve",onClick:()=>{n(e[0],"APPROVE",t),o()}},a]}return e.length>1?[{content:"Review requests",onClick:a}]:[]},Y=(0,O.isReactCompilerActiveV1)()?e=>{let t,n,a=(0,L.c)(3),{onDestroy:s,children:o}=e;return a[0]!==s?(t=()=>s,n=[s],a[0]=s,a[1]=t,a[2]=n):(t=a[1],n=a[2]),(0,h.useEffect)(t,n),o}:({onDestroy:e,children:t})=>((0,h.useEffect)(()=>e,[e]),t),z="REQUEST_ALREADY_PROCESSED",X="realtime-access-reqeust-flag",J=`${X}-id`,Z="0c103ff5-44d0-4b2a-b80d-8690442c95f0",ee="26d75a6e-ad72-42c3-bf30-007d3ebae9ed",et=()=>{},en=(0,O.isReactCompilerActiveV1)()?t=>{let n,a=(0,L.c)(2);return a[0]!==t?(n=e(h).createElement(U.ResolveRestrictionsDialog,t),a[0]=t,a[1]=n):n=a[1],n}:t=>e(h).createElement(U.ResolveRestrictionsDialog,t),ea=(0,O.isReactCompilerActiveV1)()?n=>{let a,s,o,r,i,c,l,d,u,p,m,_,E=(0,L.c)(52),{contentId:g,contentType:f,pageTitle:S,flags:I,onReviewRequests:A}=n,{cloudId:T,edition:R}=(0,t("bQm3c").useSessionData)(),{createAnalyticsEvent:C}=(0,t("inPa6").useAnalyticsEvents)(),{isRbacEnabled:b,loading:y}=(0,t("iquRY").useSpaceRoleMode)(),{showModal:D}=(0,t("8aF6s").useDialogs)(),[P,k]=(0,h.useState)(!1);E[0]===Symbol.for("react.memo_cache_sentinel")?(a=()=>k(!0),E[0]=a):a=E[0];let v=a,N=P||y;E[1]!==C?(s=e=>{C({type:e.eventType,data:{source:e.source,action:e.action,actionSubject:e.actionSubject,actionSubjectId:e.actionSubjectId,attributes:e.attributes}}).fire()},E[1]=C,E[2]=s):s=E[2];let O=s,[U]=(0,t("308Wd").useMutationInterop)(w),[q]=(0,t("308Wd").useMutationInterop)(x);E[3]!==T||E[4]!==g||E[5]!==I||E[6]!==b||E[7]!==U||E[8]!==q?(o=async(e,t,n)=>{if(!e||!e.id||!e.requestAccessType||!e.user||!e.user.id||!e.creatorAaid)return;let a=await U({variables:{cloudId:T,updateContentAccessRequestInput:{contentId:g,requestId:e.id,accessType:e.requestAccessType,accessRequestedAccountId:e.user.id,approvalDecision:t}}}),s=a.data?.confluence_updateContentAccessRequest?.success,o=a?.data?.confluence_updateContentAccessRequest?.errors?.find(es);if(s&&"APPROVE"===t&&n){let t="EDIT"===e.requestAccessType?Z:ee,n=b?t:null,a=e.creatorAaid,o=await q({variables:{contentId:Number(g),accessType:e.requestAccessType,subjects:[{subjectId:a,subjectType:"USER"}],spaceRoleId:n}});s=o?.data?.resolveRestrictionsForSubjects?.success}s?I.showSuccessFlag({id:`${J}_SUCCESS`,title:`Request ${"APPROVE"===t?"approved":"denied"}`,description:"APPROVE"===t?`${e.user.displayName} can now successfully ${e.requestAccessType.toLowerCase()} this content`:`${e.user.displayName}'s access to this content won't change`,isAutoDismiss:!0}):o?I.showInfoFlag({id:`${J}_INFO`,title:"Someone already responded to this request",isAutoDismiss:!0}):I.showErrorFlag({id:`${J}_ERROR`,title:"We ran into a problem resolving the access request. Try again later.",isAutoDismiss:!0})},E[3]=T,E[4]=g,E[5]=I,E[6]=b,E[7]=U,E[8]=q,E[9]=o):o=E[9];let B=o;E[10]!==T||E[11]!==g||E[12]!==R||E[13]!==O||E[14]!==I||E[15]!==b||E[16]!==B||E[17]!==A||E[18]!==S||E[19]!==D?(r=async(n,a)=>{let s,o,r=n.confluence_getLatestPendingRequests?.latestPendingRequest??[];if(0===r.length){H(g),a?"contentAccessDecisionMade"===a&&t("eRpR8").NEW_ACCESS_REQUEST_INDICATOR_STATE_INSTANCE.hideIndicator(g):t("eRpR8").NEW_ACCESS_REQUEST_INDICATOR_STATE_INSTANCE.clearCache(g);return}t("eRpR8").NEW_ACCESS_REQUEST_INDICATOR_STATE_INSTANCE.maybeShowIndicator(g,r[0]?.creationDateTimestamp);let i=r.filter(e=>{let t=e?.user?.displayName&&e?.requestAccessType,n=G(g,Number(e?.creationDateTimestamp));return t&&n}),c=Number(i[0]?.creationDateTimestamp);if(0===i.length)return;let l=I.state.flags.find(eo)?.id,d=`${J}_${Date.now()}`,u=!1,p=et,m=()=>{I.hideFlag(d)};if(1===i.length&&R){let e=i[0],n=e?.user,a=e?.requestAccessType??"VIEW",r="EDIT"===a?"as-editor":"as-viewer",c={id:n?.id??"",name:n?.displayName??"",avatarUrl:n?.photos?.find(er)?.value??"",email:"",knownErrors:void 0,sitePermissionType:a},[l]=await Promise.all([(0,F.validateRestrictedPrincipals)({contentId:g,cloudId:T,edition:R,numberOfAncestors:1,addMode:r,stagedUserPrincipals:[c],setMasterState:ei,fireAnalyticEvent:O}),(0,t("f2UnK").preloadSpaceRoleMode)(T)]),{showResolveRestrictionsDialog:d,showWarnRestrictionsDialog:_,restrictedUserPrincipals:E,assignableSpaceRolesIntersection:f}=l;if(_)return;d&&E?.[0]&&(u=!!(s=E?.[0]),p=()=>{D(en,o),t("eRpR8").NEW_ACCESS_REQUEST_INDICATOR_STATE_INSTANCE.hideIndicator(g),m()},o={contentId:g,restrictedUserPrincipals:E,assignableSpaceRolesIntersection:f,pageTitle:S,addMode:r,onComplete:()=>{B(e,"APPROVE",!0),m()},onClose:et,onCloseComplete:et,onSkip:et,showErrorFlag:I.showErrorFlag,triggeredBy:"realtimeAccessRequestFlag"})}await I.showCustomFlag({id:d,isAutoDismiss:!0,autoDismissSeconds:16,customIcon:$(i),title:e(h).createElement(Y,{onDestroy:()=>{I.state.flags.find(e=>{let{id:t}=e;return`${t}`.startsWith(X)&&t!==d})||j(g,c)}},Q(i)),description:K(i,b,s),actions:W(i,u,B,()=>{A(),m()},p,m)}),l&&await I.hideFlag(l)},E[10]=T,E[11]=g,E[12]=R,E[13]=O,E[14]=I,E[15]=b,E[16]=B,E[17]=A,E[18]=S,E[19]=D,E[20]=r):r=E[20];let V=r;E[21]!==T||E[22]!==g?(i={cloudId:T,contentId:g,duration:525600},E[21]=T,E[22]=g,E[23]=i):i=E[23],E[24]!==V||E[25]!==N||E[26]!==i?(c={variables:i,skip:N,fetchPolicy:"network-only",onCompleted:V,onError:v},E[24]=V,E[25]=N,E[26]=i,E[27]=c):c=E[27];let{refetch:z}=(0,t("jMyy4").useQueryInterop)(M,c);E[28]!==T||E[29]!==g||E[30]!==V||E[31]!==z?(l=async e=>{let t=await z({duration:"contentAccessDecisionMade"===e?525600:5,cloudId:T,contentId:g});if(t.errors)return void v();await V(t.data,e)},E[28]=T,E[29]=g,E[30]=V,E[31]=z,E[32]=l):l=E[32];let ea=l;E[33]!==T||E[34]!==g?(d=t("a2xFu").ConfluencePageAri.create({siteId:T,pageId:g}).toString(),E[33]=T,E[34]=g,E[35]=d):d=E[35],E[36]!==g||E[37]!==f||E[38]!==ea||E[39]!==N||E[40]!==d?(u={contentId:g,contentType:f,delta:"contentAccessRequested",subscriberId:d,onDataReceived:ea,skip:N},E[36]=g,E[37]=f,E[38]=ea,E[39]=N,E[40]=d,E[41]=u):u=E[41],(0,t("i9VoI").useSubscriptionEvent)(u),E[42]!==T||E[43]!==g?(p=t("a2xFu").ConfluencePageAri.create({siteId:T,pageId:g}).toString(),E[42]=T,E[43]=g,E[44]=p):p=E[44],E[45]!==g||E[46]!==f||E[47]!==ea||E[48]!==N||E[49]!==p?(m={contentId:g,contentType:f,delta:"contentAccessDecisionMade",subscriberId:p,onDataReceived:ea,skip:N},E[45]=g,E[46]=f,E[47]=ea,E[48]=N,E[49]=p,E[50]=m):m=E[50],(0,t("i9VoI").useSubscriptionEvent)(m),E[51]===Symbol.for("react.memo_cache_sentinel")?(_=[],E[51]=_):_=E[51],(0,h.useEffect)(el,_)}:({contentId:n,contentType:a,pageTitle:s,flags:o,onReviewRequests:r})=>{let{cloudId:i,edition:c}=(0,t("bQm3c").useSessionData)(),{createAnalyticsEvent:l}=(0,t("inPa6").useAnalyticsEvents)(),{isRbacEnabled:d,loading:u}=(0,t("iquRY").useSpaceRoleMode)(),{showModal:p}=(0,t("8aF6s").useDialogs)(),[m,_]=(0,h.useState)(!1),E=(0,h.useCallback)(()=>_(!0),[]),g=m||u,f=(0,h.useCallback)(e=>{l({type:e.eventType,data:{source:e.source,action:e.action,actionSubject:e.actionSubject,actionSubjectId:e.actionSubjectId,attributes:e.attributes}}).fire()},[l]),[S]=(0,t("308Wd").useMutationInterop)(w),[I]=(0,t("308Wd").useMutationInterop)(x),A=(0,h.useCallback)(async(e,t,a)=>{if(!e||!e.id||!e.requestAccessType||!e.user||!e.user.id||!e.creatorAaid)return;let s=await S({variables:{cloudId:i,updateContentAccessRequestInput:{contentId:n,requestId:e.id,accessType:e.requestAccessType,accessRequestedAccountId:e.user.id,approvalDecision:t}}}),r=s.data?.confluence_updateContentAccessRequest?.success,c=s?.data?.confluence_updateContentAccessRequest?.errors?.find(e=>e?.message===z);if(r&&"APPROVE"===t&&a){let t="EDIT"===e.requestAccessType?Z:ee,a=d?t:null,s=e.creatorAaid,o=await I({variables:{contentId:Number(n),accessType:e.requestAccessType,subjects:[{subjectId:s,subjectType:"USER"}],spaceRoleId:a}});r=o?.data?.resolveRestrictionsForSubjects?.success}r?o.showSuccessFlag({id:`${J}_SUCCESS`,title:`Request ${"APPROVE"===t?"approved":"denied"}`,description:"APPROVE"===t?`${e.user.displayName} can now successfully ${e.requestAccessType.toLowerCase()} this content`:`${e.user.displayName}'s access to this content won't change`,isAutoDismiss:!0}):c?o.showInfoFlag({id:`${J}_INFO`,title:"Someone already responded to this request",isAutoDismiss:!0}):o.showErrorFlag({id:`${J}_ERROR`,title:"We ran into a problem resolving the access request. Try again later.",isAutoDismiss:!0})},[i,n,d,o,S,I]),T=(0,h.useCallback)(async(a,l)=>{let u,m,_=a.confluence_getLatestPendingRequests?.latestPendingRequest??[];if(0===_.length){H(n),l?"contentAccessDecisionMade"===l&&t("eRpR8").NEW_ACCESS_REQUEST_INDICATOR_STATE_INSTANCE.hideIndicator(n):t("eRpR8").NEW_ACCESS_REQUEST_INDICATOR_STATE_INSTANCE.clearCache(n);return}t("eRpR8").NEW_ACCESS_REQUEST_INDICATOR_STATE_INSTANCE.maybeShowIndicator(n,_[0]?.creationDateTimestamp);let E=_.filter(e=>{let t=e?.user?.displayName&&e?.requestAccessType,a=G(n,Number(e?.creationDateTimestamp));return t&&a}),g=Number(E[0]?.creationDateTimestamp);if(0===E.length)return;let S=o.state.flags.find(({id:e})=>e.toString().startsWith(X))?.id,I=`${J}_${Date.now()}`,T=!1,R=et,C=()=>{o.hideFlag(I)};if(1===E.length&&c){let e=E[0],a=e?.user,r=e?.requestAccessType??"VIEW",l="EDIT"===r?"as-editor":"as-viewer",d={id:a?.id??"",name:a?.displayName??"",avatarUrl:a?.photos?.find(e=>e?.isPrimary)?.value??"",email:"",knownErrors:void 0,sitePermissionType:r},[{showResolveRestrictionsDialog:_,showWarnRestrictionsDialog:g,restrictedUserPrincipals:S,assignableSpaceRolesIntersection:I}]=await Promise.all([(0,F.validateRestrictedPrincipals)({contentId:n,cloudId:i,edition:c,numberOfAncestors:1,addMode:l,stagedUserPrincipals:[d],setMasterState:()=>{},fireAnalyticEvent:f}),(0,t("f2UnK").preloadSpaceRoleMode)(i)]);if(g)return;_&&S?.[0]&&(T=!!(u=S?.[0]),R=()=>{p(en,m),t("eRpR8").NEW_ACCESS_REQUEST_INDICATOR_STATE_INSTANCE.hideIndicator(n),C()},m={contentId:n,restrictedUserPrincipals:S,assignableSpaceRolesIntersection:I,pageTitle:s,addMode:l,onComplete:()=>{A(e,"APPROVE",!0),C()},onClose:et,onCloseComplete:et,onSkip:et,showErrorFlag:o.showErrorFlag,triggeredBy:"realtimeAccessRequestFlag"})}await o.showCustomFlag({id:I,isAutoDismiss:!0,autoDismissSeconds:16,customIcon:$(E),title:e(h).createElement(Y,{onDestroy:()=>{o.state.flags.find(({id:e})=>`${e}`.startsWith(X)&&e!==I)||j(n,g)}},Q(E)),description:K(E,d,u),actions:W(E,T,A,()=>{r(),C()},R,C)}),S&&await o.hideFlag(S)},[i,n,s,c,d,A,r,f,o,p]),{refetch:R}=(0,t("jMyy4").useQueryInterop)(M,{variables:{cloudId:i,contentId:n,duration:525600},skip:g,fetchPolicy:"network-only",onCompleted:T,onError:E}),C=(0,h.useCallback)(async e=>{let t=await R({duration:"contentAccessDecisionMade"===e?525600:5,cloudId:i,contentId:n});if(t.errors)return void E();await T(t.data,e)},[R,i,n,E,T]);(0,t("i9VoI").useSubscriptionEvent)({contentId:n,contentType:a,delta:"contentAccessRequested",subscriberId:t("a2xFu").ConfluencePageAri.create({siteId:i,pageId:n}).toString(),onDataReceived:C,skip:g}),(0,t("i9VoI").useSubscriptionEvent)({contentId:n,contentType:a,delta:"contentAccessDecisionMade",subscriberId:t("a2xFu").ConfluencePageAri.create({siteId:i,pageId:n}).toString(),onDataReceived:C,skip:g}),(0,h.useEffect)(()=>()=>{t("eRpR8").NEW_ACCESS_REQUEST_INDICATOR_STATE_INSTANCE.resetSubscribers()},[])};function es(e){return e?.message===z}function eo(e){let{id:t}=e;return t.toString().startsWith(X)}function er(e){return e?.isPrimary}function ei(){}function ec(){t("eRpR8").NEW_ACCESS_REQUEST_INDICATOR_STATE_INSTANCE.resetSubscribers()}function el(){return ec}let ed=(0,O.isReactCompilerActiveV1)()?e=>{let t,n=(0,L.c)(6),{contentType:a,contentId:s,pageTitle:o,flags:r,onReviewRequestsClick:i}=e;return n[0]!==s||n[1]!==a||n[2]!==r||n[3]!==i||n[4]!==o?(t={onReviewRequests:i,contentId:s,contentType:a,pageTitle:o,flags:r},n[0]=s,n[1]=a,n[2]=r,n[3]=i,n[4]=o,n[5]=t):t=n[5],ea(t),null}:({contentType:e,contentId:t,pageTitle:n,flags:a,onReviewRequestsClick:s})=>(ea({onReviewRequests:s,contentId:t,contentType:e,pageTitle:n,flags:a}),null),eu=(0,t("7aRa9").withFlags)(ed);var ep=t("4adOe"),em=((I={}).BLOCKED_BY_CLASSIFICATION_LEVEL="BLOCKED_BY_CLASSIFICATION_LEVEL",I.BLOCKED_BY_CONTAINER_POLICY="BLOCKED_BY_CONTAINER_POLICY",I.BLOCKED_BY_ORG="BLOCKED_BY_ORG",I.BLOCKED_BY_PRODUCT="BLOCKED_BY_PRODUCT",I.BLOCKED_BY_SPACE="BLOCKED_BY_SPACE",I.OFF="OFF",I.ON="ON",I.SITE_BLOCKED="SITE_BLOCKED",I.SITE_DISABLED="SITE_DISABLED",I.SPACE_BLOCKED="SPACE_BLOCKED",I.SPACE_DISABLED="SPACE_DISABLED",I);let e_=(0,t("cgtv4").defineMessages)({restricted:{id:"share-and-restrict-dialog.controlled-share-button.tooltip.restricted",defaultMessage:"Restricted - Only specific people can access"},inherited:{id:"share-and-restrict-dialog.controlled-share-button.tooltip.inherited",defaultMessage:"Restricted by a parent - Anyone on the parent item can access"},draft:{id:"share-and-restrict-dialog.controlled-share-button.tooltip.draft",defaultMessage:"Open - Anyone in the space (with the link) can access"},openEdit:{id:"share-and-restrict-dialog.controlled-share-button.tooltip.openEdit",defaultMessage:"Open - Anyone in the space can edit"},openView:{id:"share-and-restrict-dialog.controlled-share-button.tooltip.openView",defaultMessage:"Open - Anyone in the space can view"},public:{id:"share-and-restrict-dialog.controlled-share-button.tooltip.public",defaultMessage:"Public - Anyone with the link can access"},error:{id:"share-and-restrict-dialog.controlled-share-button.tooltip.error",defaultMessage:"Access level failed to load"}}),eE=(e,t,n,a,s,o)=>a?["error",e_.error]:e?["public",e_.public]:n?["restricted",e_.restricted]:t?["restricted",e_.inherited]:s?["open",e_.draft]:o?["open",e_.openView]:["open",e_.openEdit],eg="This is a Standard/Premium feature. You are currently subscribed to the Free plan.",ef=(0,O.isReactCompilerActiveV1)()?(e,n,a)=>{let s,o,r,i,c,l,d,u,p=(0,L.c)(34),m=!!(0,t("9wGTI").fg)("confluence_frontend_usd_ssr")||n;p[0]!==e||p[1]!==m?(s={contentId:e,isContentTypePublicLinkEligible:m},p[0]=e,p[1]=m,p[2]=s):s=p[2],p[3]!==s?(o={variables:s,fetchPolicy:(0,t("9wGTI").fg)("confluence_frontend_usd_ssr")?"cache-and-network":"network-only",errorPolicy:"all"},p[3]=s,p[4]=o):o=p[4];let{data:_,loading:E,error:g,refetch:f}=(0,t("xQxzY").useQuery)(t("gyneS").ShareAndRestrictButtonQuery,o);p[5]!==g?(r=[],g?.message.includes(eg)?(0,t("7Sm4c").markErrorAsHandled)(g):g&&r.push(g),p[5]=g,p[6]=r):r=p[6];let S=!!_?.singleContent?.hasRestrictions,I=!!_?.singleContent?.hasInheritedRestrictions,A=!!_?.singleContent?.hasViewRestrictions,T=_?.singleContent?.title,R=!!m&&_?.publicLinkPage?.pageStatus===em.ON,C=!!r.length;p[7]!==I||p[8]!==S||p[9]!==A||p[10]!==R||p[11]!==a||p[12]!==C?(i=eE(R,I,A,C,a,S),p[7]=I,p[8]=S,p[9]=A,p[10]=R,p[11]=a,p[12]=C,p[13]=i):i=p[13];let[b,y]=i,{createAnalyticsEvent:D}=(0,t("inPa6").useAnalyticsEvents)();p[14]!==D||p[15]!==g?(c=()=>{g&&D({type:"sendOperationalEvent",data:{source:ep.SHARE_AND_RESTRICT_DIALOG_ANALYTICS_SOURCE,action:"errored",actionSubject:"shareAndRestrictButtonQuery",attributes:{message:g?.message,name:g?.name,stack:g?.stack,cause:g?.cause}}}).fire()},l=[g,D],p[14]=D,p[15]=g,p[16]=c,p[17]=l):(c=p[16],l=p[17]),(0,h.useEffect)(c,l),p[18]!==e||p[19]!==f||p[20]!==m?(d=()=>{f({contentId:e,isContentTypePublicLinkEligible:m})},p[18]=e,p[19]=f,p[20]=m,p[21]=d):d=p[21];let P=E&&_?.singleContent?.id!==e,k=r.length>0?r[0]:null;return p[22]!==I||p[23]!==S||p[24]!==A||p[25]!==b||p[26]!==R||p[27]!==a||p[28]!==T||p[29]!==d||p[30]!==P||p[31]!==k||p[32]!==y?(u={icon:b,tooltipMessage:y,refetch:d,isLoading:P,error:k,hasRestrictions:S,hasInheritedRestrictions:I,hasViewRestrictions:A,isPublicLinkOn:R,pageTitle:T,isUnpublishedDraft:a},p[22]=I,p[23]=S,p[24]=A,p[25]=b,p[26]=R,p[27]=a,p[28]=T,p[29]=d,p[30]=P,p[31]=k,p[32]=y,p[33]=u):u=p[33],u}:(e,n,a)=>{let s=!!(0,t("9wGTI").fg)("confluence_frontend_usd_ssr")||n,{data:o,loading:r,error:i,refetch:c}=(0,t("xQxzY").useQuery)(t("gyneS").ShareAndRestrictButtonQuery,{variables:{contentId:e,isContentTypePublicLinkEligible:s},fetchPolicy:(0,t("9wGTI").fg)("confluence_frontend_usd_ssr")?"cache-and-network":"network-only",errorPolicy:"all"}),l=[];i?.message.includes(eg)?(0,t("7Sm4c").markErrorAsHandled)(i):i&&l.push(i);let d=!!o?.singleContent?.hasRestrictions,u=!!o?.singleContent?.hasInheritedRestrictions,p=!!o?.singleContent?.hasViewRestrictions,m=o?.singleContent?.title,_=!!s&&o?.publicLinkPage?.pageStatus===em.ON,[E,g]=eE(_,u,p,!!l.length,a,d),{createAnalyticsEvent:f}=(0,t("inPa6").useAnalyticsEvents)();return(0,h.useEffect)(()=>{i&&f({type:"sendOperationalEvent",data:{source:ep.SHARE_AND_RESTRICT_DIALOG_ANALYTICS_SOURCE,action:"errored",actionSubject:"shareAndRestrictButtonQuery",attributes:{message:i?.message,name:i?.name,stack:i?.stack,cause:i?.cause}}}).fire()},[i,f]),{icon:E,tooltipMessage:g,refetch:()=>{c({contentId:e,isContentTypePublicLinkEligible:s})},isLoading:r&&o?.singleContent?.id!==e,error:l.length>0?l[0]:null,hasRestrictions:d,hasInheritedRestrictions:u,hasViewRestrictions:p,isPublicLinkOn:_,pageTitle:m,isUnpublishedDraft:a}},eS=(0,t("1P1Tu").createStore)({initialState:{hasClickedShareButton:!1},actions:{setHasClickedShareButton:()=>({setState:e})=>{e({hasClickedShareButton:!0})},resetHasClickedShareButton:()=>({setState:e})=>{e({hasClickedShareButton:!1})}},name:"ShareAndRestrictButtonStore"});(0,t("9zUhf").createStateHook)(eS);let eI=(0,t("9zUhf").createActionsHook)(eS),eh="confluence_first_active",eA=new Date("2025-03-24"),eT=(0,O.isReactCompilerActiveV1)()?()=>{let e,n,a,s,o,r,i=(0,L.c)(14),{cloudId:c,userId:l}=(0,t("bQm3c").useSessionData)(),d=l??"";i[0]!==c||i[1]!==d?(e={cloudId:c,userId:d},i[0]=c,i[1]=d,i[2]=e):e=i[2];let u=!l||!c;i[3]!==e||i[4]!==u?(n={variables:e,skip:u},i[3]=e,i[4]=u,i[5]=n):n=i[5];let{data:p,loading:m,error:_}=(0,t("gqypm").useExperimentalSiteUserPersonalization)(n);if(m||_){let e;return i[6]===Symbol.for("react.memo_cache_sentinel")?(e={isNewUser:!0},i[6]=e):e=i[6],e}let E=p?.experimentalSiteUserPersonalization?.attributes;if(i[7]!==E?(a=new Date(E?.find(eR)?.value??""),s=isNaN,o=a.getTime(),i[7]=E,i[8]=a,i[9]=s,i[10]=o):(a=i[8],s=i[9],o=i[10]),s(o)){let e;return i[11]===Symbol.for("react.memo_cache_sentinel")?(e={isNewUser:!0},i[11]=e):e=i[11],e}let g=a>=eA;return i[12]!==g?(r={isNewUser:g},i[12]=g,i[13]=r):r=i[13],r}:()=>{let{cloudId:e,userId:n}=(0,t("bQm3c").useSessionData)(),{data:a,loading:s,error:o}=(0,t("gqypm").useExperimentalSiteUserPersonalization)({variables:{cloudId:e,userId:n??""},skip:!n||!e});if(s||o)return{isNewUser:!0};let r=a?.experimentalSiteUserPersonalization?.attributes,i=new Date(r?.find(({name:e})=>e===eh)?.value??"");return isNaN(i.getTime())?{isNewUser:!0}:{isNewUser:i>=eA}};function eR(e){let{name:t}=e;return t===eh}var eC=t("grWYF");let eb=["page","whiteboard"],ey=(0,t("cgtv4").defineMessages)({shareButtonSpotlightHeading:{id:"share-and-restrict-dialog.spotlight.heading",defaultMessage:"Restrictions have moved"},shareButtonSpotlightText:{id:"share-and-restrict-dialog.spotlight.text",defaultMessage:"Now you can share and restrict access to your content in one place."},shareButtonSpotlightLearnMore:{id:"share-and-restrict-dialog.spotlight.learn-more",defaultMessage:"Learn more"},shareButtonSpotlightOk:{id:"share-and-restrict-dialog.spotlight.ok",defaultMessage:"OK"},shareButtonChangeBoardingFlagHeading:{id:"share-and-restrict-dialog.flag.heading",defaultMessage:"Your lock icon has moved"},shareButtonChangeBoardingFlagDescription:{id:"share-and-restrict-dialog.flag.message",defaultMessage:"The lock icon (where you manage access to your content) is now in the Share button."},shareButtonChangeBoardingFlagAction:{id:"share-and-restrict-dialog.flag.action",defaultMessage:"Show me"}}),eD=(0,t("dPJCf").createSingleQueryParamHook)("accountId"),eP=(0,t("dPJCf").createSingleQueryParamHook)("username"),ek=(0,t("dPJCf").createSingleQueryParamHook)("grantAccess"),ev=(0,t("dPJCf").createSingleQueryParamHook)("accessType"),eN=e=>e===t("cD1qu").PageMode.LIVE?t("cD1qu").PageMode.VIEW:e,eO="share-restrict-button-changeboarding-flag",eL=(0,t("7aRa9").withFlags)(({contentId:n,shareeAction:a="view",allowRestrictions:s=!0,contentType:o,contentSubType:r,isUnpublishedDraft:i=!1,flags:c,isShareAndRestrictButtonDisabled:l=!1,isCopyLinkButtonDisabled:d=!1,...u})=>{let{formatMessage:p}=(0,t("8C5kA").default)(),[m,_]=(0,h.useState)(!1),E=(0,h.useContext)(t("1kHsc").ExperienceTrackerContext),{edition:g}=(0,t("bQm3c").useSessionData)(),{createAnalyticsEvent:f}=(0,t("inPa6").useAnalyticsEvents)(),[S,I]=(0,h.useState)(!1),C=eD(),b=eP(),y=ek(),O=ev(),L=(0,t("e4o8D").useRenderServerPlaceholder)(),[{isCollabOffline:x}]=(0,t("kM55L").useCollabNetworkStatus)(),w=x&&(0,t("6mKj3").expVal)("platform_editor_offline_editing_web","isEnabled",!1)&&!(0,t("9wGTI").fg)("platform_editor_offline_editing_wrapper_override"),{setHasClickedShareButton:M,resetHasClickedShareButton:U}=eI(),F=(0,h.useRef)(null),q=y&&C||b,B=eb.includes(o),[{isEditMode:V}]=(0,t("efvKr").useLivePageMode)(),j=(0,t("de2j9").useIsEditorPage)(),{isSuperAdmin:G}=(0,t("lfFzM").useIsSuperAdmin)(),{icon:H,isLoading:Q,error:K,tooltipMessage:$,refetch:W,hasInheritedRestrictions:Y,hasRestrictions:z,hasViewRestrictions:X,isPublicLinkOn:J,pageTitle:Z}=ef(n,B,i),{isNewUser:ee}=eT(),{setQueryParams:et}=(0,t("dPJCf").useRouteActions)(),en=(0,h.useCallback)(()=>{et({grantAccess:void 0,accessType:void 0,accountId:void 0,username:void 0},!0)},[et]),ea=(0,h.useCallback)(()=>{L||(f({type:"sendUIEvent",data:{source:ep.SHARE_AND_RESTRICT_DIALOG_ANALYTICS_SOURCE,actionSubject:"button",actionSubjectId:"ShareAndRestrictButton",action:"clicked",attributes:{contentId:n,contentSubType:r,isLivePage:"live"===r,isDraft:i,contentType:o,edition:g,hasInheritedRestrictions:Y,hasRestrictions:z,hasViewRestrictions:X,isPublicLinkOn:J,pageMode:a}}}).fire(),W(),_(!0),M(),E.start({name:t("irVI7").SHARE_AND_RESTRICT_DIALOG_LOAD_EXPERIENCE,timeout:t("aJPUt").ExperienceTimeout.DEFAULT}))},[f,n,r,o,g,Y,z,X,i,J,W,a,E,L,M]);(0,h.useEffect)(()=>{U()},[U]),(0,h.useEffect)(()=>{f({type:"sendScreenEvent",data:{name:"ShareAndRestrictButton",attributes:{contentId:n,contentType:o,contentSubType:r,isLivePage:"live"===r,isDraft:i,pageMode:a}}}).fire()},[f,n,o,r,i,a]),(0,h.useEffect)(()=>{Q||K?!Q&&K&&E.fail({error:K,name:t("irVI7").SHARE_AND_RESTRICT_BUTTON_LOAD_EXPERIENCE}):E.succeed({name:t("irVI7").SHARE_AND_RESTRICT_BUTTON_LOAD_EXPERIENCE})},[K,Q,E]),(0,h.useEffect)(()=>{g!==t("d9tcB").ConfluenceEdition.FREE&&(0,t("6mKj3").manuallyLogExpExposure)("confluence_contextual_ask_to_edit")},[g]);let{data:es,loading:eo,error:er}=(0,t("ivb8S").useGetOnboardingState)(t("eoU1C").ONBOARDING_SHARE_AND_RESTRICT_DIALOG.DIALOG_SPOTLIGHT_SEEN),{setOnboardingState:ei}=(0,t("ivb8S").useSetOnboardingState)();(0,h.useEffect)(()=>{if(!es||eo||er||K)er&&!eo&&f({type:"sendTrackEvent",data:{source:ep.SHARE_AND_RESTRICT_DIALOG_ANALYTICS_SOURCE,actionSubject:"ShareAndRestrictButton",action:"spotlight failed",attributes:{contentId:n,contentSubType:r,isLivePage:"live"===r,contentType:o,edition:g,hasInheritedRestrictions:Y,hasRestrictions:z,hasViewRestrictions:X,isPublicLinkOn:J,pageMode:a}}}).fire();else{let s=es?.onboardingState?.find(e=>e.key===t("eoU1C").ONBOARDING_SHARE_AND_RESTRICT_DIALOG.DIALOG_SPOTLIGHT_SEEN)?.value==="true";if(!("live"==r||ee)&&!s){let s=()=>ei({key:t("eoU1C").ONBOARDING_SHARE_AND_RESTRICT_DIALOG.DIALOG_SPOTLIGHT_SEEN,value:"true"}),i=()=>{s(),f({type:"sendTrackEvent",data:{source:ep.SHARE_AND_RESTRICT_DIALOG_ANALYTICS_SOURCE,actionSubject:"ShareAndRestrictButton",action:"flag dismissed",attributes:{contentId:n,contentSubType:r,isLivePage:!1,contentType:o,edition:g,hasInheritedRestrictions:Y,hasRestrictions:z,hasViewRestrictions:X,isPublicLinkOn:J,pageMode:a}}}).fire()},l=()=>{I(!0),f({type:"sendTrackEvent",data:{source:ep.SHARE_AND_RESTRICT_DIALOG_ANALYTICS_SOURCE,actionSubject:"ShareAndRestrictButton",action:"spotlight shown",attributes:{contentId:n,contentSubType:r,isLivePage:!1,contentType:o,edition:g,hasInheritedRestrictions:Y,hasRestrictions:z,hasViewRestrictions:X,isPublicLinkOn:J,pageMode:a}}}).fire(),c.hideFlag(eO),s()};(async()=>{await c.showFlag({id:eO,type:"custom",title:p(ey.shareButtonChangeBoardingFlagHeading),description:p(ey.shareButtonChangeBoardingFlagDescription),actions:[{content:p(ey.shareButtonChangeBoardingFlagAction),onClick:l}],customIcon:e(h).createElement(e(t("h1ewt")),{label:""}),onClose:i,close:"auto"}),f({type:"sendTrackEvent",data:{source:ep.SHARE_AND_RESTRICT_DIALOG_ANALYTICS_SOURCE,actionSubject:"ShareAndRestrictButton",action:"flag shown",attributes:{contentId:n,contentSubType:r,isLivePage:!1,contentType:o,edition:g,hasInheritedRestrictions:Y,hasRestrictions:z,hasViewRestrictions:X,isPublicLinkOn:J,pageMode:a}}}).fire()})()}}},[es,eo,er,K]);let ec=()=>{ei({key:t("eoU1C").ONBOARDING_SHARE_AND_RESTRICT_DIALOG.DIALOG_SPOTLIGHT_SEEN,value:"true"}),I(!1)},{Spotlight:el}=(0,t("lsxnT").useChoreographerAssets)(),ed=()=>{let n=e(h).createElement(t("d35qt").NewAccessRequestIndicator,{top:4,right:"public"===H?54:55},e(h).createElement(t("Qy97i").ControlledShareButton,{tooltipMessage:$,icon:H,onClick:ea,isDisabled:l||w,focusRef:F}));return(0,t("9wGTI").fg)("twcg-392_export_jira_context_to_page_killswitch")?e(h).createElement(N.ExperimentExportJiraContextToPageNudgeSpotlightStepWrapper,{stepIndex:1},n):n},em=eN((0,t("aSsfA").useGetPageMode)()),e_=(0,t("cLo2u").useSpaceKey)()??"",{shouldShowGrantAccess:eE,clearGrantAccessQueryParams:eg}=D(),[eS,eh]=(0,h.useState)(eE&&"FREE"!==g&&(0,t("9wGTI").fg)("confluence_frontend_stateful_access_requests")?"accessRequests":void 0);(0,h.useLayoutEffect)(()=>{eS&&_(!0)},[eS]);let eA=(0,h.useCallback)(()=>{eh("accessRequests")},[]),eR=(0,h.useCallback)(()=>{eh(void 0),eg()},[eg]),{isEligibleForShareNudge:eL}=(0,t("bvlKt").useShareNudgeEligible)(),ex="live"===r&&eL,ew=e(h).createElement(t("9gE7g").SplitButton,null,e(h).createElement(e(h).Fragment,null,Q?e(h).createElement(t("lT8a1").ShareAndRestrictButtonPlaceholder,null):e(h).createElement(e(h).Fragment,null,e(h).createElement(t("5izcQ").default,{name:"share-button-spotlight-target"},e(h).createElement(t("6cnUO").default,null,e(h).createElement(t("5izcQ").default,{name:"shareAndRestrictButton"},e(h).createElement(A.RequestAccessPopupComponent,{contentId:n}),(0,t("9wGTI").fg)("confluence_frontend_stateful_access_requests")?ed():(0,t("9wGTI").fg)("confluence_frontend_grant_access_flag")?e(h).createElement(e(h).Fragment,null,e(h).createElement(R.GrantAccessFlagLoader,{contentId:n}),ed()):q?e(h).createElement(T.GrantAccessDialogLoader,{accessType:"edit"===O?"edit":"view",accountId:C||b||"",buttonPlaceholder:e(h).createElement(t("lT8a1").ShareAndRestrictButtonPlaceholder,null),contentId:n,isOpen:!L,onActionClick:en,shouldSSRGrantAccessRestrictions:(0,t("9wGTI").fg)("confluence_frontend_usd_ssr")},ed()):e(h).createElement(e(h).Fragment,null,ed())),e(h).createElement(t("2Fndw").default,null,S&&e(h).createElement(el,{actions:[{onClick:ec,text:p(ey.shareButtonSpotlightOk)},{onClick:()=>{ec(),window.open(ep.SAC_CONTENT_PERMS_MANAGEMENT_DOCUMENTATION,"_blank","noreferrer")},text:p(ey.shareButtonSpotlightLearnMore)}],heading:p(ey.shareButtonSpotlightHeading),target:"shareAndRestrictButton",key:"shareAndRestrict-spotlight",targetRadius:3,targetBgColor:"var(--ds-surface, #FFFFFF)",dialogPlacement:"bottom right",dialogWidth:275},e(h).createElement(t("gtD4K").default,{values:{bold:t=>e(h).createElement("b",null,t)},...ey.shareButtonSpotlightText}))))),e(h).createElement(eC.OnboardingPagePermissionsSpotlightLoader,null),e(h).createElement(k.GeneralShortcutListener,{deprecatedAccelerator:V||j?void 0:t("gnkil").SHARE_PAGE_SHORTCUT,accelerator:t("gnkil").UNIVERSAL_SHARE_PAGE_SHORTCUT,listener:ea})),!Q&&e(h).createElement(P.PageSegmentLoadEnd,{metric:t("gw4Bt").SHARE_BUTTON_PAGE_SEGMENT_LOAD,key:n,customData:{shareButtonType:"ShareAndRestrictButton"}})),e(h).createElement(t("hkzol").CopyLinkButton,{contentId:n,contentType:o,pageMode:em,spaceKey:e_,isDisabled:d,...u}));return e(h).createElement(e(h).Fragment,null,e(h).createElement("div",{"data-vc":"share-restrict-and-copy-button"},ex?e(h).createElement(v,{onShareAction:ea},ew):ew),m&&e(h).createElement(ep.Controller,{contentId:n,contentType:o,contentSubType:r,allowRestrictions:s,pageTitle:Z,pageMode:a,refetchButtonData:W,onClose:()=>{_(!1)},isUnpublishedDraft:i,focusRef:F,hasRestrictions:z,hasInheritedRestrictions:Y,hasViewRestrictions:X,isSuperAdmin:G,initialDialog:eS,onInitialDialogOpen:eR}),(0,t("6mKj3").expValEquals)("cc_fe_realtime_access_requests","isEnabled",!0)&&e(h).createElement(eu,{contentId:n,contentType:o,pageTitle:Z,onReviewRequestsClick:eA}))});n.exports.i18n=ey,n.exports.ShareRestrictAndCopyCoordinator=eL}),n("aJPUt",function(e,t){var n,a=((n={})[n.DEFAULT=6e4]="DEFAULT",n[n.CREATE_CONTENT=3e4]="CREATE_CONTENT",n[n.CREATE_DIALOG_LOAD=6e4]="CREATE_DIALOG_LOAD",n[n.MACRO_LOAD=6e4]="MACRO_LOAD",n[n.CREATE_COMMENT_PUBLISH=15e3]="CREATE_COMMENT_PUBLISH",n[n.EDITOR_LOAD=25e3]="EDITOR_LOAD",n[n.EDITOR_PUBLISH=6e4]="EDITOR_PUBLISH",n[n.LIVE_PAGE_PUBLISH=3e4]="LIVE_PAGE_PUBLISH",n[n.TEMPLATE_EDITOR_LOAD=9e4]="TEMPLATE_EDITOR_LOAD",n[n.TEMPLATE_EDITOR_PUBLISH=6e4]="TEMPLATE_EDITOR_PUBLISH",n[n.IN_EDITOR_TEMPLATE_PANEL_LOAD=2e4]="IN_EDITOR_TEMPLATE_PANEL_LOAD",n[n.IN_EDITOR_TEMPLATES_UPDATE_CONTENT_REFRESH_EDITOR=9e4]="IN_EDITOR_TEMPLATES_UPDATE_CONTENT_REFRESH_EDITOR",n[n.HOME=2e4]="HOME",n[n.NAVIGATION_LOAD=3e4]="NAVIGATION_LOAD",n[n.PAGE_LOAD=6e4]="PAGE_LOAD",n[n.SELECT_INLINE_COMMMENT=3e4]="SELECT_INLINE_COMMMENT",n[n.VIEW_INLINE_COMMENT=3e4]="VIEW_INLINE_COMMENT",n[n.SPACE_DIRECTORY=6e4]="SPACE_DIRECTORY",n[n.SPACE_VIEWS=2e4]="SPACE_VIEWS",n[n.TEMPLATE_GALLERY_TEMPLATE_DETAIL_UPDATE=2e4]="TEMPLATE_GALLERY_TEMPLATE_DETAIL_UPDATE",n[n.TEMPLATE_PREVIEW=2e4]="TEMPLATE_PREVIEW",n[n.TEMPLATE_SUGGESTIONS=2e4]="TEMPLATE_SUGGESTIONS",n[n.LOOM_PAGE_HEADER_CONTENT_INSERTION=2e4]="LOOM_PAGE_HEADER_CONTENT_INSERTION",n);e.exports.ExperienceTimeout=a}),n("7aRa9",function(n,a){var s=t("42omo"),o=t("T1bCI");n.exports.withFlags=function(n){var a;return(a=class extends s.Component{render(){return e(s).createElement(o.Subscribe,{to:[t("gqqjz").FlagsStateContainer]},t=>e(s).createElement(n,{...this.props,flags:t}))}}).displayName=`withFlags(${n.displayName||n.name})`,a}}),n("6DT7W",function(e,n){let a=(0,t("jmjWc").LoadableAfterPaint)({__loadable_id__:"C9H24",name:"RequestAccessPopupComponent",loader:async()=>(await t("aMA9x")).RequestAccessPopupComponent});e.exports.RequestAccessPopupComponent=a}),n("aMA9x",function(e,n){let a=t("4mJKd")(5);e.exports=Promise.all([a("2t3HP"),a("coJiW"),a("h4Nf7"),a("lXGg9"),a("hy3sK"),a("lk4cE")]).then(()=>t("1hgMC"))}),n("b8XTE",function(n,a){var s=t("42omo"),o=t("a4TK8"),r=t("aJv6Q");let i=()=>{},c=(0,s.memo)(({customData:e={},metric:n,onComplete:a=i,stopTime:o,timing:r,augmentCustomDataAfterComplete:c})=>{let l=(0,s.useRef)(o),d=(0,s.useRef)(e),u=(0,s.useRef)(c);l.current=o,d.current=e,u.current=c;let p=(0,s.useCallback)(()=>{if(n){let e;a(),e=u.current?u.current(d.current):d.current;let{route:s}=n.getData();(s===t("1NBp8").VIEW_PAGE.name||s===t("1NBp8").VIEW_BLOG.name)&&(e.viewTransitionSource=(0,t("lXYVJ").getViewTransitionSource)()),t("3kTfj").browserMetrics.getPageLoadMetric().mark(`${t("3YpC9").PAGE_SEGMENT_MARK_PREFIX_END}:${n.key}`),n.stop({customData:{...e,previousRoute:t("6VdZc").browserMetricsState.previousRoute,previousContentId:t("6VdZc").browserMetricsState.previousContentId,pageLoadInfo:(0,t("78QFu").getUniquePageLoadId)()},stopTime:l.current})}},[n,a]);return(0,t("N1nBh").usePerformanceAction)(p,r),null},e(o)),l=(0,r.withTransparentErrorBoundary)({attribution:t("3IBnw").Attribution.BACKBONE})(c);n.exports.PageSegmentLoadEnd=l}),n("lXYVJ",function(e,n){let a;e.exports.setViewTransitionSource=e=>{a=e},e.exports.getViewTransitionSource=()=>a||t("1C3B1").UNKNOWN,e.exports.resetViewTransitionSource=()=>{a=void 0}}),n("1C3B1",function(e,t){e.exports.PAGE_TREE_ITEM_CLICK="PAGE_TREE_ITEM_CLICK",e.exports.RECENT_DROPDOWN_ITEM_CLICK="RECENT_DROPDOWN_ITEM_CLICK",e.exports.EDITOR_UPDATE_BUTTON_CLICK="EDITOR_UPDATE_BUTTON_CLICK",e.exports.EDITOR_UPDATE_SHORTCUT_KEY_PRESS="EDITOR_UPDATE_SHORTCUT_KEY_PRESS",e.exports.EDITOR_UPDATE_BUTTON_IN_MODAL_CLICK="EDITOR_UPDATE_BUTTON_IN_MODAL_CLICK",e.exports.EDITOR_UPDATE_SHORTCUT_IN_MODAL_PRESS="EDITOR_UPDATE_SHORTCUT_IN_MODAL_PRESS",e.exports.EDITOR_CLOSE_BUTTON_CLICK="EDITOR_CLOSE_BUTTON_CLICK",e.exports.RECENT_WORK_ITEM_ON_HOME_PAGE_CLICK="RECENT_WORK_ITEM_ON_HOME_PAGE_CLICK",e.exports.DISCOVER_ITEM_ON_HOME_PAGE_CLICK="DISCOVER_ITEM_ON_HOME_PAGE_CLICK",e.exports.UNKNOWN="UNKNOWN"}),n("6GD8y",function(e,n){let a=(0,t("jmjWc").LoadableBackground)({__loadable_id__:"pU1rv",name:"GeneralShortcutListener",loader:async()=>(await t("9Q4ck")).GeneralShortcutListener});e.exports.GeneralShortcutListener=a}),n("9Q4ck",function(e,n){let a=t("4mJKd")(5);e.exports=Promise.all([a("fZt2F"),a("hhss7"),a("kpHRm")]).then(()=>t("3w3bV"))}),n("de2j9",function(e,n){var a=t("3u0dr");let s={selector:e=>e===t("1NBp8").EDIT_PAGE_V2.name||e===t("1NBp8").EDIT_BLOG_V2.name||e===t("1NBp8").EDIT_PAGE_EMBED.name||e===t("1NBp8").COMPANY_HUB_EDIT.name||e===t("1NBp8").HUB_EDIT.name||e===t("1NBp8").EDIT_PAGE_SMART_CREATE.name},o=((0,a.isReactCompilerActiveV1)(),()=>(0,t("dPJCf").useRouteName)(s));e.exports.useIsEditorPage=o}),n("e4o8D",function(e,n){var a=t("3u0dr"),s=t("frIzR"),o=t("42omo");let r=(0,a.isReactCompilerActiveV1)()?e=>{let t,n,a=(0,s.c)(2),r=!1===window.__SSR_RENDERED__,[i,c]=(0,o.useState)(void 0!==e&&e?!r:window?.__HYDRATABLE__&&!r||!1);return a[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{c(!1)},n=[],a[0]=t,a[1]=n):(t=a[0],n=a[1]),(0,o.useEffect)(t,n),i}:(e=!1)=>{let t=!1===window.__SSR_RENDERED__,[n,a]=(0,o.useState)(e?!t:window?.__HYDRATABLE__&&!t||!1);return(0,o.useEffect)(()=>{a(!1)},[]),n};e.exports.useRenderServerPlaceholder=r}),n("aSsfA",function(e,n){let a=(0,t("3u0dr").isReactCompilerActiveV1)()?()=>{let e=(0,t("3jwuS").useIsCurrentPageLive)(),n=(0,t("de2j9").useIsEditorPage)(),a=t("cD1qu").PageMode.VIEW;return e?a=t("cD1qu").PageMode.LIVE:n&&(a=t("cD1qu").PageMode.EDIT),a}:()=>{let e=(0,t("3jwuS").useIsCurrentPageLive)(),n=(0,t("de2j9").useIsEditorPage)(),a=t("cD1qu").PageMode.VIEW;return e?a=t("cD1qu").PageMode.LIVE:n&&(a=t("cD1qu").PageMode.EDIT),a};e.exports.useGetPageMode=a}),n("lfFzM",function(n,a){let s=()=>{let e=(0,t("6jrkJ").getSuperAdminClaim)(),{loading:n,error:a,data:s}=(0,t("xQxzY").useQuery)(t("kOBmw").IsSuperAdmin,{skip:!e});return e?{loading:n,error:a,isSuperAdmin:!!s?.user?.confluence?.roles?.isSuperAdmin}:{loading:!1,isSuperAdmin:!1}},o=({children:e})=>{let{isSuperAdmin:t,loading:n,error:a}=s();return e({loading:n,error:a,isSuperAdmin:t})};o.propTypes={children:e(t("4xcIM")).func.isRequired},n.exports.useIsSuperAdmin=s,n.exports.AdminKeyQuery=o}),n("kOBmw",function(e,n){let a=(0,t("eSUdr").default)`query IsSuperAdminQuery{user:confluence_atlassianUser(current:true){id confluence{roles{isSuperAdmin}}}}`;e.exports.IsSuperAdmin=a}),n("bvlKt",function(e,n){var a=t("42omo");e.exports.useShareNudgeEligible=()=>{let{setShouldShowSpotlight:e}=(0,t("bEM4u").useShareNudgeSpotlightActions)(),{accessStatus:n}=(0,t("bQm3c").useSessionData)(),{setOnboardingState:s}=(0,t("ivb8S").useSetOnboardingState)(),o=n===t("d9tcB").AccessStatus.LICENSED_ADMIN_ACCESS||n===t("d9tcB").AccessStatus.LICENSED_USE_ACCESS,{data:r,loading:i,error:c}=(0,t("ivb8S").useGetOnboardingState)([...Object.values(t("gxTpP").CONTEXTUAL_INVITE_NUDGE),...Object.values(t("9DBk6").LIVE_PAGE_NUDGE)],!(0,t("6mKj3").UNSAFE_expValNoExposure)("cfind-4521-live-docs-spotlight-nudge","enrolled",!1)||!o),{wasLivePageNudgeSeen:l,shareNudgeSpotlightEligible:d}=(0,t("ivb8S").deserializeState)(r),u=!!i;c&&(0,t("1uFM6").isUnauthorizedError)(c)&&(0,t("7Sm4c").markErrorAsHandled)(c);let p=!u&&!c&&d,m=(0,a.useCallback)(()=>{s({key:t("9DBk6").LIVE_PAGE_NUDGE.LIVE_PAGE_CONTEXTUAL_NUDGE_ELIGIBLE,value:"true"})},[s]),_=(0,a.useRef)(0),E=(0,a.useCallback)(()=>{p&&!l&&(_.current++,_.current>1&&e(!0))},[p,l,e]);return{isLoading:u,isEligibleForShareNudge:p,hasSeenSpotlight:()=>{s({key:t("9DBk6").LIVE_PAGE_NUDGE.LIVE_PAGE_CONTEXTUAL_NUDGE_SEEN,value:"true"})},setLiveDocsNudgeEligible:m,showShareNudgeSpotlight:E}}}),n("bEM4u",function(e,n){let a=(0,t("1P1Tu").createStore)({initialState:{shouldShowSpotlight:!1},actions:{setShouldShowSpotlight:e=>({setState:t})=>{t({shouldShowSpotlight:e})}},name:"share-nudge-spotlight-store"}),s=(0,t("9zUhf").createHook)(a),o=(0,t("9zUhf").createActionsHook)(a);e.exports.useShareNudgeSpotlightStore=s,e.exports.useShareNudgeSpotlightActions=o}),n("6NJY6",function(e,n){e.exports=t("4mJKd")(5)("hKgit").then(()=>t("OfORc"))}),n("i9VoI",function(e,n){var a=t("42omo");e.exports.useSubscriptionEvent=({onDataReceived:e,skip:n=!1,contentId:s,contentType:o,delta:r,subscriberId:i})=>{let c=(0,t("6UYek").useSubscriptionsDispatchContext)(),{setContentId:l,setContentType:d,removeSubscriber:u,addSubscriber:p}=c||{};return(0,a.useEffect)(()=>{if(n||!p||!s||!o||!u)return;l?.(s),d?.(o);let t=p({delta:r,subscriberId:i,onSubscriptionData:e});return()=>{u({delta:r,subscriberId:t})}},[n,c,s,o,l,d,p,u,i,r,e]),null}}),n("6UYek",function(n,a){var s=t("42omo"),o=t("kyKWe");let r=(0,s.createContext)(void 0),i=(0,s.createContext)(void 0),c=["401","Failed to fetch","Load Failed","Network error","GraphQL error: undefined","Auth category: UNAUTHENTICATED is not allowed in service confluence_monolith_subscriptions"];n.exports.SubscriptionsContextProvider=({children:n})=>{let[a,l]=(0,s.useState)(null),[d,u]=(0,s.useState)(null),[p,m]=(0,s.useState)(null),_=e(s).useRef({}),E=(0,s.useCallback)(({subscriberId:t,onSubscriptionData:n,delta:a})=>{let s=_.current,r=`${t}-${e(o)()}`,i=s?.[a]||[];return s[a]=[...i,{id:r,onSubscriptionData:n}],r},[]),g=(0,s.useCallback)(({delta:e,subscriberId:t})=>{let n=_.current;n.hasOwnProperty(e)&&(n[e]=n[e].filter(e=>e.id!==t),0===n[e].length&&(delete n[e],0===Object.keys(n).length&&(u(null),m(null))))},[u,m]),f=(0,s.useCallback)((e,n)=>{let a=_.current;e.forEach(e=>{a.hasOwnProperty(e)&&(a?.[e]).forEach(a=>{let s=a?.onSubscriptionData?.(e,n);s instanceof Promise&&Promise.resolve(s).catch(e=>{(0,t("5ZqQS").getMonitoringClient)().submitError(e,{attribution:"page-experiences"})})})})},[]),{id:S,onSubscriptionComplete:I,extensions:h,onSubscriptionData:A}=(0,t("3vc4U").useSubscriptionValues)({contentType:p,contentId:d}),{accessStatus:T}=(0,t("bQm3c").useSessionData)(),R=T===t("d9tcB").AccessStatus.ANONYMOUS_ACCESS,{error:C}=(0,t("7hXu9").useSubscription)((0,t("eSUdr").default)`subscription SubscriptionsContextProviderSubscription($id:ID!){confluence_onContentModified(id:$id){type id accountId __typename _deltas contentStateUpdated{key value version __typename}emojiTitleUpdated{key value version __typename}coverPictureUpdated{key value version __typename}pageTitlePropertyUpdated{key value version __typename}coverPictureDeleted{key __typename}emojiTitleDeleted{key __typename}contentStateDeleted{key __typename}coverPictureWidthUpdated{coverPictureWidth __typename}pageBlogified{spaceKey spaceName blogTitle converterDisplayName __typename}embedUpdated{product isBlankStateUpdate __typename}pageMigrated{fabricEligibility __typename}contentRestrictionUpdated{contentId __typename}pageMoved{oldSpaceKey newSpaceKey oldParentId oldPosition newSpaceAlias oldSpaceAlias __typename}pageUpdated{__typename trigger confVersion}contentUpdatedWithTemplate{spaceKey subtype __typename}inlineCommentCreated{commentId inlineCommentType adfBodyContent __typename markerRef}rendererInlineCommentCreated{__typename commentId adfBodyContent inlineCommentType markerRef publishVersionNumber step{from to pos mark{attrs{annotationType __typename}__typename}__typename}}editorInlineCommentCreated{adfBodyContent commentId inlineCommentType markerRef __typename}inlineCommentUpdated{commentId markerRef __typename}inlineCommentDeleted{commentId inlineCommentType markerRef __typename}inlineCommentResolved{commentId inlineResolveProperties{isDangling resolved resolvedByDangling resolvedFriendlyDate resolvedTime resolvedUser __typename}inlineText markerRef replies __typename}inlineCommentUnresolved{commentId markerRef __typename}inlineCommentReattached{commentId __typename markerRef publishVersionNumber step{from mark{attrs{__typename annotationType}__typename}__typename}}commentCreated{__typename adfBodyContent commentId pageCommentType}commentUpdated{__typename commentId}commentDeleted{__typename commentId}commentResolved{__typename adfBodyContent commentId pageCommentType replies}commentReopened{__typename commentId}schedulePublished{publishTime eventType confVersion __typename}contentAccessRequested{contentId __typename}contentAccessDecisionMade{contentId decision __typename}}}`,{variables:{id:S,__extensions:h},onSubscriptionComplete:I,onSubscriptionData(e){A(e);let{subscriptionData:t}=e;if(!t||!t.data)return;let n=t?.data?.confluence_onContentModified?._deltas,a=t?.data?.confluence_onContentModified;n&&Array.isArray(n)&&n.length>0&&a&&f(n,a),l(t?.data?.confluence_onContentModified??null)},skip:!S||R||!(0,t("9wGTI").fg)("confluence_enable_subscriptions-context-provider"),client:(0,t("gKr8t").getAGGClient)()});(0,s.useEffect)(()=>{if(C){let e=C?.message||C?.errors?.[0]?.message||C?.graphQLErrors?.[0]?.message||C?.graphQLErrors?.[0]?.originalError?.message||C?.graphQLErrors?.[0]?.extensions?.data?.errors?.[0]?.message||C?.graphQLErrors?.[0]?.extensions?.message,n=C?.errors?.[0]?.extensions?.statusCode,a=c.some(e=>C?.message.includes(e))||!e;if(403!==n&&!a){let n=Error(`Subscription Error - :${e}`);(0,t("fJlJm").setContentErrorAttributes)(n,{objectId:d,objectType:p}),(0,t("5ZqQS").getMonitoringClient)().submitError(n,{attribution:"page-experiences"})}(0,t("7Sm4c").markErrorAsHandled)(C)}},[C,d,p]);let b=e(s).useMemo(()=>({contentModified:a,error:C}),[a,C]),y=e(s).useMemo(()=>({setContentType:m,setContentId:u,addSubscriber:E,removeSubscriber:g}),[m,u,E,g]);return(0,t("9wGTI").fg)("confluence_enable_subscriptions-context-provider")?e(s).createElement(r.Provider,{value:b},e(s).createElement(i.Provider,{value:y},n)):e(s).createElement(e(s).Fragment,null,n)},n.exports.useSubscriptionsContext=()=>(0,s.useContext)(r),n.exports.useSubscriptionsDispatchContext=()=>(0,s.useContext)(i)}),n("3vc4U",function(e,n){var a=t("42omo");e.exports.useSubscriptionValues=({contentId:e,contentType:n,replayCap:s})=>{let{activationId:o,cloudId:r}=(0,t("bQm3c").useSessionData)(),i=(0,a.useRef)(Math.floor(new Date().getTime()/1e3)),[c,l]=(0,a.useState)(0),{createAnalyticsEvent:d}=(0,t("inPa6").useAnalyticsEvents)(),u=(0,a.useCallback)(()=>{l(c+1)},[c,l]),p=(0,a.useCallback)(t=>{i.current=t?.extensions?.sequenceNumber??Math.floor(new Date().getTime()/1e3),d({type:"sendOperationalEvent",data:{action:"received",actionSubject:"subscription.event",source:"AGGSubscriptions",attributes:{contentId:e,contentType:n,request_id:t?.extensions?.agg?.request_id||"",traceId:t?.extensions?.traceId||""}}}).fire()},[d,e,n]);return{id:e&&n&&r&&o?(0,t("fSDun").getConfluenceContentAri)({siteId:r,resourceType:n,activationId:o,resourceId:e}):"",extensions:(0,a.useMemo)(()=>{let e,n=(0,t("9wGTI").fg)("confluence_frontend_comments_extend_replay_window")?48:24,a=Math.floor((Date.now()-36e5*n)/1e3);return e=void 0!==s?s:i.current<a?a:i.current,c>0?{command:{type:"replay",data:{sequenceNumber:e}}}:{}},[c,s]),onSubscriptionComplete:u,onSubscriptionData:p}}}),n("fSDun",function(e,t){let n=["database","embed","folder"];e.exports.getConfluenceContentAri=e=>{let{siteId:t,resourceType:a,activationId:s,resourceId:o}=e;return n.includes(a)?`ari:cloud:confluence:${t}:${a}/activation/${s}/${o}`:`ari:cloud:confluence:${t}:${a}/${o}`}}),n("8aF6s",function(n,a){var s=t("42omo");let o=(e,...t)=>({setState:n,getState:a})=>{let s=a(),o=s.stack.find(t=>t.key===e);o&&(o.originalProps.onClose&&o.originalProps.onClose(...t),n({stack:s.stack.map(e=>e===o?{...e,alive:!1}:e)}))},r=(e,...t)=>({getState:n,setState:a})=>{let s=n(),o=s.stack.find(t=>t.key===e);o&&(o.originalProps.onCloseComplete&&o.originalProps.onCloseComplete(...t),a({stack:s.stack.filter(e=>e.key!==o.key)}))},i=(0,t("1P1Tu").createStore)({initialState:{stack:[]},actions:{showModal:(n,a,i)=>({getState:c,setState:l,dispatch:d})=>{let u=t("2BAFx").dialogKeyState.nextKey,p=a||{},m=(...e)=>d(o(u,...e)),_=e(s).createElement(n,{...p,onClose:m,onCloseComplete:(...e)=>d(r(u,...e))},i);return l({stack:[...c().stack,{key:u,component:_,alive:!0,originalProps:{onClose:p?.onClose,onCloseComplete:p?.onCloseComplete}}]}),m}},name:"DialogsStore"}),c=e=>({showModal:(t,n)=>{e.showModal(t,n)}}),l=(0,t("9zUhf").createActionsHook)(i),d=(0,t("9zUhf").createHook)(i);n.exports.useDialogs=()=>{let e=l();return(0,s.useMemo)(()=>c(e),[e])},n.exports.useDialogsState=()=>{let[e,t]=d();return(0,s.useMemo)(()=>({state:e,...c(t)}),[t,e])}}),n("2BAFx",function(e,t){let n=new class{get nextKey(){return this._nextKey++}set nextKey(e){e>this._nextKey&&(this._nextKey=e)}constructor(){this._nextKey=0}};e.exports.dialogKeyState=n}),n("gw4Bt",function(e,n){let a=(0,t("lSOAM").createPageSegmentLoadMetric)({key:t("jX1qB").SHARE_BUTTON_SEGMENT_KEY});e.exports.SHARE_BUTTON_PAGE_SEGMENT_LOAD=a}),n("gyneS",function(e,n){let a=(0,t("eSUdr").default)`query ShareAndRestrictButtonQuery($contentId:ID!$isContentTypePublicLinkEligible:Boolean!){singleContent(id:$contentId){id hasInheritedRestrictions hasRestrictions hasViewRestrictions title}publicLinkPage(pageId:$contentId)@include(if:$isContentTypePublicLinkEligible){pageId pageStatus}}`;e.exports.ShareAndRestrictButtonQuery=a}),n("grWYF",function(n,a){var s=t("3u0dr"),o=t("frIzR"),r=t("42omo"),i=t("4adOe");let c=(0,t("dPJCf").createSingleQueryParamHook)("journeyId"),l=(0,s.isReactCompilerActiveV1)()?function(n){let a,s,c,l,d,u,p=(0,o.c)(11),{onClose:m,journeyId:_}=n,{Spotlight:E}=(0,t("lsxnT").useChoreographerAssets)(),{createAnalyticsEvent:g}=(0,t("inPa6").useAnalyticsEvents)();return p[0]!==g||p[1]!==_?(a=()=>{g({type:"sendScreenEvent",data:{name:"onboardingPagePermissionsSpotlight",attributes:{source:i.SHARE_AND_RESTRICT_DIALOG_ANALYTICS_SOURCE,journeyId:_}}}).fire()},s=[g,_],p[0]=g,p[1]=_,p[2]=a,p[3]=s):(a=p[2],s=p[3]),(0,r.useEffect)(a,s),p[4]===Symbol.for("react.memo_cache_sentinel")?(c=e(r).createElement(t("gtD4K").default,{id:"share-and-restrict-dialog.share-and-restrict-spotlight-onboarding.ok",defaultMessage:"Ok"}),p[4]=c):c=p[4],p[5]!==m?(l=[{onClick:m,text:c}],p[5]=m,p[6]=l):l=p[6],p[7]===Symbol.for("react.memo_cache_sentinel")?(d=e(r).createElement(t("gtD4K").default,{id:"share-and-restrict-dialog.share-and-restrict-spotlight-onboarding.body",defaultMessage:"Control who can view, edit, and comment on your pages."}),p[7]=d):d=p[7],p[8]!==E||p[9]!==l?(u=e(r).createElement(E,{actions:l,target:"share-button-spotlight-target",targetRadius:3,targetBgColor:"var(--ds-surface, #FFFFFF)",dialogPlacement:"bottom right",dialogWidth:275,messageType:"transactional"},d),p[8]=E,p[9]=l,p[10]=u):u=p[10],u}:function({onClose:n,journeyId:a}){let{Spotlight:s}=(0,t("lsxnT").useChoreographerAssets)(),{createAnalyticsEvent:o}=(0,t("inPa6").useAnalyticsEvents)();return(0,r.useEffect)(()=>{o({type:"sendScreenEvent",data:{name:"onboardingPagePermissionsSpotlight",attributes:{source:i.SHARE_AND_RESTRICT_DIALOG_ANALYTICS_SOURCE,journeyId:a}}}).fire()},[o,a]),e(r).createElement(s,{actions:[{onClick:n,text:e(r).createElement(t("gtD4K").default,{id:"share-and-restrict-dialog.share-and-restrict-spotlight-onboarding.ok",defaultMessage:"Ok"})}],target:"share-button-spotlight-target",targetRadius:3,targetBgColor:"var(--ds-surface, #FFFFFF)",dialogPlacement:"bottom right",dialogWidth:275,messageType:"transactional"},e(r).createElement(t("gtD4K").default,{id:"share-and-restrict-dialog.share-and-restrict-spotlight-onboarding.body",defaultMessage:"Control who can view, edit, and comment on your pages."}))},d=(0,s.isReactCompilerActiveV1)()?function(){let n,a,s,i,d,u=(0,o.c)(10),{setQueryParams:p}=(0,t("dPJCf").useRouteActions)(),m=c(),[_,E]=(0,r.useState)(!1),g=(0,r.useRef)(!1),[f,S]=(0,r.useState)();u[0]!==m||u[1]!==p?(n=()=>{g.current||(g.current=!0,"onboarding-page-permissions"===m&&(S(m),p({journeyId:null}),E(!0)))},a=[m,p],u[0]=m,u[1]=p,u[2]=n,u[3]=a):(n=u[2],a=u[3]),(0,r.useEffect)(n,a),u[4]===Symbol.for("react.memo_cache_sentinel")?(s=()=>E(!1),u[4]=s):s=u[4];let I=s;return u[5]!==f||u[6]!==_?(i=_&&e(r).createElement(l,{onClose:I,journeyId:f}),u[5]=f,u[6]=_,u[7]=i):i=u[7],u[8]!==i?(d=e(r).createElement(t("2Fndw").default,null,i),u[8]=i,u[9]=d):d=u[9],d}:function(){let{setQueryParams:n}=(0,t("dPJCf").useRouteActions)(),a=c(),[s,o]=(0,r.useState)(!1),i=(0,r.useRef)(!1),[d,u]=(0,r.useState)();(0,r.useEffect)(()=>{i.current||(i.current=!0,"onboarding-page-permissions"===a&&(u(a),n({journeyId:null}),o(!0)))},[a,n]);let p=(0,r.useCallback)(()=>o(!1),[]);return e(r).createElement(t("2Fndw").default,null,s&&e(r).createElement(l,{onClose:p,journeyId:d}))};n.exports.OnboardingPagePermissionsSpotlight=l,n.exports.OnboardingPagePermissionsSpotlightLoader=d}),n("aBfpe",function(e,t){var n,a=((n={}).JSON="application/json",n.X_WWW_FORM_URLENCODED="application/x-www-form-urlencoded",n);e.exports.MediaType=a}),n("6i41U",function(e,n){var a=t("42omo");e.exports.default=()=>{let{routerLinkComponent:e}=(0,a.useContext)(t("8x1Q3").RouterLinkProviderContext);if(e)return e}}),n("8x1Q3",function(e,n){t("l998X");let a=(0,t("42omo").createContext)({});e.exports.RouterLinkProviderContext=a}),n("e3X7L",function(e,t){var n,a,s,o;let r={fragment:{argumentDefinitions:[n={defaultValue:null,kind:"LocalArgument",name:"accountId"},a={defaultValue:null,kind:"LocalArgument",name:"contentId"}],kind:"Fragment",name:"GrantAccessDialogLoaderQuery",selections:o=[{args:[{kind:"Variable",name:"id",variableName:"contentId"}],concreteType:"Content",kind:"LinkedField",name:"singleContent",plural:!1,selections:[s={kind:"ScalarField",name:"id"},{kind:"ScalarField",name:"title"}]},{alias:"user",args:[{kind:"Variable",name:"id",variableName:"accountId"}],concreteType:"AtlassianUser",kind:"LinkedField",name:"confluence_atlassianUser",plural:!1,selections:[s,{kind:"ScalarField",name:"displayName"},{concreteType:"AtlassianUserPhoto",kind:"LinkedField",name:"photos",plural:!0,selections:[{kind:"ScalarField",name:"value"},{kind:"ScalarField",name:"isPrimary"}]}]}],type:"Query"},kind:"Request",operation:{argumentDefinitions:[a,n],kind:"Operation",name:"GrantAccessDialogLoaderQuery",selections:o},params:{cacheID:"6ea58338105a015fd443972b8fa8bd85",id:"c621ba09ccc6f35017033687da8b71cefb7d4fe258097148bd0d767f32870c64",metadata:{},name:"GrantAccessDialogLoaderQuery",operationKind:"query",text:"query GrantAccessDialogLoaderQuery($contentId:ID!,$accountId:ID!){singleContent(id:$contentId){id,title},user:confluence_atlassianUser(id:$accountId){id,displayName,photos{value,isPrimary}}}"}};r.hash="65e9fca072feda54403e4da52299bc66",e.exports.default=r}),n("cOrQJ",function(e,n){var a=t("42omo");e.exports.default=()=>{let[e,n]=(0,a.useState)((0,t("8z9j5").default)());return(0,a.useEffect)(()=>{let e=new(0,t("60yhz").default)(e=>n(e));return e.observe(),()=>e.disconnect()},[]),e}}),n("k7Tf7",function(e,n){var a=t("l998X");t("42omo"),e.exports.PopoverProvider=({children:e})=>(0,a.jsx)(t("2MPqq").SpotlightContextProvider,{children:(0,a.jsx)(t("2xusd").Manager,{children:e})})}),n("a90ar",function(e,n){var a=t("l998X");t("42omo"),e.exports.PopoverTarget=({children:e})=>(0,a.jsx)(t("cs0ez").Reference,{children:({ref:t})=>(0,a.jsx)("div",{ref:t,children:e})})}),n("3chlW",function(e,n){var a=t("l998X");let s=(0,t("42omo").forwardRef)(({children:e,testId:n},s)=>(0,a.jsx)(t("1s5hv").default,{ref:s,testId:n,xcss:"_1bsb1osq",role:"group",justifyContent:"end",gap:"space.050",children:e}));e.exports.SpotlightActions=s}),n("f1UQW",function(e,n){var a=t("l998X");let s=(0,t("42omo").forwardRef)(({children:e,testId:n},s)=>(0,a.jsx)(t("gdv5Z").default,{ref:s,xcss:"_18zrpxbi _syaz15cr _1q51u2gc",testId:n,children:e}));e.exports.SpotlightBody=s}),n("71521",function(e,n){var a=t("l998X"),s=t("42omo");let o={"top-start":"_u7co12x7 _rjxpc7mi","top-center":"_u7co12x7 _1e021qz4","top-end":"_u7co12x7 _1e02c7mi","right-start":"_1e0212x7 _u7comgjw","right-end":"_1e0212x7 _152tmgjw","bottom-start":"_152t12x7 _rjxpc7mi","bottom-center":"_152t12x7 _1e021qz4","bottom-end":"_152t12x7 _1e02c7mi","left-start":"_rjxp12x7 _u7comgjw","left-end":"_rjxp12x7 _152tmgjw"},r=(0,s.forwardRef)(({children:e,testId:n},r)=>{let{card:i}=(0,s.useContext)(t("2MPqq").SpotlightContext),c=(0,s.useRef)(null);return(0,s.useEffect)(()=>{i.setRef(c)},[i]),(0,a.jsxs)("div",{"data-testid":n,ref:r,className:(0,t("gMc0m").default)(["_kqswh2mm"]),children:[(0,a.jsx)(t("jEGan").Caret,{}),(0,a.jsx)(t("gdv5Z").default,{ref:c,backgroundColor:"color.background.neutral.bold",xcss:(0,t("1Whri").cx)("_2rko1mok _zulpu2gc _kqswstnw _1bsbaq3k _1q51u2gc _85i5utpp _1e0c1txw _2lx21bp4 _16qs1nax",o[i.placement]),children:e})]})});e.exports.SpotlightCard=r}),n("jEGan",function(e,n){var a=t("l998X"),s=t("42omo");let o={root:"_bfhk1aqn _mkrzmhja _4t3io7ao _kqswh2mm _1bsbo7ao _1pby1fw0","top-start":"_t9ec71a3","top-center":"_t9ec71a3","top-end":"_t9ec71a3","bottom-start":"_t9ec1hke","bottom-center":"_t9ec1hke","bottom-end":"_t9ec1hke","right-start":"_t9ecjyd4","right-end":"_t9ecjyd4","left-start":"_t9ecebzf","left-end":"_t9ecebzf"},r=(0,s.forwardRef)(({testId:e},n)=>{let{card:r}=(0,s.useContext)(t("2MPqq").SpotlightContext);return(0,a.jsx)("div",{"data-testid":e,ref:n,style:{borderEndStartRadius:"1px"},className:(0,t("gMc0m").default)([o.root,o[r.placement]])})});e.exports.Caret=r}),n("aVS0S",function(e,n){var a=t("l998X");let s=(0,t("42omo").forwardRef)(({testId:e,children:n},s)=>(0,a.jsx)("div",{"data-testid":e,ref:s,role:"group",className:(0,t("gMc0m").default)(["_zulpu2gc _1e0c1txw _2lx21sbv"]),children:n}));e.exports.SpotlightControls=s}),n("2owmo",function(n,a){var s=t("l998X"),o=t("42omo");let r={root:"_2rko12b0 _1rjc12x7 _syaz15cr _bfhk1aqn _irr31ibz _1di6of27",rootT26Shape:"_2rko1qi0"},i=(0,o.forwardRef)(({autoFocus:n=!0,onClick:a,testId:i},c)=>{let{popoverContent:l}=(0,o.useContext)(t("2MPqq").SpotlightContext);return(0,s.jsx)(t("fVUfS").default,{autoFocus:n,onClick:a||(e=>{l.dismiss.current(e)}),ref:c,testId:i,xcss:(0,t("1Whri").cx)(r.root,(0,t("dh538").fg)("platform-dst-shape-theme-default")&&r.rootT26Shape),"aria-label":"Dismiss",children:(0,s.jsx)(e(t("hmuev")),{label:"Close"})})});n.exports.SpotlightDismissControl=i}),n("eopLP",function(e,n){var a=t("l998X");let s=(0,t("42omo").forwardRef)(({children:e,testId:n},s)=>(0,a.jsx)(t("1s5hv").default,{ref:s,testId:n,xcss:"_bozgpxbi _y4tiutpp _1bsb1osq",alignItems:"center",justifyContent:"space-between",children:e}));e.exports.SpotlightFooter=s}),n("aZQ5F",function(e,n){var a=t("l998X");let s=(0,t("42omo").forwardRef)(({children:e,testId:n},s)=>(0,a.jsx)(t("1s5hv").default,{ref:s,testId:n,xcss:"_bozgpxbi _y4tiutpp",alignItems:"center",justifyContent:"space-between",gap:"space.100",children:e}));e.exports.SpotlightHeader=s}),n("bUJpY",function(e,n){var a=t("l998X"),s=t("42omo");let o=(0,s.forwardRef)(({children:e,testId:n},o)=>{let{heading:r}=(0,s.useContext)(t("2MPqq").SpotlightContext);return(0,a.jsx)(t("7hXDW").default,{id:r.id,ref:o,testId:n,size:"xsmall",children:e})});e.exports.SpotlightHeadline=o}),n("fNcP1",function(e,n){var a=t("l998X"),s=t("42omo");let o=(0,s.forwardRef)(({"aria-label":e,onClick:n,children:o,testId:r},i)=>{let{primaryAction:c}=(0,s.useContext)(t("2MPqq").SpotlightContext);return(0,a.jsx)(t("fVUfS").default,{"aria-label":e,ref:i,testId:r,xcss:"_2rko12b0 _1dqonqa1 _189ee4h9 _1h6d8yml _syaz15cr _bfhk1aqn _irr31ibz _1di6of27",onClick:n||(e=>{c.action.current(e)}),children:(0,a.jsx)(t("iXCQx").default,{as:"span",children:o})})});e.exports.SpotlightPrimaryAction=o}),n("19Jj3",function(e,n){var a=t("l998X"),s=t("42omo");let o=(0,s.forwardRef)(({"aria-label":e,onClick:n,children:o,testId:r},i)=>{let{secondaryAction:c}=(0,s.useContext)(t("2MPqq").SpotlightContext);return(0,a.jsx)(t("fVUfS").default,{"aria-label":e,ref:i,testId:r,xcss:"_2rko12b0 _syaz15cr _bfhk1aqn _irr31ibz _1di6of27",onClick:n||(e=>{c.action.current(e)}),children:(0,a.jsx)(t("iXCQx").default,{as:"span",children:o})})});e.exports.SpotlightSecondaryAction=o}),n("aG6kF",function(e,n){var a=t("l998X");let s=(0,t("42omo").forwardRef)(({children:e,testId:n},s)=>(0,a.jsx)(t("1s5hv").default,{xcss:"_1ul91ris",children:(0,a.jsxs)(t("iXCQx").default,{ref:s,testId:n,children:[e," ",(0,a.jsx)(t("6F6hl").default,{children:"steps"})]})}));e.exports.SpotlightStepCount=s});
//# sourceMappingURL=ShareRestrictAndCopyCoordinator.d34d46c7.js.map
