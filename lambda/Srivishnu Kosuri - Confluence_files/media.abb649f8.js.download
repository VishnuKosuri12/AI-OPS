function e(e){return e&&e.__esModule?e.default:e}function t(e,t,r,a){Object.defineProperty(e,t,{get:r,set:a,enumerable:!0,configurable:!0})}var r=globalThis.parcelRequired477,a=r.register;a("hc71J",function(e,t){function r(e){return e.indexOf(".")>-1?e.split(".").pop():""}let a=[{mimetype:"application/json",language:"json"},{mimetype:"text/html",language:"html"}];function i(e,t){if(t){let e=a.find(e=>e.mimetype===t);if(e)return e.language}let i=r(e);switch(i){case"abap":case"ada":case"c":case"css":case"d":case"dart":case"go":case"graphql":case"groovy":case"html":case"java":case"json":case"matlab":case"xml":case"lua":case"puppet":case"qml":case"sass":case"sql":case"php":case"r":case"swift":case"tcl":case"vala":case"vhdl":case"xquery":return i;case"as":case"asc":return"actionscript";case"ino":return"arduino";case"au3":return"autoit";case"cpp":case"h":case"c++":return"c++";case"coffee":return"coffeescript";case"cs":return"csharp";case"cu":return"cuda";case"pas":case"dpr":case"dproj":case"dpk":return"delphi";case"ex":case"exs":return"elixir";case"erl":case"hrl":return"erlang";case"f90":case"for":case"f":case"fpp":case"i":case"i90":case"ftn":return"fortran";case"dbc":return"foxpro";case"hs":case"has":return"haskell";case"hx":return"haxe";case"js":case"jsx":return"javascript";case"jl":return"julia";case"kt":return"kotlin";case"m":case"mm":return"objective-c";case"j":return"objective-j";case"tex":return"latex";case"nb":case"cdf":return"mathematica";case"cma":return"ocaml";case"pl":return"perl";case"py":return"python";case"ps1":case"psd1":case"psm1":return"powershell";case"rb":return"ruby";case"rst":return"restructuredtext";case"rs":return"rust";case"rkt":return"racket";case"sh":return"shell";case"sc":case"sch":return"scheme";case"txt":case"msg":case"log":case"csv":case"md":return"text";case"ts":case"tsx":return"typescript";case"v":return"verilog";case"xq":case"xql":case"xqm":case"xqy":return"xquery";case"lock":case"yaml":case"yml":return"yaml";default:if("text/plain"===t)return"text";return null}}e.exports.getExtension=r,e.exports.isCodeViewerItem=function(e,t="unknown"){return null!==i(e,t)},e.exports.getLanguageType=i}),a("2nsxJ",function(e,t){var a=r("42omo");e.exports.useFileState=function(e,t={}){let{collectionName:i,occurrenceKey:n,skipRemote:o=!1,includeHashForDuplicateFiles:s}=t,c=(0,r("jRNsq").useMediaClient)(),l=(0,r("i2CQL").useMediaStore)(t=>t.files[e]);return(0,a.useEffect)(()=>{l||o||c.file.getFileState(e,{collectionName:i,occurrenceKey:n,includeHashForDuplicateFiles:s})},[e,c,i,n,o,l,s]),{fileState:l}}}),a("i2CQL",function(e,t){let a=e=>(t,a)=>(0,r("equi6").useStore)(e,t,a);e.exports.useMediaStore=function(e,t){return a((0,r("jRNsq").useMediaClient)().__DO_NOT_USE__getMediaStore())(e,t)}}),a("equi6",function(a,i){t(a.exports,"useStore",()=>p);var n=r("42omo"),o=r("hpRUx"),s=Object.assign(Object.create(null),{url:"file:///../node_modules/zustand/esm/index.mjs"});let{useDebugValue:c}=e(n),{useSyncExternalStoreWithSelector:l}=e(o),u=!1,d=e=>e;function p(e,t=d,r){(s.env?s.env.MODE:void 0)!=="production"&&r&&!u&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),u=!0);let a=l(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return c(a),a}}),a("21oLb",function(e,t){let r={1:"none",2:"rotateY(180deg)",3:"rotate(180deg)",4:"rotate(180deg) rotateY(180deg)",5:"rotate(270deg) rotateY(180deg)",6:"rotate(90deg)",7:"rotate(90deg) rotateY(180deg)",8:"rotate(270deg)"};e.exports.isRotated=e=>e>=5,e.exports.getCssFromImageOrientation=e=>r[e]}),a("6YcJ1",function(e,t){let{Orientation:a,XResolution:i}=r("ek6ZB").SupportedImageMetaTag;async function n(e){let t=await l(e);if(!t)return null;let{width:r,height:a,tags:n}=t;return{scaleFactor:function(e,t){let r=function(e){try{let t=e.name.trim().match(/@([0-9\.]+)x\.[a-z]{3}$/);if(t)return parseFloat(t[1])}catch(e){}return null}(e);return null!==r?r:t?"number"==typeof t.PixelPerUnitX?Math.round(.0254*t.PixelPerUnitX)/72:c(t,i,72)/72:1}(e.file,n),width:r,height:a}}let o=e=>{if(e&&e[a]){let t=e[a];if(t){let e=parseInt(t,10);return isNaN(e)?r("ek6ZB").ExifOrientation[t]:e}}return 1};async function s(e){return o(await (0,r("5kpUJ").readImageMetaTags)(e))}function c(e,t,r){try{let r=parseFloat(`${e[t]}`);if(!isNaN(r))return r}catch(e){}return r}async function l(e){let{file:t,src:a}=e,i=t.type,n=0,o=0,s=await (0,r("5kpUJ").readImageMetaTags)(t);s&&s.PixelXDimension&&(n=c(s,"PixelXDimension",0)),s&&s.PixelXDimension&&(o=c(s,"PixelYDimension",0));let l={type:i,width:n,height:o,naturalWidth:n,naturalHeight:o,tags:s};try{let e=await (0,r("a6JW6").loadImage)(a),{width:t,height:i}=(0,r("a6JW6").readImageNaturalOrientationFromDOM)(e);l.width=t,l.height=i,l.naturalWidth=e.naturalWidth,l.naturalHeight=e.naturalHeight}catch(e){return null}return l}e.exports.getImageInfo=n,e.exports.getOrientation=s}),a("ek6ZB",function(e,t){var r,a,i=((r={}).JPEG="image/jpeg",r.PNG="image/png",r),n=((a={}).XResolution="XResolution",a.YResolution="YResolution",a.Orientation="Orientation",a);e.exports.ImageType=i,e.exports.SupportedImageMetaTag=n,e.exports.ExifOrientation={"top-left":1,"top-right":2,"bottom-right":3,"bottom-left":4,"left-top":5,"right-top":6,"right-bottom":7,"left-bottom":8}}),a("5kpUJ",function(e,t){async function a(e){let t=e.type;try{if(t===r("ek6ZB").ImageType.PNG){let{iTXt:t,pHYs:a}=await (0,r("284pz").readPNGXMPMetaData)(e);return{...(0,r("joOsL").parseXMPMetaData)(t),...a}}if(e.type===r("ek6ZB").ImageType.JPEG)return await (0,r("gg2Io").readJPEGExifMetaData)(e)}catch(e){}return null}e.exports.readImageMetaTags=a}),a("gg2Io",function(e,t){let a,{XResolution:i,YResolution:n}=r("ek6ZB").SupportedImageMetaTag;e.exports.readJPEGExifMetaData=function(e){return new Promise(async(t,o)=>{if(!a){let e=await r("8vQIW");a=e.default||e}a.parseMetaData(e,e=>{try{let r=e&&e.exif?e.exif.getAll():{};Object.keys(r).forEach(e=>{let t=r[e];"object"==typeof t&&(e===i||e===n)&&"numerator"in t&&(r[e]=t.numerator),"number"==typeof r[e]&&(r[e]=`${r[e]}`)}),t(r)}catch(e){o(e)}})})}}),a("8vQIW",function(e,t){e.exports=r("4mJKd")(5)("b8BDn").then(()=>r("6fuwe"))}),a("4mJKd",function(e,t){e.exports=e=>t=>import(r("8tirZ").shardUrl(r("02nRr").resolve(t),e))}),a("8tirZ",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.applyShardToDomain=o,e.exports.domainShardingKey=void 0,e.exports.getDomainShardIndex=a,e.exports.shardUrl=function(e,t){return globalThis[r]?s(e,t):e},e.exports.shardUrlUnchecked=s;let r="__ATLASPACK_ENABLE_DOMAIN_SHARDS";function a(e,t){let r=t+1,a=e.split("").reduce((e,t)=>{let a=(e<<r)-e+t.charCodeAt(0);return a&a},0);return(a%=r)<0&&(a+=r),a}let i=/-\d+$/;function n(e){if(!i.test(e))return e;let t=e.lastIndexOf("-");return e.slice(0,t)}function o(e,t){let r=e.indexOf("."),a=0===t?"":`-${t-1}`;if(-1===r)return`${n(e)}${a}`;let i=n(e.slice(0,r));return`${i}${a}${e.slice(r)}`}function s(e,t){let r=new URL(e),i=a(function(e){let t=e.lastIndexOf("/");if(-1===t||t===e.length-1)throw Error("Expected an absolute URL with a file name, unable to apply sharding.");return e.slice(t+1)}(r.pathname),t);return r.hostname=o(r.hostname,i),r.toString()}e.exports.domainShardingKey=r}),a("02nRr",function(e,r){t(e.exports,"register",()=>a,e=>a=e),t(e.exports,"resolve",()=>i,e=>i=e);var a,i,n=new Map;a=function(e,t){for(var r=0;r<t.length-1;r+=2)n.set(t[r],{baseUrl:e,path:t[r+1]})},i=function(e){var t=n.get(e);if(null==t)throw Error("Could not resolve bundle with id "+e);return new URL(t.path,t.baseUrl).toString()}}),a("284pz",function(e,t){let a;async function i(e){if(!a){let e=await r("9MxN8");a=e.default||e}let t=await (0,r("a6JW6").fileToArrayBuffer)(e),i=a(t);return await n(i)}async function n(e){let t="",r={};for(let a=0;a<e.length;++a){let i=e[a];if("IEND"===i.name)break;if("iTXt"===i.name&&(t=String.fromCharCode.apply(null,Array.from(i.data))),"pHYs"===i.name){let e=new DataView(i.data.buffer);1===e.getUint8(8)&&(r={PixelPerUnitX:e.getUint32(0),PixelPerUnitY:e.getUint32(4)})}}return{iTXt:t,pHYs:r}}e.exports.readPNGXMPMetaData=i}),a("a6JW6",function(t,a){function i(e){return new Promise((t,r)=>{let a=new FileReader;a.addEventListener("load",()=>{let e=a.result;"string"==typeof e?t(e):null===e&&r()}),a.addEventListener("error",r),a.readAsDataURL(e)})}async function n(e,t){return{file:e,src:t||await i(e)}}let o=[{label:"pdf",mimeTypes:["application/pdf"],icon:e(r("lzyQK"))},{label:"google-form",mimeTypes:["application/vnd.google-apps.form"],icon:e(r("av4P2"))},{label:"google-slides",mimeTypes:["application/vnd.google-apps.presentation"],icon:e(r("eWLPt"))},{label:"google-form",mimeTypes:["application/vnd.google-apps.form"],icon:e(r("av4P2"))},{label:"google-sheets",mimeTypes:["application/vnd.google-apps.spreadsheet"],icon:e(r("giYeH"))},{label:"google-docs",mimeTypes:["application/vnd.google-apps.document","application/vnd.google-apps.kix"],icon:e(r("5W6v1"))},{label:"microsoft-word",mimeTypes:["application/msword","application/vnd.openxmlformats-officedocument.word"],icon:e(r("lkBga"))},{label:"presentation",mimeTypes:["application/x-iwork-keynote-sffkey","application/vnd.oasis.opendocument.presentation"],icon:e(r("cQbj1"))},{label:"powerpoint-presentation",mimeTypes:["application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.ms-powerpoint"],icon:e(r("dfQbH"))},{label:"giphy",mimeTypes:["image/gif"],icon:e(r("b4DX7"))},{label:"spreadsheet",mimeTypes:["text/csv"],icon:e(r("iFCP2"))},{label:"excel-spreadsheet",mimeTypes:["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel","application/x-iwork-keynote-sffnumbers"],icon:e(r("gH8Rx"))}];t.exports.dataURItoFile=function(e,t="untitled"){let r;if(0===e.length)throw Error("dataURI not found");let a=e.split(","),i=a[0].indexOf("base64")>=0?atob(a[1]):decodeURIComponent(a[1]);try{r=e.split(",")[0].split(":")[1].split(";")[0]}catch(e){r="application/octet-stream"}let n=new Uint8Array(i.length);for(let e=0;e<i.length;e++)n[e]=i.charCodeAt(e);let o=new Blob([n],{type:r});try{return new File([o],t,{type:r})}catch(r){let e=new Date;return o.lastModified=e.getTime(),o.lastModifiedDate=e,o.name=t,o.webkitRelativePath="",o}},t.exports.fileToDataURI=i,t.exports.getFileInfo=n,t.exports.fileToArrayBuffer=function(e){return new Promise((t,r)=>{let a=new FileReader;a.addEventListener("load",()=>{t(new Uint8Array(a.result))}),a.addEventListener("error",r),a.readAsArrayBuffer(e)})},t.exports.loadImage=function(e){return new Promise((t,r)=>{let a=new Image;a.src=e,a.onload=()=>{t(a)},a.onerror=r})},t.exports.readImageNaturalOrientationFromDOM=function(e){e.style.position="absolute",e.style.visibility="hidden",document.body.appendChild(e);let{width:t,height:r}=e.getBoundingClientRect();return document.body.removeChild(e),{width:t,height:r}},t.exports.findParentByClassname=(e,t,r=document.body)=>{if(e.classList.contains(t))return e;let a=e;for(;a.parentElement!==r;)if(a.parentElement){if((a=a.parentElement).classList.contains(t))return a}else break},t.exports.getMimeIcon=function(t,a){let i=o.find(e=>e.mimeTypes.indexOf(t)>-1);return i||((0,r("hc71J").isCodeViewerItem)(a,t)?{label:"source-code",icon:e(r("7t8Pn"))}:a.match(/.*\.sketch$/)?{label:"sketch",icon:e(r("9AnKp"))}:a.match(/.*\.fig$/)?{label:"figma",icon:e(r("d77HU"))}:a.match(/.*\.exe$/)||a.match(/.*\.dmg$/)?{label:"executable",icon:e(r("4dLYc"))}:void 0)}}),a("d77HU",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=void 0;var a,i=(a=r("42omo"))&&a.__esModule?a:{default:a};let n=e=>i.default.createElement(r("id7ja").Icon,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><path fill="#8270db" fill-rule="evenodd" d="M3.248 0A3.25 3.25 0 0 0 0 3.248v17.504A3.25 3.25 0 0 0 3.248 24h17.504A3.25 3.25 0 0 0 24 20.752V3.248A3.25 3.25 0 0 0 20.752 0zm8.755 17.013a2.506 2.506 0 0 1-2.505 2.506 2.506 2.506 0 0 1 0-5.013 2.506 2.506 0 0 1 0-5.012 2.506 2.506 0 0 1 0-5.013h5.009a2.506 2.506 0 0 1 0 5.013h-2.504v2.5a2.506 2.506 0 0 1 2.504-2.5 2.506 2.506 0 0 1 0 5.012 2.506 2.506 0 0 1-2.504-2.5z" clip-rule="evenodd"/></svg>'},e,{size:"medium"}));n.displayName="Figma24Icon",e.exports.default=n}),a("9MxN8",function(e,t){e.exports=r("4mJKd")(5)("dLFEp").then(()=>r("ahNRS"))}),a("joOsL",function(e,t){e.exports.parseXMPMetaData=function(e){let t={},r=e.match(/<(tiff|exif):.+>/gi);return r&&r.forEach(e=>{let r=e.match(/<(tiff|exif):([^>]+)>([^<]+)/i);r&&(t[r[2]]=r[3])}),t}}),a("k0QVR",function(e,t){var a=r("42omo");let i={dataURI:"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",dimensions:{width:100,height:100},source:"ssr-server"};e.exports.useFilePreview=({resizeMode:e="crop",identifier:t,ssr:n,dimensions:o,useSrcSet:s=!1,traceContext:c,skipRemote:l,mediaBlobUrlAttrs:u,allowAnimated:d=!0,upscale:p,maxAge:m,source:f})=>{let h=(0,r("jRNsq").useMediaClient)(),[g,v]=(0,a.useState)("loading"),[w,y]=(0,a.useState)(),[x,S]=(0,a.useState)(),[R,E]=(0,a.useState)(!1),[P,b]=(0,a.useState)("not-resolved"),C=(0,a.useRef)({server:{status:"unknown"},client:{status:"unknown"}}),I=(0,r("9x4nt").useInteractionContext)(),[L,U]=(0,a.useState)(!1);(0,a.useLayoutEffect)(()=>{if(L&&(0,r("dh538").fg)("platform_close_image_blindspot_2"))return I?.hold("img-loading")},[I,L]);let k=(0,a.useMemo)(()=>o?(0,r("hNBEk").createRequestDimensions)(o):void 0,[o]),A=(0,r("hNBEk").useCurrentValueRef)(k),M={collection:t.collectionName,mode:e,...k,allowAnimated:d,upscale:p,"max-age":m};M={...M,source:f};let[D,T]=(0,a.useState)(()=>{let a=r("gL31c").mediaFilePreviewCache.get(t.id,e);if(a)return a;if(n){let a=(0,r("dXMn6").getSSRData)(t,e);if(a?.error&&(C.current={...C.current,server:{status:"fail",...a.error}}),a?.dataURI){let{dimensions:e,dataURI:t,srcSet:r,loading:i}=a;return{dataURI:t,dimensions:e,source:"ssr-data",srcSet:r,lazy:"lazy"===i}}try{return(0,r("kJP4J").getSSRPreview)(n,h,t.id,M,u)}catch(e){C.current={...C.current,[n]:{status:"fail",...(0,r("fgSvy").extractErrorInfo)(e,c)}}}}}),{fileState:j}=(0,r("2nsxJ").useFileState)(t.id,{skipRemote:l,collectionName:t.collectionName,occurrenceKey:t.occurrenceKey}),J=!!j&&(0,r("hZ6O7").isImageRepresentationReady)(j),O=j?.status==="error"?j.message:void 0,{preview:N,mediaType:F,mimeType:_}=j&&j?.status!=="error"?j:{};(0,a.useEffect)(()=>{v("loading")},[t]),(0,a.useEffect)(()=>{"error"!==g&&(D||j?.status==="processed"&&!J?v("complete"):D||j?.status!=="failed-processing"||J?D||j?.status!=="error"||"resolved"!==P?v("loading"):(v("error"),y(new(0,r("cCL2U").MediaFilePreviewError)("metadata-fetch",(0,r("dIgeg").toCommonMediaClientError)(j)))):(v("error"),y(new(0,r("cCL2U").MediaFilePreviewError)("failed-processing"))))},[D,g,j,J,O,P]),(0,a.useEffect)(()=>{if(!(0,r("dh538").fg)("media-perf-uplift-mutation-fix"))return;let a=(0,r("dXMn6").getSSRData)(t,e)?.loadPromise;D&&(0,r("kJP4J").isSSRDataPreview)(D)&&a&&a.then(()=>{v("complete")}).catch(()=>{T(void 0)})},[D,t,e]);let B=(0,r("hNBEk").useCurrentValueRef)(()=>(0,r("kJP4J").getAndCacheRemotePreview)(h,t.id,k||{},M,u,c));(0,a.useEffect)(()=>{if(D)b("resolved");else if(!D&&"not-resolved"===P&&!l){b("resolving"),U(!0);let e={...k};B.current().then(t=>{(0,r("hNBEk").isBigger)(e,A.current)||T(t)}).catch(()=>{}).finally(()=>{U(!1),b("resolved")})}},[B,D,k,A,l,P]);let q=(0,r("hNBEk").useCurrentValueRef)(u);(0,a.useEffect)(()=>{let a=r("gL31c").mediaFilePreviewCache.get(t.id,e);if(D||!a||(0,r("hNBEk").isBigger)(a?.dimensions,k)){if(!D&&!R&&N&&(0,r("2dkDS").isSupportedLocalPreview)(F)&&(0,r("JXmwv").isMimeTypeSupportedByBrowser)(_||""))U(!0),(0,r("kJP4J").getAndCacheLocalPreview)(t.id,N,k||{},e,q.current).then(T).catch(e=>{E(!0),S(e)}).finally(()=>{U(!1)});else if(!w&&!x&&(!D||(0,r("hNBEk").isBigger)(D.dimensions,k)||(0,r("kJP4J").isSSRPreview)(D))&&!l&&"resolved"===P&&J){if(D&&(0,r("kJP4J").isSSRPreview)(D)&&!(0,r("hNBEk").isWider)(D.dimensions,o)&&(0,r("dh538").fg)("media-perf-uplift-mutation-fix"))return;U(!0),B.current().then(T).catch(e=>{let t=(0,r("cCL2U").ensureMediaFilePreviewError)("preview-fetch",e);D?S(t):(v("error"),y(t))}).finally(()=>{U(!1)})}}else T(a)},[w,x,B,t.id,e,R,q,D,k,l,J,N,F,_,P,o]);let X=(0,a.useCallback)(a=>{if(!a)return;(0,r("kJP4J").isSSRClientPreview)(a)&&(C.current={...C.current,client:(0,r("fgSvy").createFailedSSRObject)(a,c)});let i=(0,r("kJP4J").isSSRDataPreview)(a)||(0,r("kJP4J").isSSRClientPreview)(a);if(i&&(C.current={server:(0,r("fgSvy").createFailedSSRObject)(a,c),client:(0,r("fgSvy").createFailedSSRObject)(a,c)}),a.dataURI!==D?.dataURI)return;let n=(0,r("kJP4J").isLocalPreview)(a),o=(0,r("kJP4J").isRemotePreview)(a);if(n||o||i){let i=new(0,r("cCL2U").ImageLoadError)(a?.source);r("gL31c").mediaFilePreviewCache.remove(t.id,e),n&&E(!0),o&&(v("error"),y(i)),T(void 0)}},[t.id,D?.dataURI,e,c]),$=(0,a.useCallback)(e=>{if(e&&((0,r("kJP4J").isSSRClientPreview)(e)&&"unknown"===C.current.client.status&&(C.current={...C.current,client:{status:"success"}}),(0,r("kJP4J").isSSRDataPreview)(e)&&"unknown"===C.current.server.status&&(C.current={server:{status:"success"},client:{status:"success"}})),e?.dataURI!==D?.dataURI)return},[D?.dataURI]),z="server"===n?()=>(0,r("CPDDv").generateScriptProps)(t,D?.dataURI,e,D?.srcSet,k,C.current.server?.status==="fail"?C.current.server:void 0,{"media-perf-uplift-mutation-fix":(0,r("dh538").fg)("media-perf-uplift-mutation-fix"),"media-perf-lazy-loading-optimisation":(0,r("dh538").fg)("media-perf-lazy-loading-optimisation")}):void 0,{copyNodeRef:H}=(0,r("hXlr4").useCopyIntent)(t.id,{collectionName:t.collectionName});return{preview:"server"===n&&s&&(0,r("dh538").fg)("media-perf-uplift-mutation-fix")?i:D,status:g,error:w,nonCriticalError:x,ssrReliability:C.current,onImageError:X,onImageLoad:$,getSsrScriptProps:z,copyNodeRef:H}}}),a("hXlr4",function(e,t){var a=r("42omo");e.exports.useCopyIntent=(e,t={})=>{let i=(0,r("jRNsq").useMediaClient)(),n=(0,a.useRef)(null),{createAnalyticsEvent:o}=(0,r("inPa6").useAnalyticsEvents)(),s=function(e){let t=(0,a.useRef)(e);return t.current=e,t}(async()=>{try{await i.file.registerCopyIntent(e,t.collectionName),o((0,r("c5usV").getCopyIntentSuccessPayload)(e))}catch(t){o((0,r("c5usV").getCopyIntentErrorPayload)(t,e))}}),c=(0,a.useCallback)(e=>{n.current=e,(0,r("dh538").fg)("platform_media_cross_client_copy")&&e?.addEventListener("contextmenu",()=>{s.current()})},[s]),l=(0,a.useCallback)(async()=>{let e=n.current;e&&getSelection()?.containsNode(e,!0)&&s.current()},[s]);return(0,a.useEffect)(()=>((0,r("dh538").fg)("platform_media_cross_client_copy")&&(0,r("fLL9S").getDocument)()?.addEventListener("copy",l),()=>(0,r("fLL9S").getDocument)()?.removeEventListener("copy",l)),[l]),{copyNodeRef:c}}}),a("c5usV",function(e,t){let a=e=>{if((0,r("2ASLw").isRequestError)(e))return{request:{statusCode:e.metadata?.statusCode,traceContext:e.metadata?.traceContext,mediaEnv:e.metadata?.mediaEnv,mediaRegion:e.metadata?.mediaRegion}}};e.exports.getCopyIntentErrorPayload=(e,t="")=>({eventType:"operational",action:"failed",actionSubject:"mediaCopyIntent",failReason:(0,r("2ASLw").isRequestError)(e)?e.reason:"nativeError",attributes:{status:"fail",fileAttributes:{fileId:t},...a(e)}}),e.exports.getCopyIntentSuccessPayload=(e="")=>({eventType:"operational",action:"succeeded",actionSubject:"mediaCopyIntent",attributes:{fileAttributes:{fileId:e}}})}),a("fLL9S",function(e,t){e.exports.getDocument=()=>{if("undefined"!=typeof window&&void 0!==window.document)return window.document}}),a("fgSvy",function(e,t){let a=e=>{let{secondaryError:t}=e;if((0,r("dIgeg").isCommonMediaClientError)(t))return t.metadata?.traceContext},i=e=>e.primaryReason||"nativeError",n=e=>{let{secondaryError:t}=e;return(0,r("dIgeg").isCommonMediaClientError)(t)?t.reason:"nativeError"},o=e=>{let{secondaryError:t}=e;return(0,r("dIgeg").isCommonMediaClientError)(t)?t.message:e.message},s=(e,t)=>({failReason:i(e),error:n(e),errorDetail:o(e),metadataTraceContext:t??a(e)});e.exports.extractErrorInfo=s,e.exports.createFailedSSRObject=(e,t)=>({status:"fail",...s(new(0,r("cCL2U").ImageLoadError)(e.source),t)})}),a("cCL2U",function(e,t){class r extends Error{constructor(e,t){super(e),this.primaryReason=e,this.secondaryError=t,Object.setPrototypeOf(this,new.target.prototype),"captureStackTrace"in Error&&Error.captureStackTrace(this,new.target)}}let a=e=>{switch(e){case"cache-remote":return"cache-remote-uri";case"cache-local":return"cache-local-uri";case"external":return"external-uri";case"local":return"local-uri";case"remote":return"remote-uri";case"ssr-client":return"ssr-client-uri";case"ssr-server":case"ssr-data":return"ssr-server-uri";default:return"unknown-uri"}};e.exports.MediaFilePreviewError=r,e.exports.LocalPreviewError=class extends r{constructor(e,t){super(e,t),this.primaryReason=e,this.secondaryError=t}},e.exports.RemotePreviewError=class extends r{constructor(e,t){super(e,t),this.primaryReason=e,this.secondaryError=t}},e.exports.SsrPreviewError=class extends r{constructor(e,t){super(e,t),this.primaryReason=e,this.secondaryError=t}},e.exports.ImageLoadError=class extends r{constructor(e){super(a(e))}},e.exports.ensureMediaFilePreviewError=(e,t,a)=>t instanceof r?a&&t.primaryReason!==e?new r(e,t.secondaryError):t:new r(e,t)}),a("kJP4J",function(e,t){let a=(e,t,a,i)=>{let n;switch(a.source){case"local":n="cache-local";break;case"remote":n="cache-remote";break;default:n=a.source}let o=i?(0,r("Girkv").addFileAttrsToUrl)(a.dataURI,i):a.dataURI;return r("gL31c").mediaFilePreviewCache.set(e,t,{...a,source:n,dataURI:o}),{...a,dataURI:o}},i=(e,t,a,i)=>{let n=e.getImageUrlSync(t,a);return i?(0,r("Girkv").addFileAttrsToUrl)(n,i):n},n=async(e,t,i,n,o,s)=>{let c=await (0,r("2dkDS").getRemotePreview)(e,t,n,s);return a(t,n.mode,{...c,dimensions:i},o)},o=async(e,t,i,n,o)=>a(e,n,{...await (0,r("2dkDS").getLocalPreview)(t),dimensions:i},o);e.exports.getSSRPreview=(e,t,a,n,o)=>{try{let r=i(t,a,n,o),s=`${r} 1x`;if(n.width){let e=i(t,a,{...n,width:2*n.width,height:n.height&&2*n.height},o);s+=`, ${e} 2x`}return{dataURI:r,source:"client"===e?"ssr-client":"ssr-server",orientation:1,srcSet:s}}catch(t){throw new(0,r("cCL2U").SsrPreviewError)("server"===e?"ssr-server-uri":"ssr-client-uri",t instanceof Error?t:void 0)}},e.exports.isLocalPreview=e=>["local","cache-local"].includes(e.source),e.exports.isRemotePreview=e=>["remote","cache-remote"].includes(e.source),e.exports.isSSRClientPreview=e=>"ssr-client"===e.source,e.exports.isSSRDataPreview=e=>"ssr-data"===e.source,e.exports.isSSRPreview=e=>["ssr-client","ssr-server","ssr-data"].includes(e.source),e.exports.getAndCacheRemotePreview=n,e.exports.getAndCacheLocalPreview=o}),a("gL31c",function(e,t){let a=(e,t)=>[e,t||"crop"].join("-"),i=new class{constructor(e){this.previewCache=e,this.get=(e,t)=>{let r=a(e,t);return this.previewCache.get(r)},this.set=(e,t,r)=>{let i=a(e,t);this.previewCache.set(i,r)},this.remove=(e,t)=>{let r=a(e,t);this.previewCache.remove(r)},this.clear=()=>{this.previewCache.clear()}}}((0,r("2hUgu").createObjectURLCache)());e.exports.mediaFilePreviewCache=i}),a("2hUgu",function(e,t){var a=r("majy4"),i=r("9trs7");class n extends i.LRUMap{shift(){let e=super.shift();return this.eventEmitter.emit("shift",e),e}on(e,t){this.eventEmitter.on(e,t)}constructor(e){super(e),this.eventEmitter=void 0,this.eventEmitter=new(0,a.EventEmitter2)}}class o{has(e){return!!this.cache.find(e)}get(e){return this.cache.get(e)}set(e,t){this.cache.set(e,t)}remove(e){let t=this.cache.delete(e);t&&URL.revokeObjectURL(t.dataURI)}clear(){this.cache.clear()}constructor(e){this.cache=void 0,this.cache=new n(e),this.cache.on("shift",e=>{e&&e[1].dataURI&&URL.revokeObjectURL(e[1].dataURI)})}}e.exports.createObjectURLCache=()=>new o(50)}),a("2dkDS",function(e,t){let a=async e=>{try{let t=await (0,r("6YcJ1").getOrientation)(e);return{dataURI:URL.createObjectURL(e),orientation:t,source:"local"}}catch(e){throw new(0,r("cCL2U").LocalPreviewError)("local-preview-image",e instanceof Error?e:void 0)}},i=async e=>{try{return{dataURI:await (0,r("eyZtk").takeSnapshot)(e),orientation:1,source:"local"}}catch(e){throw new(0,r("cCL2U").LocalPreviewError)("local-preview-video",e instanceof Error?e:void 0)}},n=async e=>{let t;try{t=(await e).value}catch(e){throw new(0,r("cCL2U").LocalPreviewError)("local-preview-rejected",e instanceof Error?e:void 0)}if("string"==typeof t)return{dataURI:t,orientation:1,source:"local"};if(t instanceof Blob){let{type:e}=t;switch((0,r("24z7I").getMediaTypeFromMimeType)(e)){case"image":return a(t);case"video":return i(t)}}throw new(0,r("cCL2U").LocalPreviewError)("local-preview-unsupported")},o=async(e,t,a,i)=>{try{let r=await e.getImage(t,a,void 0,void 0,i);return{dataURI:URL.createObjectURL(r),orientation:1,source:"remote"}}catch(e){throw new(0,r("cCL2U").RemotePreviewError)("remote-preview-fetch",e instanceof Error?e:void 0)}};e.exports.isSupportedLocalPreview=e=>"image"===e||"video"===e,e.exports.getLocalPreview=n,e.exports.getRemotePreview=o}),a("eyZtk",function(e,t){let r=async e=>new Promise((t,r)=>{let a=URL.createObjectURL(e),i=document.createElement("video");i.preload="metadata",i.src=a,i.muted=!0,i.play().catch(()=>r(Error("failed to play video"))),i.addEventListener("timeupdate",function e(){if(i.removeEventListener("timeupdate",e),i.pause(),URL.revokeObjectURL(a),!i.videoWidth&&!i.videoHeight)return r(Error("error retrieving video dimensions"));let n=document.createElement("canvas");n.width=i.videoWidth,n.height=i.videoHeight;let o=n.getContext("2d");if(!o)return r(Error("error creating canvas context"));o.drawImage(i,0,0,n.width,n.height),t(n.toDataURL("image/jpeg",.85))}),i.addEventListener("error",()=>{r(Error("failed to load video")),URL.revokeObjectURL(a)})});e.exports.takeSnapshot=r}),a("CPDDv",function(e,t){let r=e=>e?`-${e}`:"",a=({id:e,collectionName:t,occurrenceKey:a},i)=>`${e}${r(t)}${r(a)}${r(i)}`,i=(e,t,r,i,n,o,s={})=>{let c=a(e,r);return'!function(){function e(){const e="__MEDIA_INTERNAL";return window[e]||(window[e]={}),window[e]}!function(n){var t;const i=document.currentScript,o=function(){const n=e(),t="mediaCardSsr";return n[t]||(n[t]={}),n[t]}(),r=function(){const n=e(),t="mediaCountSsr";return n[t]||(n[t]=0),n[t]}(),{key:d}=n,a=n.dataURI,s=n.mode,c=n.srcSet,{dimensions:m}=n,{error:u}=n,{featureFlags:l}=n;if(l["media-perf-uplift-mutation-fix"]){const t=o[d],f=t&&t.mode===s&&t.dimensions&&t.dimensions.width&&m&&m.width&&t.dimensions.width>m.width,w=f?t.srcSet:c,g=f?t.dataURI:a,p={dataURI:g,dimensions:m,error:u,srcSet:w,loading:"lazy",loadPromise:void 0,mode:s},S=i&&i.parentElement&&i.parentElement.querySelector("img");S&&l["media-perf-lazy-loading-optimisation"]&&r<n.maxEagerLoadCount&&(!function(){const n=e(),t="mediaCountSsr";n[t]||(n[t]=0),n[t]++}(),"lazy"===S.getAttribute("loading")&&S.removeAttribute("loading"),p.loading=""),S&&g&&(S.src=g),S&&w&&(S.srcset=w),p.loadPromise=new Promise((function(e,n){S&&(S.addEventListener("load",(function(){e(void 0)})),S.addEventListener("error",(function(){n(new Error("Failed to load image"))})))})),o[d]=f?t:p}else o[d]={dataURI:a,dimensions:m,error:u};null===(t=document.currentScript)||void 0===t||t.remove()}({replace:""})}();'.replace('{replace:""}',JSON.stringify({key:c,dataURI:t,mode:r,srcSet:i,dimensions:n,error:o,featureFlags:s,maxEagerLoadCount:6}))};e.exports.getMediaCardSSR=function(e=window){let t=function(e=window){let t="__MEDIA_INTERNAL";return e[t]||(e[t]={}),e[t]}(e),r="mediaCardSsr";return t[r]||(t[r]={}),t[r]},e.exports.getKey=a,e.exports.generateScriptProps=(e,t,r,a,n,o,s={})=>({dangerouslySetInnerHTML:{__html:i(e,t,r,a,n,o,s)}})}),a("dXMn6",function(e,t){e.exports.getSSRData=(e,t)=>{let a=(0,r("CPDDv").getMediaCardSSR)();if(a)return a[(0,r("CPDDv").getKey)(e,t)]}}),a("hNBEk",function(e,t){var a=r("42omo");e.exports.isBigger=(e,t)=>{let{width:r,height:a}=e||{},{width:i,height:n}=t||{};return!!r&&!!a&&!!i&&!!n&&(a<n||r<i)},e.exports.isWider=(e,t)=>void 0===e&&void 0!==t||(e?.width||0)<(t?.width||0),e.exports.createRequestDimensions=e=>{if(!e)return;let t=window.devicePixelRatio>1||window.matchMedia&&window.matchMedia("(-webkit-min-device-pixel-ratio: 1.5), (min--moz-device-pixel-ratio: 1.5), (-o-min-device-pixel-ratio: 3/2), (min-resolution: 1.5dppx)").matches?2:1,{width:r,height:a}=e,i={};return r&&(i.width=r*t),a&&(i.height=a*t),i},e.exports.useCurrentValueRef=function(e){let t=(0,a.useRef)(e);return t.current=e,t}});
//# sourceMappingURL=media.abb649f8.js.map
