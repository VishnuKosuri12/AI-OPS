function e(e){return e&&e.__esModule?e.default:e}var t=globalThis.parcelRequired477,n=t.register;n("jFm04",function(n,a){var s=t("42omo");let r=(0,t("eSUdr").default)`mutation UpdateOwnerMutation($contentId:ID!$ownerId:String!){updateOwner(input:{contentId:$contentId ownerId:$ownerId}){content{id history{ownedBy{displayName type ...on KnownUser{accountId}profilePicture{path}}lastOwnedBy{displayName type ...on KnownUser{accountId}profilePicture{path}}}}}}`;var o=t("jFm04"),i=t("hpRYU");let l=({contentId:e})=>{let[n,a]=(0,s.useState)([]),{data:r,error:o}=(0,t("xQxzY").useQuery)((0,t("eSUdr").default)`query useContentOwnershipContributorsContentOwnershipContributorsQuery($contentId:ID!$limit:Int=4){content(id:$contentId){nodes{id history{ownedBy{displayName type ...on KnownUser{accountId}profilePicture{path}}}version{by{displayName type ...on KnownUser{accountId}profilePicture{path}}}}}contentContributors(id:$contentId limit:$limit){nodes{displayName type ...on KnownUser{accountId}profilePicture{path}}}}`,{variables:{contentId:e,limit:t("2E1L5").DEFAULT_CONTRIBUTORS_FETCH_LIMIT}});return o&&(0,t("1uFM6").isUnauthorizedError)(o)&&(0,t("7Sm4c").markErrorAsHandled)(o),(0,s.useEffect)(()=>{r&&a((0,t("68BwE").parseContributors)(r))},[r]),n},c=(0,t("ecnYn").xcss)({marginTop:"space.050",marginBottom:"space.250"}),d=({children:t})=>{let n=e(s).useRef(null),[a,r]=e(s).useState(null);return e(s).createElement("div",{ref:e=>{n.current=e,r(n.current)}},t(a))},u=({selectedUser:n,onSelectUser:a,onClearSelectedUser:r,spaceKey:o,contentId:u,currentOwner:p})=>{let m=l({contentId:u,spaceKey:o}),w=e=>{let t=p?.id;return t?e.filter(e=>e.id!==t):e};return e(s).createElement(t("6f0Oj").default,{xcss:c},e(s).createElement(d,null,t=>e(s).createElement(i.UserAndGroupSearchPicker,{fieldId:"content.owner",value:n,onSelect:a,onClear:r,width:"100%",isMulti:!1,includeGroup:!1,smart:!0,isClearable:!0,menuPortalTarget:t||void 0,bootstrapOptions:m,smartFilterOptions:w,styles:{menuPortal:e=>({...e,position:"absolute",left:"inherit",top:"inherit"})},noOptionsMessage:null})))};var p=t("T1bCI"),m=t("erzVD");let w=()=>{let[e]=(0,t("ep3mz").usePageSpaceKey)(),[n,a]=(0,s.useState)([]),{data:r}=(0,t("xQxzY").useQuery)((0,t("eSUdr").default)`query useContentOwnershipSpaceAdminsSpaceAdminsListQuery($spaceKey:String!){space(key:$spaceKey){id admins(accountType:ATLASSIAN){type ...on KnownUser{email}}}}`,{variables:{spaceKey:e},skip:!e});return(0,s.useEffect)(()=>{a(r?.space?.admins||[])},[r]),n},f=({intl:n,displayName:a,contentId:r,selectedUser:o})=>{let[i]=(0,t("ep3mz").usePageSpaceKey)(),l=(0,t("5k5SG").useIsSpaceOrSiteAdmin)(),c=`${t("1NBp8").SPACE_PERMISSIONS_SETTINGS.toUrl({spaceKey:i,tab:t("3P1RK").SpacePermissionsTabKey.Users})}`;return l?e(s).createElement(()=>e(s).createElement(t("eEA8O").default,{appearance:"link",href:c,target:"_blank"},n.formatMessage(t("kuujH").i18n.manageSpaceRestrictionButtonAdmin)),null):e(s).createElement(()=>{let l=w(),{contentTitle:d}=(0,t("jgcNz").useContentInfo)({contentId:r}),u=(0,t("68BwE").generateMailtoLink)({intl:n,spaceAdmins:l,spacePermissionsUrl:c,spaceKey:i,contentId:r,requestedUser:o?.name,currentUser:a,pageTitle:d});return e(s).createElement(t("eEA8O").default,{appearance:"link",href:u},n.formatMessage(t("kuujH").i18n.manageSpaceRestrictionButton))},null)},g=({intl:n,contentId:a,isPremium:r})=>{let[o,i]=(0,s.useState)(!1);return e(s).createElement(e(s).Fragment,null,r?e(s).createElement(t("eEA8O").default,{appearance:"link",onClick:()=>i(!0)},n.formatMessage(t("kuujH").i18n.managePremiumRestrictionButton)):e(s).createElement(t("eEA8O").default,{appearance:"link",target:"_blank",href:t("2E1L5").PARENT_PAGE_LEARN_MORE_URL},n.formatMessage(t("kuujH").i18n.manageParentPageRestrictionButton)),o&&e(s).createElement(m.InspectPermissionsDialog,{contentId:a,onClose:()=>i(!1)}))},h=({intl:n,resetRestrictions:a})=>e(s).createElement(p.Subscribe,{to:[t("bVAxT").RestrictionsDialogStateContainer]},r=>e(s).createElement(t("eEA8O").default,{appearance:"link",onClick:()=>{r.setIsOpen(!0),a()}},n.formatMessage(t("kuujH").i18n.manageRestrictionButton))),E=({isParentPageRestriction:n=!1,isSpaceRestricted:a=!1,isEditPageRestricted:r=!1,contentId:o="",selectedUser:i,resetRestrictions:l})=>{let c=(0,t("8C5kA").default)(),{edition:d,displayName:u}=(0,t("bQm3c").useSessionData)(),p=d===t("euL71").ConfluenceEdition.PREMIUM,m={},w={};a?(m=t("kuujH").i18n.ownerSpaceRestrictionTitle,w=t("kuujH").i18n.ownerSpaceRestrictionMessage):p&&n?(m=t("kuujH").i18n.ownerPremiumRestrictionTitle,w=t("kuujH").i18n.ownerPremiumRestrictionMessage):n?(m=t("kuujH").i18n.ownerParentPageRestrictionTitle,w=t("kuujH").i18n.ownerParentPageRestrictionMessage):(m=t("kuujH").i18n.ownerRestrictionTitle,w=t("kuujH").i18n.ownerRestrictionMessage);let E=null;return E=a?e(s).createElement(f,{intl:c,displayName:u,selectedUser:i,contentId:o}):n?e(s).createElement(g,{intl:c,contentId:o,isPremium:p}):e(s).createElement(h,{intl:c,resetRestrictions:l}),e(s).createElement(t("aNtZv").PermissionWarningContainer,{"data-testid":"content-ownership-permissions-warning-container"},e(s).createElement(t("aNtZv").Wrapper,null,e(s).createElement(e(t("ebrpi")),{spacing:"spacious",label:"",color:"var(--ds-text-warning, #9E4C00)"}),e(s).createElement(t("aNtZv").FlexColumn,null,e(s).createElement(t("aNtZv").TextStrong,null,c.formatMessage(m)),e(s).createElement(t("aNtZv").Text,null,c.formatMessage(w)),E)))},y=({onCancel:n,onConfirm:a,currentOwner:r,newOwner:o})=>{let i=(0,t("8C5kA").default)(),{Modal:l}=(0,t("lsxnT").useChoreographerAssets)();return e(s).createElement(l,{testId:"content-owner-confirm-modal",onClose:n,width:"small",messageType:"transactional",messageId:"content-ownership-confirm-modal"},e(s).createElement(t("9ot3w").default,{hasCloseButton:!0},e(s).createElement(t("d8eRd").default,{appearance:"warning"},i.formatMessage(t("kuujH").i18n.confirmModalTitle))),e(s).createElement(t("1DHa6").default,null,e(s).createElement(t("iXCQx").default,{as:"p"},i.formatMessage(t("kuujH").i18n.confirmModalBody,{button:n=>e(s).createElement(t("eEA8O").default,{appearance:"link",spacing:"none",target:"_blank",href:t("2E1L5").CONFIRM_MODAL_LEARN_MORE_LINK},n)})),e(s).createElement(t("aNtZv").OwnerSwapBackground,null,e(s).createElement(t("aNtZv").OwnerSwapIndividualContainer,{"data-testid":"content-owner-confirm-modal-current-user"},e(s).createElement(t("esRft").default,{size:"medium",src:r?.avatarUrl,name:r?.fullName}),e(s).createElement(t("aNtZv").OwnerSwapIndividualTextContainer,null,e(s).createElement(t("aNtZv").OwnerSwapIndividualTitle,null,e(s).createElement(t("gtD4K").default,t("kuujH").i18n.confirmModalCurrentOwner)),e(s).createElement(t("aNtZv").OwnerSwapIndividualName,null,r?.fullName))),e(s).createElement(t("aNtZv").OwnerSwapArrowContainer,null,e(s).createElement(t("aNtZv").OwnerSwapArrow,null,e(s).createElement(e(t("5tOl1")),{color:"currentColor",spacing:"spacious",label:"Ownership Transfer"}))),e(s).createElement(t("aNtZv").OwnerSwapIndividualContainer,{"data-testid":"content-owner-confirm-modal-new-user"},e(s).createElement(t("esRft").default,{size:"medium",src:o?.avatarUrl,name:o?.fullName}),e(s).createElement(t("aNtZv").OwnerSwapIndividualTextContainer,null,e(s).createElement(t("aNtZv").OwnerSwapIndividualTitle,null,e(s).createElement(t("gtD4K").default,t("kuujH").i18n.confirmModalNewOwner)),e(s).createElement(t("aNtZv").OwnerSwapIndividualName,null,o?.fullName))))),e(s).createElement(t("8o1lj").default,null,e(s).createElement(t("aNtZv").FlexContainer,null,e(s).createElement(t("eEA8O").default,{testId:"content-owner-modal-cancel-update-owner-button",appearance:"subtle",onClick:n},i.formatMessage(t("kuujH").i18n.confirmModalCancel)),e(s).createElement(t("eEA8O").default,{testId:"content-owner-modal-confirm-update-owner-button",appearance:"warning",onClick:a},i.formatMessage(t("kuujH").i18n.confirmModalConfirmChangeOwner)))))},C=(0,t("eSUdr").default)`query ContentOwnershipDialogRefetchOnMutationQuery($contentId:ID!){contentContributors(id:$contentId){isOwnerContributor}}`,b=(0,t("eSUdr").default)`query ContentOwnershipDialogContentOwnerHistoryQuery($contentId:ID!){singleContent(id:$contentId){id history{createdDate createdBy{displayName type ...on KnownUser{accountId}profilePicture{path}}ownedBy{displayName type ...on KnownUser{accountId}profilePicture{path}}}}}`,M=(0,t("ecnYn").xcss)({marginBottom:"space.100"}),S=(0,t("ecnYn").xcss)({display:"flex",justifyContent:"flex-start",alignItems:"center",marginBottom:"space.200"}),R=(0,t("ecnYn").xcss)({marginLeft:"space.075"}),_=({flags:n,shouldReturnFocusRef:a})=>{let{createAnalyticsEvent:i}=(0,t("inPa6").useAnalyticsEvents)(),l=(0,t("3jwuS").useIsCurrentPageLive)(),c=(0,t("8C5kA").default)(),d=(0,t("68BwE").useExperienceTrackerContext)(),[p]=(0,t("ep3mz").usePageSpaceKey)(),[m]=(0,t("ep3mz").usePageContentId)(),[{contentType:w}]=(0,t("ep3mz").usePageState)(),{Modal:f}=(0,t("lsxnT").useChoreographerAssets)(),[g,h]=(0,s.useState)(void 0),[_,I]=(0,s.useState)(void 0),[N,v]=(0,s.useState)(!1),[O,x]=(0,s.useState)(!1),[P,k]=(0,s.useState)({isUserRestricted:!1,isSpaceRestricted:!1,isParentPageRestricted:!1,isEditPageRestricted:!1}),{closeModal:A}=(0,o.useContentOwnershipContext)(),T=(0,t("5k5SG").useIsSpaceOrSiteAdmin)(),{isRbacEnabled:U,loading:B}=(0,t("iquRY").useSpaceRoleMode)(),{canManageContent:j,loading:D}=(0,t("i28ZW").useSpaceManagementOperations)({spaceKey:p??"",skip:!p}),L=U&&(0,t("6mKj3").expVal)("rbac_release_phase3_split_permissions_frontend","isEnabled",!1)?j:T,{data:H}=(0,t("xQxzY").useQuery)(b,{variables:{contentId:m},skip:!m});(0,s.useEffect)(()=>{let e;if(!H)return;let t=H?.singleContent?.history?.ownedBy;t&&"accountId"in t&&(e=t.accountId??void 0),I({fullName:t?.displayName??void 0,avatarUrl:t?.profilePicture?.path??void 0,id:e})},[H]),(0,s.useEffect)(()=>{let{isUserRestricted:e,isSpaceRestricted:t,isParentPageRestricted:n}=P;(e||t||n)&&i({type:"sendTrackEvent",data:{action:"changeErrorPermissionWarning",actionSubject:"content.owner",source:"changeOwnerModal",attributes:{...P,contentId:m,isAdmin:T,contentType:w}}}).fire()},[P,i,m,T,w]);let F=()=>{k({isUserRestricted:!1,isSpaceRestricted:!1,isParentPageRestricted:!1,isEditPageRestricted:!1})},K=(0,s.useCallback)(()=>{x(!0)},[]),z=(0,s.useCallback)(()=>{x(!1)},[]),$=(0,s.useCallback)(()=>{h(void 0),F()},[]),q=(0,s.useCallback)(async e=>{v(!0),h(e);let n=await (0,t("68BwE").checkIsUserRestricted)(m,e.id);n?k(n):F(),v(!1)},[m]),G=(0,s.useCallback)(async()=>{try{d.start({name:t("irVI7").CHANGE_PAGE_OWNER_EXPERIENCE}),v(!0);let e=g.id;try{let a=await (0,t("hp2SH").getApolloClient)().mutate({mutation:r,variables:{contentId:m,ownerId:e},refetchQueries:[{query:C,variables:{contentId:m}},{query:b,variables:{contentId:m}}]});i({type:"sendTrackEvent",data:{action:"changeSuccess",actionSubject:"content.owner",source:"changeOwnerModal",attributes:{contentId:m,isAdmin:T,isLivePage:l,contentType:w}}}).fire(),d.succeed({name:t("irVI7").CHANGE_PAGE_OWNER_EXPERIENCE}),A(),n.showSuccessFlag({id:"content-ownership-dialog-update-owner-success",title:c.formatMessage(t("kuujH").i18n.successFlagMessage,{user:a.data.updateOwner.content.history.ownedBy.displayName}),isAutoDismiss:!0})}catch(e){e.message.includes(t("2E1L5").EXPECTED_ERROR_MESSAGES.USER_MISSING_PAGE_PERMISSION)?(d.abort({name:t("irVI7").CHANGE_PAGE_OWNER_EXPERIENCE,reason:"New owner does not have view/edit permission on the page"}),k({...P,isUserRestricted:!0})):d.fail({name:t("irVI7").CHANGE_PAGE_OWNER_EXPERIENCE,error:e}),i({type:"sendTrackEvent",data:{action:"changeError",actionSubject:"content.owner",source:"changeOwnerModal",attributes:{...e,contentId:m,isAdmin:T,isLivePage:l,contentType:w}}}).fire(),n.showErrorFlag({id:"content-ownership-dialog-update-owner-failed",title:c.formatMessage(t("kuujH").i18n.errorFlagMessage),isAutoDismiss:!0})}}finally{v(!1)}},[g,m,A,P,i,T,d,l,n,c,w]),W=(0,s.useCallback)(async()=>{x(!1),await G()},[G]),Z=(0,s.useMemo)(()=>L?G:K,[L,G,K]);return p&&m&&_?e(s).createElement(e(s).Fragment,null,e(s).createElement(f,{testId:"content-owner-modal",onClose:A,messageType:"transactional",messageId:"content-ownership-modal",shouldReturnFocus:a},e(s).createElement(t("9ot3w").default,null,e(s).createElement(t("d8eRd").default,null,c.formatMessage(t("kuujH").i18n.modalTitleEnabledForAllContent)),e(s).createElement(t("8TTLA").CloseButton,{onClick:A,label:c.formatMessage(t("kuujH").i18n.closeModal)})),e(s).createElement(t("1DHa6").default,null,e(s).createElement(t("6f0Oj").default,{xcss:M},e(s).createElement(t("aNtZv").ModalLabel,null,c.formatMessage(t("kuujH").i18n.modalCurrentOwner)),e(s).createElement(t("6f0Oj").default,{xcss:S},e(s).createElement(t("esRft").default,{src:_?.avatarUrl,name:_?.fullName,size:"small"}),e(s).createElement(t("6f0Oj").default,{xcss:R,as:"span"},_?.fullName))),e(s).createElement(t("aNtZv").ModalLabel,null,c.formatMessage(t("kuujH").i18n.modalBodyEnabledForAllContent)),e(s).createElement(u,{selectedUser:g,onSelectUser:q,onClearSelectedUser:$,spaceKey:p,contentId:m,currentOwner:_}),P.isUserRestricted&&e(s).createElement(E,{isParentPageRestriction:P.isParentPageRestricted,isEditPageRestricted:P.isEditPageRestricted,contentId:m,isSpaceRestricted:P.isSpaceRestricted,selectedUser:g,resetRestrictions:F})),e(s).createElement(t("8o1lj").default,null,e(s).createElement(t("aNtZv").FlexContainer,null,e(s).createElement(t("eEA8O").default,{appearance:"subtle",onClick:A},c.formatMessage(t("kuujH").i18n.modalCancel)),e(s).createElement(t("eEA8O").default,{testId:"content-owner-modal-update-owner-button",appearance:"primary",onClick:Z,isDisabled:!g||P.isUserRestricted||N||(B||D)&&(0,t("6mKj3").expVal)("rbac_release_phase3_split_permissions_frontend","isEnabled",!1)},c.formatMessage(t("kuujH").i18n.modalChangeOwner))))),O&&e(s).createElement(y,{onCancel:z,onConfirm:W,currentOwner:_,newOwner:{fullName:g.name,avatarUrl:g.avatarUrl,id:g.id}}),e(s).createElement(t("1eaCJ").ExperienceSuccess,{name:t("irVI7").CONTENT_OWNERSHIP_DIALOG_EXPERIENCE,attributes:{contentType:w,isLivePage:l}})):null},I=(0,t("7aRa9").withFlags)(({flags:t,shouldReturnFocusRef:n})=>{let{isModalOpen:a}=(0,o.useContentOwnershipContext)();return a?e(s).createElement(_,{flags:t,shouldReturnFocusRef:n}):null}),N=(0,s.createContext)({isModalOpen:!1,openModal:()=>{},closeModal:()=>{}}),v=({children:t})=>{let[n,a]=(0,s.useState)(!1),[r,o]=(0,s.useState)(),i=(0,s.useCallback)(e=>{a(!0),e?.returnFocusRef&&o(e.returnFocusRef)},[]),l=(0,s.useCallback)(()=>a(!1),[]),c=(0,s.useMemo)(()=>({isModalOpen:n,openModal:i,closeModal:l}),[n,i,l]);return e(s).createElement(N.Provider,{value:c},e(s).createElement(e(s).Fragment,null,t,e(s).createElement(I,{shouldReturnFocusRef:r})))},O=()=>(0,s.useContext)(N);n.exports.ContentOwnershipContextProvider=v,n.exports.withContentOwnershipContextProvider=t=>n=>e(s).createElement(v,null,e(s).createElement(t,n)),n.exports.useContentOwnershipContext=O,n.exports.ContentOwnershipContextConsumer=({children:e})=>e(O())}),n("kuujH",function(e,n){let a=(0,t("cgtv4").defineMessages)({modalTitleEnabledForAllContent:{id:"content-ownership.content-header.owner-modal.title-enabled-for-all-content",defaultMessage:"Change owner"},modalBodyEnabledForAllContent:{id:"content-ownership.content-header.owner-modal.body-enabled-for-all-content",defaultMessage:"Choose a new owner"},modalCurrentOwner:{id:"content-ownership.content-header.owner-modal.current-owner",defaultMessage:"Current owner"},modalCancel:{id:"content-ownership.content-header.owner-modal.cancel-button",defaultMessage:"Cancel"},modalChangeOwner:{id:"content-ownership.content-header.owner-modal.change-owner-button",defaultMessage:"Change owner"},confirmModalTitle:{id:"content-ownership.content-header.confirm-owner-modal.title",defaultMessage:"Confirm this ownership transfer?"},confirmModalBody:{id:"content-ownership.content-header.confirm-owner-modal.body",defaultMessage:"Once you transfer ownership of this content, only an admin or the new owner can reverse it. <button>Learn more</button>"},confirmModalCancel:{id:"content-ownership.content-header.confirm-owner-modal.cancel-button",defaultMessage:"Cancel"},confirmModalConfirmChangeOwner:{id:"content-ownership.content-header.confirm-owner-modal.confirm-change-owner-button",defaultMessage:"Continue"},confirmModalCurrentOwner:{id:"content-ownership.content-header.confirm-owner-modal.current-owner",defaultMessage:"Current owner"},confirmModalNewOwner:{id:"content-ownership.content-header.confirm-owner-modal.new-owner",defaultMessage:"New owner"},bylineButtonTooltip:{id:"content-ownership.byline-button.tooltip",defaultMessage:"Manage ownership"},bylineButtonTooltipReadOnly:{id:"content-ownership.byline-button.tooltip.read.only",defaultMessage:"More details"},popupTriggerLabel:{id:"content-ownership.byline-popup.trigger-label",defaultMessage:"Manage ownership"},popupChangeOwnerButton:{id:"content-ownership.byline-popup.change-owner-button",defaultMessage:"Change owner"},popupCreatedBy:{id:"content-ownership.byline-popup.created-by",defaultMessage:"Created by <b>{user}</b> on {date}"},popupCreatedByUnknownDate:{id:"content-ownership.byline-popup.created-by.unknown-date",defaultMessage:"Created by <b>{user}</b> on unknown date"},popupLastOwnedBy:{id:"content-ownership.byline-popup.last-owned-by",defaultMessage:"Last owned by <b>{user}</b>"},changeWarningTitle:{id:"content-ownership.change-warning-dialog.title",defaultMessage:"This change can’t be reversed"},changeWarningBody:{id:"content-ownership.change-warning-dialog.body",defaultMessage:"Once you transfer ownership to someone else, you won’t be able to reverse it."},changeWarningCancel:{id:"content-ownership.change-warning-dialog.cancel-button",defaultMessage:"Cancel"},changeWarningContinue:{id:"content-ownership.change-warning-dialog.continue-button",defaultMessage:"Continue"},bylineMainText:{id:"content-ownership.byline.main-text",defaultMessage:"Owned by {user}"},abbreviatedBylineMainText:{id:"content-ownership.byline.abbreviated-main-text",defaultMessage:"By {user}"},bylineMainTextCreatedByConfluence:{id:"content-ownership.byline.main-text.created-by-confluence",defaultMessage:"Owned by {user}, created by Confluence"},abbreviatedBylineOwnerMessage:{id:"content-ownership.byline.abbreviated-owner-message",defaultMessage:"Owner"},bylineMainTextWithTemplate:{id:"content-ownership.byline.main-text.with-template",defaultMessage:"Owned by {user}, created {withTemplate}"},ownerWithContributorsDropdownTooltip:{id:"content-ownership.byline.owner-with-contributors-dropdown.tooltip",defaultMessage:"View owner and contributors"},ownerRestrictionTitle:{id:"content-ownership.owner.restriction.title",defaultMessage:"This person doesn’t have edit access"},ownerRestrictionMessage:{id:"content-ownership.owner.restriction.message",defaultMessage:"To grant them ownership, you must first give them edit access to this content."},manageRestrictionButton:{id:"content-ownership.manage.restriction.button",defaultMessage:"Manage access"},ownerParentPageRestrictionTitle:{id:"content-ownership.owner.parent.page.restriction.title",defaultMessage:"This person doesn’t have edit access to this content and/or its parent."},ownerParentPageRestrictionMessage:{id:"content-ownership.owner.parent.page.restriction.message",defaultMessage:"To grant them ownership, you must provide them edit access to this and any necessary parent items."},manageParentPageRestrictionButton:{id:"content-ownership.manage.parent.page.restriction.button",defaultMessage:"Learn more"},ownerPremiumRestrictionTitle:{id:"content-ownership.owner.premium.restriction.title",defaultMessage:"This person doesn’t have access to this content and/or parent content."},ownerPremiumRestrictionMessage:{id:"content-ownership.owner.premium.restriction.message",defaultMessage:"To grant them ownership, you must provide them edit access to this and any other necessary parent items."},managePremiumRestrictionButton:{id:"content-ownership.manage.premium.restriction.button",defaultMessage:"Inspect permissions"},ownerSpaceRestrictionTitle:{id:"content-ownership.owner.space.restriction.title",defaultMessage:"This person doesn’t have access to this space"},ownerSpaceRestrictionMessage:{id:"content-ownership.owner.space.restriction.message",defaultMessage:"In order to grant them ownership, they must have access to this space."},manageSpaceRestrictionButton:{id:"content-ownership.manage.space.restriction.button",defaultMessage:"Contact space admins"},manageSpaceRestrictionButtonAdmin:{id:"content-ownership.manage.space.restriction.button.admin",defaultMessage:"Manage space permissions"},changeOwnerSpotlightTitle:{id:"content-ownership.change-owner.spotlight.title",defaultMessage:"Change who owns a page"},changeOwnerSpotlightBody:{id:"content-ownership.change-owner.spotlight.body",defaultMessage:"You (or your admin) can now transfer ownership of content to someone else."},changeOwnerSpotlightLearnMoreButton:{id:"content-ownership.change-owner.spotlight.learn-more-button",defaultMessage:"Learn more"},changeOwnerSpotlightOkButton:{id:"content-ownership.change-owner.spotlight.ok-button",defaultMessage:"OK"},requestSpacePermissionAdminEmailSubject:{id:"content-ownership.mailto.subject.space",defaultMessage:"[Confluence] A Confluence user needs space access"},requestSpacePermissionAdminEmailBody:{id:"content-ownership.mailto.body.space",defaultMessage:"Hi,%0D%0A%0D%0AI have someone who needs access to a space, but neither of us can change their access level. Can you take a look?%0D%0A%0D%0AThanks!%0D%0A{currentUser}%0D%0A%0D%0AUser who needs access:%0D%0A{requestedUser}%0D%0A%0D%0ALink to permissions for space “{spaceName}”:%0D%0A{spacePermissionsUrl}%0D%0A%0D%0ALink to content “{pageTitle}”:%0D%0A{pageUrl}"},successFlagMessage:{id:"content-ownership.change-owner.success-flag-message",defaultMessage:"Ownership transferred to {user}"},errorFlagMessage:{id:"content-ownership.change-owner.error-flag-message",defaultMessage:"Failed to transfer ownership"},closeModal:{id:"content-ownership.change-owner.close-modal-label",defaultMessage:"Close modal"},ownershipTransfer:{id:"content-ownership.ownership-transfer.arrow-right-icon",defaultMessage:"Ownership Transfer"},poweredByTemplates:{id:"content-ownership.powered-by-templates.byline.text",defaultMessage:"with a template"}}),s=(0,t("cgtv4").defineMessages)({changeOwnerSpotlightTitle:{id:"content-ownership.change-owner.spotlight.title.livedocs",defaultMessage:"Change who owns a page or live doc"}}),r=(0,t("jhwJP").mergeLiveDocI18n)(a,s);e.exports.i18n=r}),n("aNtZv",function(e,n){var a=t("42omo");let s=(0,a.forwardRef)(({as:e="div",style:n,...s},r)=>a.createElement(e,{...s,style:n,ref:r,className:(0,t("gMc0m").default)(["_11q71917 _2rkofajl _1yt4pxbi _1e0c1txw _19pkpxbi",s.className])})),r=(0,a.forwardRef)(({as:e="p",style:n,...s},r)=>a.createElement(e,{...s,style:n,ref:r,className:(0,t("gMc0m").default)(["_18s8vqg6",s.className])})),o=(0,a.forwardRef)(({as:e="p",style:n,...s},r)=>a.createElement(e,{...s,style:n,ref:r,className:(0,t("gMc0m").default)(["_18u0pxbi _k48pmoej",s.className])})),i=(0,a.forwardRef)(({as:e="div",style:n,...s},r)=>a.createElement(e,{...s,style:n,ref:r,className:(0,t("gMc0m").default)(["_2lx21bp4 _11lvze3t _fl8bpxbi _1br9ze3t _pm7ize3t",s.className])})),l=(0,a.forwardRef)(({as:e="div",style:n,...s},r)=>a.createElement(e,{...s,style:n,ref:r,className:(0,t("gMc0m").default)(["_11c82smr _1e0c1txw",s.className])}));(0,a.forwardRef)(({as:e="input",style:n,...s},r)=>a.createElement(e,{...s,style:n,ref:r,className:(0,t("gMc0m").default)(["_19itglyw _4t3iidpf _1bsbidpf _nt751r31 _49pcglyw _1hvw1o36 _1ohhglyw",s.className])}));let c=(0,a.forwardRef)(({as:e="div",style:n,...s},r)=>a.createElement(e,{...s,style:n,ref:r,className:(0,t("gMc0m").default)(["_1e0c1txw _2lx2vrvc _1bahesu3 _1bsb1osq _oteh12x7",s.className])}));(0,a.forwardRef)(({as:e="div",style:n,...s},r)=>a.createElement(e,{...s,style:n,ref:r,className:(0,t("gMc0m").default)(["_80omtlke _1bsbf6fq _1e0c1txw _1bah1h6o",s.className])}));let d=(0,a.forwardRef)(({as:e="div",style:n,...s},r)=>a.createElement(e,{...s,style:n,ref:r,className:(0,t("gMc0m").default)(["_1e0c1txw",s.className])})),u=(0,a.forwardRef)(({as:e="span",style:n,...s},r)=>a.createElement(e,{...s,style:n,ref:r,className:(0,t("gMc0m").default)(["_2hwxv77o _15tynkob",s.className])})),p=(0,a.forwardRef)(({as:e="div",style:n,...s},r)=>a.createElement(e,{...s,style:n,ref:r,className:(0,t("gMc0m").default)(["_1yt4v47k _bfhkvuon _19pkv47k _1e0c1txw _4cvr1h6o _1bahitcz",s.className])})),m=(0,a.forwardRef)(({as:e="div",style:n,...s},r)=>a.createElement(e,{...s,style:n,ref:r,className:(0,t("gMc0m").default)(["_16jlbs82 _1o9zkb7n _i0dlf1ug _1e0c1txw _p12f1jje _1bah1h6o _1wpz1y6m",s.className])})),w=(0,a.forwardRef)(({as:e="div",style:n,...s},r)=>a.createElement(e,{...s,style:n,ref:r,className:(0,t("gMc0m").default)(["_18u012x7",s.className])})),f=(0,a.forwardRef)(({as:e="div",style:n,...s},r)=>a.createElement(e,{...s,style:n,ref:r,className:(0,t("gMc0m").default)(["_11c81o8v _syazazsu",s.className])})),g=(0,a.forwardRef)(({as:e="div",style:n,...s},r)=>a.createElement(e,{...s,style:n,ref:r,className:(0,t("gMc0m").default)(["_11c82smr _k48p1wq8 _syazi7uo _p12f5rga",s.className])})),h=(0,a.forwardRef)(({as:e="div",style:n,...s},r)=>a.createElement(e,{...s,style:n,ref:r,className:(0,t("gMc0m").default)(["_1yt4pxbi _y3gnv2br _1bsb1gwv",s.className])})),E=(0,a.forwardRef)(({as:e="div",style:n,...s},r)=>a.createElement(e,{...s,style:n,ref:r,className:(0,t("gMc0m").default)(["_1yt4ze3t _syazi7uo",s.className])})),y=(0,a.forwardRef)(({as:e="div",style:n,...s},r)=>a.createElement(e,{...s,style:n,ref:r,className:(0,t("gMc0m").default)(["_19pk1ejb",s.className])})),C=(0,a.forwardRef)(({as:e="div",style:n,...s},r)=>a.createElement(e,{...s,style:n,ref:r,className:(0,t("gMc0m").default)(["_1yt41lhn _4t3i1tcg",s.className])})),b=(0,a.forwardRef)(({as:e="span",style:n,...s},r)=>a.createElement(e,{...s,style:n,ref:r,className:(0,t("gMc0m").default)(["_kqswh2mm",s.className])})),M=(0,a.forwardRef)(({as:e="div",style:n,...s},r)=>a.createElement(e,{...s,style:n,ref:r,className:(0,t("gMc0m").default)(["_11c82smr _kqswstnw _1pbyxnxo _1ltvmofv _154i1ul9",s.className])})),S=(0,a.forwardRef)(({as:e="div",style:n,...s},r)=>a.createElement(e,{...s,style:n,ref:r,className:(0,t("gMc0m").default)(["_syaz15cr",s.className])})),R=(0,a.forwardRef)(({as:e="div",style:n,...s},r)=>a.createElement(e,{...s,style:n,ref:r,className:(0,t("gMc0m").default)(["_4t3ildb6 _1e0c1txw _4cvr1h6o _1wpz1y6m",s.className])})),_=(0,a.forwardRef)(({as:e="p",style:n,...s},r)=>a.createElement(e,{...s,style:n,ref:r,className:(0,t("gMc0m").default)(["_11c81o8v _syazazsu _k48p1pd9",s.className])}));e.exports.PermissionWarningContainer=s,e.exports.Text=r,e.exports.TextStrong=o,e.exports.FlexColumn=i,e.exports.Wrapper=l,e.exports.FlexContainer=c,e.exports.BylineContainer=d,e.exports.BylineMessageContainer=u,e.exports.OwnerSwapBackground=p,e.exports.OwnerSwapIndividualContainer=m,e.exports.OwnerSwapIndividualTextContainer=w,e.exports.OwnerSwapIndividualTitle=f,e.exports.OwnerSwapIndividualName=g,e.exports.PopupContainer=h,e.exports.PopupUserDetailsContainer=E,e.exports.PopupButtonContainer=y,e.exports.OwnerSwapArrow=C,e.exports.OnboardingContainer=b,e.exports.StyledSpotlightCardWrapper=M,e.exports.CustomHeading=S,e.exports.OwnerSwapArrowContainer=R,e.exports.ModalLabel=_}),n("2E1L5",function(e,t){e.exports.PAGE_OWNERSHIP_EP_MESSAGE="confluence_page_ownership_changeboarding",e.exports.CONTENT_OWNERSHIP_WEB_ITEM_ID="change-page-ownership-link",e.exports.DEFAULT_CONTRIBUTORS_FETCH_LIMIT=10,e.exports.EXPECTED_ERROR_MESSAGES={USER_IS_NULL:"You cannot set an owner as an anonymous user.",USER_NOT_FOUND:"Owner id is an invalid account id.",USER_MISSING_PAGE_PERMISSION:"New owner must have view and edit permission on the content.",CONTENT_ID_INVALID:"Content id is invalid.",INSUFFICIENT_PERMISSIONS:"You must be the content creator, owner, or a space admin to set the owner."},e.exports.PARENT_PAGE_LEARN_MORE_URL="https://support.atlassian.com/confluence-cloud/docs/add-or-remove-page-restrictions/",e.exports.CHANGEBOARDING_LEARN_MORE_LINK="https://support.atlassian.com/confluence-cloud/docs/transfer-ownership-of-your-page-to-another-person/",e.exports.CONFIRM_MODAL_LEARN_MORE_LINK="https://support.atlassian.com/confluence-cloud/docs/transfer-ownership-of-your-page-to-another-person/"}),n("68BwE",function(e,n){var a=t("42omo");let s=(0,t("eSUdr").default)`query ContentOwnershipCheckRestrictionsQuery($accountId:String!$contentId:ID!){userWithContentRestrictions(accountId:$accountId contentId:$contentId){accountId hasSpaceEditPermission hasSpaceViewPermission restrictingContent{id links{webui base}}operations{operation}}}`,r=async(e,n)=>{let a={isUserRestricted:!1,isSpaceRestricted:!1,isParentPageRestricted:!1,isEditPageRestricted:!1};if(!e)return a;let r=await (0,t("hp2SH").getApolloClient)().query({query:s,variables:{contentId:e,accountId:n}}),o=r?.data?.userWithContentRestrictions;return o&&((o?.operations??[]).some(e=>e?.operation==="update")||(a.isUserRestricted=!0,a.isEditPageRestricted=!0),(!o.hasSpaceEditPermission||o.restrictingContent?.id)&&(a.isUserRestricted=!0,o.hasSpaceEditPermission||(a.isSpaceRestricted=!0),o.restrictingContent?.id&&(a.isParentPageRestricted=!0))),a},o=e=>({id:e?.accountId,name:e?.displayName,avatarUrl:e?.profilePicture?.path});e.exports.checkIsUserRestricted=r,e.exports.parseContributors=e=>{let t=e?.content?.nodes?.[0],n=e?.contentContributors?.nodes?.map(o)||[],a=o(t?.version?.by),s=o(t?.history?.ownedBy);return[s,...a.id===s.id?[]:[a],...n.filter(({id:e})=>e!==s.id&&e!==a.id)]},e.exports.useSPAViewContext=()=>(0,a.useContext)(t("1ytiN").SPAViewContext),e.exports.useExperienceTrackerContext=()=>(0,a.useContext)(t("1kHsc").ExperienceTrackerContext),e.exports.generateMailtoLink=({intl:e,spaceAdmins:n,spacePermissionsUrl:a,spaceKey:s,contentId:r,requestedUser:o,currentUser:i,pageTitle:l})=>{let c=n?.filter(e=>e.email)?.map(e=>e.email)?.join(","),d=e.formatMessage(t("kuujH").i18n.requestSpacePermissionAdminEmailSubject),u={spacePermissionsUrl:`${window.location.origin}${a}`,requestedUser:o,currentUser:i,pageTitle:l,pageUrl:`${window.location.origin}/spaces/${s}/pages/${r}`,spaceName:s},p=e.formatMessage(t("kuujH").i18n.requestSpacePermissionAdminEmailBody,u);return`mailto:${c}?subject=${d}&body=${p}`}}),n("jgcNz",function(e,n){var a=t("42omo");e.exports.useContentInfo=({contentId:e})=>{let[n,s]=(0,a.useState)(""),[r,o]=(0,a.useState)(!1),{data:i}=(0,t("xQxzY").useQuery)((0,t("eSUdr").default)`query useContentInfoContentOwnershipContentInfoQuery($contentId:ID!){singleContent(id:$contentId){id title status}}`,{variables:{contentId:e}});return(0,a.useEffect)(()=>{let e=i?.singleContent?.title??"",t=i?.singleContent?.status==="archived";s(e),o(t)},[i]),{contentTitle:n,isArchived:r}}}),n("3SLf9",function(e,n){var a=t("42omo");e.exports.useIsAllowedToChangeOwner=e=>{let{userId:n}=(0,t("bQm3c").useSessionData)(),s=(0,t("5k5SG").useIsSpaceOrSiteAdmin)();return(0,a.useMemo)(()=>{if(!n)return!1;let t=e===n;return s||t},[s,e,n])}}),n("5k5SG",function(e,n){var a=t("42omo");e.exports.useIsSpaceOrSiteAdmin=()=>{let[e]=(0,t("ep3mz").usePageSpaceKey)(),{isSiteAdmin:n}=(0,t("68BwE").useSPAViewContext)(),[s,r]=(0,a.useState)(!1),{data:o}=(0,t("xQxzY").useQuery)((0,t("eSUdr").default)`query useIsSpaceOrSiteAdminSpaceAdminQuery($spaceKey:String!){space(key:$spaceKey){id currentUser{isAdmin}}}`,{variables:{spaceKey:e},skip:!e});return(0,a.useEffect)(()=>{r(o?.space?.currentUser?.isAdmin??!1)},[o]),n||s}});
//# sourceMappingURL=DetailsPanelHeaderIcon.839307bd.js.map
