function e(e){return e&&e.__esModule?e.default:e}function t(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}var n=globalThis,r={},o={},i=n.parcelRequired477;null==i&&(i=function(e){var t=r[e];if(void 0!==t)return t.exports;var n=o[e];if(void 0!==n){delete o[e];var i={id:e,exports:{}};return r[e]=i,n.call(i.exports,i,i.exports),i.exports}var s=Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s},i.register=function(e,t){o[e]=t},n.parcelRequired477=i);var s=i.register;n.lb||(n.lb=new Set,n.bq=[],n.rlb=e=>{n.lb.add(e),n.pq()},n.rwr=(e,t,r)=>{n.bq.push({b:e,r:t,d:r}),n.pq()},n.pq=()=>{var e=n.bq.find(e=>e.d.every(e=>n.lb.has(e)));e&&(n.bq=n.bq.filter(t=>t.b!==e.b),e.r(),n.pq())}),s("5SzHz",function(e,t){let n=()=>Promise.resolve({data:null,loading:!1,error:null}),r=async(e="")=>e?(0,i("dYU3e").query)({query:i("4ZxLt").default,variables:{spaceKey:e}}):n(),o=async(e="")=>r(e);e.exports.fetchSpaceDetail=r,e.exports.preloadSpaceDetail=o}),s("fbPMY",function(t,n){var r=i("42omo");let o={setRenderer:()=>{}},s=async({extension:t,forgeExtensionNode:n,hasCustomConfig:s,isInitialInsertion:a,createRenderFunction:c,onSubmit:l,onValidate:u})=>{let d,p=t;if(s){p={...t,properties:{...t.properties,resource:t.properties?.config?.resource,render:t.properties?.config?.render,title:t.properties?.config?.title,viewportSize:t.properties?.config?.viewportSize}};let e=()=>o.setRenderer(null);d={isInserting:a,bridge:{close:e,submit:({data:t})=>{let n=u(t);return l(n),n.keepEditing||e(),!0}},modalExtension:{type:"macroConfig",title:t.properties?.config?.title,closeModalExtension:e,modalWidth:t.properties?.config?.viewportSize,shouldCloseOnOverlayClick:!!(0,i("dh538").fg)("forge-ui-on-close-bridge-method"),shouldCloseOnEscapePress:!!(0,i("dh538").fg)("forge-ui-on-close-bridge-method")}}}let h=await c(p,d);o.setRenderer(()=>e(r).createElement("div",{className:(0,i("gMc0m").default)(["_1e0cglyw"])},h({node:n})))},a=async({extension:t,forgeExtensionNode:n,createRenderFunction:s})=>{let a=await s(t);o.setRenderer(()=>e(r).createElement("div",{className:(0,i("gMc0m").default)(["_1e0cglyw"])},a({node:n})))};t.exports.EditorForgeExtensionConfigHelperRenderer=()=>{let[t,n]=e(r).useState(null);return o.setRenderer=e=>n(()=>e),t?t():null},t.exports.renderConfigHelper=s,t.exports.renderBodiedExtensionIframe=a}),s("fPsyy",function(e,t){let n=async({intl:e,editorActions:t,extensionHandlers:n,createAnalyticsEvent:r,externalToolbarItems:o})=>{let{buildManifest:s}=await i("hVZns");return s({intl:e,editorActions:t,parseNumber:i("7fDQr").parseNumber,extensionHandlerWithReference:n,createAnalyticsEvent:r,externalToolbarItems:o||[]})};e.exports.createChartsExtension=n}),s("7fDQr",function(e,t){e.exports.parseNumber=e=>{let t=Number(e=e.replace(/[,$%]/g,""));return Number.isNaN(t)?null:t}}),s("hVZns",function(e,t){let n=i("4mJKd")(5);e.exports=Promise.all([n("6wr18"),n("8vVzT"),n("8UKe0"),n("ffEVr"),n("bXHUH")]).then(()=>i("4dpqU"))}),s("4mJKd",function(e,t){e.exports=e=>t=>import(i("8tirZ").shardUrl(i("02nRr").resolve(t),e))}),s("8tirZ",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.applyShardToDomain=s,e.exports.domainShardingKey=void 0,e.exports.getDomainShardIndex=r,e.exports.shardUrl=function(e,t){return globalThis[n]?a(e,t):e},e.exports.shardUrlUnchecked=a;let n="__ATLASPACK_ENABLE_DOMAIN_SHARDS";function r(e,t){let n=t+1,r=e.split("").reduce((e,t)=>{let r=(e<<n)-e+t.charCodeAt(0);return r&r},0);return(r%=n)<0&&(r+=n),r}let o=/-\d+$/;function i(e){if(!o.test(e))return e;let t=e.lastIndexOf("-");return e.slice(0,t)}function s(e,t){let n=e.indexOf("."),r=0===t?"":`-${t-1}`;if(-1===n)return`${i(e)}${r}`;let o=i(e.slice(0,n));return`${o}${r}${e.slice(n)}`}function a(e,t){let n=new URL(e),o=r(function(e){let t=e.lastIndexOf("/");if(-1===t||t===e.length-1)throw Error("Expected an absolute URL with a file name, unable to apply sharding.");return e.slice(t+1)}(n.pathname),t);return n.hostname=s(n.hostname,o),n.toString()}e.exports.domainShardingKey=n}),s("02nRr",function(e,n){t(e.exports,"register",()=>r,e=>r=e),t(e.exports,"resolve",()=>o,e=>o=e);var r,o,i=new Map;r=function(e,t){for(var n=0;n<t.length-1;n+=2)i.set(t[n],{baseUrl:e,path:t[n+1]})},o=function(e){var t=i.get(e);if(null==t)throw Error("Could not resolve bundle with id "+e);return new URL(t.path,t.baseUrl).toString()}}),s("gH8jv",function(e,t){var n=i("rsHkn"),r=i("5zHV6"),o=i("cbvYp");let s=async e=>(await i("3oriB")).cardsExtensionProvider(e),a=async e=>(await i("bVGwu")).carouselExtensionProvider(e),c=async e=>(await i("6DFLT")).searchExtensionProvider(e),l=async e=>(await i("6ZDrU")).spotlightExtensionProvider(e),u=async e=>(await i("jYzll")).linksMenuExtensionProvider(e),d=async e=>(await i("8g4i6")).sectionExtensionProvider(e),p=async e=>{let t=function(e,t){let p=[];return p.push(async t=>(await l({contentId:e,mode:i("4cOi8").ExtensionMode.EDITOR,propsProvider:o.ConfluenceDependenciesProvider}))(t)),p.push(async t=>(await a({contentId:e,propsProvider:o.ConfluenceDependenciesProvider}))(t)),p.push(async t=>(await s({contentId:e,mode:i("4cOi8").ExtensionMode.EDITOR,propsProvider:o.ConfluenceDependenciesProvider}))(t)),t&&(p.push(async t=>(await u({contentId:e,mode:i("4cOi8").ExtensionMode.EDITOR,propsProvider:o.ConfluenceDependenciesProvider}))(t)),p.push(async t=>(await d({contentId:e,mode:i("4cOi8").ExtensionMode.EDITOR,propsProvider:o.ConfluenceDependenciesProvider,getSectionExtensionContents:r.getSectionExtensionContents}))(t)),p.push(n.hubElementPlaceholderExtensionProvider),p.push(async t=>(await c({contentId:e,mode:i("4cOi8").ExtensionMode.EDITOR,propsProvider:o.ConfluenceDependenciesProvider}))(t))),p}(e.contentId,e.allowCompanyHubExclusiveExtensions),p=[];for(let n of t)try{let t=await n(e),r=await t.getExtensions();p.push(...r)}catch(e){(0,i("5ZqQS").getMonitoringClient)().submitError(e,{attribution:i("3IBnw").Attribution.COMPANY_HUB})}return p};e.exports.createPremiumExtensionManifests=p}),s("rsHkn",function(t,n){var r=i("l998X");i("42omo");var o=i("4wH3g");let s=(0,i("cgtv4").defineMessages)({title:{id:"company-hub.hub-element-placeholder.manifest.extension-title",defaultMessage:"Hub element placeholder"}}),a=e(o)({__loadable_id__:"xUz9t",name:"HubElementPlaceholderExtension",loader:async()=>(await i("cyPov")).HubElementPlaceholderExtension,loading:()=>(0,r.jsx)(r.Fragment,{})}),c=async({contentId:e,editorActions:t,openConfigPanel:n,intl:o})=>{let c=i("bl1ay").HUB_ELEMENT_PLACEHOLDER_EXTENSION_TYPE,l=o.formatMessage(s.title),u=async()=>{let e=t?.getSelectedNode()?.toJSON(),r=e?.attrs?.localId;r&&n&&n(r)},d=async()=>({node:o})=>t?(0,r.jsx)(a,{openConfigPanel:n,editorActions:t,extensionNode:o,contentId:e}):null;return new(0,i("bre0g").default)([{key:i("bl1ay").HUB_ELEMENT_PLACEHOLDER_EXTENSION_KEY,icons:{48:()=>i("lkdwc").then(({default:e})=>()=>(0,r.jsx)(e,{color:"var(--ds-icon-subtle, #505258)",label:"",spacing:"spacious"}))},title:l,type:c,description:"",modules:{nodes:{default:{type:"extension",render:d,update:u}}}}])};t.exports.hubElementPlaceholderExtensionProvider=c}),s("cyPov",function(e,t){let n=i("4mJKd")(5);e.exports=Promise.all([n("a5wu4"),n("hwLGf"),n("9MSTM"),n("aYx1O"),n("ht5OT"),n("sj9Xz"),n("65u2R"),n("bj2rY"),n("jSdjl"),n("l2EUC"),n("dChec"),n("2YffH"),n("f35QR"),n("eVYW1"),n("ls0Um"),n("020xd"),n("eTBsW"),n("6HBYC"),n("1oiJ6"),n("huUvS"),n("3RdRc"),n("98UJI"),n("b0cmi"),n("51haJ"),n("jg5LT"),n("7f9Fz"),n("9XYQ9"),n("jp3gT"),n("jTaSF"),n("8fXIr"),n("dVkhd"),n("7jSfd"),n("4HZlX"),n("kDqHr"),n("6wr18"),n("kjZZD"),n("dTsOE"),n("hhss7"),n("7EorR"),n("awqCy"),n("Wowvf"),n("ffEVr"),n("bTmOC"),n("lFZaH"),n("5IgYU"),n("5zcov")]).then(()=>i("iyWZb"))}),s("lkdwc",function(e,t){e.exports=i("4mJKd")(5)("jle6Z").then(()=>i("iNP4c"))}),s("5zHV6",function(e,t){e.exports.getSectionExtensionContents=({header:e,subHeader:t,placeholderTitle:n})=>[{type:"extensionFrame",content:[{type:"heading",attrs:{level:1,localId:null},content:[{type:"text",text:`${e}`}]},{type:"paragraph",attrs:{localId:null},content:[{type:"text",text:`${t}`}]},{type:"paragraph",attrs:{localId:null}},{type:"extension",attrs:{extensionKey:i("bl1ay").HUB_ELEMENT_PLACEHOLDER_EXTENSION_KEY,extensionType:i("bl1ay").HUB_ELEMENT_PLACEHOLDER_EXTENSION_TYPE,parameters:{extensionTitle:n},text:null,layout:"default",localId:null}}]}]}),s("3oriB",function(e,t){let n=i("4mJKd")(5);e.exports=Promise.all([n("9MSTM"),n("aYx1O"),n("65u2R"),n("bj2rY"),n("jSdjl"),n("l2EUC"),n("2YffH"),n("f35QR"),n("eVYW1"),n("ls0Um"),n("020xd"),n("eTBsW"),n("bYxCZ"),n("6HBYC"),n("1oiJ6"),n("huUvS"),n("1wZEW"),n("98UJI"),n("hwLGf"),n("2B6wT"),n("gKYwM"),n("a5wu4"),n("b0cmi"),n("51haJ"),n("1Jgsw"),n("lPQcc"),n("jg5LT"),n("7f9Fz"),n("9XYQ9"),n("jp3gT"),n("9ijrN"),n("aeEUI"),n("lUQAm"),n("hRUX7"),n("g4oYs"),n("cMlHc"),n("8KWDC"),n("bTmOC"),n("jTaSF"),n("8fXIr"),n("dVkhd"),n("7jSfd"),n("4HZlX"),n("kDqHr"),n("6wr18"),n("kjZZD"),n("ht5OT"),n("sj9Xz"),n("dTsOE"),n("3gJkK"),n("hhss7"),n("7EorR"),n("awqCy"),n("5IgYU"),n("Wowvf"),n("ffEVr"),n("fMsyQ")]).then(()=>i("kWs4M"))}),s("bVGwu",function(e,t){let n=i("4mJKd")(5);e.exports=Promise.all([n("9MSTM"),n("aYx1O"),n("ht5OT"),n("sj9Xz"),n("65u2R"),n("bj2rY"),n("jSdjl"),n("l2EUC"),n("2YffH"),n("f35QR"),n("eVYW1"),n("ls0Um"),n("020xd"),n("eTBsW"),n("bYxCZ"),n("6HBYC"),n("eDqo1"),n("lxiFd"),n("1oiJ6"),n("huUvS"),n("d9TJ0"),n("8nWJU"),n("kpq80"),n("98UJI"),n("2Mq3f"),n("hwLGf"),n("bTmOC"),n("a5wu4"),n("b0cmi"),n("51haJ"),n("jg5LT"),n("7f9Fz"),n("5uN9h"),n("9XYQ9"),n("6aY84"),n("5CaYW"),n("jp3gT"),n("lUQAm"),n("jTaSF"),n("8fXIr"),n("dVkhd"),n("7jSfd"),n("4HZlX"),n("kDqHr"),n("6vhrJ"),n("6wr18"),n("kjZZD"),n("dTsOE"),n("hhss7"),n("7EorR"),n("awqCy"),n("5IgYU"),n("Wowvf"),n("ffEVr"),n("dJOHz")]).then(()=>i("8Hi5s"))}),s("6DFLT",function(e,t){let n=i("4mJKd")(5);e.exports=Promise.all([n("65u2R"),n("bj2rY"),n("1wZEW"),n("2Mq3f"),n("8KWDC"),n("b0cmi"),n("51haJ"),n("lPQcc"),n("kjZZD"),n("7f9Fz"),n("9XYQ9"),n("aeEUI"),n("hRUX7"),n("g4oYs"),n("6wr18"),n("cMlHc"),n("hhss7"),n("7EorR"),n("awqCy"),n("5IgYU"),n("Wowvf"),n("ffEVr"),n("kUykF")]).then(()=>i("27HWy"))}),s("6ZDrU",function(e,t){let n=i("4mJKd")(5);e.exports=Promise.all([n("hwLGf"),n("9MSTM"),n("aYx1O"),n("ht5OT"),n("sj9Xz"),n("65u2R"),n("bj2rY"),n("jSdjl"),n("l2EUC"),n("dChec"),n("2YffH"),n("f35QR"),n("eVYW1"),n("ls0Um"),n("020xd"),n("eTBsW"),n("6HBYC"),n("1oiJ6"),n("huUvS"),n("3RdRc"),n("98UJI"),n("b0cmi"),n("51haJ"),n("jg5LT"),n("7f9Fz"),n("9XYQ9"),n("jp3gT"),n("jTaSF"),n("8fXIr"),n("dVkhd"),n("7jSfd"),n("4HZlX"),n("kDqHr"),n("6wr18"),n("kjZZD"),n("dTsOE"),n("hhss7"),n("7EorR"),n("awqCy"),n("5IgYU"),n("Wowvf"),n("ffEVr"),n("bTmOC"),n("lFZaH")]).then(()=>i("cBfKJ"))}),s("jYzll",function(e,t){let n=i("4mJKd")(5);e.exports=Promise.all([n("9MSTM"),n("aYx1O"),n("lUQAm"),n("65u2R"),n("bj2rY"),n("2YffH"),n("cgmWe"),n("2Mq3f"),n("b0cmi"),n("51haJ"),n("2Gceu"),n("jg5LT"),n("7f9Fz"),n("igTEs"),n("9XYQ9"),n("3kUQf"),n("iFEfD"),n("6wr18"),n("kjZZD"),n("hhss7"),n("7EorR"),n("awqCy"),n("5IgYU"),n("Wowvf"),n("ffEVr"),n("aUuEW")]).then(()=>i("aALia"))}),s("8g4i6",function(e,t){let n=i("4mJKd")(5);e.exports=Promise.all([n("6wr18"),n("2Mq3f"),n("b0cmi"),n("51haJ"),n("grbhN"),n("ffEVr"),n("5IgYU"),n("frwBA")]).then(()=>i("j1jge"))}),s("bfil7",function(t,n){var r,o=i("42omo"),s=i("67O0h");let a=e=>{switch(e){case"INPUT_EXCEEDS_TOKEN_LIMIT":case"EXCEEDING_CONTEXT_LENGTH_ERROR":return i("ls2Fy").aiFailedStateMessages.tokenLimitExceeded;case"INPUT_TOO_SHORT_TO_SUMMARIZE":case"INPUT_TOO_SHORT_TO_PROCESS":return i("ls2Fy").aiFailedStateMessages.inputTooShortError;case"RATE_LIMIT":case"OPENAI_RATE_LIMIT_USER_ABUSE":return i("ls2Fy").aiFailedStateMessages.rateLimitEnforced;case"NO_AGENT":case"FEATURE_DISABLED_ON_SITE":case"FEATURE_DISABLED":case"INTERNAL_SERVER_ERROR":case"PLUGIN_ERRORED":return i("ls2Fy").aiFailedStateMessages.internalServerError;case"HIPAA_CONTENT_DETECTED":return i("ls2Fy").aiFailedStateMessages.hipaaContentError;default:return i("ls2Fy").aiFailedStateMessages.apiError}},c=t=>t(i("ls2Fy").aiFailedStateMessages.aupViolationMessage,{auplink:t=>(0,i("dh538").fg)("dst-a11y__replace-anchor-with-link__editor-ai")?e(o).createElement(i("2Nwuj").default,{href:"https://www.atlassian.com/legal/acceptable-use-policy",target:"_blank"},t):e(o).createElement("a",{href:"https://www.atlassian.com/legal/acceptable-use-policy",target:"_blank"},t)}),l=t=>t(i("ls2Fy").aiFailedStateMessages.internalServerError,{link:t=>(0,i("dh538").fg)("dst-a11y__replace-anchor-with-link__editor-ai")?e(o).createElement(i("2Nwuj").default,{href:"https://status.atlassian.com/",target:"_blank"},t):e(o).createElement("a",{href:"https://status.atlassian.com/",target:"_blank"},t)}),u=t=>t(i("ls2Fy").aiFailedStateMessages.rateLimitEnforced,{link:t=>(0,i("dh538").fg)("dst-a11y__replace-anchor-with-link__editor-ai")?e(o).createElement(i("2Nwuj").default,{href:"https://support.atlassian.com/organization-administration/docs/excessive-use-in-atlassian-intelligence/",target:"_blank"},t):e(o).createElement("a",{href:"https://support.atlassian.com/organization-administration/docs/excessive-use-in-atlassian-intelligence/",target:"_blank"},t)});var d=i("3pfAb");let p=({node:e})=>{let{createAnalyticsEvent:t}=(0,i("inPa6").useAnalyticsEvents)();(0,o.useEffect)(()=>{let n=e=>e.reduce((e,t)=>{let{type:n,marks:r}=t;return e.nodes[n]=(e.nodes[n]||0)+1,Array.isArray(r)&&r.forEach(({type:t})=>{e.marks[t]=(e.marks[t]||0)+1}),e},{nodes:{},marks:{}}),r=()=>{let r=Array.isArray(e.content)?n(e.content):{},o={action:i("d925B").ACTION.RENDERED,actionSubject:i("d925B").ACTION_SUBJECT.BODIED_EXTENSION,actionSubjectId:i("d925B").ACTION_SUBJECT_ID.AI_PANELS_BODIED_EXTENSION,eventType:i("d925B").EVENT_TYPE.UI,attributes:{platform:"web",extensionKey:e.extensionKey,extensionType:e.extensionType,localId:e.localId,panelStatus:e.parameters?.macroMetadata?.status,nodeMarkCount:r}};t&&t(o)?.fire(d.FabricChannel.editor)};"requestIdleCallback"in window?window.requestIdleCallback(r):window.requestAnimationFrame(r)},[t,e.content,e.extensionKey,e.extensionType,e.localId,e.parameters?.macroMetadata?.status])},h=new(0,i("h9yJL").JSONTransformer),f=(e,t)=>{let n=[];for(let r of e)if(r?.type==="text"){let e=t.text(r.text??"");n.push(e)}else if(t.nodes[r.type]&&r.content){let e=f(r.content,t),o=t.nodes[r.type].create(r.attrs,e);n.push(o)}return n},m=({node:t,providerFactory:n})=>{let{formatMessage:r}=(0,i("8C5kA").default)(),{colorMode:d}=(0,i("cOrQJ").default)(),[m,y]=(0,o.useState)(void 0),[b,g]=(0,o.useState)(void 0);(0,o.useEffect)(()=>{let e=t.parameters?.macroMetadata?.status;if("failed"===e||"aup-violation"===e)switch(t.parameters?.content){case"ACCEPTABLE_USE_VIOLATIONS":y(c(r));break;case"NO_AGENT":case"FEATURE_DISABLED_ON_SITE":case"FEATURE_DISABLED":case"INTERNAL_SERVER_ERROR":case"PLUGIN_ERRORED":y(l(r));break;case"RATE_LIMIT":case"OPENAI_RATE_LIMIT_USER_ABUSE":y(u(r));break;default:y(r(a(t.parameters?.content??"API_FAILED")))}g(d)},[t.parameters?.macroMetadata?.status,t.parameters?.content,r,d]),p({node:t});let x=e(o).useMemo(()=>!t?.content||m?null:new(0,i("b7FrM").ADFEncoder)(()=>h).encode(h.encode(i("iyDxB").defaultSchema.nodes.doc.create({},i("5SAOw").Fragment.from(f(t.content,i("iyDxB").defaultSchema))))),[t.content,m]);return m?e(o).createElement("div",{className:(0,i("gMc0m").default)(["_2rko6tcb _ca0qe4h9 _u5f3e4h9 _n3tde4h9 _19bve4h9","light"===b?"_11q77bg2":"_11q71i7g"])},e(o).createElement("div",{className:(0,i("gMc0m").default)(["_2rko12b0 _bfhk1bhr"])},e(o).createElement("div",{className:(0,i("gMc0m").default)(["_ca0qpxbi _u5f3pxbi _n3tdpxbi _19bvpxbi"])},e(o).createElement(i("aoVih").default,{appearance:"error",title:""},e(o).createElement(i("iXCQx").default,{as:"p"},m))))):x?e(o).createElement("div",{className:(0,i("gMc0m").default)(["_2rko6tcb _ca0qe4h9 _u5f3e4h9 _n3tde4h9 _19bve4h9","light"===b?"_11q77bg2":"_11q71i7g"])},e(o).createElement("div",{className:(0,i("gMc0m").default)(["_2rko12b0 _bfhk1bhr"])},e(o).createElement("div",{className:(0,i("gMc0m").default)(["_ca0qpxbi _u5f3pxbi _n3tdpxbi _19bvpxbi"])},e(o).createElement(i("lspPP").RendererActionsContext,null,e(o).createElement(s.default,{document:x,appearance:"full-width",dataProviders:n}))))):null};var y=({intl:t,providerFactory:n})=>({title:t.formatMessage(i("7ShCl").aiMessages.actionItemsPageTitle),type:"com.atlassian.ai-blocks",key:"ai-action-items-block",description:t.formatMessage(i("7ShCl").aiMessages.actionItemsPageDescription),icons:{48:async()=>()=>e(o).createElement(e(i("3Mg7y")),{label:t.formatMessage(i("7ShCl").aiMessages.actionItemsPageTitle)})},modules:{nodes:{aiActionItemsBodiedExtension:{type:"bodiedExtension",render:async()=>({node:t})=>e(o).createElement(m,{node:t,providerFactory:n})}}}}),b=({intl:t,providerFactory:n})=>({title:t.formatMessage(i("7ShCl").aiMessages.summarizePageTitle),type:"com.atlassian.ai-blocks",key:"ai-summary-block",description:t.formatMessage(i("7ShCl").aiMessages.summarisePageDescription),icons:{48:async()=>()=>e(o).createElement(e(i("3Mg7y")),{label:t.formatMessage(i("7ShCl").aiMessages.summarizePageTitle)})},modules:{nodes:{aiSummaryBodiedExtension:{type:"bodiedExtension",render:async()=>({node:t})=>e(o).createElement(m,{node:t,providerFactory:n})}}}});let g=({intl:e,providerFactory:t})=>{let n=b({intl:e,providerFactory:t}),r=y({intl:e,providerFactory:t}),o=[];return(0,i("lzcvT").isFedRamp)()||(o.push(n),o.push(r)),new(0,i("bre0g").default)(o)};var x=i("gH8jv"),E={};E=new URL("whiteboard-icon.f6879358.svg",import.meta.url).toString();let v=(0,i("cgtv4").defineMessages)({whiteboardManifestDescription:{id:"whiteboard-extension.description",defaultMessage:"Create an empty whiteboard"},whiteboardManifestTitle:{id:"whiteboard-extension.title",defaultMessage:"Whiteboard extension"},createWhiteboardTitle:{id:"whiteboard-extension.create-whiteboard.title",defaultMessage:"Create whiteboard"},createWhiteboardRetrospectiveTitle:{id:"whiteboard-extension.create-retrospective.title",defaultMessage:"Create retrospective"},createWhiteboardDiagramTitle:{id:"whiteboard-extension.create-diagram.title",defaultMessage:"Create diagram"},createWhiteboardFlowchartTitle:{id:"whiteboard-extension.create-flowchart.title",defaultMessage:"Create flowchart"},createWhiteboardBrainstormingTitle:{id:"whiteboard-extension.create-brainstorming.title",defaultMessage:"Create brainstorm session"},createWhiteboardRoadmapTitle:{id:"whiteboard-extension.create-roadmap.title",defaultMessage:"Create roadmap"},createWhiteboardDescription:{id:"whiteboard-extension.create-whiteboard.description",defaultMessage:"Create a blank whiteboard"},createWhiteboardRetrospectiveDescription:{id:"whiteboard-extension.create-retrospective.description",defaultMessage:"Create a whiteboard using the simple retrospective template"},createWhiteboardDiagramDescription:{id:"whiteboard-extension.create-diagram.description",defaultMessage:"Create a whiteboard using the flowchart template"},createWhiteboardFlowchartDescription:{id:"whiteboard-extension.create-flowchart.description",defaultMessage:"Create a whiteboard using the flowchart template"},createWhiteboardBrainstormingDescription:{id:"whiteboard-extension.create-brainstorming.description",defaultMessage:"Create a whiteboard using the brainwriting template"},createWhiteboardRoadmapDescription:{id:"whiteboard-extension.create-roadmap.description",defaultMessage:"Create a whiteboard using the product roadmap template"},createWhiteboardIconAltText:{id:"whiteboard-extension.create-whiteboard.icon-alt-text",defaultMessage:"Create whiteboard icon"},successFlagTitle:{id:"whiteboard-extension.success-flag.title",defaultMessage:"Whiteboard added to content tree"},successFlagAction:{id:"whiteboard-extension.success-flag.action",defaultMessage:"Go to whiteboard"},successFlagDescription:{id:"whiteboard-extension.success-flag.description",defaultMessage:"The source whiteboard has been created in the tree. Go to the whiteboard to move its location or change its permissions."},whiteboardDefaultErrorFlagTitle:{id:"whiteboard-extension.error-flag.title",defaultMessage:"We’re unable to create right now"},whiteboardDefaultErrorFlagDescription:{id:"whiteboard-extension.error-flag.description",defaultMessage:"Refresh or wait a few minutes and try again. If this keeps happening, contact support."},whiteboardParentPageMovedErrorTitle:{id:"whiteboard-extension.error.parent-page-moved-error-title",defaultMessage:"The parent has moved"},whiteboardParentPageMovedErrorDescription:{id:"whiteboard-extension.error.parent-page-moved-error-description",defaultMessage:"Refresh to create in the new location."},whiteboardPermissionRemovedErrorTitle:{id:"whiteboard-extension.error.permission-removed-error-title",defaultMessage:"We’re unable to create this content"},whiteboardPermissionRemovedErrorDescription:{id:"whiteboard-extension.error.permission-removed-error-description",defaultMessage:"You don’t have permission to create here or the space has been recently deleted."},whiteboardInvalidParentErrorTitle:{id:"whiteboard-extension.error.invalid-parent-error-title",defaultMessage:"We can’t create a whiteboard"},whiteboardInvalidParentErrorDescription:{id:"whiteboard-extension.error.invalid-parent-error-description",defaultMessage:"This page was deleted or archived. You can create a whiteboard on a different page."},whiteboardFeaturedItemDescription:{id:"whiteboard-extension.featured.description",defaultMessage:"Use a whiteboard to add visuals to your page"}}),_=(0,i("cgtv4").defineMessages)({whiteboardInvalidParentErrorDescription:{id:"whiteboard-extension.error.invalid-parent-error-description.livedocs",defaultMessage:"This item was deleted or archived. You can create a whiteboard on a different page."}}),w=(0,i("jhwJP").mergeLiveDocI18n)(v,_),I=e=>!!e&&"graphQLErrors"in e&&e.graphQLErrors?.some(e=>e.extensions.data.errors.some(e=>e.message.key.includes("The parent space does not match the desired space"))),S=e=>!!e&&"graphQLErrors"in e&&e.graphQLErrors?.some(e=>e.extensions.data.errors.some(e=>e.message.key.includes("Invalid potential parent passed"))),T=e=>I(e)?{title:w.whiteboardParentPageMovedErrorTitle,description:w.whiteboardParentPageMovedErrorDescription}:S(e)?{title:w.whiteboardInvalidParentErrorTitle,description:w.whiteboardInvalidParentErrorDescription}:(0,i("1uFM6").isUnauthorizedError)(e)?{title:w.whiteboardPermissionRemovedErrorTitle,description:w.whiteboardPermissionRemovedErrorDescription}:null,C=(0,i("eSUdr").default)`mutation CreateContentInlineMutation($createdInContentId:ID!$spaceKey:String){createContentInline(input:{createdInContentId:$createdInContentId spaceKey:$spaceKey type:"whiteboard"}){id}}`;async function P(e,t,n,r,o){let s=await (0,i("hp2SH").getApolloClient)().mutate({mutation:C,variables:{createdInContentId:e,spaceKey:n}}),a=s.data?.createContentInline.id;if(!a)throw Error("no content id present");let c=o?.({type:"sendTrackEvent",data:{action:"createdByFlow",actionSubject:"content",objectType:"whiteboard",objectId:a,containerType:"space",containerId:t,source:"createContentHandler",attributes:{flow:"inlineWhiteboardCreation",contentType:"whiteboard",collabService:"canvas-relay",templateKey:r}}});return c?.fire(),(0,i("fhofE").getFullWhiteboardUrl)(a,n)}let N=(t,n,r,s,a,c,l)=>async()=>{try{let u=l??"blank";s?.start({name:i("irVI7").CREATE_WHITEBOARD_EXPERIENCE,timeout:i("aJPUt").ExperienceTimeout.CREATE_CONTENT,attributes:{flow:"inlinePageCreation",template:u}});let d=await P(t,n,r,u,a);await c?.showFlag({type:"success-circle",title:e(o).createElement(i("gtD4K").default,w.successFlagTitle),actions:[{content:e(o).createElement(i("gtD4K").default,w.successFlagAction),href:d}],description:e(o).createElement(i("gtD4K").default,w.successFlagDescription)}),s?.succeed({name:i("irVI7").CREATE_WHITEBOARD_EXPERIENCE});let p=new URL(d),h=i("1NBp8").EDIT_PAGE_V2.toUrl({contentType:"pages",spaceKey:r,contentId:t});return l&&p.searchParams.set(i("hQnHK").INSERT_TEMPLATE_WITH_KEY_QUERY_PARAM,l),p.searchParams.set(i("hQnHK").CREATED_FROM_SLUG,h),window.open(p,"_blank","noreferrer, noopener"),{type:"embedCard",attrs:{url:d}}}catch(n){let t=T(n);t?(await c?.showErrorFlag({title:e(o).createElement(i("gtD4K").default,t.title),description:e(o).createElement(i("gtD4K").default,t.description)}),s?.succeed({name:i("irVI7").CREATE_WHITEBOARD_EXPERIENCE,attributes:{abortReason:"expectedErrorMessage"}})):((0,i("5ZqQS").getMonitoringClient)().submitError(n,{attribution:i("3IBnw").Attribution.WHITEBOARDS}),await c?.showErrorFlag({title:e(o).createElement(i("gtD4K").default,w.whiteboardDefaultErrorFlagTitle),description:e(o).createElement(i("gtD4K").default,w.whiteboardDefaultErrorFlagDescription)}),s?.stopOnError({name:i("irVI7").CREATE_WHITEBOARD_EXPERIENCE,error:n,attributes:{cteTraceId:(0,i("jn9ek").getTraceIdFromApolloError)(n)}})),(0,i("7Sm4c").markErrorAsHandled)(n)}},O=[{key:"whiteboard",title:w.createWhiteboardTitle,description:w.createWhiteboardDescription},{key:"retrospective",title:w.createWhiteboardRetrospectiveTitle,description:w.createWhiteboardRetrospectiveDescription,templateKey:"simple-retrospective"},{key:"diagram",title:w.createWhiteboardDiagramTitle,description:w.createWhiteboardDiagramDescription,templateKey:"flow-chart",priority:-200},{key:"flowchart",title:w.createWhiteboardFlowchartTitle,description:w.createWhiteboardFlowchartDescription,templateKey:"flow-chart"},{key:"brainstorming",title:w.createWhiteboardBrainstormingTitle,description:w.createWhiteboardBrainstormingDescription,templateKey:"brainwriting"},{key:"roadmap",title:w.createWhiteboardRoadmapTitle,description:w.createWhiteboardRoadmapDescription,templateKey:"product-roadmap"}],A=({pageId:t,spaceId:n,spaceKey:r,intl:s,flags:a,experienceTracker:c,createAnalyticsEvent:l,contentType:u,allowWhiteboardQuickInsert:d})=>{if("page"!==u)return{title:s.formatMessage(w.whiteboardManifestTitle),description:s.formatMessage(w.whiteboardManifestDescription),type:"com.atlassian.confluence.macro.core",key:"whiteboard-extension",icons:{48:()=>i("fSxYU")},modules:{quickInsert:[]}};let p=async()=>()=>e(o).createElement("img",{src:e(E),alt:s.formatMessage(w.createWhiteboardIconAltText)}),h=["diagram","whiteboard"],f=["wb_first","db_first"].includes((0,i("6mKj3").expVal)("cc_fd_wb_create_priority_in_slash_menu_experiment","cohort","control")),m=O.map(e=>({key:`create-${e.key}`,title:s.formatMessage(e.title),description:s.formatMessage(e.description),priority:f?e.priority:void 0,icon:p,action:N(t,n,r,c,l,a,e.templateKey),...h.includes(e.key)&&(0,i("9wGTI").fg)("confluence-whiteboards-quick-insert-eligible")?{featured:!0}:{}}));return{title:s.formatMessage(w.whiteboardManifestTitle),description:s.formatMessage(w.whiteboardManifestDescription),type:"com.atlassian.confluence.macro.core",key:"whiteboard-extension",icons:{48:p},modules:{quickInsert:d?m:[]}}};var M=i("cOau5");let R={type:"com.atlassian.confluence.migration",key:"nested-table",title:"Nested tables",description:"Allows you to nest tables within tables",icons:{48:()=>Promise.resolve(i("dk0le"))},modules:{}};var k=((r={}).int="number",r.percentage="string",r.url="string",r.cql="dynamic-fieldset",r.relativedate="string",r.group="string",r.color="string",r);let D={label:{type:"custom",label:"Label",isMultiple:!0,allowDuplicates:!0,isRequired:!0,options:{resolver:{type:"label"}}},text:{type:"string",op:"~",label:"Including text"},contributor:{key:"contributor",type:"custom",label:"Contributor",isMultiple:!0,options:{resolver:{type:"username"}}},creator:{key:"creator",type:"custom",label:"Creator",isMultiple:!0,options:{resolver:{type:"username"}}},mention:{key:"mention",type:"custom",label:"Mentioning",isMultiple:!0,options:{resolver:{type:"username"}}},parent:{type:"custom",label:"With parent",options:{resolver:{type:"confluence-content-by-id"}}},ancestor:{type:"custom",label:"With ancestor",isMultiple:!0,options:{resolver:{type:"confluence-content-by-id"}}},space:{type:"custom",label:"In space",isMultiple:!0,options:{resolver:{type:"spacekey"}}},created:{type:"string",op:">=",label:"Created after",description:"Enter dates as YYYY-MM-DD, or use CQL functions like `now(-1d)` for yesterday."},lastmodified:{type:"string",op:"<=",label:"Last modified",description:"Enter dates as YYYY-MM-DD, or use CQL functions like `now(-1d)` for yesterday."},title:{type:"string",op:"~",label:"With title"},type:{type:"enum",label:"Of type",isMultiple:!1,style:"select",items:[{value:"page",label:"Page"},{value:"blogpost",label:"Blog"},{value:"comment",label:"Comment"},{value:"attachment",label:"Attachment"}]}},F=()=>Object.keys(D).map(e=>({name:e,...D[e]})),j=(e,t,n,r,o)=>{let{pluginKey:i,macroName:s}=r;return e===[i,s,"param",n.name,o].join(".")?t:e},L=(e,t)=>{let{displayName:n,name:r,description:o}=e;return{label:j(n,r,e,t,"label"),name:e.name||"defaultParameterValue",defaultValue:e.defaultValue,description:j(o??"","",e,t,"desc"),isMultiple:!!e.multiple,isRequired:!!e.required,isHidden:!!e.hidden}},V=e=>/^(enum|string|number|boolean|date)$/.test(e),U=(e,t)=>{let n=$(e.type.name),r=L(e,t);if("custom"===n)return{...r,type:"custom",options:{resolver:{type:e.type.name}}};if("cql"===e.type.name){let n=j(e.displayName,e.name,e,t,"label");return"cql"===n&&(n="CQL"),{label:n,name:e.name||"defaultParameterValue",fields:F(),type:"fieldset",options:{isDynamic:!0,transformer:{type:e.type.name}}}}return"enum"===n?{...r,type:"enum",style:"select",defaultValue:r.defaultValue??void 0,items:(e.enumValues||[]).map(e=>({label:e,value:e}))}:"number"===n?{...r,type:"number",defaultValue:r.defaultValue??void 0}:"boolean"===n?{...r,type:"boolean",isRequired:!1,defaultValue:"string"==typeof r.defaultValue?"false"!==r.defaultValue:!!r.defaultValue}:{...r,type:n}},K=e=>e in k,$=e=>K(e)?k[e]:V(e)?e:"custom",H=async e=>{let t=Object.entries(e).map(([e,t])=>Array.isArray(t)?t.map(t=>`${e}=${t}`):`${e}=${t}`).flat().join("&"),n=await (0,i("f7B1p").cfetch)(`/wiki/json/attachmentsearch.action?${t}`),{attachments:r}=await n.json();return r?r.map(({title:e})=>({label:e,value:e})):[]},q=e=>async(t,n)=>{let r=[];return r.push(H({...e,title:t})),n&&r.push(Promise.resolve((Array.isArray(n)?n:[n]).map(e=>({label:e,value:e})))),(await Promise.all(r)).flat()},G=(e,t)=>{let n=t.contentId;switch(e.macroName){case"viewpdf":return q({pageId:n,fileTypes:["pdf"]});case"viewdoc":return q({pageId:n,fileTypes:["doc","docx"]});case"viewxls":return q({pageId:n,fileTypes:["xls","xlsx"]});case"viewppt":return q({pageId:n,fileTypes:["ppt","pptx"]});default:return q({pageId:n})}},W=async e=>{let t=await (0,i("f7B1p").cfetch)(`/wiki/rest/calendar-services/1.0/calendar/search/subcalendars.json?term=${e}&limit=25&showSubCalendarsInView=true`),n=await t.json();return n.success?n.payload.map(({subCalendar:{name:e,spaceName:t,id:n}})=>({label:e,description:t,value:n})):[]},B=async e=>{let t=await (0,i("f7B1p").cfetch)(`/wiki/rest/calendar-services/1.0/calendar/util/format/subcalendar/ids.json?subCalendarIds=${e.join("%2C")}`);return(await t.json()).map(({name:e,id:t})=>({label:e,value:t}))},z=async(e,t)=>{let n=[];return e&&n.push(W(e)),t&&(Array.isArray(t)?n.push(B(t)):n.push(B([t]))),(await Promise.all(n)).flat()},Y=(e=[])=>[].concat(e),Q=async e=>(0,i("f7B1p").cfetch)(`/wiki/rest/api/search?limit=10&expand=content.container.icon&cql=${e}`,{method:"GET",headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>e.results.map(e=>({label:e.content.title,value:e.content.id,icon:`/wiki${e.content.container.icon.path}`,description:e.content.container.name}))),X=e=>`id IN (${e.join(",")})`,Z=async(e,t,n)=>{let r=[],o=n&&n.type||"page, blogpost",i=Y(t),s=i.length?`OR ${X(i)}`:"";return e?r.push(Q(`type IN (${o}) AND title ~ "${e}*" ${s}`)):r.push(Q(`type IN (${o}) AND id in recentlyViewedContent(5) ${s}`)),(await Promise.all(r)).flat()},J={prefix:"",labelFunc:e=>e},ee=({resolver:e,prefixSettings:t})=>{let n=e=>{for(let n of t)if(e?.startsWith(n.prefix))return n},r=e=>{let t=n(e)?.prefix;return t?e.slice(t.length):e};return async(t,o)=>{let i=o,s={};if(Array.isArray(o)){for(let e of o)s[r(e)]=n(e);i=o.map(r)}else if(o){let e=r(o);s[e]=n(o),i=e}let a=n(t)??J;return t&&(t=r(t)),(await e(t,i)).map(e=>{let n=J;return t?n=a:e.value in s&&(n=s[e.value]??J),{...e,label:n.labelFunc(r(e.label)),value:`${n.prefix}${e.value}`}})}},et=({resolver:e,values:t})=>{let n=e=>-1===t.indexOf(e);return async(r,o)=>{Array.isArray(o)?o=o.filter(n):n(o)||(o="");let i=await e(r,o);return i.push(...t.map(e=>({label:e,value:e}))),i}},en=(0,i("eSUdr").default)`query LabelSearch($searchTerm:String!){labelSearch(searchText:$searchTerm limit:25){otherLabels{label}suggestedLabels{label}}}`,er=e=>e.map(e=>({label:e.label,value:e.label})),eo=async e=>{let t=(0,i("hp2SH").getApolloClient)(),{data:{labelSearch:n}}=await t.query({query:en,variables:{searchTerm:e}});return[...er(n.suggestedLabels),...er(n.otherLabels)]},ei=async(e,t)=>{let n=[];return e&&n.push(eo(e)),t&&(Array.isArray(t)?n.push(Promise.resolve(t.map(e=>({label:e,value:e})))):n.push(Promise.resolve([{label:t,value:t}]))),(await Promise.all(n)).flat()},es=(0,i("eSUdr").default)`query SpaceSearchQuery($cql:String!){search:confluence_search(cql:$cql first:25){edges{node{entityType title space{key icon{path}}}}}}`,ea=async e=>{let t=(0,i("hp2SH").getApolloClient)();return(await t.query({query:es,variables:{cql:e}})).data.search.edges.map(e=>({label:e.node.title,value:e.node.space.key,icon:`/wiki${e.node.space.icon.path}`}))},ec=e=>`"${e}"`,el=e=>`space.key IN (${e.map(ec).join(",")})`,eu=(e,t=[])=>ea(`type = space AND (space.title ~ "${e}*" OR ${el(t.concat(e))})`),ed=e=>async(t,n)=>{let r=Y(n),o=[];if(t)o.push(eu(t,r));else{e&&o.push(Promise.resolve([{label:"Current space",value:"currentSpace()"}]));let t=r.length?` OR ${el(r)}`:"";o.push(ea(`type = space AND (space in recentlyViewedSpaces(4) ${t})`))}return(await Promise.all(o)).flat()},ep=e=>["create-from-template","pagetree"].indexOf(e.macroName)>-1?ed(!1):ed(!0),eh=e=>async(t,n)=>{let r=await e(t,n),o=new Map;return r.filter(({value:e})=>{let t=o.has(e);return o.set(e,!0),!t})},ef=ed(!0),em=eh(async(e,t)=>{let n,r;return"string"==typeof t&&(t=t.split(",")),t&&t.length>0&&(n=(n=t.filter(e=>!(0,i("2E7zk").isPageId)(e))).length?n:void 0,r=(r=t.filter(i("2E7zk").isPageId)).length?r:void 0),[await ef(e,n),await Z(e,r,{type:"page, folder"})].flat()}),ey=async e=>(0,i("f7B1p").cfetch)(`/wiki/rest/prototype/1/search/name.json?max-results=10&pageSize=10&type=page,blogpost&query=${encodeURIComponent(e)}`,{method:"GET",headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{let t=[];return e.group.forEach(e=>t.push(...e.result.map(e=>({label:e.title,value:`${e.space.key}:${e.title}`,description:e.space.title})))),t}),eb=()=>eh(async(e,t)=>{let n=[];return e&&n.push(ey(e)),t&&("string"==typeof t||Array.isArray(t))&&("string"==typeof t&&(t=t.split(",")),t.forEach(e=>{let t=e.split(":"),r=t[t.length-1];n.push(ey(r))})),(await Promise.all(n)).flat()}),eg=e=>async(t,n)=>{let r=await e(t,n);return n?[].concat(n).filter(e=>!r.find(({value:t})=>t===e)).map(e=>({label:e,value:e})).concat(r):r};var ex={};function eE(e,t,n,r){this.message=e,this.expected=t,this.found=n,this.location=r,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,eE)}function ev(){this.constructor=eE}ev.prototype=Error.prototype,eE.prototype=new ev,eE.buildMessage=function(e,t){var n={literal:function(e){return'"'+o(e.text)+'"'},class:function(e){var t,n="";for(t=0;t<e.parts.length;t++)n+=e.parts[t]instanceof Array?i(e.parts[t][0])+"-"+i(e.parts[t][1]):i(e.parts[t]);return"["+(e.inverted?"^":"")+n+"]"},any:function(e){return"any character"},end:function(e){return"end of input"},other:function(e){return e.description}};function r(e){return e.charCodeAt(0).toString(16).toUpperCase()}function o(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+r(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+r(e)})}function i(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+r(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+r(e)})}return"Expected "+function(e){var t,r,o,i=Array(e.length);for(r=0;r<e.length;r++)i[r]=n[(t=e[r]).type](t);if(i.sort(),i.length>0){for(r=1,o=1;r<i.length;r++)i[r-1]!==i[r]&&(i[o]=i[r],o++);i.length=o}switch(i.length){case 1:return i[0];case 2:return i[0]+" or "+i[1];default:return i.slice(0,-1).join(", ")+", or "+i[i.length-1]}}(e)+" but "+(t?'"'+o(t)+'"':"end of input")+" found."},ex={SyntaxError:eE,parse:function(e,t){t=void 0!==t?t:{};var n,r,o,i,s,a,c,l,u={},d={aqlStatement:0},p=0,h=[function(e,t){return{clause:e,orderby:t}},function(e){return e},"order by",E("ORDER BY",!0),function(e,t){return[e,...t]},",",E(",",!1),function(e){return e},function(e,t){return{field:e,direction:t}},"asc",E("ASC",!0),"desc",E("DESC",!0),function(e,t){return{nodeType:"clause",clauses:[e,...t],type:"or"}},"or",E("OR",!0),function(e,t){return{nodeType:"clause",clauses:[e,...t],type:"and"}},"and",E("AND",!0),function(e,t){return{nodeType:"clause",clause:t,invert:!!e}},function(e){return{nodeType:"expr",...e}},"not ",E("NOT ",!0),"!",E("!",!1),function(e,t,n){return{field:e,op:t,value:n}},function(e,t,n){return{field:e,op:t,value:n}},"<",E("<",!1),">",E(">",!1),"~",E("~",!1),"!~",E("!~",!1),"in",E("IN",!0),function(e){return e?"NOT IN":"IN"},"=",E("=",!1),"!=",E("!=",!1),function(e,t){return[e,...t]},function(e){return e},">=",E(">=",!1),"<=",E("<=",!1),function(e){return Number.parseFloat(e)},"(",E("(",!1),")",E(")",!1),function(e,t){return`${e}(${(t||[]).join(",")})`},function(e,t){return[e,...t]},function(e){return e},"'",E("'",!1),"\\",E("\\",!1),'"',E('"',!1),".",E(".",!1),/^[^']/,v(["'"],!0,!1),function(e){return e.join("")},/^[^"]/,v(['"'],!0,!1),function(e){return e.join(".")},/^[0-9]/,v([["0","9"]],!1,!1),/^[\\\-]/,v(["\\","-"],!1,!1),function(e,t){return[e,...t]},function(e){return e},/^[a-zA-Z_]/,v([["a","z"],["A","Z"],"_"],!1,!1),/^[a-zA-Z_0-9]/,v([["a","z"],["A","Z"],"_",["0","9"]],!1,!1),function(e,t){return e+t},/^[eE]/,v(["e","E"],!1,!1),/^[\-+]/,v(["-","+"],!1,!1),/^[\t ]/,v(["	"," "],!1,!1)],f=[I('%;&/7#;!." &"/)$8": ""! )("\'#&\'#'),I('%;V/1#;"/($8":!"! )("\'#&\'#'),I('%3"""5(7#/K#;V/B$;$/9$$;#0#*;#&/)$8$:$$"! )($\'#(#\'#("\'#&\'#'),I("%2%\"\"6%7&/:#;W/1$;$/($8#:'#! )(#'#(\"'#&'#"),I("%;M/;#;V/2$;%/)$8#:(#\"\" )(#'#(\"'#&'#"),I('3)""5#7*.) &3+""5$7,'),I("%;(/9#$;'0#*;'&/)$8\":-\"\"! )(\"'#&'#"),I("%;V/I#3.\"\"5\"7//:$;V/1$;(/($8$:'$! )($'#(#'#(\"'#&'#"),I('%;+/9#$;)0#*;)&/)$8":0""! )("\'#&\'#'),I("%;V/I#31\"\"5#72/:$;V/1$;*/($8$:'$! )($'#(#'#(\"'#&'#"),I('%;,." &"/2#;+/)$8":3""! )("\'#&\'#'),I("%;J/L#;W/C$;&/:$;W/1$;K/($8%:'%!\")(%'#($'#(#'#(\"'#&'#./ &%;-/' 8!:4!! )"),I('35""5$76.) &27""6778'),I(";..5 &;/./ &;1.) &;0.# &;2"),I("%;M/N#;W/E$;6/<$;W/3$;5/*$8%:9%#$\" )(%'#($'#(#'#(\"'#&'#"),I("%;M/N#;W/E$;7/<$;W/3$;9/*$8%:9%#$\" )(%'#($'#(#'#(\"'#&'#.X &%;M/N#;W/E$;8/<$;W/3$;=/*$8%:9%#$\" )(%'#($'#(#'#(\"'#&'#"),I("%;M/N#;W/E$;>/<$;W/3$;3/*$8%::%#$\" )(%'#($'#(#'#(\"'#&'#"),I("%;M/N#;W/E$;>/<$;W/3$;4/*$8%::%#$\" )(%'#($'#(#'#(\"'#&'#"),I("%;M/\\#2;\"\"6;7</M$;M/D$2=\"\"6=7>/5$;A/,$;@/#$+&)(&'#(%'#($'#(#'#(\"'#&'#"),I(';?.* &%;C/"!&,)'),I('%;C/"!&,).# &;B'),I(";M.# &;C"),I('2?""6?7@.) &2A""6A7B'),I('%;,." &"/7#3C""5"7D/($8":E"!!)("\'#&\'#'),I('2F""6F7G.) &2H""6H7I'),I(";C.# &;:"),I("%;J/f#;W/]$;</T$;W/K$$;;0#*;;&/;$;W/2$;K/)$8':J'\"$\")(''#(&'#(%'#($'#(#'#(\"'#&'#"),I("%2%\"\"6%7&/J#$;V0#*;V&/:$;</1$;W/($8$:K$!!)($'#(#'#(\"'#&'#"),I(";C.# &;="),I(";C./ &;M.) &;P.# &;?"),I('2L""6L7M.Y &2N""6N7O.M &2=""6=7>.A &2;""6;7<.5 &2F""6F7G.) &2H""6H7I'),I("%;U/' 8!:P!! )"),I("%;7/:#;V.\" &\"/,$;9/#$+#)(#'#(\"'#&'#.¹ &%;8/:#;V.\" &\"/,$;=/#$+#)(#'#(\"'#&'#. &%;6/:#;V.\" &\"/,$;5/#$+#)(#'#(\"'#&'#.k &%;>/:#;V.\" &\"/,$;4/#$+#)(#'#(\"'#&'#.D &%;>/:#;V.\" &\"/,$;3/#$+#)(#'#(\"'#&'#"),I("%;I/,#;M/#$+\")(\"'#&'#"),I(";P.# &;M"),I("%;M/p#;W/g$2Q\"\"6Q7R/X$;W/O$;D.\" &\"/A$;W/8$2S\"\"6S7T/)$8':U'\"&\")(''#(&'#(%'#($'#(#'#(\"'#&'#"),I('%;=/9#$;E0#*;E&/)$8":V""! )("\'#&\'#'),I("%2%\"\"6%7&/:#;W/1$;=/($8#:W#! )(#'#(\"'#&'#"),I('2X""6X7Y'),I('2Z""6Z7['),I('2\\""6\\7]'),I('2^""6^7_'),I('2Q""6Q7R'),I('2S""6S7T'),I("%;G/,#;F/#$+\")(\"'#&'#.O &%;G/,#;G/#$+\")(\"'#&'#.6 &%;G/,#;H/#$+\")(\"'#&'#"),I('%;F/g#$%;L/"!&,).) &4`""5!7a06*%;L/"!&,).) &4`""5!7a&/1$;F/($8#:b#!!)(#\'#("\'#&\'#. &%;H/g#$%;L/"!&,).) &4c""5!7d06*%;L/"!&,).) &4c""5!7d&/1$;H/($8#:b#!!)(#\'#("\'#&\'#./ &%;Q/\' 8!:e!! )'),I('4f""5!7g'),I('%4h""5!7i/"!&,)'),I("%%;N/t#;N/k$;N/b$;N/Y$;O/P$;N/G$;N/>$;O/5$;N/,$;N/#$+*)(*'#()'#(('#(''#(&'#(%'#($'#(#'#(\"'#&'#/\"!&,)"),I('%;S/9#$;R0#*;R&/)$8":j""! )("\'#&\'#'),I('%;I/1#;S/($8":k"! )("\'#&\'#'),I('%4l""5!7m/L#%$4n""5!7o0)*4n""5!7o&/"!&,)/)$8":p""! )("\'#&\'#'),I('$4f""5!7g/,#0)*4f""5!7g&&&#'),I('%;T/#%2^""6^7_/?#$4f""5!7g0)*4f""5!7g&/#$+")("\'#&\'#." &"/^$%4q""5!7r/@#4s""5!7t." &"/,$;T/#$+#)(#\'#("\'#&\'#." &"/#$+#)(#\'#("\'#&\'#.} &%2^""6^7_/g#;T/^$%4q""5!7r/@#4s""5!7t." &"/,$;T/#$+#)(#\'#("\'#&\'#." &"/#$+#)(#\'#("\'#&\'#.# &;T'),I('$4u""5!7v/,#0)*4u""5!7v&&&#'),I('$4u""5!7v0)*4u""5!7v&')],m=0,y=[{line:1,column:1}],b=0,g=[],x=0;if("startRule"in t){if(!(t.startRule in d))throw Error("Can't start parsing from rule \""+t.startRule+'".');p=d[t.startRule]}function E(e,t){return{type:"literal",text:e,ignoreCase:t}}function v(e,t,n){return{type:"class",parts:e,inverted:t,ignoreCase:n}}function _(t){var n,r=y[t];if(r)return r;for(n=t-1;!y[n];)n--;for(r={line:(r=y[n]).line,column:r.column};n<t;)10===e.charCodeAt(n)?(r.line++,r.column=1):r.column++,n++;return y[t]=r,r}function w(e){m<b||(m>b&&(b=m,g=[]),g.push(e))}function I(e){var t,n=Array(e.length);for(t=0;t<e.length;t++)n[t]=e.charCodeAt(t)-32;return n}if((l=function t(n){for(var r,o,i=f[n],s=0,a=[],c=i.length,l=[],d=[];;){for(;s<c;)switch(i[s]){case 0:d.push(h[i[s+1]]),s+=2;break;case 1:d.push(void 0),s++;break;case 2:d.push(null),s++;break;case 3:d.push(u),s++;break;case 4:d.push([]),s++;break;case 5:d.push(m),s++;break;case 6:d.pop(),s++;break;case 7:m=d.pop(),s++;break;case 8:d.length-=i[s+1],s+=2;break;case 9:d.splice(-2,1),s++;break;case 10:d[d.length-2].push(d.pop()),s++;break;case 11:d.push(d.splice(d.length-i[s+1],i[s+1])),s+=2;break;case 12:d.push(e.substring(d.pop(),m)),s++;break;case 13:l.push(c),a.push(s+3+i[s+1]+i[s+2]),d[d.length-1]?(c=s+3+i[s+1],s+=3):(c=s+3+i[s+1]+i[s+2],s+=3+i[s+1]);break;case 14:l.push(c),a.push(s+3+i[s+1]+i[s+2]),d[d.length-1]===u?(c=s+3+i[s+1],s+=3):(c=s+3+i[s+1]+i[s+2],s+=3+i[s+1]);break;case 15:l.push(c),a.push(s+3+i[s+1]+i[s+2]),d[d.length-1]!==u?(c=s+3+i[s+1],s+=3):(c=s+3+i[s+1]+i[s+2],s+=3+i[s+1]);break;case 16:d[d.length-1]!==u?(l.push(c),a.push(s),c=s+2+i[s+1],s+=2):s+=2+i[s+1];break;case 17:l.push(c),a.push(s+3+i[s+1]+i[s+2]),e.length>m?(c=s+3+i[s+1],s+=3):(c=s+3+i[s+1]+i[s+2],s+=3+i[s+1]);break;case 18:l.push(c),a.push(s+4+i[s+2]+i[s+3]),e.substr(m,h[i[s+1]].length)===h[i[s+1]]?(c=s+4+i[s+2],s+=4):(c=s+4+i[s+2]+i[s+3],s+=4+i[s+2]);break;case 19:l.push(c),a.push(s+4+i[s+2]+i[s+3]),e.substr(m,h[i[s+1]].length).toLowerCase()===h[i[s+1]]?(c=s+4+i[s+2],s+=4):(c=s+4+i[s+2]+i[s+3],s+=4+i[s+2]);break;case 20:l.push(c),a.push(s+4+i[s+2]+i[s+3]),h[i[s+1]].test(e.charAt(m))?(c=s+4+i[s+2],s+=4):(c=s+4+i[s+2]+i[s+3],s+=4+i[s+2]);break;case 21:d.push(e.substr(m,i[s+1])),m+=i[s+1],s+=2;break;case 22:d.push(h[i[s+1]]),m+=h[i[s+1]].length,s+=2;break;case 23:d.push(u),0===x&&w(h[i[s+1]]),s+=2;break;case 24:d[d.length-1-i[s+1]],s+=2;break;case 25:s++;break;case 26:for(o=0,r=i.slice(s+4,s+4+i[s+3]);o<i[s+3];o++)r[o]=d[d.length-1-r[o]];d.splice(d.length-i[s+2],i[s+2],h[i[s+1]].apply(null,r)),s+=4+i[s+3];break;case 27:d.push(t(i[s+1])),s+=2;break;case 28:x++,s++;break;case 29:x--,s++;break;default:throw Error("Invalid opcode: "+i[s]+".")}if(l.length>0)c=l.pop(),s=a.pop();else break}return d[0]}(p))!==u&&m===e.length)return l;throw l!==u&&m<e.length&&w({type:"end"}),s=g,a=b<e.length?e.charAt(b):null,n=b,r=b<e.length?b+1:b,o=_(n),i=_(r),c={start:{offset:n,line:o.line,column:o.column},end:{offset:r,line:i.line,column:i.column}},new eE(eE.buildMessage(s,a),s,a,c)}};let e_=e=>e.replace(/\\/g,"\\\\").replace(/"/g,'\\"'),ew=e=>"currentSpace()"===e?e:`"${e_(e.toString())}"`,eI=e=>{let t=[];return t.push(...Object.entries(e).filter(e=>e[1]).map(e=>{let t,[n,r]=e,o=D[n],i=o.key||n,s="=";return o&&o.op&&(s=o.op),Array.isArray(r)&&1===r.length&&(r=r[0]),Array.isArray(r)?(t=`(${r.map(ew).join(", ")})`,s="IN"):t="number"==typeof r?r.toString():ew(r.toString()),`${i} ${s} ${t}`})),t.join(" AND ")},eS=e=>{if(null==e)return{};let t=Array.from(function* e(t){if(t.clause&&(yield*e(t.clause)),t.clauses){if("OR"===t.type.toUpperCase()&&1!==t.clauses.length)throw SyntaxError("cannot handle multiple OR clauses");for(let n of t.clauses)yield*e(n)}"expr"===t.nodeType&&(yield t)}((0,ex.parse)(e))),n={};return t.forEach(e=>{n[e.field]=e.value}),n},eT=(0,i("eSUdr").default)`query UserSearchQuery($cql:String!){searchUser:confluence_searchUser(cql:$cql first:25 sitePermissionTypeFilter:"all"){edges{node{user:confluencePerson{displayName accountId profilePicture{path}}}}}}`,eC=e=>`type = user AND (user.fullname ~ "${e}*" OR user = "${e}")`,eP=async e=>{let t=(0,i("hp2SH").getApolloClient)();return(await t.query({query:eT,variables:{cql:e}})).data.searchUser.edges.map(e=>({label:e.node.user.displayName,value:e.node.user.accountId,icon:e.node.user.profilePicture.path}))},eN=async(e,t)=>{let n=[];return e&&n.push(eP(eC(e))),t&&(Array.isArray(t)?n.push(eP(`user IN (${t.map(e=>`"${e_(e)}"`).join(", ")})`)):n.push(eP(eC(t)))),(await Promise.all(n)).flat()},eO=e=>async(t,n)=>{let r=[{label:e.formatMessage(i("kTVK2").i18nWidth.fullLabel),value:"100%"},{label:e.formatMessage(i("kTVK2").i18nWidth.threeQuartersLabel),value:"75%"},{label:e.formatMessage(i("kTVK2").i18nWidth.halfLabel),value:"50%"},{label:e.formatMessage(i("kTVK2").i18nWidth.quarterLabel),value:"25%"}];return(n&&"string"==typeof n&&!Object.values(r).map(e=>e.value).includes(n)&&r.push({label:n,value:n}),t)?Promise.resolve(r.filter(e=>-1!==e.value.indexOf(t))):Promise.resolve(r)},eA=(0,i("cgtv4").defineMessages)({deprecatedMacroDescription:{id:"fabric-extension-lib.deprecation.description",defaultMessage:"This macro has been deprecated. <alink>Find out more about this change</alink>"},configValuePrefixRequired:{id:"fabric-extension-lib.config-value-prefix.required",defaultMessage:"{fieldValue} (required)"},configValuePrefixExcluded:{id:"fabric-extension-lib.config-value-prefix.excluded",defaultMessage:"{fieldValue} (excluded)"}}),eM=e=>[{prefix:"+",labelFunc:t=>e.formatMessage(eA.configValuePrefixRequired,{fieldValue:t})},{prefix:"-",labelFunc:t=>e.formatMessage(eA.configValuePrefixExcluded,{fieldValue:t})}],eR=i("9fLxI").getExtensionManifest,ek=t=>{if(i("cV0On").DEPRECATED_MACROS.includes(t.macroName))return{isDeprecated:!0,message:e(o).createElement(i("iXCQx").default,{weight:"medium"},"⚠️ ",e(o).createElement(i("gtD4K").default,{...eA.deprecatedMacroDescription,values:{alink:(...t)=>e(o).createElement(i("2Nwuj").default,{href:i("cV0On").MACRO_DEPRECATION_INFO_URL,target:"_blank"},t)}}))}},eD=async(e,t,n,r,o,s,a,c,l,u,d,p,h,f,m=!1,y)=>{let b=(0,i("6OgRG").isAllowedWithFeatureFlags)();return e.map(e=>eF(i("8pcS0").EXTENSION_TYPE.MACRO_CORE,e,t,n,!b(e),o,s,a,c,l,u,d,p,h,m,y)).concat(r(t.contentId,!!u,c,f,d))},eF=(e,t,n,r,o,s,a,c,l,u,d,p,h,f,m=!1,y)=>{let b=t.macroName,g=null,x=!!d,{enabled:E,optedOut:v}=n.features.configPanel||{},_=(0,i("eQyFc").getExtensionBodyType)(t),w={title:(0,i("aMlgD").getMacroTitleOverride)(b,l,y)??t.title,description:(0,i("aMlgD").getMacroDescriptionOverride)(b,l,y)??t.description};t={...t,...w};let I={type:_,render:()=>{let o=r[e];return Promise.resolve(e=>{if("create-from-template"===e.node.extensionKey){let t=e.node.parameters?.macroParams;t?.spaceKey||(t.spaceKey={value:n.spaceKey}),t?.templateName||(t.templateName=t.contentBlueprintId)}x&&e.node.parameters.macroMetadata&&w?.title&&(e.node.parameters.macroMetadata.title=w.title);let r=(0,i("eQyFc").shouldShowPlaceholder)(t,v,e.node,x);return(E||!x)&&r?(0,i("9tVje").getMissingConfigPlaceholderComponent)(t,e.node,x):E&&x&&!(0,i("eQyFc").canRenderInTheEditor)(t)?(0,i("9tVje").getNonRenderablePlaceholderComponent)(t,(0,i("eQyFc").getExtensionBodyType)(t),f):"function"==typeof o?o(e.node,{references:e.references,actions:e.actions}):o.render(e.node,{references:e.references,actions:e.actions})})},renderSync:()=>g,async preloadRender(){g=await this.render()}};if((m||!o)&&((0,i("eQyFc").getVisibleParameters)(t).length>0||(0,i("eQyFc").shouldUseMacroBrowser)(t,v))){let e,r=async(e,r)=>{let o;(0,i("fgbpl").isBodiedExtension)(_)&&(o=(0,i("2E7zk").getSelectedBodiedExtensionNode)(d));let a=await (0,i("eQyFc").prepareMacro)({name:t.macroName,params:(0,i("6mEZ3").unwrapMacroParams)(e.macroParams)},n.contentId,o,l,y),c=(0,i("6mEZ3").getDefaultParamValue)(e.macroParams||{});if(c){let e=a.attrs?.parameters?.macroParams;e&&(e[""]=c)}let h={createAnalyticsEvent:p,contentId:n.contentId},f=await s(a,u,void 0,h,e=>{o=(0,i("2E7zk").getSelectedBodiedExtensionNode)(d),r.doc.update(o?.attrs?.localId,()=>({attrs:e.attrs,marks:e.marks,content:e.content}))},l,y);return(0,i("fgbpl").isBodiedExtension)(_)&&r?.doc?.update?void r.doc.update(o?.attrs?.localId,()=>({attrs:f.attrs,marks:f.marks,content:f.content})):f.attrs.parameters||{}};(0,i("cV0On").isMacroDeprecated)(b)||(I.update=async(o,s)=>{let a=async e=>{let r=(0,i("e7owm").transformParams)("transformAfter",t,e,n,p),o={name:t.macroName,params:r},s=(0,i("6mEZ3").getDefaultParamValue)(r);s&&(o.defaultParameterValue=s);let a=await (0,i("eQyFc").prepareMacro)(o,n.contentId,null,l,y);return a.attrs.parameters&&(a.attrs.parameters.macroMetadata||(a.attrs.parameters.macroMetadata={}),a.attrs.parameters.macroMetadata.macroId||(a.attrs.parameters.macroMetadata.macroId={value:(0,i("9Cbhx").getMacroId)(a.attrs.parameters)})),a.attrs.parameters||{}};return!E||(0,i("eQyFc").shouldUseMacroBrowser)(t,v)?r(o,s):s.editInContextPanel(r=>(e=(0,i("6mEZ3").unwrapMacroParams)(r.macroParams),(0,i("e7owm").transformParams)("transformBefore",t,e,n,p)),a)}),(0,i("eQyFc").getVisibleParameters)(t).length>0&&(I.getFieldsDefinition=()=>{let r=t.formDetails.parameters.map(e=>U(e,{pluginKey:t.pluginKey,macroName:(0,i("eQyFc").safeGetMacroName)(t)}));return(0,i("e7owm").remapCustomFields)(t,r,n,l,e,p,f,y)})}return{type:e,key:b,title:t.title,description:t.description,deprecation:ek(t),icons:(0,i("eQyFc").buildIconObject)(t),documentationUrl:t.formDetails.documentationUrl||void 0,modules:{quickInsert:!o&&!(0,i("cV0On").isMacroDeprecated)(b)&&d&&(0,i("Qcu7n").shouldIncludeMacroInQuickInsert)(b)?(0,i("2E7zk").createQuickInsertModule)(t,n,a,c,l,u,d,p,h,f,y):[],nodes:{default:I},fields:{custom:{attachment:{resolver:G(t,n)},spacekey:{resolver:ep(t)},username:{resolver:eN},label:{resolver:ei},labelWithPlusMinusPrefixes:{resolver:ee({resolver:ei,prefixSettings:eM(l)})},"confluence-content-by-id":{resolver:Z},"confluence-content":{resolver:eg(eb())},spaceAndPage:{resolver:em},spaceKeyAndPageTitleContent:{resolver:eb()},rootPage:{resolver:et({resolver:eb(),values:["@self","@home","@parent","@none"]})},calendar:{resolver:z},template:{resolver:(0,i("gw2T1").getTemplateResolver)(n)},blogRecentlyUpdatedSpace:{resolver:et({resolver:ed(!1),values:["@self","@personal","@global","@favorite","@favourite","@all","*"]})},blogRecentlyUpdatedSpaceWithPlusMinusPrefixes:{resolver:et({resolver:ee({resolver:ed(!1),prefixSettings:eM(l)}),values:["@self","@personal","@global","@favorite","@favourite","@all","*"]})},contributorsSpaceParamResolver:{resolver:et({resolver:ed(!1),values:["@personal","@global","@all"]})},recentlyUpdatedDashboardSpaceKeyResolver:{resolver:et({resolver:ed(!1),values:["*"]})},widthPercentage:{resolver:eO(l)}},fieldset:{cql:{serializer:eI,deserializer:eS}}}}}},ej=async(e,t,n,r,o,s,a,c,l,u,d,p,h,f,m,y=!1,b=!1,g=!1,x=!1,E,v)=>{let[_,w]=await Promise.all([eR(e),(0,i("3IXUB").getAutoConverter)(o)]),I={isLivePage:p,isCompanyHub:v&&(0,i("6mKj3").expVal)("company-hub-migration-prevent-1p-macro","isEnabled",!1)&&!(0,i("9wGTI").fg)("company-hub-prevent-1p-macro-via-tap-trait")},S=(0,i("2E7zk").filterOutHiddenMacros)(_.macros,I),T=await eD(S,e,t,s,a,c,n,l,o,r,u,d,p,h,x,E);if((0,i("9wGTI").fg)("cq_native_macro")){let e=T.find(e=>"questionslist-macro-native"===e.key),t=T.find(e=>"questionslist-macro"===e.key);if(e){t&&(T=T.filter(e=>"questionslist-macro"!==e.key));let n={...e,key:"questionslist-macro"};T.push(n)}}else T.find(e=>"questionslist-macro-native"===e.key)&&(T=T.filter(e=>"questionslist-macro-native"!==e.key));T=T.filter(e=>"toc"!==e.key);let C=S.find(e=>"toc"===e.macroName),{tableOfContentsExtension:P}=await i("klFsN"),N=P({macro:C,pageContext:e,extensionHandlers:t,editorAPI:n,openMacroBrowserForInitialConfiguration:c,macroBrowserConfig:o,editorActions:r,createAnalyticsEvent:u,intl:l,onCompleteCallback:d,isLivePage:p});T.push(N);let{redactionExtension:O}=await i("eKQ2A");return(0,i("9wGTI").fg)("confluence_dlp_content_redaction")&&((0,i("9wGTI").fg)("dlp_cc-redactions-tour")?T.push((0,M.createTourableRedactionExtension)({contentId:e?.contentId})):T.push(O())),T.push(R),y&&T.push((0,i("ccP7J").createDatabaseExtension)({pageId:e.contentId,spaceKey:e.spaceKey,spaceId:e.spaceId,intl:l,flags:h,createAnalyticsEvent:u,experienceTracker:f,contentType:m,allowDatabaseQuickInsert:b&&!(0,i("9wGTI").fg)("confluence_frontend_databases_opt-out"),isEdit:!0})),g&&e.spaceId&&e.spaceKey&&(0,i("6mKj3").expVal)("create_whiteboard_via_slash_command","enabled",!1)&&T.push(A({pageId:e.contentId,spaceKey:e.spaceKey,spaceId:e.spaceId,intl:l,flags:h,experienceTracker:f,createAnalyticsEvent:u,contentType:m,allowWhiteboardQuickInsert:g})),new(0,i("bre0g").default)(T,[e=>{let t=w(e);if(t)return t}])},eL=async(e,t,n,r,o,s,a,c,l)=>{let u=(0,i("fPsyy").createChartsExtension)({intl:s,extensionHandlers:t[i("8pcS0").EXTENSION_TYPE.MACRO_WITH_REFERENCES],createAnalyticsEvent:a}),d=await eR(e),p=await eD(d.macros,e,t,n,r,o,void 0,s,void 0,void 0,void 0,void 0,void 0,void 0,void 0,l);p.push({title:"Redacted Macro Placeholder",key:i("8pcS0").EXTENSION_KEY.REDACTED_MACRO_PLACEHOLDER,type:i("8pcS0").EXTENSION_TYPE.MACRO_CORE,icons:{48:async()=>Promise.resolve(i("9Q2dU"))},modules:{nodes:{default:{type:"extension",render:async()=>({node:e})=>{let n=t[i("8pcS0").EXTENSION_TYPE.MACRO_CORE];return"function"==typeof n?n(e,null):null}}}}}),u&&p.push(await u);let h=await g({intl:s,providerFactory:c});p.push(...await h.getExtensions());let{contentId:f}=e;p.push(...await (0,x.createPremiumExtensionManifests)({contentId:f,intl:s,allowCompanyHubExclusiveExtensions:!0})),p.push((0,i("ccP7J").createDatabaseExtension)({pageId:f,spaceKey:e.spaceKey,spaceId:e.spaceId,intl:s,createAnalyticsEvent:a,isEdit:!1}));let{redactionExtension:m}=await i("eKQ2A");return(0,i("9wGTI").fg)("confluence_dlp_content_redaction")&&((0,i("9wGTI").fg)("dlp_cc-redactions-tour")?p.push((0,M.createTourableRedactionExtension)({contentId:f})):p.push(m())),p.push(R),new(0,i("bre0g").default)(p)};t.exports.getConfluenceMacrosExtensionProviderForEditor=ej,t.exports.getConfluenceMacrosExtensionProviderForRenderer=eL}),s("fSxYU",function(e,t){e.exports=i("4mJKd")(5)("3XbzG").then(()=>i("4s2T0"))}),s("Qcu7n",function(e,t){e.exports.resolveQuestionsMacroExtensionKey=e=>"questionslist-macro"===e&&(0,i("9wGTI").fg)("cq_native_macro")?"questionslist-macro-native":e,e.exports.shouldIncludeMacroInQuickInsert=e=>!("questionslist-macro"===e&&(0,i("9wGTI").fg)("cq_native_macro"))&&("questionslist-macro-native"!==e||!!(0,i("9wGTI").fg)("cq_native_macro"))}),s("cV0On",function(e,t){let n=["chart","contributors-summary","gallery","google-drive-docs","google-drive-sheets","google-drive-slides","index","viewppt","viewdoc","recently-updated-dashboard","related-labels","spaces","span"];e.exports.DEPRECATED_MACROS=n,e.exports.MACRO_DEPRECATION_INFO_URL="https://support.atlassian.com/confluence-cloud/docs/learn-which-macros-are-being-removed/",e.exports.isMacroDeprecated=e=>{if(n.includes(e)&&(0,i("9wGTI").fg)("deprecating_low_usage_macros"))switch(e){case"chart":return(0,i("9wGTI").fg)("confluence_deprecate_chart_macro");case"contributors-summary":return(0,i("9wGTI").fg)("confluence_deprecate_contributors_summary");case"gallery":return(0,i("9wGTI").fg)("confluence_deprecate_gallery_macro");case"google-drive-docs":case"google-drive-sheets":case"google-drive-slides":return(0,i("9wGTI").fg)("confluence_deprecate_google_drive_macro");case"index":return(0,i("9wGTI").fg)("confluence_deprecate_page_index_macro");case"viewppt":return(0,i("9wGTI").fg)("confluence_deprecate_powerpoint_macro");case"viewdoc":return(0,i("9wGTI").fg)("confluence_deprecate_word_macro");case"recently-updated-dashboard":return(0,i("9wGTI").fg)("confluence_deprecate_recently_updated_dashboard");case"related-labels":return(0,i("9wGTI").fg)("confluence_deprecate_related_labels_macro");case"spaces":return(0,i("9wGTI").fg)("confluence_deprecate_spaces_list_macro");case"span":return(0,i("9wGTI").fg)("confluence_deprecate_span_macro")}return!1}}),s("klFsN",function(e,t){let n=i("4mJKd")(5);e.exports=Promise.all([n("1iUSs"),n("jXx9i"),n("nbjnv"),n("9ftJe"),n("jjWia")]).then(()=>i("liyuV"))}),s("eKQ2A",function(e,t){e.exports=i("4mJKd")(5)("dYKkq").then(()=>i("huQ3W"))}),s("e1Stz",function(e,t){let n=(0,i("jmjWc").LoadablePaint)({__loadable_id__:"ymRP0",name:"PagePropertiesReportRenderer",loader:async()=>(await i("elllk")).PagePropertiesReportRenderer});e.exports.PagePropertiesReportRenderer=n}),s("elllk",function(e,t){e.exports=i("4mJKd")(5)("dnwTC").then(()=>i("3Jp28"))}),s("9JyIJ",function(t,n){var r=i("42omo");let o=(0,i("cgtv4").defineMessages)({noQuestionsFound:{id:"questions.list.noQuestionsFound",defaultMessage:"No questions found"}}),s={scrollable:"_c71l1c3h _1tke1ns9 _4t3i1wug _18m91wug",centerContainer:"_y3gn1h6o _1tkeuuw1"},a=({questions:t,loading:n,error:a,limit:c,routerName:l,defaultLimit:u=10})=>{if(n)return e(r).createElement(i("gdv5Z").default,{xcss:s.centerContainer},e(r).createElement(i("9hlns").default,{size:"medium",label:"Loading"}));if(a||!t?.length)return e(r).createElement(i("gdv5Z").default,{xcss:s.centerContainer},e(r).createElement(i("iXCQx").default,null,e(r).createElement(i("gtD4K").default,o.noQuestionsFound)));let d=(c||u)>9&&t.length>9,p=e(r).createElement(i("eyWa4").default,{space:"space.250",role:"list"},t.map(t=>e(r).createElement(i("bqQGV").QuestionItem,{key:t.content.id,createdBy:t.content.history.createdBy.displayName,numberOfAnswers:t.content.answersTotalCount,numberOfVotes:t.content.numberOfVotes,createdDate:new Date(t.content.history.createdDate),questionTitle:t.content.title,spaceKey:t.content.space.key,spaceName:t.content.space?.name,routerName:l,questionId:t.content.id,topics:t.content.labels,hasAcceptedAnswer:t.content.hasAcceptedAnswer})));return d?e(r).createElement(i("gdv5Z").default,{xcss:s.scrollable,paddingInlineEnd:"space.100",testId:"scrollable-questions-container"},p):e(r).createElement(i("gdv5Z").default,{testId:"questions-container"},p)},c=({spaceKey:t,limit:n,filter:o,topics:s,includeTopics:c})=>{let{cloudId:l}=(0,i("bQm3c").useSessionData)(),{createAnalyticsEvent:u}=(0,i("inPa6").useAnalyticsEvents)(),[d,p]=(0,r.useState)(""),h="popular"===o?i("6Uz6K").FilterType.POPULAR:"unanswered"===o?i("6Uz6K").FilterType.UNANSWERED:i("6Uz6K").FilterType.RECENT,f=n||i("jIiwF").QUESTIONS_PER_PAGE,m=(0,r.useMemo)(()=>({cql:d,limit:f,cloudId:l,answerContentType:i("3qLHF").ANSWER_CONTENT_TYPE}),[l,d,f]),{data:y,loading:b,error:g}=(0,i("c0cL3").useQueryWithError)(i("5UmiT").QuestionListQuery,{variables:m,skip:!d}),x=(0,r.useMemo)(()=>y?.search?.nodes&&y?.search?.nodes.length>0?y?.search?.nodes.map(e=>(0,i("aJkCZ").mapQuestionDefaultValues)(e?.content,"",t)):[],[y?.search?.nodes,t]);return(0,r.useEffect)(()=>{p((0,i("6Uz6K").getCQLForFilter)(h,s,c,t))},[h,s,c,t]),(0,r.useEffect)(()=>{!b&&!g&&y?.search&&u({type:"sendScreenEvent",data:{name:"SpaceQuestionsListMacro"}}).fire()},[d,b,g,y?.search,u]),e(r).createElement(a,{questions:x,loading:b||!d,error:g,limit:n||i("jIiwF").QUESTIONS_PER_PAGE,routerName:i("1NBp8").SPACE_QUESTION_NATIVE.name,defaultLimit:i("jIiwF").QUESTIONS_PER_PAGE})},l=({limit:t,filter:n,space:o,includeTopics:s="all",topics:l=[]})=>{let{cloudId:u}=(0,i("bQm3c").useSessionData)(),{createAnalyticsEvent:d}=(0,i("inPa6").useAnalyticsEvents)(),[p,h]=(0,r.useState)(""),f="popular"===n?i("6Uz6K").FilterType.POPULAR:"unanswered"===n?i("6Uz6K").FilterType.UNANSWERED:i("6Uz6K").FilterType.RECENT,m=t||10,y=(0,r.useMemo)(()=>({cql:p,limit:m,cloudId:u,answerContentType:i("3qLHF").ANSWER_CONTENT_TYPE}),[u,p,m]),{data:b,loading:g,error:x}=(0,i("c0cL3").useQueryWithError)(i("5UmiT").QuestionListQuery,{variables:y,skip:!p}),E=(0,r.useMemo)(()=>b?.search?.nodes&&b?.search?.nodes.length>0?b?.search?.nodes.map(e=>(0,i("aJkCZ").mapQuestionDefaultValues)(e?.content)):[],[b?.search?.nodes]);return((0,r.useEffect)(()=>{h((0,i("6Uz6K").getCQLForFilter)(f,l,s))},[f,l,s]),(0,r.useEffect)(()=>{!g&&!x&&b?.search&&d({type:"sendScreenEvent",data:{name:"GlobalQuestionsListMacro"}}).fire()},[p,g,x,b?.search,d]),o)?e(r).createElement(c,{limit:t,filter:n,spaceKey:o,topics:l,includeTopics:s}):e(r).createElement(a,{questions:E,loading:g||!p,error:x,limit:m,routerName:i("1NBp8").QUESTION_NATIVE.name,defaultLimit:10})},u={centerContainer:"_y3gn1h6o _1tkeuuw1"};t.exports.GlobalQuestionsListMacroHandler=({macroParams:t})=>{let{cloudId:n}=(0,i("bQm3c").useSessionData)(),{data:o}=(0,i("jMyy4").useQueryInterop)(i("814Fv").GlobalSpaceQuery,{variables:{cloudId:n},skip:!n,fetchPolicy:"cache-first"}),s=t?.limit?.value?parseInt(t.limit.value,10):10,a=t?.filter?.value?.toLowerCase()||"popular",c=t?.space?.value,d=t?.["include-topics"]?.value||"all",p=t?.topic?.value||"",h=p?p.split(",").map(e=>e.trim()).filter(Boolean):[];return o?.confluence_questionsConfiguration?.hasConfluenceQuestionsAccess?e(r).createElement(i("5MgbR").FlagsProvider,null,e(r).createElement(l,{limit:s,filter:a,space:c,includeTopics:d,topics:h})):e(r).createElement(i("gdv5Z").default,{xcss:u.centerContainer},e(r).createElement(i("iXCQx").default,null,"You do not have the correct permissions to view Questions. Please request access from your Atlassian Cloud administrator."))}}),s("c0cL3",function(e,t){let n=(0,i("cgtv4").defineMessages)({errorTitle:{id:"questions.generic-error.title",defaultMessage:"Something went wrong"},errorDescription:{id:"questions.generic-error.description",defaultMessage:"The request returned an error."}}),r=(e,t)=>{let n=t.split(".").reduce((e,t)=>e&&e[t],e);return n&&n.length>0?new(0,i("422HI").ApolloErrorInterop)({graphQLErrors:n}):null},o=e=>{let{errorTitle:t,errorDescription:r}=e??{},{showErrorFlag:o}=(0,i("5MgbR").useFlags)(),{formatMessage:s}=(0,i("8C5kA").default)();return e=>{(0,i("8H5XZ").isGraphQLError)(e)&&!(0,i("7Sm4c").isErrorMarkedAsHandled)(e)&&(0,i("7Sm4c").markErrorAsHandled)(e),o({id:"questions-error-flag",title:t||s(n.errorTitle),description:r||s(n.errorDescription),isAutoDismiss:!0})}},s=(e,t,n,o)=>{if(t?.responseErrorPath){let i=r(e,t.responseErrorPath);if(i){o(i),n?.onError&&n.onError(i);return}}n?.onCompleted&&n.onCompleted(e)};e.exports.useMutationWithError=(e,t,n)=>{let r=o(n),[a,c]=(0,i("1KmJq").useMutation)(e,{...t,onCompleted:e=>s(e,n,t,r),onError:e=>{r(e),t?.onError&&t.onError(e)}});return[a,c]},e.exports.useQueryWithError=(e,t,n)=>{let r=o(n);return(0,i("xQxzY").useQuery)(e,{...t,onCompleted:e=>s(e,n,t,r),onError:e=>{r(e),t?.onError&&t.onError(e)}})}}),s("5MgbR",function(t,n){var r=i("42omo");let o=(0,r.createContext)(void 0),s=(0,i("7aRa9").withFlags)(({children:t,flags:n})=>e(r).createElement(o.Provider,{value:n},t));t.exports.FlagsProvider=s,t.exports.useFlags=()=>{let e=(0,r.useContext)(o);if(!e)throw Error("useFlags must be used within a FlagsProvider");return e}}),s("5UmiT",function(e,t){let n=(0,i("eSUdr").default)`query QuestionListQuery($cloudId:ID!$cql:String!$limit:Int$after:String$answerContentType:String){search:confluence_search(cloudId:$cloudId cql:$cql first:$limit after:$after){nodes{content{id title labels{nodes{name}}space{name alias key}properties{nodes{key value}}history{createdDate createdBy{displayName}}children(type:$answerContentType){nodes{id}}}}pageInfo{hasNextPage endCursor}}}`;e.exports.QuestionListQuery=n}),s("3qLHF",function(e,t){e.exports.QUESTION_CONTENT_TYPE="ac:com.atlassian.confluence.plugins.confluence-questions:question",e.exports.ANSWER_CONTENT_TYPE="ac:com.atlassian.confluence.plugins.confluence-questions:answer",e.exports.VOTES_PROPERTY_KEY="atl_cq_votes",e.exports.ACCEPTED_ANSWER_PROPERTY_KEY="atl_cq_accepted_answer"}),s("6Uz6K",function(t,n){var r,o=i("42omo");let s=(0,i("cgtv4").defineMessages)({recentFilterButton:{id:"questions.questions-list.recent-filter-button",defaultMessage:"Recent"},popularFilterButton:{id:"questions.questions-list.popular-filter-button",defaultMessage:"Popular"},unansweredFilterButton:{id:"questions.questions-list.unasnwered-filter-button",defaultMessage:"Unanswered"}});var a=((r={}).RECENT="recent",r.POPULAR="popular",r.UNANSWERED="unanswered",r);let c=(e,t,n,r)=>{let o=`type="${i("3qLHF").QUESTION_CONTENT_TYPE}"`,s=r?` AND space="${r}"`:"",a="";if(t&&t.length>0)if("any"===n){let e=t.map(e=>`label="${e}"`).join(" OR ");a=` AND (${e})`}else a=t.map(e=>` AND label="${e}"`).join("");switch(e){case"popular":return`${o}${s}${a} AND atl_cq_votes_total > 0 order by atl_cq_votes_total desc, lastmodified desc`;case"unanswered":return`${o}${s}${a} AND content.property[atl_cq_has_answers].any_answer=false order by created desc, title`;default:return`${o}${s}${a} order by created desc, title`}};t.exports.FilterType=a,t.exports.getCQLForFilter=c,t.exports.QuestionsFilters=({onFilterChange:t,labelFilter:n,disableFilter:r=!1,spaceKey:a,currentFilter:l})=>{let{formatMessage:u}=(0,i("8C5kA").default)();(0,o.useEffect)(()=>{t(c(l,n?[n]:void 0,"all",a),l)},[]);let d=e=>{t(c(e,n?[n]:void 0,"all",a),e)};return e(o).createElement(i("gdv5Z").default,null,e(o).createElement(i("hArLp").default,null,e(o).createElement(i("ccHMk").default,{onClick:()=>d("recent"),isSelected:"recent"===l},u(s.recentFilterButton)),e(o).createElement(i("ccHMk").default,{isDisabled:r,onClick:()=>d("popular"),isSelected:"popular"===l},u(s.popularFilterButton)),e(o).createElement(i("ccHMk").default,{isDisabled:r,onClick:()=>d("unanswered"),isSelected:"unanswered"===l},u(s.unansweredFilterButton))))}}),s("aJkCZ",function(e,t){let n=e=>{Object.keys(e.data?.data||[]).forEach(t=>t.includes("confluence.questionsForSpace")&&e.data.delete(t))},r=e=>{Object.keys(e.data?.data||[]).forEach(t=>t.includes("search")&&e.data.delete(t))},o=e=>{Object.keys(e.data?.data||[]).forEach(t=>(t.includes("confluence_expertsOfAllTime")||t.includes("confluence_expertsByTopic")||t.includes("confluence_expertsOfWeek")||t.includes("confluence_expert"))&&e.data.delete(t))};e.exports.deleteQuestionListCache=e=>{n(e),r(e)},e.exports.deleteExpertsListCache=e=>{o(e)},e.exports.mapQuestionDefaultValues=function(e,t,n){var r,o;return e?{content:{id:e.id??"",title:e.title??"",labels:(r=e.labels)?"nodes"in r?r.nodes.map(e=>({name:e.name})):r.map(e=>({name:e.label})):[],space:{key:e.space?.key??n??"",name:e.space?.name??"",alias:e.space?.alias??""},history:{createdDate:e.latestVersion?.createdAt??e.history?.createdDate??"",createdBy:{displayName:e.history?.createdBy?.displayName??t??""}},answersTotalCount:e.answersTotalCount??(o=e.children,o?.nodes?o.nodes.length:0)??0,numberOfVotes:e.voteProperties?.total??function(e){if(!e?.nodes)return 0;let t=e.nodes.find(e=>e?.key===i("3qLHF").VOTES_PROPERTY_KEY);if(!t?.value)return 0;try{return JSON.parse(t.value).total||0}catch{return 0}}(e.properties),hasAcceptedAnswer:e.hasAcceptedAnswer??function(e){if(!e?.nodes)return!1;let t=e.nodes.find(e=>e.key===i("3qLHF").ACCEPTED_ANSWER_PROPERTY_KEY);if(!t?.value)return!1;try{let e=JSON.parse(t.value);return null!=e.answer_id}catch{return!1}}(e.properties)}}:{content:{id:"",title:"",space:{key:"",name:"",alias:""},history:{createdDate:"",createdBy:{displayName:""}},answersTotalCount:0,labels:[],numberOfVotes:0,hasAcceptedAnswer:!1}}}}),s("jIiwF",function(t,n){var r=i("42omo");let o=(0,i("cgtv4").defineMessages)({noQuestionsFound:{id:"questions.questions-list.no-questions-found",defaultMessage:"No questions found"}}),s=(0,i("ecnYn").xcss)({textAlign:"center",minHeight:"200px"});t.exports.QUESTIONS_PER_PAGE=15,t.exports.BaseQuestionsList=({questions:t,loading:n,asideComponent:a,mainContentHeader:c,routerName:l,showSpaceName:u,pageInfo:d,fetchMore:p,queryVariables:h,connectionPath:f,onFilterChange:m,labelFilter:y,disableFilter:b,spaceKey:g,currentFilter:x})=>{let{formatMessage:E}=(0,i("8C5kA").default)();return e(r).createElement(i("iUThO").Layout,{rightColumnWidth:"large",mainContentHeader:c,mainContent:e(r).createElement(i("1GzhS").default,{space:"space.250",alignBlock:"start",spread:"space-between",grow:"fill"},e(r).createElement(i("6Uz6K").QuestionsFilters,{onFilterChange:m,labelFilter:y,disableFilter:b,spaceKey:g,currentFilter:x}),n?e(r).createElement(i("6f0Oj").default,{xcss:s},e(r).createElement(i("9hlns").default,{size:"medium",label:"Loading"})):t?.length?e(r).createElement(e(r).Fragment,null,e(r).createElement(i("1GzhS").default,{space:"space.250",role:"list"},t.map(t=>e(r).createElement(i("bqQGV").QuestionItem,{key:t.content.id,createdBy:t.content.history.createdBy.displayName,numberOfAnswers:t.content.answersTotalCount,numberOfVotes:t.content.numberOfVotes,createdDate:new Date(t.content.history.createdDate),questionTitle:t.content.title,spaceKey:t.content.space.key,spaceName:u?t.content.space?.name:"",routerName:l,questionId:t.content.id,topics:t.content.labels,hasAcceptedAnswer:t.content.hasAcceptedAnswer}))),e(r).createElement(i("bU366").Pagination,{pageInfo:d,fetchMore:p,queryVariables:h,connectionPath:f})):e(r).createElement(i("6f0Oj").default,{xcss:s},e(r).createElement(i("5dK2X").default,null,E(o.noQuestionsFound)))),asideContent:a})}}),s("kTuMi",function(t,n){var r=i("42omo");t.exports.SpaceLink=({spaceKey:t,spaceName:n})=>e(r).createElement(i("8lYIw").Link,{name:i("1NBp8").SPACE_QUESTIONS_NATIVE.name,params:{spaceKey:t},"aria-label":n,className:(0,i("gMc0m").default)(["_11c81o8v _syazd34b"])},n)}),s("izEQ8",function(t,n){var r=i("42omo");t.exports.QuestionTopics=({topics:t})=>{let{createAnalyticsEvent:n}=(0,i("inPa6").useAnalyticsEvents)();return t&&0!==t.length?e(r).createElement(i("bRPo1").default,null,t.map(({name:t})=>{try{let n=i("1NBp8").QUESTIONS_TOPIC_NATIVE.toUrl({topicName:t.toLowerCase()});return e(r).createElement(i("ho4zm").default,{text:t,href:n,key:t,linkComponent:({children:t,...n})=>e(r).createElement(i("fpGTa").default,{...n,className:(0,i("gMc0m").default)(["_syaz1kw7 _10531kw7 _f8pj1kw7 _30l31kw7 _9h8h1kw7"])},t)})}catch(o){return n({type:"sendOperationalEvent",data:{action:"failed",actionSubject:"topicUrlGeneration",source:"QuestionTopics",attributes:{topicName:t,errorMessage:o instanceof Error?o.message:"Unknown error",errorName:o instanceof Error?o.name:"Error"}}}).fire(),e(r).createElement(i("ho4zm").default,{text:t,key:t,href:void 0})}})):null}}),s("iUThO",function(t,n){var r=i("42omo");let o=t=>e(r).createElement(i("d8SNb").default,{...t,xcss:"_zulppxbi _1bsb1osq _yv0e9kwb"}),s=t=>e(r).createElement(i("d8SNb").default,{...t,xcss:"_zulppxbi _1bsb1osq _yv0ee9gk"});t.exports.Layout=({mainContent:t,mainContentHeader:n,asideContent:a,rightColumnWidth:c="small"})=>e(r).createElement("large"===c?s:o,{testId:"questions-layout-grid"},e(r).createElement(i("gdv5Z").default,{padding:"space.200"},n,t),e(r).createElement(i("gdv5Z").default,{padding:"space.200"},a))}),s("bU366",function(t,n){var r=i("42omo");let o=(0,i("cgtv4").defineMessages)({showMoreButton:{id:"questions.pagination.show-more-button",defaultMessage:"Show More"}}),s=(e,t)=>t.split(".").reduce((e,t)=>e&&e[t],e);t.exports.Pagination=({pageInfo:t,fetchMore:n,queryVariables:a,connectionPath:c})=>{let{formatMessage:l}=(0,i("8C5kA").default)(),[u,d]=(0,r.useState)(!1),{hasNextPage:p,endCursor:h}=t,f=(0,r.useCallback)(async()=>{if(p&&!u){d(!0);try{await n({variables:{...a,after:h},updateQuery:(e,{fetchMoreResult:t})=>{if(!t)return e;let n=s(e,c),r=s(t,c);return n&&r?{...t,[c]:{...r,nodes:[...n.nodes||[],...r.nodes||[]]}}:t}})}catch(e){}finally{d(!1)}}},[p,u,n,a,h,c]);return p?e(r).createElement(i("bUlM5").default,{justifyContent:"center"},e(r).createElement(i("ccHMk").default,{isLoading:u,onClick:f},l(o.showMoreButton))):null}}),s("814Fv",function(e,t){var n,r;let o={fragment:{argumentDefinitions:n=[{defaultValue:null,kind:"LocalArgument",name:"cloudId"}],kind:"Fragment",name:"GlobalSpaceQuery",selections:r=[{args:[{kind:"Variable",name:"cloudId",variableName:"cloudId"}],concreteType:"ConfluenceQuestionsConfiguration",kind:"LinkedField",name:"confluence_questionsConfiguration",plural:!1,selections:[{kind:"ScalarField",name:"confluenceQuestionsGlobalSpaceKey"},{kind:"ScalarField",name:"hasConfluenceQuestionsAccess"},{kind:"ScalarField",name:"confluenceQuestionsGlobalSpaceId"}]}],type:"Query"},kind:"Request",operation:{argumentDefinitions:n,kind:"Operation",name:"GlobalSpaceQuery",selections:r},params:{cacheID:"1b9c8f622ddd75c98ac58c53ee16a43b",id:"6c1ad3ba282a42d687c2198e1c032ca40688427aa7280fcc2cd1cb87f1e323e0",metadata:{},name:"GlobalSpaceQuery",operationKind:"query",text:"query GlobalSpaceQuery($cloudId:ID!){confluence_questionsConfiguration(cloudId:$cloudId){confluenceQuestionsGlobalSpaceKey,hasConfluenceQuestionsAccess,confluenceQuestionsGlobalSpaceId}}"}};o.hash="03955db9b4960772eed9546a1ebbec30",e.exports.GlobalSpaceQuery=o}),s("c8uPc",function(t,n){var r=i("42omo");class o extends r.Component{render(){let{node:t,mode:n,extensionKey:o,contentId:s}=this.props,a=(0,i("5kjCz").getMacroAttributesFromADFNode)(t),c=t?.parameters?.macroMetadata?.title,l=-1!==t.extensionKey.indexOf("jira")?e(r).createElement(i("lAFHW").JiraIcon,{size:"small",label:c}):e(r).createElement(e(i("jdPfT")),{label:c}),u=t.type===i("8pcS0").INLINE_EXTENSION_TYPE;return e(r).createElement(r.Fragment,null,e(r).createElement("div",{"data-testid":"dead-macro-icon",style:{display:"inline-block",backgroundColor:"var(--ds-icon-inverse, #FFFFFF)",borderRadius:5,width:u?"680px":"100%",height:25,padding:"var(--ds-space-050, 4px)"}},l,e(r).createElement("span",{style:{paddingLeft:"var(--ds-space-050, 4px)",position:"absolute"}},c)),e(r).createElement(i("bX5uj").MacroExperienceSuccess,{name:(0,i("5kjCz").getExperienceName)(n,t),contentId:s,extensionKey:o,mode:n,attributes:a}))}}t.exports.DeadMacroRenderer=o}),s("5h7sn",function(t,n){var r=i("42omo"),o=i("eS4Za"),s=i("7y0YZ"),a=i("gmxua");t.exports.getMigrationExtHandlerForEditor=({contentId:t,contextProviders:n})=>(0,o.createMacroExtensionHandler)(o=>{let c;if(!o)return null;let{extensionKey:l,parameters:u}=o,{ClassicEditorContextProvider:d=({children:e})=>e}=n,p=(0,i("5kjCz").getMacroAttributesFromADFNode)(o),h={contentId:t,mode:i("5kjCz").EDITOR,extensionKey:l,node:o};switch(l){case i("8pcS0").EXTENSION_KEY.INVALID:c=e(r).createElement(d,null,e(r).createElement(s.InvalidExtensionLoader,{parameters:u,...h}));break;case i("8pcS0").EXTENSION_KEY.INLINE_EXTERNAL_IMAGE:c=e(r).createElement(i("fPNzj").InlineExternalImage,{...u,...h});break;case i("8pcS0").EXTENSION_KEY.INLINE_MEDIA_IMAGE:let{link:f}=u;c=e(r).createElement(i("6842f").InlineImage,{...u,...h,link:f});break;case i("8pcS0").EXTENSION_KEY.LEGACY_CONTENT:c=e(r).createElement(a.LegacyContentExtensionHandler,h)}return e(r).createElement(r.Fragment,null,e(r).createElement(i("4KFTW").MacroExperienceStart,{name:(0,i("5kjCz").getExperienceName)(i("5kjCz").EDITOR,o),contentId:t,mode:i("5kjCz").EDITOR,extensionKey:l,attributes:p,timeout:i("aJPUt").ExperienceTimeout.MACRO_LOAD}),c)})}),s("efhBi",function(e,t){let n=i("4mJKd")(5);e.exports=Promise.all([n("6wr18"),n("cZcsn"),n("ffEVr"),n("kEwWf"),n("h3G8d")]).then(()=>i("cul1e"))}),s("gmxua",function(t,n){var r=i("42omo"),o=i("4PPzL"),s=i("8Ij3v"),a=i("hEeUR");let c={version:1,type:"doc",content:[{type:"paragraph",content:[]}]},l=({children:t})=>(0,i("9wGTI").fg)("platform_editor_lce_collapse_bullets")?e(r).createElement("div",{className:(0,i("gMc0m").default)(["_1t4wglyw _1syfglyw _1pnoidpf _1gocidpf"])},t):t,u=(0,r.memo)(({node:t})=>{let n=(0,i("7QM6o").useSpaceId)(),o=(0,i("cLo2u").useSpaceKey)(),[u]=(0,i("ep3mz").usePageContentId)(),[d="page"]=(0,i("ep3mz").useContentType)(),{environment:p,cloudId:h,userId:f,activationId:m}=(0,i("bQm3c").useSessionData)(),{getExtensionHandlers:y,populateExtensionProviders:b}=(0,r.useContext)(i("hMRhJ").RendererExtensionContext),{createAnalyticsEvent:g}=(0,i("inPa6").useAnalyticsEvents)(),x=(0,i("8C5kA").default)(),{mode:E}=(0,i("gGHFp").useEditorContentModeValue)({contentId:u}),v=t?.parameters?.nestedContent||c,_=(0,i("6mKj3").expValEquals)("editor_tinymce_full_width_mode","isEnabled",!0)||(0,i("6mKj3").expValEquals)("confluence_max_width_content_appearance","isEnabled",!0)?"max":"full-width",w=(0,r.useMemo)(()=>y?.({adf:v,contentId:u,spaceKey:o,contentType:d,appearance:"full-width",referentialityDataSourceProvider:{}},g),[u,d,g,v,y,o]),I=(0,s.useRendererAnnotationProviderOptions)({pageId:u??"",validAnnotationsCallback:()=>{},triggerAnalyticsEvent:g,updateDocument:()=>{},isArchived:!1}),S=(0,r.useCallback)(()=>{let e=i("4FxUL").default.create({});return b&&b(e,{activationId:m,accountId:f,cloudId:h,containerId:o,contentId:u,contentType:d,createAnalyticsEvent:g,environment:p,extensionHandlers:w,intl:x,spaceKey:o,spaceId:n}),e},[b,m,f,h,o,u,d,g,p,w,x,n]),T=(0,r.useMemo)(()=>({skipValidation:!0}),[]);return(0,r.useEffect)(()=>{u&&g&&v&&g({type:"sendOperationalEvent",data:{action:"rendererInitialised",actionSubject:"legacyContentMacro",source:"legacyContentMacro",attributes:{objectId:u,pageElementCounts:(0,i("3JtSu").getPageElementCounts)(v)}}}).fire()},[u,g,v,t.localId]),e(r).createElement(i("iZq0X").ValidationContextProvider,{value:T},e(r).createElement(i("lspPP").RendererActionsContext,null,e(r).createElement(l,null,e(r).createElement(a.ADFRenderer,{annotationProvider:I,allowAnnotations:!0,appearance:_,allowHeadingAnchorLinks:!1,contentId:u,dataProviders:S(),document:v,extensionHandlers:(0,i("9wGTI").fg)("platform_editor_lce_dataprovider-only_handlers")?void 0:w,contentMode:E}))))});t.exports.LegacyContentExtensionHandler=t=>{let[n]=(0,i("ep3mz").usePageContentId)();return e(r).createElement(o.ErrorBoundary,{attribution:i("3IBnw").Attribution.CC_EDITOR_AI,attributes:{contentId:n,nodeLocalId:t.node?.localId}},e(r).createElement(u,{node:t.node}))}}),s("7NX4e",function(t,n){var r=i("42omo"),o=i("jJli4");let s=t=>{let{contentId:n,spaceKey:s,extensionKey:a,node:c,mode:l,Renderer:u,isLivePage:d}=t,{contentAppearance:{appearance:p}}=(0,i("2HGN8").useContentAppearance)(),h=(0,r.useMemo)(()=>({targetContentId:t,adf:n,mediaToken:o,isInsideOfInlineExtension:i})=>{let a={contentId:t,spaceKey:s,data:{content:{nodes:[{body:{dynamic:{representation:"atlas_doc_format",value:JSON.stringify({content:n,type:"doc"})}}}]}},appearance:p,hasInlineComments:!1,mediaToken:o,annotationProvider:void 0,allowAnnotations:!1,isInsideOfInlineExtension:i};return e(r).createElement(u,a)},[s,p,u]);return e(r).createElement(o.ExcerptIncludeLoader,{mode:l,contentId:n,spaceKey:s,extensionKey:a,macroNode:c,RendererWrapper:h,isLegacyRenderer:!0,isLivePage:d})};t.exports.ExcerptIncludeExtensionHandler=t=>{let{getExtensionHandlers:n,populateExtensionProviders:o}=(0,r.useContext)(i("giS6h").ClassicEditorContext),a=(0,r.useMemo)(()=>({getExtensionHandlers:n,populateExtensionProviders:o}),[n,o]);return e(r).createElement(i("hMRhJ").RendererExtensionContext.Provider,{value:a},e(r).createElement(i("2HGN8").ContentAppearanceContextProvider,{contentId:t.contentId},e(r).createElement(s,t)))}}),s("aIqlA",function(t,n){var r,o,s=i("7MEO5"),a=i("1c598");let c="configUserPicker";class l extends Error{constructor(e){super(e),Object.setPrototypeOf(this,l.prototype)}}let u=`For this app to display, you need to press the Allow Access button in the
macro to allow the app to access Atlassian products on your behalf.`;function d(e,t){let n=e.reduce((e,{props:t})=>{if(t){for(let n of["defaultChecked","defaultSelected"])if(n in t)return[...e,t.value]}return e},[]);return t?n:n[0]}let p=e=>e.map(({props:e,type:t})=>{if(!e)throw Error(`Props are undefined on ${t}`);return{label:e.label,value:e.value}}),h={TextField:e=>({type:"string",name:e.name,label:e.label,description:e.description,defaultValue:e.defaultValue,isRequired:e.isRequired,isHidden:e.isHidden,placeholder:e.placeholder}),DatePicker:e=>({type:"date",name:e.name,label:e.label,description:e.description,defaultValue:e.defaultValue,isRequired:e.isRequired,placeholder:e.placeholder}),Select:(e,t)=>({type:"enum",name:e.name,label:e.label,description:e.description,isRequired:e.isRequired,style:"select",isMultiple:e.isMulti,placeholder:e.placeholder,items:p(t),defaultValue:d(t,e.isMulti)}),CheckboxGroup:(e,t)=>({type:"enum",name:e.name,label:e.label,description:e.description,isRequired:e.isRequired,style:"checkbox",isMultiple:!0,items:p(t),defaultValue:d(t,!0)}),RadioGroup:(e,t)=>({type:"enum",name:e.name,label:e.label,description:e.description,isRequired:e.isRequired,style:"radio",isMultiple:!1,items:p(t),defaultValue:d(t,!1)}),UserPicker:e=>({type:"user",name:e.name,label:e.label,isMultiple:e.isMulti,isRequired:e.isRequired,options:{provider:{type:c}},placeholder:e.placeholder,description:e.description,defaultValue:e.defaultValue}),TextArea:e=>({type:"string",name:e.name,style:"multiline",label:e.label,placeholder:e.placeholder,description:e.description,isRequired:e.isRequired,defaultValue:e.defaultValue})},f=(e,t)=>{if(e)return Array.isArray(e)?t?e.map(e=>e.value):e[0].value:e.value},m={Textfield:e=>({type:"string",name:e.name,label:e.label,description:e.description,defaultValue:e.defaultValue,isRequired:e.isRequired,isHidden:e.isHidden,placeholder:e.placeholder}),DatePicker:e=>({type:"date",name:e.name,label:e.label,defaultValue:e.defaultValue,isRequired:e.isRequired,placeholder:e.placeholder}),Select:e=>({type:"enum",name:e.name,label:e.label,description:e.description,isRequired:e.isRequired,style:"select",isMultiple:e.isMulti,placeholder:e.placeholder,items:e.options,defaultValue:f(e.defaultValue,e.isMulti)}),CheckboxGroup:e=>({type:"enum",name:e.name,label:e.label,isRequired:e.isRequired,isMultiple:!0,style:"checkbox",items:e.options,defaultValue:e.defaultValue}),RadioGroup:e=>({type:"enum",name:e.name,label:e.label,isRequired:e.isRequired,style:"radio",isMultiple:!1,items:e.options,defaultValue:e.defaultValue}),UserPicker:e=>({type:"user",name:e.name,label:e.label,isMultiple:e.isMulti,isRequired:e.isRequired,options:{provider:{type:c}},placeholder:e.placeholder,description:e.description,defaultValue:e.defaultValue}),TextArea:e=>({type:"string",name:e.name,style:"multiline",label:e.label,placeholder:e.placeholder,isRequired:e.isRequired,defaultValue:e.defaultValue})},y=e=>{let t,n=[],r=/Received (.*?) component/g;for(;null!==(t=r.exec(e));){let[e,r]=t;n.push(r)}return b(n)},b=e=>{let t=[...new Set(e)];return`${1===t.length?"":`${t.slice(0,-1).join(", ")} and`} ${t.slice(-1)} components are not supported in macro config`},g=e=>{let t=[],n=null;return e.forEach(({children:e,props:r,type:o,...i})=>{let s={...r};n&&"Label"!==o?(s.label=n,n=null):"Label"===o?n=e[0]?.props?.text??null:r&&!r.label&&(s.label=""),t.push({...i,children:e,type:o,props:s})}),t},x=(e,t)=>{let n=g(e),r=t&&t>=10?n.filter(e=>"Label"!==e.type).map(({children:e,props:t,type:n})=>m[n]?m[n](t||{},e):n):e.map(({children:e,props:t,type:n})=>h[n]?h[n](t||{},e):n),o=r.filter(e=>"string"==typeof e);if(o.length>0)throw new l(b(o));return r},E=e=>{let t=e.children[0]?.forgeReactMajorVersion;for(let{type:n,props:r,children:o}of e.children){if("ErrorPanel"===n&&r){let{error:{errorMessage:e,errorDetails:t}}=r;if(e.includes("Validation error")&&t.includes("Expected direct child of MacroConfig to be one of"))throw new l(y(t));throw Error(`${t||e||""}`)}if("ThreeLOPrompt"===n)throw Error(u);if("MacroConfig"===n)return x(o,t)}throw Error("<MacroConfig> must be used at the root")};var v=i("7TH2w");let _=(0,i("eSUdr").default)`mutation forge_ui_invokeAuxEffects($input:InvokeAuxEffectsInput!){invokeAuxEffects(input:$input){success errors{message extensions{errorType statusCode}}result{effects contextToken{jwt expiresAt}metrics{appTimeMs}}}}`;class w extends Error{constructor(e){super(e),Object.setPrototypeOf(this,w.prototype)}}function I(e){return"render"===e.type&&!!e.aux&&!!e.state||"result"===e.type&&!!e.forgeDoc&&!!e.state}function S(e){return e?.macroMetadata?.macroId?.value}let T={FORGE_EXTENSION_INSERTED:"inserted",FORGE_EXTENSION_FAILED:"failed",FORGE_EXTENSION_ERRORED:"errored",FORGE_MACRO_AUTO_CONVERT_SUCCESS:"auto_convert_success",FORGE_MACRO_AUTO_CONVERT_TO_SMARTLINK:"auto_convert_to_smartlink",H11N_CONFIG_WARNING:"h11n_macro_config_warning",H11N_CONFIG_ERROR:"h11n_macro_config_error",H11N_RESOLVE_FAILED:"h11n_macro_resolve_failed",H11N_UPGRADE_RICH_TEST_SKIPPED:"h11n_macro_upgrade_rich_text_skipped",H11N_UPGRADE_SUCCESS:"h11n_macro_upgrade_success",H11N_UPGRADE_FAILED:"h11n_macro_upgrade_failed",H11N_RENDER_SUCCESS:"h11n_macro_render_success",H11N_RENDER_FAILED:"h11n_macro_render_success",APP_MIGRATION_P2_MACRO_RESOLVED:"app_migration_p2_macro_resolved",APP_MIGRATION_P2_MACRO_UPGRADE:"app_migration_p2_macro_upgrade"},C=({analyticsWebClient:e,forgeUIAnalyticsContext:t,source:n})=>({sendEvent:(r,o)=>{let{localId:s,nodeLocalId:a,extension:c,extensionId:l,extensionKey:u,extensionType:d,error:p,macroId:h,macroTitle:f,link:m,forgeEnvironment:y,render:b}=o,g=l||c?.id,{environmentType:x}=c||{},E={...(0,i("45DA9").extensionIdToAnalyticsAttributes)(g),...c?.environmentType?{forgeEnvironment:x}:{}},_=p instanceof Error?p.message:String(p),w=p instanceof Error?p.name:String(p),I=r.startsWith("h11n")?{action:r,actionSubject:i("31HPn").CONNECT_ADDON_ACTION_SUBJECT,actionSubjectId:E.extensionKey,eventType:v.OPERATIONAL_EVENT_TYPE,source:n,...t}:r.startsWith("app_migration")?{action:r,actionSubject:i("31HPn").MIGRATED_SERVER_P2_ADDON_ACTION_SUBJECT,actionSubjectId:E.extensionKey,eventType:v.OPERATIONAL_EVENT_TYPE,source:n,...t}:{action:r,actionSubject:i("31HPn").FORGE_EXTENSION,actionSubjectId:g,eventType:v.OPERATIONAL_EVENT_TYPE,source:n,...t};switch(r){case T.H11N_UPGRADE_SUCCESS:(0,i("3Spjc").sendEvent)(e)({...I,eventType:v.TRACK_EVENT_TYPE,attributes:{...E,localId:s,nodeLocalId:a,extensionType:d}});return;case T.H11N_RENDER_SUCCESS:(0,i("3Spjc").sendEvent)(e)({...I,attributes:{...E,nodeLocalId:a}});return;case T.H11N_RENDER_FAILED:(0,i("3Spjc").sendEvent)(e)({...I,attributes:{...E,nodeLocalId:a,errorMessage:_}});return;case T.H11N_UPGRADE_FAILED:(0,i("3Spjc").sendEvent)(e)({...I,actionSubjectId:u,attributes:{...E,nodeLocalId:a,errorMessage:_,extensionKey:u,extensionType:d}});return;case T.H11N_UPGRADE_RICH_TEST_SKIPPED:(0,i("3Spjc").sendEvent)(e)({...I,attributes:{...E,nodeLocalId:a,extensionType:i("31HPn").EXTENSION_NAMESPACE}});return;case T.H11N_RESOLVE_FAILED:(0,i("3Spjc").sendEvent)(e)({...I,attributes:{...E,errorMessage:_,extensionKey:u}});return;case T.APP_MIGRATION_P2_MACRO_RESOLVED:(0,i("3Spjc").sendEvent)(e)({...I,attributes:{...E,extensionType:d,extensionKey:u}});return;case T.APP_MIGRATION_P2_MACRO_UPGRADE:(0,i("3Spjc").sendEvent)(e)({...I,attributes:{...E,localId:s,nodeLocalId:a,extensionId:g,extensionType:d,extensionKey:u}});return;case T.H11N_CONFIG_WARNING:case T.H11N_CONFIG_ERROR:(0,i("3Spjc").sendEvent)(e)({...I,actionSubjectId:g,attributes:{errorMessage:_,macroId:h,macroTitle:f,macroKey:c?.key,extensionId:g,migrationKey:c?.migrationKey}});return;case T.FORGE_EXTENSION_INSERTED:(0,i("3Spjc").sendEvent)(e)({...I,attributes:{...E,localId:s,extensionType:i("31HPn").EXTENSION_NAMESPACE}});return;case T.FORGE_EXTENSION_FAILED:(0,i("3Spjc").sendEvent)(e)({...I,actionSubjectId:g,attributes:{...E,method:"convertNodeToForgeExtension",localId:s,errorMessage:_}});return;case T.FORGE_EXTENSION_ERRORED:(0,i("3Spjc").sendEvent)(e)({...I,actionSubjectId:g,attributes:{...E,errorName:w,errorMessage:_,extensionType:i("31HPn").EXTENSION_NAMESPACE}});return;case T.FORGE_MACRO_AUTO_CONVERT_SUCCESS:(0,i("3Spjc").sendEvent)(e)({...I,actionSubjectId:g,attributes:{...E,link:m,macroTitle:f,forgeEnvironment:y,render:b}});return;default:return}}}),P=new Set,N=({config:e,guestParams:t})=>t||e,O=`The app's version is outdated due to a deprecated platform component.
The app developer needs to update it to a compatible version.
Please ask your admin to check for updates or contact the app developer.`,A=({analyticsWebClient:e,apolloClient:t,contextIds:n,cloudId:r,extensionData:o})=>async s=>{let{extensionId:a,localId:c,extension:u}=s;if((0,i("dh538").fg)("platform_disable_ui_kit_1_config_renderer"))throw Error(O);let d=N(s);try{let e=function(e,t,n){let{contextIds:r,extensionId:o,localId:i,functionId:s}=e,{context:a,...c}=t;return{contextIds:r,extensionId:o,...s?{entryPoint:s}:{},payload:{...c,context:{...a,extensionData:n,localId:i}}}}({contextIds:n,extensionId:a,localId:c,functionId:"config"},{effects:[{type:"initialize"}],state:{},config:d,context:{isConfig:!0,cloudId:r}},{...o,config:d,isConfig:!0}),i=await t.mutate({mutation:_,variables:{input:e}}),s=function(e,t){if(!e)return[];let n=e.data.invokeAuxEffects||{},{result:r={}}=n;if(!n.success){let e=n.errors?.[0],o=e?.extensions?.statusCode;if(400!==o&&500!==o||!r.effects)return t(e?.message)}return r.effects.every(I)?r.effects:t("received a non-client effect")}(i,e=>{throw new w(e)})[0];return E("result"===s.type?s.forgeDoc:s.aux)}catch(r){let{name:t,message:n}=r;throw r instanceof l||!e||(0,i("3Spjc").sendEvent)(e)({eventType:v.OPERATIONAL_EVENT_TYPE,action:"errored",actionSubject:"forge.ui.extension",source:"editPageScreen",attributes:{errorName:t,errorMessage:n,...(0,i("45DA9").extensionIdToAnalyticsAttributes)(a),extensionType:u?.type,forgeEnvironment:u?.environmentType}}),Error(n||"")}},M=({analyticsClient:e,extension:t,hasCustomConfig:n})=>async r=>{let{extensionId:o,localId:s}=r,a=N(r),c=`${o}-${s}`;if(n)return[];let u=new Promise((e,t)=>{(0,i("luNHV").emit)(`GET_CONFIG_FORGE_DOC_${c}`,{resolve:e,reject:t,config:a})});try{let e=await u;if(!e.children[0]?.forgeReactMajorVersion&&(0,i("dh538").fg)("platform_disable_ui_kit_1_config_renderer"))throw Error(O);return E(e)}catch(r){let{message:n}=r;if(!(r instanceof l)){let{sendEvent:n}=e;n(T.FORGE_EXTENSION_ERRORED,{extension:t,error:r})}throw Error(n||"")}},R=({analyticsClient:e,connectToForgeBlockedExtensions:t,eventSource:n,extension:r,hasCustomConfig:o,hasUiKitOneConfig:i,isCustomUI:s,isUiKitTwo:a,uiKitOneGetFieldsDefinitionFunction:c})=>async n=>{let l=S(n);if(!n.extensionId){let o="Macro configuration failed to load. Please close this panel and try again.",i="non-forge-macro";if(!l)throw Error(o);let s=!1;if(t.has(l)?(o="Editing multi-bodied macros is not currently supported.",i="bodied-macro-blocked",s=!0):P.has(l)&&(o="This macro has been reverted. Please close this panel and try again.",i="macro-reverted",s=!0),r.migrationKey){let{sendEvent:t}=e;t(s?T.H11N_CONFIG_WARNING:T.H11N_CONFIG_ERROR,{extension:r,error:i,macroId:l,macroTitle:n.macroMetadata?.title})}}l&&P.add(l);let u=M({analyticsClient:e,extension:r,hasCustomConfig:o});return(s||a)&&!i?u(n):c(n)},k=({config:e,guestParams:t})=>t||e,D=e=>k(e),F=e=>({guestParams:e});function j(e){return e instanceof Error&&"ZodError"===e.name&&"issues"in e&&Array.isArray(e.issues)}var L=class extends Error{toString(){return this.message}constructor(e,t){super(e,t),(0,i("6acb5")._)(this,"name",void 0),(0,i("6acb5")._)(this,"details",void 0),this.name="ZodValidationError",this.details=function(e){if(e){let t=e.cause;if(j(t))return t.issues}return[]}(t)}};function V(e){return 0!==e.length}var U=RegExp("[$_\\p{ID_Start}][$\\u200c\\u200d\\p{ID_Continue}]*","u"),K="Validation error",$=(e={})=>t=>j(t)?function(e,t={}){var n;let r,o=e.errors;return new L(V(o)?("messageBuilder"in(n=t)?n.messageBuilder:function(e={}){let{issueSeparator:t="; ",unionSeparator:n=", or ",prefixSeparator:r=": ",prefix:o=K,includePath:s=!0,maxIssuesInMessage:a=99}=e;return e=>{var c,l,u;return c=e.slice(0,a).map(e=>(function e(t){let{issue:n,issueSeparator:r,unionSeparator:o,includePath:s}=t;if(n.code===i("gLLcz").ZodIssueCode.invalid_union)return n.unionErrors.reduce((t,n)=>{let i=n.issues.map(t=>e({issue:t,issueSeparator:r,unionSeparator:o,includePath:s})).join(r);return t.includes(i)||t.push(i),t},[]).join(o);if(n.code===i("gLLcz").ZodIssueCode.invalid_arguments)return[n.message,...n.argumentsError.issues.map(t=>e({issue:t,issueSeparator:r,unionSeparator:o,includePath:s}))].join(r);if(n.code===i("gLLcz").ZodIssueCode.invalid_return_type)return[n.message,...n.returnTypeError.issues.map(t=>e({issue:t,issueSeparator:r,unionSeparator:o,includePath:s}))].join(r);if(s&&V(n.path)){var a;if(1===n.path.length){let e=n.path[0];if("number"==typeof e)return`${n.message} at index ${e}`}return`${n.message} at "${1===(a=n.path).length?a[0].toString():a.reduce((e,t)=>{if("number"==typeof t)return e+"["+t.toString()+"]";if(t.includes('"'))return e+'["'+t.replace(/"/g,'\\"')+'"]';if(!U.test(t))return e+'["'+t+'"]';let n=0===e.length?"":".";return e+n+t},"")}"`}return n.message})({issue:e,issueSeparator:t,unionSeparator:n,includePath:s})).join(t),l=o,u=r,null!==l?c.length>0?[l,c].join(u):l:c.length>0?c:K}}(n))(o):e.message,{cause:e})}(t,e):t instanceof Error?new L(t.message,{cause:t}):new L("Unknown error");let H=(e,{isBodiedExtension:t,isInitialInsertion:n,schema:r})=>{if(!G(e))throw new B("Must provide payload object","INVALID_PAYLOAD");let{config:o,keepEditing:i}=e,s=e.body||e.insertBody;if(!G(o))throw new B('Invalid "config" provided. Expected object',"INVALID_CONFIG");try{X(o)}catch(e){throw new B(Q(e),"INVALID_CONFIG")}if(s){if(!t)throw new B('Cannot set "body" for non bodied extension',"INVALID_EXTENSION_TYPE");if(!W(s))throw new B('Invalid ADF "body" provided. Expected node of type doc with content',"INVALID_BODY");let{valid:e,errors:n}=J(s,r);if(!e||n.length)throw new B(`Invalid ADF "body" provided.
${n.map(e=>`${e.code}: ${e.message}`).join("\n")}`,"INVALID_BODY")}return{config:o,keepEditing:!!i,body:s||void 0}},q=e=>{if(e instanceof Error&&e.message.includes("Could not find node"))throw new B("Macro not found.","MACRO_NOT_FOUND");throw e},G=e=>null!==e&&"object"==typeof e&&!Array.isArray(e),W=e=>G(e)&&"doc"===e.type&&Array.isArray(e.content);class B extends Error{constructor(e,t){super(Z(e)),this.code=void 0,this.code=t}}let z=e=>{let t=e.filter(e=>e?.issues.some(e=>"invalid_union"===e.code));if(t.length){let e=t[0].issues[0];if("invalid_union"===e.code)return z(e.unionErrors)}return{message:e[0].issues[0].message,path:e[0].issues[0].path}},Y=e=>e.reduce((e,t)=>{if("invalid_union"===t.code){let n=z(t.unionErrors);e.push({message:n.message,path:n.path})}else e.push({message:t.message,path:t.path});return e},[]).reduce((e,{message:t,path:n})=>e+`${t} at "${n.join(".")}"
`,""),Q=e=>(function(e,t={}){return $(t)(e)})(e,{messageBuilder:Y,prefix:null}).message,X=e=>{let t=i("gLLcz").z.lazy(()=>i("gLLcz").z.union([i("gLLcz").z.undefined(),i("gLLcz").z.string(),i("gLLcz").z.number(),i("gLLcz").z.boolean(),i("gLLcz").z.object({}).catchall(t),i("gLLcz").z.array(i("gLLcz").z.union([i("gLLcz").z.string(),i("gLLcz").z.number(),i("gLLcz").z.boolean(),i("gLLcz").z.object({}).catchall(t)])).superRefine((e,t)=>{if(e.length>0){let n=typeof e[0];e.every(e=>typeof e===n)||t.addIssue({code:"custom",message:"All array items must be of the same type"})}})]));i("gLLcz").z.record(t).parse(e)},Z=e=>`view.submit(): ${e}`,J=(e,t)=>{let n=t||i("iyDxB").defaultSchema,r=Object.keys(n.marks),o=Object.keys(n.nodes),s=(0,i("jqXx5").validator)(o,r,{mode:"strict"}),{content:a}=e,c=(0,i("1MUpo").bodiedExtension)({extensionType:i("31HPn").EXTENSION_NAMESPACE,extensionKey:"dummy-validate-only"})(...a),l=[],{valid:u}=s((0,i("caRYB").doc)(c),(e,t)=>{l.push(t)});return{valid:u,errors:l}};var ee=i("42omo");let et=(0,i("cgtv4").defineMessages)({blockedMacroTitle:{id:"xen-editor-provider.app-access-blocked-macro.title",defaultMessage:"An administrator blocked this app"},blockedMacroBodyWithAppName:{id:"xen-editor-provider.app-access-blocked-macro.bodyWithAppName",defaultMessage:"<strong>{extensionName}</strong> has been blocked by your administrator in this space. For any questions, reach out to your organization admin."},blockedMacroBodyWithoutAppName:{id:"xen-editor-provider.app-access-blocked-macro.bodyWithoutAppName",defaultMessage:"<strong>This app</strong> has been blocked by your administrator in this space. For any questions, reach out to your organization admin."},blockedMacroLearnMore:{id:"xen-editor-provider.app-access-blocked-macro.learnMoreAction",defaultMessage:"Learn more about which apps are blocked"},exportMacroError:{id:"xen-editor-provider.export-macro.error",defaultMessage:"We've encountered an issue exporting this macro. Please try exporting this page again later"}}),en=({extensionName:t})=>{let n=(0,i("8C5kA").default)(),r={strong:t=>e(ee).createElement(i("5dK2X").default,{as:"strong"},t)},o=t?n.formatMessage(et.blockedMacroBodyWithAppName,{extensionName:t,...r}):n.formatMessage(et.blockedMacroBodyWithoutAppName,{...r}),s=(0,i("dedJV").getATLContextDomain)("id"),a=`https://${s}/manage-profile/apps`;return e(ee).createElement(i("aoVih").default,{title:n.formatMessage(et.blockedMacroTitle),actions:[e(ee).createElement(i("iHPbg").default,{href:a},e(ee).createElement(i("gtD4K").default,et.blockedMacroLearnMore))]},e(ee).createElement(i("5dK2X").default,{as:"p"},o))},er=({extension:t})=>()=>e(ee).createElement(en,{extensionName:t.properties.title}),eo=e=>"xen:macro"===e.type&&e.dataClassificationPolicyDecision?.status==="BLOCKED";var ei=i("hrSFW");class es extends ee.Component{componentDidCatch(e,t){this.setState({thrownError:{error:e,errorInfo:t}});let{page:n}=this.props,r=this.props.environment;(0,i("7KMPr").captureAndReportError)({error:e,errorExtensionDetails:this.props.extension?{type:this.props.extension.type,environmentType:this.props.extension.environmentType,appOwnerAccountId:this.props.extension.appOwner?.accountId,properties:this.props.extension.properties,id:this.props.extension?.id}:void 0,errorInfo:t,page:n,environment:r}),e instanceof w||this.props.createAnalyticsEvent({eventType:v.OPERATIONAL_EVENT_TYPE,data:{action:"failed",actionSubject:"forge.ui.renderer",source:n,tags:["forge"],attributes:{target:"errorBoundary",errorName:e.name}}}).fire(i("3Spjc").FORGE_UI_ANALYTICS_CHANNEL)}render(){let{thrownError:e}=this.state;return e?ee.createElement("div",{"data-testid":"ForgeErrorBoundary"},ee.createElement(i("aoVih").default,{appearance:"error",title:"Error rendering app",children:null})):this.props.children}constructor(...e){var t,n,r;super(...e),n={thrownError:void 0},(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t="state","string"))?r:r+"")in this?Object.defineProperty(this,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):this[t]=n}}let ea=({extension:e,children:t})=>{let{page:n,environment:r}=(0,i("5U2YR").useMetricsContext)(),o=(0,ee.useContext)(i("jIiuI").EnvironmentContext),{createAnalyticsEvent:s}=(0,i("inPa6").useAnalyticsEvents)();return ee.createElement(es,{environment:r??o,extension:e,page:n,createAnalyticsEvent:s},t)},ec=({accountId:e,apolloClient:t,contextIds:n,extensionId:r,coreData:o,extensionData:a,extensionPayload:c})=>{let[l,u]=(0,ee.useState)(void 0),[d,p]=(0,ee.useState)(!1),[h,f]=(0,ee.useState)(void 0),m=(0,ee.useMemo)(()=>n,[n]),{moduleKey:y}=function(e){let[t,n,r,o]=(0,s.parse)(e).resourceId.split("/");return{appId:t,environmentId:n,groupId:r,moduleKey:o}}(r),b=window.location.origin,g=(0,ee.useMemo)(()=>({accountId:e,...o,...a,moduleKey:y,siteUrl:b}),[o,a,y,b,e]),x=(0,i("dj2Gr").useInvokeExtension)(m,r,{client:t});return(0,ee.useEffect)(()=>{let e={...g};(async()=>{p(!0);try{let t=(await x({context:e,extensionPayload:c,exportType:"pdf"},"adfExport")).data.invokeExtension.response||{};t?.body&&u(t.body),f(t?.error)}catch(e){f(e&&e.message)}p(!1)})()},[t,x,g,c]),{adfDoc:l,isLoading:d,error:h}};var el=i("67O0h");let eu=({accountId:e,apolloClient:t,contextIds:n,coreData:r,dataProviders:o,extensionData:s,extensionId:a,extensionPayload:c})=>{let{adfDoc:l,error:u,isLoading:d}=ec({accountId:e,apolloClient:t,contextIds:n,extensionId:a,coreData:r,extensionData:s,extensionPayload:c}),p=(0,i("8C5kA").default)();return u?ee.createElement(i("aoVih").default,{appearance:"error"},p.formatMessage(et.exportMacroError)):d?ee.createElement(i("CMcde").Loader,null):l?ee.createElement(i("lspPP").RendererActionsContext,null,ee.createElement(el.default,{dataProviders:o,document:l})):null};var ed=i("jXDcc");i("bfgJH").audit,i("3u6GG"),i("3POu8").TimerObservable.create,i("5SNLA").buffer,i("e2TX1").bufferCount,i("ha2Ff").bufferTime,i("hvtnc").bufferToggle,i("7Jon0").bufferWhen,i("8QQGs").catchError,i("gonhO").combineLatest;var ep=i("5Dgek"),eh=i("hu8We"),ef=i("gosUm"),em=i("kQ0lo");i("iBgx8").concatMap,i("j2Sfh").count,i("3EdwZ").debounce,r=i("dGzwg").debounceTime,i("avZwt").defaultIfEmpty,i("fulrs").delay,i("3YBdK").delayWhen,i("5vrRW").dematerialize,i("jKOLV").distinct,i("2mnXV").distinctUntilChanged,i("j5i71").elementAt,i("8eQTU").every,i("d2JY2").exhaust,i("kjCE7").exhaustMap,i("dbHcj").expand,i("eVpDl").filter,i("5JBQy").finalize,i("dUt6W").find,i("iVKw6").first,i("6sXAX").groupBy,i("3WLBy").ignoreElements,i("6FTyv").isEmpty,i("bOaaj").last,i("2QGAA").map,i("dsb2s").mapTo,i("b5JJ1").materialize;var ey=i("244gB");i("7HI7Y").merge,em.mergeAll;var eb=i("XrDsM");eb.mergeMap,eb.mergeMap,i("btvNM").mergeMapTo,i("8fVz5").mergeScan;var eg=i("f5yaK"),ex=function(){function e(e,t){this.subjectFactory=e,this.selector=t}return e.prototype.call=function(e,t){var n=this.selector,r=this.subjectFactory(),o=n(r).subscribe(e);return o.add(t.subscribe(r)),o},e}();i("jHUX7").observeOn,i("c17EK").onErrorResumeNext,i("5hER9").pairwise;var eE=i("augeV");i("5h38X"),i("5JYSv"),i("fvPwd"),i("iiAcs"),ey.reduce,i("5AGP5").repeat,i("6GFHk").repeatWhen,i("e6s15").retry,i("igrC3").retryWhen,i("iY7u4").refCount,i("4LrJQ").sample,i("jAcJW").sampleTime,i("kiSup").scan,i("4Lrrt").sequenceEqual;i("gVc40").single,i("bFxBy").skip,i("3nfDH").skipLast,i("lDurq").skipUntil,i("3VDUL").skipWhile,i("HHFyQ"),i("5OUhL"),i("b5CQv");var ev=i("j8M4E");i("hsCka"),ev.switchMap,i("a1Ene").switchMapTo,i("kXEyd").take,i("ib5HR").takeLast,i("ghTt7").takeUntil,i("6ssFC").takeWhile,i("5NXxU").tap,i("jb2dN").throttle,i("9Kcfz").throttleTime,i("i3vZV").timeInterval,i("ePuNq").timeout,i("hkdng").timeoutWith,i("2eCs8").timestamp,i("1Ria2").toArray,i("7fTeW").window,i("4MF2G").windowCount,i("7ssQI").windowTime,i("Cr5z9").windowToggle,i("5A6fs").windowWhen,i("6zLY4").withLatestFrom,i("iCyab").zip;var e_=i("fgm2d"),ew=i("ha5sn");let eI=({showFlag:e,hideFlag:t})=>e&&t?{showFlag:t=>{let{isAutoDismiss:n,...r}=t,{type:o,appearance:s,actions:a}=t,c=n??("info"===s||"success"===s);return e({...r,type:s??o,actions:a?.map(({text:e,onClick:t})=>({onClick:()=>t(),content:e})),customComponent:c?i("aD1SW").default:void 0}),!0},closeFlag:({id:e})=>(t(e),!0)}:{},eS=({isEditing:e,localId:t,editorAPI:n})=>{if(e)return{getEditorContent:async()=>new Promise(e=>{n?.core?.actions.requestDocument(t=>{t?e({data:JSON.stringify(t)}):e({data:""})})}),getMacroContent:async()=>{let e=n?.extension?.actions?.api();if(!e)throw Error("Unable to get macro content: extensionAPI is not available");try{let{node:n}=e.getNodeWithPosByLocalId(t);return{data:JSON.stringify(n)}}catch(e){throw Error(`Failed to get macro: ${e}`)}},updateMacro:async e=>{if(!e?.data)return!1;try{let r=JSON.parse(e.data),o=n?.extension?.actions?.api();if(o&&r)return o.doc?.update(t,()=>r),!0}catch(e){throw Error(`Failed to update macro: ${e}`)}return!1},setMacroViewportHeight:async e=>{if(!(0,i("dh538").fg)("platform_measure_macro_height"))throw Error("setMacroViewportHeight is not available");try{let r=n?.extension?.actions?.api();if(r)return r.doc?.update(t,t=>({attrs:{...t.attrs,parameters:{...t.attrs?.parameters,viewportHeight:e}}})),!0}catch(e){throw Error(`Failed to set the macro's viewport height: ${e}`)}return!1}}},eT={small:"112px",medium:"262px",default:"262px",large:"524px",xlarge:"1048px"},eC=e=>eT[e??"default"],eP=e=>{(0,ee.useEffect)(()=>{if(!e)return;let t=window.location.origin,n=(0,i("luNHV").on)("EXTENSION_READY",async({localId:e})=>{window.postMessage({source:"forge-extension",type:"EXTENSION_READY",localId:e},t)});return()=>{n.unsubscribe()}},[e])};var eN=i("7pHhJ"),eO=i("ivfUe");let eA=({accountId:e,apolloClient:t,coreData:n,extensionData:o,extensionViewData:s,extensionPayload:a,environment:c,extension:l,locale:u,flags:d,getContextToken:p,customEditContext:h,isEditing:f,editorAPI:m,onForgeDocUpdated:y,viewportDimensions:b,useRouteActions:g,staticForgeDoc:x,unmountRuntime:E})=>{let v,{cloudId:_,localId:w}=n,I=h?.modalExtension,S=h?.bridge,T=(0,ee.useMemo)(()=>eS({isEditing:f,localId:w,editorAPI:m}),[f,w,m]),C=g?.(),[P]=(0,ee.useState)(()=>new(0,ed.ReplaySubject)(10)),N=(0,ee.useRef)(void 0),O=(0,ee.useRef)(void 0),A=`${l.id}-${n.localId}`,M=(0,ee.useCallback)(({forgeDoc:e})=>{Object.freeze(e),O.current=e,P.next(e),(0,i("luNHV").emit)(`CONFIG_FORGE_DOC_UPDATED_${A}`)},[A,P]);(0,ee.useEffect)(()=>{let e=(0,i("luNHV").on)(`GET_CONFIG_FORGE_DOC_${A}`,async({resolve:e,config:t})=>{let n=P.pipe(r(200)).subscribe({next:t=>{e({type:"Root",props:{},children:[t]}),n.unsubscribe()}});N.current=t});return()=>{e.unsubscribe()}},[A,P]),eP((0,i("dh538").fg)("forge-ui-reemit-ready-event"));let{showFlag:R,closeFlag:k}=(0,ee.useMemo)(()=>eI(d),[d]),D=(0,ee.useMemo)(()=>({...S,showFlag:R,closeFlag:k,reconcile:M,spaPush:C?.push,emitReadyEvent:E}),[S,R,k,M,C?.push,E]),F=(0,ee.useMemo)(()=>(0,ew.makeADFRenderer)({client:t,bridge:D}),[t,D]);return!(0,i("iqcSr").isCustomUI)(l)&&I&&(v=ee.createElement(i("caX7N").default,{zIndex:i("dTk3A").layers.blanket()},ee.createElement(i("4kfV4").default,{isTinted:!0,onBlanketClicked:()=>I.closeModalExtension()},ee.createElement("div",{className:(0,i("gMc0m").default)(["_1e0c1txw _1bsb1osq _4t3i1osq _4cvr1h6o _1bah1h6o _lcxvglyw"])},ee.createElement(i("9hlns").default,{size:"large"}))))),ee.createElement(i("jIiuI").EnvironmentContext.Provider,{value:c},ee.createElement(e_.ForgeUIRenderer,{accountId:e,bridge:D,client:t,cloudId:_,contextIds:[`ari:cloud:confluence::site/${_}`],components:{...(0,i("dh538").fg)("platform-forge-ui-kit-adf-renderer")?{AdfRenderer:F}:{},...(0,i("dh538").fg)("forge-ui-kit-editor")?{ChromelessEditor:eN.ChromelessEditor,CommentEditor:eO.CommentEditor}:{}},staticForgeDoc:x,extension:l,extensionData:o,extensionViewData:s,extensionPayload:a,customBridgeMethods:T,height:l.properties.viewportSize?eC(l.properties.viewportSize):void 0,locale:u,localId:w,getContextToken:p,product:"confluence",onForgeDocUpdated:e=>{if(y?.(e),"MacroConfig"===e.type){if(h)throw Error("ForgeReconciler.addConfig() cannot be called from within a custom config resource");O.current=e,P.next(e),(0,i("luNHV").emit)(`CONFIG_FORGE_DOC_UPDATED_${A}`)}},modalExtension:I,onModalExtensionClose:I?.closeModalExtension,loadingComponent:v,viewportDimensions:b}))},eM=()=>window?.location.href.includes("/wiki/pdf/"),eR=e=>eM()&&e?.properties?.adfExport;var ek=i("8m4tT");let eD=e=>{if(!e)return;let t={node:null};if(e.core.actions.execute(({tr:e})=>{let{selection:n}=e,{inlineExtension:r,extension:o,bodiedExtension:s,multiBodiedExtension:a}=e.doc.type.schema.nodes,c=[o,s,r,a],l=(0,ek.findSelectedNodeOfType)(c)(n);if(l?.node.attrs.extensionType!=="com.atlassian.ecosystem")return null;if(l)return t.node=l.node,null;let u=(0,ek.findParentNodeOfType)(c)(n);return u?t.node=u.node:n instanceof i("ks2lK").NodeSelection&&c.includes(n.node.type)&&(t.node=n.node),null}),!t.node)return;let n=t.node.attrs;return n.localId||n.parameters?.localId},eF=({editorAPI:e,localId:t})=>n=>{if(!n)return;let r=e?.extension?.actions?.api();r?.doc.update(t,e=>({attrs:{...e.attrs,parameters:{...e.attrs?.parameters,staticForgeDoc:n}}}))},ej=({editorAPI:e,extensionParameters:t,macroConfig:n})=>{let r=t?.extension?.properties?.emitsReadyEvent,o=t?.extensionProperties?.extension?.properties?.content==="static",i=(0,ee.useRef)(null),[s,a]=(0,ee.useState)(!o),c=t?.extensionProperties?.extension,l=!!c?.properties?.config?.resource;return(0,ee.useEffect)(()=>{if(!o||l||!e?.extension?.sharedState)return;let n=e.extension.sharedState.onChange(({nextSharedState:n,prevSharedState:r})=>{let o=r?.showContextPanel,i=n?.showContextPanel;(eD(e)||null)===t?.localId&&!o&&i&&a(!0),o&&!i&&a(!1)});return()=>{n()}},[e,o,l,t?.localId]),(0,ee.useEffect)(()=>{i.current!==n&&(i.current=n,a(!0),r||setTimeout(()=>{a(!1)},1e3))},[n,t?.localId,r]),{storeStaticForgeDoc:eF({editorAPI:e,localId:t?.localId}),shouldRenderRuntime:s,staticForgeDoc:t?.staticForgeDoc||null,unmountRuntime:()=>a(!1)}},eL=({extension:e,children:t})=>{let n=e?.properties?.viewportSize;if(n&&(0,i("dh538").fg)("confluence_forge_early_render_reserve_height")){let r=eC(n);return(0,i("iqcSr").isCustomUI)(e)?ee.createElement("div",{style:{height:r},"data-testid":"reserved-height-wrapper-custom-ui"},t):ee.createElement("div",{style:{minHeight:r},"data-testid":"reserved-height-wrapper-uikit"},t)}return ee.createElement(ee.Fragment,null,t)},eV=e=>{let t=(0,ee.useRef)(e);return(0,ei.dequal)(t.current,e)||(t.current=e),t.current},eU=({apolloClient:e,contextIds:t,cloudId:n,environment:r,extensionData:o,editorAPI:s,accountId:a,dataProviders:c,extension:l,isEditing:u,flags:d,getContextToken:p,hideGlassPane:h,customEditContext:f,useRouteActions:m})=>{let y=(0,ee.useRef)(null),b=(0,ee.useRef)(null),g=l.parameters?.extensionProperties?.extension?.properties?.content==="static",{extension:x,extensionId:E,extensionTitle:v,measuredHeight:_,viewportHeight:w}=l.parameters,I=l.parameters?.localId||"";I||(I=l.localId);let S=(0,ee.useMemo)(()=>(0,i("dh538").fg)("platform_measure_macro_height")?{measuredHeight:_,viewportHeight:w}:void 0,[_,w]),T=k(l.parameters),C="bodiedExtension"===l.type,P=(0,ee.useMemo)(()=>C&&l.content?{macro:{body:{type:"doc",version:1,content:l.content}}}:{},[l.content,C]),N=eR(x),O=!!x?.properties?.resource,A=x?.properties?.render==="native",M=x?.properties?.layout==="inline"&&!(O&&!A),R={localId:I,cloudId:n},D={...f?{isConfiguring:!0,isInserting:f.isInserting}:{},...C?{layout:"bodied"}:{}},F=eV((0,i("dh538").fg)("platform_move_dynamic_macro_context")?{...o}:{...o,isEditing:u,config:T,...Object.keys(D).length?{macro:D}:{}}),j=eV({config:T,isEditing:u,...Object.keys(D).length?{macro:D}:{}}),{staticForgeDoc:L,shouldRenderRuntime:V,storeStaticForgeDoc:U,unmountRuntime:K}=ej({editorAPI:s,extensionParameters:l.parameters,macroConfig:j?.config}),{locale:$}=(0,i("8C5kA").default)();return ee.createElement("div",{"data-testid":"ForgeExtensionContainer",style:{background:u?"var(--ds-surface, #FFFFFF)":"transparent",padding:u&&!M?"var(--ds-space-100, 8px)":0,display:M?"inline-block":"block",verticalAlign:M?"middle":""},ref:y,className:(0,i("gMc0m").default)(["_kqswh2mm"])},N&&O?ee.createElement(eu,{accountId:a,apolloClient:e,contextIds:t,coreData:R,dataProviders:c,extension:x,extensionData:F,extensionPayload:(0,i("dh538").fg)("platform_move_dynamic_macro_context")?{...j,...P}:P,extensionId:E,extensionTitle:v}):ee.createElement(eL,{extension:x},ee.createElement(eA,{staticForgeDoc:V||f?.modalExtension||!(0,i("dh538").fg)("forge-ui-static-macros")?null:L,unmountRuntime:K,accountId:a,apolloClient:e,contextIds:t,environment:r,extension:x,coreData:R,extensionData:F,extensionPayload:(0,i("dh538").fg)("platform_move_dynamic_macro_context")?j:{},editorAPI:s,extensionViewData:P,locale:$,flags:d,getContextToken:p,customEditContext:f,isEditing:u,onForgeDocUpdated:e=>{if(C&&e?.children?.[0].type==="AdfRenderer"&&i("c6GJD").default.getExperimentValue("confluence_toc_macro_compatibility_with_apps","isEnabled",!0)){let t=new CustomEvent(i("31HPn").FORGE_DOC_UPDATED_EVENT,{detail:{forgeDoc:e,localId:I},bubbles:!0});document.dispatchEvent(t)}if(g&&u&&V&&e&&f?.modalExtension?.type!=="macroConfig"&&s&&I&&(0,i("dh538").fg)("forge-ui-static-macros")&&U(e),(0,i("dh538").fg)("platform_measure_macro_height")){let e=s?.extension?.sharedState?.currentState()?.showContextPanel,t=s?.extension?.actions?.api();if(!t||!e)return;y.current&&u&&(b.current&&clearTimeout(b.current),b.current=setTimeout(()=>{let e=y?.current?.getBoundingClientRect().height;try{t.doc.update(I,t=>({attrs:{...t.attrs,parameters:{...t.attrs?.parameters,measuredHeight:e}}}))}catch{}},3e3))}},viewportDimensions:S,useRouteActions:m})),u&&!h&&ee.createElement("div",{"data-testid":"GlassPane",className:(0,i("gMc0m").default)(["_bfhk1j28 _80om13gf _1ltvidpf _kqswstnw _4t3i1osq _154iidpf _1bsb1osq _1pbykb7n"])}))};var eK=e=>{let{extension:t,product:n,environment:r,page:o,analyticsWebClient:s}=e,a=ee.createElement(ea,null,ee.createElement(eU,e));return ee.createElement(ee.Suspense,{fallback:null},ee.createElement(i("62fWd").ForgeUIExtensionPointProvider,{analyticsWebClient:s,product:n,environment:r,page:o,localId:t.parameters?.localId},t.parameters?ee.createElement(i("HEA67").ForgeUIExtensionAnalyticsContext,{localId:t.parameters.localId,extensionId:t.parameters.extensionId},a):a))};function e$({useGetContextToken:e,extension:t,extensionData:n,localId:r,contextIds:o,children:i}){return i(e(t,n,r,o))}let eH=({accountId:t,apolloClient:n,analyticsWebClient:r,cloudId:o,contextIds:s,environment:a,extension:c,extensionData:l,extensionHandlerWithReference:u,forgeUIAnalyticsContext:d,isEditing:p,page:h,product:f,dataProviders:m,FlagProvider:y,hideGlassPane:b,editorAPI:g,customEditContext:x,useGetContextToken:E,useRouteActions:v})=>(0,i("2XqLN").default)(({node:_,references:w})=>{let I={..._,parameters:{..._.parameters,extensionTitle:c?.properties.title,extension:c}};_.parameters&&!_.parameters.localId&&(_.parameters.localId=_.localId);let T={...l,autoConvertLink:_.parameters?.autoConvertLink},C=function(e){let t=S(e),n=e?.macroMetadata?.title;if(t)return{macroId:t,title:n}}(_.parameters);C&&(T.connectMetadata=C);let P=({references:l})=>e(ee).createElement(y,null,u=>E&&(0,i("dh538").fg)("forge_ui_use_get_context_token")?e(ee).createElement(e$,{useGetContextToken:E,extension:I?.parameters?.extension,extensionData:T,localId:_.parameters?.localId,contextIds:s},i=>e(ee).createElement(eK,{analyticsWebClient:r,accountId:t||"",apolloClient:n,cloudId:o,contextIds:s,environment:a,extension:eq(I,c,{analyticsWebClient:r,forgeUIAnalyticsContext:d,isEditing:p}),extensionData:{...T,references:l},flags:u,isEditing:p,product:f,dataProviders:m,page:h,hideGlassPane:b,editorAPI:g,getContextToken:i,customEditContext:x,useRouteActions:v})):e(ee).createElement(eK,{analyticsWebClient:r,accountId:t||"",apolloClient:n,cloudId:o,contextIds:s,environment:a,extension:eq(I,c,{analyticsWebClient:r,forgeUIAnalyticsContext:d,isEditing:p}),extensionData:{...T,references:l},flags:u,isEditing:p,product:f,dataProviders:m,page:h,hideGlassPane:b,editorAPI:g,customEditContext:x,useRouteActions:v}));return u?u(_,({references:e})=>P({node:_,references:e})):P({node:_,references:w})},ei.dequal);function eq(e,t,n){if(e.extensionType!==i("31HPn").P2_OR_CONNECT_CONFLUENCE_MACRO_EXTENSION_TYPE)return e;let{analyticsWebClient:r,forgeUIAnalyticsContext:o,isEditing:s}=n||{},a=s?"editPageScreen":"viewPageScreen",{extensionKey:c}=e;try{if(!t?.id)throw Error("No Forge extension for patching connect addon");if(e.parameters){e.parameters.extensionId||(e.parameters.extensionId=t.id);let n=S(e.parameters);!e.parameters.localId&&n&&(e.parameters.localId=n)}if(e.parameters?.macroParams){e.parameters.guestParams=e.parameters.guestParams||{};let t=e.parameters.macroParams;Object.entries(t).forEach(([t,n])=>{void 0===e.parameters.guestParams[t]&&(e.parameters.guestParams[t]=n.value)})}r&&(0,i("3Spjc").sendEvent)(r)({source:a,...o,eventType:v.OPERATIONAL_EVENT_TYPE,action:"h11n_macro_render_success",actionSubject:i("31HPn").CONNECT_ADDON_ACTION_SUBJECT,actionSubjectId:c,attributes:{extensionKey:c,...(0,i("45DA9").extensionIdToAnalyticsAttributes)(t?.id),nodeLocalId:e.localId}})}catch(n){throw r&&(0,i("3Spjc").sendEvent)(r)({source:a,...o,eventType:v.OPERATIONAL_EVENT_TYPE,action:"h11n_macro_render_failed",actionSubject:i("31HPn").CONNECT_ADDON_ACTION_SUBJECT,actionSubjectId:c,attributes:{extensionKey:c,...(0,i("45DA9").extensionIdToAnalyticsAttributes)(t?.id),errorMessage:n instanceof Error?n.message:String(n),nodeLocalId:e.localId}}),n}return e}let eG=(e,t)=>{let{attrs:n}=e;if(n?.extensionType===i("31HPn").P2_OR_CONNECT_CONFLUENCE_MACRO_EXTENSION_TYPE){let r=S(n.parameters),o=t?.createExtensionProps(r);return{...e,attrs:{...n,...o.attrs,localId:n.localId||o.attrs.localId,parameters:{...eW(n.parameters),...o.attrs.parameters}}}}return e},eW=({guestParams:e={},macroParams:t={},...n}={})=>{let r={...e};return Object.entries(t).forEach(([e,t])=>{void 0===r[e]&&t&&"value"in t&&(r[e]=t.value)}),{macroParams:t,guestParams:r,...n}},eB=async(e,t,n)=>{let{localId:r,extensionKey:o}=e,s=await n.getConnectToForgeExtension(o),a="CONNECT";if(!s&&(0,i("dh538").fg)("platform_upgrade_p2_to_forge_macro")){let e=await n.getP2ToForgeExtension(o);a="P2",s=e}if(!s||!s.createExtensionProps)throw Error(`Connect to Forge macro upgrade: No ${!s?"extension manifest":"createExtensionProps function"} found`);return new Promise(e=>{t.doc.update(r,t=>{let n=eG(t,s);return e({updatedNode:n,originalMacroType:a}),n})})},ez=async({connectToForgeBlockedExtensions:e,extensionProvider:t,actions:n,analyticsClient:r,editorActions:o})=>{if(!o)return;let{sendEvent:s}=r,a=o.getSelectedNode(),c=a?.attrs;if(c?.extensionType===i("31HPn").P2_OR_CONNECT_CONFLUENCE_MACRO_EXTENSION_TYPE){let{extensionKey:r,localId:o}=c,l=S(c.parameters),u=a?.type.name;if(u===i("31HPn").EXTENSION_TYPE_MULTI_BODIED){e.add(l),s(T.H11N_UPGRADE_RICH_TEST_SKIPPED,{nodeLocalId:o});return}try{if(!n?.doc?.update)throw Error("Connect to Forge macro upgrade: Missing ExtensionAPI update action");let{updatedNode:e,originalMacroType:i}=await eB(c,n,t),{localId:a,extensionId:l}=e.attrs.parameters;"CONNECT"===i?s(T.H11N_UPGRADE_SUCCESS,{extensionId:l,extensionKey:r,localId:a,nodeLocalId:o,extensionType:u}):"P2"===i&&s(T.APP_MIGRATION_P2_MACRO_UPGRADE,{extensionId:l,extensionKey:r,localId:a,nodeLocalId:o,extensionType:u})}catch(e){throw s(T.H11N_UPGRADE_FAILED,{extensionKey:r,error:e,nodeLocalId:o,extensionType:u}),e}}},eY=()=>crypto.randomUUID(),eQ="/static/",eX=eQ.length,eZ=e=>e.substr(eX+e.indexOf(eQ)),eJ=(e,t)=>t?.find(t=>!!e.match(t.matcher)),e0=(e,t,n,r,o)=>{if(!n||!r||!o)return null;let i=eJ(e,n);if(!i)return null;{let{extensionKey:n}=i,o=structuredClone(r[n]);return o.attrs.parameters.autoConvertLink=e,o.attrs.parameters.hasBeenAutoConverted=!0,t.sendEvent(T.FORGE_MACRO_AUTO_CONVERT_SUCCESS,{extensionId:o.attrs.parameters.extensionId,macroTitle:o.attrs.parameters.extensionTitle,forgeEnvironment:o.attrs.parameters.forgeEnvironment,render:o.attrs.parameters.render,link:e}),o}},e1=e=>{switch(e){case"bodied":return"bodiedExtension";case"inline":return"inlineExtension";default:return"extension"}},e2=(e,t,n)=>{let r=eY(),o=e1(e.macroADFNode?.attrs.parameters.layout),s={type:o,attrs:{extensionKey:e.extensionKey,extensionType:i("31HPn").EXTENSION_NAMESPACE,localId:r,parameters:{extensionId:e.macroADFNode?.attrs.parameters.extensionId,extensionTitle:e.macroADFNode?.attrs.parameters.extensionTitle,forgeEnvironment:e.macroADFNode?.attrs.parameters.forgeEnvironment,render:e.macroADFNode?.attrs.parameters.render,layout:e.macroADFNode?.attrs.parameters.layout,autoConvertLink:n,hasBeenAutoConverted:!0},text:e.macroADFNode?.attrs.text},..."bodiedExtension"===o?{content:[{type:"paragraph",content:[]}]}:{}};return"inlineExtension"===e1(e.macroADFNode?.attrs.parameters.layout)&&("extension"===t||"bodiedExtension"===t)?{type:"paragraph",content:[s]}:s},e5=(e,t,n,r)=>{if(!e||!t)return[];let o=r;if(!r){let e=n?.getSelectedNode();o=e?.attrs.parameters.autoConvertLink}let i=o?eJ(o,e):void 0;if(i&&t){let e=t[i.matcher],r=n?.getSelectedNode(),s=r?.type.name;return e.map(e=>({id:`${e.extensionKey}-dropdown-option`,title:e.macroName,selected:e.extensionKey===r?.attrs.extensionKey,onClick:async(t,r,i)=>{if(i){let{selection:r}=i?.state,a=r.$from.pos;if("inlineExtension"===s){let e=t.tr.deleteSelection().scrollIntoView();i?.dispatch(e)}n?.replaceSelection(e2(e,s,o),!0,a)}return!0}}))}return[]},e3={16:()=>Promise.resolve(i("jcPzc")),24:()=>Promise.resolve(i("jcPzc")),48:()=>Promise.resolve(i("jcPzc"))},e4=(e,t,n)=>{try{e.doc.update(t,e=>e8(e?.attrs||{},n))}catch(e){q(e)}},e8=(e,{config:t,body:n})=>{let{forgeEnvironment:r,render:o,...i}=e;return{attrs:{...i,parameters:{...i.parameters||{},...F(t)}},...n?{content:n.content}:{}}},e6=(e,t,n)=>{try{let{node:r}=e.getNodeWithPosByLocalId(t),o=document.querySelector(`[extensionkey="${r?.attrs.extensionKey}"]`);o?setTimeout(()=>{let r=o?.getBoundingClientRect().height;e.doc.update(t,e=>{let t=e8(e.attrs||{},n);return{attrs:{...t.attrs,parameters:{...t.attrs.parameters,measuredHeight:r}}}})},3e3):e.doc.update(t,e=>e8(e?.attrs||{},n))}catch(e){q(e)}},e7=({analyticsClient:e,editorActions:t,eventSource:n,fieldsModules:r,renderConfigHelper:o,createRenderFunction:a,connectToForgeBlockedExtensions:c,getFieldsDefinitionFunction:l,updateFunction:u,autoConvertDefinitions:d,autoConvertMatcherToExtensionsMap:p,extensionProperties:h})=>f=>{let{sendEvent:m}=e,{id:y,properties:b,environmentType:g,migrationKey:x,environmentKey:E}=f,v=ts(b.title||"Forge UI Macro",E,g),_=(0,s.parse)(y).resourceId,w=(0,i("iqcSr").isCustomUI)(f),I="native"===f.properties.render,S=!!b.config&&!!b.config.function,C=I||w?!!b.config:S,P=(I||w)&&!!b.config?.resource,N=!!b.autoConvert,O="inline"===b.layout,A="bodied"===b.layout,M=(I||w)&&C&&!P&&!!b.config?.openOnInsert,k=eZ(_),j={extension:f,extensionData:h.extensionData,accountId:h.accountId,cloudId:h.cloudId,contextIds:h.contextIds},L=e=>{let t=e||eY(),n=(0,i("jc2GP").getExtensionType)(f);return{type:n,attrs:{extensionKey:_,extensionType:i("31HPn").EXTENSION_NAMESPACE,parameters:{localId:t,extensionId:y,extensionTitle:v,layout:n,forgeEnvironment:g,render:b.render,extensionProperties:j},text:v,localId:t},..."bodiedExtension"===n?{content:[{type:"paragraph",content:[]}]}:{}}},V=ee.createElement(i("jcPzc").default,{label:b?.title??"",imgUrl:b.icon}),U=b.icon&&b.icon.length>0?{16:()=>Promise.resolve(()=>V),24:()=>Promise.resolve(()=>V),48:()=>Promise.resolve(()=>V)}:e3,K=R({analyticsClient:e,connectToForgeBlockedExtensions:c,eventSource:n,extension:f,hasCustomConfig:P,hasUiKitOneConfig:S,isCustomUI:w,isUiKitTwo:I,uiKitOneGetFieldsDefinitionFunction:l}),$=()=>{let e=t?.getSelectedNode();return e5(d,p,t,e?.attrs.parameters.autoConvertLink)},q=async e=>{let n=L(),{localId:r}=n.attrs.parameters,{type:i}=n,s="bodiedExtension"===i;if(P){if(f.properties.config?.openOnInsert===!1)return m(T.FORGE_EXTENSION_INSERTED,{extension:f,localId:r}),n;let c={...n.attrs,type:i},l=await new Promise(n=>{let i=!0;o({extension:f,forgeExtensionNode:c,hasCustomConfig:P,isInitialInsertion:!0,createRenderFunction:a,onSubmit:t=>{i?(i=!1,n(t)):e&&e4(e,r,t)},onValidate:e=>H(e,{isBodiedExtension:s,isInitialInsertion:i,schema:t?._privateGetEditorView?.()?.state.schema})})});n={...n,...e8(n.attrs,l)}}return m(T.FORGE_EXTENSION_INSERTED,{extension:f,localId:r}),n};return{title:v,description:b.description,type:i("31HPn").EXTENSION_NAMESPACE,key:_,icons:U,categories:b.categories,connectModuleKey:k,migrationKey:x,createExtensionProps:L,autoConvert:b.autoConvert,modules:{...eo(f)||i("c6GJD").default.getExperimentValue("platform_forge_macro_hidden_filtering","isEnabled",!1)&&"xen:macro"===f.type&&"hidden"in b&&!0===b.hidden?{}:{quickInsert:[{key:"forge-macro",action:async e=>{let n=await q(e);if(M&&t?._privateGetEditorView()){A&&(0,i("fbPMY").renderBodiedExtensionIframe)({extension:f,forgeExtensionNode:n.attrs,createRenderFunction:a}),t?.replaceSelection(n),setTimeout(()=>e.editInContextPanel(D,async e=>F(e)),0);return}return n}}]},nodes:{default:{type:"extension",render:()=>a(f),update:C?(e,t)=>u(e,t,f,P):void 0,getFieldsDefinition:K}},fields:r,contextualToolbars:N?[{context:{nodeType:(0,i("jc2GP").getExtensionType)(f),extensionKey:_,type:"extension",extensionType:"com.atlassian.ecosystem",shouldExclude:e=>!e.attrs?.parameters.hasBeenAutoConverted},toolbarItems:[{key:`${f.key}-convert-to-smartlink-toolbarItem`,label:"Convert to link",display:"icon",icon:()=>Promise.resolve(i("duwSm")).then(e=>e.default),action:async()=>{let e=t?._privateGetEditorView(),n=t?.getSelectedNode(),r=n?.attrs.parameters.autoConvertLink;if(e){let{selection:n}=e.state,o=n.$from.pos;t?.replaceSelection(O?{type:"inlineCard",attrs:{url:r}}:{type:"paragraph",content:[{type:"inlineCard",attrs:{url:r}}]},!0,o),m(T.FORGE_MACRO_AUTO_CONVERT_TO_SMARTLINK,{extensionId:f.key,forgeEnvironment:f.environmentType,render:f.properties.render,link:r})}},tooltip:"Convert to link",ariaLabel:"Convert to link"},{id:`${f.key}-display-options-toolbarItem`,title:"Display options",type:"dropdown",options:()=>$(),tooltip:"Display options"}]}]:[]}}};class e9 extends i("bre0g").default{async getExtension(e,t){try{return await super.getExtension(e,t)}catch(n){if(e===i("31HPn").P2_OR_CONNECT_CONFLUENCE_MACRO_EXTENSION_TYPE){let{sendEvent:r}=this.analyticsClient||{};if(this.connectExtensionProvider)try{await (await this.connectExtensionProvider).getExtension(e,t)}catch(o){let e=await this.getConnectToForgeExtension(t);if(e)return e;if((0,i("dh538").fg)("platform_upgrade_p2_to_forge_macro")){let e=await this.getP2ToForgeExtension(t);if(e)return r&&r(T.APP_MIGRATION_P2_MACRO_RESOLVED,{extensionKey:t,extensionType:i("31HPn").P2_OR_CONNECT_CONFLUENCE_MACRO_EXTENSION_TYPE}),e}r?r(T.H11N_RESOLVE_FAILED,{extensionKey:t,error:n}):this.sendAnalytics?.(t,n instanceof Error?n.message:String(n))}else r?r(T.H11N_RESOLVE_FAILED,{extensionKey:t,error:"No connect extension provider"}):this.sendAnalytics?.(t,"No connect extension provider")}throw n}}async getExtensions(){return super.getExtensions()}async getP2ToForgeExtension(e){try{return await super.getExtension(i("31HPn").EXTENSION_NAMESPACE,e)}catch(e){return}}async getConnectToForgeExtension(e){return(await this.getExtensions()).find(t=>"connectModuleKey"in t&&!!t.migrationKey&&t.connectModuleKey===e)}constructor(e,t,n,r,o){super(e),this.connectExtensionProvider=void 0,this.sendAnalytics=void 0,this.analyticsClient=void 0,this.connectExtensionProvider=t,this.sendAnalytics=n,this.manifestsPromise=Promise.resolve(e),this.autoConvertHandlers=r,this.analyticsClient=o}}let te=e=>e="^"+(e=(e=(e=e.replace(/\*\*/g,"*")).replace(/[\-\[\]\/\(\)\+\?\.\\\^\$\|]/g,"\\$&")).replace(/\*/g,"[^/]*?"))+"$",tt=e=>/^(?=.{1,1024}$)[a-zA-Z]+:(\/\/)?(\\\\)?(?:[a-zA-Z0-9-\*]+[\.:])*[a-zA-Z0-9-\*]+(?:\.:[a-zA-Z\*]{1,})?(?:\/.*)?$/.test(e),tn=e=>{if(!e)return{autoConvertDefinitions:void 0,macroADFNodeMap:void 0};let t=[],n={};return e.forEach(e=>{if(!(0,s.parse)(e.id).resourceId||!e.properties.autoConvert)return;let r=(0,s.parse)(e.id).resourceId;e.properties.autoConvert.matchers.forEach(({pattern:o})=>{if(tt(o)){let s=(0,i("jc2GP").getExtensionType)(e);n[r]={type:s,attrs:{extensionKey:r,extensionType:i("31HPn").EXTENSION_NAMESPACE,parameters:{extensionId:e.id,extensionTitle:e.properties.title,layout:e.properties.layout||"block",forgeEnvironment:e.environmentType,render:e.properties.render||"default"},layout:"default",text:e.properties.title}};let a={macroName:e.properties.title||"",matcher:te(o),extensionKey:r};t.push(a)}})}),{autoConvertDefinitions:t,macroADFNodeMap:n}},tr=(e,t,n,r)=>o=>e0(o,e,t,n,r),to=(e,t)=>e&&t?e.reduce((e,n)=>(e[n.matcher]||(e[n.matcher]=[]),e[n.matcher].push({macroName:n.macroName,macroADFNode:t[n.extensionKey],extensionKey:n.extensionKey}),e),{}):{},ti={DEVELOPMENT:"Development",STAGING:"Staging",PRODUCTION:"Production"},ts=(e,t,n=a.ExtensionEnvironment.PRODUCTION)=>n===a.ExtensionEnvironment.PRODUCTION?e:void 0===t?`${e} (${ti[n]})`:n===a.ExtensionEnvironment.DEVELOPMENT&&"default"!==t?`${e} - ${t} (Dev)`:`${e} (${ti[n]})`,ta={showFlag:async()=>({}),hideFlag:async()=>{}},tc=({children:e})=>e(ta),tl=new Set,tu=async({accountId:e,cloudId:t,apolloClient:n,ccGraphqlClient:r,contextIds:o,dataProviders:a,environment:l,product:u,page:d,isEditing:p,analyticsWebClient:h,forgeUIAnalyticsContext:f={},extensionData:m,extensionHandlerWithReference:y,connectExtensionProvider:b,editorActions:g,editorAPI:x,FlagProvider:E=tc,extensionsFilter:v,dataClassificationTagIds:_,hideGlassPane:w,locale:I,useGetContextToken:S,useRouteActions:P})=>{let N,O=async(r,i)=>r&&eo(r)?er({extension:r}):eH({accountId:e,analyticsWebClient:h,cloudId:t,extension:r,extensionData:m,extensionHandlerWithReference:y,forgeUIAnalyticsContext:f,apolloClient:n,contextIds:o,isEditing:!!p,dataProviders:a,environment:l,product:u,page:d,FlagProvider:E,hideGlassPane:w,customEditContext:i,editorAPI:x,useGetContextToken:S,useRouteActions:P}),M=A({analyticsWebClient:h,apolloClient:n,contextIds:o,cloudId:t,extensionData:m}),{extensions:R}=await (0,i("fYGGr").getForgeUIExtensionsAsync)({ccGraphqlClient:r,client:n,contextIds:o,moduleType:i("31HPn").MODULE_NAME,expandAppOwner:!0,extensionsFilter:v,dataClassificationTagIds:_,locale:I,cloudId:t,context:{spaceKey:m?.space?.key,contentId:m?.content?.id},includeHidden:!0}),k=g?"editPageScreen":"viewPageScreen",j=C({analyticsWebClient:h,forgeUIAnalyticsContext:f,source:k}),{sendEvent:L}=j,V=async(e,t,n,r)=>{await ez({actions:t,analyticsClient:j,connectToForgeBlockedExtensions:tl,editorActions:g,extensionProvider:N});let o=g?.getSelectedNode(),s=o?.type.name==="bodiedExtension";if(o&&n&&t&&(r||s)){let e=(()=>{let e={...o.attrs,type:o.type.name};try{let{content:t}=new(0,i("h9yJL").JSONTransformer)().encode(o);return{...e,content:t}}catch(r){let{localId:t}=o.attrs;return L(T.FORGE_EXTENSION_FAILED,{extension:n,error:r,localId:t}),e}})();(0,i("fbPMY").renderConfigHelper)({extension:n,forgeExtensionNode:e,hasCustomConfig:!!r,isInitialInsertion:!1,createRenderFunction:O,onSubmit:e=>(0,i("dh538").fg)("platform_measure_macro_height")?e6(t,o.attrs.localId,e):e4(t,o.attrs.localId,e),onValidate:e=>H(e,{isBodiedExtension:s,isInitialInsertion:!1,schema:g?._privateGetEditorView?.()?.state.schema})})}if(!r)return t.editInContextPanel(D,async e=>{if((0,i("dh538").fg)("platform_measure_macro_height")){let n=t.getNodeWithPosByLocalId(o?.attrs.localId),r=n?.node.attrs.parameters;if(r.measuredHeight)return{...F(e),measuredHeight:r.measuredHeight}}return F(e)})},U={user:{[c]:{provider:async()=>({siteId:t,principalId:e||"Context",fieldId:"forgeConfigUserPicker",productKey:u})}}},{autoConvertDefinitions:K,macroADFNodeMap:$}=tn(R),q=to(K,$),G=tr(j,K,$,q),W=e7({analyticsClient:j,editorActions:g,eventSource:k,fieldsModules:U,renderConfigHelper:i("fbPMY").renderConfigHelper,createRenderFunction:O,connectToForgeBlockedExtensions:tl,getFieldsDefinitionFunction:M,updateFunction:V,autoConvertDefinitions:K,autoConvertMatcherToExtensionsMap:q,extensionProperties:{extensionData:m,contextIds:o,accountId:e||"",cloudId:t}}),B=(R||[]).filter(({id:e})=>void 0!==(0,s.parse)(e).resourceId).map(W);return N=new e9([{title:"Forge UI Macro",description:"Supports existing Forge UI Macro nodes",type:i("31HPn").EXTENSION_NAMESPACE,key:"xen:macro",icons:e3,modules:{nodes:{default:{type:"extension",render:O,update:V,getFieldsDefinition:M}},fields:U}},...B],b,void 0,[e=>{let t=G(e);if(t)return t}],j)};var td=i("5bak6"),tp=i("04e9M");let th=async({spaceKey:e,spaceId:t,contentId:n,contentType:r,mentionProvider:o,isEditing:s,connectExtensionProvider:a,editorActions:c,hideGlassPaneForForge:l,locale:u,isLivePage:d=!1,editorAPI:p,useGetContextToken:h,templateId:f})=>{let{cloudId:m,userId:y,environment:b,activationId:g}=await (0,i("ge2sX").getSessionData)(),x=y??"",E=(0,i("gKr8t").getAGGClient)(),v=(0,i("hp2SH").getApolloClient)(),_=[(0,i("aF5bm").getWorkspaceARI)({cloudId:m,activationId:g})],w=i("4FxUL").default.create(o);return tf({getProviderOptions:({spaceKey:e})=>({accountId:x,cloudId:m,apolloClient:E,ccGraphqlClient:v,contextIds:_,dataProviders:w,environment:(0,td.environmentToForgeProductEnvironment)(b),product:"confluence",page:"confluence:macroEditor",isEditing:s,analyticsWebClient:(0,tp.getAnalyticsWebClient)(),forgeUIAnalyticsContext:(0,td.createForgeUIAnalyticsContext)({objectId:n,objectType:r,containerId:e,containerType:"space"}),extensionData:(0,td.createForgeMacroExtensionData)({spaceKey:e,spaceId:t,contentId:n,contentType:r,isLivePage:d,templateId:f}),connectExtensionProvider:a,editorActions:c,FlagProvider:i("8z3oB").FlagProvider,extensionsFilter:void 0,hideGlassPane:l,locale:u,editorAPI:p,useGetContextToken:h,useRouteActions:i("dPJCf").useRouteActions}),spaceKey:e})},tf=async({getProviderOptions:e,spaceKey:t})=>(0,i("5SzHz").fetchSpaceDetail)(t).then(({data:e,loading:t,error:n})=>{if(!t)return{dataClassificationTags:e?.space?.dataClassificationTags,spaceKeyFromQuery:e?.space?.key,error:n}}).then(t=>{if(t?.error)return Promise.reject(t.error);let n=e({spaceKey:t?.spaceKeyFromQuery});return t?.dataClassificationTags&&t?.dataClassificationTags.length>0&&(n.extensionsFilter=[{type:i("grQpA").GQLExtensionContextsFilterType.ExtensionType,value:["xen:macro"]}],n.dataClassificationTagIds=t?.dataClassificationTags),tu(n)});t.exports.getForgeExtensionHandler=th,t.exports.fetchForgeExtensionProvider=tf}),s("5SNLA",function(e,t){var n=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},r=i("iwB6M"),o=i("dZ9AU");t.buffer=function(e){return function(t){return t.lift(new s(e))}};var s=function(){function e(e){this.closingNotifier=e}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.closingNotifier))},e}(),a=function(e){function t(t,n){e.call(this,t),this.buffer=[],this.add(o.subscribeToResult(this,n))}return n(t,e),t.prototype._next=function(e){this.buffer.push(e)},t.prototype.notifyNext=function(e,t,n,r,o){var i=this.buffer;this.buffer=[],this.destination.next(i)},t}(r.OuterSubscriber)}),s("j2Sfh",function(e,t){var n=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},r=i("axeml");t.count=function(e){return function(t){return t.lift(new o(e,t))}};var o=function(){function e(e,t){this.predicate=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.predicate,this.source))},e}(),s=function(e){function t(t,n,r){e.call(this,t),this.predicate=n,this.source=r,this.count=0,this.index=0}return n(t,e),t.prototype._next=function(e){this.predicate?this._tryPredicate(e):this.count++},t.prototype._tryPredicate=function(e){var t;try{t=this.predicate(e,this.index++,this.source)}catch(e){this.destination.error(e);return}t&&this.count++},t.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},t}(r.Subscriber)}),s("2eCs8",function(e,t){var n=i("3u6GG"),r=i("2QGAA");t.timestamp=function(e){return void 0===e&&(e=n.async),r.map(function(t){return new o(t,e.now())})};var o=function(e,t){this.value=e,this.timestamp=t};t.Timestamp=o}),s("7fTeW",function(e,t){var n=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},r=i("augeV"),o=i("iwB6M"),s=i("dZ9AU");t.window=function(e){return function(t){return t.lift(new a(e))}};var a=function(){function e(e){this.windowBoundaries=e}return e.prototype.call=function(e,t){var n=new c(e),r=t.subscribe(n);return r.closed||n.add(s.subscribeToResult(n,this.windowBoundaries)),r},e}(),c=function(e){function t(t){e.call(this,t),this.window=new r.Subject,t.next(this.window)}return n(t,e),t.prototype.notifyNext=function(e,t,n,r,o){this.openWindow()},t.prototype.notifyError=function(e,t){this._error(e)},t.prototype.notifyComplete=function(e){this._complete()},t.prototype._next=function(e){this.window.next(e)},t.prototype._error=function(e){this.window.error(e),this.destination.error(e)},t.prototype._complete=function(){this.window.complete(),this.destination.complete()},t.prototype._unsubscribe=function(){this.window=null},t.prototype.openWindow=function(){var e=this.window;e&&e.complete();var t=this.destination,n=this.window=new r.Subject;t.next(n)},t}(o.OuterSubscriber)}),s("iCyab",function(e,t){var n=e.exports&&e.exports.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},r=i("HHFyQ"),o=i("fvPwd"),s=i("axeml"),a=i("iwB6M"),c=i("dZ9AU"),l=i("kNaF1");function u(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n=e[e.length-1];return"function"==typeof n&&e.pop(),new r.ArrayObservable(e).lift(new d(n))}e.exports.zip=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return function(t){return t.lift.call(u.apply(void 0,[t].concat(e)))}},e.exports.zipStatic=u;var d=function(){function e(e){this.project=e}return e.prototype.call=function(e,t){return t.subscribe(new p(e,this.project))},e}();e.exports.ZipOperator=d;var p=function(e){function t(t,n,r){void 0===r&&(r=Object.create(null)),e.call(this,t),this.iterators=[],this.active=0,this.project="function"==typeof n?n:null,this.values=r}return n(t,e),t.prototype._next=function(e){var t=this.iterators;o.isArray(e)?t.push(new f(e)):"function"==typeof e[l.iterator]?t.push(new h(e[l.iterator]())):t.push(new m(this.destination,this,e))},t.prototype._complete=function(){var e=this.iterators,t=e.length;if(0===t)return void this.destination.complete();this.active=t;for(var n=0;n<t;n++){var r=e[n];r.stillUnsubscribed?this.add(r.subscribe(r,n)):this.active--}},t.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},t.prototype.checkIterators=function(){for(var e=this.iterators,t=e.length,n=this.destination,r=0;r<t;r++){var o=e[r];if("function"==typeof o.hasValue&&!o.hasValue())return}for(var i=!1,s=[],r=0;r<t;r++){var o=e[r],a=o.next();if(o.hasCompleted()&&(i=!0),a.done)return void n.complete();s.push(a.value)}this.project?this._tryProject(s):n.next(s),i&&n.complete()},t.prototype._tryProject=function(e){var t;try{t=this.project.apply(this,e)}catch(e){this.destination.error(e);return}this.destination.next(t)},t}(s.Subscriber);e.exports.ZipSubscriber=p;var h=function(){function e(e){this.iterator=e,this.nextResult=e.next()}return e.prototype.hasValue=function(){return!0},e.prototype.next=function(){var e=this.nextResult;return this.nextResult=this.iterator.next(),e},e.prototype.hasCompleted=function(){var e=this.nextResult;return e&&e.done},e}(),f=function(){function e(e){this.array=e,this.index=0,this.length=0,this.length=e.length}return e.prototype[l.iterator]=function(){return this},e.prototype.next=function(e){var t=this.index++,n=this.array;return t<this.length?{value:n[t],done:!1}:{value:null,done:!0}},e.prototype.hasValue=function(){return this.array.length>this.index},e.prototype.hasCompleted=function(){return this.array.length===this.index},e}(),m=function(e){function t(t,n,r){e.call(this,t),this.parent=n,this.observable=r,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}return n(t,e),t.prototype[l.iterator]=function(){return this},t.prototype.next=function(){var e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}},t.prototype.hasValue=function(){return this.buffer.length>0},t.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},t.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},t.prototype.notifyNext=function(e,t,n,r,o){this.buffer.push(t),this.parent.checkIterators()},t.prototype.subscribe=function(e,t){return c.subscribeToResult(this,this.observable,this,t)},t}(a.OuterSubscriber)}),s("jcPzc",function(t,n){Object.defineProperty(t.exports,"__esModule",{value:!0,configurable:!0});var r=i("42omo");t.exports.default=({label:t="",imgUrl:n})=>n?e(r).createElement("img",{"data-testid":"macro-custom-icon-img",alt:t,src:n,width:"100%"}):e(r).createElement(e(i("jdPfT")),{spacing:"spacious",label:t,color:`var(--ds-icon-accent-gray, ${i("6fnsQ").N60})`,LEGACY_size:"large"})}),s("gxXVf",function(n,r){t(n.exports,"openMacroBrowserForInitialConfiguration",()=>x),t(n.exports,"openMacroBrowserToEditExistingMacro",()=>g);var o=i("6g1oe"),s=i("7bL1M"),a=i("bx6Tx");i("5KKq4");let c={type:"extension",content:i("8pcS0").EMPTY_ADF_CONTENT},l={showLabels:{value:"true"},max:{value:"15"},sort:{value:null},showSpace:{value:"true"},reverse:{value:"false"},excerptType:{value:"none"}},u=(e,t,n,r)=>{e({type:"sendUIEvent",data:{action:t,actionSubject:`${t}Anchor`,source:"extensions-editor",attributes:{contentId:n,nameStatus:r}}}).fire()},d=(e,t,n,r)=>{let o="extension"===t&&"inlineExtension"===n,i="inlineExtension"===t&&"extension"===n;(o||i)&&r({type:"sendUIEvent",data:{action:"clicked",actionSubject:"button",actionSubjectId:"changedJiraIssueMacroExtensionView",source:"JiraIssueMacro",objectId:e,attributes:{tableToIssueCount:o,issueCountToTable:i}}}).fire()},p=(e,t,n)=>{t&&n({type:"sendUIEvent",data:{action:"closed",actionSubject:"modal",actionSubjectId:"macroBrowser",source:"ContentByLabel",objectId:e,attributes:{extensionKey:"contentbylabel",parameters:{...(()=>{let{cql:e,title:n,...r}=t;return{...l,...r}})()}}}}).fire()},h=(e,t,n,r,o)=>{n({type:"sendOperationalEvent",data:{action:"error",actionSubject:t,source:"editor-extensions",objectId:e,attributes:{error:r?.message??r,stack:r?.stack,extensionKey:o}}}).fire()};async function f(t,n,r){if("anchor"===t.name){let e=t.params[""].replace(/^\s+/g,"");if(e=(e=(e=e.replace(/\s+$/g,"")).replace(/\s+/g,"-")).replace(/[\"\']+/g,""),r&&r.createAnalyticsEvent){let t;if(""===e)t="missing";else{e=e.substring(0,a.MAX_ATLASSIAN_ALLOWED_FRAGMENT_LENGTH);try{decodeURIComponent(e),t="valid"}catch{t="invalid"}}u(r.createAnalyticsEvent,r.action,r?.contentId,t)}return{type:"inlineExtension",attrs:{extensionType:"com.atlassian.confluence.macro.core",extensionKey:"anchor",parameters:{macroParams:{"":{value:e}},macroMetadata:{title:"Anchor"}}}}}if("jiraroadmap"===t.name){if(!n)return{type:"embedCard",attrs:{url:t.params&&t.params.url,layout:"wide"}}}else if("jira"===t.name&&t.params.key&&(0,i("6Ywr0").isRequiredModuleLoaded)("confluence/jim/jira/applinks-bridge-for-spa"))try{let n=e(o).require("confluence/jim/jira/applinks-bridge-for-spa"),r=await n.getUrlForKey(t.params.key,t.params.serverId);if(await n.isCloudAppLinkFromServerId(t.params.serverId)&&r&&-1!==r.indexOf("atlassian.net")==(-1!==e(o).location.origin.indexOf("atlassian.net")))return{type:"inlineCard",attrs:{url:r}}}catch(e){}return null}function m(e){let{name:t,body:n,params:r,defaultParameterValue:o,schemaVersion:i}=e;return{name:t||"",body:n||"",params:r,defaultParameterValue:o||"",schemaVersion:i}}async function y(e,t,n){let r=await (0,i("foRF9").fetchMacroAttributes)({macroDefinition:e,contentId:t,selectedMacro:null});if((0,i("fgbpl").isBodiedExtension)(r.type))if("string"==typeof e.body){let o;try{o=await (0,i("6mEZ3").convertBody)("storage","atlas_doc_format",e.body,t)||"",r.content=JSON.parse(o).content}catch(t){let e=(0,i("7W8i8").getLogger)("getMacroBrowserSettings.onComplete");e.error`Can't convert provided body from storage format to ADF: ${o}`,n?.content&&(r.content=n?.content)}}else n?.content&&(r.content=n?.content);return r}async function b(e,t,n,r,o,s,a,c,l){let u,b=await (0,i("6OgRG").applyBlocklist)(e),g=0;return{autoClose:!1,onComplete:async c=>{u=!0,e.UI.showBrowserSpinner(!0);let g=m(c);try{let o=await f(g,n?.attrs?.extensionKey==="jiraroadmap",s);!o&&(o=await y(g,t.contentId,n),n?.attrs?.extensionKey==="jira"&&s&&s.createAnalyticsEvent&&d(t.contentId,n?.type,o?.type,s?.createAnalyticsEvent),g?.name==="contentbylabel"&&s&&s.createAnalyticsEvent&&p(t.contentId,o?.attrs?.parameters?.macroParams,s?.createAnalyticsEvent)),l&&!o?.attrs?.parameters?.macroMetadata?.macroId&&(o.attrs.parameters=o?.attrs?.parameters||{},o.attrs.parameters.macroMetadata=o?.attrs?.parameters?.macroMetadata||{},o.attrs.parameters.macroMetadata.macroId={value:l}),r(o),e.close(),b(),a?.({macro:g?.name,isBodiedExtension:(0,i("fgbpl").isBodiedExtension)(o?.type)})}catch(e){i("8pcS0").MODERENIZED_MACRO_KEYS.includes(n?.attrs?.extensionKey)&&h(t.contentId,"onComplete",s?.createAnalyticsEvent,e,n?.attrs?.extensionKey),o(e)}},onCancel:()=>{b(),u||o({reason:"cancel"})},insertUpdatedMacro:async e=>{let r=m(e);try{let e=await y(r,t.contentId,n);c?.(e),g=0}catch(e){++g>5&&(g=0,h(t.contentId,"insertUpdatedMacro",s?.createAnalyticsEvent,e,n?.attrs?.extensionKey))}}}}function g(e,t,n,r,o,a,l){return new Promise(async(u,d)=>{let p=await (0,i("6mEZ3").formatAsLegacyMacroWithOverrides)(e||c,a,l),f=await (0,s.loadMacroBrowserResources)();n&&(f.metadataList=f.metadataList.filter(n)),r&&(r.action="update");let m=(0,i("9wGTI").fg)("confluence_frontend_generate_missing_macro_id")?e?.attrs?.parameters?.macroMetadata?.macroId?.value:null,y=await b(f,t,e,u,d,r,void 0,o,m);try{f.open({...y,selectedMacro:{...p,productContext:{"content.id":t.contentId,"macro.id":e?.attrs?.parameters?.macroMetadata?.macroId?.value,"enrich-content-context-parameters":!0}}})}catch(n){h(t.contentId,"openMacroBrowserToEditExistingMacro",r?.createAnalyticsEvent,n,e?.attrs?.extensionKey),d(n)}})}function x(e,t,n,r,o,a){return new Promise(async(c,l)=>{let u=(0,i("9Cbhx").getMacroId)(null),d=await (0,s.loadMacroBrowserResources)();n&&(d.metadataList=d.metadataList.filter(n)),r&&(r.action="insert");let p=await b(d,t,e,c,l,r,o,a,u);try{d.open({...p,presetMacroMetadata:{...e,productContext:{"macro.id":u,"content.id":t.contentId,"enrich-content-context-parameters":!0}}})}catch(n){h(t.contentId,"openMacroBrowserForInitialConfiguration",r?.createAnalyticsEvent,n,e?.attrs?.extensionKey),l(n)}})}}),s("7bL1M",function(t,n){var r=i("6g1oe"),o=i("dmKyV");let s=()=>["wr!com.atlassian.confluence.plugins.confluence-create-content-plugin:editor-resources","wr!com.atlassian.confluence.plugins.confluence-create-content-plugin:create-from-template-macro-browser-resources","wr!com.atlassian.confluence.plugins.confluence-create-content-plugin:create-from-template-resources"];t.exports.loadMacroBrowserResources=function(){return new Promise(t=>{let n=["wrc!fabric-editor-macro-browser","wr!com.atlassian.confluence.plugins.confluence-inline-tasks:inline-tasks-macro-browser","wr!com.atlassian.confluence.plugins.gadgets:macro-browser-for-gadgetsplugin",...s()];o.WRM.require(n,()=>{let n=e(r).require("confluence-macro-browser/macro-browser");i("01OTV").then(e=>{e.default()}).then(()=>{e(r).AJS.trigger("reset.rte"),t(n)})})})}}),s("01OTV",function(e,t){e.exports=i("4mJKd")(5)("2wLue").then(()=>i("74DtK"))}),s("iol5P",function(t,n){var r=i("42omo");let o=(0,i("jmjWc").LoadableLazy)({__loadable_id__:"FUMAJ",name:"TemplateVariableDialogLoader",loader:async()=>(await i("iC8Gs")).TemplateVariableDialogComponent,loading:()=>e(r).createElement(i("lOkIA").CenteredSpinner,{size:"medium"})});t.exports.TemplateVariableDialogLoader=o}),s("iC8Gs",function(e,t){e.exports=i("4mJKd")(5)("6IjKj").then(()=>i("5KoaE"))}),s("ajgiQ",function(e,n){t(e.exports,"filterADNodesByType",()=>i("j2dS3").filterADNodesByType),t(e.exports,"updateParams",()=>i("j2dS3").updateParams),i("j2dS3")}),s("3JqyB",function(t,n){var r=i("42omo");t.exports.TemplateVariableComponent=({parameters:t})=>e(r).createElement("span",null,e(r).createElement(i("kwjRd").TemplateVariableNameWrapper,null,e(r).createElement(i("kwjRd").TemplateVariableName,{"data-testid":"variable-name"},t?.name)),e(r).createElement(i("kwjRd").TemplateVariableType,{"data-testid":"variable-type"},`| ${t?.type}`))}),s("5ho0B",function(e,t){e.exports.getTemplateMigrationExtHandler=()=>e=>null}),s("k77lQ",function(e,n){t(e.exports,"getExtensionHandlers",()=>i("7okiz").getExtensionHandlers),i("7okiz")}),s("gPW8f",function(e,t){let n=i("4mJKd")(5);e.exports=Promise.all([n("7Omhy"),n("2YffH"),n("2PePB"),n("fCnmZ"),n("6bYkZ"),n("2F69B"),n("cPWI2"),n("9MSTM"),n("aYx1O"),n("lkOIY"),n("clQc9"),n("8PPsf"),n("4eboO"),n("8YSo7"),n("39eyQ"),n("4t77a"),n("2spqH"),n("gWSdF"),n("lXGg9"),n("hy3sK"),n("jp3gT"),n("9ijrN"),n("aeEUI"),n("hRUX7"),n("g4oYs"),n("6wr18"),n("kjZZD"),n("awqCy"),n("cyGuT"),n("a1MBa"),n("lavAq"),n("65u2R"),n("bj2rY"),n("nbjnv"),n("fZt2F"),n("kCMj8"),n("5tz7G"),n("7u4WP"),n("Wowvf"),n("jlSv2"),n("1UUrt"),n("amUNi"),n("jSdjl"),n("l2EUC"),n("gZGoR"),n("kWZnd"),n("92LGf"),n("let0D"),n("joFPh"),n("6vyHt"),n("ioQAS"),n("ffEVr"),n("kUbUu"),n("78DR4"),n("4Lgj0"),n("kSJiq"),n("ZZR2T"),n("gYfgO"),n("dLx08"),n("hhss7"),n("5QKVr"),n("bxFZs"),n("7EorR"),n("lsb09")]).then(()=>i("gnN3I"))}),s("hFueH",function(e,t){i("42omo");let n=(0,i("jmjWc").LoadableAfterPaint)({__loadable_id__:"uC_t0",name:"EditorLoaderLoader",loader:()=>i("dIGEa")});e.exports.default=n}),s("dIGEa",function(e,t){let n=i("4mJKd")(5);e.exports=Promise.all([n("43hsF"),n("kHDuB")]).then(()=>i("Il8QU"))}),s("cjG4e",function(e,t){e.exports=i("4mJKd")(5)("dQy5b").then(()=>i("fcgkZ"))}),s("69aHU",function(t,n){var r,o=i("5bak6"),s=i("bfil7"),a=i("04e9M"),c=i("aIqlA"),l=i("gxXVf"),u=i("42omo"),d=(i("2oer2"),(r={})[r.CONFIG=0]="CONFIG",r[r.INPUT=1]="INPUT",r);let p=(0,i("cgtv4").defineMessages)({templateVariablesAdd:{id:"confluence-fabric-editor.template.variables.add",defaultMessage:"New variable"},templateVariablesAddTooltip:{id:"confluence-fabric-editor.template.variables.add.tooltip",defaultMessage:"Add a new field into the page for the template user to fill out."}});var h=i("bgcaM");let f=async()=>{let{rendererManifest:e}=await i("jUXMA");return new(0,i("bre0g").default)([e])};t.exports.populateExtensionProviders=(t,{intl:n,containerId:r,accountId:m,cloudId:y,spaceKey:b,spaceId:g,contentId:x,contentType:E,environment:v,extensionHandlers:_,showTemplateInputInPreview:w,showTemplateVariablesInPreview:I,setManifestReadyState:S,createAnalyticsEvent:T,activationId:C,isLivePage:P=!1,isLivePagesFeatureEnabled:N=!1})=>{let O=[],A=(0,s.getConfluenceMacrosExtensionProviderForRenderer)({contentId:x,spaceKey:b,spaceId:g,features:{}},_,h.getMigrationExtensionManifest,l.openMacroBrowserToEditExistingMacro,l.openMacroBrowserForInitialConfiguration,n,T,t,N);O.push(A);let M=f();O.push(M),(w||I)&&O.push(new(0,i("bre0g").default)([function(t,n=0,r,o){let s=t.formatMessage(p.templateVariablesAdd),a=1===n?i("2igSQ").TemplateVariableInput:i("3JqyB").TemplateVariableComponent;return{key:i("8pcS0").EXTENSION_KEY.TEMPLATE,type:i("8pcS0").EXTENSION_TYPE.TEMPLATE,title:s,description:t.formatMessage(p.templateVariablesAddTooltip),icons:{48:async()=>()=>e(u).createElement(e(i("eIlE7")),{color:"currentColor",label:s,spacing:"spacious"})},modules:{quickInsert:void 0,nodes:{default:{type:"inlineExtension",render:async()=>({node:t})=>e(u).createElement(a,{parameters:t.parameters}),update:void 0}}}}}(n,w?d.INPUT:d.CONFIG)]));let R=(0,i("gKr8t").getAGGClient)(),k=(0,i("hp2SH").getApolloClient)(),D=[(0,i("aF5bm").getWorkspaceARI)({cloudId:y,activationId:C})],F=async()=>(0,c.fetchForgeExtensionProvider)({getProviderOptions:({spaceKey:e})=>({accountId:m??void 0,cloudId:y,apolloClient:R,ccGraphqlClient:k,contextIds:D,dataProviders:t,environment:(0,o.environmentToForgeProductEnvironment)(v),product:"confluence",page:"confluence:macroRenderer",isEditing:!1,analyticsWebClient:(0,a.getAnalyticsWebClient)(),forgeUIAnalyticsContext:(0,o.createForgeUIAnalyticsContext)({objectId:x,objectType:E,containerId:r,containerType:"space"}),extensionData:(0,o.createForgeMacroExtensionData)({spaceKey:e??"",isLivePage:P,spaceId:g??"",contentId:x,contentType:E}),extensionHandlerWithReference:_[i("8pcS0").EXTENSION_TYPE.MACRO_WITH_REFERENCES],connectExtensionProvider:A,FlagProvider:i("8z3oB").FlagProvider,extensionsFilter:void 0,locale:n.locale,useGetContextToken:i("1JyKZ").useGetContextToken,useRouteActions:i("dPJCf").useRouteActions}),spaceKey:b});O.push(F());let j=(0,i("eEmxu").default)(O);t.setProvider("extensionProvider",Promise.resolve(j)),j?.preload?.().then(()=>{S?.(!0)})}}),s("bgcaM",function(t,n){var r=i("42omo"),o=i("5h7sn"),s=i("bQCqI");let a=(0,i("cgtv4").defineMessages)({unmodifiableMacroDialogTitle:{id:"fabric-extension-handlers.unmodifiable.macro.dialog.title",defaultMessage:"This macro can’t be edited"},unmodifiableMacroDialogBody:{id:"fabric-extension-handlers.unmodifiable.macro.dialog.body",defaultMessage:"This macro was added to a page that was converted from the legacy editor. It can’t be edited because it is now incompatible with the <alink>current editor</alink>."}}),c=(t,n,o)=>new Promise((s,c)=>{if(!t||!t.attrs||!n)return void c(Error("Cannot show unmodifiable macro error flag"));let l=()=>{o&&o({type:"sendUIEvent",data:{action:"clicked",actionSubject:"link",actionSubjectId:"unmodifiableMacroDialogComponentLearnMoreLink",source:"showUnmodifiableMacroFlag"}}).fire()};n.showFlag({type:"error",title:e(r).createElement(i("gtD4K").default,a.unmodifiableMacroDialogTitle),description:e(r).createElement(i("gtD4K").default,{...a.unmodifiableMacroDialogBody,values:{alink:(...t)=>(0,i("9wGTI").fg)("dst-a11y__replace-anchor-with-link__page-experienc")?e(r).createElement(i("2Nwuj").default,{href:i("8am3c").LEARN_MORE_URL,target:"_blank",onClick:l},t):e(r).createElement("a",{href:i("8am3c").LEARN_MORE_URL,target:"_blank",onClick:l},t)}}),close:"auto"}),s()});var l=i("fUN4A");let u=(0,i("cgtv4").defineMessages)({widthLabel:{id:"confluence-fabric-editor.migration-extension.manifest.width.label",defaultMessage:"Width"},widthDescription:{id:"confluence-fabric-editor.migration-extension.manifest.width.description",defaultMessage:"Width of image"},heightLabel:{id:"confluence-fabric-editor.migration-extension.manifest.height.label",defaultMessage:"Height"},heightDescription:{id:"confluence-fabric-editor.migration-extension.manifest.height.description",defaultMessage:"Height of image"},configPlaceholder:{id:"confluence-fabric-editor.migration-extension.manifest.config.placeholder",defaultMessage:"auto"}}),d=(e,t,n,r,a)=>{let c=t?o.getMigrationExtHandlerForEditor:s.getMigrationExtHandlerForRenderer;return[h(e,c,t,r,a),...[i("8pcS0").EXTENSION_KEY.INLINE_MEDIA_IMAGE,i("8pcS0").EXTENSION_KEY.INLINE_EXTERNAL_IMAGE].map(r=>p(r,e,c,t,n))]},p=(e,t,n,r,o)=>m(e,{type:"inlineExtension",async preloadRender(){},renderSync:()=>({node:e})=>n({contentId:t,contextProviders:{ClassicEditorContextProvider:l.ClassicEditorContextProviderLazyLoader}})(e,{}),async render(){return this.renderSync()},getFieldsDefinition:async()=>[{name:"width",label:o.formatMessage(u.widthLabel),isRequired:!1,description:o.formatMessage(u.widthDescription),placeholder:o.formatMessage(u.configPlaceholder),type:"number"},{name:"height",label:o.formatMessage(u.heightLabel),isRequired:!1,description:o.formatMessage(u.heightDescription),placeholder:o.formatMessage(u.configPlaceholder),type:"number"}],update:r?async(e,t)=>t.editInContextPanel(e=>({...e,width:Number(e.width)||void 0,height:Number(e.height)||void 0}),e=>({...e,width:f(e.width,16),height:f(e.height,8)})):void 0}),h=(e,t,n,r,o)=>m(i("8pcS0").EXTENSION_KEY.INVALID,{type:"inlineExtension",async preloadRender(){},renderSync:()=>({node:n})=>t({contentId:e,contextProviders:{ClassicEditorContextProvider:l.ClassicEditorContextProviderLazyLoader}})(n,{}),async render(){return this.renderSync()},update:n?e=>c({type:"inlineExtension",attrs:{parameters:e}},r,o):void 0}),f=(e,t)=>void 0===e?"":e<=t?String(t):String(e),m=(t,n)=>({title:"Migration Extension",key:t,type:i("8pcS0").EXTENSION_TYPE.MIGRATION,icons:{48:async()=>()=>e(r).createElement(e(i("jdPfT")),{label:"Migration Extension"})},modules:{nodes:{default:n}}});t.exports.getMigrationExtensionManifest=function(t,n,a,u,p){if((0,i("6mKj3").expValEquals)("enable_edit_of_inline_image_extensions","cohort","test"))return d(t,n,a,u,p);let h="inlineExtension",f=n?o.getMigrationExtHandlerForEditor:s.getMigrationExtHandlerForRenderer;return[i("8pcS0").EXTENSION_KEY.INVALID,i("8pcS0").EXTENSION_KEY.INLINE_MEDIA_IMAGE,i("8pcS0").EXTENSION_KEY.INLINE_EXTERNAL_IMAGE].map(o=>({title:"Migration Extension",key:o,type:i("8pcS0").EXTENSION_TYPE.MIGRATION,icons:{48:async()=>()=>e(r).createElement(e(i("jdPfT")),{label:"Migration Extension"})},modules:{nodes:{default:{type:h,async preloadRender(){},renderSync:()=>({node:e})=>f({contentId:t,contextProviders:{ClassicEditorContextProvider:l.ClassicEditorContextProviderLazyLoader}})(e,{}),async render(){return this.renderSync()},update:n?e=>c({type:h,attrs:{parameters:e}},u,p):void 0}}}}))}}),s("8am3c",function(e,t){e.exports.PLUGIN_KEY="com.atlassian.confluence.plugins.confluence-frontend-support",e.exports.PAGE_MIGRATION_FEATURE_KEY="confluence.fabric.page.migration.banner",e.exports.LEARN_MORE_URL="https://confluence.atlassian.com/confcloud/converting-pages-to-the-new-editor-993930226.html"}),s("jUXMA",function(e,t){let n=i("4mJKd")(5);e.exports=Promise.all([n("dMjmA"),n("e50bA"),n("9Uze4"),n("6rkrn"),n("gYfgO"),n("dLx08"),n("7WaUI"),n("kgxfY"),n("cZcsn"),n("iK6Gk"),n("6SPW3"),n("1eO5Z"),n("g5HUX"),n("epFxL"),n("aDI8V"),n("3O4Lm"),n("86sUJ"),n("xK6fL"),n("7zIKF"),n("kEwWf"),n("fD0v8"),n("6XCf4"),n("fGT64"),n("5abXM"),n("k78EM"),n("5pvpJ"),n("lUQAm"),n("hshEG"),n("5CdWD"),n("deebc"),n("jTaSF"),n("8fXIr"),n("dVkhd"),n("7jSfd"),n("4HZlX"),n("kDqHr"),n("6wr18"),n("kjZZD"),n("ht5OT"),n("sj9Xz"),n("1qlDN"),n("1yVM6"),n("dTsOE"),n("ffEVr"),n("iq6Zv")]).then(()=>i("8pP5E"))}),s("bqQGV",function(t,n){var r=i("42omo");let o=(0,i("cgtv4").defineMessages)({answerCount:{id:"questions.question-item.answer-count",defaultMessage:"{count, plural, one {{count} answer} other {{count} answers}}"},voteCount:{id:"questions.question-item.vote-count",defaultMessage:"{count, plural, one {vote} other {votes}}"}}),s=(0,i("ecnYn").xcss)({marginBlock:"space.100"}),a=(0,i("ecnYn").xcss)({textAlign:"center",minWidth:"32px"});t.exports.QuestionItem=({questionTitle:t,questionId:n,topics:c,routerName:l,numberOfAnswers:u,createdBy:d,numberOfVotes:p,createdDate:h,spaceKey:f,spaceName:m,hasAcceptedAnswer:y})=>{let{formatMessage:b}=(0,i("8C5kA").default)();return e(r).createElement(i("6f0Oj").default,{xcss:s},e(r).createElement(i("dcJ7R").default,{space:"space.200"},e(r).createElement(i("1GzhS").default,{alignInline:"center",xcss:a},e(r).createElement(i("7hXDW").default,{size:"medium"},p),e(r).createElement(i("5dK2X").default,{size:"small"},b(o.voteCount,{count:p}))),e(r).createElement(i("1GzhS").default,{alignBlock:"start",space:"space.100"},e(r).createElement(i("7hXDW").default,{size:"small"},e(r).createElement(i("dcJ7R").default,{alignBlock:"center",space:"space.100"},y&&e(r).createElement(e(i("imt6g")),{color:"var(--ds-icon-accent-green)",label:"Accepted answer"}),e(r).createElement(i("8lYIw").Link,{name:l,params:{questionId:n,spaceKey:f},className:(0,i("gMc0m").default)(["_4bfu1r31 _1hmsglyw _ajmmnqa1"])},t))),e(r).createElement(i("dcJ7R").default,{alignBlock:"center",shouldWrap:!0,space:"space.100",separator:"·"},e(r).createElement(i("5dK2X").default,{size:"small"},b(o.answerCount,{count:u})),e(r).createElement(i("5dK2X").default,{size:"small"},d),e(r).createElement(i("5dK2X").default,{size:"small"},(0,i("6nXDf").default)(h,{addSuffix:!0})),f&&m&&e(r).createElement(i("kTuMi").SpaceLink,{spaceKey:f,spaceName:m})),e(r).createElement(i("izEQ8").QuestionTopics,{topics:c}))))}}),s("bfgJH",function(e,t){var n=e.exports&&e.exports.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},r=i("3FcLR"),o=i("6LPWz"),s=i("iwB6M"),a=i("dZ9AU");e.exports.audit=function(e){return function(t){return t.lift(new c(e))}};var c=function(){function e(e){this.durationSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.durationSelector))},e}(),l=function(e){function t(t,n){e.call(this,t),this.durationSelector=n,this.hasValue=!1}return n(t,e),t.prototype._next=function(e){if(this.value=e,this.hasValue=!0,!this.throttled){var t=r.tryCatch(this.durationSelector)(e);if(t===o.errorObject)this.destination.error(o.errorObject.e);else{var n=a.subscribeToResult(this,t);n.closed?this.clearThrottle():this.add(this.throttled=n)}}},t.prototype.clearThrottle=function(){var e=this.value,t=this.hasValue,n=this.throttled;n&&(this.remove(n),this.throttled=null,n.unsubscribe()),t&&(this.value=null,this.hasValue=!1,this.destination.next(e))},t.prototype.notifyNext=function(e,t,n,r){this.clearThrottle()},t.prototype.notifyComplete=function(){this.clearThrottle()},t}(s.OuterSubscriber)}),s("3POu8",function(e,t){var n=e.exports&&e.exports.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},r=i("8biLX"),o=i("YgydF"),s=i("3u6GG"),a=i("5Dgek"),c=i("kVeeY"),l=function(e){function t(t,n,o){void 0===t&&(t=0),e.call(this),this.period=-1,this.dueTime=0,r.isNumeric(n)?this.period=1>Number(n)&&1||Number(n):a.isScheduler(n)&&(o=n),a.isScheduler(o)||(o=s.async),this.scheduler=o,this.dueTime=c.isDate(t)?t-this.scheduler.now():t}return n(t,e),t.create=function(e,n,r){return void 0===e&&(e=0),new t(e,n,r)},t.dispatch=function(e){var t=e.index,n=e.period,r=e.subscriber;if(r.next(t),!r.closed){if(-1===n)return r.complete();e.index=t+1,this.schedule(e,n)}},t.prototype._subscribe=function(e){var n=this.period,r=this.dueTime;return this.scheduler.schedule(t.dispatch,r,{index:0,period:n,subscriber:e})},t}(o.Observable);e.exports.TimerObservable=l}),s("ha2Ff",function(e,t){var n=e.exports&&e.exports.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},r=i("3u6GG"),o=i("axeml"),s=i("5Dgek");e.exports.bufferTime=function(e){var t=arguments.length,n=r.async;s.isScheduler(arguments[arguments.length-1])&&(n=arguments[arguments.length-1],t--);var o=null;t>=2&&(o=arguments[1]);var i=Number.POSITIVE_INFINITY;return t>=3&&(i=arguments[2]),function(t){return t.lift(new a(e,o,i,n))}};var a=function(){function e(e,t,n,r){this.bufferTimeSpan=e,this.bufferCreationInterval=t,this.maxBufferSize=n,this.scheduler=r}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))},e}(),c=function(){this.buffer=[]},l=function(e){function t(t,n,r,o,i){e.call(this,t),this.bufferTimeSpan=n,this.bufferCreationInterval=r,this.maxBufferSize=o,this.scheduler=i,this.contexts=[];var s=this.openContext();this.timespanOnly=null==r||r<0,this.timespanOnly?this.add(s.closeAction=i.schedule(u,n,{subscriber:this,context:s,bufferTimeSpan:n})):(this.add(s.closeAction=i.schedule(p,n,{subscriber:this,context:s})),this.add(i.schedule(d,r,{bufferTimeSpan:n,bufferCreationInterval:r,subscriber:this,scheduler:i})))}return n(t,e),t.prototype._next=function(e){for(var t,n=this.contexts,r=n.length,o=0;o<r;o++){var i=n[o],s=i.buffer;s.push(e),s.length==this.maxBufferSize&&(t=i)}t&&this.onBufferFull(t)},t.prototype._error=function(t){this.contexts.length=0,e.prototype._error.call(this,t)},t.prototype._complete=function(){for(var t=this.contexts,n=this.destination;t.length>0;){var r=t.shift();n.next(r.buffer)}e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.contexts=null},t.prototype.onBufferFull=function(e){this.closeContext(e);var t=e.closeAction;if(t.unsubscribe(),this.remove(t),!this.closed&&this.timespanOnly){e=this.openContext();var n=this.bufferTimeSpan,r={subscriber:this,context:e,bufferTimeSpan:n};this.add(e.closeAction=this.scheduler.schedule(u,n,r))}},t.prototype.openContext=function(){var e=new c;return this.contexts.push(e),e},t.prototype.closeContext=function(e){this.destination.next(e.buffer);var t=this.contexts;(t?t.indexOf(e):-1)>=0&&t.splice(t.indexOf(e),1)},t}(o.Subscriber);function u(e){var t=e.subscriber,n=e.context;n&&t.closeContext(n),t.closed||(e.context=t.openContext(),e.context.closeAction=this.schedule(e,e.bufferTimeSpan))}function d(e){var t=e.bufferCreationInterval,n=e.bufferTimeSpan,r=e.subscriber,o=e.scheduler,i=r.openContext();r.closed||(r.add(i.closeAction=o.schedule(p,n,{subscriber:r,context:i})),this.schedule(e,t))}function p(e){var t=e.subscriber,n=e.context;t.closeContext(n)}}),s("hvtnc",function(e,t){var n=e.exports&&e.exports.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},r=i("8v4h5"),o=i("dZ9AU"),s=i("iwB6M");e.exports.bufferToggle=function(e,t){return function(n){return n.lift(new a(e,t))}};var a=function(){function e(e,t){this.openings=e,this.closingSelector=t}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.openings,this.closingSelector))},e}(),c=function(e){function t(t,n,r){e.call(this,t),this.openings=n,this.closingSelector=r,this.contexts=[],this.add(o.subscribeToResult(this,n))}return n(t,e),t.prototype._next=function(e){for(var t=this.contexts,n=t.length,r=0;r<n;r++)t[r].buffer.push(e)},t.prototype._error=function(t){for(var n=this.contexts;n.length>0;){var r=n.shift();r.subscription.unsubscribe(),r.buffer=null,r.subscription=null}this.contexts=null,e.prototype._error.call(this,t)},t.prototype._complete=function(){for(var t=this.contexts;t.length>0;){var n=t.shift();this.destination.next(n.buffer),n.subscription.unsubscribe(),n.buffer=null,n.subscription=null}this.contexts=null,e.prototype._complete.call(this)},t.prototype.notifyNext=function(e,t,n,r,o){e?this.closeBuffer(e):this.openBuffer(t)},t.prototype.notifyComplete=function(e){this.closeBuffer(e.context)},t.prototype.openBuffer=function(e){try{var t=this.closingSelector.call(this,e);t&&this.trySubscribe(t)}catch(e){this._error(e)}},t.prototype.closeBuffer=function(e){var t=this.contexts;if(t&&e){var n=e.buffer,r=e.subscription;this.destination.next(n),t.splice(t.indexOf(e),1),this.remove(r),r.unsubscribe()}},t.prototype.trySubscribe=function(e){var t=this.contexts,n=new r.Subscription,i={buffer:[],subscription:n};t.push(i);var s=o.subscribeToResult(this,e,i);!s||s.closed?this.closeBuffer(i):(s.context=i,this.add(s),n.add(s))},t}(s.OuterSubscriber)}),s("7Jon0",function(e,t){var n=e.exports&&e.exports.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},r=i("8v4h5"),o=i("3FcLR"),s=i("6LPWz"),a=i("iwB6M"),c=i("dZ9AU");e.exports.bufferWhen=function(e){return function(t){return t.lift(new l(e))}};var l=function(){function e(e){this.closingSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.closingSelector))},e}(),u=function(e){function t(t,n){e.call(this,t),this.closingSelector=n,this.subscribing=!1,this.openBuffer()}return n(t,e),t.prototype._next=function(e){this.buffer.push(e)},t.prototype._complete=function(){var t=this.buffer;t&&this.destination.next(t),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.buffer=null,this.subscribing=!1},t.prototype.notifyNext=function(e,t,n,r,o){this.openBuffer()},t.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()},t.prototype.openBuffer=function(){var e=this.closingSubscription;e&&(this.remove(e),e.unsubscribe());var t=this.buffer;this.buffer&&this.destination.next(t),this.buffer=[];var n=o.tryCatch(this.closingSelector)();n===s.errorObject?this.error(s.errorObject.e):(e=new r.Subscription,this.closingSubscription=e,this.add(e),this.subscribing=!0,e.add(c.subscribeToResult(this,n)),this.subscribing=!1)},t}(a.OuterSubscriber)}),s("gonhO",function(e,t){var n=e.exports&&e.exports.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},r=i("HHFyQ"),o=i("fvPwd"),s=i("iwB6M"),a=i("dZ9AU"),c={};e.exports.combineLatest=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n=null;return"function"==typeof e[e.length-1]&&(n=e.pop()),1===e.length&&o.isArray(e[0])&&(e=e[0].slice()),function(t){return t.lift.call(new r.ArrayObservable([t].concat(e)),new l(n))}};var l=function(){function e(e){this.project=e}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.project))},e}();e.exports.CombineLatestOperator=l;var u=function(e){function t(t,n){e.call(this,t),this.project=n,this.active=0,this.values=[],this.observables=[]}return n(t,e),t.prototype._next=function(e){this.values.push(c),this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(var n=0;n<t;n++){var r=e[n];this.add(a.subscribeToResult(this,r,r,n))}}},t.prototype.notifyComplete=function(e){0==(this.active-=1)&&this.destination.complete()},t.prototype.notifyNext=function(e,t,n,r,o){var i=this.values,s=i[n],a=this.toRespond?s===c?--this.toRespond:this.toRespond:0;i[n]=t,0===a&&(this.project?this._tryProject(i):this.destination.next(i.slice()))},t.prototype._tryProject=function(e){var t;try{t=this.project.apply(this,e)}catch(e){this.destination.error(e);return}this.destination.next(t)},t}(s.OuterSubscriber);e.exports.CombineLatestSubscriber=u}),s("3EdwZ",function(e,t){var n=e.exports&&e.exports.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},r=i("iwB6M"),o=i("dZ9AU");e.exports.debounce=function(e){return function(t){return t.lift(new s(e))}};var s=function(){function e(e){this.durationSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.durationSelector))},e}(),a=function(e){function t(t,n){e.call(this,t),this.durationSelector=n,this.hasValue=!1,this.durationSubscription=null}return n(t,e),t.prototype._next=function(e){try{var t=this.durationSelector.call(this,e);t&&this._tryNext(e,t)}catch(e){this.destination.error(e)}},t.prototype._complete=function(){this.emitValue(),this.destination.complete()},t.prototype._tryNext=function(e,t){var n=this.durationSubscription;this.value=e,this.hasValue=!0,n&&(n.unsubscribe(),this.remove(n)),(n=o.subscribeToResult(this,t)).closed||this.add(this.durationSubscription=n)},t.prototype.notifyNext=function(e,t,n,r,o){this.emitValue()},t.prototype.notifyComplete=function(){this.emitValue()},t.prototype.emitValue=function(){if(this.hasValue){var t=this.value,n=this.durationSubscription;n&&(this.durationSubscription=null,n.unsubscribe(),this.remove(n)),this.value=null,this.hasValue=!1,e.prototype._next.call(this,t)}},t}(r.OuterSubscriber)}),s("dGzwg",function(e,t){var n=e.exports&&e.exports.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},r=i("axeml"),o=i("3u6GG");e.exports.debounceTime=function(e,t){return void 0===t&&(t=o.async),function(n){return n.lift(new s(e,t))}};var s=function(){function e(e,t){this.dueTime=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.dueTime,this.scheduler))},e}(),a=function(e){function t(t,n,r){e.call(this,t),this.dueTime=n,this.scheduler=r,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}return n(t,e),t.prototype._next=function(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(c,this.dueTime,this))},t.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},t.prototype.debouncedNext=function(){this.clearDebounce(),this.hasValue&&(this.destination.next(this.lastValue),this.lastValue=null,this.hasValue=!1)},t.prototype.clearDebounce=function(){var e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)},t}(r.Subscriber);function c(e){e.debouncedNext()}}),s("3YBdK",function(e,t){var n=e.exports&&e.exports.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},r=i("axeml"),o=i("YgydF"),s=i("iwB6M"),a=i("dZ9AU");e.exports.delayWhen=function(e,t){return t?function(n){return new u(n,t).lift(new c(e))}:function(t){return t.lift(new c(e))}};var c=function(){function e(e){this.delayDurationSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.delayDurationSelector))},e}(),l=function(e){function t(t,n){e.call(this,t),this.delayDurationSelector=n,this.completed=!1,this.delayNotifierSubscriptions=[],this.values=[]}return n(t,e),t.prototype.notifyNext=function(e,t,n,r,o){this.destination.next(e),this.removeSubscription(o),this.tryComplete()},t.prototype.notifyError=function(e,t){this._error(e)},t.prototype.notifyComplete=function(e){var t=this.removeSubscription(e);t&&this.destination.next(t),this.tryComplete()},t.prototype._next=function(e){try{var t=this.delayDurationSelector(e);t&&this.tryDelay(t,e)}catch(e){this.destination.error(e)}},t.prototype._complete=function(){this.completed=!0,this.tryComplete()},t.prototype.removeSubscription=function(e){e.unsubscribe();var t=this.delayNotifierSubscriptions.indexOf(e),n=null;return -1!==t&&(n=this.values[t],this.delayNotifierSubscriptions.splice(t,1),this.values.splice(t,1)),n},t.prototype.tryDelay=function(e,t){var n=a.subscribeToResult(this,e,t);n&&!n.closed&&(this.add(n),this.delayNotifierSubscriptions.push(n)),this.values.push(t)},t.prototype.tryComplete=function(){this.completed&&0===this.delayNotifierSubscriptions.length&&this.destination.complete()},t}(s.OuterSubscriber),u=function(e){function t(t,n){e.call(this),this.source=t,this.subscriptionDelay=n}return n(t,e),t.prototype._subscribe=function(e){this.subscriptionDelay.subscribe(new d(e,this.source))},t}(o.Observable),d=function(e){function t(t,n){e.call(this),this.parent=t,this.source=n,this.sourceSubscribed=!1}return n(t,e),t.prototype._next=function(e){this.subscribeToSource()},t.prototype._error=function(e){this.unsubscribe(),this.parent.error(e)},t.prototype._complete=function(){this.subscribeToSource()},t.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},t}(r.Subscriber)}),s("5vrRW",function(e,t){var n=e.exports&&e.exports.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},r=i("axeml");e.exports.dematerialize=function(){return function(e){return e.lift(new o)}};var o=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new s(e))},e}(),s=function(e){function t(t){e.call(this,t)}return n(t,e),t.prototype._next=function(e){e.observe(this.destination)},t}(r.Subscriber)}),s("jKOLV",function(e,t){var n,r=e.exports&&e.exports.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=i("iwB6M"),s=i("dZ9AU");n=i("4iRIL").root.Set||function(){function e(){this._values=[]}return e.prototype.add=function(e){this.has(e)||this._values.push(e)},e.prototype.has=function(e){return -1!==this._values.indexOf(e)},Object.defineProperty(e.prototype,"size",{get:function(){return this._values.length},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this._values.length=0},e}(),e.exports.distinct=function(e,t){return function(n){return n.lift(new a(e,t))}};var a=function(){function e(e,t){this.keySelector=e,this.flushes=t}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.keySelector,this.flushes))},e}(),c=function(e){function t(t,r,o){e.call(this,t),this.keySelector=r,this.values=new n,o&&this.add(s.subscribeToResult(this,o))}return r(t,e),t.prototype.notifyNext=function(e,t,n,r,o){this.values.clear()},t.prototype.notifyError=function(e,t){this._error(e)},t.prototype._next=function(e){this.keySelector?this._useKeySelector(e):this._finalizeNext(e,e)},t.prototype._useKeySelector=function(e){var t,n=this.destination;try{t=this.keySelector(e)}catch(e){n.error(e);return}this._finalizeNext(t,e)},t.prototype._finalizeNext=function(e,t){var n=this.values;n.has(e)||(n.add(e),this.destination.next(t))},t}(o.OuterSubscriber);e.exports.DistinctSubscriber=c}),s("j5i71",function(e,t){var n=e.exports&&e.exports.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},r=i("axeml"),o=i("2g0GA");e.exports.elementAt=function(e,t){return function(n){return n.lift(new s(e,t))}};var s=function(){function e(e,t){if(this.index=e,this.defaultValue=t,e<0)throw new o.ArgumentOutOfRangeError}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.index,this.defaultValue))},e}(),a=function(e){function t(t,n,r){e.call(this,t),this.index=n,this.defaultValue=r}return n(t,e),t.prototype._next=function(e){0==this.index--&&(this.destination.next(e),this.destination.complete())},t.prototype._complete=function(){var e=this.destination;this.index>=0&&(void 0!==this.defaultValue?e.next(this.defaultValue):e.error(new o.ArgumentOutOfRangeError)),e.complete()},t}(r.Subscriber)}),s("8eQTU",function(e,t){var n=e.exports&&e.exports.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},r=i("axeml");e.exports.every=function(e,t){return function(n){return n.lift(new o(e,t,n))}};var o=function(){function e(e,t,n){this.predicate=e,this.thisArg=t,this.source=n}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.predicate,this.thisArg,this.source))},e}(),s=function(e){function t(t,n,r,o){e.call(this,t),this.predicate=n,this.thisArg=r,this.source=o,this.index=0,this.thisArg=r||this}return n(t,e),t.prototype.notifyComplete=function(e){this.destination.next(e),this.destination.complete()},t.prototype._next=function(e){var t=!1;try{t=this.predicate.call(this.thisArg,e,this.index++,this.source)}catch(e){this.destination.error(e);return}t||this.notifyComplete(!1)},t.prototype._complete=function(){this.notifyComplete(!0)},t}(r.Subscriber)}),s("d2JY2",function(e,t){var n=e.exports&&e.exports.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},r=i("iwB6M"),o=i("dZ9AU");e.exports.exhaust=function(){return function(e){return e.lift(new s)}};var s=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new a(e))},e}(),a=function(e){function t(t){e.call(this,t),this.hasCompleted=!1,this.hasSubscription=!1}return n(t,e),t.prototype._next=function(e){this.hasSubscription||(this.hasSubscription=!0,this.add(o.subscribeToResult(this,e)))},t.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},t.prototype.notifyComplete=function(e){this.remove(e),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},t}(r.OuterSubscriber)}),s("kjCE7",function(e,t){var n=e.exports&&e.exports.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},r=i("iwB6M"),o=i("dZ9AU");e.exports.exhaustMap=function(e,t){return function(n){return n.lift(new s(e,t))}};var s=function(){function e(e,t){this.project=e,this.resultSelector=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.project,this.resultSelector))},e}(),a=function(e){function t(t,n,r){e.call(this,t),this.project=n,this.resultSelector=r,this.hasSubscription=!1,this.hasCompleted=!1,this.index=0}return n(t,e),t.prototype._next=function(e){this.hasSubscription||this.tryNext(e)},t.prototype.tryNext=function(e){var t=this.index++,n=this.destination;try{var r=this.project(e,t);this.hasSubscription=!0,this.add(o.subscribeToResult(this,r,e,t))}catch(e){n.error(e)}},t.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},t.prototype.notifyNext=function(e,t,n,r,o){var i=this.resultSelector,s=this.destination;i?this.trySelectResult(e,t,n,r):s.next(t)},t.prototype.trySelectResult=function(e,t,n,r){var o=this.resultSelector,i=this.destination;try{var s=o(e,t,n,r);i.next(s)}catch(e){i.error(e)}},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.remove(e),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},t}(r.OuterSubscriber)}),s("dbHcj",function(e,t){var n=e.exports&&e.exports.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},r=i("3FcLR"),o=i("6LPWz"),s=i("iwB6M"),a=i("dZ9AU");e.exports.expand=function(e,t,n){return void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===n&&(n=void 0),t=1>(t||0)?Number.POSITIVE_INFINITY:t,function(r){return r.lift(new c(e,t,n))}};var c=function(){function e(e,t,n){this.project=e,this.concurrent=t,this.scheduler=n}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.project,this.concurrent,this.scheduler))},e}();e.exports.ExpandOperator=c;var l=function(e){function t(t,n,r,o){e.call(this,t),this.project=n,this.concurrent=r,this.scheduler=o,this.index=0,this.active=0,this.hasCompleted=!1,r<Number.POSITIVE_INFINITY&&(this.buffer=[])}return n(t,e),t.dispatch=function(e){var t=e.subscriber,n=e.result,r=e.value,o=e.index;t.subscribeToProjection(n,r,o)},t.prototype._next=function(e){var n=this.destination;if(n.closed)return void this._complete();var i=this.index++;if(this.active<this.concurrent){n.next(e);var s=r.tryCatch(this.project)(e,i);s===o.errorObject?n.error(o.errorObject.e):this.scheduler?this.add(this.scheduler.schedule(t.dispatch,0,{subscriber:this,result:s,value:e,index:i})):this.subscribeToProjection(s,e,i)}else this.buffer.push(e)},t.prototype.subscribeToProjection=function(e,t,n){this.active++,this.add(a.subscribeToResult(this,e,t,n))},t.prototype._complete=function(){this.hasCompleted=!0,this.hasCompleted&&0===this.active&&this.destination.complete()},t.prototype.notifyNext=function(e,t,n,r,o){this._next(t)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t&&t.length>0&&this._next(t.shift()),this.hasCompleted&&0===this.active&&this.destination.complete()},t}(s.OuterSubscriber);e.exports.ExpandSubscriber=l}),s("5JBQy",function(e,t){var n=e.exports&&e.exports.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},r=i("axeml"),o=i("8v4h5");e.exports.finalize=function(e){return function(t){return t.lift(new s(e))}};var s=function(){function e(e){this.callback=e}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.callback))},e}(),a=function(e){function t(t,n){e.call(this,t),this.add(new o.Subscription(n))}return n(t,e),t}(r.Subscriber)}),s("dUt6W",function(e,t){var n=e.exports&&e.exports.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},r=i("axeml");e.exports.find=function(e,t){if("function"!=typeof e)throw TypeError("predicate is not a function");return function(n){return n.lift(new o(e,n,!1,t))}};var o=function(){function e(e,t,n,r){this.predicate=e,this.source=t,this.yieldIndex=n,this.thisArg=r}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.predicate,this.source,this.yieldIndex,this.thisArg))},e}();e.exports.FindValueOperator=o;var s=function(e){function t(t,n,r,o,i){e.call(this,t),this.predicate=n,this.source=r,this.yieldIndex=o,this.thisArg=i,this.index=0}return n(t,e),t.prototype.notifyComplete=function(e){var t=this.destination;t.next(e),t.complete()},t.prototype._next=function(e){var t=this.predicate,n=this.thisArg,r=this.index++;try{t.call(n||this,e,r,this.source)&&this.notifyComplete(this.yieldIndex?r:e)}catch(e){this.destination.error(e)}},t.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)},t}(r.Subscriber);e.exports.FindValueSubscriber=s}),s("iVKw6",function(e,t){var n=e.exports&&e.exports.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},r=i("axeml"),o=i("3X9I5");e.exports.first=function(e,t,n){return function(r){return r.lift(new s(e,t,n,r))}};var s=function(){function e(e,t,n,r){this.predicate=e,this.resultSelector=t,this.defaultValue=n,this.source=r}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.predicate,this.resultSelector,this.defaultValue,this.source))},e}(),a=function(e){function t(t,n,r,o,i){e.call(this,t),this.predicate=n,this.resultSelector=r,this.defaultValue=o,this.source=i,this.index=0,this.hasCompleted=!1,this._emitted=!1}return n(t,e),t.prototype._next=function(e){var t=this.index++;this.predicate?this._tryPredicate(e,t):this._emit(e,t)},t.prototype._tryPredicate=function(e,t){var n;try{n=this.predicate(e,t,this.source)}catch(e){this.destination.error(e);return}n&&this._emit(e,t)},t.prototype._emit=function(e,t){if(this.resultSelector)return void this._tryResultSelector(e,t);this._emitFinal(e)},t.prototype._tryResultSelector=function(e,t){var n;try{n=this.resultSelector(e,t)}catch(e){this.destination.error(e);return}this._emitFinal(n)},t.prototype._emitFinal=function(e){var t=this.destination;this._emitted||(this._emitted=!0,t.next(e),t.complete(),this.hasCompleted=!0)},t.prototype._complete=function(){var e=this.destination;this.hasCompleted||void 0===this.defaultValue?this.hasCompleted||e.error(new o.EmptyError):(e.next(this.defaultValue),e.complete())},t}(r.Subscriber)}),s("6sXAX",function(e,t){var n,r=e.exports&&e.exports.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=i("axeml"),s=i("8v4h5"),a=i("YgydF"),c=i("augeV"),l=i("4iRIL"),u=function(){function e(){this.size=0,this._values=[],this._keys=[]}return e.prototype.get=function(e){var t=this._keys.indexOf(e);return -1===t?void 0:this._values[t]},e.prototype.set=function(e,t){var n=this._keys.indexOf(e);return -1===n?(this._keys.push(e),this._values.push(t),this.size++):this._values[n]=t,this},e.prototype.delete=function(e){var t=this._keys.indexOf(e);return -1!==t&&(this._values.splice(t,1),this._keys.splice(t,1),this.size--,!0)},e.prototype.clear=function(){this._keys.length=0,this._values.length=0,this.size=0},e.prototype.forEach=function(e,t){for(var n=0;n<this.size;n++)e.call(t,this._values[n],this._keys[n])},e}();n=l.root.Map||u;var d=function(){function e(){this.values={}}return e.prototype.delete=function(e){return this.values[e]=null,!0},e.prototype.set=function(e,t){return this.values[e]=t,this},e.prototype.get=function(e){return this.values[e]},e.prototype.forEach=function(e,t){var n=this.values;for(var r in n)n.hasOwnProperty(r)&&null!==n[r]&&e.call(t,n[r],r)},e.prototype.clear=function(){this.values={}},e}();e.exports.groupBy=function(e,t,n,r){return function(o){return o.lift(new p(e,t,n,r))}};var p=function(){function e(e,t,n,r){this.keySelector=e,this.elementSelector=t,this.durationSelector=n,this.subjectSelector=r}return e.prototype.call=function(e,t){return t.subscribe(new h(e,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))},e}(),h=function(e){function t(t,n,r,o,i){e.call(this,t),this.keySelector=n,this.elementSelector=r,this.durationSelector=o,this.subjectSelector=i,this.groups=null,this.attemptedToUnsubscribe=!1,this.count=0}return r(t,e),t.prototype._next=function(e){var t;try{t=this.keySelector(e)}catch(e){this.error(e);return}this._group(e,t)},t.prototype._group=function(e,t){var r,o=this.groups;o||(o=this.groups="string"==typeof t?new d:new n);var i=o.get(t);if(this.elementSelector)try{r=this.elementSelector(e)}catch(e){this.error(e)}else r=e;if(!i){i=this.subjectSelector?this.subjectSelector():new c.Subject,o.set(t,i);var s=new m(t,i,this);if(this.destination.next(s),this.durationSelector){var a=void 0;try{a=this.durationSelector(new m(t,i))}catch(e){this.error(e);return}this.add(a.subscribe(new f(t,i,this)))}}i.closed||i.next(r)},t.prototype._error=function(e){var t=this.groups;t&&(t.forEach(function(t,n){t.error(e)}),t.clear()),this.destination.error(e)},t.prototype._complete=function(){var e=this.groups;e&&(e.forEach(function(e,t){e.complete()}),e.clear()),this.destination.complete()},t.prototype.removeGroup=function(e){this.groups.delete(e)},t.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&e.prototype.unsubscribe.call(this))},t}(o.Subscriber),f=function(e){function t(t,n,r){e.call(this,n),this.key=t,this.group=n,this.parent=r}return r(t,e),t.prototype._next=function(e){this.complete()},t.prototype._unsubscribe=function(){var e=this.parent,t=this.key;this.key=this.parent=null,e&&e.removeGroup(t)},t}(o.Subscriber),m=function(e){function t(t,n,r){e.call(this),this.key=t,this.groupSubject=n,this.refCountSubscription=r}return r(t,e),t.prototype._subscribe=function(e){var t=new s.Subscription,n=this.refCountSubscription,r=this.groupSubject;return n&&!n.closed&&t.add(new y(n)),t.add(r.subscribe(e)),t},t}(a.Observable);e.exports.GroupedObservable=m;var y=function(e){function t(t){e.call(this),this.parent=t,t.count++}return r(t,e),t.prototype.unsubscribe=function(){var t=this.parent;t.closed||this.closed||(e.prototype.unsubscribe.call(this),t.count-=1,0===t.count&&t.attemptedToUnsubscribe&&t.unsubscribe())},t}(s.Subscription)}),s("3WLBy",function(e,t){var n=e.exports&&e.exports.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},r=i("axeml"),o=i("6qxzH");e.exports.ignoreElements=function(){return function(e){return e.lift(new s)}};var s=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new a(e))},e}(),a=function(e){function t(){e.apply(this,arguments)}return n(t,e),t.prototype._next=function(e){o.noop()},t}(r.Subscriber)}),s("6FTyv",function(e,t){var n=e.exports&&e.exports.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},r=i("axeml");e.exports.isEmpty=function(){return function(e){return e.lift(new o)}};var o=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new s(e))},e}(),s=function(e){function t(t){e.call(this,t)}return n(t,e),t.prototype.notifyComplete=function(e){var t=this.destination;t.next(e),t.complete()},t.prototype._next=function(e){this.notifyComplete(!1)},t.prototype._complete=function(){this.notifyComplete(!0)},t}(r.Subscriber)}),s("bOaaj",function(e,t){var n=e.exports&&e.exports.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},r=i("axeml"),o=i("3X9I5");e.exports.last=function(e,t,n){return function(r){return r.lift(new s(e,t,n,r))}};var s=function(){function e(e,t,n,r){this.predicate=e,this.resultSelector=t,this.defaultValue=n,this.source=r}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.predicate,this.resultSelector,this.defaultValue,this.source))},e}(),a=function(e){function t(t,n,r,o,i){e.call(this,t),this.predicate=n,this.resultSelector=r,this.defaultValue=o,this.source=i,this.hasValue=!1,this.index=0,void 0!==o&&(this.lastValue=o,this.hasValue=!0)}return n(t,e),t.prototype._next=function(e){var t=this.index++;if(this.predicate)this._tryPredicate(e,t);else{if(this.resultSelector)return void this._tryResultSelector(e,t);this.lastValue=e,this.hasValue=!0}},t.prototype._tryPredicate=function(e,t){var n;try{n=this.predicate(e,t,this.source)}catch(e){this.destination.error(e);return}if(n){if(this.resultSelector)return void this._tryResultSelector(e,t);this.lastValue=e,this.hasValue=!0}},t.prototype._tryResultSelector=function(e,t){var n;try{n=this.resultSelector(e,t)}catch(e){this.destination.error(e);return}this.lastValue=n,this.hasValue=!0},t.prototype._complete=function(){var e=this.destination;this.hasValue?(e.next(this.lastValue),e.complete()):e.error(new o.EmptyError)},t}(r.Subscriber)}),s("dsb2s",function(e,t){var n=e.exports&&e.exports.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},r=i("axeml");e.exports.mapTo=function(e){return function(t){return t.lift(new o(e))}};var o=function(){function e(e){this.value=e}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.value))},e}(),s=function(e){function t(t,n){e.call(this,t),this.value=n}return n(t,e),t.prototype._next=function(e){this.destination.next(this.value)},t}(r.Subscriber)}),s("b5JJ1",function(e,t){var n=e.exports&&e.exports.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},r=i("axeml"),o=i("6j5QO");e.exports.materialize=function(){return function(e){return e.lift(new s)}};var s=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new a(e))},e}(),a=function(e){function t(t){e.call(this,t)}return n(t,e),t.prototype._next=function(e){this.destination.next(o.Notification.createNext(e))},t.prototype._error=function(e){var t=this.destination;t.next(o.Notification.createError(e)),t.complete()},t.prototype._complete=function(){var e=this.destination;e.next(o.Notification.createComplete()),e.complete()},t}(r.Subscriber)}),s("btvNM",function(e,t){var n=e.exports&&e.exports.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},r=i("iwB6M"),o=i("dZ9AU");e.exports.mergeMapTo=function(e,t,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"number"==typeof t&&(n=t,t=null),function(r){return r.lift(new s(e,t,n))}};var s=function(){function e(e,t,n){void 0===n&&(n=Number.POSITIVE_INFINITY),this.ish=e,this.resultSelector=t,this.concurrent=n}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.ish,this.resultSelector,this.concurrent))},e}();e.exports.MergeMapToOperator=s;var a=function(e){function t(t,n,r,o){void 0===o&&(o=Number.POSITIVE_INFINITY),e.call(this,t),this.ish=n,this.resultSelector=r,this.concurrent=o,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return n(t,e),t.prototype._next=function(e){if(this.active<this.concurrent){var t=this.resultSelector,n=this.index++,r=this.ish,o=this.destination;this.active++,this._innerSub(r,o,t,e,n)}else this.buffer.push(e)},t.prototype._innerSub=function(e,t,n,r,i){this.add(o.subscribeToResult(this,e,r,i))},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},t.prototype.notifyNext=function(e,t,n,r,o){var i=this.resultSelector,s=this.destination;i?this.trySelectResult(e,t,n,r):s.next(t)},t.prototype.trySelectResult=function(e,t,n,r){var o,i=this.resultSelector,s=this.destination;try{o=i(e,t,n,r)}catch(e){s.error(e);return}s.next(o)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(r.OuterSubscriber);e.exports.MergeMapToSubscriber=a}),s("8fVz5",function(e,t){var n=e.exports&&e.exports.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},r=i("3FcLR"),o=i("6LPWz"),s=i("dZ9AU"),a=i("iwB6M");e.exports.mergeScan=function(e,t,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),function(r){return r.lift(new c(e,t,n))}};var c=function(){function e(e,t,n){this.accumulator=e,this.seed=t,this.concurrent=n}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.accumulator,this.seed,this.concurrent))},e}();e.exports.MergeScanOperator=c;var l=function(e){function t(t,n,r,o){e.call(this,t),this.accumulator=n,this.acc=r,this.concurrent=o,this.hasValue=!1,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return n(t,e),t.prototype._next=function(e){if(this.active<this.concurrent){var t=this.index++,n=r.tryCatch(this.accumulator)(this.acc,e),i=this.destination;n===o.errorObject?i.error(o.errorObject.e):(this.active++,this._innerSub(n,e,t))}else this.buffer.push(e)},t.prototype._innerSub=function(e,t,n){this.add(s.subscribeToResult(this,e,t,n))},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())},t.prototype.notifyNext=function(e,t,n,r,o){var i=this.destination;this.acc=t,this.hasValue=!0,i.next(t)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())},t}(a.OuterSubscriber);e.exports.MergeScanSubscriber=l}),s("f5yaK",function(e,t){var n=e.exports&&e.exports.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},r=i("augeV"),o=i("YgydF"),s=i("axeml"),a=i("8v4h5"),c=i("iY7u4"),l=function(e){function t(t,n){e.call(this),this.source=t,this.subjectFactory=n,this._refCount=0,this._isComplete=!1}return n(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new a.Subscription).add(this.source.subscribe(new d(this.getSubject(),this))),e.closed?(this._connection=null,e=a.Subscription.EMPTY):this._connection=e),e},t.prototype.refCount=function(){return c.refCount()(this)},t}(o.Observable);e.exports.ConnectableObservable=l;var u=l.prototype;e.exports.connectableObservableDescriptor={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:u._subscribe},_isComplete:{value:u._isComplete,writable:!0},getSubject:{value:u.getSubject},connect:{value:u.connect},refCount:{value:u.refCount}};var d=function(e){function t(t,n){e.call(this,t),this.connectable=n}return n(t,e),t.prototype._error=function(t){this._unsubscribe(),e.prototype._error.call(this,t)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},t}(r.SubjectSubscriber);(function(e){this.connectable=e}).prototype.call=function(e,t){var n=this.connectable;n._refCount++;var r=new p(e,n),o=t.subscribe(r);return r.closed||(r.connection=n.connect()),o};var p=function(e){function t(t,n){e.call(this,t),this.connectable=n}return n(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(!e){this.connection=null;return}this.connectable=null;var t=e._refCount;if(t<=0||(e._refCount=t-1,t>1)){this.connection=null;return}var n=this.connection,r=e._connection;this.connection=null,r&&(!n||r===n)&&r.unsubscribe()},t}(s.Subscriber)}),s("c17EK",function(e,t){var n=e.exports&&e.exports.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},r=i("e3P0W"),o=i("fvPwd"),s=i("iwB6M"),a=i("dZ9AU");e.exports.onErrorResumeNext=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return 1===e.length&&o.isArray(e[0])&&(e=e[0]),function(t){return t.lift(new c(e))}},e.exports.onErrorResumeNextStatic=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n=null;return 1===e.length&&o.isArray(e[0])&&(e=e[0]),n=e.shift(),new r.FromObservable(n,null).lift(new c(e))};var c=function(){function e(e){this.nextSources=e}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.nextSources))},e}(),l=function(e){function t(t,n){e.call(this,t),this.destination=t,this.nextSources=n}return n(t,e),t.prototype.notifyError=function(e,t){this.subscribeToNextSource()},t.prototype.notifyComplete=function(e){this.subscribeToNextSource()},t.prototype._error=function(e){this.subscribeToNextSource()},t.prototype._complete=function(){this.subscribeToNextSource()},t.prototype.subscribeToNextSource=function(){var e=this.nextSources.shift();e?this.add(a.subscribeToResult(this,e)):this.destination.complete()},t}(s.OuterSubscriber)}),s("5hER9",function(e,t){var n=e.exports&&e.exports.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},r=i("axeml");e.exports.pairwise=function(){return function(e){return e.lift(new o)}};var o=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new s(e))},e}(),s=function(e){function t(t){e.call(this,t),this.hasPrev=!1}return n(t,e),t.prototype._next=function(e){this.hasPrev?this.destination.next([this.prev,e]):this.hasPrev=!0,this.prev=e},t}(r.Subscriber)}),s("5JYSv",function(e,t){var n=e.exports&&e.exports.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},r=i("augeV"),o=i("8v4h5"),s=function(e){function t(){e.apply(this,arguments),this.value=null,this.hasNext=!1,this.hasCompleted=!1}return n(t,e),t.prototype._subscribe=function(t){return this.hasError?(t.error(this.thrownError),o.Subscription.EMPTY):this.hasCompleted&&this.hasNext?(t.next(this.value),t.complete(),o.Subscription.EMPTY):e.prototype._subscribe.call(this,t)},t.prototype.next=function(e){this.hasCompleted||(this.value=e,this.hasNext=!0)},t.prototype.error=function(t){this.hasCompleted||e.prototype.error.call(this,t)},t.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&e.prototype.next.call(this,this.value),e.prototype.complete.call(this)},t}(r.Subject);e.exports.AsyncSubject=s}),s("iiAcs",function(e,t){var n=e.exports&&e.exports.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},r=i("fvPwd"),o=i("HHFyQ"),s=i("iwB6M"),a=i("dZ9AU");e.exports.race=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];if(1===e.length)if(!r.isArray(e[0]))return e[0];else e=e[0];return new o.ArrayObservable(e).lift(new c)};var c=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new l(e))},e}();e.exports.RaceOperator=c;var l=function(e){function t(t){e.call(this,t),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}return n(t,e),t.prototype._next=function(e){this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{for(var n=0;n<t&&!this.hasFirst;n++){var r=e[n],o=a.subscribeToResult(this,r,r,n);this.subscriptions&&this.subscriptions.push(o),this.add(o)}this.observables=null}},t.prototype.notifyNext=function(e,t,n,r,o){if(!this.hasFirst){this.hasFirst=!0;for(var i=0;i<this.subscriptions.length;i++)if(i!==n){var s=this.subscriptions[i];s.unsubscribe(),this.remove(s)}this.subscriptions=null}this.destination.next(t)},t}(s.OuterSubscriber);e.exports.RaceSubscriber=l}),s("5AGP5",function(e,t){var n=e.exports&&e.exports.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},r=i("axeml"),o=i("b5CQv");e.exports.repeat=function(e){return void 0===e&&(e=-1),function(t){return 0===e?new o.EmptyObservable:e<0?t.lift(new s(-1,t)):t.lift(new s(e-1,t))}};var s=function(){function e(e,t){this.count=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.count,this.source))},e}(),a=function(e){function t(t,n,r){e.call(this,t),this.count=n,this.source=r}return n(t,e),t.prototype.complete=function(){if(!this.isStopped){var t=this.source,n=this.count;if(0===n)return e.prototype.complete.call(this);n>-1&&(this.count=n-1),t.subscribe(this._unsubscribeAndRecycle())}},t}(r.Subscriber)}),s("6GFHk",function(e,t){var n=e.exports&&e.exports.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},r=i("augeV"),o=i("3FcLR"),s=i("6LPWz"),a=i("iwB6M"),c=i("dZ9AU");e.exports.repeatWhen=function(e){return function(t){return t.lift(new l(e))}};var l=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.notifier,t))},e}(),u=function(e){function t(t,n,r){e.call(this,t),this.notifier=n,this.source=r,this.sourceIsBeingSubscribedTo=!0}return n(t,e),t.prototype.notifyNext=function(e,t,n,r,o){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)},t.prototype.notifyComplete=function(t){if(!1===this.sourceIsBeingSubscribedTo)return e.prototype.complete.call(this)},t.prototype.complete=function(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries||this.subscribeToRetries(),!this.retriesSubscription||this.retriesSubscription.closed)return e.prototype.complete.call(this);this._unsubscribeAndRecycle(),this.notifications.next()}},t.prototype._unsubscribe=function(){var e=this.notifications,t=this.retriesSubscription;e&&(e.unsubscribe(),this.notifications=null),t&&(t.unsubscribe(),this.retriesSubscription=null),this.retries=null},t.prototype._unsubscribeAndRecycle=function(){var t=this.notifications,n=this.retries,r=this.retriesSubscription;return this.notifications=null,this.retries=null,this.retriesSubscription=null,e.prototype._unsubscribeAndRecycle.call(this),this.notifications=t,this.retries=n,this.retriesSubscription=r,this},t.prototype.subscribeToRetries=function(){this.notifications=new r.Subject;var t=o.tryCatch(this.notifier)(this.notifications);if(t===s.errorObject)return e.prototype.complete.call(this);this.retries=t,this.retriesSubscription=c.subscribeToResult(this,t)},t}(a.OuterSubscriber)}),s("e6s15",function(e,t){var n=e.exports&&e.exports.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},r=i("axeml");e.exports.retry=function(e){return void 0===e&&(e=-1),function(t){return t.lift(new o(e,t))}};var o=function(){function e(e,t){this.count=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.count,this.source))},e}(),s=function(e){function t(t,n,r){e.call(this,t),this.count=n,this.source=r}return n(t,e),t.prototype.error=function(t){if(!this.isStopped){var n=this.source,r=this.count;if(0===r)return e.prototype.error.call(this,t);r>-1&&(this.count=r-1),n.subscribe(this._unsubscribeAndRecycle())}},t}(r.Subscriber)}),s("igrC3",function(e,t){var n=e.exports&&e.exports.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},r=i("augeV"),o=i("3FcLR"),s=i("6LPWz"),a=i("iwB6M"),c=i("dZ9AU");e.exports.retryWhen=function(e){return function(t){return t.lift(new l(e,t))}};var l=function(){function e(e,t){this.notifier=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.notifier,this.source))},e}(),u=function(e){function t(t,n,r){e.call(this,t),this.notifier=n,this.source=r}return n(t,e),t.prototype.error=function(t){if(!this.isStopped){var n=this.errors,i=this.retries,a=this.retriesSubscription;if(i)this.errors=null,this.retriesSubscription=null;else{if(n=new r.Subject,(i=o.tryCatch(this.notifier)(n))===s.errorObject)return e.prototype.error.call(this,s.errorObject.e);a=c.subscribeToResult(this,i)}this._unsubscribeAndRecycle(),this.errors=n,this.retries=i,this.retriesSubscription=a,n.next(t)}},t.prototype._unsubscribe=function(){var e=this.errors,t=this.retriesSubscription;e&&(e.unsubscribe(),this.errors=null),t&&(t.unsubscribe(),this.retriesSubscription=null),this.retries=null},t.prototype.notifyNext=function(e,t,n,r,o){var i=this.errors,s=this.retries,a=this.retriesSubscription;this.errors=null,this.retries=null,this.retriesSubscription=null,this._unsubscribeAndRecycle(),this.errors=i,this.retries=s,this.retriesSubscription=a,this.source.subscribe(this)},t}(a.OuterSubscriber)}),s("iY7u4",function(e,t){var n=e.exports&&e.exports.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},r=i("axeml");e.exports.refCount=function(){return function(e){return e.lift(new o(e))}};var o=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,t){var n=this.connectable;n._refCount++;var r=new s(e,n),o=t.subscribe(r);return r.closed||(r.connection=n.connect()),o},e}(),s=function(e){function t(t,n){e.call(this,t),this.connectable=n}return n(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(!e){this.connection=null;return}this.connectable=null;var t=e._refCount;if(t<=0||(e._refCount=t-1,t>1)){this.connection=null;return}var n=this.connection,r=e._connection;this.connection=null,r&&(!n||r===n)&&r.unsubscribe()},t}(r.Subscriber)}),s("4LrJQ",function(e,t){var n=e.exports&&e.exports.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},r=i("iwB6M"),o=i("dZ9AU");e.exports.sample=function(e){return function(t){return t.lift(new s(e))}};var s=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){var n=new a(e),r=t.subscribe(n);return r.add(o.subscribeToResult(n,this.notifier)),r},e}(),a=function(e){function t(){e.apply(this,arguments),this.hasValue=!1}return n(t,e),t.prototype._next=function(e){this.value=e,this.hasValue=!0},t.prototype.notifyNext=function(e,t,n,r,o){this.emitValue()},t.prototype.notifyComplete=function(){this.emitValue()},t.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))},t}(r.OuterSubscriber)}),s("jAcJW",function(e,t){var n=e.exports&&e.exports.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},r=i("axeml"),o=i("3u6GG");e.exports.sampleTime=function(e,t){return void 0===t&&(t=o.async),function(n){return n.lift(new s(e,t))}};var s=function(){function e(e,t){this.period=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.period,this.scheduler))},e}(),a=function(e){function t(t,n,r){e.call(this,t),this.period=n,this.scheduler=r,this.hasValue=!1,this.add(r.schedule(c,n,{subscriber:this,period:n}))}return n(t,e),t.prototype._next=function(e){this.lastValue=e,this.hasValue=!0},t.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))},t}(r.Subscriber);function c(e){var t=e.subscriber,n=e.period;t.notifyNext(),this.schedule(e,n)}}),s("4Lrrt",function(e,t){var n=e.exports&&e.exports.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},r=i("axeml"),o=i("3FcLR"),s=i("6LPWz");e.exports.sequenceEqual=function(e,t){return function(n){return n.lift(new a(e,t))}};var a=function(){function e(e,t){this.compareTo=e,this.comparor=t}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.compareTo,this.comparor))},e}();e.exports.SequenceEqualOperator=a;var c=function(e){function t(t,n,r){e.call(this,t),this.compareTo=n,this.comparor=r,this._a=[],this._b=[],this._oneComplete=!1,this.add(n.subscribe(new l(t,this)))}return n(t,e),t.prototype._next=function(e){this._oneComplete&&0===this._b.length?this.emit(!1):(this._a.push(e),this.checkValues())},t.prototype._complete=function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0},t.prototype.checkValues=function(){for(var e=this._a,t=this._b,n=this.comparor;e.length>0&&t.length>0;){var r=e.shift(),i=t.shift(),a=!1;n?(a=o.tryCatch(n)(r,i))===s.errorObject&&this.destination.error(s.errorObject.e):a=r===i,a||this.emit(!1)}},t.prototype.emit=function(e){var t=this.destination;t.next(e),t.complete()},t.prototype.nextB=function(e){this._oneComplete&&0===this._a.length?this.emit(!1):(this._b.push(e),this.checkValues())},t}(r.Subscriber);e.exports.SequenceEqualSubscriber=c;var l=function(e){function t(t,n){e.call(this,t),this.parent=n}return n(t,e),t.prototype._next=function(e){this.parent.nextB(e)},t.prototype._error=function(e){this.parent.error(e)},t.prototype._complete=function(){this.parent._complete()},t}(r.Subscriber)}),s("gVc40",function(e,t){var n=e.exports&&e.exports.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},r=i("axeml"),o=i("3X9I5");e.exports.single=function(e){return function(t){return t.lift(new s(e,t))}};var s=function(){function e(e,t){this.predicate=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.predicate,this.source))},e}(),a=function(e){function t(t,n,r){e.call(this,t),this.predicate=n,this.source=r,this.seenValue=!1,this.index=0}return n(t,e),t.prototype.applySingleValue=function(e){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=e)},t.prototype._next=function(e){var t=this.index++;this.predicate?this.tryNext(e,t):this.applySingleValue(e)},t.prototype.tryNext=function(e,t){try{this.predicate(e,t,this.source)&&this.applySingleValue(e)}catch(e){this.destination.error(e)}},t.prototype._complete=function(){var e=this.destination;this.index>0?(e.next(this.seenValue?this.singleValue:void 0),e.complete()):e.error(new o.EmptyError)},t}(r.Subscriber)}),s("bFxBy",function(e,t){var n=e.exports&&e.exports.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},r=i("axeml");e.exports.skip=function(e){return function(t){return t.lift(new o(e))}};var o=function(){function e(e){this.total=e}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.total))},e}(),s=function(e){function t(t,n){e.call(this,t),this.total=n,this.count=0}return n(t,e),t.prototype._next=function(e){++this.count>this.total&&this.destination.next(e)},t}(r.Subscriber)}),s("3nfDH",function(e,t){var n=e.exports&&e.exports.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},r=i("axeml"),o=i("2g0GA");e.exports.skipLast=function(e){return function(t){return t.lift(new s(e))}};var s=function(){function e(e){if(this._skipCount=e,this._skipCount<0)throw new o.ArgumentOutOfRangeError}return e.prototype.call=function(e,t){return 0===this._skipCount?t.subscribe(new r.Subscriber(e)):t.subscribe(new a(e,this._skipCount))},e}(),a=function(e){function t(t,n){e.call(this,t),this._skipCount=n,this._count=0,this._ring=Array(n)}return n(t,e),t.prototype._next=function(e){var t=this._skipCount,n=this._count++;if(n<t)this._ring[n]=e;else{var r=n%t,o=this._ring,i=o[r];o[r]=e,this.destination.next(i)}},t}(r.Subscriber)}),s("lDurq",function(e,t){var n=e.exports&&e.exports.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},r=i("iwB6M"),o=i("dZ9AU");e.exports.skipUntil=function(e){return function(t){return t.lift(new s(e))}};var s=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.notifier))},e}(),a=function(e){function t(t,n){e.call(this,t),this.hasValue=!1,this.isInnerStopped=!1,this.add(o.subscribeToResult(this,n))}return n(t,e),t.prototype._next=function(t){this.hasValue&&e.prototype._next.call(this,t)},t.prototype._complete=function(){this.isInnerStopped?e.prototype._complete.call(this):this.unsubscribe()},t.prototype.notifyNext=function(e,t,n,r,o){this.hasValue=!0},t.prototype.notifyComplete=function(){this.isInnerStopped=!0,this.isStopped&&e.prototype._complete.call(this)},t}(r.OuterSubscriber)}),s("a1Ene",function(e,t){var n=e.exports&&e.exports.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},r=i("iwB6M"),o=i("dZ9AU");e.exports.switchMapTo=function(e,t){return function(n){return n.lift(new s(e,t))}};var s=function(){function e(e,t){this.observable=e,this.resultSelector=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.observable,this.resultSelector))},e}(),a=function(e){function t(t,n,r){e.call(this,t),this.inner=n,this.resultSelector=r,this.index=0}return n(t,e),t.prototype._next=function(e){var t=this.innerSubscription;t&&t.unsubscribe(),this.add(this.innerSubscription=o.subscribeToResult(this,this.inner,e,this.index++))},t.prototype._complete=function(){var t=this.innerSubscription;(!t||t.closed)&&e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.innerSubscription=null},t.prototype.notifyComplete=function(t){this.remove(t),this.innerSubscription=null,this.isStopped&&e.prototype._complete.call(this)},t.prototype.notifyNext=function(e,t,n,r,o){var i=this.resultSelector,s=this.destination;i?this.tryResultSelector(e,t,n,r):s.next(t)},t.prototype.tryResultSelector=function(e,t,n,r){var o,i=this.resultSelector,s=this.destination;try{o=i(e,t,n,r)}catch(e){s.error(e);return}s.next(o)},t}(r.OuterSubscriber)}),s("ghTt7",function(e,t){var n=e.exports&&e.exports.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},r=i("iwB6M"),o=i("dZ9AU");e.exports.takeUntil=function(e){return function(t){return t.lift(new s(e))}};var s=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.notifier))},e}(),a=function(e){function t(t,n){e.call(this,t),this.notifier=n,this.add(o.subscribeToResult(this,n))}return n(t,e),t.prototype.notifyNext=function(e,t,n,r,o){this.complete()},t.prototype.notifyComplete=function(){},t}(r.OuterSubscriber)}),s("6ssFC",function(e,t){var n=e.exports&&e.exports.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},r=i("axeml");e.exports.takeWhile=function(e){return function(t){return t.lift(new o(e))}};var o=function(){function e(e){this.predicate=e}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.predicate))},e}(),s=function(e){function t(t,n){e.call(this,t),this.predicate=n,this.index=0}return n(t,e),t.prototype._next=function(e){var t,n=this.destination;try{t=this.predicate(e,this.index++)}catch(e){n.error(e);return}this.nextOrComplete(e,t)},t.prototype.nextOrComplete=function(e,t){var n=this.destination;t?n.next(e):n.complete()},t}(r.Subscriber)}),s("jb2dN",function(e,t){var n=e.exports&&e.exports.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},r=i("iwB6M"),o=i("dZ9AU");e.exports.defaultThrottleConfig={leading:!0,trailing:!1},e.exports.throttle=function(t,n){return void 0===n&&(n=e.exports.defaultThrottleConfig),function(e){return e.lift(new s(t,n.leading,n.trailing))}};var s=function(){function e(e,t,n){this.durationSelector=e,this.leading=t,this.trailing=n}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.durationSelector,this.leading,this.trailing))},e}(),a=function(e){function t(t,n,r,o){e.call(this,t),this.destination=t,this.durationSelector=n,this._leading=r,this._trailing=o,this._hasTrailingValue=!1}return n(t,e),t.prototype._next=function(e){if(this.throttled)this._trailing&&(this._hasTrailingValue=!0,this._trailingValue=e);else{var t=this.tryDurationSelector(e);t&&this.add(this.throttled=o.subscribeToResult(this,t)),this._leading&&(this.destination.next(e),this._trailing&&(this._hasTrailingValue=!0,this._trailingValue=e))}},t.prototype.tryDurationSelector=function(e){try{return this.durationSelector(e)}catch(e){return this.destination.error(e),null}},t.prototype._unsubscribe=function(){var e=this.throttled;this._trailingValue,this._hasTrailingValue,this._trailing,this._trailingValue=null,this._hasTrailingValue=!1,e&&(this.remove(e),this.throttled=null,e.unsubscribe())},t.prototype._sendTrailing=function(){var e=this.destination,t=this.throttled,n=this._trailing,r=this._trailingValue,o=this._hasTrailingValue;t&&n&&o&&(e.next(r),this._trailingValue=null,this._hasTrailingValue=!1)},t.prototype.notifyNext=function(e,t,n,r,o){this._sendTrailing(),this._unsubscribe()},t.prototype.notifyComplete=function(){this._sendTrailing(),this._unsubscribe()},t}(r.OuterSubscriber)}),s("9Kcfz",function(e,t){var n=e.exports&&e.exports.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},r=i("axeml"),o=i("3u6GG"),s=i("jb2dN");e.exports.throttleTime=function(e,t,n){return void 0===t&&(t=o.async),void 0===n&&(n=s.defaultThrottleConfig),function(r){return r.lift(new a(e,t,n.leading,n.trailing))}};var a=function(){function e(e,t,n,r){this.duration=e,this.scheduler=t,this.leading=n,this.trailing=r}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.duration,this.scheduler,this.leading,this.trailing))},e}(),c=function(e){function t(t,n,r,o,i){e.call(this,t),this.duration=n,this.scheduler=r,this.leading=o,this.trailing=i,this._hasTrailingValue=!1,this._trailingValue=null}return n(t,e),t.prototype._next=function(e){this.throttled?this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(l,this.duration,{subscriber:this})),this.leading&&this.destination.next(e))},t.prototype.clearThrottle=function(){var e=this.throttled;e&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),e.unsubscribe(),this.remove(e),this.throttled=null)},t}(r.Subscriber);function l(e){e.subscriber.clearThrottle()}}),s("hkdng",function(e,t){var n=e.exports&&e.exports.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},r=i("3u6GG"),o=i("kVeeY"),s=i("iwB6M"),a=i("dZ9AU");e.exports.timeoutWith=function(e,t,n){return void 0===n&&(n=r.async),function(r){var i=o.isDate(e),s=i?e-n.now():Math.abs(e);return r.lift(new c(s,i,t,n))}};var c=function(){function e(e,t,n,r){this.waitFor=e,this.absoluteTimeout=t,this.withObservable=n,this.scheduler=r}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},e}(),l=function(e){function t(t,n,r,o,i){e.call(this,t),this.absoluteTimeout=n,this.waitFor=r,this.withObservable=o,this.scheduler=i,this.action=null,this.scheduleTimeout()}return n(t,e),t.dispatchTimeout=function(e){var t=e.withObservable;e._unsubscribeAndRecycle(),e.add(a.subscribeToResult(e,t))},t.prototype.scheduleTimeout=function(){var e=this.action;e?this.action=e.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(t.dispatchTimeout,this.waitFor,this))},t.prototype._next=function(t){this.absoluteTimeout||this.scheduleTimeout(),e.prototype._next.call(this,t)},t.prototype._unsubscribe=function(){this.action=null,this.scheduler=null,this.withObservable=null},t}(s.OuterSubscriber)}),s("4MF2G",function(e,t){var n=e.exports&&e.exports.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},r=i("axeml"),o=i("augeV");e.exports.windowCount=function(e,t){return void 0===t&&(t=0),function(n){return n.lift(new s(e,t))}};var s=function(){function e(e,t){this.windowSize=e,this.startWindowEvery=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.windowSize,this.startWindowEvery))},e}(),a=function(e){function t(t,n,r){e.call(this,t),this.destination=t,this.windowSize=n,this.startWindowEvery=r,this.windows=[new o.Subject],this.count=0,t.next(this.windows[0])}return n(t,e),t.prototype._next=function(e){for(var t=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,n=this.destination,r=this.windowSize,i=this.windows,s=i.length,a=0;a<s&&!this.closed;a++)i[a].next(e);var c=this.count-r+1;if(c>=0&&c%t==0&&!this.closed&&i.shift().complete(),++this.count%t==0&&!this.closed){var l=new o.Subject;i.push(l),n.next(l)}},t.prototype._error=function(e){var t=this.windows;if(t)for(;t.length>0&&!this.closed;)t.shift().error(e);this.destination.error(e)},t.prototype._complete=function(){var e=this.windows;if(e)for(;e.length>0&&!this.closed;)e.shift().complete();this.destination.complete()},t.prototype._unsubscribe=function(){this.count=0,this.windows=null},t}(r.Subscriber)}),s("7ssQI",function(e,t){var n=e.exports&&e.exports.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},r=i("augeV"),o=i("3u6GG"),s=i("axeml"),a=i("8biLX"),c=i("5Dgek");e.exports.windowTime=function(e){var t=o.async,n=null,r=Number.POSITIVE_INFINITY;return c.isScheduler(arguments[3])&&(t=arguments[3]),c.isScheduler(arguments[2])?t=arguments[2]:a.isNumeric(arguments[2])&&(r=arguments[2]),c.isScheduler(arguments[1])?t=arguments[1]:a.isNumeric(arguments[1])&&(n=arguments[1]),function(o){return o.lift(new l(e,n,r,t))}};var l=function(){function e(e,t,n,r){this.windowTimeSpan=e,this.windowCreationInterval=t,this.maxWindowSize=n,this.scheduler=r}return e.prototype.call=function(e,t){return t.subscribe(new d(e,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))},e}(),u=function(e){function t(){e.apply(this,arguments),this._numberOfNextedValues=0}return n(t,e),t.prototype.next=function(t){this._numberOfNextedValues++,e.prototype.next.call(this,t)},Object.defineProperty(t.prototype,"numberOfNextedValues",{get:function(){return this._numberOfNextedValues},enumerable:!0,configurable:!0}),t}(r.Subject),d=function(e){function t(t,n,r,o,i){e.call(this,t),this.destination=t,this.windowTimeSpan=n,this.windowCreationInterval=r,this.maxWindowSize=o,this.scheduler=i,this.windows=[];var s=this.openWindow();null!==r&&r>=0?(this.add(i.schedule(f,n,{subscriber:this,window:s,context:null})),this.add(i.schedule(h,r,{windowTimeSpan:n,windowCreationInterval:r,subscriber:this,scheduler:i}))):this.add(i.schedule(p,n,{subscriber:this,window:s,windowTimeSpan:n}))}return n(t,e),t.prototype._next=function(e){for(var t=this.windows,n=t.length,r=0;r<n;r++){var o=t[r];!o.closed&&(o.next(e),o.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(o))}},t.prototype._error=function(e){for(var t=this.windows;t.length>0;)t.shift().error(e);this.destination.error(e)},t.prototype._complete=function(){for(var e=this.windows;e.length>0;){var t=e.shift();t.closed||t.complete()}this.destination.complete()},t.prototype.openWindow=function(){var e=new u;return this.windows.push(e),this.destination.next(e),e},t.prototype.closeWindow=function(e){e.complete();var t=this.windows;t.splice(t.indexOf(e),1)},t}(s.Subscriber);function p(e){var t=e.subscriber,n=e.windowTimeSpan,r=e.window;r&&t.closeWindow(r),e.window=t.openWindow(),this.schedule(e,n)}function h(e){var t=e.windowTimeSpan,n=e.subscriber,r=e.scheduler,o=e.windowCreationInterval,i=n.openWindow(),s={action:this,subscription:null};s.subscription=r.schedule(f,t,{subscriber:n,window:i,context:s}),this.add(s.subscription),this.schedule(e,o)}function f(e){var t=e.subscriber,n=e.window,r=e.context;r&&r.action&&r.subscription&&r.action.remove(r.subscription),t.closeWindow(n)}}),s("Cr5z9",function(e,t){var n=e.exports&&e.exports.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},r=i("augeV"),o=i("8v4h5"),s=i("3FcLR"),a=i("6LPWz"),c=i("iwB6M"),l=i("dZ9AU");e.exports.windowToggle=function(e,t){return function(n){return n.lift(new u(e,t))}};var u=function(){function e(e,t){this.openings=e,this.closingSelector=t}return e.prototype.call=function(e,t){return t.subscribe(new d(e,this.openings,this.closingSelector))},e}(),d=function(e){function t(t,n,r){e.call(this,t),this.openings=n,this.closingSelector=r,this.contexts=[],this.add(this.openSubscription=l.subscribeToResult(this,n,n))}return n(t,e),t.prototype._next=function(e){var t=this.contexts;if(t)for(var n=t.length,r=0;r<n;r++)t[r].window.next(e)},t.prototype._error=function(t){var n=this.contexts;if(this.contexts=null,n)for(var r=n.length,o=-1;++o<r;){var i=n[o];i.window.error(t),i.subscription.unsubscribe()}e.prototype._error.call(this,t)},t.prototype._complete=function(){var t=this.contexts;if(this.contexts=null,t)for(var n=t.length,r=-1;++r<n;){var o=t[r];o.window.complete(),o.subscription.unsubscribe()}e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.contexts;if(this.contexts=null,e)for(var t=e.length,n=-1;++n<t;){var r=e[n];r.window.unsubscribe(),r.subscription.unsubscribe()}},t.prototype.notifyNext=function(e,t,n,i,c){if(e===this.openings){var u=this.closingSelector,d=s.tryCatch(u)(t);if(d===a.errorObject)return this.error(a.errorObject.e);var p=new r.Subject,h=new o.Subscription,f={window:p,subscription:h};this.contexts.push(f);var m=l.subscribeToResult(this,d,f);m.closed?this.closeWindow(this.contexts.length-1):(m.context=f,h.add(m)),this.destination.next(p)}else this.closeWindow(this.contexts.indexOf(e))},t.prototype.notifyError=function(e){this.error(e)},t.prototype.notifyComplete=function(e){e!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(e.context))},t.prototype.closeWindow=function(e){if(-1!==e){var t=this.contexts,n=t[e],r=n.window,o=n.subscription;t.splice(e,1),r.complete(),o.unsubscribe()}},t}(c.OuterSubscriber)}),s("5A6fs",function(e,t){var n=e.exports&&e.exports.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},r=i("augeV"),o=i("3FcLR"),s=i("6LPWz"),a=i("iwB6M"),c=i("dZ9AU");e.exports.windowWhen=function(e){return function(t){return t.lift(new l(e))}};var l=function(){function e(e){this.closingSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.closingSelector))},e}(),u=function(e){function t(t,n){e.call(this,t),this.destination=t,this.closingSelector=n,this.openWindow()}return n(t,e),t.prototype.notifyNext=function(e,t,n,r,o){this.openWindow(o)},t.prototype.notifyError=function(e,t){this._error(e)},t.prototype.notifyComplete=function(e){this.openWindow(e)},t.prototype._next=function(e){this.window.next(e)},t.prototype._error=function(e){this.window.error(e),this.destination.error(e),this.unsubscribeClosingNotification()},t.prototype._complete=function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()},t.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()},t.prototype.openWindow=function(e){void 0===e&&(e=null),e&&(this.remove(e),e.unsubscribe());var t=this.window;t&&t.complete();var n=this.window=new r.Subject;this.destination.next(n);var i=o.tryCatch(this.closingSelector)();if(i===s.errorObject){var a=s.errorObject.e;this.destination.error(a),this.window.error(a)}else this.add(this.closingNotification=c.subscribeToResult(this,i))},t}(a.OuterSubscriber)}),s("6zLY4",function(e,t){var n=e.exports&&e.exports.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},r=i("iwB6M"),o=i("dZ9AU");e.exports.withLatestFrom=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return function(t){var n;return"function"==typeof e[e.length-1]&&(n=e.pop()),t.lift(new s(e,n))}};var s=function(){function e(e,t){this.observables=e,this.project=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.observables,this.project))},e}(),a=function(e){function t(t,n,r){e.call(this,t),this.observables=n,this.project=r,this.toRespond=[];var i=n.length;this.values=Array(i);for(var s=0;s<i;s++)this.toRespond.push(s);for(var s=0;s<i;s++){var a=n[s];this.add(o.subscribeToResult(this,a,a,s))}}return n(t,e),t.prototype.notifyNext=function(e,t,n,r,o){this.values[n]=t;var i=this.toRespond;if(i.length>0){var s=i.indexOf(n);-1!==s&&i.splice(s,1)}},t.prototype.notifyComplete=function(){},t.prototype._next=function(e){if(0===this.toRespond.length){var t=[e].concat(this.values);this.project?this._tryProject(t):this.destination.next(t)}},t.prototype._tryProject=function(e){var t;try{t=this.project.apply(this,e)}catch(e){this.destination.error(e);return}this.destination.next(t)},t}(r.OuterSubscriber)}),s("5KKq4",function(e,t){i("42omo"),i("2oer2"),i("cbr0D"),i("eS4Za"),i("fuLIO")}),s("j2dS3",function(e,t){e.exports.updateParams=function(e,t){return{type:e.type.name||e.type,attrs:{...e.attrs,parameters:{...e.attrs.parameters,...t}}}},e.exports.filterADNodesByType=function(e,t){let n=[];return!function e(t,n){for(let r of Object.keys(t)){let o=t[r];n(r,o),null!==o&&"object"==typeof o&&e(t[r],n)}}(e,(e,r)=>{r&&r.type===t&&n.push(r)}),n}}),s("7okiz",function(t,n){var r,o,s=i("42omo"),a=i("fUN4A"),c=i("6O2BV"),l=i("hFueH");let u=()=>null,d=(0,i("jmjWc").LoadableAfterPaint)({__loadable_id__:"QOMzx",name:"RedactedPlaceholderExtensionHandler",loader:async()=>{let{RedactedPlaceholder:e}=await i("cjG4e");return e},loading:()=>e(s).createElement(u,null)});var p=i("5a4cC"),h=i("9m03g"),f=i("fuLIO"),m=i("7NX4e"),y=i("bQCqI"),b=i("eS4Za"),g=i("6v9Za"),x=i("2LCBF"),E=i("hKeSi"),v=i("e1Stz"),_=i("e8Lxy"),w=i("fBjVq");let I=(0,i("1DWH0").default)()(class extends s.Component{async componentDidMount(){let{createAnalyticsEvent:e,extensionKey:t,attributes:n,node:r}=this.props;if(e){let o=await (0,i("2E7zk").getJiraHostingOption)(t,r?.parameters?.macroParams?.serverId?.value,!0);e({type:"sendTrackEvent",data:{action:"viewed",actionSubject:"macro",actionSubjectId:t,source:"viewPageScreen",attributes:{...n,pageLoadInfo:(0,i("78QFu").getUniquePageLoadId)(),jiraHostingOption:o}}}).fire()}}render(){let{children:t}=this.props;return e(s).createElement(s.Fragment,null,t)}});i("2oer2");var S=i("cbr0D"),T=i("cYJC5");let C=({hasADF:t,macroDefaultProps:n,cloudId:r,userId:o,isPreviewMode:i,shouldLoadAfterPaint:a})=>t?a||i?e(s).createElement(T.LazyCreateFromTemplateLoader,{userId:o,cloudId:r,macroDefaultProps:n,isPreviewMode:i}):e(s).createElement(T.CreateFromTemplateLoader,{userId:o,cloudId:r,macroDefaultProps:n,isPreviewMode:i}):e(s).createElement(f.LegacyMacroRendererQuery,n);var P=i("l7BGZ");let N=({hasADF:t,macroDefaultProps:n,shouldLoadAfterPaint:r})=>{if(!t)return e(s).createElement(f.LegacyMacroRendererQuery,n);let{node:o}=n,a=(0,i("6mEZ3").extensionToADF)(o);return r?e(s).createElement(P.LazyLiveSearchLoader,{macroNode:a}):e(s).createElement(P.LiveSearchLoader,{macroNode:a})};var O=i("dwS6P");let A=({adf:t,macroDefaultProps:n,cloudId:r,userId:o,shouldLoadAfterPaint:i})=>t?i?e(s).createElement(O.LazyTableOfContentsLoader,{userId:o,cloudId:r,adf:t,macroDefaultProps:n}):e(s).createElement(O.TableOfContentsLoader,{userId:o,cloudId:r,adf:t,macroDefaultProps:n}):e(s).createElement(f.LegacyMacroRendererQuery,n);var M=i("dx8CK");let R=(0,i("2XqLN").default)(e=>{let t=e;if("string"==typeof e)try{t=JSON.parse(e)}catch(e){t={version:1,type:"doc",content:[]}}return t}),k=({adf:e,extensionParams:t,referentialityDataSourceProvider:n,children:r})=>{let o=R(e),{references:i}=(0,M.useReference)({adf:o,extensionParams:t,dataSourceProvider:n});return r({references:i})};var D=((r=D||{}).None="none",r.Mixed="mixed",r.Bullet="bullet",r.Circle="circle",r.Square="square",r.Number="number",r),F=((o=F||{}).Brackets="brackets",o.Braces="braces",o.Pipe="pipe",o);let j=(e,t,n,r)=>{let{minLevel:o,maxLevel:i,outline:s,type:a,printable:c,style:l,separator:u,include:d,exclude:p,indent:h}=t,f={include:d?.value.length>0,exclude:p?.value.length>0,class:t.class?.value.length>0,indent:h?.value.length>0},m=Object.values(F).includes(u?.value)?u?.value:"invalid",y=Object.values(D).includes(l?.value)?l?.value:"invalid",b={};a?"flat"===a.value?b.separator=m:"list"===a.value&&(b.style=y):b.style="mixed";let g={minLevel:parseInt(o?.value)||1,maxLevel:parseInt(i?.value)||6,outline:s?.value==="true",printable:c?.value==="false"||!0,type:a?.value==="flat"?"flat":"list"};n({type:"sendTrackEvent",data:{action:"viewed",actionSubject:"macro",actionSubjectId:e,source:"on page view",attributes:{pageID:r,...f,...b,...g},eventType:"track"}}).fire()},L={insertCss:e=>e._insertCss()},V=({adf:e,contentId:t,appearance:n,showTemplateVariablesInPreview:r,showTemplateInputInPreview:o,spaceKey:s,shouldIncludeMacroHandlers:c=!0,macroRenderedOutput:l,shouldIncludeMacroWithReferencesHandlers:u=!1,referentialityDataSourceProvider:d,fromFabricEditor:p=!1,isPreviewMode:h=!1,contentType:f,mediaToken:m,annotationProvider:b,isInEditorRendererView:g},x)=>{let E=o?S.getTemplateVariableInputExtensionHandler:S.getTemplateExtensionHandler,v=r?{[i("8pcS0").EXTENSION_TYPE.TEMPLATE]:E}:{},_=u?{[i("8pcS0").EXTENSION_TYPE.MACRO_WITH_REFERENCES]:H({adf:e,referentialityDataSourceProvider:d})}:{};return c?{[i("8pcS0").EXTENSION_TYPE.MACRO_CORE]:q({adf:e,appearance:n,contentId:t,showTemplateVariablesInPreview:r,showTemplateInputInPreview:o,spaceKey:s,macroRenderedOutput:l,referentialityDataSourceProvider:d,fromFabricEditor:p,isPreviewMode:h,contentType:f,mediaToken:m,annotationProvider:b,isInEditorRendererView:g},x),[i("8pcS0").EXTENSION_TYPE.MIGRATION]:(0,y.getMigrationExtHandlerForRenderer)({contentId:t,contextProviders:{ClassicEditorContextProvider:a.ClassicEditorContextProviderLazyLoader}}),..._,...v}:{}},U={getExtensionHandlers:V,EditorLoaderLoader:l.default},K=(e,t)=>{if(!window.__SSR_RENDERED__||!window?.__SSR_MACROS_INFO__)return;let{extensionKey:n}=t;e?(window.__SSR_MACROS_INFO__.successes[n]=(window.__SSR_MACROS_INFO__.successes[n]??0)+1,window.__SSR_MACROS_INFO__.successCount+=1):(window.__SSR_MACROS_INFO__.failures[n]=(window.__SSR_MACROS_INFO__.failures[n]??0)+1,window.__SSR_MACROS_INFO__.failureCount+=1)},$=e=>{let{attributes:{macroId:t}}=e;return!!window?.__LEGACY_MACRO_RENDERED_OUTPUT__?.find(e=>e.key===t)},H=({adf:t,referentialityDataSourceProvider:n})=>(r,o)=>e(s).createElement(k,{adf:t,extensionParams:r,referentialityDataSourceProvider:n},o),q=({adf:t,contentId:n,appearance:r,showTemplateVariablesInPreview:o,showTemplateInputInPreview:a,spaceKey:l,macroRenderedOutput:u,referentialityDataSourceProvider:y,fromFabricEditor:S,isPreviewMode:T,mediaToken:P,annotationProvider:O,isInEditorRendererView:M},R)=>(0,b.createMacroExtensionHandler)((b,D)=>{let{extensionKey:F}=b,V=(0,i("Qcu7n").resolveQuestionsMacroExtensionKey)(F);V!==F&&(F=V,b={...b,extensionKey:V});let H=(0,i("5kjCz").getMacroAttributesFromADFNode)(b),q=b?.parameters?.macroParams,G=D?.[0]?.actions,W=b?.type==="bodiedExtension"&&M;t=M&&!t&&D?D?.[0]:t;let B={extensionType:b?.type,..."excerpt-include"===F?{isExcerptNamePresent:!!q?.name}:void 0,..."gadget"===F&&q?.url?.value&&{gadgetUrl:new URL(q.url.value,location.origin).pathname}},z="redactedMacroPlaceholder"===F?{extensionKey:q?.redactedMacroPluginKey?.value||q?.redactedMacroExtensionKey?.value}:void 0,Y=q?.isMissingRequiredParameters?.value,Q=(a,y,I)=>{let k={...a,appearance:r},D=b?.parameters?.macroOutput;switch("toc"===F&&q&&R&&j(F,q,R,n),F){case"redactedMacroPlaceholder":return e(s).createElement(d,{...a,redactedAttributes:z});case"details":return e(s).createElement(E.DetailsExtensionHandler,{...a,spaceKey:l,Renderer:w.default,isLegacyRenderer:!0,annotationProvider:O});case"excerpt":return e(s).createElement(x.ExcerptExtensionHandler,{...k,spaceKey:l,Renderer:w.default,isLegacyRenderer:!0,mediaToken:P,annotationProvider:O});case"expand":return e(s).createElement(g.ExpandExtensionHandler,{...a,Renderer:w.default,annotationProvider:O,isLegacyRenderer:!0});case"create-from-template":return e(s).createElement(C,{hasADF:!!t,macroDefaultProps:a,cloudId:y,userId:I,isPreviewMode:T,shouldLoadAfterPaint:S});case"toc":return e(s).createElement(A,{adf:t,macroDefaultProps:a,cloudId:y,userId:I,shouldLoadAfterPaint:S});case"livesearch":return e(s).createElement(N,{hasADF:!!t,macroDefaultProps:a,shouldLoadAfterPaint:S});case"anchor":return e(s).createElement(i("l86Zj").AnchorExtensionHandler,{...a,isSSR:!1});case"excerpt-include":if(n)return e(s).createElement(c.ClassicEditorContextProviderLoader,null,e(s).createElement(m.ExcerptIncludeExtensionHandler,{...a,Renderer:_.PageContentRenderer}));case"detailssummary":return e(s).createElement(c.ClassicEditorContextProviderLoader,{isWithinEditor:!1},e(s).createElement(v.PagePropertiesReportRenderer,{macroDefaultProps:a,macroParams:q}));case"profile-picture":return e(s).createElement(h.ProfilePictureMacroHandler,{macroDefaultProps:a,macroParams:b?.parameters?.macroParams});case"profile":return e(s).createElement(p.UserProfileMacroHandler,{macroDefaultProps:a,macroParams:b?.parameters?.macroParams});case"questionslist-macro":default:let L=window.__SSR_RENDERED__&&$(a)&&!Y;return K(L,a),e(s).createElement(i("hMRhJ").RendererExtensionContext.Provider,{value:U},W?e(s).createElement(f.DebouncedLegacyMacroRendererQuery,{...a,isTemplateEditorRenderer:o,macroRenderedOutputFromSSR:L&&u,macroOutput:D,isPreviewMode:T,isInEditorRendererView:M}):e(s).createElement(f.LegacyMacroRendererQuery,{...a,isTemplateEditorRenderer:o,macroRenderedOutputFromSSR:L&&u,macroOutput:D,isPreviewMode:T}));case"questionslist-macro-native":return e(s).createElement(i("9JyIJ").GlobalQuestionsListMacroHandler,{macroDefaultProps:a,macroParams:b?.parameters?.macroParams})}};return e(s).createElement(i("lspPP").RendererActionsContext,null,e(s).createElement(k,{adf:t,extensionParams:b,referentialityDataSourceProvider:y},({references:t})=>{let r={node:b,references:t,contentId:n,showTemplateVariablesInPreview:o||!1,showTemplateInputInPreview:a||!1,spaceKey:l||"",mode:i("5kjCz").RENDERER,context:L,extensionKey:F,attributes:H,multiBodiedExtensionActions:G};return e(s).createElement(s.Fragment,null,e(s).createElement(i("4KFTW").MacroExperienceStart,{contentId:n,name:(0,i("5kjCz").getExperienceName)(i("5kjCz").RENDERER,b),mode:i("5kjCz").RENDERER,extensionKey:F,attributes:H,timeout:i("aJPUt").ExperienceTimeout.MACRO_LOAD}),e(s).createElement(I,{extensionKey:F,attributes:{...B,...z},node:b},e(s).createElement(i("ge2sX").SessionData,null,({cloudId:e,userId:t})=>Q(r,e,t))))}))});t.exports.getExtensionHandlers=V}),s("5bak6",function(e,t){var n=i("1c598");e.exports.createForgeMacroExtensionData=({contentId:e,contentType:t,spaceKey:n,spaceId:r,isLivePage:o,templateId:s})=>({type:"macro",content:{id:e,type:t,subtype:o?"live":null},space:{key:n,id:r},...s&&(0,i("9wGTI").fg)("forge-ui-includes-template-editor-extension-data")?{template:{id:s}}:{}}),e.exports.createForgeUIAnalyticsContext=function({objectId:e,objectType:t,containerId:n,containerType:r}){return{objectId:e,objectType:t||void 0,containerId:n||void 0,containerType:r}},e.exports.environmentToForgeProductEnvironment=function(e){return"localhost"===window.location.hostname?n.ProductEnvironment.DEVELOPMENT:"STAGING"===e?n.ProductEnvironment.STAGING:"PRODUCTION"===e?n.ProductEnvironment.PRODUCTION:n.ProductEnvironment.DEVELOPMENT}}),s("cbr0D",function(t,n){var r=i("42omo");t.exports.getTemplateExtensionHandler=t=>{if(!t)return null;let{extensionKey:n,parameters:o}=t;return n===i("8pcS0").EXTENSION_KEY.TEMPLATE?e(r).createElement(i("3JqyB").TemplateVariableComponent,{parameters:o}):null},t.exports.getTemplateVariableInputExtensionHandler=t=>{if(!t)return null;let{extensionKey:n,parameters:o}=t;return n===i("8pcS0").EXTENSION_KEY.TEMPLATE?e(r).createElement(i("2igSQ").TemplateVariableInput,{parameters:o}):null}}),s("7y0YZ",function(e,t){let n=(0,i("jmjWc").LoadablePaint)({__loadable_id__:"skFyW",name:"InvalidExtensionLoader",loader:async()=>(await i("efhBi")).InvalidExtension});e.exports.InvalidExtensionLoader=n}),s("6842f",function(t,n){var r=i("42omo"),o=i("j1Ss3");let s=({link:t,id:n,collection:o,contentId:s,mode:a,extensionKey:c,node:l,...u})=>{let{data:d,loading:p,error:h}=(0,i("xQxzY").useQuery)((0,i("eSUdr").default)`query InlineImageQuery($contentId:ID){content(id:$contentId){nodes{id body{atlas_doc_format{mediaToken{token}}}}}mediaConfiguration{clientId fileStoreUrl}}`,{variables:{contentId:s}});if(p)return null;let f=d?.content?.nodes?.[0]?.body?.atlas_doc_format?.mediaToken?.token,m=d?.mediaConfiguration?.clientId,y=d?.mediaConfiguration?.fileStoreUrl,b=(0,i("5kjCz").getMacroAttributesFromADFNode)(l);return e(r).createElement("div",{"data-testid":"inline-image",style:{display:"inline-block"}},e(r).createElement(i("fHdcj").InlineImageComponent,{...u,id:n,collection:o,link:t,token:f,clientId:m,baseUrl:y}),h?e(r).createElement(i("JbVPK").MacroExperienceFailure,{name:(0,i("5kjCz").getExperienceName)(a,l),contentId:s,extensionKey:c,mode:a,error:h||Error(`${c} failed to render. InlineImage query data is empty`),attributes:b,source:"InlineImage"}):e(r).createElement(i("bX5uj").MacroExperienceSuccess,{name:(0,i("5kjCz").getExperienceName)(a,l),contentId:s,extensionKey:c,mode:a,attributes:b}))};t.exports.InlineImage=t=>e(r).createElement(o.ApolloProvider,{client:(0,i("hp2SH").getApolloClient)()},e(r).createElement(i("1kHsc").ExperienceTrackerContext.Provider,{value:(0,i("fGzMp").getExperienceTracker)()},e(r).createElement(s,t)))}),s("3X9I5",function(e,t){var n=e.exports&&e.exports.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},r=function(e){function t(){var t=e.call(this,"no elements in sequence");this.name=t.name="EmptyError",this.stack=t.stack,this.message=t.message}return n(t,e),t}(Error);e.exports.EmptyError=r}),s("8biLX",function(e,n){t(e.exports,"isNumeric",()=>r,e=>r=e);var r,o=i("fvPwd");r=function(e){return!o.isArray(e)&&e-parseFloat(e)+1>=0}}),s("2oer2",function(e,n){t(e.exports,"getTemplateExtensionHandler",()=>i("cbr0D").getTemplateExtensionHandler),t(e.exports,"getTemplateVariableInputExtensionHandler",()=>i("cbr0D").getTemplateVariableInputExtensionHandler);var r=i("iol5P");i("ajgiQ");var o=i("j2dS3");i("cbr0D"),e.exports.TEXT_TYPE="text",e.exports.defaultVariableName="variable_name",e.exports.openTemplateVariableDialog=function(e,t){return new Promise((n,s)=>{if(!e.attrs||!t.setActiveModal)return void s(Error("Cannot open editing template variable dialog"));let a=e.attrs.parameters;t.setActiveModal(r.TemplateVariableDialogLoader,{defaultVariableType:a.type,defaultVariableName:a.name,defaultRows:a.params&&a.params.rows,defaultColumns:a.params&&a.params.columns,defaultListOptions:a.params&&a.params.options,onSave:t=>{let r=(0,o.updateParams)(e,t),s=i("8pcS0").REGULAR_EXTENSION_TYPE;r.type===i("8pcS0").BODIED_EXTENSION_TYPE?s=i("8pcS0").BODIED_EXTENSION_TYPE:r.type===i("8pcS0").INLINE_EXTENSION_TYPE&&(s=i("8pcS0").INLINE_EXTENSION_TYPE),n({...r,type:s,attrs:r.attrs||{}})},onClose:()=>{t.closeActiveModal&&t.closeActiveModal()}})})}}),s("fUN4A",function(e,t){let n=(0,i("jmjWc").LoadableLazy)({__loadable_id__:"3123e",name:"ClassicEditorContextProviderLazyLoader",loader:()=>i("gPW8f")});e.exports.ClassicEditorContextProviderLazyLoader=n}),s("bQCqI",function(t,n){var r=i("42omo"),o=i("eS4Za"),s=i("7y0YZ"),a=i("gmxua");t.exports.getMigrationExtHandlerForRenderer=({contentId:t,contextProviders:n})=>(0,o.createMacroExtensionHandler)(o=>{let c;if(!o)return null;let{extensionKey:l,parameters:u}=o,{ClassicEditorContextProvider:d=({children:e})=>e}=n,p=(0,i("5kjCz").getMacroAttributesFromADFNode)(o),h={contentId:t,mode:i("5kjCz").RENDERER,extensionKey:l,attributes:p,node:o};switch(l){case i("8pcS0").EXTENSION_KEY.INVALID:c=e(r).createElement(d,null,e(r).createElement(s.InvalidExtensionLoader,{parameters:u,...h}));break;case i("8pcS0").EXTENSION_KEY.INLINE_EXTERNAL_IMAGE:c=e(r).createElement(i("fPNzj").InlineExternalImage,{...u,...h});break;case i("8pcS0").EXTENSION_KEY.INLINE_MEDIA_IMAGE:let{link:f}=u;c=e(r).createElement(i("6842f").InlineImage,{...u,...h,link:f});break;case i("8pcS0").EXTENSION_KEY.LEGACY_CONTENT:c=e(r).createElement(a.LegacyContentExtensionHandler,h)}return e(r).createElement(r.Fragment,null,e(r).createElement(i("4KFTW").MacroExperienceStart,{name:(0,i("5kjCz").getExperienceName)(i("5kjCz").RENDERER,o),mode:i("5kjCz").RENDERER,extensionKey:l,attributes:p,timeout:i("aJPUt").ExperienceTimeout.MACRO_LOAD,contentId:t}),e(r).createElement(i("lspPP").RendererActionsContext,null,c))})}),s("fHdcj",function(t,n){var r=i("42omo");let o=e(r).forwardRef((t,n)=>e(r).createElement("div",{...t,ref:n,className:(0,i("gMc0m").default)(["_1e0c1nu9"])})),s=(0,i("2XqLN").default)((e,t,n)=>({authProvider:()=>Promise.resolve({clientId:e,token:t,baseUrl:n})})),a=(0,i("2XqLN").default)((e,t,n)=>({collectionName:e,width:Number(t)||void 0,height:Number(n)||void 0})),c=(0,i("2XqLN").default)((e,t)=>({collectionName:e,id:t,mediaItemType:"file"}));t.exports.InlineImageComponent=({width:t="auto",height:n="auto",id:l,collection:u,clientId:d,token:p,link:h,baseUrl:f})=>{let m=(0,i("8C5kA").default)(),y=a(u,t,n),b=(0,i("6mKj3").expValEquals)("enable_edit_of_inline_image_extensions","cohort","test")?{width:y.width,height:y.height}:void 0;return e(r).createElement(i("btHGY").MediaImageWithErrorBoundary,{identifier:c(u,l),mediaClientConfig:s(d,p,f),apiConfig:y},({loading:t,error:n,data:s})=>t?null:n||!s?e(r).createElement(i("3gadb").default,{tag:"span",content:m.formatMessage(i("jB07v").i18n.imageFailedToLoad)},e(r).createElement(e(i("fZtQj")),{color:"var(--ds-text, #292A2E)",label:m.formatMessage(i("jB07v").i18n.imageFailedToLoad)})):e(r).createElement(i("3gadb").default,{content:m.formatMessage(i("jB07v").i18n.openLink),tag:o,delay:0},e(r).createElement(i("2Nwuj").default,{href:h},e(r).createElement("img",{style:b,src:s.src,alt:""}))))}}),s("jB07v",function(e,t){let n=(0,i("cgtv4").defineMessages)({openLink:{id:"fabric-extension-handlers.inline-image.openLink",defaultMessage:"Open link in a new tab"},imageFailedToLoad:{id:"fabric-extension-handlers.inline-image.imageFailed",defaultMessage:"Image has failed to load"}});e.exports.i18n=n}),n.rlb("78DR4");
//# sourceMappingURL=FullPageEditorComponent.77acb956.js.map
