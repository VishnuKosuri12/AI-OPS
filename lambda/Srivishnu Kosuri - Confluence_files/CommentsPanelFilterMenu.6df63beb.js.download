function e(e){return e&&e.__esModule?e.default:e}var n=globalThis.parcelRequired477,t=n.register;t("fNzRA",function(t,o){var a,r=n("42omo"),i=((a={}).FOOTER="footer",a.STICKY_DRAFT="sticky_draft",a.STICKY_FOOTER="sticky_footer",a);let m=(0,r.createContext)({expandCommentContainer:()=>{},closeCommentContainer:()=>{},setWrapperWidth:()=>{},setIsObjectCommentWrapperVisible:()=>{},setFooterEditorEntry:()=>{}});m.displayName="ObjectCommentDispatchContext";let d=(0,r.createContext)({expanded:!1,footerEditorEntry:void 0,width:void 0,isObjectCommentWrapperVisible:!1});d.displayName="ObjectCommentContext",t.exports.AddFooterCommentMode=i,t.exports.ObjectCommentProvider=({children:t})=>{let[o,a]=(0,r.useState)(!1),[i,l]=(0,r.useState)(void 0),[s,c]=(0,r.useState)(void 0),[u,p]=(0,r.useState)(!1),{edition:C}=(0,n("bQm3c").useSessionData)(),y=(0,r.useMemo)(()=>({expanded:o,footerEditorEntry:i,width:s,isObjectCommentWrapperVisible:u}),[o,i,s,u]),k=(0,r.useMemo)(()=>({expandCommentContainer:e=>{let{entryPoint:t}=e??{};t&&(0,n("9wGTI").fg)("confluence_fe_add_page_comment_exp_coverage")&&(0,n("8Ss4E").startEditorExperiences)({name:n("irVI7").ADD_PAGE_COMMENT_EXPERIENCE,attributes:{editor:"FABRIC",isSingleExperience:!0,edition:C,source:n("en1dX").AnalyticsSource.PAGE_FOOTER,entryPoint:t}},{name:n("irVI7").ADD_PAGE_COMMENT_LOAD_EXPERIENCE},{name:n("irVI7").ADD_PAGE_COMMENT_PUBLISH_EXPERIENCE}),a(!0)},closeCommentContainer:()=>{l(void 0),a(!1)},setWrapperWidth:e=>{c(e?`${e}px`:"100%")},setIsObjectCommentWrapperVisible:e=>{p(e)},setFooterEditorEntry:e=>{l(e)}}),[a,l,c,p,C]);return e(r).createElement(d.Provider,{value:y},e(r).createElement(m.Provider,{value:k},t))},t.exports.useObjectCommentContext=()=>(0,r.useContext)(d),t.exports.useObjectCommentDispatchContext=()=>(0,r.useContext)(m)}),t("24amZ",function(e,n){var t,o=((t={}).BACKBONE="backbone",t.REACT="react",t.ANNOTATION_PROVIDER="annotation-provider",t);e.exports.InlineCommentFramework=o}),t("5pQ1Y",function(t,o){var a=n("3u0dr"),r=n("frIzR"),i=n("42omo");let m=(0,i.createContext)({refetchContent:!1});m.displayName="ContentRefetchContext";let d=(0,i.createContext)({setRefetchContent:()=>{}});d.displayName="ContentRefetchDispatchContext";let l=(0,a.isReactCompilerActiveV1)()?n=>{let t,o,a,l,s=(0,r.c)(8),{children:c}=n,[u,p]=(0,i.useState)(!1);s[0]!==u?(t={refetchContent:u},s[0]=u,s[1]=t):t=s[1];let C=t;s[2]===Symbol.for("react.memo_cache_sentinel")?(o={setRefetchContent:e=>p(e)},s[2]=o):o=s[2];let y=o;return s[3]!==c?(a=e(i).createElement(d.Provider,{value:y},c),s[3]=c,s[4]=a):a=s[4],s[5]!==C||s[6]!==a?(l=e(i).createElement(m.Provider,{value:C},a),s[5]=C,s[6]=a,s[7]=l):l=s[7],l}:({children:n})=>{let[t,o]=(0,i.useState)(!1),a=(0,i.useMemo)(()=>({refetchContent:t}),[t]),r=(0,i.useMemo)(()=>({setRefetchContent:e=>o(e)}),[o]);return e(i).createElement(m.Provider,{value:a},e(i).createElement(d.Provider,{value:r},n))},s=((0,a.isReactCompilerActiveV1)(),()=>(0,i.useContext)(m)),c=((0,a.isReactCompilerActiveV1)(),()=>(0,i.useContext)(d));t.exports.ContentRefetchProvider=l,t.exports.useContentRefetch=s,t.exports.useContentRefetchDispatch=c}),t("liGyh",function(e,t){var o=n("42omo");let a=(0,n("eSUdr").default)`query useCommentQueryParamsCommentLocationQuery($commentId:ID$contentStatus:[GraphQLContentStatus]){comments(commentId:$commentId contentStatus:$contentStatus){nodes{container{id}location{type}}}}`,r=(0,n("7W8i8").getLogger)("comment-query-params"),i=({location:e,queryArchivedContent:t=!1}={})=>{let i,m,d,l,{getQueryParams:s,setQueryParams:c}=(0,o.useContext)(n("7zgzO").RoutesContext),[u]=(0,n("ep3mz").usePageContentId)(),p=(0,n("aSsfA").useGetPageMode)(),{focusedCommentId:C,editComment:y,commentId:k,replyToComment:f,showCommentArea:v,shouldMention:_,unreadCommentMark:I}=s(),S=C||f||y&&k,E=!S||!e,{comment:F,error:b}=(0,n("lb2Lp").useCommentById)({commentId:S||"",contentId:u||"",contentStatus:(0,n("kgNLQ").buildDefaultCommentsContentStatusFilters)(p),options:{skip:E||!(0,n("6mKj3").expVal)("cc_comments_new_comments_data_manager","isEnabled",!1)}}),{data:R,error:g}=(0,n("xQxzY").useQuery)(a,{variables:{commentId:S,contentStatus:[t?n("1rdvc").GraphQLContentStatus.ARCHIVED:n("1rdvc").GraphQLContentStatus.DRAFT,n("1rdvc").GraphQLContentStatus.CURRENT]},skip:E||(0,n("6mKj3").expVal)("cc_comments_new_comments_data_manager","isEnabled",!1)});g&&r.error`Error: Unable to query comment location for ${k}`;let T=(0,n("6mKj3").expVal)("cc_comments_new_comments_data_manager","isEnabled",!1)?b:g,h=!!T&&(0,n("6tkbf").isCommentNotFoundError)(T.message||String(T)),A=(0,n("6mKj3").expVal)("cc_comments_new_comments_data_manager","isEnabled",!1)?F?.location?.type:R?.comments?.nodes?.[0]?.location?.type;l=(0,n("6mKj3").expVal)("cc_comments_new_comments_data_manager","isEnabled",!1)?F&&"container"in F?F.container?.id:void 0:R?.comments?.nodes?.[0]?.container?.id,(!e||e===A)&&(u===l||void 0===l&&(0,n("6mKj3").expVal)("cc_comments_new_comments_data_manager","isEnabled",!1))&&(i=C||void 0,m=y&&"true"===y&&k?k:void 0,d=f||void 0);let D="true"===v,L="true"===_&&void 0!==d,M=()=>{let e="",n="",t="";i?e="focusedCommentId":L?(e="replyToComment",t="shouldMention"):d?e="replyToComment":m?(e="editComment",n="commentId"):D&&(e="showCommentArea"),(e||n||t||I)&&c({...s(),[e]:void 0,[n]:void 0,[t]:void 0,unreadCommentMark:void 0})},x=(0,o.useCallback)(M,[s,c,I,m,d,D,L,i]),N=(0,n("6mKj3").expValEquals)("confluence_edit_page_rerender_optimizations","isEnabled",!0)?x:M;return{focusedCommentId:i,editCommentId:m,replyToCommentId:d,shouldOpenNewCommentEditor:D,shouldMentionInNewCommentEditor:L,unreadCommentMark:I,removeCommentQueryParams:N,setFocusedCommentQueryParam:e=>{c({...s(),focusedCommentId:e})},isCommentNotFound:h}};e.exports.useInlineCommentQueryParams=({queryArchivedContent:e=!1}={})=>i({location:"INLINE",queryArchivedContent:e})}),t("6tkbf",function(e,t){e.exports.isCommentNotFoundError=e=>{if(e){if(e===n("lb2Lp").USE_COMMENT_BY_ID_COMMENT_NOT_FOUND_MESSAGE)return!0;let t=e.lastIndexOf(":")+1;return"No comment found for the given id"===e.substring(t,e.length).trim()}return!1}}),t("lb2Lp",function(e,t){var o=n("42omo");let a=n("dc3kb").default,r="Comment not found: No comment found for the given id",i=async({commentId:e,markerRef:t,contentId:o,fetchPolicy:r="network-only"})=>{if(!o||!e&&!t)return Promise.resolve(null);let i=await (0,n("c0rhi").queryInterop)({query:a,variables:{pageId:o,commentId:e||void 0,inlineMarkerRef:t||void 0,contentStatus:n("NYiei").allContentStatuses},fetchPolicy:r}),m=i?.data?.comments?.nodes;if(!m||0===m.length)return null;let d=m.filter(e=>null!==e);return(0,n("kgNLQ").findAndFilterComment)(d,e,t,n("NYiei").allContentStatuses)};e.exports.USE_COMMENT_BY_ID_COMMENT_NOT_FOUND_MESSAGE=r,e.exports.useCommentById=({commentId:e,markerRef:t,contentId:i,contentStatus:m=["CURRENT"],options:d={}})=>{let{fetchPolicy:l="cache-first",onError:s,skip:c=!1}=d,u=c||!(0,n("6mKj3").expVal)("cc_comments_new_comments_data_manager","isEnabled",!1),p=(0,n("4L9ve").useProcessedCommentsDataState)(),C=(0,o.useMemo)(()=>u||i&&(e||t)?void 0:Error("useCommentById requires either commentId or markerRef and contentId to be provided"),[u,e,t,i]),y=u||!!C,k=y||"network-only"!==l&&p.isDataProcessed,f=(0,n("jMyy4").useQueryInterop)(a,{variables:{pageId:i??"",commentId:e||void 0,inlineMarkerRef:t||void 0,contentStatus:n("NYiei").allContentStatuses},fetchPolicy:l,skip:k,onError:e=>{(e?.message?.search(/reactions/i)!==-1||e?.message?.search(/cc-pages/i)!==-1)&&(0,n("7Sm4c").markErrorAsHandled)(e)}}),v=(0,o.useMemo)(()=>{if(!C){if(p.isDataProcessed){if(e){let n=p.flatCommentsMap?.[e];if(n)return n}else if(t){let e=p.flatMarkerRefMap?.[t];if(e)return e}}if(f.data?.comments?.nodes){let o=f.data.comments.nodes.map(e=>e).filter(e=>e);if(!o)return;return(0,n("kgNLQ").findAndFilterComment)(o,e,t,m)}}},[C,e,p.flatCommentsMap,p.flatMarkerRefMap,p.isDataProcessed,f.data?.comments?.nodes,t,m]),_=(0,o.useMemo)(()=>{if(!y&&p.isDataProcessed&&!f.loading&&!p.error&&!f.error&&void 0===v)return Error(r)},[y,p.isDataProcessed,p.error,f.loading,f.error,v]),I=(0,o.useMemo)(()=>C||p.error||f.error||_,[C,p.error,f.error,_]);return(0,o.useEffect)(()=>{I&&s&&s(I)},[I,s]),{loading:!p.isDataProcessed&&f.loading,error:I,comment:v}},e.exports.fetchCommentById=i}),t("dc3kb",function(e,n){var t,o,a,r,i,m,d,l,s,c,u,p,C,y,k,f,v,_,I,S,E,F,b,R,g,T,h,A,D;let L=(t={defaultValue:null,kind:"LocalArgument",name:"commentId"},o={defaultValue:null,kind:"LocalArgument",name:"contentStatus"},a={defaultValue:null,kind:"LocalArgument",name:"inlineMarkerRef"},r={defaultValue:null,kind:"LocalArgument",name:"pageId"},i={kind:"Variable",name:"pageId",variableName:"pageId"},m={kind:"ScalarField",name:"id"},d={kind:"ScalarField",name:"__typename"},l={kind:"ScalarField",name:"displayName"},s={kind:"ScalarField",name:"permissionType"},c={concreteType:"Icon",kind:"LinkedField",name:"profilePicture",plural:!1,selections:[{kind:"ScalarField",name:"path"}]},u={kind:"ScalarField",name:"type"},p={kind:"InlineFragment",selections:[{kind:"ScalarField",name:"accountId"}],type:"KnownUser"},y={args:[{kind:"Literal",name:"representation",value:"ATLAS_DOC_FORMAT"}],concreteType:"DocumentBody",kind:"LinkedField",name:"body",plural:!1,selections:C=[{kind:"ScalarField",name:"value"}],storageKey:'body(representation:"ATLAS_DOC_FORMAT")'},k={kind:"ScalarField",name:"contentStatus"},f={concreteType:"ConfluenceDate",kind:"LinkedField",name:"createdAt",plural:!1,selections:C},v={kind:"ScalarField",name:"createdAtNonLocalized"},_={concreteType:"Map_LinkType_String",kind:"LinkedField",name:"links",plural:!1,selections:[{kind:"ScalarField",name:"editui"},{kind:"ScalarField",name:"webui"}]},b={kind:"LinkedField",name:"location",plural:!1,selections:[d,u,{kind:"InlineFragment",selections:[{concreteType:"InlineCommentResolveProperties",kind:"LinkedField",name:"commentResolveProperties",plural:!1,selections:[I={kind:"ScalarField",name:"resolved"},S={kind:"ScalarField",name:"resolvedFriendlyDate"},E={kind:"ScalarField",name:"resolvedTime"},F={kind:"ScalarField",name:"resolvedUser"}]}],type:"FooterComment"},{kind:"InlineFragment",selections:[{kind:"ScalarField",name:"inlineMarkerRef"},{concreteType:"InlineCommentResolveProperties",kind:"LinkedField",name:"inlineResolveProperties",plural:!1,selections:[{kind:"ScalarField",name:"isDangling"},I,S,E,F]},{kind:"ScalarField",name:"inlineText"}],type:"InlineComment"}]},R={kind:"ScalarField",name:"parentId"},g={concreteType:"CommentPermissions",kind:"LinkedField",name:"permissions",plural:!1,selections:[{kind:"ScalarField",name:"isEditable"},{kind:"ScalarField",name:"isRemovable"},{kind:"ScalarField",name:"isResolvable"}]},T={args:[{kind:"Literal",name:"childType",value:"comment"},{kind:"Literal",name:"contentType",value:"page"},i],concreteType:"ReactionsSummaryResponse",kind:"LinkedField",name:"reactionsSummary",plural:!1,selections:[{kind:"ScalarField",name:"ari"},{kind:"ScalarField",name:"containerAri"},{kind:"ScalarField",name:"reactionsCount"},{concreteType:"ReactionsSummaryForEmoji",kind:"LinkedField",name:"reactionsSummaryForEmoji",plural:!0,selections:[m,{kind:"ScalarField",name:"count"},{kind:"ScalarField",name:"emojiId"},{kind:"ScalarField",name:"reacted"}]}]},{fragment:{argumentDefinitions:[t,o,a,r],kind:"Fragment",name:"useCommentByIdQuery",selections:D=[{args:[{kind:"Variable",name:"commentId",variableName:"commentId"},{kind:"Variable",name:"contentStatus",variableName:"contentStatus"},{kind:"Variable",name:"inlineMarkerRef",variableName:"inlineMarkerRef"},i],concreteType:"PaginatedCommentList",kind:"LinkedField",name:"comments",plural:!1,selections:[{concreteType:"Comment",kind:"LinkedField",name:"nodes",plural:!0,selections:[m,{kind:"LinkedField",name:"author",plural:!1,selections:[d,l,s,c,u,p]},y,{concreteType:"Content",kind:"LinkedField",name:"container",plural:!1,selections:[m]},k,f,v,_,b,R,g,T,{concreteType:"Comment",kind:"LinkedField",name:"replies",plural:!0,selections:[m,{kind:"LinkedField",name:"author",plural:!1,selections:[d,l,s,p,c]},y,k,f,v,_,b,R,g,T,{concreteType:"Version",kind:"LinkedField",name:"version",plural:!1,selections:[{kind:"LinkedField",name:"by",plural:!1,selections:[d,l]},h={kind:"ScalarField",name:"number"},A={kind:"ScalarField",name:"when"}]}]},{concreteType:"Version",kind:"LinkedField",name:"version",plural:!1,selections:[{kind:"LinkedField",name:"by",plural:!1,selections:[d,u,l,p]},{kind:"ScalarField",name:"friendlyWhen"},h,A]}]}]}],type:"Query"},kind:"Request",operation:{argumentDefinitions:[r,t,a,o],kind:"Operation",name:"useCommentByIdQuery",selections:D},params:{cacheID:"80f6dc5113d6aef8927adf669909b48e",id:"a7e41ef969ee551d0afd8d103f23ec6991292b83b77931c1782403014e46ce8b",metadata:{},name:"useCommentByIdQuery",operationKind:"query",text:'query useCommentByIdQuery($pageId:ID!,$commentId:ID,$inlineMarkerRef:String,$contentStatus:[GraphQLContentStatus]){comments(pageId:$pageId,contentStatus:$contentStatus,commentId:$commentId,inlineMarkerRef:$inlineMarkerRef){nodes{id,author{__typename,displayName,permissionType,...on KnownUser{accountId,permissionType},profilePicture{path},type},body(representation:ATLAS_DOC_FORMAT){value},container{id},contentStatus,createdAt{value},createdAtNonLocalized,links{editui,webui},location{__typename,type,...on FooterComment{commentResolveProperties{resolved,resolvedFriendlyDate,resolvedTime,resolvedUser}},...on InlineComment{inlineMarkerRef,inlineResolveProperties{isDangling,resolved,resolvedFriendlyDate,resolvedTime,resolvedUser},inlineText}},parentId,permissions{isEditable,isRemovable,isResolvable},reactionsSummary(pageId:$pageId,contentType:"page",childType:"comment"){ari,containerAri,reactionsCount,reactionsSummaryForEmoji{id,count,emojiId,reacted}},replies{id,author{__typename,displayName,permissionType,...on KnownUser{accountId},profilePicture{path}},body(representation:ATLAS_DOC_FORMAT){value},contentStatus,createdAt{value},createdAtNonLocalized,links{editui,webui},location{__typename,type,...on FooterComment{commentResolveProperties{resolved,resolvedFriendlyDate,resolvedTime,resolvedUser}},...on InlineComment{inlineMarkerRef,inlineResolveProperties{isDangling,resolved,resolvedFriendlyDate,resolvedTime,resolvedUser},inlineText}},parentId,permissions{isEditable,isRemovable,isResolvable},reactionsSummary(pageId:$pageId,contentType:"page",childType:"comment"){ari,containerAri,reactionsCount,reactionsSummaryForEmoji{id,count,emojiId,reacted}},version{by{__typename,displayName},number,when}},version{by{__typename,type,displayName,...on KnownUser{accountId}},friendlyWhen,number,when}}}}'}});L.hash="ed7145a8b5d08f815e716de36a4b73ca",e.exports.default=L}),t("1rdvc",function(e,n){var t,o=((t={}).ARCHIVED="ARCHIVED",t.CURRENT="CURRENT",t.DELETED="DELETED",t.DRAFT="DRAFT",t);e.exports.GraphQLContentStatus=o});
//# sourceMappingURL=CommentsPanelFilterMenu.6df63beb.js.map
