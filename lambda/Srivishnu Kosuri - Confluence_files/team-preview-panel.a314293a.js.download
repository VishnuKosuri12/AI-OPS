var e=globalThis.parcelRequired477,t=e.register;t("kIvLT",function(t,a){var r=e("42omo");let n=()=>["home.atlassian.com","team.atlassian.com"].some(e=>window.location?.host.includes(e)),s=["atlaskit","aiMate"];t.exports.useAnalytics=()=>{let{createAnalyticsEvent:t}=(0,e("inPa6").useAnalyticsEvents)(),{propertiesRef:a,mode:i}=(0,e("TwPkE").useAnalyticsPropertiesContext)(),o=(0,r.useCallback)(t=>{let a=(0,e("6v6KC").isUIAnalyticsEvent)(t)?t.payload:t;return"ui"===a.actionSubject&&"operational"===a.eventType&&n()?["townsquare"]:[]},[]),c=[...s];n()&&c.push("townsquare");let{trackAIInteractionInit:u,trackAIResultView:d,trackAIResultError:l,trackAIInteractionDismiss:A,trackAIResultAction:I,trackAIFeedbackSubmit:b}=(0,e("fYQcF").useAIEventsInstrumentation)({product:a.current.product,subproduct:a.current.product,aiFeatureName:"aiChat",proactiveGeneratedAI:0,userGeneratedAI:1,enablePlatformEvents:!0,tags:c,customAnalyticsFire:(a,r)=>{let n=t(a),s=(0,e("lUZCl").getAttributesFromContexts)(n.context);n.update({attributes:{...n.payload.attributes,...s}}).fire(e("bQGO7").ANALYTICS_CHANNEL)}}),T=(0,r.useCallback)(()=>{let{agentCreatorType:t,agentId:r,agentVisibility:n,agentExternalConfigReference:s,agentActions:i,agentIsDefault:o,conversationChannelId:c,experienceId:u,fullScreen:d,product:l,productHeader:A,mode:I}=a.current;return{[e("jA9SA").AI_MATE_ATTRIBUTES.agentCreatorType]:t,[e("jA9SA").AI_MATE_ATTRIBUTES.agentId]:r,[e("jA9SA").AI_MATE_ATTRIBUTES.agentVisibility]:n,[e("jA9SA").AI_MATE_ATTRIBUTES.conversationChannelId]:c,[e("jA9SA").AI_MATE_ATTRIBUTES.experienceId]:u,[e("jA9SA").AI_MATE_ATTRIBUTES.fullScreen]:d,[e("jA9SA").AI_MATE_ATTRIBUTES.product]:l,[e("jA9SA").AI_MATE_ATTRIBUTES.productHeader]:A,[e("jA9SA").AI_MATE_ATTRIBUTES.singleInstrumentationID]:c,[e("jA9SA").AI_MATE_ATTRIBUTES.agentExternalConfigReference]:s,[e("jA9SA").AI_MATE_ATTRIBUTES.agentActions]:i,[e("jA9SA").AI_MATE_ATTRIBUTES.agentIsDefault]:o,[e("jA9SA").AI_MATE_ATTRIBUTES.mode]:I}},[a]),p=(0,r.useCallback)(a=>{let r=[...s];n()&&r.push("townsquare");let{source:i,subjectId:o,proactive:c,userGenerated:p,messageId:S,messageActions:m,singleInstrumentationID:C,deepResearchEnabled:g,webSearchEnabled:E,timestamp:f,citedProductList:v,citedProduct:_,sourceProducts:R,sourceProduct:h,invokedPlugins:k,responseSources:x,usesJsm:y,invokedFrom:j,conversationChannelId:F,attributes:M}=a,U={...T(),isAIFeature:1,proactiveAIGenerated:+!!c,userGeneratedAI:+!!p,aiFeatureName:"aiChat",citedProductList:v,citedProduct:_,sourceProducts:R,sourceProduct:h,...M};S&&(U.messageId=S),m&&(U.messageActions=m),j&&(U.invokedFrom=j),f&&(U.timestamp=f),C&&(U.singleInstrumentationID=C),k&&(U.invokedPlugins=k),x&&(U.responseSources=x),void 0!==y&&(U.usesJsm=y),g&&(U.deepResearchEnabled=g),E&&(U.webSearchEnabled=E),F&&(U.conversationChannelId=F);let N={eventType:"track",tags:r,source:i,actionSubjectId:o,attributes:U};if((0,e("dh538").fg)("rovo_ai_events_tracking_migration")){let e={...U,aiFeatureName:"aiChat",proactiveGeneratedAI:+!!c,userGeneratedAI:+!!p};switch(a.type){case"initiated":u({attributes:e,tags:r,source:i,actionSubjectId:o});break;case"viewed":d({attributes:e,tags:r,source:i,actionSubjectId:o});break;case"error":l({aiErrorMessage:a.errorMessage},{attributes:e,tags:r,source:i,actionSubjectId:o});break;case"dismissed":A({attributes:e,tags:r,source:i,actionSubjectId:o});break;case"actioned":I(a.actionResult,{attributes:e,tags:r,source:i,actionSubjectId:o});break;case"feedback":b(a.feedbackResult,{attributes:e,tags:r,source:i,actionSubjectId:o})}}else{switch(a.type){case"initiated":N={...N,actionSubject:"aiInteraction",action:"initiated"};break;case"viewed":N={...N,actionSubject:"aiResult",action:"viewed"};break;case"error":N={...N,actionSubject:"aiResult",action:"error"};break;case"dismissed":N={...N,actionSubject:"aiInteraction",action:"dismissed"};break;case"actioned":N={...N,actionSubject:"aiResult",action:"actioned",attributes:{...N.attributes,aiResultAction:a.actionResult}};break;case"feedback":N={...N,actionSubject:"aiFeedback",action:"submitted",attributes:{...N.attributes,aiFeedbackResult:a.feedbackResult}}}let r=t(N),n=(0,e("lUZCl").getAttributesFromContexts)(r.context);r.update({attributes:{...r.payload.attributes,...n}}).fire(e("bQGO7").ANALYTICS_CHANNEL)}},[t,T,u,d,l,A,I,b]);return{sendAnalyticsEvent:(0,r.useCallback)((a,r)=>{let n=Array.from(new Set([...r?.removeDefaultTags?[]:s,...a.tags||[],...o(a)])),i=T();if((0,e("6v6KC").isUIAnalyticsEvent)(a)){let t=(0,e("lUZCl").getAttributesFromContexts)(a.context);a.update({...a.payload,tags:n,attributes:{...i,...a.payload.attributes,...t}}).fire(e("bQGO7").ANALYTICS_CHANNEL)}else{let r=t({...a,tags:n,attributes:{...i,...a.attributes}}),s=(0,e("lUZCl").getAttributesFromContexts)(r.context);r.update({attributes:{...r.payload.attributes,...s}}).fire(e("bQGO7").ANALYTICS_CHANNEL)}},[t,o,T]),trackAIMAUEvent:p,mode:i}}}),t("TwPkE",function(t,a){var r=e("l998X"),n=e("42omo");let s={conversationChannelId:"",experienceId:"",product:"",productHeader:"",agentId:null,agentExternalConfigReference:null,agentActions:[],agentIsDefault:null,fullScreen:!1,agentCreatorType:"",agentVisibility:"",singleInstrumentationID:"",mode:void 0},i=(0,n.createContext)({propertiesRef:{current:{...s}},mode:void 0,setAnalyticsPropertiesWithoutRerender:()=>{}}),o=(0,n.createContext)({sharedFeaturesInstrumentationId:void 0,isInSmartCreateFlow:void 0}),c=({children:e,mode:t})=>{let a=(0,n.useRef)({...s}),o=(0,n.useCallback)(e=>{a.current={...a.current,...e}},[]),c=(0,n.useMemo)(()=>({propertiesRef:a,mode:t,setAnalyticsPropertiesWithoutRerender:o}),[o,t]);return(0,r.jsx)(i.Provider,{value:c,children:e})};t.exports.SharedFeaturesInstrumentationIdContext=o,t.exports.AnalyticsContextWithSourceAndProperties=({source:t,sharedFeaturesInstrumentationId:a,children:s,mode:i,isAlwaysInSmartCreateFlow:u})=>{let{sharedFeaturesInstrumentationId:d,isInSmartCreateFlow:l}=(0,n.useContext)(o),A=void 0===u?l:u,I=(0,n.useMemo)(()=>({source:t,attributes:{sharedFeaturesInstrumentationId:a??d,isInSmartCreateFlow:A}}),[t,a,d,A]);return(0,r.jsx)(e("bYRk6").default,{data:I,children:(0,r.jsx)(o.Provider,{value:{sharedFeaturesInstrumentationId:a??d,isInSmartCreateFlow:A},children:(0,r.jsx)(c,{mode:i,children:s})})})},t.exports.useAnalyticsPropertiesContext=()=>(0,n.useContext)(i)}),t("jA9SA",function(e,t){e.exports.AI_MATE_ATTRIBUTES={agentCreatorType:"agentCreatorType",agentId:"agentId",agentVisibility:"agentVisibility",agentExternalConfigReference:"agentExternalConfigReference",agentActions:"agentActions",agentIsDefault:"agentIsDefault",conversationChannelId:"conversationChannelId",experienceId:"experienceId",fullScreen:"fullScreen",mode:"mode",product:"product",productHeader:"productHeader",singleInstrumentationID:"singleInstrumentationID",sharedFeaturesInstrumentationId:"sharedFeaturesInstrumentationId"}}),t("bQGO7",function(t,a){let r=e("3pfAb").FabricChannel.aiMate;var n,s=((n={}).ROVO_CHAT="rovo-chat",n.CONFLUENCE_AIFC="confluence-aifc",n);t.exports.ANALYTICS_CHANNEL=r,t.exports.AUTOSUGGEST_SOURCE=s}),t("lUZCl",function(t,a){var r=e("ffCOo");let n=t=>"object"==typeof t&&null!==t&&"source"in t&&"attributes"in t&&"object"==typeof t.attributes&&null!==t.attributes&&e("iN5LM").ALLOWED_AI_MATE_SOURCES.includes(t.source);t.exports.getAttributesFromContexts=e=>e&&Array.isArray(e)?e.filter(e=>n(e)||e[r.AI_MATE_CONTEXT]).reduce((e,t)=>({...e,...t[r.AI_MATE_CONTEXT]?.attributes??{},...t.attributes??{}}),{}):{}}),t("iN5LM",function(e,t){e.exports.ALLOWED_AI_MATE_SOURCES=["AIMate","smart-create","CSMAI","CSMAIEmbed","rovoServiceAgent"]});
//# sourceMappingURL=team-preview-panel.a314293a.js.map
