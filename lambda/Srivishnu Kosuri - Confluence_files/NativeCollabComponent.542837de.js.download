(0,globalThis.parcelRequired477.register)("6rMOj",function(t,e){let n;function o(t,e,n,r){for(let l=0,i=0;l<t.childCount;l++){let f=t.child(l),h=i+f.nodeSize,s=Math.max(i,e),a=Math.min(h,n);if(s<a)if(f.isText)for(let t=s;t<a;t++)r.push(f.text.charCodeAt(t-i));else f.isLeaf?r.push(f.type.name):(s==i&&r.push(f.type.name),o(f.content,Math.max(i+1,s)-i-1,Math.min(h-1,a)-i-1,r),a==h&&r.push(-1));i=h}return r}function r(t,e,n){let r=o(t,n.fromA,n.toA,[]),l=o(e,n.fromB,n.toB,[]),i=0,f=r.length,h=l.length;for(;i<r.length&&i<l.length&&r[i]===l[i];)i++;if(i==r.length&&i==l.length)return[];for(;f>i&&h>i&&r[f-1]===l[h-1];)f--,h--;if(f==i||h==i||f==h&&f==i+1)return[n.slice(i,f,i,h)];let s=f-i,a=h-i,m=Math.min(5e3,s+a),u=[],c=[];for(let t=2*(m+1),e=0;e<t;e++)c[e]=-1;for(let t=0;t<=m;t++){for(let e=-t;e<=t;e+=2){let o=c[e+1+m],g=c[e-1+m],B=o<g?g:o+1,d=B+e;for(;B<s&&d<a&&r[i+B]===l[i+d];)B++,d++;if(c[e+m]=B,B>=s&&d>=a){let o=[],r=Math.min(15,Math.max(2,Math.floor(Math.max(f-i,h-i)/10))),l=-1,s=-1,a=-1,g=-1,A=(t,e,i,f)=>{l>-1&&l<e+r?(l=t,a=i):(l>-1&&o.push(n.slice(l,s,a,g)),l=t,s=e,a=i,g=f)};for(let n=t-1;n>=0;n--){let t=c[e+1+m],o=c[e-1+m];t<o?(e--,d=(B=o+i)+e,A(B,B,d,d+1)):(e++,d=(B=t+i)+e,A(B,B+1,d,d)),c=u[n>>1]}return l>-1&&o.push(n.slice(l,s,a,g)),o.reverse()}}t%2==0&&u.push(c.slice())}return[n.slice(i,f,i,h)]}class l{cut(t){return t==this.length?this:new l(t,this.data)}static slice(t,e,n){if(e==n)return l.none;if(0==e&&n==l.len(t))return t;let o=[];for(let r=0,l=0;l<n;r++){let i=t[r],f=l+i.length,h=Math.min(n,f)-Math.max(e,l);h>0&&o.push(i.cut(h)),l=f}return o}static join(t,e,n){if(0==t.length)return e;if(0==e.length)return t;let o=n(t[t.length-1].data,e[0].data);if(null==o)return t.concat(e);let r=t.slice(0,t.length-1);r.push(new l(t[t.length-1].length+e[0].length,o));for(let t=1;t<e.length;t++)r.push(e[t]);return r}static len(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n].length;return e}constructor(t,e){this.length=t,this.data=e}}l.none=[];class i{get lenA(){return this.toA-this.fromA}get lenB(){return this.toB-this.fromB}slice(t,e,n,o){return 0==t&&0==n&&e==this.toA-this.fromA&&o==this.toB-this.fromB?this:new i(this.fromA+t,this.fromA+e,this.fromB+n,this.fromB+o,l.slice(this.deleted,t,e),l.slice(this.inserted,n,o))}static merge(t,e,n){if(0==t.length)return e;if(0==e.length)return t;let o=[];for(let r=0,f=0,h=t[0],s=e[0];;)if(!h&&!s)return o;else if(h&&(!s||h.toB<s.fromA)){let n=f?e[f-1].toB-e[f-1].toA:0;o.push(0==n?h:new i(h.fromA,h.toA,h.fromB+n,h.toB+n,h.deleted,h.inserted)),h=r++==t.length?null:t[r]}else if(s&&(!h||s.toA<h.fromB)){let n=r?t[r-1].toB-t[r-1].toA:0;o.push(0==n?s:new i(s.fromA-n,s.toA-n,s.fromB,s.toB,s.deleted,s.inserted)),s=f++==e.length?null:e[f]}else{let a=Math.min(h.fromB,s.fromA),m=Math.min(h.fromA,s.fromA-(r?t[r-1].toB-t[r-1].toA:0)),u=m,c=Math.min(s.fromB,h.fromB+(f?e[f-1].toB-e[f-1].toA:0)),g=c,B=l.none,d=l.none,A=!1,p=!1;for(;;){let o=Math.min(h?a>=h.fromB?h.toB:h.fromB:2e8,s?a>=s.fromA?s.toA:s.fromA:2e8),i=h&&a>=h.fromB,m=s&&a>=s.fromA;if(!i&&!m)break;i&&a==h.fromB&&!A&&(B=l.join(B,h.deleted,n),u+=h.lenA,A=!0),i&&!m&&(d=l.join(d,l.slice(h.inserted,a-h.fromB,o-h.fromB),n),g+=o-a),m&&a==s.fromA&&!p&&(d=l.join(d,s.inserted,n),g+=s.lenB,p=!0),m&&!i&&(B=l.join(B,l.slice(s.deleted,a-s.fromA,o-s.fromA),n),u+=o-a),i&&o==h.toB&&(h=r++==t.length?null:t[r],A=!1),m&&o==s.toA&&(s=f++==e.length?null:e[f],p=!1),a=o}(m<u||c<g)&&o.push(new i(m,u,c,g,B,d))}}constructor(t,e,n,o,r,l){this.fromA=t,this.toA=e,this.fromB=n,this.toB=o,this.deleted=r,this.inserted=l}}try{n=RegExp("[\\p{Alphabetic}_]","u")}catch(t){}let f=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function h(t){if(t<128)return t>=48&&t<=57||t>=65&&t<=90||t>=79&&t<=122;let e=String.fromCharCode(t);return n?n.test(e):e.toUpperCase()!=e.toLowerCase()||f.test(e)}function s(t,e){return t===e?t:null}class a{addSteps(t,e,n){let o=[];for(let t=0;t<e.length;t++){let r=Array.isArray(n)?n[t]:n,f=0;e[t].forEach((t,e,n,h)=>{o.push(new i(t+f,e+f,n,h,t==e?l.none:[new l(e-t,r)],n==h?l.none:[new l(h-n,r)])),f=h-n-(e-t)})}if(0==o.length)return this;let f=function t(e,n,o=0,r=e.length){if(r==o+1)return[e[o]];let l=o+r>>1;return i.merge(t(e,n,o,l),t(e,n,l,r),n)}(o,this.config.combine),h=i.merge(this.changes,f,this.config.combine),s=h;for(let e=0;e<s.length;e++){let n=s[e];if(n.fromA==n.toA||n.fromB==n.toB||!f.some(t=>t.toB>n.fromB&&t.fromB<n.toB))continue;let o=r(this.config.doc.content,t.content,n);(1!=o.length||0!=o[0].fromB||o[0].toB!=n.toB-n.fromB)&&(s==h&&(s=h.slice()),1==o.length?s[e]=o[0]:(s.splice(e,1,...o),e+=o.length-1))}return new a(this.config,s)}get startDoc(){return this.config.doc}map(t){let e=e=>{let n=t(e);return n===e.data?e:new l(e.length,n)};return new a(this.config,this.changes.map(t=>new i(t.fromA,t.toA,t.fromB,t.toB,t.deleted.map(e),t.inserted.map(e))))}changedRange(t,e){if(t==this)return null;let n=e&&function(t){let e=m(t);if(!e)return null;let n=m(t.map(t=>t.invert()).reverse());return{fromA:n.from,toA:n.to,fromB:e.from,toB:e.to}}(e),o=n?n.toB-n.fromB-(n.toA-n.fromA):0;function r(t){return!n||t<=n.fromA?t:t+o}let l=n?n.fromB:2e8,i=n?n.toB:-2e8;function f(t,e=t){l=Math.min(t,l),i=Math.max(e,i)}let h=this.changes,s=t.changes;for(let t=0,e=0;t<h.length&&e<s.length;){var a,c,g;let n=h[t],o=s[e];n&&o&&(a=n,c=o,(g=r)(a.fromB)==c.fromB&&g(a.toB)==c.toB&&u(a.deleted,c.deleted)&&u(a.inserted,c.inserted))?(t++,e++):o&&(!n||r(n.fromB)>=o.fromB)?(f(o.fromB,o.toB),e++):(f(r(n.fromB),r(n.toB)),t++)}return l<=i?{from:l,to:i}:null}static create(t,e=(t,e)=>t===e?t:null){return new a({combine:e,doc:t},[])}constructor(t,e){this.config=t,this.changes=e}}function m(t){let e=2e8,n=-2e8;for(let o=0;o<t.length;o++){let r=t[o];2e8!=e&&(e=r.map(e,-1),n=r.map(n,1)),r.forEach((t,o,r,l)=>{e=Math.min(e,r),n=Math.max(n,l)})}return 2e8==e?null:{from:e,to:n}}function u(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n].length!=e[n].length||t[n].data!==e[n].data)return!1;return!0}a.computeDiff=r,t.exports.simplifyChanges=function(t,e){let n=[];for(let o=0;o<t.length;o++){let r=t[o].toB,f=o;for(;o<t.length-1&&t[o+1].fromB<=r+30;)r=t[++o].toB;!function(t,e,n,o,r){var f;let a,m=Math.max(0,t[e].fromB-30),u=Math.min(o.content.size,t[n-1].toB+30),c=(f=o.content,a="",!function t(e,n,o){for(let r=0,l=0;r<e.childCount;r++){let i=e.child(r),f=l+i.nodeSize,h=Math.max(l,n),s=Math.min(f,o);h<s&&(i.isText?a+=i.text.slice(Math.max(0,n-l),Math.min(i.text.length,o-l)):i.isLeaf?a+=" ":(h==l&&(a+=" "),t(i.content,Math.max(0,h-l-1),Math.min(i.content.size,o-l)),s==f&&(a+=" "))),l=f}}(f,m,u),a);for(let o=e;o<n;o++){let e=o,f=t[o],a=f.lenA,g=f.lenB;for(;o<n-1;){let n=t[o+1],r=!1,l=f.toB!=u&&h(c.charCodeAt(f.toB-1-m));for(let o=f.toB;!r&&o<n.fromB;o++){let n=o!=u&&h(c.charCodeAt(o-m));l&&n||o==t[e].fromB||(r=!0),l=n}if(r)break;a+=n.lenA,g+=n.lenB,f=n,o++}if(g>0&&a>0&&(1!=g||1!=a)){let n=t[e].fromB,f=t[o].toB;if(n<u&&h(c.charCodeAt(n-m)))for(;n>m&&h(c.charCodeAt(n-1-m));)n--;if(f>m&&h(c.charCodeAt(f-1-m)))for(;f<u&&h(c.charCodeAt(f-m));)f++;let a=function(t,e,n){let o=t[0].fromA-(t[0].fromB-e),r=t[t.length-1],f=r.toA+(n-r.toB),h=l.none,a=l.none,m=(t[0].deleted.length?t[0].deleted:t[0].inserted)[0].data,u=(t[0].inserted.length?t[0].inserted:t[0].deleted)[0].data;for(let r=o,i=e,c=0;;c++){let e=c==t.length?null:t[c],o=e?e.fromA:f,g=e?e.fromB:n;if(o>r&&(h=l.join(h,[new l(o-r,m)],s)),g>i&&(a=l.join(a,[new l(g-i,u)],s)),!e)break;h=l.join(h,e.deleted,s),a=l.join(a,e.inserted,s),h.length&&(m=h[h.length-1].data),a.length&&(u=a[a.length-1].data),r=e.toA,i=e.toB}return new i(o,f,e,n,h,a)}(t.slice(e,o+1),n,f),g=r.length?r[r.length-1]:null;g&&g.toA==a.fromA?r[r.length-1]=new i(g.fromA,a.toA,g.fromB,a.toB,g.deleted.concat(a.deleted),g.inserted.concat(a.inserted)):r.push(a)}else for(let n=e;n<=o;n++)r.push(t[n])}}(t,f,o+1,e,n)}return n},t.exports.ChangeSet=a});
//# sourceMappingURL=NativeCollabComponent.542837de.js.map
