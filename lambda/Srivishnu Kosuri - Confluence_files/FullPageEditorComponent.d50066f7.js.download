function e(e){return e&&e.__esModule?e.default:e}function t(e,t,a,r){Object.defineProperty(e,t,{get:a,set:r,enumerable:!0,configurable:!0})}var a=globalThis,r={},o={},n=a.parcelRequired477;null==n&&(n=function(e){var t=r[e];if(void 0!==t)return t.exports;var a=o[e];if(void 0!==a){delete o[e];var n={id:e,exports:{}};return r[e]=n,a.call(n.exports,n,n.exports),n.exports}var s=Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s},n.register=function(e,t){o[e]=t},a.parcelRequired477=n);var s=n.register;a.lb||(a.lb=new Set,a.bq=[],a.rlb=e=>{a.lb.add(e),a.pq()},a.rwr=(e,t,r)=>{a.bq.push({b:e,r:t,d:r}),a.pq()},a.pq=()=>{var e=a.bq.find(e=>e.d.every(e=>a.lb.has(e)));e&&(a.bq=a.bq.filter(t=>t.b!==e.b),e.r(),a.pq())}),s("jtfsl",function(e,t){var a,r,o;let n={fragment:{argumentDefinitions:a=[{defaultValue:null,kind:"LocalArgument",name:"accountId"}],kind:"Fragment",name:"AudienceSegmentationContextProviderQuery",selections:o=[{alias:"user",args:[{kind:"Variable",name:"id",variableName:"accountId"}],concreteType:"AtlassianUser",kind:"LinkedField",name:"confluence_atlassianUser",plural:!1,selections:[r={kind:"ScalarField",name:"id"},{concreteType:"ConfluenceUser",kind:"LinkedField",name:"confluence",plural:!1,selections:[{concreteType:"Group",kind:"LinkedField",name:"groupsWithId",plural:!0,selections:[r]}]}]}],type:"Query"},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"AudienceSegmentationContextProviderQuery",selections:o},params:{cacheID:"0dd246a45e06b932ab1b8570b0e2a26f",id:"9541c3f7c90ad9f1ab645d0b30662e1e580d7fd7e0951e7703e0bf175d12bd63",metadata:{},name:"AudienceSegmentationContextProviderQuery",operationKind:"query",text:"query AudienceSegmentationContextProviderQuery($accountId:ID){user:confluence_atlassianUser(id:$accountId){id,confluence{groupsWithId{id}}}}"}};n.hash="d01bf7959fed02b6636fa27826de406a",e.exports.default=n}),s("f8eu7",function(e,t){e.exports.getConfluencePageAri=(e,t,a="page")=>`ari:cloud:confluence:${t}:${a}/${e}`,e.exports.getPageIdAndTypeFromConfluencePageAri=e=>{let t=e.match(/ari:cloud:confluence:[^:]+:(page|blogpost)\/(\d+)/);if(t?.[2])return{type:t[1],id:t[2]};throw Error(`Invalid page ARI: ${e}`)},e.exports.getLocalIdFromConfluencePageAri=e=>{let t=e.match(/ari:cloud:confluence:[^:]+:(page|blogpost)\/\d+\/([a-zA-Z0-9-]+)/);if(t?.[2])return t[2];throw Error(`Invalid page ARI: ${e}`)},e.exports.resourceIdFromConfluencePageSourceIdAndLocalId=(e,t)=>e+"/"+t}),s("l1vR8",function(e,t){var a=n("42omo");let r=(e,t,a)=>{let r=e.match(/ari:cloud:confluence:([^:]+):(page|blogpost)\/(\d+)/);if(!r?.[1])throw Error(`Invalid source ARI: ${e}`);let o=r[1],n=r[3];return`ari:cloud:blocks:${o}:synced-block/${a}/${n}/${t}`},o=(e,t)=>{let a=e.match(/ari:cloud:confluence:([^:]+):(page|blogpost)\/(\d+)/);if(!a?.[1])throw Error(`Invalid source ARI: ${e}`);let r=a[1];return`ari:cloud:blocks:${r}:synced-block/${t}`},s={"Content-Type":"application/json",Accept:"application/json"},i="/gateway/api/blocks/v1";class c extends Error{constructor(e){super("Block error"),this.status=e}}let l=async({blockAri:e})=>{let t=await (0,n("k2in1").fetchWithRetry)(`${i}/block/${encodeURIComponent(e)}`,{method:"GET",headers:s});if(!t.ok)throw new c(t.status);return await t.json()},d=async({blockAri:e})=>{let t=await (0,n("k2in1").fetchWithRetry)(`${i}/block/${encodeURIComponent(e)}`,{method:"DELETE",headers:s});if(!t.ok)throw new c(t.status)},u=async({blockAri:e,content:t,stepVersion:a})=>{let r={content:t};void 0!==a&&(r.stepVersion=a);let o=await (0,n("k2in1").fetchWithRetry)(`${i}/block/${encodeURIComponent(e)}`,{method:"PUT",headers:s,body:JSON.stringify(r)});if(!o.ok)throw new c(o.status)},p=async({blockAri:e,blockInstanceId:t,sourceAri:a,product:r,content:o,stepVersion:l})=>{let d={blockAri:e,blockInstanceId:t,sourceAri:a,product:r,content:o};void 0!==l&&(d.stepVersion=l);let u=await (0,n("k2in1").fetchWithRetry)(`${i}/block`,{method:"POST",headers:s,body:JSON.stringify(d)});if(!u.ok)throw new c(u.status);return await u.json()},m=async({documentAri:e,blocks:t,noContent:a=!0})=>{let r=await (0,n("k2in1").fetchWithRetry)(`${i}/block/document/${encodeURIComponent(e)}/references?noContent=${a}`,{method:"PUT",headers:s,body:JSON.stringify({blocks:t})});if(!r.ok)throw new c(r.status);if(!a)return await r.json()},f=e=>{switch(e.status){case 400:case 401:return n("awHlv").SyncBlockError.InvalidRequest;case 403:return n("awHlv").SyncBlockError.Forbidden;case 404:return n("awHlv").SyncBlockError.NotFound;case 409:return n("awHlv").SyncBlockError.Conflict;case 429:return n("awHlv").SyncBlockError.RateLimited;case 500:case 503:case 504:return n("awHlv").SyncBlockError.ServerError}return n("awHlv").SyncBlockError.Errored};class g{async fetchData(e){let t=o(this.sourceAri,e);try{let a=await l({blockAri:t}),r=a.content;if(!r)return{error:n("awHlv").SyncBlockError.NotFound,resourceId:e};return{data:{content:JSON.parse(r),resourceId:t,blockInstanceId:a.blockInstanceId,sourceAri:a.sourceAri,product:a.product},resourceId:e}}catch(t){if(t instanceof c)return{error:f(t),resourceId:e};return{error:n("awHlv").SyncBlockError.Errored,resourceId:e}}}constructor(e){this.sourceAri=void 0,this.sourceAri=e}}class b{async writeData(e){let{resourceId:t}=e,a=r(this.sourceAri,t,this.product),o=this.getVersion?this.getVersion():void 0;try{return await u({blockAri:a,content:JSON.stringify(e.content),stepVersion:o}),{resourceId:t}}catch(e){if(e instanceof c)return{error:f(e),resourceId:t};return{error:(0,n("cFpEg").stringifyError)(e),resourceId:t}}}async createData(e){let{resourceId:t}=e,a=r(this.sourceAri,t,this.product),o=this.getVersion?this.getVersion():void 0;try{return await p({blockAri:a,blockInstanceId:e.blockInstanceId,sourceAri:this.sourceAri,product:this.product,content:JSON.stringify(e.content),stepVersion:o}),{resourceId:t}}catch(e){if(e instanceof c)return{error:f(e),resourceId:t};return{error:(0,n("cFpEg").stringifyError)(e),resourceId:t}}}async deleteData(e){let t=r(this.sourceAri,e,this.product);try{return await d({blockAri:t}),{resourceId:e,success:!0,error:void 0}}catch(t){if(t instanceof c){if(404===t.status)return{resourceId:e,success:!0};return{resourceId:e,success:!1,error:f(t)}}return{resourceId:e,success:!1,error:(0,n("cFpEg").stringifyError)(t)}}}generateResourceIdForReference(e){return`${this.product}/${this.sourceDocumentId}/${e}`}generateResourceId(){return crypto.randomUUID()}async updateReferenceData(e,t){try{return await m({documentAri:this.sourceAri,blocks:e.map(e=>({blockAri:o(this.sourceAri,e.resourceId),blockInstanceId:e.localId})),noContent:t}),{success:!0}}catch(e){if(e instanceof c)return{success:!1,error:f(e)};return{success:!1,error:(0,n("cFpEg").stringifyError)(e)}}}constructor(e,t,a,r){this.sourceAri=void 0,this.sourceDocumentId=void 0,this.getVersion=void 0,this.product=void 0,this.sourceAri=e,this.product=t,this.sourceDocumentId=a,this.getVersion=r}}let E=(e,t,a,r)=>({fetchProvider:new g(e),writeProvider:new b(e,t,a,r)});e.exports.useMemoizedBlockServiceAPIProviders=(e,t,r,o)=>(0,a.useMemo)(()=>E(e,t,r,o),[e,t,r,o])}),s("drwOC",function(e,t){var a=n("42omo");let r={"Content-Type":"application/json",Accept:"application/json"},o={"X-ExperimentalApi":"confluence-agg-beta"},s="/gateway/api/graphql",i="EDITOR_SYNCED_BLOCK_GET",c="EDITOR_SYNCED_BLOCK_CREATE",l="EDITOR_SYNCED_BLOCK_UPDATE",d="EDITOR_SYNCED_BLOCK_DELETE",u=`query ${i} ($id: ID!, $keys: [String]!) {
					confluence {
						page (id: $id) {
							properties(keys: $keys) {
								key,
								value
							}
						}
					}
				}`,p=`query ${i} ($id: ID!, $keys: [String]!) {
	confluence {
		blogPost (id: $id) {
			properties(keys: $keys) {
				key,
				value
			}
		}
	}
}`,m=`mutation ${c} ($input: ConfluenceCreatePagePropertyInput!){
						confluence {
							createPageProperty(input: $input) {
								pageProperty {
									key,
									value
								}
							}
						}
					}`,f=`mutation ${c} ($input: ConfluenceCreateBlogPostPropertyInput!){
	confluence {
		createBlogPostProperty(input: $input) {
			blogPostProperty {
				key,
				value
			}
		}
	}
}`,g=`mutation ${l} ($input: ConfluenceUpdateValuePagePropertyInput!) {
						confluence {
							updateValuePageProperty(input: $input) {
								pageProperty {
									key,
									value
								}
							}
						}
					}`,b=`mutation ${l} ($input: ConfluenceUpdateValueBlogPostPropertyInput!) {
	confluence {
		updateValueBlogPostProperty(input: $input) {
			blogPostProperty {
				key,
				value
			}
		}
	}
}`,E=`mutation ${d} ($input: ConfluenceDeletePagePropertyInput!) {
						confluence {
							deletePageProperty(input: $input) {
								success, errors {
								  message
								}
							}
						}
					}`,h=`mutation ${d} ($input: ConfluenceDeleteBlogPostPropertyInput!) {
						confluence {
							deleteBlogPostProperty(input: $input) {
								success, errors {
								  message
								}
							}
						}
					}`,y=async({pageId:e,key:t,cloudId:a,pageType:c})=>{let l=(0,n("f8eu7").getConfluencePageAri)(e,a,c),d=(0,n("gWAcf").isBlogPageType)(c),m=await (0,n("k2in1").fetchWithRetry)(s,{method:"POST",headers:{...r,...o},body:JSON.stringify({query:d?p:u,operationName:i,variables:{id:l,keys:[t]}})});if(!m.ok)throw Error(`Failed to get content property: ${m.statusText}`);return await m.json()},I=async({pageId:e,key:t,value:a,cloudId:i,pageType:c})=>{let d=(0,n("f8eu7").getConfluencePageAri)(e,i,c),u=(0,n("gWAcf").isBlogPageType)(c),p={...u?{blogPostId:d}:{pageId:d},key:t,value:JSON.stringify(a)};u||(p={...p,useSameVersion:!0});let m={query:u?b:g,operationName:l,variables:{input:p}},f=await fetch(s,{method:"POST",headers:{...r,...o},body:JSON.stringify(m)});if(!f.ok)throw Error(`Failed to update content property: ${f.statusText}`);return await f.json()},S=async({pageId:e,key:t,value:a,cloudId:i,pageType:l})=>{let d=(0,n("f8eu7").getConfluencePageAri)(e,i,l),u=(0,n("gWAcf").isBlogPageType)(l),p={query:u?f:m,operationName:c,variables:{input:{...u?{blogPostId:d}:{pageId:d},key:t,value:JSON.stringify(a)}}},g=await (0,n("k2in1").fetchWithRetry)(s,{method:"POST",headers:{...r,...o},body:JSON.stringify(p)});if(!g.ok)throw Error(`Failed to create content property: ${g.statusText}`);return await g.json()},k=async({pageId:e,cloudId:t,pageType:a,key:i})=>{let c=(0,n("f8eu7").getConfluencePageAri)(e,t,a),l=(0,n("gWAcf").isBlogPageType)(a),u={query:l?h:E,operationName:d,variables:{input:{...l?{blogPostId:c}:{pageId:c},key:i}}},p=await (0,n("k2in1").fetchWithRetry)(s,{method:"POST",headers:{...r,...o},body:JSON.stringify(u)});if(!p.ok)throw Error(`Failed to delete content property: ${p.statusText}`);return await p.json()},v=(e,t)=>e+"-"+t,C=e=>{try{if(""!==e){let t=JSON.parse(e);if("object"==typeof t.content)return t;throw Error("Cannot parse synced block data: required properties missing in value")}throw Error("Cannot parse synced block data: value is empty")}catch(e){throw Error(`Failed to parse synced block data: ${e}`)}},T=e=>{let t="blogPost"in e.data.confluence?e.data.confluence.blogPost:e.data.confluence.page;return t?t.properties?.[0]?n("awHlv").SyncBlockError.Errored:n("awHlv").SyncBlockError.NotFound:n("awHlv").SyncBlockError.Forbidden};class P{async fetchData(e){let{id:t,type:a}=(0,n("f8eu7").getPageIdAndTypeFromConfluencePageAri)(e),r=(0,n("f8eu7").getLocalIdFromConfluencePageAri)(e);try{let o,s,i=v(this.config.contentPropertyKey,r),c={pageId:t,key:i,cloudId:this.config.cloudId,pageType:a};if((0,n("gWAcf").isBlogPageType)(a)){let e=await y(c);s=e.data.confluence.blogPost?.properties?.[0]?.value,o=T(e)}else{let e=await y(c);s=e.data.confluence.page?.properties?.[0]?.value,o=T(e)}if(!s)return{error:o,resourceId:e};let l=C(s);return{data:{content:l.content,blockInstanceId:l.blockInstanceId||r,resourceId:l.resourceId||e,product:l.product||"confluence-page",sourceAri:l.sourceAri||e},resourceId:e}}catch{return{error:n("awHlv").SyncBlockError.Errored,resourceId:e}}}constructor(e){this.config=e}}class w{async writeData(e){let t,{resourceId:a}=e;try{t=(0,n("f8eu7").getPageIdAndTypeFromConfluencePageAri)(a)}catch(e){return{error:(0,n("cFpEg").stringifyError)(e)}}let{id:r,type:o}=t;try{let t=(0,n("f8eu7").getLocalIdFromConfluencePageAri)(a),s=v(this.config.contentPropertyKey,t),i=(0,n("f8eu7").getConfluencePageAri)(r,this.config.cloudId,o),c={...e,product:"confluence-page",sourceAri:i},l={pageId:r,key:s,value:c,cloudId:this.config.cloudId,pageType:o},d=await I(l),u=(0,n("gWAcf").isBlogPageType)(o)?d.data.confluence.updateValueBlogPostProperty.blogPostProperty:d.data.confluence.updateValuePageProperty.pageProperty;if(u?.key===s)return{resourceId:a};return{error:`Failed to update ${o} content property`}}catch{return{error:`Failed to write ${o}`}}}async createData(e){let t,{resourceId:a}=e;try{t=(0,n("f8eu7").getPageIdAndTypeFromConfluencePageAri)(a)}catch(e){return{error:(0,n("cFpEg").stringifyError)(e)}}let{id:r,type:o}=t;try{let t=(0,n("f8eu7").getLocalIdFromConfluencePageAri)(a),s=v(this.config.contentPropertyKey,t),i=(0,n("f8eu7").getConfluencePageAri)(r,this.config.cloudId,o),c={...e,product:"confluence-page",sourceAri:i};return await this.createNewContentProperty(r,s,c,o),{resourceId:a}}catch(e){return Promise.resolve({error:(0,n("cFpEg").stringifyError)(e)})}}async deleteData(e){let t,a,r;try{r=(0,n("f8eu7").getPageIdAndTypeFromConfluencePageAri)(e)}catch(t){return{resourceId:e,success:!1,error:(0,n("cFpEg").stringifyError)(t)}}let{id:o,type:s}=r;try{let r=(0,n("f8eu7").getLocalIdFromConfluencePageAri)(e),i=v(this.config.contentPropertyKey,r),c={pageId:o,key:i,cloudId:this.config.cloudId,pageType:s};t=await k(c),a=(0,n("gWAcf").isBlogPageType)(s)?t.data.confluence.deleteBlogPostProperty:t.data.confluence.deletePageProperty}catch(t){return{resourceId:e,success:!1,error:(0,n("cFpEg").stringifyError)(t)??`Fail to delete ${s} content property`}}return{resourceId:e,success:a.success,error:a.errors.join()}}generateResourceId(e,t){return(0,n("f8eu7").resourceIdFromConfluencePageSourceIdAndLocalId)(e,t)}generateResourceIdForReference(e){return e}updateReferenceData(e,t){return Promise.resolve({success:!0})}constructor(e){this.config=e,this.product="confluence-page",this.createNewContentProperty=async(e,t,a,r)=>{let o={pageId:e,key:t,value:a,cloudId:this.config.cloudId,pageType:r};if((0,n("gWAcf").isBlogPageType)(r)){let e=await S(o);return e.data.confluence.createBlogPostProperty.blogPostProperty?.key===t?t:Promise.reject("Failed to create blog post content property")}{let e=await S(o);return e.data.confluence.createPageProperty.pageProperty?.key===t?t:Promise.reject("Failed to create page content property")}}}}let x=e=>({fetchProvider:new P(e),writeProvider:new w(e)}),_=e=>x({cloudId:e,contentPropertyKey:"editor-synced-block"});e.exports.useMemoizedContentAPIProviders=e=>(0,a.useMemo)(()=>_(e),[e])}),s("1RH0O",function(e,t){var a=n("42omo");let r={"Content-Type":"application/json",Accept:"application/json"},o={"X-ExperimentalApi":"confluence-agg-beta"},s="EDITOR_SYNCED_BLOCK_GET_SOURCE_INFO",i=`query ${s} ($id: ID!) {
	content (id: $id) {
		nodes {
			id
			links {
				base
			}
			space {
				key
			}
			subType
			title
		}
	}
}`,c=async e=>{let t=await (0,n("k2in1").fetchWithRetry)("/gateway/api/graphql",{method:"POST",headers:{...r,...o},body:JSON.stringify({query:i,operationName:s,variables:{id:e}})});if(!t.ok)throw Error(`Failed to get url: ${t.statusText}`);return await t.json()},l=async(e,t,a)=>{try{let r,{type:o}=(0,n("f8eu7").getPageIdAndTypeFromConfluencePageAri)(e),s=await c(e),i=s.data?.content?.nodes?.[0],l=i?.title,{base:d}=i?.links||{};return d&&i?.space?.key&&i?.id&&(r=(0,n("gWAcf").isBlogPageType)(o)?`${d}/spaces/${i.space.key}/blog/edit-v2/${i.id}`:"live"===i.subType?`${d}/spaces/${i.space.key}/pages/${i.id}`:`${d}/spaces/${i.space.key}/pages/edit-v2/${i.id}`),r=r&&t?`${r}#block-${t}`:r,l&&r||a?.((0,n("cFpEg").getSourceInfoErrorPayload)("Failed to get confluence page source info")),Promise.resolve({title:l,url:r})}catch(e){return(0,n("hWRJP").logException)(e,{location:"editor-synced-block-provider/sourceInfo"}),a?.((0,n("cFpEg").getSourceInfoErrorPayload)(e.message)),Promise.resolve(void 0)}};class d extends n("i0VEL").NodeDataProvider{}class u extends d{setProviderOptions(e){this.providerOptions=e}getProduct(){return this.writeProvider.product}isNodeSupported(e){return"syncBlock"===e.type||"bodiedSyncBlock"===e.type}nodeDataKey(e){return e.attrs.resourceId}fetchNodesData(e){return Promise.allSettled([...new Set(e.map(e=>e.attrs.resourceId))].map(e=>this.fetchProvider.fetchData(e).then(e=>e,()=>({error:n("awHlv").SyncBlockError.Errored,resourceId:e})))).then(e=>e.filter(e=>"fulfilled"===e.status).map(e=>e.value))}async writeNodesData(e,t){return(await Promise.allSettled(e.map((e,a)=>t[a].content?this.writeProvider.writeData(t[a]):Promise.reject("No Synced Block content to write")))).map(e=>"fulfilled"===e.status?e.value:{error:e.reason})}createNodeData(e){return this.writeProvider.createData(e).then(e=>e,e=>({error:e}))}async deleteNodesData(e){return(await Promise.allSettled(e.map(e=>this.writeProvider.deleteData(e)))).map((t,a)=>"fulfilled"===t.status?t.value:{resourceId:e[a],success:!1,error:t.reason})}getSourceId(){return this.sourceId}fetchSyncBlockSourceInfo(e,t,a,r){if(!t||!a)return Promise.reject(Error("Source ari or source product is undefined"));switch(a){case"confluence-page":return l(t,e,r);case"jira-work-item":return Promise.reject(Error("Jira work item source product not supported"));default:return Promise.reject(Error(`${a} source product not supported`))}}generateResourceId(e,t){return this.writeProvider.generateResourceId(e,t)}generateResourceIdForReference(e){return this.writeProvider.generateResourceIdForReference(e)}getSyncedBlockRendererProviderOptions(){return this.providerOptions}retrieveSyncBlockParentInfo(e,t){if(e&&t)switch(t){case"confluence-page":return{contentId:(0,n("f8eu7").getPageIdAndTypeFromConfluencePageAri)(e).id,contentProduct:t};case"jira-work-item":throw Error("Jira work item source product not supported");default:throw Error(`${t} source product not supported`)}}updateReferenceData(e,t){return this.writeProvider.updateReferenceData(e,t)}constructor(e,t,a){super(),this.name="syncBlockProvider",this.fetchProvider=void 0,this.writeProvider=void 0,this.sourceId=void 0,this.providerOptions=void 0,this.fetchProvider=e,this.writeProvider=t,this.sourceId=a,this.providerOptions={}}}e.exports.useMemoizedSyncedBlockProvider=(e,t,r,o,n)=>{let s=(0,a.useMemo)(()=>new u(e,t,r),[e,t,r]);s.setProviderOptions(o);let i=n?n():void 0;return i&&s.setSSRData(i),s}}),s("kLzei",function(t,a){var r=n("42omo"),o=n("5spQU"),s=n("di8q4");let i=({children:t})=>e(r).createElement("span",{className:(0,n("gMc0m").default)(["_11c81o8v _1reo15vq _18m915vq _19pk1wug _2hwx1wug _otyr1wug _18u01wug _1e0c1o8l _1bah1h6o _1ul97vkz"])},t),c=t=>{let{displayName:a,userId:s,isAdminHubAIEnabled:i}=(0,n("bQm3c").useSessionData)(),c=(0,n("84PmI").useIsEligibleRovoAwareness)()&&(0,n("6mKj3").expValEquals)("rovo_awareness_experiment","cohort","test"),l=(0,n("9wGTI").fg)("use_frontend_feature_encoding_sdk")?(0,o.isFeatureEnabled)("confluence","confluence-ai"):!(0,n("lzcvT").isFedRamp)();return i&&l&&(0,n("6mKj3").expVal)("confluence-ai-linking-ai-snippets","should_render_ai_snippet",!1)?e(r).createElement(n("i5WUp").AISnippetWithRelayEnvironment,{...t,showAwareness:c,userId:s??void 0,displayName:a??void 0}):t.fallbackComponent},l=(0,n("2XqLN").default)(()=>({renderers:{emoji:(t,a="SmartCard",o="page")=>e(r).createElement(n("ge2sX").SessionData,null,a=>e(r).createElement(n("f7i8j").SessionDataContext.Provider,{value:a},e(r).createElement(s.LazyEmojiComponentLoader,{emoji:t,height:16,context:"smartCard",wrapper:i,contentType:o}))),snippet:(0,n("9wGTI").fg)("cc-ai-snippet-renderer-gate")?c:void 0}}));t.exports.getSmartCardRenderers=l}),s("2SowE",function(e,t){e.exports.extendPayloadAttributes=function(e,t){return{...e,attributes:{...e.attributes,...t}}},e.exports.getProseMirrorFMPTimestamp=(e,t)=>Number.isFinite(e)&&Number.isFinite(t)?Math.round(e+t):void 0,e.exports.extractAttributesFromContext=e=>e.filter(e=>e.attributes&&"object"==typeof e.attributes&&!Array.isArray(e.attributes)).reduce((e,t)=>({...e,...t.attributes}),{})}),s("hEeUR",function(t,a){var r=n("3u0dr"),o=n("frIzR"),s=n("42omo"),i=n("T1bCI");let c=()=>{let[e,t]=(0,s.useState)(l()),a=!(0,n("3jwuS").useIsCurrentPageLive)();return(0,s.useEffect)(()=>{let e=e=>{(0,n("6mKj3").expVal)("confluence_pgxp_p2m_batch_1","isEnabled",!1)?t(e?.detail?.height??0):t(l())};return a&&document.addEventListener("forgePageBannerHeightUpdated",e),()=>{a&&document.removeEventListener("forgePageBannerHeightUpdated",e)}},[a]),{isForgePageBannerFixed:a,forgePageBannerHeight:e}},l=()=>"undefined"==typeof document?0:parseInt(getComputedStyle(document.documentElement).getPropertyValue("--forge-page-banner-height"))||0;var d=n("fyKZ5");let u=(0,s.memo)((0,r.isReactCompilerActiveV1)()?t=>{let a,r,l=(0,o.c)(7),u=(0,n("gz8ZY").useIsNav4Enabled)(),{includeTopNav:p}=(0,s.useContext)(n("jxpvN").BannerContext),{atlGeneralWebPanelHeight:m}=(0,n("8WfxO").useATLGeneralWebPanelListener)(),{forgePageBannerHeight:f}=c();return l[0]===Symbol.for("react.memo_cache_sentinel")?(a=[n("gqqjz").FlagsStateContainer,n("hrAmX").BannerStateContainer,n("1a6Dn").FloatingBannerStateContainer],l[0]=a):a=l[0],l[1]!==m||l[2]!==f||l[3]!==p||l[4]!==u||l[5]!==t?(r=e(s).createElement(i.Subscribe,{to:a},(a,r,o)=>{let n=r.getTotalHeight(p),i=o.getFloatingHeight()+(t.isContentHeaderFixedAtTop?55+m+f:0),c={offsetTop:n+i};return u&&(c={offsetTop:i,defaultScrollRootId_DO_NOT_USE:"AkMainContent",shouldAddDefaultScrollRootOffsetTop_DO_NOT_USE:!0}),e(s).createElement(d.ADFRendererComponent,{flags:a,...c,...t})}),l[1]=m,l[2]=f,l[3]=p,l[4]=u,l[5]=t,l[6]=r):r=l[6],r}:t=>{let a=(0,n("gz8ZY").useIsNav4Enabled)(),{includeTopNav:r}=(0,s.useContext)(n("jxpvN").BannerContext),{atlGeneralWebPanelHeight:o}=(0,n("8WfxO").useATLGeneralWebPanelListener)(),{forgePageBannerHeight:l}=c();return e(s).createElement(i.Subscribe,{to:[n("gqqjz").FlagsStateContainer,n("hrAmX").BannerStateContainer,n("1a6Dn").FloatingBannerStateContainer]},(n,i,c)=>{let u=i.getTotalHeight(r),p=c.getFloatingHeight()+(t.isContentHeaderFixedAtTop?55+o+l:0),m={offsetTop:u+p};return a&&(m={offsetTop:p,defaultScrollRootId_DO_NOT_USE:"AkMainContent",shouldAddDefaultScrollRootOffsetTop_DO_NOT_USE:!0}),e(s).createElement(d.ADFRendererComponent,{flags:n,...m,...t})})});u.displayName="ADFRenderer",t.exports.ADFRenderer=u}),s("fyKZ5",function(t,a){var r=n("42omo"),o=n("67O0h"),s=n("7VJPz"),i=n("8cjD5"),c=n("cbvYp");let l=(0,n("jmjWc").LoadablePaint)({__loadable_id__:"lL-x8",name:"CardsExtensionLoader",loader:async()=>(await n("3oriB")).CardsExtension}),d=(0,n("jmjWc").LoadablePaint)({__loadable_id__:"d8j05",name:"PlatformSpotlightExtensionLoader",loader:async()=>(await n("6ZDrU")).SpotlightExtension}),u=(0,n("jmjWc").LoadablePaint)({__loadable_id__:"24LHW",name:"PlatformSearchExtensionLoader",loader:async()=>(await n("6DFLT")).CustomSearchExtension}),p=(0,n("jmjWc").LoadablePaint)({__loadable_id__:"khj-w",name:"LinksMenuLoader",loader:async()=>(await n("jYzll")).LinksMenu}),m=(0,n("jmjWc").LoadablePaint)({__loadable_id__:"iP7CN",name:"CarouselLoader",loader:async()=>(await n("bVGwu")).Carousel}),f=({contentId:t})=>{let a={[n("kcoxM").CARDS_EXTENSION_TYPE]:()=>e(r).createElement(e(r).Fragment,null),[n("5Ac5G").carouselExtensionType]:()=>e(r).createElement(e(r).Fragment,null),[n("cVaAA").LINKS_MENU_EXTENSION_TYPE]:()=>e(r).createElement(e(r).Fragment,null),[n("bl1ay").HUB_ELEMENT_PLACEHOLDER_EXTENSION_TYPE]:()=>e(r).createElement(e(r).Fragment,null),[n("cNwLI").SPOTLIGHT_EXTENSION_TYPE]:()=>e(r).createElement(e(r).Fragment,null),[n("lf1vG").SEARCH_EXTENSION_TYPE]:()=>e(r).createElement(e(r).Fragment,null)};return t&&(a[n("kcoxM").CARDS_EXTENSION_TYPE]=a=>e(r).createElement(l,{extensionNode:a,contentId:t,mode:n("4cOi8").ExtensionMode.RENDERER,propsProvider:c.ConfluenceDependenciesProvider}),a[n("5Ac5G").carouselExtensionType]=a=>e(r).createElement(m,{extensionNode:a,contentId:t,propsProvider:c.ConfluenceDependenciesProvider}),a[n("cVaAA").LINKS_MENU_EXTENSION_TYPE]=a=>e(r).createElement(p,{mode:n("4cOi8").ExtensionMode.RENDERER,extensionNode:a,contentId:t,propsProvider:c.ConfluenceDependenciesProvider}),a[n("cNwLI").SPOTLIGHT_EXTENSION_TYPE]=a=>e(r).createElement(d,{contentId:t,extensionNode:a,mode:n("4cOi8").ExtensionMode.RENDERER,propsProvider:c.ConfluenceDependenciesProvider}),a[n("bl1ay").HUB_ELEMENT_PLACEHOLDER_EXTENSION_TYPE]=()=>null,a[n("lf1vG").SEARCH_EXTENSION_TYPE]=a=>e(r).createElement(u,{mode:n("4cOi8").ExtensionMode.RENDERER,contentId:t,extensionNode:a,propsProvider:c.ConfluenceDependenciesProvider})),a};var g=n("kLzei"),b=n("32x2E"),E=n("gj42z"),h=n("9Eka4"),y=n("04e9M");async function I(e,t){let a=t.map(e=>{let{objectKey:t,state:a}=e;return{taskId:t.localId,status:"DONE"===a?"CHECKED":"UNCHECKED"}});try{return await (0,n("hp2SH").getApolloClient)().mutate({mutation:n("eXfot").SetBatchedTaskStatusMutation,variables:{contentId:e,tasks:a,trigger:"VIEW_PAGE"}})}catch(e){(await (0,y.getAnalyticsWebClient)()).sendOperationalEvent({source:"page",action:"batchTaskUpdate",actionSubject:"checkbox",attributes:{error:e.message||String(e),stack:e.stack}})}}var S=n("kyRHQ");let k={enabled:!0,severityDegradedThreshold:4747,severityNormalThreshold:3775},v=(0,n("7W8i8").getLogger)("ADFRenderer"),C={enabled:!0,thresholds:{blocking:1.5,degraded:1}},T=({hasViewUserProfilePermission:e,handleActionToggle:t,handleInviteItemClick:a,getDataProviders:r,providerFactory:o,isExternalShare:s,contentId:i,spaceKey:c,pageContextContentId:l,cloudId:d,userId:u,userRole:p,flags:m,profilecardProvider:f,intl:g,mediaToken:E,emojiResourceParams:h})=>{let y={};if(r&&Object.assign(y,r()),(i||E)&&(y.mediaProvider=(0,n("4IoVL").createRendererMediaProvider)({contentId:i,spaceKey:c,mediaDspContentId:l,isExternalShare:s,mediaToken:E}),y.taskDecisionProvider=Promise.resolve(new(0,n("3WO8q").ConfluenceTaskDecisionProvider)(g,m,i,t))),d&&u&&(y.mentionProvider=(0,n("dtVue").createMentionsConfig)(d,u,void 0,void 0,a,p).then(e=>e.mentionResource).catch(e=>("production"!==S.env.NODE_ENV&&v.error`Failed to initialise mention resource ${e}`,Promise.reject()))),h&&d&&(y.emojiProvider=(0,b.getEmojiProvider)(n("ibzAc").default,{...h,allowAnonymousAccess:!0})),d&&e&&(y.profilecardProvider=f),i&&c&&(y.contextIdentifierProvider=Promise.resolve({containerId:c,objectId:i,product:"confluence"})),y.cardProvider=Promise.resolve(new(0,n("477dG").EditorCardProvider)(void 0,void 0,"CONFLUENCE")),Object.keys(y).length)for(let e of(o=o||n("4FxUL").default.create({}),Object.keys(y)))o.setProvider(e,y[e]);return{providerFactory:o,providers:y}},P={"com.atlassian.confluence.project-linker":()=>e(r).createElement(e(r).Fragment,null)},w=()=>(0,n("dh538").fg)("platform_renderer_unsupported_content_tracking")?C:void 0,x={},_=()=>x,A=[],D=(0,r.memo)(t=>{let{document:a,dataProviders:c,extensionHandlers:l=x,getExtensionHandlers:d=_,eventHandlers:u,appearance:p,contentMode:m,adfStage:y="stage0",portal:S,onRendered:v,renderWhenReady:C,allowStickyHeaders:D=!0,allowPlaceholderText:R=!1,isTruncatedContent:N,maxHeight:M,fadeOutHeight:L,flags:O,offsetTop:j,defaultScrollRootId_DO_NOT_USE:B,shouldAddDefaultScrollRootOffsetTop_DO_NOT_USE:F,mediaToken:U,onError:H,UNSTABLE_allowTableAlignment:W=!0,UNSTABLE_allowTableResizing:q=!0,UNSTABLE_isPresentational:K=!1,extensionViewportSizes:V=A,onEmojiLoadSuccess:Y,onEmojiLoadFail:$,allowRendererContainerStyles:G,...X}=t,z=(0,n("8C5kA").default)(),[Q,J]=(0,r.useState)(!1),Z=window.__SSR_SMARTLINKS__,ee=(0,n("i6Ps3").isPageSSRd)(),et=(0,n("lhTEt").useStoreOptions)(Z,ee),ea=ee&&!(0,n("1iSzD").isEmbeddedConfluence_DO_NOT_USE)()&&!(0,n("lJlG6").isMobileApp_DO_NOT_USE)(),{cloudId:er,userId:eo,featureFlags:en,isLicensed:es,isLoggedIn:ei,isAdminHubAIEnabled:ec}=(0,n("bQm3c").useSessionData)(),[el]=(0,n("ep3mz").usePageSpaceKey)(),[ed]=(0,n("ep3mz").usePageContentId)(),[eu]=(0,n("ep3mz").useContentType)(),{openCoreInvites:ep,userRole:em}=(0,r.useContext)(n("hSHWm").CoreInvitesContext),[ef,eg]=(0,r.useState)(!1),eb=t.contentId||ed,eE=t.contentType||eu,{canViewUserProfile:eh}=(0,n("jyPfN").useViewUserProfile)(),ey=(0,n("e4o8D").useRenderServerPlaceholder)(),eI=(0,r.useRef)(new(0,n("gxhb8").TaskBatcher)((0,n("6mKj3").expVal)("confluence_frontend_task_batching_interval","value",3e3))),eS=(0,n("4GlQ9").useFeedFollow)(),ek=(0,r.useCallback)(e=>{I(eb,e).then(()=>{J(!1),eg(!0)})},[eb,eg]),ev=(0,r.useCallback)((e,t)=>{J(!0),eI.current.add({objectKey:e,state:t})},[eI]);(0,r.useEffect)(()=>(a&&(0,n("edEsl").registerGlobalMediaViewedListener)({contentType:eE}),v&&v(),eI.current.onFlush(ek),()=>{a&&(0,n("edEsl").removeGlobalMediaViewedListener)()}),[eb,eI,ek]),(0,r.useEffect)(()=>{eg(!1)},[eb]),(0,r.useEffect)(()=>{let e=e=>{Q&&(e.preventDefault(),e.returnValue="")};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}},[Q,eb]);let eC=(0,r.useMemo)(()=>{if(er)return(0,n("yuV6Z").createEmojiProviderParameters)({cloudId:er,userId:eo,isLicensed:es,isLoggedIn:ei,onEmojiLoadSuccess:Y,onEmojiLoadFail:$})},[er,eo,es,ei,Y,$]),eT=(0,r.useMemo)(()=>{if(eC)return(0,b.getEmojiConfig)(eC.cloudId,eC.userId,eC.disableUpload,eC.emojiSSRConfig,void 0,eC.emojiLoadCallbacks)},[eC]),{isExternalShareRequest:eP}=(0,r.useContext)(n("gXrHX").ExternalShareContext),{push:ew}=(0,n("dPJCf").useRouteActions)(),ex=(0,r.useMemo)(()=>({...d?.(),...l,...f({contentId:eb}),...(0,s.getRendererSmartButtonExtensionHandlers)({contentId:eb,contentType:eE,cloudId:er}),...P}),[l,d,eb,eE,er]),e_=(0,n("iP9x4").useMediaSSRModeAndAuthConfig)({contentId:eb,spaceKey:el,isExternalShare:eP,mediaToken:U}),eA=(0,r.useCallback)(e=>{H?.(e)},[H]),{shimAdfUrls:eD}=(0,n("4o1RV").useNavigationPolicy)(),eR=(0,n("7BsWq").useEditorFeatureFlags)(),eN=(0,n("brsfB").useProfilecardProvider)({push:ew,userId:eo,cloudId:er,featureFlags:en}),eM=(0,n("4IoVL").controlDataExportOnCertainFeatures)(window.location.pathname),eL=(0,r.useMemo)(()=>({allowNestedHeaderLinks:!0,activeHeadingId:t.queryHash}),[t.queryHash]),eO=(0,r.useMemo)(()=>({allowLinking:!0,allowCaptions:!0,featureFlags:{mediaInline:!0},ssr:e_}),[e_]),{isEligibleCreateNewWhiteboard:ej}=(0,n("9aXRY").useIsEligibleCreateNewWhiteboard)(),eB=(0,r.useMemo)(()=>({ssr:ea,hideHoverPreview:!1,CompetitorPrompt:ej?n("bODUD").PromptPopupContainer:void 0}),[ea,ej]),eF=(0,r.useMemo)(()=>D?{offsetTop:j,defaultScrollRootId_DO_NOT_USE:B,shouldAddDefaultScrollRootOffsetTop_DO_NOT_USE:F}:void 0,[D,j,B,F]),eU=(0,r.useMemo)(()=>T({contentId:eb,spaceKey:el,pageContextContentId:ed,cloudId:er,userId:eo,flags:O,featureFlags:en,push:ew,intl:z,providerFactory:c,profilecardProvider:eN,isExternalShare:eP,handleActionToggle:ev,hasViewUserProfilePermission:eh,handleInviteItemClick:ep,userRole:em,mediaToken:U,emojiResourceParams:eC}),[eb,el,ed,er,eo,O,en,ew,z,c,eN,eP,ev,eh,ep,em,U,eC]),eH=(0,h.useMemoizedSyncedBlockProviderNodeComponent)({doc:a,cloudId:er,userId:eo,contentId:eb,contentType:eE,mergedDataProviderDefinitions:eU.providers}),eW=(0,r.useMemo)(()=>{if(eH)return{syncBlock:eH}},[eH]),{setPageAdf:eq}=(0,n("8WQTF").useRendererActionsDispatch)();if((0,r.useEffect)(()=>{(0,n("dh538").fg)("platform_editor_aifc_in_page_comment")&&("full-page"===p||"full-width"===p||"max"===p)&&(a?eq(eD(a)):eq(void 0))},[p,a,eq,eD]),!a)return null;let eK=eD(a),eV=e(r).createElement(e(r).Fragment,null,("full-page"===p||"full-width"===p)&&e(r).createElement(i.PageLoadMark,{"data-testid":"pageLoadMarkTestId",name:"onBeforeAkRenderer"}),e(r).createElement(n("1SPMi").RendererAnalyticsListener,{objectId:eb,objectType:eE},e(r).createElement(o.RendererWithAnalytics,{enableSsrInlineScripts:!1,noOpSSRInlineScript:ey,adfStage:y,document:eK,appearance:p,contentMode:m,stickyHeaders:eF,extensionHandlers:ex,eventHandlers:u,featureFlags:eR,dataProviders:eU.providerFactory,portal:S,allowColumnSorting:!0,allowHeadingAnchorLinks:eL,allowAltTextOnImages:!0,media:eO,emojiResourceConfig:eT,allowCopyToClipboard:!0,allowWrapCodeBlock:!0,...X,useSpecBasedValidator:!0,truncated:N,maxHeight:M,fadeOutHeight:L,analyticsEventSeverityTracking:k,unsupportedContentLevelsTracking:w(),allowPlaceholderText:R,allowCustomPanels:!0,smartLinks:eB,extensionViewportSizes:V,onError:eA,UNSTABLE_allowTableAlignment:W,UNSTABLE_allowTableResizing:q,UNSTABLE_isPresentational:K,allowRendererContainerStyles:G,...eW&&{nodeComponents:eW}}),C&&C()),e(r).createElement(n("fgQGl").ContentRefetchHandler,{contentId:eb,shouldRefetch:ef}),e(r).createElement(E.FeedFollowErrorDisplay,{feedConfigError:eS.feedConfigError,mutationError:eS.mutationError,showErrorFlag:!0}));return e(r).createElement(n("6M71K").ConfluenceSmartCardProvider,{...(0,g.getSmartCardRenderers)(),...et,isAdminHubAIEnabled:ec,shouldControlDataExport:eM,product:"CONFLUENCE"},eV)});t.exports.ANALYTICS_EVENT_SEVERITY_TRACKING=k,t.exports.UNSUPPORTED_CONTENT_THRESHOLDS=C,t.exports.ADFRendererComponent=D}),s("7VJPz",function(t,a){var r=n("42omo");let o=(0,n("jmjWc").LoadableAfterPaint)({__loadable_id__:"LmILK",name:"SmartButtonLoader",loader:async()=>(await n("cMXyl")).SmartButton});t.exports.getRendererSmartButtonExtensionHandlers=({contentId:t,contentType:a,cloudId:s})=>{let i={};return i[n("au7xi").smartButtonExtensionType]=i=>{let c=t?n("a2xFu").ConfluencePageAri.create({siteId:s,pageId:t}).toString():void 0,l=n("kYvrE").ConfluenceSiteAri.create({siteId:s}).toString(),d=(0,n("5kjCz").getExperienceName)(n("5kjCz").RENDERER,i);return e(r).createElement(e(r).Fragment,null,e(r).createElement(n("4KFTW").MacroExperienceStart,{name:d,contentId:t??"",mode:n("5kjCz").RENDERER,extensionKey:i.extensionKey,attributes:(0,n("5kjCz").getMacroAttributesFromADFNode)(i),timeout:n("aJPUt").ExperienceTimeout.MACRO_LOAD}),e(r).createElement(o,{ruleId:i.parameters?.ruleId,scopeId:i.parameters?.scopeId,pageAri:c,site:l,smartButtonName:i.parameters?.smartButtonName,experienceTrackerName:d,contentId:t??"",contentType:a??"",isViewMode:!0}))},i}}),s("au7xi",function(e,t){e.exports.smartButtonExtensionType="com.atlassian.automation.smart-button"}),s("cMXyl",function(e,t){let a=n("4mJKd")(5);e.exports=Promise.all([a("6wr18"),a("gctwz"),a("7f9Fz"),a("ffEVr"),a("lhkXg")]).then(()=>n("hLSQl"))}),s("4mJKd",function(e,t){e.exports=e=>t=>import(n("8tirZ").shardUrl(n("02nRr").resolve(t),e))}),s("8tirZ",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.applyShardToDomain=s,e.exports.domainShardingKey=void 0,e.exports.getDomainShardIndex=r,e.exports.shardUrl=function(e,t){return globalThis[a]?i(e,t):e},e.exports.shardUrlUnchecked=i;let a="__ATLASPACK_ENABLE_DOMAIN_SHARDS";function r(e,t){let a=t+1,r=e.split("").reduce((e,t)=>{let r=(e<<a)-e+t.charCodeAt(0);return r&r},0);return(r%=a)<0&&(r+=a),r}let o=/-\d+$/;function n(e){if(!o.test(e))return e;let t=e.lastIndexOf("-");return e.slice(0,t)}function s(e,t){let a=e.indexOf("."),r=0===t?"":`-${t-1}`;if(-1===a)return`${n(e)}${r}`;let o=n(e.slice(0,a));return`${o}${r}${e.slice(a)}`}function i(e,t){let a=new URL(e),o=r(function(e){let t=e.lastIndexOf("/");if(-1===t||t===e.length-1)throw Error("Expected an absolute URL with a file name, unable to apply sharding.");return e.slice(t+1)}(a.pathname),t);return a.hostname=s(a.hostname,o),a.toString()}e.exports.domainShardingKey=a}),s("02nRr",function(e,a){t(e.exports,"register",()=>r,e=>r=e),t(e.exports,"resolve",()=>o,e=>o=e);var r,o,n=new Map;r=function(e,t){for(var a=0;a<t.length-1;a+=2)n.set(t[a],{baseUrl:e,path:t[a+1]})},o=function(e){var t=n.get(e);if(null==t)throw Error("Could not resolve bundle with id "+e);return new URL(t.path,t.baseUrl).toString()}}),s("fgQGl",function(e,t){var a=n("42omo");e.exports.ContentRefetchHandler=({contentId:e,shouldRefetch:t,refetchImmediately:r,onRefetchComplete:o})=>{let s=(0,n("dPJCf").useHistory)(),[i]=(0,n("ep3mz").useContentType)(),c=(0,n("cLo2u").useSpaceKey)();return(0,a.useEffect)(()=>{let a;if(t&&e){let t="blogpost"===i?n("lpxTx").ContentBlogUnifiedQuery:n("61vTv").ContentUnifiedQuery,l={contentId:e,spaceKey:c,useNewContentTopper:!0},d=async()=>{let e;try{let a=await (0,n("hp2SH").getApolloClient)().query({query:t,context:{single:!0},fetchPolicy:"network-only",variables:l});e=a.data.content?.nodes?.[0]?.version?.number}catch{}o&&o(e)};r?d():a=s?.listen(d)}return()=>{a&&a()}},[t]),null}}),s("cNwLI",function(e,t){e.exports.CARDS_EXTENSION_TYPE="com.atlassian.confluence.link-cards",e.exports.SPOTLIGHT_EXTENSION_TYPE="com.atlassian.confluence.spotlight",e.exports.SECTION_EXTENSION_TYPE="com.atlassian.confluence.hub-section",e.exports.RESOURCE_TILES_EXTENSION_TYPE="com.atlassian.confluence.knowledge-cards",e.exports.LINKS_MENU_EXTENSION_TYPE="com.atlassian.confluence.links-menu",e.exports.CAROUSEL_EXTENSION_TYPE="com.atlassian.confluence.carousel",e.exports.SEARCH_EXTENSION_TYPE="com.atlassian.confluence.company-hub-search",e.exports.HUB_ELEMENT_PLACEHOLDER_EXTENSION_TYPE="com.atlassian.confluence.hub-element-placeholder",e.exports.DEFAULT_BRANDING_COLOR="#DDDEE1",e.exports.HUB_PRIMARY_COLOR_CSS_VAR="--hub-primary-color",e.exports.HUB_PRIMARY_TEXT_COLOR_CSS_VAR="--hub-primary-text-color"}),s("kcoxM",function(e,t){e.exports.CARDS_EXTENSION_TYPE="com.atlassian.confluence.link-cards",e.exports.CARDS_EXTENSION_KEY="cards",e.exports.CARDS_EXTENSION_ANALYTIC_SOURCE="cardsExtension",e.exports.CARDS_EXTENSION_CONFIG_ANALYTIC_SOURCE="cardsExtensionConfig",e.exports.CARDS_EXTENSION_CONFIG_BACKGROUND_ANALYTIC_SOURCE="cardsExtensionConfigBackgroundColor",e.exports.CARDS_EXTENSION_CONFIG_BORDER_ANALYTIC_SOURCE="cardsExtensionConfigBorderColor",e.exports.CARDS_EXTENSION_CONFIG_TEXT_ANALYTIC_SOURCE="cardsExtensionConfigTextColor",e.exports.CARDS_EXTENSION_VERSION_2="2",e.exports.CARDS_EXTENSION_VERSION_3="3",e.exports.CARDS_EXTENSION_VERSION_4="4",e.exports.CARDS_EXTENSION_VERSION_5="5",e.exports.CARDS_IMAGES_V5=[{src:"https://images.unsplash.com/photo-1571327352610-1c5484ccc840?auto=format&fit=crop&q=80&w=450",alt:"closed wooden window"},{src:"https://images.unsplash.com/photo-1566486106118-e1c24ad08802?auto=format&fit=crop&q=80&w=450",alt:"green coconut trees"},{src:"https://images.unsplash.com/photo-1602021224139-a6ba7e601732?auto=format&fit=crop&q=80&w=450",alt:"white and black striped chair"},{src:"https://images.unsplash.com/photo-1722259038071-6082eaf397ff?auto=format&fit=crop&q=80&w=450",alt:"surfboard on top of a cement wall"},{src:"https://images.unsplash.com/photo-1555001356-333dbc0f8b48?auto=format&fit=crop&q=80&w=450",alt:"white stairs"},{src:"https://images.unsplash.com/photo-1680258551363-6b5fd1ac2048?auto=format&fit=crop&q=80&w=450",alt:"swimming pool tiles"}]}),s("lf1vG",function(e,t){e.exports.SEARCH_EXTENSION_VERSION_1="1",e.exports.SEARCH_EXTENSION_KEY="company-hub-search",e.exports.SEARCH_EXTENSION_TYPE="com.atlassian.confluence.company-hub-search",e.exports.CUSTOM_SEARCH_EXTENSION_ANALYTIC_SOURCE="customSearchExtension"}),s("cVaAA",function(e,t){e.exports.LINKS_MENU_EXTENSION_TYPE="com.atlassian.confluence.links-menu",e.exports.LINKS_MENU_EXTENSION_ANALYTIC_SOURCE="linksMenuExtension"}),s("5Ac5G",function(e,t){e.exports.carouselExtensionType="com.atlassian.confluence.carousel",e.exports.carouselExtensionKey="carousel",e.exports.carouselContentAnalyticSource="carouselExtension",e.exports.carouselConfigAnalyticSource="carouselExtensionConfig",e.exports.AUTOPLAY_SECONDS=8,e.exports.ARIA_CONTROLS_PREFIX="carousel-navigation-frame-",e.exports.CAROUSEL_VERSION_2="2",e.exports.FRAMES_LIMIT_V2=10}),s("bl1ay",function(e,t){e.exports.HUB_ELEMENT_PLACEHOLDER_EXTENSION_TYPE="com.atlassian.confluence.hub-element-placeholder",e.exports.HUB_ELEMENT_PLACEHOLDER_EXTENSION_KEY="hub-element-placeholder"}),s("cbvYp",function(t,a){var r=n("42omo"),o=n("b3j2Y"),s=n("4PPzL"),i=n("lOeVN"),c=n("bAIqi");let l=e=>{let[t,a]=(0,r.useState)(),o=(0,n("7QM6o").useSpaceId)(),{activationId:s,cloudId:i}=(0,n("bQm3c").useSessionData)(),{createAnalyticsEvent:c}=(0,n("inPa6").useAnalyticsEvents)();(0,r.useEffect)(()=>{(async()=>{let t=new(0,n("k00oi").default);try{let r=!!e&&await t.fetchData(e);if(!r||!r.meta)return;let{containerId:o,tenantId:s,objectId:i}=r.meta||{};if(!i)return;let c=await (0,n("5Gcps").getClickAndViewEventObjectIdFromLinkData)(i,o);a({containerId:o,tenantId:s,objectId:c})}catch(e){(0,n("5ZqQS").getMonitoringClient)().submitError(e,{attribution:n("3IBnw").Attribution.COMPANY_HUB}),(0,n("7Sm4c").markErrorAsHandled)(e)}})()},[e]);let{tenantId:l,objectId:d}=t||{};return{handleClick:t?()=>{l===i&&c?.((0,n("5Gcps").generateClickEventPayload)(s,i,d,o)).fire()}:void 0,handleView:t?()=>{l===i&&c?.((0,n("5Gcps").generateViewEventPayload)(s,i,d,o)).fire()}:void 0}};var d=n("biMIt");let u=({nextCursor:t,initialGroupIds:a})=>{let s,{data:i,loading:c,error:l}=(0,n("xQxzY").useQuery)((0,n("eSUdr").default)`query SegmentationTargetGroupsFieldGroupsQuery($after:String$first:Int=25){groups(after:$after first:$first){nodes{id name}pageInfo{endCursor hasNextPage}}}`,{variables:{after:t},skip:0===a.length});return l&&!c&&((0,n("1uFM6").isUnauthorizedError)(l)?(0,n("7Sm4c").markErrorAsHandled)(l):s=e(r).createElement(o.ErrorDisplay,{error:l})),{data:i,loading:c,errorComponent:s}},p=({source:e,type:t})=>(0,i.useFeedbackCollector)({source:e,type:t}),m=({nextCursor:e,initialGroupIds:t=[]})=>u({nextCursor:e,initialGroupIds:t}),f=({accelerator:t,listener:a})=>e(r).createElement(n("bflGB").ShortcutListener,{accelerator:t,listener:a}),g=({feature:t})=>e(r).createElement(c.ExtensionConfigUpsellLoader,{feature:t}),b=e=>{(0,n("5ZqQS").getMonitoringClient)().submitError(e,{attribution:n("3IBnw").Attribution.COMPANY_HUB}),(0,n("7Sm4c").markErrorAsHandled)(e)},E=({children:t})=>e(r).createElement(n("6M71K").ConfluenceSmartCardProvider,{isPreviewPanelAvailable:e=>!1},t),h=()=>{let e=(0,r.useContext)(n("1kHsc").ExperienceTrackerContext),t=(0,r.useCallback)(({analyticsSource:t})=>{e.start({name:n("irVI7").CARDS_IMAGE_UPLOAD_EXPERIENCE,attributes:{source:t}})},[e]);return{start:t,succeed:(0,r.useCallback)(()=>{e.succeed({name:n("irVI7").CARDS_IMAGE_UPLOAD_EXPERIENCE})},[e]),stopOnError:(0,r.useCallback)(({error:t})=>{e.stopOnError({name:n("irVI7").CARDS_IMAGE_UPLOAD_EXPERIENCE,error:t})},[e])}},y=()=>{let e=(0,r.useContext)(n("1kHsc").ExperienceTrackerContext),t=(0,r.useCallback)(({analyticsSource:t,confluencePageId:a})=>{e.start({name:n("irVI7").COMPANY_HUB_CARD_AI_DESCRIPTION_EXPERIENCE,attributes:{source:t,contentId:a}})},[e]),a=(0,r.useCallback)(({reason:t})=>{e.abort({name:n("irVI7").COMPANY_HUB_CARD_AI_DESCRIPTION_EXPERIENCE,reason:t})},[e]);return{start:t,abort:a,succeed:(0,r.useCallback)(()=>{e.succeed({name:n("irVI7").COMPANY_HUB_CARD_AI_DESCRIPTION_EXPERIENCE})},[e]),stopOnError:(0,r.useCallback)(({error:t})=>{e.stopOnError({name:n("irVI7").COMPANY_HUB_CARD_AI_DESCRIPTION_EXPERIENCE,error:t})},[e])}},I=(e,t)=>{if(-1!==t.indexOf("/")){let e=t.split("/");return[e[0],e[1]]}return[e,t]},S=({contentId:e,imageSrc:t})=>{let[a,o]=(0,r.useState)(null),[s,i]=I(e,t);return(0,r.useEffect)(()=>{!async function(){if(!n("4IoVL").createRendererMediaProvider)return;let{viewMediaClientConfig:e}=await (0,n("4IoVL").createRendererMediaProvider)({contentId:s,isExternalShare:!1});if(!e)return o(null);o({collection:`contentId-${s}`,authProvider:e.authProvider,fileId:i})}()},[s,i]),a},k=({mode:t,extensionNode:a,contentId:i="",children:c})=>{let u=h(),I=y(),{cloudId:k,displayName:v,isAdminHubAIEnabled:C,orgId:T,userId:P}=(0,n("bQm3c").useSessionData)()||{},[{searchSessionId:w}]=(0,n("hl1Kw").useSearchSessionId)(),[x]=(0,n("ep3mz").usePageSpaceKey)(),{isTargetAudience:_}=(0,r.useContext)(d.AudienceSegmentationContext),A=(0,n("2YtTU").usePremiumGate)(),D=(0,r.useMemo)(()=>A?({feature:t})=>e(r).createElement(g,{feature:t}):void 0,[A]),R=(0,r.useCallback)(()=>{if(!a)return null;let o=(0,n("5kjCz").getMacroAttributesFromADFNode)(a),s=(0,n("5kjCz").getExperienceName)(t,a);return e(r).createElement(n("4KFTW").MacroExperienceStart,{name:s,attributes:o,extensionKey:a.extensionKey,contentId:i,mode:t,timeout:n("aJPUt").ExperienceTimeout.MACRO_LOAD})},[a,i,t]),N=(0,r.useCallback)(()=>a?e(r).createElement(n("bX5uj").MacroExperienceSuccess,{name:(0,n("5kjCz").getExperienceName)(t,a),contentId:i,extensionKey:a.extensionKey,mode:t,attributes:(0,n("5kjCz").getMacroAttributesFromADFNode)(a)}):null,[a,i,t]),M=(0,r.useCallback)(({error:o})=>a?e(r).createElement(n("hUS75").MacroExperienceStop,{error:o,name:(0,n("5kjCz").getExperienceName)(t,a),contentId:i,extensionKey:a.extensionKey,mode:t,attributes:(0,n("5kjCz").getMacroAttributesFromADFNode)(a)}):null,[t,a,i]),L=(0,r.useMemo)(()=>{},[]),O=(0,r.useMemo)(()=>({children:t})=>e(r).createElement(s.ErrorBoundary,{attribution:n("3IBnw").Attribution.COMPANY_HUB},t),[]),j=(0,r.useMemo)(()=>({error:t,childrenComponents:a})=>e(r).createElement(o.ErrorDisplay,{error:t},a),[]),B=(0,r.useMemo)(()=>({useLinkAnalyticActions:l}),[]),F=(0,r.useMemo)(()=>({experienceStartComponent:R,experienceSuccessComponent:N,experienceStopComponent:M,cloudId:k,searchConfigProvider:{peopleDirectoryUrl:n("1NBp8").PEOPLE_DIRECTORY.toUrl(),advancedSearchUrl:n("1NBp8").ADVANCED_SEARCH.toUrl(),searchSessionId:w||""},displayName:v||"",isAdminHubAIEnabled:C,orgId:T||"",userId:P||"",errorBoundaryComponent:O,errorDisplayComponent:j,submitError:b,markErrorAsHandled:n("7Sm4c").markErrorAsHandled,useMediaConfig:S,createEditorMediaProvider:n("4IoVL").createEditorMediaProvider,mediaUploadExperienceTracker:u,aiDescriptionExperienceTracker:I,useFeedbackCollector:p,shortcutListener:f,shouldShowPremiumUpsell:A,ConfigUpsellScreen:D,useSegmentationTargetGroups:m,isSSRProductInDarkMode:L,analyticsContext:{pageLoadInfo:(0,n("78QFu").getUniquePageLoadId)()},useAnalyticsActions:B,isCompanyHub:(0,n("cEgMD").isCompanyHubSpaceKey)(x),isTargetAudience:_,smartCardProviderComponent:E,showConfigPreambleSupportLink:!0,enableTargeting:!0,enableUnifiedSearchFeatures:!0,enableSmartCardsFields:!0}),[N,M,k,v,C,T,P,w,A,D,L,O,j,R,u,I,B,x,_]);return e(r).createElement(n("fOKpq").ProductDependenciesContext.Provider,{value:F},c)};t.exports.ConfluenceDependenciesProvider=({children:t,...a})=>e(r).createElement(k,a,t)}),s("hUS75",function(e,t){e.exports.MacroExperienceStop=function({attributes:e,children:t=null,error:a,contentId:r,mode:o,name:s,source:i}){return(0,n("2bAZx").useDeepCompareEffect)(()=>{a?function(e,t,a,r,o,s){if((0,n("6fil2").containsNetworkError)(t))return(0,n("5kjCz").getMacroExperienceTracker)(a,r).abort({name:e,reason:`Aborted ${e} because of network error: ${t.toString()}`,checkForTimeout:!1,attributes:{...o,source:s}});(0,n("5kjCz").getMacroExperienceTracker)(a,r).fail({name:e,error:t,attributes:{...o,source:s}})}(s,a,o,r,e,i):(0,n("5kjCz").getMacroExperienceTracker)(o,r).succeed({name:s,attributes:e})},[e,r,a,o,s,i]),t}}),s("bAIqi",function(e,t){let a=(0,n("jmjWc").LoadableLazy)({__loadable_id__:"at4mJ",name:"ExtensionConfigUpsellLoader",loader:async()=>(await n("a0rl2")).ExtensionConfigUpsell}),r=(0,n("jmjWc").LoadableLazy)({__loadable_id__:"rxN2C",name:"ExtensionInsertUpsellLoader",loader:async()=>(await n("hsA4I")).ExtensionInsertUpsell});e.exports.ExtensionConfigUpsellLoader=a,e.exports.ExtensionInsertUpsellLoader=r}),s("a0rl2",function(e,t){let a=n("4mJKd")(5);e.exports=Promise.all([a("fD0v8"),a("6XCf4"),a("5pvpJ"),a("1qlDN"),a("1yVM6"),a("9wTrW")]).then(()=>n("d1uaq"))}),s("hsA4I",function(e,t){let a=n("4mJKd")(5);e.exports=Promise.all([a("fD0v8"),a("6XCf4"),a("5pvpJ"),a("1qlDN"),a("1yVM6"),a("5HTv6")]).then(()=>n("f4NfX"))}),s("2YtTU",function(e,t){var a=n("j1Ss3");e.exports.usePremiumGate=()=>{let{edition:e}=(0,n("bQm3c").useSessionData)(),t=e===n("euL71").ConfluenceEdition.PREMIUM,{data:r,error:o}=(0,a.useQuery)((0,n("eSUdr").default)`query usePremiumGatePremiumGateQuery{entitlements{premiumExtensions{isEntitled}}}`,{skip:t});return o&&((0,n("1uFM6").isUnauthorizedError)(o)||(0,n("f9jv7").isNotFoundError)(o)||(0,n("5ZqQS").getMonitoringClient)().submitError(o,{attribution:n("3IBnw").Attribution.COMPANY_HUB}),(0,n("7Sm4c").markErrorAsHandled)(o)),!t&&!r?.entitlements.premiumExtensions.isEntitled}}),s("5Gcps",function(e,t){let a=(0,n("eSUdr").default)`query SpaceMetadataQuery($id:Long!){spaces(spaceId:$id){nodes{homepage{id}}}}`,r=async(e,t)=>{if(t===e){let e=(0,n("hp2SH").getApolloClient)(),{data:r}=await e.query({query:a,variables:{id:t}}),o=r?.spaces?.nodes?.[0]?.homepage?.id;if(!o)return;return o}return e};e.exports.generateViewEventPayload=(e,t,a,r)=>({type:"sendTrackEvent",data:{action:"viewed",actionSubject:"companyHubLink",source:"companyHub",objectType:"page",objectId:a,attributes:{activationId:e,spaceId:r,spaceType:"system",pageType:"page",cloudId:t}}}),e.exports.generateClickEventPayload=(e,t,a,r)=>({type:"sendTrackEvent",data:{action:"clicked",actionSubject:"companyHubLink",source:"companyHub",objectType:a?"page":null,objectId:a,attributes:{activationId:e,spaceId:r,spaceType:"system",pageType:a?"page":null,cloudId:t}}}),e.exports.getClickAndViewEventObjectIdFromLinkData=r}),s("biMIt",function(t,a){var r=n("42omo"),o=n("b3j2Y"),s=n("aJv6Q");let i=n("jtfsl").default,c="accessible-to-anyone",l=(0,r.createContext)({isCompanyHub:!1,currentAudienceGroupIds:[],setCurrentAudienceGroupIds:()=>{},isTargetAudience:()=>!0,isSegmentationApplied:!1,setIsSegmentationApplied:()=>{}}),d=(0,s.withErrorBoundary)({attribution:n("3IBnw").Attribution.COMPANY_HUB})(({children:t,isCompanyHub:a,initialAudienceGroupIds:s=[],initialSegmentationApplied:d=!1,shouldFetchUserGroups:u=!1})=>{let[p,m]=(0,r.useState)(s),[f,g]=(0,r.useState)(d),b=(0,r.useCallback)(e=>{if(!a||void 0===e)return!0;g(!0);let t=new Set(p);return!t.has(c)&&e?.some(e=>t.has(e))},[p,a]),E=(0,r.useMemo)(()=>({currentAudienceGroupIds:p,setCurrentAudienceGroupIds:m,isCompanyHub:a,isTargetAudience:b,isSegmentationApplied:f,setIsSegmentationApplied:g}),[p,a,b,f]),{userId:h}=(0,n("bQm3c").useSessionData)(),{error:y,loading:I}=(0,n("jMyy4").useQueryInterop)(i,{skip:!u||!a,variables:{accountId:h},onCompleted:e=>{let t=e?.user?.confluence?.groupsWithId?.map(e=>e?.id).filter(e=>!!e)??[];u&&m(t)}}),S=(0,r.useMemo)(()=>{if(y&&!I)if(!(0,n("1uFM6").isUnauthorizedError)(y))return e(r).createElement(o.ErrorDisplay,{error:y});else(0,n("7Sm4c").markErrorAsHandled)(y);return null},[y,I]);return e(r).createElement(l.Provider,{value:E},S,t)});t.exports.COMMON_VIEW_ID=c,t.exports.AudienceSegmentationContext=l,t.exports.AudienceSegmentationContextProvider=d}),s("3oriB",function(e,t){let a=n("4mJKd")(5);e.exports=Promise.all([a("9MSTM"),a("aYx1O"),a("65u2R"),a("bj2rY"),a("jSdjl"),a("l2EUC"),a("2YffH"),a("f35QR"),a("eVYW1"),a("ls0Um"),a("020xd"),a("eTBsW"),a("bYxCZ"),a("6HBYC"),a("1oiJ6"),a("huUvS"),a("1wZEW"),a("98UJI"),a("hwLGf"),a("2B6wT"),a("gKYwM"),a("a5wu4"),a("b0cmi"),a("51haJ"),a("1Jgsw"),a("lPQcc"),a("jg5LT"),a("7f9Fz"),a("9XYQ9"),a("jp3gT"),a("9ijrN"),a("aeEUI"),a("lUQAm"),a("hRUX7"),a("g4oYs"),a("cMlHc"),a("8KWDC"),a("bTmOC"),a("jTaSF"),a("8fXIr"),a("dVkhd"),a("7jSfd"),a("4HZlX"),a("kDqHr"),a("6wr18"),a("kjZZD"),a("ht5OT"),a("sj9Xz"),a("dTsOE"),a("3gJkK"),a("hhss7"),a("7EorR"),a("awqCy"),a("5IgYU"),a("Wowvf"),a("ffEVr"),a("fMsyQ")]).then(()=>n("kWs4M"))}),s("6ZDrU",function(e,t){let a=n("4mJKd")(5);e.exports=Promise.all([a("hwLGf"),a("9MSTM"),a("aYx1O"),a("ht5OT"),a("sj9Xz"),a("65u2R"),a("bj2rY"),a("jSdjl"),a("l2EUC"),a("dChec"),a("2YffH"),a("f35QR"),a("eVYW1"),a("ls0Um"),a("020xd"),a("eTBsW"),a("6HBYC"),a("1oiJ6"),a("huUvS"),a("3RdRc"),a("98UJI"),a("b0cmi"),a("51haJ"),a("jg5LT"),a("7f9Fz"),a("9XYQ9"),a("jp3gT"),a("jTaSF"),a("8fXIr"),a("dVkhd"),a("7jSfd"),a("4HZlX"),a("kDqHr"),a("6wr18"),a("kjZZD"),a("dTsOE"),a("hhss7"),a("7EorR"),a("awqCy"),a("5IgYU"),a("Wowvf"),a("ffEVr"),a("bTmOC"),a("lFZaH")]).then(()=>n("cBfKJ"))}),s("6DFLT",function(e,t){let a=n("4mJKd")(5);e.exports=Promise.all([a("65u2R"),a("bj2rY"),a("1wZEW"),a("2Mq3f"),a("8KWDC"),a("b0cmi"),a("51haJ"),a("lPQcc"),a("kjZZD"),a("7f9Fz"),a("9XYQ9"),a("aeEUI"),a("hRUX7"),a("g4oYs"),a("6wr18"),a("cMlHc"),a("hhss7"),a("7EorR"),a("awqCy"),a("5IgYU"),a("Wowvf"),a("ffEVr"),a("kUykF")]).then(()=>n("27HWy"))}),s("jYzll",function(e,t){let a=n("4mJKd")(5);e.exports=Promise.all([a("9MSTM"),a("aYx1O"),a("lUQAm"),a("65u2R"),a("bj2rY"),a("2YffH"),a("cgmWe"),a("2Mq3f"),a("b0cmi"),a("51haJ"),a("2Gceu"),a("jg5LT"),a("7f9Fz"),a("igTEs"),a("9XYQ9"),a("3kUQf"),a("iFEfD"),a("6wr18"),a("kjZZD"),a("hhss7"),a("7EorR"),a("awqCy"),a("5IgYU"),a("Wowvf"),a("ffEVr"),a("aUuEW")]).then(()=>n("aALia"))}),s("bVGwu",function(e,t){let a=n("4mJKd")(5);e.exports=Promise.all([a("9MSTM"),a("aYx1O"),a("ht5OT"),a("sj9Xz"),a("65u2R"),a("bj2rY"),a("jSdjl"),a("l2EUC"),a("2YffH"),a("f35QR"),a("eVYW1"),a("ls0Um"),a("020xd"),a("eTBsW"),a("bYxCZ"),a("6HBYC"),a("eDqo1"),a("lxiFd"),a("1oiJ6"),a("huUvS"),a("d9TJ0"),a("8nWJU"),a("kpq80"),a("98UJI"),a("2Mq3f"),a("hwLGf"),a("bTmOC"),a("a5wu4"),a("b0cmi"),a("51haJ"),a("jg5LT"),a("7f9Fz"),a("5uN9h"),a("9XYQ9"),a("6aY84"),a("5CaYW"),a("jp3gT"),a("lUQAm"),a("jTaSF"),a("8fXIr"),a("dVkhd"),a("7jSfd"),a("4HZlX"),a("kDqHr"),a("6vhrJ"),a("6wr18"),a("kjZZD"),a("dTsOE"),a("hhss7"),a("7EorR"),a("awqCy"),a("5IgYU"),a("Wowvf"),a("ffEVr"),a("dJOHz")]).then(()=>n("8Hi5s"))}),s("7BsWq",function(e,t){var a=n("42omo");e.exports.useEditorFeatureFlags=()=>(0,a.useMemo)(()=>({"lp-link-picker":!0,"table-drag-and-drop":(0,n("6mKj3").expVal)("platform_editor_tables_drag_and_drop","isEnabled",!1),"table-with-fixed-column-widths-option":!0,"renderer-tti-tracking":(0,n("dh538").fg)("renderer_tti_tracking_confluence")}),[])}),s("brsfB",function(t,a){var r=n("42omo"),o=n("5XsiK"),s=n("eLV9q");t.exports.useProfilecardProvider=function({push:t,userId:a,cloudId:i,featureFlags:c}){let l=(0,n("8C5kA").default)(),d=(0,n("4GlQ9").useFeedFollow)(),u=(0,s.useGetNavigateToTeamsApp)(),p=(0,r.useCallback)((t,a)=>s=>{let i=(0,n("4qzKl").getAtlassianPeopleProfileUrl)(s,null,n("jlIaF").CONTEXT_PATH),c=u({type:"USER",payload:{userId:s}}).href,p=!!(s&&d?.followedUsers?.includes(s));return[{label:l.formatMessage({id:"view.profile"}),callback:(0,o.isTeamsAppEnabled)()?void 0:()=>{t((0,n("4qzKl").getAtlassianPeopleProfileUrl)(s,null,n("jlIaF").CONTEXT_PATH))},target:(0,o.isTeamsAppEnabled)()?"_blank":void 0,link:(0,o.isTeamsAppEnabled)()?c:i},{label:e(r).createElement(n("bedVD").FeedFollow,{followed:p}),id:"feed-follow-user",callback:d.getToggleFollowUser(s,p,"editor"),shouldRender:e=>d.renderFeedFollow&&!!s&&s!==a&&e?.status==="active"}]},[d,u,l]);return(0,r.useMemo)(()=>(0,n("9UKrO").getProfileCardProvider)(i,p(t,a),c??{}),[i,p,t,a,c])}}),s("9UKrO",function(e,t){e.exports.getProfileCardProvider=function(e,t,a){return Promise.resolve({cloudId:e,resourceClient:(0,n("bumSD").getProfileClient)(e,a),getActions:t})}}),s("1SPMi",function(t,a){var r=n("42omo"),o=n("3pfAb");t.exports.RendererAnalyticsListener=t=>{let{objectId:a,objectType:s,children:i,source:c}=t,{environment:l}=(0,n("bQm3c").useSessionData)()||{},d=l||"DEVELOPMENT",u=(0,r.useCallback)(e=>{e.update(e=>{let t=(0,n("2SowE").extendPayloadAttributes)(e,{objectId:a,objectType:s,rendererSource:c});return d&&(t=(0,n("2SowE").extendPayloadAttributes)(t,{instance:d})),t})},[d,a,s,c]);return e(r).createElement(n("kDuN4").default,{onEvent:u,channel:o.FabricChannel.editor},e(r).createElement(n("kDuN4").default,{onEvent:u,channel:o.FabricChannel.media},i))}}),s("3WO8q",function(e,t){let a=(0,n("eSUdr").default)`mutation SetTaskStatusMutation($contentId:ID!$taskId:ID!$status:TaskStatus!){setTaskStatus(inlineTasksInput:{cid:$contentId taskId:$taskId status:$status trigger:VIEW_PAGE}){success}}`,r=(0,n("cgtv4").defineMessages)({flagTitle:{id:"fabric-media-support.tasklist.error.flag.title",defaultMessage:"Something went wrong"},flagDescription:{id:"fabric-media-support.tasklist.error.flag.description",defaultMessage:"An error occurred while trying to change a tasks status. Please try again later."}});e.exports.ConfluenceTaskDecisionProvider=class{toggleTask(e,t){return this._toggleTaskCallback?(this._toggleTaskCallback(e,t),Promise.resolve(t)):(0,n("hp2SH").getApolloClient)().mutate({mutation:a,variables:{contentId:this.contentId,taskId:e.localId,status:"DONE"===t?"CHECKED":"UNCHECKED"}}).then(e=>(e?.data?.setTaskStatus?.success||this.showErrorFlag(),t)).catch(e=>{this.showErrorFlag()})}showErrorFlag(){this.flags.showErrorFlag({title:this.intl.formatMessage(r.flagTitle),description:this.intl.formatMessage(r.flagDescription)})}notifyRecentUpdates(e){}subscribe(e,t){}unsubscribe(e,t){}unsubscribeRecentUpdates(e){}constructor(e,t,a,r){this.intl=e,this.flags=t,this.contentId=a,this.toggleTaskCallback=r,this._toggleTaskCallback=void 0,this._toggleTaskCallback=r}}}),s("gxhb8",function(e,t){e.exports.TaskBatcher=class{onFlush(e){if(!(e instanceof Function))throw Error(`"onFlush" callback is supposed to be a function; saw ${typeof e} instead`);this.onFlushCallback=e}forceFlush(){this.flush()}renewBatch(){let e=this.currentBatch;return this.currentBatch=[],e}scheduleFlush(){this.flushIntervalId||(this.flushIntervalId=window.setInterval(this.flush,this.flushIntervalMs))}unscheduleFlush(){this.flushIntervalId&&(window.clearInterval(this.flushIntervalId),this.flushIntervalId=void 0)}constructor(e){this.flushIntervalMs=e,this.flushIntervalId=void 0,this.onFlushCallback=void 0,this.currentBatch=[],this.add=e=>{this.scheduleFlush(),this.currentBatch=this.currentBatch.filter(t=>t.objectKey.localId!==e.objectKey.localId),this.currentBatch.push(e)},this.flush=()=>{let e=this.renewBatch();if(this.unscheduleFlush(),0!==e.length)try{this.onFlushCallback&&this.onFlushCallback(e)}catch(e){setTimeout(()=>{throw console.error('"onFlush" callback threw the below error. Please make sure your callbacks have proper error handling'),e},0)}}}}}),s("9aXRY",function(e,t){e.exports.useIsEligibleCreateNewWhiteboard=()=>{let{edition:e}=(0,n("bQm3c").useSessionData)(),{isWhiteboardFeatureEnabled:t}=(0,n("kDja4").useIsWhiteboardFeatureEnabled)(),a=t("whiteboardsEnabled"),r=(0,n("eVXGa").useIsAllowedToCreateWhiteboard)();return{isEligibleCreateNewWhiteboard:e!==n("euL71").ConfluenceEdition.FREE&&a&&r}}}),s("bODUD",function(t,a){var r=n("42omo");let o=[{name:"Miro",domains:[/miro\.com/i]},{name:"Mural",domains:[/mural\.co/i]},{name:"Lucid",domains:[/lucid\.co/i]},{name:"Microsoft Whiteboard",domains:[/whiteboard\.office\.com/i,/wbd\.ms/i]},{name:"Figjam",domains:[/figma\.com\/board/i]},{name:"Google Jamboard",domains:[/jamboard\.google\.com/i]},{name:"Excalidraw",domains:[/excalidraw\.com/i]},{name:"Klaxoon",domains:[/klaxoon\.com/i]}],s=e=>{let t=(0,n("cLo2u").useSpaceKey)(),{isCreateWhiteboardEnabled:a}=(0,n("7EIq6").useSpaceEnabledContentTypes)(t??void 0),r=o.find(t=>t.domains.some(t=>t.test(e)));return{competitorName:a?r?.name:void 0}},i=[{name:"Google Sheets",domains:[/docs\.google\.com\/spreadsheets/i]},{name:"Microsoft Lists",domains:[/lists\.live\.com/i]},{name:"SmartSheet",domains:[/smartsheet\.com/i]},{name:"Airtable",domains:[/airtable\.com/i]},{name:"AsanaList",domains:[/app\.asana\.com.*\/list\//i]},{name:"AsanaBoard",domains:[/app\.asana\.com.*\/board\//i]}],c=e=>{let t=(0,n("cLo2u").useSpaceKey)(),{isCreateDatabaseEnabled:a}=(0,n("7EIq6").useSpaceEnabledContentTypes)(t??void 0),r=i.find(t=>t.domains.some(t=>t.test(e)));return{databaseCompetitorName:a?r?.name:void 0}},l=()=>{let e=(0,n("3jwuS").useIsCurrentPageLive)(),[{mode:t}]=(0,n("efvKr").useLivePageMode)(),a=(0,n("de2j9").useIsEditorPage)();return(0,r.useMemo)(()=>e?{isLivePage:e,pageMode:t||"view"}:{isLivePage:e,pageMode:a?"edit":"view"},[e,t,a])},d=(0,n("cgtv4").defineMessages)({titleDatabase:{id:"prompt-competitor-link.prompt-database.title-database",defaultMessage:"Try Confluence databases"},descriptionDefaultDatabase:{id:"prompt-competitor-link.prompt-database.description-default-database",defaultMessage:"To organize content and data without switching tools, try Confluence databases."},createButtonDefaultDatabase:{id:"prompt-competitor-link.prompt-database.create-button-default-database",defaultMessage:"Create a database"},dismissButtonDatabase:{id:"prompt-competitor-link.prompt-database.dismiss-button",defaultMessage:"Do not show databases again"},databaseIconAltText:{id:"prompt-competitor-link.prompt-database.icon-alt-text",defaultMessage:"Confluence Database"},successFlagTitle:{id:"prompt-competitor-link.prompt-database.success-flag-title",defaultMessage:"Database added to content tree"},successFlagDescription:{id:"prompt-competitor-link.prompt-database.success-flag-description",defaultMessage:"The database has been created in the tree. Go to the whiteboard to move its location or change its permissions."},successFlagAction:{id:"prompt-competitor-link.prompt-database.success-flag-action",defaultMessage:"Go to database"},createdFlagTitle:{id:"prompt-competitor-link.prompt-database.created-flag-title",defaultMessage:"Database successfully created"},createdFlagDescription:{id:"prompt-competitor-link.prompt-database.created-flag-description",defaultMessage:"This database was created as a child item of the content you were working on."},createdFlagAction:{id:"prompt-competitor-link.prompt-database.created-flag-action",defaultMessage:"Go back to previous content"},defaultErrorFlagTitle:{id:"prompt-competitor-link.prompt-database.default-error-flag-title",defaultMessage:"Were unable to create right now"},defaultErrorFlagDescription:{id:"prompt-competitor-link.prompt-database.default-error-flag-description",defaultMessage:"Refresh or wait a few minutes and try again. If this keeps happening, contact support."}}),u=(0,n("cgtv4").defineMessages)({titleWhiteboard:{id:"prompt-competitor-link.prompt-popup.title-whiteboard",defaultMessage:"Try Confluence whiteboards"},descriptionDefaultWhiteboard:{id:"prompt-competitor-link.prompt-popup.description-default-whiteboard",defaultMessage:"We noticed you pasted a {competitorName} link. Reduce context switching by using a Confluence whiteboard instead."},descriptionImportWhiteboard:{id:"prompt-competitor-link.prompt-popup.description-import-whiteboard",defaultMessage:"We noticed you pasted a {competitorName} link. Reduce context switching by importing your work to a Confluence whiteboard instead."},createButtonDefaultWhiteboard:{id:"prompt-competitor-link.prompt-popup.create-button-default-whiteboard",defaultMessage:"Create a whiteboard"},createButtonImportWhiteboard:{id:"prompt-competitor-link.prompt-popup.create-button-import-whiteboard",defaultMessage:"Import from {competitorName}"},dismissButton:{id:"prompt-competitor-link.prompt-popup.dismiss-button",defaultMessage:"Do not show whiteboards again"}}),p={dismissPressable:"_bfhk1bhr _ca0qpxbi _n3tdpxbi _19bv1ejb _u5f31ejb",iconContainer:"_zulppxbi",titleContainer:"_1bah1yb4 _4cvr1h6o _1bsb1osq",pressable:"_1yt41b66 _2rko12b0 _1bsb1tcg _4t3i1tcg",pressableClosed:"_bfhkp2ly _irr3kca2",pressableOpen:"_1a37fqqo _bfhkkca2 _1cwg1i6y",promptContainer:"_1e0c116y _4cvr1h6o _2hwxv77o _18u0v77o",popupBoxDatabase:"_18s8pxbi _1bsb1gwv",popupDescription:"_19pku2gc _otyrpxbi",showMoreIcon:"_bfhksm61",textContainer:"_1e0c1txw _2lx21bp4 _4cvr1y6m _ca0qv77o _n3tdv77o",ctaStyles:"_1yt4ze3t _18s8ze3t _4bfu1r31 _1hms8stv _ajmmnqa1 _11c82smr _syaz13af _bfhk1j28 _9oik1r31 _1bnxglyw _jf4cnqa1"},m=(0,n("eSUdr").gql)`
	mutation PromptPopupCreateContentInlineMutation(
		$createdInContentId: ID!
		$spaceKey: String
		$type: String!
	) {
		createContentInline(
			input: { createdInContentId: $createdInContentId, spaceKey: $spaceKey, type: $type }
		) {
			id
		}
	}
`,f=(0,n("eSUdr").gql)`
	query PromptPopupPaywallContentToDisableQuery {
		paywallContentToDisable(contentType: "whiteboard") {
			deactivationIdentifier
			link
			title
		}
	}
`,g={whiteboard:n("fhofE").getFullWhiteboardUrl,database:n("ccP7J").getFullDatabaseUrl},b=["miro","mural"],E={whiteboard:n("dBcar").PROMPT_WHITEBOARD_COMPETITOR_LINK_DISMISSED.PROMPT_DISMISSED,database:n("dBcar").PROMPT_DATABASE_COMPETITOR_LINK.DISMISSED},h=({competitorName:t,linkType:a,contentType:o})=>{let s,i,c=(0,n("8C5kA").default)(),{edition:h}=(0,n("bQm3c").useSessionData)(),y=(0,n("cLo2u").useSpaceKey)()||"",[I]=(0,n("ep3mz").usePageContentId)(),[S]=(0,n("ep3mz").useContentType)(),k=(0,n("bMPhU").useSpaceHomepageId)(y),v="blogpost"===S?k:I,[C,T]=(0,r.useState)(!1),{setOnboardingState:P}=(0,n("ivb8S").useSetOnboardingState)(),{createAnalyticsEvent:w}=(0,n("inPa6").useAnalyticsEvents)(),x=l(),_=b.some(e=>t?.toLowerCase().includes(e)),{data:A,loading:D}=(0,n("xQxzY").useQuery)(f,{skip:"whiteboard"!==o||!_||h===n("euL71").ConfluenceEdition.PREMIUM,fetchPolicy:"no-cache"}),R=A?.paywallContentToDisable,N="whiteboard"===o&&_&&!D&&!(R?.deactivationIdentifier&&R?.link&&R?.title);(0,r.useEffect)(()=>{w({type:"sendTrackEvent",data:{action:"viewed",actionSubject:"competitorLinkPrompt",actionSubjectId:"promptPopup",source:"competitorLink",attributes:{linkContentType:o,linkType:a,isImport:N?"true":"false",...x},nonPrivacySafeAttributes:{linkDomain:t,linkContentType:o,linkType:a,isImport:N?"true":"false"}}}).fire()},[t,w,a,x,N,o]);let[M,{loading:L}]=(0,n("1KmJq").useMutation)(m,{onCompleted:e=>{let r=e?.createContentInline?.id;if(!r)throw Error("no content id present");w({type:"sendTrackEvent",data:{action:"createdByFlow",actionSubject:"content",objectId:r,objectType:o,containerId:y,containerType:"space",source:"competitorLink",attributes:{flow:"competitorLink",contentType:o,linkType:a,isImport:N?"true":"false",...x},nonPrivacySafeAttributes:{linkDomain:t}}}).fire(),P({key:E[o],value:"true"});let n=g[o];if(n){let e=n(r,y);if(N){let a=new URL(e),r=new URLSearchParams(a.search);r.set(`open${t}ImportTool`,"true"),a.search=r.toString(),e=a.toString()}window.open(e,"_blank","noreferrer, noopener")}}}),O=async()=>{!L&&v&&(w({type:"sendTrackEvent",data:{action:"clicked",actionSubject:"competitorLinkPrompt",actionSubjectId:"createButton",source:"competitorLink",attributes:{linkContentType:o,linkType:a,isImport:N?"true":"false",...x},nonPrivacySafeAttributes:{linkDomain:t,linkContentType:o,linkType:a,isImport:N?"true":"false"}}}).fire(),await M({variables:{createdInContentId:v,spaceKey:y,type:o}}))};if("database"===o)s=c.formatMessage(d.descriptionDefaultDatabase,{competitorName:t});else{let e=N?u.descriptionImportWhiteboard:u.descriptionDefaultWhiteboard;s=c.formatMessage(e,{competitorName:t})}if("database"===o)i=c.formatMessage(d.createButtonDefaultDatabase);else{let e=N?u.createButtonImportWhiteboard:u.createButtonDefaultWhiteboard;i=c.formatMessage(e,{competitorName:t})}let j=c.formatMessage("database"===o?d.dismissButtonDatabase:u.dismissButton),B=(0,r.useCallback)(()=>{w({type:"sendUIEvent",data:{action:"clicked",actionSubject:"competitorLinkPrompt",actionSubjectId:"promptDismiss",source:"competitorLink",attributes:{linkContentType:o,linkType:a,...x}}}).fire(),P({key:E[o],value:"true"}),T(!1)},[w,P,a,x,o]),F=(0,r.useCallback)(()=>{w({type:"sendUIEvent",data:{action:"clicked",actionSubject:"competitorLinkPrompt",actionSubjectId:"promptMoreMenu",source:"competitorLink",attributes:{linkContentType:o,linkType:a,...x}}}).fire(),T(!C)},[w,C,a,x,o]),U="database"===o?c.formatMessage(d.titleDatabase):c.formatMessage(u.titleWhiteboard),H=e(r).createElement(n("lGgRw").Popup,{shouldRenderToParent:!1,isOpen:C,onClose:()=>T(!1),placement:"bottom-start",content:()=>e(r).createElement(n("fVUfS").default,{xcss:p.dismissPressable,onClick:B,testId:"competitor-link-prompt-dismiss-button"},e(r).createElement(n("iXCQx").default,null,j)),trigger:t=>e(r).createElement(n("fVUfS").default,{...t,xcss:p.showMoreIcon,onClick:F,testId:"competitor-link-prompt-dismiss-menu"},e(r).createElement(e(n("9VJDA")),{label:j,size:"medium"}))}),W=e(r).createElement(n("1s5hv").default,{xcss:p.titleContainer},e(r).createElement(n("7hXDW").default,{size:"xsmall"},U),H),q=e(r).createElement(n("gdv5Z").default,null,e(r).createElement(n("gdv5Z").default,{xcss:p.popupDescription},e(r).createElement(n("iXCQx").default,null,s)),e(r).createElement(n("fVUfS").default,{onClick:O,xcss:p.ctaStyles},i));return e(r).createElement(n("gdv5Z").default,{xcss:p.popupBoxDatabase,testId:"competitor-link-prompt-popup"},e(r).createElement(n("1s5hv").default,{xcss:p.iconContainer},e(r).createElement(n("lE8sM").default,{key:"database"===o?"databaseIcon":"whiteboardIcon",icon:"database"===o?e(n("6B0jU")):e(n("ZDq1z")),label:U,appearance:"database"===o?"purpleBold":"tealBold",size:"small"}),e(r).createElement(n("gdv5Z").default,{xcss:p.textContainer},W,q)))},y=({competitorName:t,linkType:a,contentType:o})=>{let s=(0,n("8C5kA").default)(),[i,c]=(0,r.useState)(!1),{createAnalyticsEvent:m}=(0,n("inPa6").useAnalyticsEvents)(),f=l();(0,r.useEffect)(()=>{m({type:"sendTrackEvent",data:{action:"viewed",actionSubject:"competitorLinkPrompt",actionSubjectId:"promptIcon",source:"competitorLink",attributes:{linkContentType:o,linkType:a,...f},nonPrivacySafeAttributes:{linkDomain:t}}}).fire()},[t,m,a,f,o]);let g=(0,r.useCallback)(()=>{m({type:"sendUIEvent",data:{action:"closed",actionSubject:"competitorLinkPrompt",actionSubjectId:"promptPopup",source:"competitorLink",attributes:{linkContentType:o,linkType:a,...f}}}).fire(),c(!1)},[m,a,f,o]),b=(0,r.useCallback)(()=>{i?g():(m({type:"sendUIEvent",data:{action:"clicked",actionSubject:"competitorLinkPrompt",actionSubjectId:"promptIcon",source:"competitorLink",attributes:{linkContentType:o,linkType:a,...f}}}).fire(),c(!i))},[m,g,i,a,f,o]);return e(r).createElement(n("lGgRw").Popup,{shouldRenderToParent:!1,isOpen:i,onClose:g,placement:"bottom-start",content:()=>e(r).createElement(h,{competitorName:t,linkType:a,contentType:o}),trigger:t=>e(r).createElement(n("fVUfS").default,{...t,onClick:b,xcss:(0,n("1Whri").cx)(p.pressable,i?p.pressableOpen:p.pressableClosed),testId:"competitor-link-prompt-icon"},e(r).createElement(e(n("3HOqx")),{color:"var(--ds-icon-discovery, #AF59E1)",label:s.formatMessage("database"===o?d.titleDatabase:u.titleWhiteboard)}))})};t.exports.PromptPopupContainer=({sourceUrl:t,linkType:a})=>{let o,{data:i,loading:l,error:d}=(0,n("ivb8S").useGetOnboardingState)([n("dBcar").PROMPT_WHITEBOARD_COMPETITOR_LINK_DISMISSED.PROMPT_DISMISSED,n("dBcar").PROMPT_DATABASE_COMPETITOR_LINK.DISMISSED]),{isPromptDismissed:u,isPromptDatabaseDismissed:m}=(0,n("ivb8S").deserializeState)(i),{competitorName:f}=s(t),{databaseCompetitorName:g}=c(t);f?o="whiteboard":g&&(o="database");let b=f||g||void 0,E=a&&("inline"===a||"card"===a||"embed"===a)?a:void 0;return"database"===o?!l&&!d&&!m&&b&&(0,n("6mKj3").expValEquals)("cc_fd_prompt_database_competitor_link","cohort","experiment")&&e(r).createElement(n("gdv5Z").default,{xcss:p.promptContainer},e(r).createElement(y,{competitorName:b,linkType:E,contentType:o})):!l&&!d&&!u&&b&&"whiteboard"===o&&(0,n("6mKj3").expValEquals)("prompt_whiteboard_competitor_link","cohort","experiment")&&e(r).createElement(n("gdv5Z").default,{xcss:p.promptContainer},e(r).createElement(y,{competitorName:b,linkType:E,contentType:o}))}}),s("fhofE",function(e,t){let a=()=>{let e=window.document.querySelector("meta[name='confluence-base-url']")?.getAttribute("content")??"https://hello.atlassian.net/wiki";return e.substring(0,e.length-5)},r=()=>{if(void 0===window.location)return"";let e=window.location.origin;return"localhost"===new URL(e).hostname?a():e};e.exports.getFullWhiteboardUrl=(e,t)=>`${r()}${n("1NBp8").WHITEBOARD_BOARD.toUrl({spaceKey:t,contentId:e})}`}),s("ccP7J",function(t,a){var r=n("42omo"),o=n("jTxSS");let s=(0,n("eSUdr").default)`mutation CreateContentInlineMutation($createdInContentId:ID!$spaceKey:String){createContentInline(input:{createdInContentId:$createdInContentId spaceKey:$spaceKey type:"database"}){id}}`,i=(0,n("cgtv4").defineMessages)({manifestDescription:{id:"confluence-databases-extension.description",defaultMessage:"Create an empty database table"},manifestTitle:{id:"confluence-databases-extension.title",defaultMessage:"Database extension"},createDatabaseTitle:{id:"confluence-databases-extension.create-database.title",defaultMessage:"New database"},createDatabaseDescription:{id:"confluence-databases-extension.create-database.description",defaultMessage:"Create an empty database table"},referenceDatabaseTitle:{id:"confluence-databases-extension.reference-database.title",defaultMessage:"Embed database"},referenceDatabaseDescription:{id:"confluence-databases-extension.reference-database.description",defaultMessage:"Display an existing database, entry, or value"},referenceDatabaseModalLabel:{id:"confluence-databases-extension.reference-database.modal-label",defaultMessage:"Reference database modal"},createDatabaseIconAltText:{id:"confluence-databases-extension.create-database.icon-alt-text",defaultMessage:"Create database icon"},referenceDatabaseIconAltText:{id:"confluence-databases-extension.reference-database.icon-alt-text",defaultMessage:"Reference database icon"},successFlagTitle:{id:"confluence-databases-extension.success-flag.title",defaultMessage:"Database added under this content "},successFlagAction:{id:"confluence-databases-extension.success-flag.action",defaultMessage:"Open database in new tab"},successFlagDescription:{id:"confluence-databases-extension.success-flag.description",defaultMessage:"To view this database in full and edit it with ease, open it in a new tab."},defaultErrorFlagTitle:{id:"confluence-databases-extension.error-flag.title",defaultMessage:"Were unable to create right now"},defaultErrorFlagDescription:{id:"confluence-databases-extension.error-flag.description",defaultMessage:"Refresh or wait a few minutes and try again. If this keeps happening, contact support."},parentPageMovedErrorTitle:{id:"confluence-databases-extension.error.parent-page-moved-error-title",defaultMessage:"The parent has moved"},parentPageMovedErrorDescription:{id:"confluence-databases-extension.error.parent-page-moved-error-description",defaultMessage:"Refresh to create in the new location."},permissionRemovedErrorTitle:{id:"confluence-databases-extension.error.permission-removed-error-title",defaultMessage:"Were unable to create this content"},permissionRemovedErrorDescription:{id:"confluence-databases-extension.error.permission-removed-error-description",defaultMessage:"You dont have permission to create here or the space has been recently deleted."},invalidParentErrorTitle:{id:"confluence-databases-extension.error.invalid-parent-error-title",defaultMessage:"We cant create a database"},invalidParentErrorDescription:{id:"confluence-databases-extension.error.invalid-parent-error-description",defaultMessage:"This page was deleted or archived. You can create a database on a different page."},databaseBoardLayoutTitle:{id:"confluence-databases-extension.database-board-layout.title",defaultMessage:"Board layout (Database)"},databaseBoardLayoutDescription:{id:"confluence-databases-extension.database-board-layout.description",defaultMessage:"Structure data in a kanban board "},databaseBoardLayoutIconAltText:{id:"confluence-databases-extension.database-board-layout.icon-alt-text",defaultMessage:"Database Board icon"},databaseGalleryLayoutTitle:{id:"confluence-databases-extension.database-gallery-layout.title",defaultMessage:"Gallery layout (Database)"},databaseGalleryLayoutDescription:{id:"confluence-databases-extension.database-gallery-layout.description",defaultMessage:"Structure data in a gallery of cards"},databaseGalleryLayoutIconAltText:{id:"confluence-databases-extension.database-gallery-layout.icon-alt-text",defaultMessage:"Database gallery icon"},databaseTableLayoutTitle:{id:"confluence-databases-extension.database-table-layout.title",defaultMessage:"Table layout (Database)"},databaseTableLayoutDescription:{id:"confluence-databases-extension.database-table-layout.description",defaultMessage:"Structure data in a dynamic table"},databaseTableLayoutIconAltText:{id:"confluence-databases-extension.database-table-layout.icon-alt-text",defaultMessage:"Database table icon"}}),c=(0,n("cgtv4").defineMessages)({invalidParentErrorDescription:{id:"confluence-databases-extension.error.invalid-parent-error-description.livedocs",defaultMessage:"This item was deleted or archived. You can create a database on a different page or live doc."}}),l=(0,n("jhwJP").mergeLiveDocI18n)(i,c);var d={};d=new URL("InlineCreateIcon.2a8cad4b.svg",import.meta.url).toString();var u={};u=new URL("InlineEmbedIcon.eb3ad338.svg",import.meta.url).toString();let p=()=>{let e=new URLSearchParams(window.location.search).get("databases-frontend")||void 0,[{theme:t}]=(0,n("7J5Uc").useThemingState)();return(0,r.useMemo)(()=>{let a=new URL("/databases/standalone",window.location.origin);e&&a.searchParams.set("bifrost-override",e),t&&(a.pathname=`${a.pathname}/${"dark"===t.colorMode?"index-dark.html":"index.html"}`,a.searchParams.set("themeState",encodeURIComponent((0,n("j6S25").themeObjectToString)(t)))),a.searchParams.set("referencing","true"),a.searchParams.set("parentProduct","smartLink");let r=[a.pathname];return Array.from(a.searchParams).length>0&&r.push(a.searchParams.toString()),r.join("?")},[e,t])},m=(0,n("eSUdr").default)`query DatabaseReferenceModalCurrentUserQuery{user:confluence_atlassianUser(current:true){id displayName photos{value isPrimary}emails{value isPrimary}locale}}`,f=(0,n("ecnYn").xcss)({maxWidth:"100%",height:"600px",overflow:"hidden"}),g=(0,n("ecnYn").xcss)({width:"100%",height:"100%",paddingRight:"space.200",paddingBottom:"space.100"}),b=(0,n("ecnYn").xcss)({width:"100%",height:"100%"}),E=(0,n("ecnYn").xcss)({width:"100%"}),h=(0,n("ecnYn").xcss)({width:"320px",height:"600px",borderLeftWidth:"border.width.selected",borderLeftStyle:"solid",borderColor:"color.border"}),y=(0,n("ecnYn").xcss)({padding:"space.300",paddingBottom:"space.250",position:"relative"}),I=(0,n("ecnYn").xcss)({minHeight:"0",paddingTop:"space.025",paddingRight:"space.300",paddingBottom:"space.025",paddingLeft:"space.300"}),S=(0,n("ecnYn").xcss)({marginBottom:"space.300"}),k=()=>e(r).createElement(n("1GzhS").default,{alignBlock:"start",space:"space.050",xcss:S},e(r).createElement(n("kpYGL").default,{isShimmering:!0,width:56,height:14,borderRadius:18}),e(r).createElement(n("kpYGL").default,{isShimmering:!0,width:272,height:40,borderRadius:3})),v=()=>e(r).createElement(n("dcJ7R").default,{xcss:f,testId:"legacy-reference-database-skeleton"},e(r).createElement(n("6f0Oj").default,{xcss:g},e(r).createElement(n("1GzhS").default,{alignBlock:"center",alignInline:"center",space:"space.250",xcss:b},e(r).createElement(n("kpYGL").default,{isShimmering:!0,width:93,height:93,borderRadius:"100%"}),e(r).createElement(n("1GzhS").default,{alignBlock:"center",alignInline:"center",space:"space.150",xcss:E},e(r).createElement(n("kpYGL").default,{isShimmering:!0,width:216,height:14,borderRadius:18}),e(r).createElement(n("kpYGL").default,{isShimmering:!0,width:132,height:14,borderRadius:18})))),e(r).createElement(n("1GzhS").default,{xcss:h},e(r).createElement(n("dcJ7R").default,{alignBlock:"center",spread:"space-between",xcss:y},e(r).createElement(n("kpYGL").default,{isShimmering:!0,width:145,height:14,borderRadius:18}),e(r).createElement(n("kpYGL").default,{isShimmering:!0,width:24,height:24,borderRadius:5})),e(r).createElement(n("1GzhS").default,{xcss:I},e(r).createElement(k,null),e(r).createElement(k,null),e(r).createElement(k,null),e(r).createElement(n("dcJ7R").default,{alignInline:"end",space:"space.100"},e(r).createElement(n("kpYGL").default,{isShimmering:!0,width:61,height:32,borderRadius:3}),e(r).createElement(n("kpYGL").default,{isShimmering:!0,width:61,height:32,borderRadius:3}))))),C=()=>e(r).createElement(n("eyWa4").default,{xcss:"_1rjcu2gc _18zr1ejb",space:"space.200",testId:"reference-database-skeleton"},e(r).createElement(n("u9agA").default,{space:"space.150",alignInline:"start"},e(r).createElement(n("kpYGL").default,{isShimmering:!0,width:240,height:40,borderRadius:3}),e(r).createElement(n("kpYGL").default,{isShimmering:!0,width:240,height:40,borderRadius:3}),e(r).createElement(n("kpYGL").default,{isShimmering:!0,width:240,height:40,borderRadius:3})),e(r).createElement(n("eyWa4").default,{alignBlock:"center",alignInline:"center",space:"space.400",xcss:"_1bsb1osq _4t3irdnh"},e(r).createElement(n("kpYGL").default,{isShimmering:!0,width:108,height:108,borderRadius:"100%"}),e(r).createElement(n("kpYGL").default,{isShimmering:!0,width:316,height:14,borderRadius:18})),e(r).createElement(n("u9agA").default,{alignInline:"end",space:"space.100",xcss:"_n3td1ejb"},e(r).createElement(n("kpYGL").default,{isShimmering:!0,width:61,height:32,borderRadius:3}),e(r).createElement(n("kpYGL").default,{isShimmering:!0,width:61,height:32,borderRadius:3}))),T=e=>/database\/\d+/.test(e),P=({onClose:t,intl:a})=>{let o=(0,r.useRef)(null),[s,i]=(0,r.useState)(null),{activationId:c,userId:d,cloudId:u}=(0,n("bQm3c").useSessionData)(),f=p(),[g,b]=(0,r.useState)(!0);(0,r.useEffect)(()=>{(0,n("hp2SH").getApolloClient)().query({query:m}).then(({data:e})=>{i({accountId:e?.user?.id,nickname:e?.user?.displayName,picture:e?.user?.photos?.find(e=>e?.isPrimary)?.value,email:e?.user?.emails?.find(e=>e?.isPrimary)?.value,locale:e?.user?.locale})})},[]);let E=(0,r.useCallback)(e=>{if(o.current&&e.source===o.current.contentWindow)try{let a=JSON.parse(e.data);a.finalDatabaseUrl&&T(a.finalDatabaseUrl)?t(a.finalDatabaseUrl):a.cancelDatabaseReference?t(void 0):a.databaseReferencingComponentLoaded&&b(!1)}catch(e){}},[t,o]);(0,r.useEffect)(()=>(window.addEventListener("message",E),()=>{window.removeEventListener("message",E)}),[E]);let h=(0,n("9wGTI").fg)("databases-frontend-embed-database-modal")?C:v;return e(r).createElement(n("6xdDU").default,null,e(r).createElement(n("8CZUH").default,{width:1200,height:592,onClose:()=>t(void 0),testId:"reference-database-modal",label:a.formatMessage(l.referenceDatabaseModalLabel)},(0,n("9wGTI").fg)("databases-frontend-embed-database-modal")&&e(r).createElement(n("9ot3w").default,{hasCloseButton:!0},e(r).createElement(n("d8eRd").default,null,a.formatMessage(l.referenceDatabaseTitle))),g||!s?e(r).createElement(h,null):null,e(r).createElement("iframe",{style:{width:"100%",height:"600px",border:"0px",display:!g&&s?"block":"none"},src:f,...s?{"data-bridge-data":JSON.stringify({cloudId:u,activationId:c,userId:d,identity:s})}:{},title:"reference-database-frame",ref:o})))},w=(0,n("eSUdr").default)`query DatabaseValueContainerContentUnifiedQuery($contentId:ID!){content(id:$contentId){nodes{id referenceId space{id key name}}}user:confluence_atlassianUser(current:true){id displayName photos{value isPrimary}emails{value isPrimary}locale}}`,x=e(r).memo(({contentId:t,entryId:a,fieldId:o,isEdit:s})=>{let i=(0,r.useRef)(null),[c,l]=(0,r.useState)(null),[d,u]=(0,r.useState)(!1),[m,f]=(0,r.useState)(0),[g,b]=(0,r.useState)(0),E=new URL(p(),window.location.origin),[h,y]=(0,r.useState)(null),{activationId:I,userId:S,cloudId:k}=(0,n("bQm3c").useSessionData)();(0,r.useEffect)(()=>{(0,n("hp2SH").getApolloClient)().query({query:w,variables:{contentId:t}}).then(({data:e})=>{l({contentReferenceId:e.content?.nodes?.[0]?.referenceId,spaceId:e.content?.nodes?.[0]?.space?.id,spaceKey:e.content?.nodes?.[0]?.space?.key,spaceName:e.content?.nodes?.[0]?.space?.name}),y({accountId:e?.user?.id,nickname:e?.user?.displayName,picture:e?.user?.photos?.find(e=>e?.isPrimary)?.value,email:e?.user?.emails?.find(e=>e?.isPrimary)?.value,locale:e?.user?.locale}),u(!0)})},[t]);let v={cloudId:k,activationId:I,userId:S,identity:h,contentId:t,...c?{content:c}:{}},C=(0,r.useCallback)(e=>{if(i.current&&e.source===i.current.contentWindow)try{let t=JSON.parse(e.data);"resize"===t.method&&"width"in t&&"height"in t&&(f(t.width),b(t.height))}catch(e){}},[]);return((0,r.useEffect)(()=>(window.addEventListener("message",C),()=>{window.removeEventListener("message",C)}),[C]),a&&o&&t)?(E.searchParams.delete("referencing"),E.searchParams.set("contentId",t),E.searchParams.set("entryId",a),E.searchParams.set("fieldId",o),e(r).createElement(e(r).Fragment,null,e(r).createElement("iframe",{style:{width:`${m}px`,height:`${g}px`,border:"0px",pointerEvents:s?"none":"auto",verticalAlign:"middle"},src:E.toString(),...d?{"data-bridge-data":JSON.stringify(v)}:{},title:"database-value-frame",ref:i}),0===m||0===g?e(r).createElement(n("9hlns").default,{testId:"database-value-spinner"}):null)):null}),_="databases-create-with-template-type",A=e=>!!e&&"graphQLErrors"in e&&e.graphQLErrors?.some(e=>e.extensions.data.errors.some(e=>e.message.key.includes("The parent space does not match the desired space"))),D=e=>!!e&&"graphQLErrors"in e&&e.graphQLErrors?.some(e=>e.extensions.data.errors.some(e=>e.message.key.includes("Invalid potential parent passed"))),R=e=>A(e)?{title:l.parentPageMovedErrorTitle,description:l.parentPageMovedErrorDescription}:D(e)?{title:l.invalidParentErrorTitle,description:l.invalidParentErrorDescription}:(0,n("1uFM6").isUnauthorizedError)(e)?{title:l.permissionRemovedErrorTitle,description:l.permissionRemovedErrorDescription}:null,N=({createAnalyticsEvent:e,template:t})=>{e?.({type:"sendUIEvent",data:{action:"clicked",actionSubject:"link",actionSubjectId:"redirectToDatabase",source:"editorComponent",attributes:{flow:"inlineDatabaseCreation",contentType:"database",collabService:"canvas-relay",templateType:t?.type,templateLayout:t?.layout}}}).fire()},M=({pageId:t,spaceKey:a,spaceId:o,experienceTracker:i,createAnalyticsEvent:c,flags:d,template:u})=>async()=>{try{i?.start({name:n("irVI7").CREATE_DATABASE_EXPERIENCE,timeout:n("aJPUt").ExperienceTimeout.CREATE_CONTENT,attributes:{flow:"inlinePageCreation"}});let{id:p}=(await (0,n("hp2SH").getApolloClient)().mutate({mutation:s,variables:{createdInContentId:t,spaceKey:a}})).data.createContentInline;u&&(n("c4TO3").AtlBrowserStorageLocal.setItem(_,JSON.stringify({templateLayout:u.layout,templateType:u.type,contentId:p})),setTimeout(()=>{n("c4TO3").AtlBrowserStorageLocal.removeItem(_)},1e4)),c?.({type:"sendTrackEvent",data:{actionSubject:"content",action:"createdByFlow",objectId:p,objectType:"database",containerId:o,containerType:"space",source:"editorComponent",attributes:{flow:"inlineDatabaseCreation",contentType:"database",collabService:"canvas-relay",templateType:u?.type,templateLayout:u?.layout}}}).fire();let m=L(p,a);return await d?.showFlag({type:"success-circle",title:e(r).createElement(n("gtD4K").default,l.successFlagTitle),actions:[{content:e(r).createElement(n("gtD4K").default,l.successFlagAction),href:m,target:"_blank",onClick:()=>N({createAnalyticsEvent:c,template:u})}],description:e(r).createElement(n("gtD4K").default,l.successFlagDescription)}),i?.succeed({name:n("irVI7").CREATE_DATABASE_EXPERIENCE}),{type:"embedCard",attrs:{url:m}}}catch(o){n("c4TO3").AtlBrowserStorageLocal.removeItem(_);let t=(0,n("jn9ek").getTraceIdFromApolloError)(o),a=R(o);a?(i?.succeed({name:n("irVI7").CREATE_DATABASE_EXPERIENCE,attributes:{abortReason:"expectedErrorMessage"}}),await d?.showErrorFlag({title:e(r).createElement(n("gtD4K").default,a.title),description:e(r).createElement(n("gtD4K").default,a.description)})):((0,n("5ZqQS").getMonitoringClient)().submitError(o,{attribution:n("3IBnw").Attribution.DATABASES}),i?.stopOnError({name:n("irVI7").CREATE_DATABASE_EXPERIENCE,error:o,attributes:{cteTraceId:t}}),await d?.showErrorFlag({title:e(r).createElement(n("gtD4K").default,l.defaultErrorFlagTitle),description:e(r).createElement(n("gtD4K").default,l.defaultErrorFlagDescription)})),(0,n("7Sm4c").markErrorAsHandled)(o)}},L=(e,t)=>{let a=n("1NBp8").DATABASE_VIEW.toUrl({spaceKey:t,contentId:e});return window.location.origin+a},O=t=>async()=>{let a,s=document.createElement("div");document.body.appendChild(s);let i=await (0,n("ge2sX").getSessionData)();try{a=await new Promise(a=>{e(o).render(e(r).createElement(n("f7i8j").SessionDataContext.Provider,{value:i},e(r).createElement(P,{onClose:async e=>{a(e)},intl:t})),s)})}finally{e(o).unmountComponentAtNode(s),document.body.removeChild(s)}return a?{type:"embedCard",attrs:{url:a}}:void 0},j=()=>{switch((0,n("6mKj3").expVal)("cc_fd_wb_create_priority_in_slash_menu_experiment","cohort","control")){case"wb_first":return -100;case"db_first":return -300;default:return}},B=t=>(0,n("6mKj3").UNSAFE_expValNoExposure)("cc_fd_db_quick_insert_options","isEnabled",!1)?e(r).createElement(e(n("6B0jU")),{label:t.formatMessage(l.createDatabaseIconAltText)}):e(r).createElement("img",{src:e(d),alt:t.formatMessage(l.createDatabaseIconAltText)}),F=({pageId:t,spaceKey:a,spaceId:o,experienceTracker:s,createAnalyticsEvent:i,intl:c,flags:d})=>{let u=[{key:"create-database",title:c.formatMessage(l.createDatabaseTitle),description:c.formatMessage(l.createDatabaseDescription),priority:j(),icon:async()=>()=>B(c),action:M({pageId:t,spaceKey:a,spaceId:o,experienceTracker:s,createAnalyticsEvent:i,flags:d})}];if((0,n("6mKj3").UNSAFE_expValNoExposure)("cc_fd_db_quick_insert_options","isEnabled",!1)){let p={pageId:t,spaceKey:a,spaceId:o,experienceTracker:s,createAnalyticsEvent:i,flags:d};u.push({key:"create-database-board-layout",title:c.formatMessage(l.databaseBoardLayoutTitle),description:c.formatMessage(l.databaseBoardLayoutDescription),icon:async()=>()=>e(r).createElement(e(n("5aaqS")),{label:c.formatMessage(l.databaseBoardLayoutIconAltText)}),action:M({...p,template:{layout:"board",type:"simpleDatabase"}})},{key:"create-database-gallery-layout",title:c.formatMessage(l.databaseGalleryLayoutTitle),description:c.formatMessage(l.databaseGalleryLayoutDescription),icon:async()=>()=>e(r).createElement(e(n("dk0le")),{label:c.formatMessage(l.databaseGalleryLayoutIconAltText)}),action:M({...p,template:{layout:"gallery",type:"simpleDatabase"}})},{key:"create-database-table-layout",title:c.formatMessage(l.databaseTableLayoutTitle),description:c.formatMessage(l.databaseTableLayoutDescription),icon:async()=>()=>e(r).createElement(e(n("4ymSL")),{label:c.formatMessage(l.databaseTableLayoutIconAltText)}),action:M({...p,template:{layout:"table",type:"simpleDatabase"}})})}return u};t.exports.getFullDatabaseUrl=L,t.exports.createDatabaseExtension=({pageId:t,spaceKey:a,spaceId:o,intl:s,flags:i,experienceTracker:c,createAnalyticsEvent:d,contentType:p,allowDatabaseQuickInsert:m,isEdit:f})=>{let g=[];return"page"===p&&g.push(...F({pageId:t,spaceKey:a,spaceId:o,experienceTracker:c,createAnalyticsEvent:d,intl:s,flags:i})),g.push({key:"reference-database",title:s.formatMessage(l.referenceDatabaseTitle),description:s.formatMessage(l.referenceDatabaseDescription),icon:async()=>()=>e(r).createElement("img",{src:e(u),alt:s.formatMessage(l.referenceDatabaseIconAltText)}),action:O(s)}),{title:s.formatMessage(l.manifestTitle),type:"com.atlassian.confluence.macro.core",key:"database-extension",icons:{48:async()=>()=>B(s)},modules:{quickInsert:m?g:[],nodes:{default:{type:"inlineExtension",render:async()=>{let t=await (0,n("ge2sX").getSessionData)();return({node:a})=>{let o=a.parameters?.macroParams?.contentId.value,s=a.parameters?.macroParams?.entryId.value,i=a.parameters?.macroParams?.fieldId.value;return e(r).createElement(n("f7i8j").SessionDataContext.Provider,{value:t},e(r).createElement(x,{contentId:o,fieldId:i,entryId:s,isEdit:f}))}}}}}}}}),s("9Eka4",function(e,t){var a=n("42omo"),r=n("l998X");n("42omo");var o=n("keGcB");let s=({nodeProps:e,syncBlockStoreManager:t,rendererOptions:a})=>{let{resourceId:s,localId:i,fireAnalyticsEvent:c}=e;t.referenceManager.updateFireAnalyticsEvent(c);let{syncBlockInstance:l,isLoading:d,reloadData:u,providerFactory:p}=(0,n("a7tZV").useFetchSyncBlockData)(t,s,i,c);if(d&&!l)return(0,r.jsx)(n("1Wy2j").SyncedBlockLoadingState,{});if(!s||l?.error||!l?.data)return(0,r.jsx)(n("bEEXh").SyncedBlockErrorComponent,{error:l?.error??n("awHlv").SyncBlockError.Errored,resourceId:l?.resourceId,onRetry:u,isLoading:d,fireAnalyticsEvent:c});let m={content:l.data.content,version:1,type:"doc"};return(0,r.jsx)("div",{className:n("e6n00").SyncBlockSharedCssClassName.renderer,[n("e6n00").SyncBlockRendererDataAttributeName]:!0,children:(0,r.jsx)(o.AKRendererWrapper,{doc:m,dataProviders:p,options:a})})},i=e=>{let{content:t}=e;return t&&Array.isArray(t)&&0!==t.length?t.map(e=>(0,n("gtauf").convertSyncBlockJSONNodeToSyncBlockNode)(e)).filter(e=>void 0!==e):[]},c=({syncBlockNodes:e,syncBlockProvider:t,syncBlockRendererOptions:o,fireAnalyticsEvent:i})=>{let c=(0,n("lEQpi").useMemoizedSyncBlockStoreManager)(t,i);return(0,a.useEffect)(()=>{c.referenceManager.fetchSyncBlocksData(e)},[e,c.referenceManager]),(0,a.useCallback)(e=>(0,r.jsx)(s,{nodeProps:e,syncBlockStoreManager:c,rendererOptions:o},e.localId),[c,o])};var l=n("32x2E");let d=(e,t)=>(0,a.useMemo)(()=>({createEmojiProvider:()=>(0,l.getEmojiProvider)(n("ibzAc").default,{cloudId:e,userId:t||void 0,allowAnonymousAccess:!0}),createMediaProvider:({contentId:e})=>(0,n("4IoVL").createRendererMediaProvider)({contentId:e,isExternalShare:!1})}),[e,t]),u=()=>{let e="undefined"!=typeof globalThis?globalThis.__SSR_EDITOR_NODE_DATA_PROVIDERS_DATA__?.syncBlocks:void 0;if(e)return e.reduce((e,t)=>(e[t.resourceId]=t,e),{})},p=(0,n("dTb09").conditionalHooksFactory)(()=>(0,n("6mKj3").isExperimentEnabled)("platform_synced_block"),({doc:e,cloudId:t,userId:r,contentId:o,contentType:s,mergedDataProviderDefinitions:l})=>{let p=(0,a.useMemo)(()=>i(e),[e]),m=(0,a.useMemo)(()=>o?(0,n("f8eu7").getConfluencePageAri)(o,t,"page"===s?"page":"blogpost"):void 0,[t,o,s]),{createAnalyticsEvent:f}=(0,n("inPa6").useAnalyticsEvents)(),{fetchProvider:g,writeProvider:b}=(0,n("drwOC").useMemoizedContentAPIProviders)(t),{fetchProvider:E,writeProvider:h}=(0,n("l1vR8").useMemoizedBlockServiceAPIProviders)(m??"","confluence-page",o??""),y=d(t,r),I=(0,a.useMemo)(()=>({parentDataProviders:{...l},providerCreator:y}),[l,y]),S=c({syncBlockProvider:(0,n("1RH0O").useMemoizedSyncedBlockProvider)((0,n("9wGTI").fg)("platform_synced_blocks_block_service_provider")?E:g,(0,n("9wGTI").fg)("platform_synced_blocks_block_service_provider")?h:b,m??"",I,u),syncBlockNodes:p,syncBlockRendererOptions:void 0,fireAnalyticsEvent:(0,a.useCallback)(e=>{f(e).fire()},[f])});return o?S:void 0},e=>{});e.exports.useMemoizedSyncedBlockNestedRendererProviderCreator=d,e.exports.useMemoizedSyncedBlockProviderNodeComponent=p}),s("keGcB",function(e,t){var a=n("l998X"),r=n("42omo"),o=n("hlcQd"),s=n("67O0h");let i=({children:e})=>{let t=(0,r.useMemo)(()=>({allowNestedTables:!0}),[]);return(0,a.jsx)(n("iZq0X").ValidationContextProvider,{value:t,children:e})},c=({componentKey:e,...t})=>{let{formatMessage:r}=(0,n("8C5kA").default)(),s=r(n("fzXn1").syncBlockMessages.taskInDestinationSyncedBlockTooltip),i=o.nodeToReact[e];return(0,a.jsx)(n("3gadb").default,{content:s,position:"auto-start",children:e=>(0,a.jsx)("div",{...e,children:(0,a.jsx)(i,{...t,disableOnChange:!0})})})},l={allowAltTextOnImages:!0,allowAnnotations:!0,allowColumnSorting:!0,allowCopyToClipboard:!0,allowCustomPanels:!0,allowPlaceholderText:!0,allowRendererContainerStyles:!0,allowSelectAllTrap:!0,allowUgcScrubber:!0,allowWrapCodeBlock:!0,emojiResourceConfig:void 0,media:{allowLinking:!0,allowCaptions:!0,featureFlags:{mediaInline:!0}},smartLinks:void 0},d=(0,r.memo)(({doc:e,dataProviders:t,options:o})=>{let{allowAltTextOnImages:d,allowAnnotations:u,allowColumnSorting:p,allowCopyToClipboard:m,allowCustomPanels:f,allowHeadingAnchorLinks:g,allowPlaceholderText:b,allowRendererContainerStyles:E,allowSelectAllTrap:h,allowUgcScrubber:y,allowWrapCodeBlock:I,emojiResourceConfig:S,media:k,smartLinks:v,stickyHeaders:C}={...l,...o}??{},T=(0,r.useMemo)(()=>({taskItem:e=>(0,a.jsx)(c,{componentKey:"taskItem",...e}),blockTaskItem:e=>(0,a.jsx)(c,{componentKey:"blockTaskItem",...e})}),[]);return(0,a.jsx)(n("lspPP").RendererActionsContext,{children:(0,a.jsx)(i,{children:(0,a.jsx)("div",{"data-testid":"sync-block-renderer-wrapper",children:(0,a.jsx)(s.default,{appearance:"full-width",adfStage:"stage0",document:e,disableHeadingIDs:!0,dataProviders:t,nodeComponents:T,allowAltTextOnImages:d,allowAnnotations:u,allowColumnSorting:p,allowCopyToClipboard:m,allowCustomPanels:f,allowHeadingAnchorLinks:g,allowPlaceholderText:b,allowRendererContainerStyles:E,allowSelectAllTrap:h,allowUgcScrubber:y,allowWrapCodeBlock:I,emojiResourceConfig:S,media:k,smartLinks:v,stickyHeaders:C})})})})});e.exports.AKRendererWrapper=d}),s("bEEXh",function(t,a){var r,o,s,i=n("l998X"),c=n("42omo");n("42omo"),n("42omo");let l=({children:t,description:a})=>(0,i.jsxs)(n("gdv5Z").default,{xcss:"_zulppxbi _ca0qu2gc _n3tdu2gc _19bvpxbi _u5f3pxbi _1e0c1txw _1bahv2br _4cvr1h6o",children:[(0,i.jsx)(e(n("744ND")),{color:"var(--ds-icon-subtle, #505258)",label:""}),(0,i.jsx)(n("iXCQx").default,{color:"color.text.subtle",children:a}),t]}),d=()=>{let{formatMessage:e}=(0,n("8C5kA").default)();return(0,i.jsx)(l,{description:e(n("fzXn1").syncBlockMessages.generalErrorDescription)})};n("42omo");let u=({onRetry:e,isLoading:t})=>{let{formatMessage:a}=(0,n("8C5kA").default)();return(0,i.jsx)(l,{description:a(n("fzXn1").syncBlockMessages.generalErrorDescription),children:e&&(0,i.jsx)(n("ccHMk").default,{appearance:"default",spacing:"compact",onClick:t=>{t.preventDefault(),t.stopPropagation(),e()},isLoading:t,testId:"sync-block-retry-btn",children:a(n("fzXn1").syncBlockMessages.retryButton)})})};n("42omo");let p=()=>{let{formatMessage:e}=(0,n("8C5kA").default)();return(0,i.jsx)(l,{description:e(n("fzXn1").syncBlockMessages.notFoundDescription)})};n("42omo");let m=()=>{let{formatMessage:e}=(0,n("8C5kA").default)();return(0,i.jsx)(l,{description:e(n("fzXn1").syncBlockMessages.offlineError)})},f={fragment:{argumentDefinitions:r=[{defaultValue:null,kind:"LocalArgument",name:"requestPageAccessInput"}],kind:"Fragment",name:"SyncedBlockPermissionDeniedRequestAccessMutation",selections:o=[{args:[{kind:"Variable",name:"requestPageAccessInput",variableName:"requestPageAccessInput"}],concreteType:"RequestPageAccessPayload",kind:"LinkedField",name:"requestPageAccess",plural:!1,selections:[{kind:"ScalarField",name:"displayName"}]}],type:"Mutation"},kind:"Request",operation:{argumentDefinitions:r,kind:"Operation",name:"SyncedBlockPermissionDeniedRequestAccessMutation",selections:o},params:{id:"68a651ca7e5a5c9b5a075954ed948672c451b0f8c255f4edbd3219fe4947484d",metadata:{},name:"SyncedBlockPermissionDeniedRequestAccessMutation",operationKind:"mutation",text:null}};f.hash="d0d4982ad805583380d2436a8e21ee6a";var g=n("irOoi"),b={};b=new URL("PermissionDenied.bfcb6211.svg",import.meta.url).toString();var E=((s=E||{}).default="default",s.errored="errored",s.loading="loading",s.pending="pending",s);let h=({sourceContentId:t})=>{let{formatMessage:a}=(0,n("8C5kA").default)(),[r,o]=(0,c.useState)("default"),s=()=>{o("pending")},l=()=>{o("errored")},[d]=(0,g.useMutation)(f);return(0,i.jsxs)(n("gdv5Z").default,{xcss:"_zulppxbi _ca0qv47k _n3tdv47k _19bvv47k _u5f3v47k _1e0c1txw _1bahv2br _4cvr1h6o",children:[(0,i.jsx)(n("gj7hi").default,{src:e(b),alt:a(n("fzXn1").syncBlockMessages.permissionDeniedAltText),width:"48",height:"48"}),(0,i.jsxs)(n("eyWa4").default,{space:"space.100",children:[(0,i.jsx)(n("7hXDW").default,{size:"xsmall",children:a(n("fzXn1").syncBlockMessages.permissionDeniedHeading)}),(0,i.jsx)(n("iXCQx").default,{color:"color.text.subtle",children:a(n("fzXn1").syncBlockMessages.permissionDeniedDescription)}),"pending"===r?(0,i.jsxs)(n("1s5hv").default,{columnGap:"space.050",alignItems:"center",children:[(0,i.jsx)(e(n("3sFtD")),{size:"small",color:"var(--ds-icon-subtle, #505258)",label:""}),(0,i.jsx)(n("iXCQx").default,{color:"color.text.subtlest",weight:"bold",testId:"sync-block-access-requested-msg",children:a(n("fzXn1").syncBlockMessages.accessRequested)})]}):(0,i.jsxs)(n("1s5hv").default,{columnGap:"space.100",alignItems:"center",children:[(0,i.jsx)(n("ccHMk").default,{appearance:"default",spacing:"compact",onClick:()=>{o("loading"),d({variables:{requestPageAccessInput:{pageId:t,accessType:"VIEW"}},onCompleted:()=>{s()},onError:l})},isLoading:"loading"===r,testId:"sync-block-request-access-btn",children:a(n("fzXn1").syncBlockMessages.requestAccessButton)}),"errored"===r&&(0,i.jsx)(n("iXCQx").default,{color:"color.text.warning",testId:"sync-block-access-error-msg",children:a(n("fzXn1").syncBlockMessages.requestAccessError)})]})]})]})},y=({sourceContentId:e,sourceProduct:t})=>"confluence-page"===t?(0,i.jsx)(h,{sourceContentId:e}):(0,i.jsx)(d,{}),I=(e,t)=>{try{if(!e)throw Error("Missing resource id");let{sourceContentId:t,sourceProduct:a}=(0,n("gtauf").getContentIdAndProductFromResourceId)(e);return(0,i.jsx)(y,{sourceContentId:t,sourceProduct:a})}catch(e){return(0,n("hWRJP").logException)(e,{location:"editor-synced-block-renderer/SyncedBlockErrorComponent"}),t?.((0,n("cFpEg").fetchErrorPayload)(e.message)),(0,i.jsx)(d,{})}};t.exports.SyncedBlockErrorComponent=({error:e,isLoading:t,onRetry:a,resourceId:r,fireAnalyticsEvent:o})=>{let s=(0,c.useMemo)(()=>{switch(e){case n("awHlv").SyncBlockError.Offline:return(0,i.jsx)(m,{});case n("awHlv").SyncBlockError.Forbidden:return I(r,o);case n("awHlv").SyncBlockError.NotFound:return(0,i.jsx)(p,{});case n("awHlv").SyncBlockError.Errored:case n("awHlv").SyncBlockError.RateLimited:case n("awHlv").SyncBlockError.ServerError:return(0,i.jsx)(u,{onRetry:a,isLoading:t});default:return(0,i.jsx)(d,{})}},[e,t,a,r,o]);return(0,i.jsx)("div",{className:n("e6n00").SyncBlockSharedCssClassName.error,children:s})}}),s("744ND",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=void 0;var a=o(n("42omo")),r=o(n("aSNrY"));function o(e){return e&&e.__esModule?e:{default:e}}let s=e=>a.default.createElement(r.default,Object.assign({name:"WarningOutlineIcon",dangerouslySetGlyph:'<path fill="currentcolor" fill-rule="evenodd" d="M5.7 1.383c.996-1.816 3.605-1.817 4.602-.002l5.35 9.73C16.612 12.86 15.346 15 13.35 15H2.667C.67 15-.594 12.862.365 11.113zm3.288.72a1.125 1.125 0 0 0-1.972.002L1.68 11.834c-.41.75.132 1.666.987 1.666H13.35c.855 0 1.398-.917.986-1.667z" clip-rule="evenodd"/><path fill="currentcolor" fill-rule="evenodd" d="M7.25 9V4h1.5v5z" clip-rule="evenodd"/><path fill="currentcolor" d="M9 11.25a1 1 0 1 1-2 0 1 1 0 0 1 2 0"/>'},e));s.displayName="WarningOutlineIcon",e.exports.default=s}),s("1Wy2j",function(e,t){var a=n("l998X");n("42omo");e.exports.SyncedBlockLoadingState=()=>(0,a.jsx)("div",{className:n("e6n00").SyncBlockSharedCssClassName.loading,children:(0,a.jsx)(n("gdv5Z").default,{xcss:"_1tkevbgk _1e0c1txw _1bah1h6o _4cvr1h6o",children:(0,a.jsx)(n("9hlns").default,{size:"small",label:"Loading synced content"})})})}),s("edEsl",function(e,t){var a=n("04e9M");let r=new Map,o=(e,t)=>r.set(e,t)&&void setTimeout(()=>r.delete(e),3e3),s=(e,t)=>{if(!e.isUserCollection)return r.get(e?.fileId)||(()=>{let r=(0,n("9wGTI").fg)("confluence_event_notifier_deprecation")?Promise.resolve({}):fetch("/wiki/rest/internal/1.0/eventnotifier/notify",{method:"POST",body:JSON.stringify({attachmentViewed:{fileStoreId:e.fileId}}),headers:{"Content-Type":"application/json"}});return(0,n("9wGTI").fg)("confluence_event_notifier_updates")&&(0,a.getAnalyticsWebClient)().then(a=>{a.sendTrackEvent({source:"ui",actionSubject:"attachment",action:"viewed",name:"attachment viewed",attributes:{activationId:e.fileId,pageType:t}})}),o(e.fileId,r),r})()},i=!1,c=null;e.exports.registerGlobalMediaViewedListener=({contentType:e})=>{i||(c=t=>{s(t,e)},n("eGqQQ").globalMediaEventEmitter.on("media-viewed",c),i=!0)},e.exports.removeGlobalMediaViewedListener=()=>{c&&(n("eGqQQ").globalMediaEventEmitter.off("media-viewed",c),c=null,i=!1)}}),s("eXfot",function(e,t){let a=(0,n("eSUdr").default)`mutation SetBatchedTaskStatus($contentId:ID!$tasks:[InlineTask]!$trigger:PageUpdateTrigger=VIEW_PAGE){setBatchedTaskStatus(batchedInlineTasksInput:{contentId:$contentId tasks:$tasks trigger:$trigger}){success}}`;e.exports.SetBatchedTaskStatusMutation=a}),s("k2in1",function(e,t){let a=e=>{let t,a=parseInt(e);if(isNaN(a)){let a=new Date(e).getTime()-Date.now();a>0&&(t=a)}else t=1e3*a;return t},r=async(e,t,o=3,n=1e3)=>{let s=await fetch(e,t);if(!(!s.ok&&429===s.status&&o>1))return s;let i=s.headers.get("Retry-After");return await new Promise(e=>setTimeout(e,i?a(i):n)),r(e,t,o-1,2*n)};e.exports.fetchWithRetry=r}),s("gWAcf",function(e,t){e.exports.isBlogPageType=e=>"blogpost"===e}),a.rlb("lavAq");
//# sourceMappingURL=FullPageEditorComponent.d50066f7.js.map
