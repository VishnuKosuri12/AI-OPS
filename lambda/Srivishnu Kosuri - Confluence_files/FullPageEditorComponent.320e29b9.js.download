function e(e){return e&&e.__esModule?e.default:e}function t(e,t,a,r){Object.defineProperty(e,t,{get:a,set:r,enumerable:!0,configurable:!0})}var a=globalThis,r={},n={},o=a.parcelRequired477;null==o&&((o=function(e){var t=r[e];if(void 0!==t)return t.exports;var a=n[e];if(void 0!==a){delete n[e];var o={id:e,exports:{}};return r[e]=o,a.call(o.exports,o,o.exports),o.exports}var i=Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){n[e]=t},a.parcelRequired477=o);var i=o.register;a.lb||(a.lb=new Set,a.bq=[],a.rlb=e=>{a.lb.add(e),a.pq()},a.rwr=(e,t,r)=>{a.bq.push({b:e,r:t,d:r}),a.pq()},a.pq=()=>{var e=a.bq.find(e=>e.d.every(e=>a.lb.has(e)));e&&(a.bq=a.bq.filter(t=>t.b!==e.b),e.r(),a.pq())}),i("KcDWk",function(e,t){var a=o("3u0dr"),r=o("frIzR");let n=new Map,i=new Set;function s(){for(let e of n.keys())i.has(e)||n.delete(e)}let l=(0,a.isReactCompilerActiveV1)()?function(e){let t,a=(0,r.c)(3),s=(0,o("dPJCf").useTransitionId)();return i.add(e),a[0]!==e||a[1]!==s?(t=s?void 0:n.get(e),a[0]=e,a[1]=s,a[2]=t):t=a[2],t}:function(e){let t=(0,o("dPJCf").useTransitionId)();return i.add(e),t?void 0:n.get(e)};e.exports.releaseSSRedLegacyMacros=function(){n.clear()},e.exports.releaseUnusedSSRedLegacyMacrosWithDelay=function(){setTimeout(s,1e4)},e.exports.useSSRedLegacyMacroElement=l,e.exports.collectSSRedLegacyMacro=function(e){if(!n.has(e)){let t=document.querySelector(`[data-fabric-macro="${e}"][data-skate-created]`);t&&n.set(e,t)}}}),i("9p5st",function(e,t){let a=(0,o("eSUdr").default)`query MacroContentRendererQueryWithTags($adf:String!$containedRender:Boolean=false$contentId:ID!$mode:ContentRendererMode=RENDERER){contentRenderer(adf:$adf containedRender:$containedRender contentId:$contentId mode:$mode){html webResourceDependencies{contexts keys tags{js css}}}}`,r=(0,o("eSUdr").default)`query MacroBodyRendererQueryWithTags($adf:String!$containedRender:Boolean=false$contentId:ID$mode:ContentRendererMode=RENDERER)@allowHigherTimeout{macroBodyRenderer(adf:$adf containedRender:$containedRender contentId:$contentId mode:$mode){value representation mediaToken{token}webResourceDependencies{contexts keys tags{js css}}}}`;e.exports.MacroContentRendererQueryWithTags=a,e.exports.MacroBodyRendererQueryWithTags=r}),i("kmYOg",function(e,t){var a,r,n,o,i;let s={fragment:{argumentDefinitions:[a={defaultValue:null,kind:"LocalArgument",name:"contentStatus"},r={defaultValue:null,kind:"LocalArgument",name:"first"},n={defaultValue:null,kind:"LocalArgument",name:"pageId"}],kind:"Fragment",name:"stateResolverPreloadAnnotationsDataQuery",selections:i=[{args:[{kind:"Literal",name:"confluenceCommentFilter",value:{commentState:"UNRESOLVED",commentType:"INLINE"}},{kind:"Variable",name:"contentStatus",variableName:"contentStatus"},{kind:"Literal",name:"depth",value:"ROOT"},{kind:"Variable",name:"first",variableName:"first"},{kind:"Variable",name:"pageId",variableName:"pageId"},{kind:"Literal",name:"type",value:["INLINE"]}],concreteType:"PaginatedCommentList",kind:"LinkedField",name:"comments",plural:!1,selections:[{concreteType:"Comment",kind:"LinkedField",name:"nodes",plural:!0,selections:[{kind:"ScalarField",name:"id"},{kind:"ScalarField",name:"contentStatus"},{kind:"LinkedField",name:"location",plural:!1,selections:[o={kind:"ScalarField",name:"__typename"},{kind:"ScalarField",name:"type"},{kind:"InlineFragment",selections:[{kind:"ScalarField",name:"inlineMarkerRef"},{concreteType:"InlineCommentResolveProperties",kind:"LinkedField",name:"inlineResolveProperties",plural:!1,selections:[{kind:"ScalarField",name:"resolved"}]}],type:"InlineComment"}]}]},{kind:"ScalarField",name:"totalCount"},o]}],type:"Query"},kind:"Request",operation:{argumentDefinitions:[n,a,r],kind:"Operation",name:"stateResolverPreloadAnnotationsDataQuery",selections:i},params:{cacheID:"d689c46cc95f36419f19f207f3ceb687",id:"da0d02555fb2e7138559c38df00467b0a1669fe42733ebf6cfa8115dbdbb4a2f",metadata:{},name:"stateResolverPreloadAnnotationsDataQuery",operationKind:"query",text:"query stateResolverPreloadAnnotationsDataQuery($pageId:ID!,$contentStatus:[GraphQLContentStatus],$first:Long!){comments(pageId:$pageId,contentStatus:$contentStatus,confluenceCommentFilter:{commentState:UNRESOLVED,commentType:INLINE},type:[INLINE],depth:ROOT,first:$first){nodes{id,contentStatus,location{__typename,type,...on InlineComment{inlineMarkerRef,inlineResolveProperties{resolved}}}},totalCount,__typename}}"}};s.hash="af92d028ec6cef46bb981d53522dfe18",e.exports.default=s}),i("kDIns",function(t,a){let r;var n=o("a4TK8");let i=(0,o("eSUdr").default)`query AnnotationStateQuery($pageId:ID!$contentStatus:[GraphQLContentStatus]){comments(pageId:$pageId contentStatus:$contentStatus type:[INLINE UNRESOLVED]depth:ROOT first:1500){nodes{id location{type ...on InlineComment{inlineMarkerRef inlineResolveProperties{resolved resolvedUser}}}}}}`,s=o("kmYOg").default,l=(e,t)=>({pageId:e,contentStatus:(0,o("kgNLQ").buildDefaultCommentsContentStatusFilters)(t),first:o("NYiei").MAX_COMMENTS_TO_RETURN}),d=(0,o("7W8i8").getLogger)("inline-comments-common:state-resolver"),c=async({contentId:e,pageMode:t})=>{if(!e)return[];let a=(0,o("4L9ve").getProcessedCommentsDataState)();if(a.isDataProcessed)return a.openInlineComments;try{let a=await (0,o("c0rhi").queryInterop)({query:s,variables:l(e,t),fetchPolicy:"cache-first"});return a?.data?.comments?.nodes?.filter(e=>e?.location)||[]}catch{return[]}},u=(0,o("2XqLN").default)((e,t,a)=>{let r={},n=[];return e.forEach((e,t)=>{r[e]=t,n.push({annotationType:o("cUycv").AnnotationTypes.INLINE_COMMENT,id:e,state:o("cUycv").AnnotationMarkStates.RESOLVED})}),a?.forEach(e=>{if(!e.location?.inlineResolveProperties?.resolved){let t=e.location.inlineMarkerRef;if(t){let e=r[t];(e||0===e)&&(n[e].state=o("cUycv").AnnotationMarkStates.ACTIVE)}}}),t(e.filter(e=>n[r[e]].state===o("cUycv").AnnotationMarkStates.ACTIVE)),n},e(n)),m=(0,o("2XqLN").default)((e,t,a)=>{let r={},n=[];return e.forEach((e,t)=>{r[e]=t,n.push({annotationType:o("cUycv").AnnotationTypes.INLINE_COMMENT,id:e,state:{resolved:!0}})}),t.forEach(e=>{if(!e?.location?.inlineResolveProperties?.resolved){let t=r[e?.location?.inlineMarkerRef||""];(t||0===t)&&(n[t].state.resolved=!1)}}),a(e.filter(e=>{if(!n[r[e]].state.resolved)return e})),n},e(n)),p=async({annotations:e,pageId:t,triggerAnalyticsEvent:a,updateUnresolvedInlineComment:r})=>{if(!e.length)return r([]),Promise.resolve([]);try{let a;if((0,o("6mKj3").expVal)("cc_comments_new_comments_data_manager","isEnabled",!1))a=await c({contentId:t,pageMode:o("cD1qu").PageMode.LIVE});else{let e=await (0,o("hp2SH").getApolloClient)().query({query:i,fetchPolicy:"network-only",variables:{pageId:t,contentStatus:["DRAFT","CURRENT"]}});a=e.data.comments?.nodes?.filter(e=>null!==e)}return m(e,a,r)}catch(e){try{a&&a({data:{source:"editorComponent",action:"failed",actionSubject:"annotationState",actionSubjectId:"inlineComments",attributes:{errorName:e.name,errorMessage:e.message}},type:"sendOperationalEvent"}).fire()}catch(e){d.error`Error when logging analytics event, ${e}`}if((0,o("1uFM6").isUnauthorizedError)(e)||e?.message.includes("java.lang.NullPointerException")||e?.message.includes(".NotFoundException"))return(0,o("7Sm4c").markErrorAsHandled)(e),[];throw d.error`Error when retrieving resolved status for marks, ${e}`,e}},f=async({annotations:e,pageId:t,triggerAnalyticsEvent:a,validAnnotationsCallback:n,isNestedRender:s})=>{if(!e.length)return n([]),Promise.resolve([]);s||(r=e);try{let e;if((0,o("6mKj3").expVal)("cc_comments_new_comments_data_manager","isEnabled",!1))e=await c({contentId:t,pageMode:o("cD1qu").PageMode.VIEW});else{let a=await (0,o("hp2SH").getApolloClient)().query({query:i,fetchPolicy:s?"cache-first":"network-only",variables:{pageId:t}});e=a.data.comments?.nodes?.filter(e=>null!==e)}return u(r,n,e)}catch(e){try{a&&a({source:"rendererComponent",action:"failed",actionSubject:"annotationState",actionSubjectId:"inlineComments",attributes:{...(0,o("gtj7V").getCommentsDataManagerExperimentAttributes)(),errorName:e.name,errorMessage:e.message}}).fire()}catch(e){d.error`Error when logging analytics event, ${e}`}if((0,o("1uFM6").isUnauthorizedError)(e)||e?.message.includes("java.lang.NullPointerException")||e?.message.includes(".NotFoundException"))return(0,o("7Sm4c").markErrorAsHandled)(e),[];throw d.error`Error when retrieving resolved status for marks, ${e}`,e}};t.exports.buildPreloadAnnotationsDataQueryVariables=l,t.exports.getEditorResolvedState=p,t.exports.getRendererAnnotationStates=f}),i("ld6xp",function(e,t){function a(){return String(o("4VJDS").default.getStringList("confluence_frontend_macros_query_blocklist",["include","jirachart","jiraroadmap","ui-button","contentbylabel","excerpt-include","tasks-report-macro","blog-posts","section","table-filter","children","pagetree","detailssummary","decisionreport"])).split(",")}e.exports.getMultiMacroQueryBlocklistFF=a,e.exports.canUseMultiMacroQuery=function(e,t=!1){return!t&&!a().includes(e||"")}}),i("92uc5",function(e,t){e.exports.getContentConverterVariables=({content:e,contentId:t})=>{let a=e||[],r={type:"doc",content:Array.isArray(a)?a:[a],version:1};return{content:(0,o("gHCIk").serializeExtensionADF)(r),from:"atlas_doc_format",to:"storage",contentId:t}}}),i("8mIlz",function(e,t){let a=(e,t)=>e?.attrs?.parameters?.macroParams?._parentId?.value||t;e.exports.getMacroQueryVariables=({adf:e,node:t,mode:r="RENDERER",contentId:n})=>{let i=e||(0,o("6mEZ3").extensionToADF)(t),s=o("4VJDS").default.getBoolean("confluence_frontend_macro_adf_frontend_render",!0);return{adf:(0,o("gHCIk").serializeExtensionADF)(i),mode:r.toUpperCase(),contentId:s?a(i,n):n,isMacroContentAndBody:s}}}),i("6Cce7",function(e,t){let a=(0,o("eSUdr").default)`query ContentConverterQuery($content:String!$contentId:ID!$from:String!$to:String!$spaceKeyContext:String=""){contentConverter(from:$from to:$to content:$content contentIdContext:$contentId spaceKeyContext:$spaceKeyContext){value}}`;e.exports.ContentConverterQuery=a}),i("g1f2M",function(e,t){let a=(0,o("eSUdr").default)`query MacrosQuery($contentId:ID!$mode:MacroRendererMode=RENDERER$blocklist:[String!]$first:Int$after:String$refetchToken:String)@allowHigherTimeout{macros(contentId:$contentId blocklist:$blocklist first:$first after:$after refetchToken:$refetchToken){pageInfo{hasNextPage endCursor}nodes{macroId contentId renderedMacro(mode:$mode){value macroRenderedRepresentation macroBodyStorage webResource{contexts keys superbatch{metatags}tags{css data js}uris{css data js}}mediaToken{token}}}}}`;e.exports.MacrosQuery=a}),i("F4YLX",function(e,t){let a=(0,o("jmjWc").LoadableAfterPaint)({__loadable_id__:"jDbpB",name:"TourableRedactionExtensionLoader",loader:async()=>(await o("4ejSJ")).TourableRedactionExtension});e.exports.TourableRedactionExtensionLoader=a}),i("4ejSJ",function(e,t){let a=o("4mJKd")(5);e.exports=Promise.all([a("jXx9i"),a("5AfWB")]).then(()=>o("jubPE"))}),i("4mJKd",function(e,t){e.exports=e=>t=>import(o("8tirZ").shardUrl(o("02nRr").resolve(t),e))}),i("8tirZ",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.applyShardToDomain=i,e.exports.domainShardingKey=void 0,e.exports.getDomainShardIndex=r,e.exports.shardUrl=function(e,t){return globalThis[a]?s(e,t):e},e.exports.shardUrlUnchecked=s;let a="__ATLASPACK_ENABLE_DOMAIN_SHARDS";function r(e,t){let a=t+1,r=e.split("").reduce((e,t)=>{let r=(e<<a)-e+t.charCodeAt(0);return r&r},0);return(r%=a)<0&&(r+=a),r}let n=/-\d+$/;function o(e){if(!n.test(e))return e;let t=e.lastIndexOf("-");return e.slice(0,t)}function i(e,t){let a=e.indexOf("."),r=0===t?"":`-${t-1}`;if(-1===a)return`${o(e)}${r}`;let n=o(e.slice(0,a));return`${n}${r}${e.slice(a)}`}function s(e,t){let a=new URL(e),n=r(function(e){let t=e.lastIndexOf("/");if(-1===t||t===e.length-1)throw Error("Expected an absolute URL with a file name, unable to apply sharding.");return e.slice(t+1)}(a.pathname),t);return a.hostname=i(a.hostname,n),a.toString()}e.exports.domainShardingKey=a}),i("02nRr",function(e,a){t(e.exports,"register",()=>r,e=>r=e),t(e.exports,"resolve",()=>n,e=>n=e);var r,n,o=new Map;r=function(e,t){for(var a=0;a<t.length-1;a+=2)o.set(t[a],{baseUrl:e,path:t[a+1]})},n=function(e){var t=o.get(e);if(null==t)throw Error("Could not resolve bundle with id "+e);return new URL(t.path,t.baseUrl).toString()}}),i("fuLIO",function(t,a){var r=o("a4TK8"),n=o("42omo"),i=o("j1Ss3"),s=o("jSnXV"),l=o("56GFp");let d=(0,o("cgtv4").defineMessages)({highlightedPageIncludeRenderedError:{id:"fabric-extension-legacy-macro-renderer.legacy-macro-renderer-query.highlightedPageIncludeError",defaultMessage:"Unable to render { include }"},nonhighlightedPageIncludeRenderedError:{id:"fabric-extension-legacy-macro-renderer.legacy-macro-renderer-query.nonhighlightedPageIncludeRenderedError",defaultMessage:" Already included page “{pageTitle}”, stopping."}});o("dx8CK");var c=o("lEgye"),u=o("hEeUR"),m=o("989nU"),p=o("iaRmR"),f=o("hHZWk");class g{static init(e,t){if(null===this.macroActions){let e=e=>{let t=e?._context?.extension?.options?.productContext?.["macro.id"];if(!t)throw Error("No macro ID found in the call.");return t},a=(e,t)=>{let a=this.macrosCache.get(t);if("function"!=typeof a?.actions?.[e])throw Error("Failed to execute this method. Please ensure that you are calling this method from within a multi-body extension inside your Connect application.");return a.actions[e]},r=e=>{let t=this.macrosCache.get(e);if(t&&t.readonly)throw Error("This method is not allowed in view mode");return!0},n=e=>Object.assign(e,{returnsPromise:!0});this.macroActions={addBody:n((...n)=>{try{let t=n[n.length-1],o=e(t);r(o);let i=a("addChild",o);return Promise.resolve(i())}catch(e){return t.warn(e.toString()),Promise.reject(e)}}),removeBody:n((...n)=>{try{if(2!==n.length||"number"!=typeof n[0])throw Error("The removeBody method expects an index number as its argument.");let[t,o]=n,i=e(o);r(i);let s=a("removeChild",i);return Promise.resolve(s(t))}catch(e){return t.warn(e.toString()),Promise.reject(e)}}),showBody:n((...r)=>{try{if(2!==r.length||"number"!=typeof r[0]?.body||"number"!=typeof r[0]?.frame)throw Error("The showBody method expects an object with body and frame properties as its argument.");let[t,n]=r,o=e(n),i=a("changeActive",o);return Promise.resolve(i(t.body))}catch(e){return t.warn(e.toString()),Promise.reject(e)}}),getBodyCount:n((...r)=>{try{let t=r[r.length-1],n=e(t),o=a("getChildrenCount",n);return Promise.resolve(o())}catch(e){return t.warn(e.toString()),Promise.reject(e)}}),getParameters:n((...a)=>{try{let t=a[a.length-1],r=e(t),n=this.macrosCache.get(r);if(!n)throw Error("Failed to execute this method. Please ensure that you are calling this method from within a multi-body extension inside your Connect application.");return Promise.resolve(JSON.parse(n.parameters))}catch(e){return t.warn(e.toString()),Promise.reject(e)}}),updateParameters:n((...n)=>{try{if(2!==n.length||!n[0]||"object"!=typeof n[0])throw Error("The updateParameters method expects an object with macro parameters as its argument.");let[t,o]=n,i=e(o);r(i);let s=a("updateParameters",i);return Promise.resolve(s(t))}catch(e){return t.warn(e.toString()),Promise.reject(e)}})}}e.isModuleDefined(this.macroName)||e.defineModule(this.macroName,this.macroActions)}static register(e,t,a,r){this.macrosCache.has(e)||this.macrosCache.set(e,{actions:a,parameters:t,readonly:r})}static deregister(e){this.macrosCache.has(e)&&this.macrosCache.delete(e)}static cleanCache(){this.macrosCache.clear()}}g.macroName="macro",g.macroActions=null,g.macrosCache=new Map;let h=async({logger:e})=>{await new Promise(t=>{(0,o("cpjd2").requireLegacyWRM)(["wr!confluence.web.resources:querystring","wr!confluence.web.resources:navigator-context","wr!com.atlassian.plugins.atlassian-connect-plugin:confluence-atlassian-connect-resources-v5"],()=>{let a=window.connectHost;if(!a){e.error`ConnectHost is not available to init macro module`,t();return}g.init(a,e),t()},()=>{e.error`Error loading WRM for macro module!`,t()})})},y=({macroId:e,macroParams:t,editorActions:a,readonly:r=!1})=>((0,n.useEffect)(()=>a?(g.register(e,t,a,r),()=>{g.deregister(e)}):void(0,o("5ZqQS").getMonitoringClient)().submitError(Error(`No editor actions has been provided to MultiBodiedExtensionHandler for macro ${e}.`),{attribution:o("3IBnw").Attribution.ECOSYSTEM}),[e,t,a,r]),null);var E=o("6g1oe");let b=e=>{let t=e.split("__");return 3===t.length?t[1]:"UNKOWN_EXTENSION_KEY"},v=(t,a,r)=>{r({type:"sendTrackEvent",data:{containerType:"page",objectType:"connectAddon",source:(0,o("gEtAQ").isViewPage)()?"viewPageScreen":"editPageScreen",action:"broadcasted",actionSubject:"connectRefEventData",attributes:{extensionKey:b(a)}}}).fire(),e(E).connectHost.broadcastEvent("data_provider",{id:a},{eventData:t})},x=({references:t,macroContainer:a})=>{let[r,i]=(0,n.useState)(null),{createAnalyticsEvent:s}=(0,o("inPa6").useAnalyticsEvents)();(0,n.useEffect)(()=>{r&&Array.isArray(t)&&t.length>0&&v(t,r,s)},[t,r,s]);let l=(0,n.useCallback)(e=>{if(e.data?.type!=="event_query"||!e.data?.eid||!e.data?.args?.includes?.("data_provider"))return;let t=document.getElementById(e.data.eid);t&&a?.contains?.(t)&&i(e.data.eid)},[a,i]);return(0,n.useEffect)(()=>(e(E).addEventListener("message",l),()=>{e(E).removeEventListener("message",l)}),[l]),null},I=({error:t,mode:a,extensionKey:r,node:i,contentId:s})=>{let l=(0,o("5kjCz").getMacroAttributesFromADFNode)(i);return e(n).createElement(n.Fragment,null,e(n).createElement(o("hUS75").MacroExperienceStop,{extensionKey:r,error:t||Error(`Unable to render ${r}`),mode:a,attributes:l,contentId:s,name:(0,o("5kjCz").getExperienceName)(a,i),source:"LegacyMacroRendererError"}),e(n).createElement("div",{style:{display:"flex",backgroundColor:"var(--ds-background-neutral-subtle, #00000000)",borderRadius:5,minWidth:200,padding:"var(--ds-space-050, 4px)"},"data-testid":"legacy-macro-renderer-error"},e(n).createElement(e(o("ebrpi")),{label:"",spacing:"spacious"}),e(n).createElement(o("gdv5Z").default,{padding:"space.050"},e(n).createElement(o("gtD4K").default,{id:"fabric-extension-legacy-macro-renderer.legacymacrorenderer.error",defaultMessage:"Failed to get macro details"}))))},w=e=>{if(!e)return!1;let t=new URL(e);if(t.origin!==window.location.origin)return!0;if(t.pathname.includes("/wiki/rest/api"))return!1;if(t.pathname.includes("changes.action"))return!1;if(t.pathname.includes("confirmattachmentremoval.action"))return!1;if(t.pathname.includes(".action"))return!0;else return!0},M=(e,t,a)=>{let r=(0,n.useMemo)(()=>{let e=new Set;return a&&o("4VJDS").default.getStringList("confluence_frontend_macro_links_new_tab_allowlist",[]).map(e=>e.trim().toLowerCase()).forEach(t=>t&&e.add(t)),e},[a]);(0,n.useEffect)(()=>{if(a&&t&&r?.has(e.toLowerCase()))return t.addEventListener("click",n),()=>{t.removeEventListener("click",n)};function n(e){let t=e?.target;t?.tagName==="A"&&w(t.href)&&(e.preventDefault(),window.open(t.href,"_blank","noopener, noreferrer"))}},[t,r,e,a])},S=/data-macro-id="([0-9a-fA-F\-]+?)"/,_=/macro\.id\\":\\"([0-9a-fA-F\-]+?)\\"/,C=(0,o("7W8i8").getLogger)("LegacyMacroRenderer"),T=()=>e(n).createElement("div",{"data-testid":"legacy-macro-overlay",style:{position:"absolute",top:0,bottom:0,left:0,right:0,cursor:"default",zIndex:2}}),R=async(e,t,a)=>{("calendar"===e||t&&a?.includes('data-macro-name="calendar"'))&&(0,o("cpjd2").requireLegacyWRM)((0,o("8eAX8").teamCalendarWRM)(),()=>{try{window.require("tc/init-resources").requireResources()}catch(e){C.error(e)}},()=>{C.error`Error loading team calendar WRM!`})},P=(e,t)=>{let a=e?.attrs?.parameters?.macroMetadata?.macroId?.value;if(a)return a;let r=S.exec(t||"");return r?.[1]||(r=_.exec(t||""),r?.[1])?r[1]:(C.error`Cannot find macro id from ${t}`,"")},A=["include","contentbylabel","children","content-report-table","index","pagetree","tasks-report-macro","recently-updated-dashboard","recently-updated","toc"],N=({children:t,extensionKey:a})=>(0,n.useMemo)(()=>new Set(o("4VJDS").default.getString("confluence_1p_extensions","").split(",").map(e=>e.trim())).has(a),[a])?t:e(n).createElement(o("iRRvH").UFOThirdPartySegment,{name:`extension-${a}`},t),k=(0,o("3Btfb").withNavigationPolicy)(({adf:t,macroRepresentation:a,macroRenderedOutput:r,mode:i,node:s,contentId:l,attributes:d,experienceName:g,featureFlags:E,webresource:b,body:v,parameters:w,navigationPolicy:S,references:_,multiBodiedExtensionActions:k,macroRenderedOutputFromSSR:L,macroOutput:D,context:F,spaceKey:O,providers:B,mediaToken:V,noOverlay:j,isWithinEditor:K,isPreviewMode:z})=>{let H,U,{createAnalyticsEvent:q}=(0,o("inPa6").useAnalyticsEvents)(),G=t.type===o("8pcS0").INLINE_EXTENSION_TYPE,$=t.type===o("8pcS0").MULTI_BODIED_EXTENSION_TYPE,W=t?.attrs?.extensionKey||"",Q=(0,n.useRef)(null);r||(r=""),W&&r&&(r="style"===W?(0,o("6AplS").scopeCSS)(r,o("6AplS").mainContentSelector,/(<style[^>]*>)((.|\n|\r)*?)(<\/style>)/gm).contentWithScopedCSS:(0,o("6AplS").scopeCSS)(r,o("6AplS").mainContentSelector).contentWithScopedCSS);let{viewportHeight:X}=(0,o("bYtfC").useConnectExtensionViewportSize)(s),Y=(0,o("aQw7y").useShouldHideOverlay)(W,(0,o("fgbpl").isBodiedExtension)(t.type)),[Z,J]=(0,n.useState)("gadget"===W?"":r),[ee,et]=(0,n.useState)(null),[ea,er]=(0,n.useState)(!1),en=i===o("5kjCz").RENDERER&&t.type===o("8pcS0").REGULAR_EXTENSION_TYPE,eo=ee&&ea&&Z;(0,n.useEffect)(()=>{ee&&((async()=>{if(!(0,o("8cOoD").checkIsDPModuleDefined)()){let e=i===o("5kjCz").RENDERER;await (0,o("8cOoD").loadDataProviderModule)({logger:C,isViewPage:e,createAnalyticsEvent:q})}$&&await h({logger:C}),await (0,o("8eAX8").loadMacroWebResources)(b,L,D,()=>{Z!==r&&J(r)},Q?.current),er(!0)})(),(0,o("brpfO").evalLegacyConnectInlineScripts)(ee,(0,o("9wGTI").fg)("content_early_connect_iframe_initialization")),R(W,(0,o("fgbpl").isBodiedExtension)(t.type),r))},[b,W,r,Z,ee,Q,L,D,i,q,$,t.type]),(0,n.useEffect)(()=>{if(eo&&en&&(0,o("9wGTI").fg)("confluence_content_macro_measurements")){let e=setTimeout(()=>{let e=ee.querySelector("iframe");if(e){let{height:t}=e.getBoundingClientRect();q({type:"sendOperationalEvent",data:{source:"legacyMacroRenderer",action:"render",actionSubject:"connectMacro",attributes:{extensionKey:W,height:t}}}).fire()}},1e4);return()=>clearTimeout(e)}},[ee,W,q,eo,en]),M(W??"",ee,i===o("5kjCz").EDITOR||K);let ei=P(t,r),es=(0,o("KcDWk").useSSRedLegacyMacroElement)(ei),el=(e,t)=>e?.attrs?.parameters?.macroParams?._parentId?.value||t,{getExtensionHandlers:ed}=B,ec=ed?ed({adf:"atlas_doc_format"==a?L||D||r:t,contentId:el(t,l),spaceKey:O,macroRenderedOutput:L||D||r,shouldIncludeMacroWithReferencesHandlers:!0,referentialityDataSourceProvider:new(0,c.DataSourceProvider),mediaToken:V}):{},eu={adf:t,isInline:G,contentId:el(t,l),mode:i,extensionKey:W,nodeProps:{ref:et},macroRepresentation:a,macroDataProps:{"data-fabric-macro":ei,"data-macro-body":v||"","data-macro-parameters":w||"","data-node-type":"include"===W?"include":void 0},macroRenderedOutput:Z,extensionHandlers:ec,mediaToken:V,ssredElement:es,delayIframe:!1,height:X};if(i===o("5kjCz").RENDERER||i===o("5kjCz").PDF){try{let e=d?.macroId?d.macroId:"",t=d?.type?d.type:"none";q({type:"sendTrackEvent",data:{action:"renderer",actionSubject:"macro",source:"legacyMacroRenderer",attributes:{mode:i,extensionKey:W,macroId:e,contentId:l,type:t}}}).fire()}catch(e){C.error`An error occurred while firing the analytics event for legacyMacroRendererComponent: ${e}`}let t=d?.extensionKey||W;if(L||D){let a={node:s,context:F,references:_,contentId:l,spaceKey:O||"",mode:o("5kjCz").RENDERER,extensionKey:W,attributes:d};return e(n).createElement(N,{extensionKey:t},e(n).createElement(o("fwDOR").default,{name:"LegacyMacroRendererComponentResourcesSSR",hold:!ea},e(n).createElement(x,{references:_,macroContainer:ee}),e(n).createElement(o("5LTS4").ExtensionLoadingComplete,{extensionKey:t,contentId:l,node:s}),e(n).createElement(m.FabricLegacyMacrosServerRenderer,{renderedByProvider:!0,macroRenderedOutput:L,macroDefaultProps:a,containerRef:et,macroOutput:D}),e(n).createElement(f.LegacyUserElementsHover,{node:ee}),"attachments"===W&&!z&&e(n).createElement(o("hMRhJ").RendererExtensionContext.Consumer,null,({EditorLoaderLoader:t})=>!K&&!z&&t&&e(n).createElement(t,null)),e(n).createElement(o("bX5uj").MacroExperienceSuccess,{name:g,contentId:l,extensionKey:W,mode:i,attributes:d})))}return e(n).createElement(N,{extensionKey:t},e(n).createElement(o("fwDOR").default,{name:"LegacyMacroRendererComponentResourcesNonSSR",hold:!ea},e(n).createElement(x,{references:_,macroContainer:ee}),$&&e(n).createElement(y,{macroId:ei,macroParams:w,editorActions:k,readonly:!0}),e(n).createElement("div",{dangerouslySetInnerHTML:{__html:`${b?.tags?.css||""}`},style:{display:"none"}}),e(n).createElement(o("5LTS4").ExtensionLoadingComplete,{extensionKey:t,contentId:l,node:s}),e(n).createElement(p.LegacyMacroStyledElement,{renderedByProvider:!0,...eu,macroRenderedOutput:A.includes(W)?S.shimHtmlUrls(Z):Z}),e(n).createElement(f.LegacyUserElementsHover,{node:ee}),"attachments"===W&&!z&&e(n).createElement(o("hMRhJ").RendererExtensionContext.Consumer,null,({EditorLoaderLoader:t})=>!K&&t&&e(n).createElement(t,null)),e(n).createElement("div",{key:"js-container",ref:Q,style:{display:"none"}}),e(n).createElement(o("bX5uj").MacroExperienceSuccess,{name:g,contentId:l,extensionKey:W,mode:i,attributes:d})))}try{"atlas_doc_format"===a&&(H=JSON.parse(Z),U=e(n).createElement(u.ADFRenderer,{document:H,contentId:el(t,l),featureFlags:E??{},extensionHandlers:ec,mediaToken:V,appearance:"full-width"}))}catch(t){C.error`An error occurred while parsing adf output: ${Z}`,U=e(n).createElement(I,{error:t,node:s,mode:i,extensionKey:W,contentId:l})}return e(n).createElement(N,{extensionKey:W},e(n).createElement(o("fwDOR").default,{name:"LegacyMacroRendererComponentResourcesFabric",hold:!ea},e(n).createElement("div",{dangerouslySetInnerHTML:{__html:`${b?.tags?.css||""}`},style:{display:"none"}}),$&&e(n).createElement(y,{macroId:ei,macroParams:w,editorActions:k}),e(n).createElement(p.LegacyMacroStyledElement,{renderedByProvider:!0,...eu,style:X&&(0,o("9wGTI").fg)("confluence_connect_macro_preset_height")?{minHeight:`${X}px`}:null},j||Y||$?null:e(n).createElement(T,null),e(n).createElement(x,{references:_,macroContainer:ee}),"atlas_doc_format"===a?e(n).createElement("div",{"data-testid":"macro-adf-renderer",ref:et},U):e(n).createElement("div",{ref:et,dangerouslySetInnerHTML:{__html:`${Z}`}}),e(n).createElement(o("bX5uj").MacroExperienceSuccess,{name:g,contentId:l,extensionKey:W,mode:i,attributes:d})),e(n).createElement("div",{key:"js-container",ref:Q,style:{display:"none"}})))}),L=t=>{let a=(0,n.useContext)(o("hMRhJ").RendererExtensionContext),r=(0,n.useContext)(o("giS6h").ClassicEditorContext),i=r?.isWithinEditor??!1,s={...r,...a},l={...t,providers:s,isWithinEditor:i};return e(n).createElement(k,l)},D=e(n).createContext({listOfRenderedPageIncludeNodes:[]}),F=e=>e.type===o("8pcS0").REGULAR_EXTENSION_TYPE&&!!e?.parameters?.macroParams?.__bodyContent,O=e=>e.type===o("8pcS0").BODIED_EXTENSION_TYPE,B=async(e,t)=>{let a=await (0,o("hp2SH").getApolloClient)().query({query:o("6Cce7").ContentConverterQuery,variables:(0,o("92uc5").getContentConverterVariables)({content:t,contentId:e})});return a.data?.contentConverter?.value};function V({isInEditorRendererView:e,node:t,extensionKey:a}){return e&&(0,o("kRAnY").is2PBodiedExtension)({extensionKey:a,extensionType:t.type})}function j({contentId:e,node:t,extensionKey:a}){let r=!!t?.parameters?.macroParams?._parentId?.value,n=t?.parameters?.macroParams?._parentId?.value===e;return(0,o("kRAnY").is2PBodiedExtension)({extensionKey:a,extensionType:t.type})&&r&&!!e&&!n}function K(e){let{extensionKey:t}=e;return!!(!(0,o("ld6xp").canUseMultiMacroQuery)(t,j(e))||V(e))}class z extends n.Component{getChildContext(){let{context:e}=this.props;return{insertCss:e.insertCss||(()=>{})}}componentDidMount(){this.setMacroData(),this.setUFOEventMacroDisplayStatus()}shouldComponentUpdate(t,a){return this.props.contentId!==t.contentId||!e(r)(this.props?.node?.parameters,t?.node?.parameters)||(t.references||this.props.references)&&this.props.references!==t.references||this.state.hasBodyBeenFetched!==a.hasBodyBeenFetched||this.state.body!==a.body}componentDidUpdate(){this.setMacroData()}componentWillUnmount(){let{node:e,mode:t,contentId:a}=this.props,r=(0,o("5kjCz").getMacroAttributesFromADFNode)(e);(0,o("5kjCz").stopJIRAMacro)(t,a,name,r)}async setRichTextMacroBody(){let{contentId:e,node:t}=this.props,a=t?.content||[];try{let t;K(this.props)&&(t=await B(e,a)),this.setState({body:t,hasBodyBeenFetched:!0})}catch(e){this.logger.error`${e}`}}setPlainTextMacroBody(){let{node:e}=this.props,t=e?.parameters?.macroParams?.__bodyContent?.value||"";this.setState({body:t,hasBodyBeenFetched:!0})}setMacroData(){let{node:e}=this.props;!e||O(e)&&this.state.hasBodyBeenFetched&&!V(this.props)||(F(e)?this.setPlainTextMacroBody():O(e)?this.setRichTextMacroBody():this.setState({hasBodyBeenFetched:!0}))}setUFOEventMacroDisplayStatus(){let e=this.props.extensionKey;if(!e)return;let t=e.split("-").map(e=>0===e.length?"":e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join("");(0,o("cbc8g").addUFOCustomData)({[`is${t}MacroDisplayed`]:!0})}getContentId(e,t){return e?.attrs?.parameters?.macroParams?._parentId?.value||t}render(){let t=window.location.pathname.startsWith("/wiki/pdf/")?"pdf":this.props.mode,{hasBodyBeenFetched:a}=this.state,r=this.props.node;if(!r)return null;if(!a)return e(n).createElement(o("eczvQ").LegacyMacroRendererShadow,{node:r});let s=(0,o("6mEZ3").extensionToADF)(r);return e(n).createElement(o("euF5O").LegacyMacroRendererContext.Consumer,null,({shouldRefetchMacroQuery:a})=>e(n).createElement(i.ApolloProvider,{client:(0,o("hp2SH").getApolloClient)()},e(n).createElement(o("1kHsc").ExperienceTrackerContext.Provider,{value:(0,o("fGzMp").getExperienceTracker)()},this.determineQuery({...this.props,mode:t,adf:s,shouldRefetchMacroQuery:a}))))}constructor(t){super(t),this.logger=(0,o("7W8i8").getLogger)("LegacyMacroRendererQuery"),this.getQueryForMacroContentAndBodyForPossibleFrontendRendering=({adf:t,contentId:a,extensionKey:r,mode:i,node:s,references:l,multiBodiedExtensionActions:c,featureFlags:u,macroRenderedOutputFromSSR:m,macroOutput:p,spaceKey:f,context:g,shouldRefetchMacroQuery:h,noOverlay:y,isPreviewMode:E})=>{let b=t=>e(n).createElement("div",{className:"error"},e(n).createElement(o("iXCQx").default,null,e(n).createElement(o("gtD4K").default,d.highlightedPageIncludeRenderedError)),e(n).createElement(o("gtD4K").default,{...d.nonhighlightedPageIncludeRenderedError,values:{pageTitle:t}}));return e(n).createElement(o("bavCP").QueryInterop,{query:o("9p5st").MacroBodyRendererQueryWithTags,variables:{adf:(0,o("gHCIk").serializeExtensionADF)(t),..."0"!==a?{contentId:this.getContentId(t,a)}:{},mode:i&&i.toUpperCase()},fetchPolicy:h?"no-cache":"cache-first",context:{throttle:!0,allowOnExternalPage:!0},skip:!!m||!!p},({data:d,loading:h,error:v})=>m||p?e(n).createElement(L,{contentId:a,experienceName:(0,o("5kjCz").getExperienceName)(i,s),adf:t,attributes:(0,o("5kjCz").getMacroAttributesFromADFNode)(s),references:l,multiBodiedExtensionActions:c,macroRenderedOutput:d?.macroBodyRenderer?.value,macroRepresentation:d?.macroBodyRenderer?.representation||"view",mediaToken:d?.macroBodyRenderer?.mediaToken?.token,node:s,webresource:d?.macroBodyRenderer?.webResourceDependencies,mode:i,body:this.state.body,parameters:(0,o("6mEZ3").getParametersString)(s),featureFlags:u,macroRenderedOutputFromSSR:m,macroOutput:p,spaceKey:f,context:g,noOverlay:y,isPreviewMode:E}):h?e(n).createElement(o("eczvQ").LegacyMacroRendererShadow,{showSpinner:!!d,node:s}):!v&&d&&d.macroBodyRenderer?e(n).createElement(D.Consumer,null,({listOfRenderedPageIncludeNodes:r})=>{let{isCircularRef:m,prevPageTitle:p}=H(r);return m?b(p):e(n).createElement(U,{contentId:a,node:this.props.node,listOfRenderedPageIncludeNodes:r},e(n).createElement(L,{contentId:a,experienceName:(0,o("5kjCz").getExperienceName)(i,s),adf:t,attributes:(0,o("5kjCz").getMacroAttributesFromADFNode)(s),references:l,multiBodiedExtensionActions:c,macroRenderedOutput:d.macroBodyRenderer?.value,macroRepresentation:d.macroBodyRenderer?.representation||"view",mediaToken:d?.macroBodyRenderer?.mediaToken?.token,node:s,webresource:d.macroBodyRenderer?.webResourceDependencies,mode:i,body:this.state.body,parameters:(0,o("6mEZ3").getParametersString)(s),featureFlags:u,spaceKey:f,context:g,noOverlay:y,isPreviewMode:E}))}):e(n).createElement(I,{error:v,node:s,mode:i,extensionKey:r,contentId:a}))},this.getQueryForMacroContentFromBackend=({adf:t,contentId:a,extensionKey:r,mode:i,node:s,references:l,multiBodiedExtensionActions:d,featureFlags:c,macroRenderedOutputFromSSR:u,macroOutput:m,spaceKey:p,context:f,shouldRefetchMacroQuery:g,noOverlay:h,isPreviewMode:y})=>e(n).createElement(o("bavCP").QueryInterop,{query:o("9p5st").MacroContentRendererQueryWithTags,variables:{adf:(0,o("gHCIk").serializeExtensionADF)(t),contentId:a,mode:i&&i.toUpperCase()},fetchPolicy:g?"no-cache":"cache-first",context:{throttle:!0,allowOnExternalPage:!0},skip:!!u||!!m},({data:g,loading:E,error:b})=>u||m?e(n).createElement(L,{contentId:a,experienceName:(0,o("5kjCz").getExperienceName)(i,s),adf:t,node:s,attributes:(0,o("5kjCz").getMacroAttributesFromADFNode)(s),macroRenderedOutput:g?.contentRenderer?.html,references:l,multiBodiedExtensionActions:d,macroRepresentation:"view",webresource:g?.contentRenderer?.webResourceDependencies,mode:i,body:this.state.body,parameters:(0,o("6mEZ3").getParametersString)(s),featureFlags:c,macroRenderedOutputFromSSR:u,macroOutput:m,spaceKey:p,context:f,noOverlay:h,isPreviewMode:y}):E?e(n).createElement(o("eczvQ").LegacyMacroRendererShadow,{showSpinner:!!g,node:s}):!b&&g&&g.contentRenderer?e(n).createElement(L,{contentId:a,experienceName:(0,o("5kjCz").getExperienceName)(i,s),adf:t,node:s,attributes:(0,o("5kjCz").getMacroAttributesFromADFNode)(s),macroRenderedOutput:g.contentRenderer.html,references:l,multiBodiedExtensionActions:d,macroRepresentation:"view",webresource:g.contentRenderer.webResourceDependencies,mode:i,body:this.state.body,parameters:(0,o("6mEZ3").getParametersString)(s),featureFlags:c,context:f,noOverlay:h,isPreviewMode:y}):e(n).createElement(I,{error:b,node:s,mode:i,extensionKey:r,contentId:a})),this.getQueryForMacros=t=>{let{adf:a,contentId:r,extensionKey:i,mode:s,node:l,references:d,multiBodiedExtensionActions:c,featureFlags:u,macroRenderedOutputFromSSR:m,macroOutput:p,spaceKey:f,context:g,noOverlay:h}=t,y=l.parameters?.macroMetadata?.macroId?.value;return e(n).createElement(o("iKSlH").MultiMacroQuerySubscriber,{contentId:r,macroId:y},({renderedMacro:y,loading:E,error:b,complete:v})=>!v||y||b?m||p?e(n).createElement(L,{contentId:r,experienceName:(0,o("5kjCz").getExperienceName)(s,l),adf:a,node:l,attributes:(0,o("5kjCz").getMacroAttributesFromADFNode)(l),macroRenderedOutput:y?.value,references:d,multiBodiedExtensionActions:c,macroRepresentation:y?.macroRenderedRepresentation||"view",webresource:y?.webResource,mode:s,body:y?.macroBodyStorage||this.state.body,parameters:(0,o("6mEZ3").getParametersString)(l),featureFlags:u,macroRenderedOutputFromSSR:m,macroOutput:p,spaceKey:f,context:g,noOverlay:h,mediaToken:y?.mediaToken?.token}):E?e(n).createElement(o("eczvQ").LegacyMacroRendererShadow,{node:l}):b||!y?e(n).createElement(I,{error:new(0,o("422HI").ApolloErrorInterop)({errorMessage:"error rendering legacy macro: {$extensionKey}"}),node:l,mode:s,extensionKey:i,contentId:r}):e(n).createElement(L,{contentId:r,experienceName:(0,o("5kjCz").getExperienceName)(s,l),adf:a,node:l,attributes:(0,o("5kjCz").getMacroAttributesFromADFNode)(l),macroRenderedOutput:y?.value,references:d,multiBodiedExtensionActions:c,macroRepresentation:y?.macroRenderedRepresentation||"view",webresource:y?.webResource,mode:s,body:y?.macroBodyStorage||this.state.body,parameters:(0,o("6mEZ3").getParametersString)(l),featureFlags:u,context:g,noOverlay:h,mediaToken:y?.mediaToken?.token}):this.determineQuery(t,!0))},this.getReferencedContentId=e=>e?.parameters?.macroParams?._referencedContentId?.value||void 0,this.determineQuery=(e,t=!1)=>{let{extensionKey:a,node:r}=e;return!t&&(!r?.parameters?.macroParams?._parentId||r.parameters.macroParams._parentId.value===this.props.contentId)&&(0,o("ld6xp").canUseMultiMacroQuery)(a,j(e))?this.getQueryForMacros(e):o("4VJDS").default.getBoolean("confluence_frontend_macro_adf_frontend_render",!0)?this.getQueryForMacroContentAndBodyForPossibleFrontendRendering(e):this.getQueryForMacroContentFromBackend(e)};let a={body:"",hasBodyBeenFetched:!1},{node:r}=t;F(r)?(a.body=r?.parameters?.macroParams?.__bodyContent?.value||"",a.hasBodyBeenFetched=!0):O(r)&&K(t)||(a.hasBodyBeenFetched=!0),this.state=a}}z.childContextTypes={insertCss:e(o("4xcIM")).func.isRequired};let H=e=>{if(e?.length){let t,a=new Set,r=!1;for(let n of e){if(n?.extensionKey!=="include")continue;t=n;let e=n?.parameters?.macroMetadata?.macroId?.value;if(e)if(a.has(e)){r=!0;break}else a.add(e)}if(r)return{isCircularRef:!0,prevPageTitle:t?.parameters?.macroParams?.[""]?.value}}return{isCircularRef:!1,prevPageTitle:null}},U=({contentId:t,node:a,listOfRenderedPageIncludeNodes:r,children:o})=>{let i=e(n).useMemo(()=>({listOfRenderedPageIncludeNodes:[...r,{...a,parentContentId:t}]}),[r,a,t]);return e(n).createElement(D.Provider,{value:i},o)},q=e(n).memo(t=>{let{featureFlags:a}=(0,o("bQm3c").useSessionData)();return e(n).createElement(z,{featureFlags:a,...t})},(t,a)=>e(r)(t,a)),G=((t,a,r)=>{class o extends n.Component{shouldComponentUpdate(){return this.updateDebounced(),!1}componentWillUnmount(){this.updateDebounced.cancel()}render(){return e(n).createElement(t,this.props)}constructor(...t){super(...t),this.updateDebounced=e(s)(this.forceUpdate,a,r)}}return o.displayName=`debounceRender(${t.displayName||t.name||"Component"})`,e(l)(o,t)})(q,1e4);t.exports.LegacyMacroRendererQuery=q,t.exports.DebouncedLegacyMacroRendererQuery=G}),i("kRAnY",function(e,t){var a=o("42omo");let r=({extensionKey:e,extensionType:t})=>(0,o("j0gZR").is1PMacro)(e||"")&&"bodiedExtension"===t,n=({extensionKey:e,extensionType:t})=>!(0,o("j0gZR").is1PMacro)(e||"")&&"bodiedExtension"===t;e.exports.is2PBodiedExtension=n,e.exports.useExtensionRendererViewOptions=({getExtensionHandlers:e,isLivePage:t,contentId:o,spaceKey:i})=>(0,a.useMemo)(()=>{if(t)return{rendererExtensionHandlers:e?.({contentId:o,spaceKey:i,isInEditorRendererView:!0}),isAllowedToUseRendererView:e=>n({extensionKey:e.attrs?.extensionKey,extensionType:e.type}),showUpdated1PBodiedExtensionUI:e=>r({extensionKey:e.attrs?.extensionKey,extensionType:e.type})}},[e,t,o,i])}),i("j0gZR",function(e,t){let a=new Set(["toc","children","livesearch","recently-updated","details","jlol","jira","pagetree","anchor","contentbylabel","create-from-template","roadmap","blog-posts","excerpt","attachments","profile","include","content-report-table","detailssummary","tasks-report-macro","excerpt-include","iframe","listlabels","profile-picture","change-history","pagetreesearch","widget","decisionreport","viewpdf","contributors","gadget","popular-labels","jirachart","toc-zone","portfolioforjiraplan","viewppt","viewxls","recently-updated-dashboard","spaces","index","contributors-summary","userlister","gallery","viewdoc","chart","related-labels","jiraroadmap"]);e.exports.is1PMacro=e=>a.has(e)}),i("iKSlH",function(e,t){let a={queryMacros:({contentId:e,contentRendererMode:t,featureFlags:r,cursor:n,revision:s,useServerRenderedData:l=!1,readFragmentInterop:d})=>async({getState:c,setState:u,dispatch:m})=>{let p;if(c().contentId===e&&c().revision===s&&c().cursor===n)return;u({contentId:e,revision:s,cursor:n,complete:!1});let f=t.toUpperCase();f=window.location.pathname.startsWith("/wiki/pdf/")?"PDF":f;let g={query:o("g1f2M").MacrosQuery,variables:{contentId:e,mode:f,blocklist:(0,o("ld6xp").getMultiMacroQueryBlocklistFF)(),first:n?10:8,after:n},context:{allowOnExternalPage:!0}};l||(g.variables.refetchToken=s);{let t=l&&!c().cursor;if(t)try{(0,o("6mKj3").expValEquals)("remove_usages_of_cache_read_write","isEnabled",!0)?(p=d({id:`$ROOT_QUERY.macros(${JSON.stringify({...n?{after:n}:{},blocklist:g.variables.blocklist,contentId:e,first:g.variables.first})})`}))&&(p={macros:p}):p=(0,o("hp2SH").getApolloClient)().readQuery(g)}catch(e){e?.message&&!e?.message.includes("Invariant Violation: 8")&&(0,o("5ZqQS").getMonitoringClient)().submitError(e,{attribution:"backbone"})}if(!p||!p?.macros||!t){let e=await (0,o("hp2SH").getApolloClient)().query(g);e.errors&&((0,o("5ZqQS").getMonitoringClient)().submitError(e.errors,{attribution:"backbone"}),u({error:!0})),p=e.data}}let{nodes:h=[],pageInfo:y={}}=p?.macros,E=h?.reduce((e,t)=>(t&&(e[i(t.contentId||"",t.macroId||"")]=t?.renderedMacro),e),{});u({macroData:{...c().macroData,...E}}),y.hasNextPage?m(a.queryMacros({contentId:e,contentRendererMode:t,featureFlags:r,cursor:y.endCursor,revision:s,readFragmentInterop:d})):u({complete:!0})},resetState:()=>({setState:e})=>{e({complete:!1,data:{},macroData:{},error:!1,contentId:void 0,revision:void 0,cursor:void 0})}},r=(0,o("1P1Tu").createStore)({initialState:{complete:!1,data:{},macroData:{},readFragmentInterop:()=>null},actions:a,name:"MultiMacroQueryStore"}),n=(0,o("FOT9i").createContainer)(r,{onInit:()=>({dispatch:e},{contentId:t,contentRendererMode:r,featureFlags:n,cursor:o,revision:i,useServerRenderedData:s,readFragmentInterop:l})=>{e(a.queryMacros({contentId:t,contentRendererMode:r,featureFlags:n,cursor:o,revision:i,useServerRenderedData:s,readFragmentInterop:l}))},onUpdate:()=>({dispatch:e},{contentId:t,contentRendererMode:r,featureFlags:n,cursor:o,revision:i,useServerRenderedData:s,readFragmentInterop:l})=>{e(a.queryMacros({contentId:t,contentRendererMode:r,featureFlags:n,cursor:o,revision:i,useServerRenderedData:s,readFragmentInterop:l}))}});function i(e,t){return`${e}::${t??0}`}function s(e,t){let a=i(t.contentId,t.macroId),r=e.macroData?.[a];return{loading:!r&&!e.complete,error:!r&&e.error,renderedMacro:r||null,complete:e.complete}}let l=(0,o("9zUhf").createStateHook)(r,{selector:s}),d=(0,o("j1v0l").createSubscriber)(r,{selector:s});(0,o("9zUhf").createHook)(r),e.exports.MultiMacroQueryContainer=n,e.exports.useMultiMacroQuery=l,e.exports.MultiMacroQuerySubscriber=d}),i("dx8CK",function(e,a){t(e.exports,"referentialityPlugin",()=>o("1bl0g").referentialityPlugin),t(e.exports,"createReferentiality",()=>o("1bl0g").createReferentiality),t(e.exports,"dataSourceResolver",()=>o("4xvYZ").dataSourceResolver),t(e.exports,"DataSourceProvider",()=>o("lEgye").DataSourceProvider),t(e.exports,"useReference",()=>o("eVKuj").useReference),t(e.exports,"ADFReferenceTypes",()=>o("gcCrc").ADFReferenceTypes),o("1bl0g"),o("4xvYZ"),o("lEgye"),o("eVKuj"),o("gcCrc"),o("9oPnF")}),i("kksmx",function(e,t){e.exports.getRenderType=(e,t)=>e?"ssr-new":t?"ssr-exp":"ssr-legacy",e.exports.getExtensionSSRMark=e=>window.__LEGACY_MACRO_SSRED__?.[e],e.exports.ExtensionSSRMark=({macroId:e,renderType:t})=>null}),i("9tVje",function(t,a){var r=o("42omo");let n=(0,o("cgtv4").defineMessages)({invalidAnchorMacroLabel:{id:"fabric-extension-lib.anchor.placeholder.icon-label",defaultMessage:"Invalid anchor link"},deprecatedExtensionPlaceholderTitle:{id:"fabric-extension-lib.deprecated-extension-placeholder.title",defaultMessage:"Deprecated macro"},deprecatedExtensionPlaceholderDescription:{id:"fabric-extension-lib.deprecated-extension-placeholder.description",defaultMessage:"The {macroName} macro is no longer available in Confluence Cloud."},deprecatedExtensionPlaceholderLink:{id:"fabric-extension-lib.deprecated-extension-placeholder.link",defaultMessage:"Learn more."}}),i=(0,r.forwardRef)(({as:t="div",style:a,...n},i)=>e(r).createElement(t,{...n,style:a,ref:i,className:(0,o("gMc0m").default)(["_1e0c1txw _2lx21bp4",n.className])})),s=(0,r.forwardRef)(({as:t="span",style:a,...n},i)=>e(r).createElement(t,{...n,style:a,ref:i,className:(0,o("gMc0m").default)(["_11c81o8v _syazazsu _19pk1b66",n.className])}));s.defaultProps={"data-styled-selector":"description-styled-selector"};let l=(0,r.forwardRef)(({as:t="div",style:a,...n},i)=>{let{isEditor:s,...l}=n;return e(r).createElement(t,{...l,style:a,ref:i,className:(0,o("gMc0m").default)(["_11q7vuon _2rkofajl _1e0c1txw _4cvr1h6o",n.isEditor?"_1yt41ejb":"_1yt4ze3t",n.className])})}),d=(0,r.forwardRef)(({as:t="div",style:a,...n},i)=>e(r).createElement(t,{...n,style:a,ref:i,className:(0,o("gMc0m").default)(["_11q7ysee _1yt41m6u _2rkofajl _11c81ixg _1e0c116y _4cvr1h6o _1xw2u2gc",n.className])})),c=(0,r.forwardRef)(({as:t="div",style:a,...n},i)=>e(r).createElement(t,{...n,style:{...a,"--_1gljcou":(0,o("7sObp").default)(n.width,"px"),"--_8jvb0j":(0,o("7sObp").default)(n.height,"px")},ref:i,className:(0,o("gMc0m").default)(["_1reo15vq _18m915vq _19it1l7x _2rkofajl _11q7vuon _1bsb1rkg _4t3i1474 _vchhusvi _1e0c1txw _1bah1h6o _4cvr1h6o _1qwg1rkg _1iia1474",n.width>32?"_2hwxpxbi":"_2hwx1b66",n.className])})),u=()=>{let t=(0,o("8C5kA").default)();return e(r).createElement("div",{className:(0,o("gMc0m").default)(["_1reo15vq _18m915vq _2rko12b0 _1e0c1txw _1bah1h6o _4cvr1h6o _bfhki8nm _1bsb1tcg _4t3igktf _vchhusvi"])},e(r).createElement(e(o("dZMVn")),{label:t.formatMessage(n.invalidAnchorMacroLabel),color:"var(--ds-icon-danger, #C9372C)"}))},m=({macro:t,description:a})=>e(r).createElement(o("fwDOR").default,{name:"inline-extension-placeholder"},e(r).createElement(d,{"data-testid":"inline-extension-placeholder"},e(r).createElement(c,{width:16,height:16},e(r).createElement(o("7khND").MacroIcon,{macro:t,size:"small"})),e(r).createElement(i,null,e(r).createElement(o("iXCQx").default,{as:"p"},t.title,a&&e(r).createElement(s,null,a))))),p=({macro:t,description:a,isEditor:n})=>e(r).createElement(o("fwDOR").default,{name:"extension-placeholder"},e(r).createElement(l,{isEditor:n,"data-testid":"extension-placeholder"},e(r).createElement(c,{width:40,height:40},e(r).createElement(o("7khND").MacroIcon,{macro:t,size:"medium"})),e(r).createElement(i,null,e(r).createElement(o("7hXDW").default,{size:"small"},t.title),a&&e(r).createElement(s,null,a)))),f=e(r).createElement(o("gtD4K").default,{id:"confluence-fabric-editor.extension.placeholder.missing-config",defaultMessage:"Edit to setup"}),g=({macro:t,extension:a,isEditor:n})=>{let{createAnalyticsEvent:i}=(0,o("inPa6").useAnalyticsEvents)();return((0,r.useMemo)(()=>{if(i){let{extensionKey:e,extensionType:t,parameters:r}=a;i({type:"sendTrackEvent",data:{action:"viewed",actionSubject:"macro",actionSubjectId:"placeholder",source:n?"editor":"renderer",attributes:{extensionKey:e,extensionType:t,isMissingRequiredParameters:!!r?.macroParams?.isMissingRequiredParameters}}}).fire()}},[i,t,n]),"anchor"===t.macroName)?e(r).createElement(u,null):"inlineExtension"===(0,o("eQyFc").getExtensionBodyType)(t)?e(r).createElement(m,{macro:t,description:e(r).createElement("span",null,"(",f,")")}):e(r).createElement(p,{isEditor:n,macro:t,description:f})};t.exports.getIconComponent=(t,a)=>e(r).createElement(o("7khND").MacroIcon,{macro:t,testId:a}),t.exports.AnchorMacroPlaceholder=u,t.exports.ExtensionPlaceholder=p,t.exports.editToSetupMessage=f,t.exports.getMissingConfigPlaceholderComponent=(t,a,n)=>e(r).createElement(o("b1Jpy").default,null,e(r).createElement(g,{macro:t,extension:a,isEditor:n})),t.exports.getNonRenderablePlaceholderComponent=(t,a,n)=>"inlineExtension"===a?e(r).createElement(o("b1Jpy").default,null,e(r).createElement(m,{macro:t})):e(r).createElement(o("b1Jpy").default,null,e(r).createElement(p,{isEditor:!0,macro:t,description:n&&(0,o("9wGTI").fg)("confluence_live_pages_open_beta_trait_opted_in")?e(r).createElement(o("gtD4K").default,{id:"confluence-fabric-editor.extension.placeholder.can-not-render-in-live-page-editor",defaultMessage:"The results of this element aren’t visible when editing a live doc. Convert this doc to a page and publish it via the <menuIcon></menuIcon> menu to display it fully.",values:{menuIcon:()=>e(r).createElement(e(o("9VJDA")),{label:"Icon for publish menu"})}}):e(r).createElement(o("gtD4K").default,{id:"confluence-fabric-editor.extension.placeholder.can-not-render-in-editor",defaultMessage:"The results of this element aren’t visible when editing. Preview the page or publish it to see how it will look."})})),t.exports.DeprecatedExtensionPlaceholder=({macroName:t})=>{let{formatMessage:a}=(0,o("8C5kA").default)();return e(r).createElement(o("b1Jpy").default,null,e(r).createElement("div",{className:(0,o("gMc0m").default)(["_11c81vhk"])},e(r).createElement(o("aoVih").default,{appearance:"warning",title:a(n.deprecatedExtensionPlaceholderTitle),testId:"deprecated-extension-placeholder"},a(n.deprecatedExtensionPlaceholderDescription,{macroName:t})," ",e(r).createElement(o("2Nwuj").default,{target:"_blank",href:"https://community.atlassian.com/forums/Confluence-articles/Deprecating-infrequently-used-macros-in-Confluence-Cloud/ba-p/2981360"},a(n.deprecatedExtensionPlaceholderLink)))))}}),i("7khND",function(t,a){var r=o("42omo");let n=t=>e(r).createElement("svg",{viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","data-testid":"child-macro-icon","aria-label":t.label||void 0,role:t.label?"img":"presentation",className:(0,o("gMc0m").default)(["_1reo15vq _18m915vq _syaz1r31 _lswu7qp0 _lcxvglyw _1bsbzwfg _4t3izwfg _vc881r31"])},e(r).createElement("rect",{x:"6",y:"7",width:"23",height:"18",rx:"2",fill:"var(--ds-background-accent-blue-subtlest-hovered, #CFE1FD)"}),e(r).createElement("rect",{x:"9",y:"10",width:"2",height:"2",rx:"1",fill:"var(--ds-link, #1868DB)"}),e(r).createElement("rect",{x:"13",y:"10",width:"13",height:"2",rx:"1",fill:"var(--ds-link, #1868DB)"}),e(r).createElement("rect",{x:"9",y:"15",width:"2",height:"2",rx:"1",fill:"var(--ds-link, #1868DB)"}),e(r).createElement("rect",{x:"13",y:"15",width:"13",height:"2",rx:"1",fill:"var(--ds-link, #1868DB)"}),e(r).createElement("rect",{x:"9",y:"20",width:"2",height:"2",rx:"1",fill:"var(--ds-link, #1868DB)"}),e(r).createElement("rect",{x:"13",y:"20",width:"13",height:"2",rx:"1",fill:"var(--ds-link, #1868DB)"}),e(r).createElement("rect",{x:"6",y:"2",width:"23",height:"2",rx:"1",fill:"var(--ds-background-accent-gray-subtlest-pressed, #B7B9BE)"}),e(r).createElement("rect",{x:"6",y:"28",width:"23",height:"2",rx:"1",fill:"var(--ds-background-accent-gray-subtlest-pressed, #B7B9BE)"}),e(r).createElement("path",{d:"M3 3.5L2 2.5",stroke:"var(--ds-background-accent-gray-subtlest-pressed, #B7B9BE)",strokeLinecap:"round"}),e(r).createElement("path",{d:"M3 3.5L4 2.5",stroke:"var(--ds-background-accent-gray-subtlest-pressed, #B7B9BE)",strokeLinecap:"round"}),e(r).createElement("path",{d:"M3.5 29L2.5 30",stroke:"var(--ds-background-accent-gray-subtlest-pressed, #B7B9BE)",strokeLinecap:"round"}),e(r).createElement("path",{d:"M3.5 29L2.5 28",stroke:"var(--ds-background-accent-gray-subtlest-pressed, #B7B9BE)",strokeLinecap:"round"})),i=t=>e(r).createElement("svg",{viewBox:"0 0 34 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","data-testid":"excerpt-include-macro-icon","aria-label":t.label||void 0,role:t.label?"img":"presentation",className:(0,o("gMc0m").default)(["_1reo15vq _18m915vq _syaz1r31 _lswu7qp0 _lcxvglyw _1bsbzwfg _4t3izwfg _vc881r31"])},e(r).createElement("rect",{x:"12",y:"8",width:"22",height:"16",rx:"2",fill:"var(--ds-background-accent-blue-subtlest-hovered, #CFE1FD)"}),e(r).createElement("rect",{x:"15",y:"15",width:"16",height:"2",rx:"1",fill:"var(--ds-link, #1868DB)"}),e(r).createElement("rect",{x:"15",y:"11",width:"16",height:"2",rx:"1",fill:"var(--ds-link, #1868DB)"}),e(r).createElement("rect",{x:"15",y:"4",width:"19",height:"2",rx:"1",fill:"var(--ds-background-accent-gray-subtlest-pressed, #B7B9BE)"}),e(r).createElement("rect",{x:"15",y:"30",width:"19",height:"2",rx:"1",fill:"var(--ds-background-accent-gray-subtlest-pressed, #B7B9BE)"}),e(r).createElement("rect",{x:"15",width:"16",height:"2",rx:"1",fill:"var(--ds-background-accent-gray-subtlest-pressed, #B7B9BE)"}),e(r).createElement("rect",{x:"15",y:"26",width:"16",height:"2",rx:"1",fill:"var(--ds-background-accent-gray-subtlest-pressed, #B7B9BE)"}),e(r).createElement("rect",{x:"15",y:"19",width:"10",height:"2",rx:"1",fill:"var(--ds-link, #1868DB)"}),e(r).createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.8965 12.8966C5.85003 12.943 5.81316 12.9981 5.788 13.0588C5.76285 13.1195 5.7499 13.1845 5.7499 13.2501C5.7499 13.3158 5.76285 13.3808 5.788 13.4415C5.81316 13.5021 5.85003 13.5572 5.8965 13.6036L7.793 15.5001H3C2.86739 15.5001 2.74021 15.5528 2.64645 15.6466C2.55268 15.7404 2.5 15.8675 2.5 16.0001C2.5 16.1328 2.55268 16.2599 2.64645 16.3537C2.74021 16.4475 2.86739 16.5001 3 16.5001H7.793L5.8965 18.3966C5.85003 18.443 5.81316 18.4981 5.788 18.5588C5.76285 18.6195 5.7499 18.6845 5.7499 18.7501C5.7499 18.8158 5.76285 18.8808 5.788 18.9415C5.81316 19.0021 5.85003 19.0572 5.8965 19.1036C6.0915 19.2986 6.4085 19.2986 6.604 19.1036L9.3535 16.3536C9.44405 16.2634 9.49649 16.1419 9.5 16.0141V15.9856C9.49642 15.858 9.44398 15.7367 9.3535 15.6466L6.604 12.8966C6.55756 12.8502 6.50242 12.8133 6.44172 12.7881C6.38102 12.763 6.31596 12.75 6.25025 12.75C6.18454 12.75 6.11948 12.763 6.05878 12.7881C5.99808 12.8133 5.94294 12.8502 5.8965 12.8966V12.8966Z",fill:"var(--ds-icon, #292A2E)"})),s=t=>e(r).createElement("svg",{viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","data-testid":"excerpt-macro-icon","aria-label":t.label||void 0,role:t.label?"img":"presentation",className:(0,o("gMc0m").default)(["_1reo15vq _18m915vq _syaz1r31 _lswu7qp0 _lcxvglyw _1bsbzwfg _4t3izwfg _vc881r31"])},e(r).createElement("rect",{x:"5",y:"8",width:"22",height:"16",rx:"2",fill:"var(--ds-background-accent-blue-subtlest-hovered, #CFE1FD)"}),e(r).createElement("rect",{x:"8",y:"15",width:"16",height:"2",rx:"1",fill:"var(--ds-link, #1868DB)"}),e(r).createElement("rect",{x:"8",y:"11",width:"16",height:"2",rx:"1",fill:"var(--ds-link, #1868DB)"}),e(r).createElement("rect",{x:"8",y:"4",width:"19",height:"2",rx:"1",fill:"var(--ds-background-accent-gray-subtlest-pressed, #B7B9BE)"}),e(r).createElement("rect",{x:"8",y:"30",width:"19",height:"2",rx:"1",fill:"var(--ds-background-accent-gray-subtlest-pressed, #B7B9BE)"}),e(r).createElement("rect",{x:"8",width:"16",height:"2",rx:"1",fill:"var(--ds-background-accent-gray-subtlest-pressed, #B7B9BE)"}),e(r).createElement("rect",{x:"8",y:"26",width:"16",height:"2",rx:"1",fill:"var(--ds-background-accent-gray-subtlest-pressed, #B7B9BE)"}),e(r).createElement("rect",{x:"8",y:"19",width:"10",height:"2",rx:"1",fill:"var(--ds-link, #1868DB)"})),l={small:24,medium:32,large:48},d=e=>l[e];t.exports.MacroIcon=function({macro:t,size:a="small",testId:l}){let{icon:c,macroName:u}=t;switch(u){case"children":return e(r).createElement(n,{label:""});case"excerpt":return e(r).createElement(s,{label:""});case"excerpt-include":return e(r).createElement(i,{label:""});case"recently-updated":return e(r).createElement(e(o("kevJM")),{color:"var(--ds-icon, #292A2E)",label:"",spacing:"spacious",testId:"recently-updated-macro-icon"});case"contentbylabel":return e(r).createElement(e(o("av0Vd")),{color:"var(--ds-icon, #292A2E)",label:"",spacing:"spacious",testId:"contentbylabel-macro-icon"});case"profile-picture":return e(r).createElement(e(o("4wwVl")),{label:"",spacing:"spacious",testId:"profile-picture-icon"});case"profile":return e(r).createElement(e(o("6767u")),{label:"",spacing:"spacious",testId:"profile-icon"});case"toc":return e(r).createElement(e(o("6bJyJ")),{label:"",testId:"toc-icon",spacing:"spacious"});case"jira":return e(r).createElement(o("lAFHW").JiraIcon,{label:"",size:"medium","data-testid":l});case"anchor":return e(r).createElement(e(o("1bY7o")),{label:"",spacing:"spacious",testId:"anchor-link-icon"})}if(!c)return e(r).createElement(e(o("jdPfT")),{label:"",spacing:"spacious",testId:"default-icon"});let m=(0,o("cb6fO").getContextAwareFullPath)(c.location,!0),p=d(a);return e(r).createElement("img",{src:m,width:p,height:p,alt:"","data-testid":l})},t.exports.BulletSVG=()=>e(r).createElement("svg",{width:"8",height:"8",viewBox:"0 0 8 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e(r).createElement("circle",{cx:"4",cy:"4",r:"4",fill:"var(--ds-icon, #292A2E)"})),t.exports.CircleSVG=()=>e(r).createElement("svg",{width:"8",height:"8",viewBox:"0 0 8 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e(r).createElement("circle",{cx:"4",cy:"4",r:"3.5",stroke:"var(--ds-icon, #292A2E)"})),t.exports.DiscSVG=()=>e(r).createElement("svg",{width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e(r).createElement("path",{d:"M8 4C8 6.20914 6.20914 8 4 8C1.79086 8 0 6.20914 0 4C0 1.79086 1.79086 0 4 0C6.20914 0 8 1.79086 8 4Z",fill:"var(--ds-icon, #292A2E)"}),e(r).createElement("path",{d:"M9 13.9V16C9 16.5523 9.44772 17 10 17H15C15.5523 17 16 16.5523 16 16V11C16 10.4477 15.5523 10 15 10H12.9C12.5023 11.9591 10.9591 13.5023 9 13.9Z",fill:"var(--ds-icon, #292A2E)"}),e(r).createElement("path",{d:"M4 8.99997C4 11.2091 5.79086 13 8 13C10.2091 13 12 11.2091 12 8.99997C12 7.09292 10.6654 5.49757 8.87929 5.09692C8.80495 5.42907 8.69755 5.74873 8.56074 6.05229C9.9496 6.31488 11 7.53476 11 8.99997C11 10.6568 9.65685 12 8 12C6.34315 12 5 10.6568 5 8.99997C5 8.96639 5.00055 8.93293 5.00165 8.89962C4.67803 8.96542 4.34305 8.99997 4 8.99997Z",fill:"var(--ds-icon, #292A2E)"})),t.exports.NumberedSVG=()=>e(r).createElement("svg",{width:"10",height:"11",viewBox:"0 0 10 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e(r).createElement("path",{d:"M3.41016 10H4.64062V0.135742H3.41699L0.791992 2.02246V3.32129L3.30078 1.50293H3.41016V10ZM8.22266 10.0684C8.71484 10.0684 9.11133 9.66504 9.11133 9.17969C9.11133 8.6875 8.71484 8.29102 8.22266 8.29102C7.7373 8.29102 7.33398 8.6875 7.33398 9.17969C7.33398 9.66504 7.7373 10.0684 8.22266 10.0684Z",fill:"var(--ds-icon, #292A2E)"})),t.exports.SquareSVG=()=>e(r).createElement("svg",{width:"8",height:"8",viewBox:"0 0 8 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e(r).createElement("rect",{width:"8",height:"8",rx:"1",fill:"var(--ds-icon, #292A2E)"})),t.exports.BraceSVG=()=>e(r).createElement("svg",{width:"14",height:"12",viewBox:"0 0 14 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e(r).createElement("path",{d:"M1.80648 7.77764V9.55542C1.80648 10.2037 2.06826 10.8254 2.53401 11.2837C2.99977 11.7423 3.63154 11.9997 4.2904 11.9997H4.96785V10.6665H4.2904C3.99098 10.6665 3.70384 10.5493 3.49198 10.341C3.28029 10.1327 3.16137 9.85009 3.16137 9.55541V7.77764C3.16011 7.10412 2.87676 6.46084 2.37775 5.99986C2.87674 5.53888 3.16008 4.8956 3.16137 4.22209V2.44431C3.16137 2.14964 3.28029 1.86706 3.49198 1.65873C3.70383 1.45041 3.99097 1.33322 4.2904 1.33322H4.96785V0H4.2904C3.63154 0 2.99977 0.257466 2.53401 0.715975C2.06825 1.17434 1.80648 1.79607 1.80648 2.44431V4.22208C1.80648 4.51675 1.68756 4.79933 1.47587 5.00782C1.26402 5.21615 0.976884 5.33318 0.677452 5.33318H0V6.66656H0.677452C0.976876 6.66656 1.26402 6.78359 1.47587 6.99191C1.68756 7.2004 1.80648 7.48297 1.80648 7.77764Z",fill:"var(--ds-icon, #292A2E)"}),e(r).createElement("path",{d:"M12.1936 4.2222V2.44443C12.1936 1.79619 11.9318 1.17446 11.4661 0.716097C11.0003 0.257576 10.3685 0.00012207 9.70968 0.00012207H9.03223V1.3335H9.70968V1.33335C10.0091 1.33335 10.2962 1.45053 10.5081 1.65886C10.7198 1.86719 10.8387 2.14976 10.8387 2.44444V4.22221C10.84 4.89573 11.1233 5.53901 11.6223 5.99999C11.1233 6.46097 10.84 7.10425 10.8387 7.77776V9.55554C10.8387 9.85021 10.7198 10.1328 10.5081 10.3411C10.2962 10.5494 10.0091 10.6666 9.70968 10.6666H9.03223V12H9.70968V11.9999C10.3685 11.9999 11.0003 11.7424 11.4661 11.2839C11.9318 10.8255 12.1936 10.2038 12.1936 9.55555V7.77777C12.1936 7.4831 12.3125 7.20052 12.5242 6.99204C12.7361 6.78371 13.0232 6.66668 13.3226 6.66668H14.0001V5.3333H13.3226C13.0232 5.3333 12.7361 5.21627 12.5242 5.00794C12.3125 4.79946 12.1936 4.51688 12.1936 4.2222Z",fill:"var(--ds-icon, #292A2E)"})),t.exports.BracketSVG=()=>e(r).createElement("svg",{width:"12",height:"14",viewBox:"0 0 12 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e(r).createElement("path",{d:"M4 1.5H1V12.5H4",stroke:"var(--ds-icon, #292A2E)",strokeWidth:"1.25"}),e(r).createElement("path",{d:"M8 12.5H11L11 1.5H8",stroke:"var(--ds-icon, #292A2E)",strokeWidth:"1.25"})),t.exports.PipeSVG=()=>e(r).createElement("svg",{width:"2",height:"12",viewBox:"0 0 2 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e(r).createElement("line",{x1:"0.625",y1:"2.73196e-08",x2:"0.624999",y2:"12",stroke:"var(--ds-icon, #292A2E)",strokeWidth:"1.25"})),t.exports.DropdownIcon=function({icon:t,testId:a}){return e(r).createElement("div",{style:{width:16,height:16,display:"flex",alignItems:"center",justifyContent:"center"},"data-testId":a},t())}}),i("eQyFc",function(e,t){o("42omo");let a=(e,t,a)=>{if(t&&t.parameters&&t.parameters.macroParams){let r=(0,o("e7owm").transformParams)("transformBefore",a,{...t.parameters.macroParams});if(e in r){let t=r[e];return"object"==typeof t&&null!==t&&t.hasOwnProperty("value")&&(t=t.value),(0,o("2E7zk").isValueSet)(t)}}return!1},r=(e,t)=>e.formDetails.parameters.some(r=>r.required&&null===r.defaultValue&&!r.hidden&&!a(r.name,t,e)),n=(e,t=[])=>!!t.includes(e.macroName)||"PLAIN_TEXT"===e.formDetails.body.bodyType||e.customConfigEditor;e.exports.safeGetMacroName=e=>e.alternateId||e.macroName,e.exports.getExtensionBodyType=e=>{let{bodyType:t,outputType:a}=e.formDetails.body;return"MULTI_BODY_RICH_TEXT"===t?o("8pcS0").MULTI_BODIED_EXTENSION_TYPE:"RICH_TEXT"===t?o("8pcS0").BODIED_EXTENSION_TYPE:"INLINE"===a?o("8pcS0").INLINE_EXTENSION_TYPE:o("8pcS0").REGULAR_EXTENSION_TYPE},e.exports.buildIconObject=e=>({48:()=>Promise.resolve(()=>(0,o("9tVje").getIconComponent)(e))}),e.exports.getVisibleParameters=e=>e.formDetails&&(e.formDetails.parameters||[]).filter(e=>!e.hidden)||[],e.exports.isMissingAnyRequiredParameters=r,e.exports.prepareMacro=(e,t,a,r,n)=>(0,o("foRF9").fetchMacroAttributes)({macroDefinition:{name:name,body:"",params:{},...e},contentId:t,selectedMacro:a,intl:r,isLivePagesFeatureEnabled:n}),e.exports.canRenderInTheEditor=e=>"pagetree"!==e.macroName,e.exports.shouldUseMacroBrowser=n,e.exports.needsToForceConfig=e=>{if("PLAIN_TEXT"===e.formDetails.body.bodyType)return!0;switch(e.macroName){case"children":case"tasks-report-macro":return!0;default:return e.customConfigEditor}},e.exports.shouldShowPlaceholder=(e,t=[],a,o)=>!n(e,t)&&(o||"anchor"!==e.macroName)&&r(e,a)}),i("e7owm",function(e,t){let a=["username","spacekey","enum","label"],r={spaceAndPage:["space","page"]},n=((...e)=>({transformFields:(t,a,r)=>e.reduce(async(e,t)=>{let n=await e;return t.transformFields?t.transformFields({fields:n,pageContext:a,intl:r}):e},Promise.resolve(t)),transformBefore:(t,a,r)=>e.reduce((e,t)=>t.transformBefore?t.transformBefore(e,a,r):e,t),transformAfter:(t,a,r)=>e.reduce((e,t)=>t.transformAfter?t.transformAfter(e,a,r):e,t)}))({transformBefore:(e,t)=>(Object.entries(t).forEach(([t,a])=>{let r=e[t];"cql"===a.type.name&&"string"==typeof r&&r.length&&(e[t]=r.replace(/(contributor|creator|mention)\.accountid = /g,"$1 = "))}),e)},{transformBefore:(e,t)=>(null!=e[""]&&(e.defaultParameterValue=e[""],t.defaultParameterValue=t[""]),e),transformAfter:(e,t)=>(null!=e.defaultParameterValue&&(e[""]=e.defaultParameterValue,t[""]=t.defaultParameterValue,delete e.defaultParameterValue),e)},{transformBefore:(e,t)=>(Object.entries(t).forEach(([t,a])=>{a?.type?.name==="boolean"&&void 0!==e[t]&&(e[t]="false"!==e[t]&&!!e[t])}),e)},{transformBefore:(e,t)=>(Object.entries(t).forEach(([t,r])=>{let n=e[t];r?.multiple&&void 0!==n&&"string"==typeof n&&a.includes(r.type.name)&&(e[t]=n.split(","))}),e),transformAfter:(e,t)=>(Object.entries(t).forEach(([t,r])=>{let n=e[t];r?.multiple&&Array.isArray(n)&&a.includes(r.type.name)&&(e[t]=n.join(","))}),e)},{transformAfter:(e,t)=>(Object.entries(t).forEach(([t,a])=>{let r=!1;a&&!a.required&&(a.defaultValue===e[t]||"boolean"===a.type.name&&("false"===a.defaultValue&&!1===e[t]||"true"===a.defaultValue&&!0===e[t])?r=!0:"string"===a.type.name&&null===a.defaultValue&&""===e[t]&&(r=!0)),r&&delete e[t]}),e)},{transformAfter:(e,t)=>(Object.entries(t).some(([t,a])=>a&&a.required&&null==a.defaultValue&&!a.hidden&&(r[t]?!((0,o("2E7zk").isValueSet)(e[t])||r[t].some(t=>(0,o("2E7zk").isValueSet)(e[t]))):!(0,o("2E7zk").isValueSet)(e[t])))&&(e.isMissingRequiredParameters=!0),e)}),i=(0,o("cgtv4").defineMessages)({defaultParameterValueFieldLabel:{id:"fabric-extension-lib.anchor.config-panel.name-field.label",defaultMessage:"Name"},defaultParameterValueFieldDescription:{id:"fabric-extension-lib.anchor.config-panel.name-field.description",defaultMessage:"Give this anchor link a unique name for easy reference."}}),s={transformFields:async({fields:e,intl:t})=>e.map(e=>"defaultParameterValue"!==e.name?e:{...e,type:"string",isRequired:!0,label:t.formatMessage(i.defaultParameterValueFieldLabel),description:t.formatMessage(i.defaultParameterValueFieldDescription)}),transformAfter:e=>(e.defaultParameterValue&&(e.defaultParameterValue=e.defaultParameterValue.replace(/^\s+/g,""),e.defaultParameterValue=e.defaultParameterValue.replace(/\s+$/g,""),e.defaultParameterValue=e.defaultParameterValue.replace(/\s+/g,"-"),e.defaultParameterValue=e.defaultParameterValue.replace(/["']+/g,""),e.defaultParameterValue=e.defaultParameterValue.substr(0,o("8pcS0").MAX_ATLASSIAN_ALLOWED_FRAGMENT_LENGTH)),e)},l={transformFields:async({fields:e})=>e.map(e=>"labels"!==e.name?e:{...e,type:"custom",isMultiple:!0,options:{resolver:{type:"label"}}}),transformBefore:e=>(e.labels&&"string"==typeof e.labels&&(e.labels=e.labels.split(",")),e),transformAfter:e=>(Array.isArray(e.labels)&&(e.labels=e.labels.join(",")),e)},d=(0,o("cgtv4").defineMessages)({labelsFieldDescription:{id:"fabric-extension-lib.blog-posts.config-panel.labels-field.description",defaultMessage:"Add a “-” before any label to exclude blogs with that label.  Add a “+” before any label to require that blogs have that label."},spacesFieldDescription:{id:"fabric-extension-lib.blog-posts.config-panel.spaces-field.description",defaultMessage:"Add a “-” before any space to exclude blogs in that space."}}),c=["labels","spaces"],u={transformFields:async({fields:e,intl:t})=>e.map(e=>{let a={};switch(e.name){case"labels":a={description:(0,o("9wGTI").fg)("confluence_frontend_blog_posts_macro_in_side_panel")?t.formatMessage(d.labelsFieldDescription):void 0,type:"custom",isMultiple:!0,options:{resolver:{type:(0,o("9wGTI").fg)("confluence_frontend_blog_posts_macro_in_side_panel")?"labelWithPlusMinusPrefixes":"label"}}};break;case"spaces":a={description:(0,o("9wGTI").fg)("confluence_frontend_blog_posts_macro_in_side_panel")?t.formatMessage(d.spacesFieldDescription):void 0,type:"custom",isMultiple:!0,options:{resolver:{type:(0,o("9wGTI").fg)("confluence_frontend_blog_posts_macro_in_side_panel")?"blogRecentlyUpdatedSpaceWithPlusMinusPrefixes":"blogRecentlyUpdatedSpace"}}};break;case"author":(0,o("9wGTI").fg)("confluence_frontend_blog_posts_macro_in_side_panel")&&(a={description:""})}return{...e,...a}}),transformBefore:e=>(c.forEach(t=>{e[t]&&"string"==typeof e[t]&&(e[t]=e[t].split(","))}),e),transformAfter:e=>(c.forEach(t=>{Array.isArray(e[t])&&(e[t]=e[t].join(","))}),e)};function m(e,t){return(0,o("dWCFT").default)((0,o("da71s").default)(e),t)}function p(e,t){return(0,o("lEnS1").default)((0,o("bJbIe").default)(e,t,new Date),{representation:"date"})}let f=e=>"boolean"==typeof e?e:"true"===e,g="yyyy-MM-dd",h={transformFields:async({fields:e})=>e.map(e=>{switch(e.name){case"publishDate":return{...e,description:void 0};case"spaces":return{...e,options:{resolver:{type:"contributorsSpaceParamResolver"}}};default:return e}}),transformBefore:e=>(e.publishDate?.length&&(e.publishDate=p(e.publishDate,g)),e),transformAfter:e=>(e.publishDate?.length&&(e.publishDate=m(e.publishDate,g)),e)},y=(0,o("cgtv4").defineMessages)({contentIncludeFieldLabel:{id:"fabric-extension-lib.field-mappings.include.field.contentInclude.label",defaultMessage:"Content to include"}}),E={transformFields:async({fields:e,intl:t,isLivePagesFeatureEnabled:a})=>e.map(e=>"defaultParameterValue"!==e.name?e:{...e,type:"custom",label:a?t.formatMessage(y.contentIncludeFieldLabel):e.label,description:void 0})},b={transformFields:async({fields:e})=>e.filter(e=>!["date","space"].includes(e.name)).map(e=>"page"!==e.name?e:{...e,type:"string",isHidden:!0}),transformAfter:e=>(e.page||delete e.page,e)},v="dd-MM-yyyy",x={transformFields:async({fields:e})=>e.map(e=>"spaceAndPage"===e.name?{...e,isMultiple:!0,type:"custom",options:{resolver:{type:"spaceAndPage"}}}:"createddateFrom"===e.name?{...e,description:void 0}:e),transformBefore(e){let t="";return e.spaces&&(t+=e.spaces),e.pages&&(t&&(t+=","),t+=e.pages),t&&(e.spaceAndPage=t),delete e.spaces,delete e.pages,e.createddateFrom?.length&&(e.createddateFrom=p(e.createddateFrom,v)),e},transformAfter(e){if(Array.isArray(e.spaceAndPage)){let t=e.spaceAndPage.filter(e=>!(0,o("2E7zk").isPageId)(e));t.length>0&&(e.spaces=t.join(","));let a=e.spaceAndPage.filter(o("2E7zk").isPageId);a.length>0&&(e.pages=a.join(",")),delete e.spaceAndPage}return e.createddateFrom?.length&&(e.createddateFrom=m(e.createddateFrom,v)),e}},I=(0,o("cgtv4").defineMessages)({fieldRootLabel:{id:"fabric-extension-lib.field-mappings.pagetree.field.root.label",defaultMessage:"Root content"},fieldSpacesLabel:{id:"fabric-extension-lib.field-mappings.pagetree.field.spaces.label",defaultMessage:"Restrict to this space key"},fieldSortLabel:{id:"fabric-extension-lib.field-mappings.pagetree.field.sort.label",defaultMessage:"Sort content by"},fieldExcerptLabel:{id:"fabric-extension-lib.field-mappings.pagetree.field.excerpt.label",defaultMessage:"Include excerpts in content tree"},fieldReverseLabel:{id:"fabric-extension-lib.field-mappings.pagetree.field.reverse.label",defaultMessage:"Reverse order"},fieldReverseDescription:{id:"fabric-extension-lib.field-mappings.pagetree.field.reverse.description",defaultMessage:"Used only in conjunction with the “Sort content by” field."},fieldSearchBoxLabel:{id:"fabric-extension-lib.field-mappings.pagetree.field.searchBox.label",defaultMessage:"Include search box above content tree"},fieldExpandCollapseAllLabel:{id:"fabric-extension-lib.field-mappings.pagetree.field.expandCollapseAll.label",defaultMessage:"Show expand/collapse links"},fieldExpandCollapseAllDescription:{id:"fabric-extension-lib.field-mappings.pagetree.field.expandCollapseAll.description",defaultMessage:"Displays the “expand all” and “collapse all” links at the top of the content tree."},fieldStartDepthLabel:{id:"fabric-extension-lib.field-mappings.pagetree.field.startDepth.label",defaultMessage:"Tree depth"},fieldStartDepthDescription:{id:"fabric-extension-lib.field-mappings.pagetree.field.startDepth.description",defaultMessage:"The number of levels of child items displayed."}}),w={transformFields:async({fields:e,intl:t,isLivePagesFeatureEnabled:a})=>e.map(e=>{let r={...e};if("root"===e.name&&(r={...r,isMultiple:!1,type:"custom",options:{resolver:{type:"rootPage"}}}),a){let a={};switch(e.name){case"root":a={label:t.formatMessage(I.fieldRootLabel)};break;case"spaces":a={label:t.formatMessage(I.fieldSpacesLabel)};break;case"sort":a={label:t.formatMessage(I.fieldSortLabel)};break;case"excerpt":a={label:t.formatMessage(I.fieldExcerptLabel)};break;case"reverse":a={label:t.formatMessage(I.fieldReverseLabel),description:t.formatMessage(I.fieldReverseDescription)};break;case"searchBox":a={label:t.formatMessage(I.fieldSearchBoxLabel)};break;case"expandCollapseAll":a={label:t.formatMessage(I.fieldExpandCollapseAllLabel),description:t.formatMessage(I.fieldExpandCollapseAllDescription)};break;case"startDepth":a={label:t.formatMessage(I.fieldStartDepthLabel),description:t.formatMessage(I.fieldStartDepthDescription)}}r={...r,...a}}return r})},M=(0,o("cgtv4").defineMessages)({searchCalendarPlaceholder:{id:"fabric-extension-lib.field-mappings.calendar.field.search.placeholder",defaultMessage:"Begin typing to search your calendars"}}),S={transformFields:async({fields:e,intl:t})=>e.map(e=>"id"!==e.name?e:{...e,type:"custom",isMultiple:!0,options:{resolver:{type:"calendar"}},placeholder:t.formatMessage(M.searchCalendarPlaceholder)}),transformBefore:e=>(e.id&&"string"==typeof e.id&&(e.id=e.id.split(",")),e),transformAfter:e=>(Array.isArray(e.id)&&(e.id=e.id.join(",")),e)},_=(e,t,a,r,n)=>{let i;switch(e){case"spaces":i={...C(t.spaces),label:a.formatMessage(o("kTVK2").i18n.spaceLabel),description:"",placeholder:a.formatMessage(o("kTVK2").i18n.spacePlaceholder)};break;case"types":i={...t.types,label:a.formatMessage(o("kTVK2").i18n.typesLabel),description:"",placeholder:a.formatMessage(o("kTVK2").i18n.typePlaceholder),type:"enum",style:"select",isMultiple:!0,items:[{label:a.formatMessage(o("kTVK2").i18nTypes.allLabel),value:""},{label:n&&(0,o("9wGTI").fg)("confluence_live_pages_open_beta_trait_opted_in")?a.formatMessage(o("kTVK2").i18nTypes.livePageLabel):a.formatMessage(o("kTVK2").i18nTypes.pageLabel),value:"page"},{label:a.formatMessage(o("kTVK2").i18nTypes.blogPostLabel),value:"blogpost"},{label:a.formatMessage(o("kTVK2").i18nTypes.commentLabel),value:"comment"},{label:a.formatMessage(o("kTVK2").i18nTypes.attachmentLabel),value:"attachment"}]};break;case"maxToggle":i={name:"maxToggle",type:"boolean",style:"toggle",label:a.formatMessage(o("kTVK2").i18n.maxToggleLabel),description:"",defaultValue:!1,isHidden:!1,isMultiple:!1,isRequired:!1};break;case"max":i={...t.max,label:a.formatMessage(o("kTVK2").i18n.maxLabel)};break;case"theme":i={...t.theme,label:a.formatMessage(o("kTVK2").i18n.themeLabel),placeholder:a.formatMessage(o("kTVK2").i18nTheme.conciseLabel),items:[{label:a.formatMessage(o("kTVK2").i18nTheme.conciseLabel),value:"concise"},{label:a.formatMessage(o("kTVK2").i18nTheme.sidebarLabel),value:"sidebar"},{label:a.formatMessage(o("kTVK2").i18nTheme.socialLabel),value:"social"}]};break;case"author":i={...t.author,label:a.formatMessage(o("kTVK2").i18n.authorLabel),placeholder:a.formatMessage(o("kTVK2").i18n.authorPlaceholder),description:""};break;case"labels":i={...t.labels,label:a.formatMessage(o("kTVK2").i18n.labelsLabel),placeholder:a.formatMessage(o("kTVK2").i18n.labelsPlaceholder),description:"",isMultiple:!0,type:"custom",options:{resolver:{type:"label"}}};break;case"width":i={...t.width,label:a.formatMessage(o("kTVK2").i18n.widthLabel),placeholder:a.formatMessage(o("kTVK2").i18n.widthPlaceholder),description:"",type:"custom",options:{isCreatable:!0,formatCreateLabel:e=>e,resolver:{type:"widthPercentage"}}};break;case"hideHeading":i={...t.hideHeading,label:a.formatMessage(o("kTVK2").i18n.hideHeadingLabel)}}return i},C=e=>({...e,isMultiple:!0,type:"custom",options:{resolver:{type:"blogRecentlyUpdatedSpace"}}}),T=(e,t,a,r,n)=>{if("max"===e){let o=[];return o.push(_("maxToggle",t,a,n)),f(r?.macroParams?.maxToggle?.value)||o.push(_(e,t,a)),o}return _(e,t,a,n)},R=["spaces","types","max"],P=["theme","author","labels","width","hideHeading"],A={transformFields:async({fields:e,intl:t,createAnalyticsEvent:a,isLivePage:r})=>{let n=(e,t)=>{a&&a({type:"sendOperationalEvent",data:{action:"error",actionSubject:"transformFields",actionSubjectId:e,source:"field-mappings/recently-updated",attributes:{error:t.message,stack:t.stack}}}).fire()};return a=>{let i=e.reduce((e,t)=>(e[t.name]=t,e),{});return[{type:"tab-group",name:"tabGroup",label:"Recent Updates Tab Group",defaultTab:"basic",fields:[{type:"tab",label:t.formatMessage(o("kTVK2").i18n.basicTabLabel),name:"basic",fields:[...R.flatMap(e=>{try{return T(e,i,t,a,r)}catch(e){return n("basicTab",e),[]}})]},{type:"tab",label:t.formatMessage(o("kTVK2").i18n.displayTabLabel),name:"display",fields:[...P.map(e=>{try{return _(e,i,t)}catch(e){return n("displayTab",e),[]}})]}]}]}},transformBefore:(e,t,a)=>(e.types?e.types=e.types.split(/[ ,]+/):e.types=[""],e.labels&&(e.labels=e.labels.split(/[ ,]+/)),f(e.showProfilePic)&&(e.theme="social",e.showProfilePic="false"),e),transformAfter(e,t,a){if(e.types){let t=e.types;""===t[t.length-1]?e.types="":(t.some(e=>""===e)&&t.splice(t.indexOf(""),1),e.types=t.join())}return f(e.maxToggle)&&(e.max=250),e.labels&&(e.labels=e.labels.join()),e}},N={transformFields:async({fields:e})=>e.map(e=>"spaces"===e.name?{...e,isMultiple:!0,type:"custom",options:{resolver:{type:"recentlyUpdatedDashboardSpaceKeyResolver"}}}:e)},k=e=>/^[0-9]+$/.test(e),L={transformFields:async({fields:e,pageContext:t,params:a})=>{let r=[],n=(0,o("gw2T1").getTemplateResolver)(a?.spaceKey?a:t);n&&(r=await n("",""));let i=e.map(e=>"templateName"===e.name?{...e,type:"enum",items:r,isRequired:!0}:"spaceKey"===e.name?{...e,defaultValue:t.spaceKey,isRequired:!1}:e),s=i.findIndex(({name:e})=>"spaceKey"===e),l=i.findIndex(({name:e})=>"templateName"===e);return i.unshift(i.splice(l,1)[0]),i.unshift(i.splice(s,1)[0]),i},transformAfter(e){let{templateName:t}=e;return t&&(k(t)?(e.templateId=t,delete e.contentBlueprintId):(e.contentBlueprintId=t,delete e.templateId)),e}},D=(0,o("cgtv4").defineMessages)({pageLabel:{id:"fabric-extension-lib.children.field.page.label",defaultMessage:"Parent item"},pagePlaceholder:{id:"fabric-extension-lib.children.field.page.placeholder",defaultMessage:"Current"},allChildren:{id:"fabric-extension-lib.children.field.allChildren.label",defaultMessage:"Show all child items"},allLabel:{id:"fabric-extension-lib.children.field.all.label",defaultMessage:"Show all levels"},depthLabel:{id:"fabric-extension-lib.children.field.depth.label",defaultMessage:"Max number of levels"},excerptTypeLabel:{id:"fabric-extension-lib.children.field.excerptType.label",defaultMessage:"Display preview"},excerptTypeDescription:{id:"fabric-extension-lib.children.field.excerptType.description",defaultMessage:"Lists can display a preview of the top of a child item, or the content of its excerpt."},firstLabel:{id:"fabric-extension-lib.children.field.first.label",defaultMessage:"Max number in list"},sortLabel:{id:"fabric-extension-lib.children.field.sort.label",defaultMessage:"Sort order"},styleLabel:{id:"fabric-extension-lib.children.field.style.label",defaultMessage:"List style"},basicTabLabel:{id:"fabric-extension-lib.config.tab.basic.label",defaultMessage:"Basic"},displayTabLabel:{id:"fabric-extension-lib.config.tab.display.label",defaultMessage:"Display"}}),F=(0,o("cgtv4").defineMessages)({one:{id:"fabric-extension-lib.children.field.depth.item.one",defaultMessage:"1 level"},two:{id:"fabric-extension-lib.children.field.depth.item.two",defaultMessage:"2 levels"},three:{id:"fabric-extension-lib.children.field.depth.item.three",defaultMessage:"3 levels"},four:{id:"fabric-extension-lib.children.field.depth.item.four",defaultMessage:"4 levels"},five:{id:"fabric-extension-lib.children.field.depth.item.five",defaultMessage:"5 levels"},six:{id:"fabric-extension-lib.children.field.depth.item.six",defaultMessage:"6 levels"},seven:{id:"fabric-extension-lib.children.field.depth.item.seven",defaultMessage:"7 levels"},eight:{id:"fabric-extension-lib.children.field.depth.item.eight",defaultMessage:"8 levels"},nine:{id:"fabric-extension-lib.children.field.depth.item.nine",defaultMessage:"9 levels"}}),O=(0,o("cgtv4").defineMessages)({titleGroup:{id:"fabric-extension-lib.children.field.sort.group.title",defaultMessage:"Title"},titleItem:{id:"fabric-extension-lib.children.field.sort.item.title",defaultMessage:"A → Z"},titleReverseItem:{id:"fabric-extension-lib.children.field.sort.item.titlereverse",defaultMessage:"Z → A"},creationGroup:{id:"fabric-extension-lib.children.field.sort.group.creation",defaultMessage:"Created"},creationItem:{id:"fabric-extension-lib.children.field.sort.item.creation",defaultMessage:"Newest → Oldest"},creationReverseItem:{id:"fabric-extension-lib.children.field.sort.item.creationreverse",defaultMessage:"Oldest → Newest"},modifiedGroup:{id:"fabric-extension-lib.children.field.sort.group.modified",defaultMessage:"Modified"},modifiedItem:{id:"fabric-extension-lib.children.field.sort.item.modified",defaultMessage:"Old → Recent"},modifiedReverseItem:{id:"fabric-extension-lib.children.field.sort.item.modifiednreverse",defaultMessage:"Recent → Old"},defaultGroup:{id:"fabric-extension-lib.children.field.sort.group.default",defaultMessage:"Content Tree"},defaultItem:{id:"fabric-extension-lib.children.field.sort.item.default",defaultMessage:"Current"},defaultReverseItem:{id:"fabric-extension-lib.children.field.sort.item.defaultreverse",defaultMessage:"Reverse"}}),B=(0,o("cgtv4").defineMessages)({default:{id:"fabric-extension-lib.children.field.style.item.default",defaultMessage:"Bulleted"},h1:{id:"fabric-extension-lib.children.field.style.item.h1",defaultMessage:"H1"},h2:{id:"fabric-extension-lib.children.field.style.item.h2",defaultMessage:"H2"},h3:{id:"fabric-extension-lib.children.field.style.item.h3",defaultMessage:"H3"},h4:{id:"fabric-extension-lib.children.field.style.item.h4",defaultMessage:"H4"},h5:{id:"fabric-extension-lib.children.field.style.item.h5",defaultMessage:"H5"},h6:{id:"fabric-extension-lib.children.field.style.item.h6",defaultMessage:"H6"}}),V=(0,o("cgtv4").defineMessages)({none:{id:"fabric-extension-lib.children.field.excerptType.item.none",defaultMessage:"None"},richContent:{id:"fabric-extension-lib.children.field.excerptType.item.richContent",defaultMessage:"Preview content"},simple:{id:"fabric-extension-lib.children.field.excerptType.item.simple",defaultMessage:"Excerpt preview"}}),j=(e,t,a,r)=>{let n;switch(e){case"page":n={...t.page,label:a.formatMessage(D.pageLabel),placeholder:a.formatMessage(D.pagePlaceholder),description:""};break;case"allChildren":n={name:"allChildren",type:"boolean",style:"toggle",label:a.formatMessage(D.allChildren),description:"",defaultValue:r,isHidden:!1,isMultiple:!1,isRequired:!1};break;case"first":n={...t.first,label:a.formatMessage(D.firstLabel),description:""};break;case"all":n={...t.all,style:"toggle",defaultValue:"false",label:a.formatMessage(D.allLabel)};break;case"depth":n={...t.depth,type:"enum",style:"select",defaultValue:"1",isMultiple:!1,label:a.formatMessage(D.depthLabel),items:[{label:a.formatMessage(F.one),value:"1"},{label:a.formatMessage(F.two),value:"2"},{label:a.formatMessage(F.three),value:"3"},{label:a.formatMessage(F.four),value:"4"},{label:a.formatMessage(F.five),value:"5"},{label:a.formatMessage(F.six),value:"6"},{label:a.formatMessage(F.seven),value:"7"},{label:a.formatMessage(F.eight),value:"8"},{label:a.formatMessage(F.nine),value:"9"}]};break;case"sort":n={...t.sort,name:"sortAndReverse",type:"enum",style:"select",label:a.formatMessage(D.sortLabel),defaultValue:"",items:[{label:a.formatMessage(O.defaultGroup),options:[{label:a.formatMessage(O.defaultItem),value:""},{label:a.formatMessage(O.defaultReverseItem),value:".true"}]},{label:a.formatMessage(O.titleGroup),options:[{label:a.formatMessage(O.titleItem),value:"title"},{label:a.formatMessage(O.titleReverseItem),value:"title.true"}]},{label:a.formatMessage(O.creationGroup),options:[{label:a.formatMessage(O.creationItem),value:"creation.true"},{label:a.formatMessage(O.creationReverseItem),value:"creation"}]},{label:a.formatMessage(O.modifiedGroup),options:[{label:a.formatMessage(O.modifiedReverseItem),value:"modified.true"},{label:a.formatMessage(O.modifiedItem),value:"modified"}]}]};break;case"style":n={...t.style,label:a.formatMessage(D.styleLabel),defaultValue:"",items:[{label:a.formatMessage(B.default),value:""},{label:a.formatMessage(B.h1),value:"h1"},{label:a.formatMessage(B.h2),value:"h2"},{label:a.formatMessage(B.h3),value:"h3"},{label:a.formatMessage(B.h4),value:"h4"},{label:a.formatMessage(B.h5),value:"h5"},{label:a.formatMessage(B.h6),value:"h6"}]};break;case"excerptType":n={...t.excerptType,label:a.formatMessage(D.excerptTypeLabel),description:a.formatMessage(D.excerptTypeDescription),items:[{label:a.formatMessage(V.none),value:"none"},{label:a.formatMessage(V.richContent),value:"rich content"},{label:a.formatMessage(V.simple),value:"simple"}]}}return n},K=(e,t)=>(!e||!(t>0))&&e,z=(e,t,a,r)=>{if("page"===e)return j("page",t,a);let n=[];if("first"===e){let e=r?.macroParams?.first?.value&&0!==parseInt(r.macroParams.first.value)?"false":"true";n.push(j("allChildren",t,a,e)),r?.macroParams&&!r.macroParams.allChildren&&(r.macroParams.allChildren={value:e}),f(r?.macroParams?.allChildren?.value)||n.push(j("first",t,a))}return"all"===e&&(n.push(j("all",t,a)),K(f(r?.macroParams?.all?.value),parseInt(r?.macroParams?.depth?.value??""))||n.push(j("depth",t,a))),n},H=["page","first","all"],U=["sort","style","excerptType"],q={transformFields:async({fields:e,intl:t,createAnalyticsEvent:a})=>{let r=(e,t)=>{a&&a({type:"sendOperationalEvent",data:{action:"error",actionSubject:"transformFields",actionSubjectId:e,source:"field-mappings/children",attributes:{error:t.message,stack:t.stack}}}).fire()};return a=>{let n=e.reduce((e,t)=>(e[t.name]=t,e),{});return[{type:"tab-group",name:"tabGroup",label:"Child Pages Tab Group",defaultTab:"basic",fields:[{type:"tab",label:t.formatMessage(D.basicTabLabel),name:"basic",fields:[...H.flatMap(e=>{try{return z(e,n,t,a)}catch(e){return r("basicTab",e),[]}})]},{type:"tab",label:t.formatMessage(D.displayTabLabel),name:"display",fields:[...U.map(e=>{try{return j(e,n,t)}catch(e){return r("displayTab",e),[]}})]}]}]}},transformBefore:e=>(e.all=K(f(e.all),"number"==typeof e.depth?e.depth:parseInt(e.depth??"")),e.sortAndReverse=e.sort??"",f(e.reverse)&&(e.sortAndReverse+=".true"),e),transformAfter(e){let t=f(e.allChildren);t&&(e.first=0),t||e.first||(e.first=10);let a=f(e.all);return a&&(e.depth=0),a||0!==e.depth||(e.depth=1),[e.sort="",e.reverse]=(e.sortAndReverse??"").split("."),e.sort||delete e.sort,e}},G={transformFields:async({fields:e})=>e.map(e=>"name"===e.name?{...e,isRequired:!0}:e)},$=(0,o("cgtv4").defineMessages)({fieldIdLabel:{id:"fabric-extension-lib.field-mappings.details.field.id.label",defaultMessage:"Content properties ID (optional)"},fieldIdDescription:{id:"fabric-extension-lib.field-mappings.details.field.id.description",defaultMessage:"Specify an ID if you have multiple content properties macros on this page or doc and want to report on them separately."},fieldHiddenLabel:{id:"fabric-extension-lib.field-mappings.details.field.hidden.label",defaultMessage:"Hide from view"},fieldHiddenDescription:{id:"fabric-extension-lib.field-mappings.details.field.hidden.description",defaultMessage:"Hide macro contents from view, but continue to display them in the Content Properties Report macro."}}),W={transformFields:async({fields:e,intl:t,isLivePagesFeatureEnabled:a})=>a?e.map(e=>"id"===e.name?{...e,label:t.formatMessage($.fieldIdLabel),description:t.formatMessage($.fieldIdDescription)}:"hidden"===e.name?{...e,label:t.formatMessage($.fieldHiddenLabel),description:t.formatMessage($.fieldHiddenDescription)}:e):e},Q=e=>e.reduce((e,t)=>(e[t.name]=t,e),{}),X=()=>({attachments:l,"blog-posts":u,calendar:S,children:q,contributors:h,"contributors-summary":h,"create-from-template":L,details:W,excerpt:G,include:E,pagetree:w,viewpdf:b,viewdoc:b,viewxls:b,viewppt:b,"tasks-report-macro":x,anchor:s,"recently-updated":A,"recently-updated-dashboard":N}),Y=async({macroName:e},t,a,r,i,s,l,d)=>{let c=X()[e]?.transformFields,u=n?.transformFields;if("create-from-template"===e)return c?c({fields:t,pageContext:a,intl:r,params:i,createAnalyticsEvent:s,isLivePage:l}):t;{let n;if(c)try{n=await c({fields:t,pageContext:a,intl:r,params:i,createAnalyticsEvent:s,isLivePage:l,isLivePagesFeatureEnabled:d})}catch(t){o("8pcS0").MODERENIZED_MACRO_KEYS.includes(e)&&Z(e,"transformFields",t,s)}else n=t;return u?u(n,a,r):n}},Z=(e,t,a,r)=>{r&&r({type:"sendOperationalEvent",data:{action:"error",actionSubject:t,actionSubjectId:e,source:"field-mappings",attributes:{error:a.message,stack:a.stack}}}).fire()};e.exports.remapCustomFields=Y,e.exports.transformParams=(e,t,a,r,i)=>{let s,{macroName:l,formDetails:d}=t,c=Q(d.parameters),u=X()[l]?.[e],m=n?.[e];if(u)try{s=u(a,c,r)}catch(t){o("8pcS0").MODERENIZED_MACRO_KEYS.includes(l)&&Z(l,e,t,i)}else s=a;return m?m(s,c,r):s}}),i("2E7zk",function(t,a){var r=o("kyKWe");let n=(0,o("cgtv4").defineMessages)({excerptPlaceholder:{id:"fabric-extension-lib.excerpt.placeholder",defaultMessage:"Type or paste something here to turn it into an excerpt."},tocZonePlaceholder:{id:"fabric-extension-lib.toc.zone.placeholder",defaultMessage:"A table of contents based on the headings within this frame will appear here."},pagePropertiesKeyTablePlaceholder:{id:"fabric-extension-lib.page.properties.table.key.placeholder",defaultMessage:"List ‘keys’ in this column - these will be the column headings in your report table"},pagePropertiesValueTablePlaceholder:{id:"fabric-extension-lib.page.properties.table.value.placeholder",defaultMessage:"List the ‘value’ for each key in this column - these will populate the rows in your report table"}}),i=e=>"gadget"===e.macroName&&e?.formDetails?.parameters?.[0]?.defaultValue&&{gadgetUrl:new URL(e.formDetails.parameters[0].defaultValue,location.origin).pathname},s=(e,t,a,r,s=!1,l)=>async()=>{let d=await (0,o("eQyFc").prepareMacro)({name:e.macroName},t.contentId,null,a,l);"excerpt"===e.macroName&&(0,o("2E7zk").insertMacroPlaceholder)(d,a.formatMessage(n.excerptPlaceholder)),"details"===e.macroName&&(0,o("2E7zk").insertContentPropertiesMacroPlaceholder)(d,a.formatMessage(n.pagePropertiesKeyTablePlaceholder),a.formatMessage(n.pagePropertiesValueTablePlaceholder)),"toc-zone"===e.macroName&&(0,o("2E7zk").insertMacroPlaceholder)(d,a.formatMessage(n.tocZonePlaceholder));let c=await (0,o("2E7zk").getJiraHostingOption)(e.macroName,d.attrs.parameters?.macroParams?.serverId?.value);if(r){let t=await u(e.macroName);r({type:"sendTrackEvent",data:{action:"inserted",actionSubject:"macro",actionSubjectId:e.macroName,source:"quick insert menu",attributes:{extensionType:d?.type,appKey:(0,o("2E7zk").getConnectAppKey)(e.moduleKey),isLivePage:s,jiraHostingOption:c,...s&&void 0!==t&&{isSupportedMacro:t},...i(e)}}}).fire()}return d},l=(e,t,a,r,n,s,l,d=!1)=>async()=>{if(!r)throw Error("Macro Browser Config is missing");if(!n)throw Error("editorActions is missing");let c={createAnalyticsEvent:s,contentId:r.contentId},m=await t(e,r,void 0,c,l,e=>{(0,o("2E7zk").getSelectedBodiedExtensionNode)(n)||n.replaceSelection(e),a?.extension?.actions?.editSelectedExtension()}),p=await (0,o("2E7zk").getJiraHostingOption)(e.macroName,m.attrs.parameters?.macroParams?.serverId?.value);if(n.replaceSelection(m)&&s){let t=await u(e.macroName);s({type:"sendTrackEvent",data:{action:"inserted",actionSubject:"macro",actionSubjectId:e.macroName,source:"quick insert menu",attributes:{inputMethod:"macroBrowser",extensionType:m?.type,appKey:(0,o("2E7zk").getConnectAppKey)(e.moduleKey),isLivePage:d,jiraHostingOption:p,...d&&void 0!==t&&{isSupportedMacro:t},...i(e)}}}).fire()}},d=(t,a,n,l,d,c,m,p=!1,f)=>async()=>{if(!d)throw Error("editorActions is missing");let g=s(t,a,n,void 0,p,f),h=await g();h?.attrs?.extensionKey==="toc"&&h?.attrs?.parameters?.macroParams&&(h.attrs.parameters.macroParams.style={value:"none"}),h?.attrs?.extensionKey==="anchor"&&h?.attrs?.parameters?.macroParams&&(h.attrs.parameters.macroParams[""]={value:e(r)()});let{extensionType:y,extensionKey:E,parameters:b}=h.attrs;if((0,o("eQyFc").isMissingAnyRequiredParameters)(t,{extensionType:y,extensionKey:E,parameters:b})&&h.attrs.parameters?.macroParams&&(h.attrs.parameters.macroParams.isMissingRequiredParameters={value:"true"}),d.replaceSelection(h)&&c){let e=await (0,o("2E7zk").getJiraHostingOption)(t.macroName,h.attrs.parameters?.macroParams?.serverId?.value),a=await u(t.macroName);c({type:"sendTrackEvent",data:{action:"inserted",actionSubject:"macro",actionSubjectId:t.macroName,source:"quick insert menu",attributes:{inputMethod:"configPanel",extensionType:h?.type,appKey:(0,o("2E7zk").getConnectAppKey)(t.moduleKey),isLivePage:p,jiraHostingOption:e,...p&&void 0!==a&&{isSupportedMacro:a},...i(t)}}}).fire()}l?.extension?.actions?.editSelectedExtension(),m?.({macro:t.macroName,isBodiedExtension:(0,o("fgbpl").isBodiedExtension)(h?.type)})},c=(e,t,a,r,n,i,c,u,m,p,f)=>{let{enabled:g,optedOut:h}=t.features.configPanel||{},y=e.anyParameterRequired||e.formDetails.parameters.some(e=>e.required&&null===e.defaultValue),E=g&&!(0,o("eQyFc").shouldUseMacroBrowser)(e,h);return E||y||e.alwaysShowConfig||(0,o("eQyFc").needsToForceConfig)(e)?E?d(e,t,n,r,c,u,m,p,f):l(e,a,r,i,c,u,m,p):s(e,t,n,u,p,f)},u=async e=>{if(!e)return;let t=o("4VJDS").default.getStringList("confluence_frontend_macro_fallback_ui_allowlist",[]);return 0===t.length?void 0:"ALLOW_ALL"===t[0]||t.map(e=>e.trim().toLowerCase()).includes(e.toLowerCase())},m=/^[0-9]+$/,p=async e=>{try{let t=await (0,o("f7B1p").cfetch)("/wiki/rest/jiraanywhere/1.0/servers");return(await t.json()).find(t=>t.id===e)}catch{}},f=e=>{if(e)return e.includes("atlassian.net")||e.includes("jira-dev.com")},g=async(e,t="",a=!1)=>{let r;if("jira"===e){if(a){let e=await p(t);r=f(e?.url)||f(e?.rpcUrl)}else try{let e=window.require("confluence/jim/jira/applinks-bridge-for-spa");r=await e.isCloudAppLinkFromServerId(t)}catch{}return void 0===r?"unknown":r?"cloud":"server"}},h=new Set(["anchor","attachments","calendar","children","contentbylabel","content-report-table","create-from-template","decisionreport","detailssummary","gadget","excerpt","excerpt-include","expand","iframe","include","jira","listlabels","pagetree","pagetreesearch","panel","popular-labels","profile","recently-updated-dashboard","roadmap","spaces","tasks-report-macro","toc","toc-zone","userlister","viewpdf","viewxls"]);t.exports.isPageId=e=>m.test(e),t.exports.getSelectedBodiedExtensionNode=e=>{let t=e?._privateGetEditorView();if(t){let e=t.state.selection.node;if(!e||!(0,o("fgbpl").isBodiedExtension)(e.type.name)){let{$head:a}=t.state.selection;for(let t=a.depth;t>0;t--){let r=a.node(t);(0,o("fgbpl").isBodiedExtension)(r.type.name)&&(e=r)}}return e?.toJSON()}},t.exports.isValueSet=e=>(0===e||!1===e||!!e)&&(!Array.isArray(e)||e.length>0),t.exports.createQuickInsertModule=(e,t,a,r,n,i,s,l,d,u,m)=>{if(e.hidden)return[];let p=(0,o("eQyFc").safeGetMacroName)(e);try{let f=c(e,t,a,r,n,i,s,l,d,u,m);return[{key:p,title:e.title,description:e.description,keywords:[e.macroName,...e.aliases],categories:e.categories,icon:async()=>()=>(0,o("9tVje").getIconComponent)(e),featured:t.features.elementBrowser&&o("8pcS0").allowedMacrosForInsertMenu.includes(p),action:f}]}catch(e){return console.error(e),[]}},t.exports.getConnectAppKey=e=>{if(!e||!e.startsWith("com.atlassian.plugins.atlassian-connect-plugin"))return"";let t=e.split("__");return 3!==t.length?"":t[1]},t.exports.insertMacroPlaceholder=(e,t)=>{e.content=[{type:"paragraph",content:[{type:"placeholder",attrs:{text:t}}]}]},t.exports.insertContentPropertiesMacroPlaceholder=(e,t,a)=>{e.content=[{type:"table",attrs:{isNumberColumnEnabled:!1,layout:"default",localId:(0,o("9Cbhx").getMacroId)(null),width:760},content:[{type:"tableRow",content:[{type:"tableHeader",attrs:{},content:[{type:"paragraph",content:[{type:"placeholder",attrs:{text:t}}]}]},{type:"tableCell",attrs:{background:"#ffffff"},content:[{type:"paragraph",content:[{type:"placeholder",attrs:{text:a}}]}]}]},{type:"tableRow",content:[{type:"tableHeader",attrs:{background:"#f4f5f7"},content:[{type:"paragraph",content:[]}]},{type:"tableCell",attrs:{},content:[{type:"paragraph",content:[]}]}]},{type:"tableRow",content:[{type:"tableHeader",attrs:{background:"#f4f5f7"},content:[{type:"paragraph",content:[]}]},{type:"tableCell",attrs:{},content:[{type:"paragraph",content:[]}]}]}]}]},t.exports.getJiraHostingOption=g,t.exports.filterOutHiddenMacros=(e,t)=>{let a=[],r=new Set(o("4VJDS").default.getStringList("confluence_frontend_hide_selected_macros",[]));for(let n of e){let e=t?.isCompanyHub&&h.has(n?.macroName),o=t?.isLivePage&&r.has(n?.macroName);if(e||o){let e={...n,hidden:!0};a.push(e)}else a.push(n)}return a}}),i("lEnS1",function(e,a){t(e.exports,"default",()=>r);function r(e,t){(0,o("b5utg").default)(1,arguments);var a,r,n=(0,o("egXhZ").default)(e);if(isNaN(n.getTime()))throw RangeError("Invalid time value");var i=String(null!=(a=null==t?void 0:t.format)?a:"extended"),s=String(null!=(r=null==t?void 0:t.representation)?r:"complete");if("extended"!==i&&"basic"!==i)throw RangeError("format must be 'extended' or 'basic'");if("date"!==s&&"time"!==s&&"complete"!==s)throw RangeError("representation must be 'date', 'time', or 'complete'");var l="",d="",c="extended"===i?"-":"";if("time"!==s){var u=(0,o("dWysp").default)(n.getDate(),2),m=(0,o("dWysp").default)(n.getMonth()+1,2),p=(0,o("dWysp").default)(n.getFullYear(),4);l="".concat(p).concat(c).concat(m).concat(c).concat(u)}if("date"!==s){var f=n.getTimezoneOffset();if(0!==f){var g=Math.abs(f),h=(0,o("dWysp").default)(Math.floor(g/60),2),y=(0,o("dWysp").default)(g%60,2);d="".concat(f<0?"+":"-").concat(h,":").concat(y)}else d="Z";var E=(0,o("dWysp").default)(n.getHours(),2),b=(0,o("dWysp").default)(n.getMinutes(),2),v=(0,o("dWysp").default)(n.getSeconds(),2),x=""===l?"":"T",I=[E,b,v].join("extended"===i?":":"");l="".concat(l).concat(x).concat(I).concat(d)}return l}}),i("kTVK2",function(e,t){let a=(0,o("cgtv4").defineMessages)({basicTabLabel:{id:"fabric-extension-lib.recently-updated.tab.basic.label",defaultMessage:"Basic"},displayTabLabel:{id:"fabric-extension-lib.recently-updated.tab.display.label",defaultMessage:"Display"},spaceLabel:{id:"fabric-extension-lib.recently-updated.field.spaces.label",defaultMessage:"Space"},spacePlaceholder:{id:"fabric-extension-lib.recently-updated.field.spaces.placeholder",defaultMessage:"Search and select by name"},typesLabel:{id:"fabric-extension-lib.recently-updated.field.types.label",defaultMessage:"Include in list"},typePlaceholder:{id:"fabric-extension-lib.recently-updated.field.types.placeholder",defaultMessage:"Select one or several"},maxToggleLabel:{id:"fabric-extension-lib.recently-updated.field.maxToggle.label",defaultMessage:"Show all updates"},maxLabel:{id:"fabric-extension-lib.recently-updated.field.max.label",defaultMessage:"Max number of updates"},themeLabel:{id:"fabric-extension-lib.recently-updated.field.theme.label",defaultMessage:"List style"},authorLabel:{id:"fabric-extension-lib.recently-updated.field.author.label",defaultMessage:"Filter by user"},authorPlaceholder:{id:"fabric-extension-lib.recently-updated.field.author.placeholder",defaultMessage:"Search and select user(s)"},labelsLabel:{id:"fabric-extension-lib.recently-updated.field.labels.label",defaultMessage:"Filter by label"},labelsPlaceholder:{id:"fabric-extension-lib.recently-updated.field.labels.placeholder",defaultMessage:"Search and select label(s)"},widthLabel:{id:"fabric-extension-lib.recently-updated.field.width.label",defaultMessage:"List width"},widthPlaceholder:{id:"fabric-extension-lib.recently-updated.field.width.placeholder",defaultMessage:"Select or enter width"},hideHeadingLabel:{id:"fabric-extension-lib.recently-updated.field.hideHeading.label",defaultMessage:"Hide list header"}}),r=(0,o("cgtv4").defineMessages)({allLabel:{id:"fabric-extension-lib.recently-updated.field.types.item.all",defaultMessage:"All"},pageLabel:{id:"fabric-extension-lib.recently-updated.field.types.item.page",defaultMessage:"Pages"},livePageLabel:{id:"fabric-extension-lib.recently-updated.field.types.item.live-page",defaultMessage:"Live docs"},blogPostLabel:{id:"fabric-extension-lib.recently-updated.field.types.item.blogpost",defaultMessage:"Blog posts"},commentLabel:{id:"fabric-extension-lib.recently-updated.field.types.item.comment",defaultMessage:"Comments"},attachmentLabel:{id:"fabric-extension-lib.recently-updated.field.types.item.attachment",defaultMessage:"Attachments"}}),n=(0,o("cgtv4").defineMessages)({conciseLabel:{id:"fabric-extension-lib.recently-updated.field.theme.item.concise",defaultMessage:"Title + user name"},sidebarLabel:{id:"fabric-extension-lib.recently-updated.field.theme.item.sidebar",defaultMessage:"Title"},socialLabel:{id:"fabric-extension-lib.recently-updated.field.theme.item.social",defaultMessage:"User name + profile picture"}}),i=(0,o("cgtv4").defineMessages)({fullLabel:{id:"fabric-extension-lib.recently-updated.field.theme.item.full",defaultMessage:"100% of frame"},threeQuartersLabel:{id:"fabric-extension-lib.recently-updated.field.theme.item.threeQuarters",defaultMessage:"75% of frame"},halfLabel:{id:"fabric-extension-lib.recently-updated.field.theme.item.half",defaultMessage:"50% of frame"},quarterLabel:{id:"fabric-extension-lib.recently-updated.field.theme.item.quarter",defaultMessage:"25% of frame"}});e.exports.i18n=a,e.exports.i18nTypes=r,e.exports.i18nTheme=n,e.exports.i18nWidth=i}),i("gw2T1",function(t,a){var r,n=o("42omo"),i=((r=i||{}).RELEVANCY_SORT="web.item.sorting.scheme.relevancy",r);let s=(0,o("eSUdr").default)`query AllTemplatesQuery($spaceKey:String!$sortingScheme:String!){allTemplates(spaceKey:$spaceKey sortingScheme:$sortingScheme){nodes{name description templateId contentBlueprintId iconURL darkModeIconURL}}}`,l=(0,o("2XqLN").default)(o("2DGtt").requireStyleClassResourcesForTemplates),d=async e=>{let t=await (0,o("hp2SH").getApolloClient)().query({query:s,variables:{spaceKey:e,sortingScheme:"web.item.sorting.scheme.relevancy"}});return t?.data.allTemplates?.nodes},c=async t=>{try{return(await d(t)).map(t=>({label:t.name,description:t.description,icon:e(n).createElement(o("c2cyb").TemplateIcon,{size:"small",template:t}),value:(0,o("10Oe6").getTemplateId)(t)}))}catch(e){return(0,o("5ZqQS").getMonitoringClient)().submitError(Error(`Failed to fetch templates from template resolver in macro config panel with error: ${e}`),{attribution:o("3IBnw").Attribution.PAGE_MODES}),[]}},u=e=>async(t,a)=>e?c(e):[];t.exports.getTemplateResolver=({spaceKey:e})=>(l(),u(e))}),i("2DGtt",function(e,t){e.exports.requireStyleClassResourcesForTemplates=()=>{(0,o("cpjd2").requireLegacyWRM)(["wrc!com.atlassian.plugins.atlassian-connect-plugin:blueprint-css-resources","wrc!com.atlassian.plugins.atlassian-connect-plugin:dynamic-css-resources"],()=>{(0,o("6Ywr0").waitForRequiredModule)({listener:"TemplateList",module:"ac/confluence/style/link-style-css"},()=>{let e=(0,o("19aF3").globalRequire)("ac/confluence/style/link-style-css");e&&"function"==typeof e.addLinkTags&&e.addLinkTags()})},()=>{(0,o("5ZqQS").getMonitoringClient)().submitError(Error("Style classes cannot be initialized when WRM is disabled."),{attribution:o("3IBnw").Attribution.PAGE_MODES})})}}),i("ebUME",function(t,a){var r=o("42omo"),n=o("eS4Za"),i=o("hEeUR"),s=o("5a4cC"),l=o("9m03g"),d=o("3u0dr"),c=o("frIzR"),u=o("jJli4");let m=(0,d.isReactCompilerActiveV1)()?t=>{let a,n,i=(0,c.c)(14),{contentId:s,extensionKey:l,mode:d,node:m,spaceKey:p,appearance:f,showTemplateVariablesInPreview:g,showTemplateInputInPreview:h,Renderer:y,getExtensionHandlers:E}=t;(0,o("3GQl6").mustPreloadWhenRenderingSPA)([o("2w2Hu").MustPreloadLoadableNames.ClassicRendererLoader,o("2w2Hu").MustPreloadLoadableNames.ClassicEditorContextProviderLoader]),i[0]!==y||i[1]!==f||i[2]!==E||i[3]!==h||i[4]!==g||i[5]!==p?(a=t=>{let{targetContentId:a,adf:n,mediaToken:o}=t,i={type:"doc",version:1,content:n},s=E({adf:i,contentId:a,appearance:f,showTemplateInputInPreview:h,showTemplateVariablesInPreview:g});return e(r).createElement(y,{contentId:a,document:i,hasInlineComments:!1,showTemplateInputInPreview:h,showTemplateVariablesInPreview:g,extensionHandlers:s,appearance:f||"default",spaceKey:p,mediaToken:o})},i[0]=y,i[1]=f,i[2]=E,i[3]=h,i[4]=g,i[5]=p,i[6]=a):a=i[6];let b=a;return i[7]!==b||i[8]!==s||i[9]!==l||i[10]!==d||i[11]!==m||i[12]!==p?(n=e(r).createElement(u.ExcerptIncludeLoader,{mode:d,contentId:s,spaceKey:p,extensionKey:l,macroNode:m,RendererWrapper:b,isLegacyRenderer:!1}),i[7]=b,i[8]=s,i[9]=l,i[10]=d,i[11]=m,i[12]=p,i[13]=n):n=i[13],n}:({contentId:t,extensionKey:a,mode:n,node:i,spaceKey:s,appearance:l,showTemplateVariablesInPreview:d,showTemplateInputInPreview:c,Renderer:m,getExtensionHandlers:p})=>{(0,o("3GQl6").mustPreloadWhenRenderingSPA)([o("2w2Hu").MustPreloadLoadableNames.ClassicRendererLoader,o("2w2Hu").MustPreloadLoadableNames.ClassicEditorContextProviderLoader]);let f=(0,r.useMemo)(()=>({targetContentId:t,adf:a,mediaToken:n})=>{let o={type:"doc",version:1,content:a},i=p({adf:o,contentId:t,appearance:l,showTemplateInputInPreview:c,showTemplateVariablesInPreview:d});return e(r).createElement(m,{contentId:t,document:o,hasInlineComments:!1,showTemplateInputInPreview:c,showTemplateVariablesInPreview:d,extensionHandlers:i,appearance:l||"default",spaceKey:s,mediaToken:n})},[p,l,c,d,s,m]);return e(r).createElement(u.ExcerptIncludeLoader,{mode:n,contentId:t,spaceKey:s,extensionKey:a,macroNode:i,RendererWrapper:f,isLegacyRenderer:!1})};var p=o("6v9Za"),f=o("2LCBF"),g=o("hKeSi"),h=o("l7BGZ");let y=(0,d.isReactCompilerActiveV1)()?t=>{let a,n,i=(0,c.c)(4),{macroDefaultProps:s}=t,{node:l}=s;i[0]!==l?(a=(0,o("6mEZ3").extensionToADF)(l),i[0]=l,i[1]=a):a=i[1];let d=a;return i[2]!==d?(n=e(r).createElement(h.LiveSearchLoader,{macroNode:d}),i[2]=d,i[3]=n):n=i[3],n}:({macroDefaultProps:t})=>{let{node:a}=t,n=(0,o("6mEZ3").extensionToADF)(a);return e(r).createElement(h.LiveSearchLoader,{macroNode:n})};var E=o("dwS6P");let b=(0,d.isReactCompilerActiveV1)()?t=>{let a,n=(0,c.c)(5),{macroDefaultProps:o,adf:i,cloudId:s,userId:l}=t;return n[0]!==i||n[1]!==s||n[2]!==o||n[3]!==l?(a=e(r).createElement(E.TableOfContentsLoader,{userId:l,cloudId:s,adf:i,macroDefaultProps:o}),n[0]=i,n[1]=s,n[2]=o,n[3]=l,n[4]=a):a=n[4],a}:({macroDefaultProps:t,adf:a,cloudId:n,userId:o})=>e(r).createElement(E.TableOfContentsLoader,{userId:o,cloudId:n,adf:a,macroDefaultProps:t});var v=o("cYJC5");let x=(0,d.isReactCompilerActiveV1)()?t=>{let a,n=(0,c.c)(5),{macroDefaultProps:o,cloudId:i,userId:s,ssrButtonLabel:l}=t;return n[0]!==i||n[1]!==o||n[2]!==l||n[3]!==s?(a=e(r).createElement(v.CreateFromTemplateLoader,{userId:s,cloudId:i,macroDefaultProps:o,ssrButtonLabel:l}),n[0]=i,n[1]=o,n[2]=l,n[3]=s,n[4]=a):a=n[4],a}:({macroDefaultProps:t,cloudId:a,userId:n,ssrButtonLabel:o})=>e(r).createElement(v.CreateFromTemplateLoader,{userId:n,cloudId:a,macroDefaultProps:t,ssrButtonLabel:o});var I=o("989nU"),w=o("5VmpF");let M=(0,d.isReactCompilerActiveV1)()?function(t){let a,n,i=(0,c.c)(6),{children:s,macroId:l}=t,d=(0,o("e4o8D").useRenderServerPlaceholder)();return i[0]!==l||i[1]!==d?(a=d?{ssrPlaceholder:l}:{ssrPlaceholderReplace:l},i[0]=l,i[1]=d,i[2]=a):a=i[2],i[3]!==s||i[4]!==a?(n=e(r).createElement(w.InlineNodeRendererWrapper,a,s),i[3]=s,i[4]=a,i[5]=n):n=i[5],n}:function({children:t,macroId:a}){let n=(0,o("e4o8D").useRenderServerPlaceholder)();return e(r).createElement(w.InlineNodeRendererWrapper,n?{ssrPlaceholder:a}:{ssrPlaceholderReplace:a},t)},S=({contentId:t})=>(0,n.createMacroExtensionHandler)(a=>{if(!a)return null;let{type:n,extensionKey:i,parameters:s}=a,l=(0,o("5kjCz").getMacroAttributesFromADFNode)(a),d=l?.macroId,c={contentId:t,mode:o("5kjCz").RENDERER,extensionKey:i,attributes:l,node:a},u=null;return i===o("8pcS0").EXTENSION_KEY.INLINE_EXTERNAL_IMAGE&&(u=e(r).createElement(r.Fragment,null,e(r).createElement(o("4KFTW").MacroExperienceStart,{name:(0,o("5kjCz").getExperienceName)(o("5kjCz").RENDERER,a),mode:o("5kjCz").RENDERER,extensionKey:i,attributes:l,timeout:o("aJPUt").ExperienceTimeout.MACRO_LOAD,contentId:t}),e(r).createElement(o("lspPP").RendererActionsContext,null,e(r).createElement(o("fPNzj").InlineExternalImage,{...s,...c})))),e(r).createElement(o("1aGr8").LoadablePlaceholderServer,{placeholderId:`migration-ext-container-${d}`},"inlineExtension"===n?e(r).createElement(M,{macroId:d},u):u)}),_={insertCss:e=>e._insertCss()},C=({adf:e,contentId:t,spaceKey:a,cloudId:r,userId:n,macroRenderedOutput:i,includeSuperbatch:s})=>({[o("8pcS0").EXTENSION_TYPE.MACRO_CORE]:P({adf:e,contentId:t,spaceKey:a,cloudId:r,userId:n,macroRenderedOutput:i,includeSuperbatch:s}),[o("8pcS0").EXTENSION_TYPE.MACRO_WITH_REFERENCES]:T(),[o("8pcS0").EXTENSION_TYPE.MIGRATION]:S({contentId:t}),[o("8pcS0").EXTENSION_TYPE.TEMPLATE]:T()}),T=()=>(0,n.createMacroExtensionHandler)(()=>null),R=({macroDefaultProps:t,extension:a,cloudId:n,contentId:d,userId:c,adf:u})=>({[o("8pcS0").EXTENSION_KEY.TOC]:()=>e(r).createElement(b,{macroDefaultProps:t,adf:u,cloudId:n,userId:c}),[o("8pcS0").EXTENSION_KEY.CREATE_FROM_TEMPLATE]:()=>e(r).createElement(x,{macroDefaultProps:t,cloudId:n,userId:c,ssrButtonLabel:function(){let{buttonLabel:e,createButtonLabel:a}=t.node.parameters.macroParams;return e?.value||a?.value||void 0}()}),[o("8pcS0").EXTENSION_KEY.LIVE_SEARCH]:()=>e(r).createElement(y,{macroDefaultProps:t}),[o("8pcS0").EXTENSION_KEY.DETAILS]:()=>e(r).createElement(g.DetailsExtensionHandler,{...t,Renderer:i.ADFRenderer,isLegacyRenderer:!1,getExtensionHandlers:C}),[o("8pcS0").EXTENSION_KEY.EXPAND]:()=>e(r).createElement(p.ExpandExtensionHandler,{...t,Renderer:i.ADFRenderer,isLegacyRenderer:!1,getExtensionHandlers:C}),[o("8pcS0").EXTENSION_KEY.EXCERPT]:()=>e(r).createElement(f.ExcerptExtensionHandler,{...t,Renderer:i.ADFRenderer,isLegacyRenderer:!1,getExtensionHandlers:C}),[o("8pcS0").EXTENSION_KEY.ANCHOR]:()=>e(r).createElement(o("l86Zj").AnchorExtensionHandler,{...t,isSSR:!0}),[o("8pcS0").EXTENSION_KEY.EXCERPT_INCLUDE]:()=>d?e(r).createElement(m,{...t,Renderer:i.ADFRenderer,getExtensionHandlers:C}):null,[o("8pcS0").EXTENSION_KEY.PROFILE_PICTURE]:()=>e(r).createElement(l.ProfilePictureMacroHandler,{macroDefaultProps:t,macroParams:a?.parameters?.macroParams}),[o("8pcS0").EXTENSION_KEY.PROFILE]:()=>e(r).createElement(s.UserProfileMacroHandler,{macroDefaultProps:t,macroParams:a?.parameters?.macroParams}),[o("8pcS0").EXTENSION_KEY.DETAILS_SUMMARY]:()=>null,[o("8pcS0").EXTENSION_KEY.REDACTED_MACRO_PLACEHOLDER]:()=>null,[o("8pcS0").EXTENSION_KEY.CONFLUENCE_DATABASES]:()=>null}),P=({adf:t,contentId:a,spaceKey:i,cloudId:s,userId:l,includeSuperbatch:d,macroRenderedOutput:c})=>(0,n.createMacroExtensionHandler)(n=>{let{type:u,extensionKey:m}=n,p=n?.parameters?.macroMetadata?.macroId?.value,f={node:n,contentId:a,spaceKey:i,context:_,mode:o("5kjCz").RENDERER,extensionKey:m};d&&d();let g=R({adf:t,userId:l,contentId:a,cloudId:s,extension:n,macroDefaultProps:f})[m],h=(0,o("9wGTI").fg)("content_early_connect_iframe_initialization")||(0,o("6mKj3").expVal)("confluence_frontend_early_webpanel_initialization","isEnabled",!1),y="function"==typeof g?g():e(r).createElement(I.FabricLegacyMacrosServerRenderer,{macroRenderedOutput:c,macroDefaultProps:f,macroOutput:n?.parameters?.macroOutput,renderedByProvider:!h});return e(r).createElement(o("lspPP").RendererActionsContext,null,e(r).createElement(o("1aGr8").LoadablePlaceholderServer,{placeholderId:`legacy-macro-container-${p}`},"inlineExtension"===u?e(r).createElement(M,{macroId:p},y):y))});t.exports.getSsrExtensionHandlers=C}),i("eS4Za",function(t,a){var r=o("42omo"),n=o("j1Ss3"),i=o("4PPzL");t.exports.createMacroExtensionHandler=t=>(a,...s)=>e(r).createElement(i.ErrorBoundary,{attribution:o("3IBnw").Attribution.PAGE_EXTENSIONS},e(r).createElement(n.ApolloProvider,{client:(0,o("hp2SH").getApolloClient)()},e(r).createElement(o("ge2sX").SessionData,null,n=>e(r).createElement(o("f7i8j").SessionDataContext.Provider,{value:n},t(a,s)))))}),i("5a4cC",function(e,t){let a=(0,o("jmjWc").LoadableAfterPaint)({__loadable_id__:"HdoLX",name:"UserProfileMacroHandler",loader:async()=>(await o("ekKnS")).UserProfileMacroRenderer});e.exports.UserProfileMacroHandler=a}),i("ekKnS",function(e,t){let a=o("4mJKd")(5);e.exports=Promise.all([a("6wr18"),a("ffEVr"),a("1a9Rr")]).then(()=>o("7fnEu"))}),i("9m03g",function(e,t){let a=(0,o("jmjWc").LoadableAfterPaint)({__loadable_id__:"9VP6s",name:"ProfilePictureMacroHandler",loader:async()=>(await o("jFLvv")).ProfilePictureMacroRenderer});e.exports.ProfilePictureMacroHandler=a}),i("jFLvv",function(e,t){e.exports=o("4mJKd")(5)("1mjYg").then(()=>o("lhP7Q"))}),i("jJli4",function(e,t){let a=(0,o("jmjWc").LoadablePaint)({__loadable_id__:"8zrD8",name:"ExcerptIncludeLoader",loader:async()=>(await o("j15Bh")).ExcerptInclude,loading:o("f9KPY").ExcerptIncludeComponentShadow});e.exports.ExcerptIncludeLoader=a}),i("f9KPY",function(t,a){var r=o("42omo");class n extends r.PureComponent{render(){let{shouldPanelBeDisplayed:t,targetContentTitle:a}=this.props;return t?e(r).createElement("span",{"data-testid":"excerpt-include-panel",style:o("dhEYL").panel},e(r).createElement("span",{style:o("dhEYL").panelHeader},a||e(r).createElement(o("gtD4K").default,{id:"editor.excerpt.include.panel.title.loading"})),e(r).createElement("span",{style:o("dhEYL").panelBody},e(r).createElement(o("lOkIA").CenteredSpinner,{size:"medium",style:{minHeight:100}}))):e(r).createElement(o("lOkIA").CenteredSpinner,{size:"medium",style:{minHeight:100}})}}t.exports.ExcerptIncludeComponentShadow=n}),i("dhEYL",function(e,t){e.exports.panel={display:"block",borderWidth:"var(--ds-border-width, 1px)",borderRadius:"var(--ds-radius-small, 3px)",borderStyle:"solid",borderColor:"var(--ds-border, #0B120E24)",borderImage:"initial"},e.exports.panelHeader={display:"block",backgroundColor:"var(--ds-background-accent-gray-subtlest, #F0F1F2)",minWidth:"128px",padding:"var(--ds-space-100, 8px)",font:'var(--ds-font-body-large, normal 400 16px/24px ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Ubuntu, "Helvetica Neue", sans-serif)'},e.exports.panelBody={display:"block",minWidth:"128px",borderWidth:"var(--ds-border-width, 1px) 0px 0px 0px",borderStyle:"solid",borderColor:"var(--ds-border, #0B120E24)",padding:"var(--ds-space-100, 8px)"},e.exports.panelHeaderExcerpt={color:"var(--ds-text-subtlest, #6B6E76)",paddingLeft:"var(--ds-space-050, 4px)"}}),i("j15Bh",function(e,t){e.exports=o("4mJKd")(5)("9tNcH").then(()=>o("c6u22"))}),i("l86Zj",function(t,a){var r=o("3u0dr"),n=o("frIzR"),i=o("42omo"),s=o("T1bCI");let l=(0,o("ecnYn").xcss)({position:"relative",display:"inline-block",height:"1em",width:"0"}),d=(0,o("ecnYn").xcss)({position:"absolute"}),c=e=>{let t=e?.parameters?.macroParams?.[""]?.value;return"string"!=typeof t?null:t.replaceAll(/[%"'\s]/g,"")},u=e=>e?.parameters?.macroParams?.legacyAnchorId?.value,m=(0,r.isReactCompilerActiveV1)()?t=>{let a,r,m,p,f,g,h=(0,n.c)(20),{node:y,isSSR:E}=t,b=!!y?.parameters?.macroParams?.hidden?.value;h[0]!==y?(a=c(y),h[0]=y,h[1]=a):a=h[1];let v=a;h[2]!==y?(r=u(y),h[2]=y,h[3]=r):r=h[3];let x=r,{includeTopNav:I}=(0,i.useContext)(o("jxpvN").BannerContext),w=(0,o("2tHI8").useGeneralWebPanelHeight)();h[4]!==v||h[5]!==E?(m=E?{}:{name:v},h[4]=v,h[5]=E,h[6]=m):m=h[6];let M=m;h[7]!==E||h[8]!==x?(p=E?{}:{name:x},h[7]=E,h[8]=x,h[9]=p):p=h[9];let S=p;return h[10]!==M||h[11]!==v||h[12]!==I||h[13]!==b||h[14]!==S||h[15]!==x||h[16]!==w?(f=b?null:e(i).createElement(o("6f0Oj").default,{as:"span",xcss:l},e(i).createElement(s.Subscribe,{to:[o("hrAmX").BannerStateContainer]},t=>{let a=t.getTotalHeight(I)+w,r=(0,o("aFUXX").FULL_PAGE_EDITOR_TOOLBAR_HEIGHT)();return e(i).createElement(e(i).Fragment,null,!!v&&e(i).createElement(o("6f0Oj").default,{as:"a","data-group":"deeplink",testId:"anchor-extension-handler-anchor",xcss:d,style:{bottom:`calc(${a}px + ${r})`},...M}),!!x&&e(i).createElement(o("6f0Oj").default,{as:"a","data-group":"deeplink",testId:"anchor-extension-handler-anchor-legacy",xcss:d,style:{bottom:`calc(${a}px + ${r})`},...S}))})),h[10]=M,h[11]=v,h[12]=I,h[13]=b,h[14]=S,h[15]=x,h[16]=w,h[17]=f):f=h[17],h[18]!==f?(g=e(i).createElement(e(i).Fragment,null,f),h[18]=f,h[19]=g):g=h[19],g}:({node:t,isSSR:a})=>{let r=!!t?.parameters?.macroParams?.hidden?.value,n=c(t),m=u(t),{includeTopNav:p}=(0,i.useContext)(o("jxpvN").BannerContext),f=(0,o("2tHI8").useGeneralWebPanelHeight)(),g=a?{}:{name:n},h=a?{}:{name:m};return e(i).createElement(e(i).Fragment,null,r?null:e(i).createElement(o("6f0Oj").default,{as:"span",xcss:l},e(i).createElement(s.Subscribe,{to:[o("hrAmX").BannerStateContainer]},t=>{let a=t.getTotalHeight(p)+f,r=(0,o("aFUXX").FULL_PAGE_EDITOR_TOOLBAR_HEIGHT)();return e(i).createElement(e(i).Fragment,null,!!n&&e(i).createElement(o("6f0Oj").default,{as:"a","data-group":"deeplink",testId:"anchor-extension-handler-anchor",xcss:d,style:{bottom:`calc(${a}px + ${r})`},...g}),!!m&&e(i).createElement(o("6f0Oj").default,{as:"a","data-group":"deeplink",testId:"anchor-extension-handler-anchor-legacy",xcss:d,style:{bottom:`calc(${a}px + ${r})`},...h}))})))};t.exports.AnchorExtensionHandler=m}),i("2tHI8",function(e,t){var a=o("42omo");e.exports.useGeneralWebPanelHeight=()=>{let[e,t]=(0,a.useState)(()=>"undefined"!=typeof window&&window.__SSR_RENDERED__&&(0,o("6mKj3").expValEquals)("confluence_editor_wrapper_ttvc_fix","isEnabled",!0)?window.__ATL_GENERAL_WEBPANEL_INITIAL_HEIGHT__??0:0);return(0,a.useEffect)(()=>{let e=e=>{if((0,o("6mKj3").expValEquals)("confluence_editor_wrapper_ttvc_fix","isEnabled",!0))t(e?.detail?.height??0);else try{let e=getComputedStyle(document.documentElement).getPropertyValue("--atl-general-webpanel-height"),a=parseInt(e,10);t(!isNaN(a)&&a>=0?a:0)}catch(e){t(0)}};return(0,o("6mKj3").expValEquals)("confluence_editor_wrapper_ttvc_fix","isEnabled",!0)||e(),document.addEventListener("atlGeneralWebPanelHeightUpdated",e),()=>{document.removeEventListener("atlGeneralWebPanelHeightUpdated",e)}},[]),e}}),i("6v9Za",function(t,a){var r=o("3u0dr"),n=o("frIzR"),i=o("42omo");(0,r.isReactCompilerActiveV1)()||(()=>e(i).createElement("div",{style:{padding:"var(--ds-space-100, 8px) var(--ds-space-0, 0px) var(--ds-space-0, 0px) var(--ds-space-200, 16px)"}},e(i).createElement("span",{style:{display:"inline-block",borderRadius:"var(--ds-radius-small, 3px)",backgroundColor:"var(--ds-surface, #FFFFFF)",width:"var(--ds-space-200, 16px)",height:"var(--ds-space-200, 16px)",margin:`var(--ds-space-025, 2px) var(--ds-space-200, 16px) var(--ds-space-025, 2px)
        var(--ds-space-0, 0px)`}}),e(i).createElement("span",{style:{display:"inline-block",borderRadius:"var(--ds-radius-small, 3px)",backgroundColor:"var(--ds-surface, #FFFFFF)",width:120,height:20}})));let s={transition:"opacity 0.5s",height:"auto",opacity:1,paddingLeft:"var(--ds-space-600, 48px)"},l={transition:"0s",height:"var(--ds-space-0, 0px)",opacity:0,overflow:"hidden",paddingLeft:"var(--ds-space-600, 48px)",pointerEvents:"none"},d=(0,r.isReactCompilerActiveV1)()?t=>{let a,r,d,u,m,p,f,g,h,y,E,b,v,x,I,w=(0,n.c)(57),{contentId:M,extensionKey:S,mode:_,node:C,appearance:T,showTemplateVariablesInPreview:R,showTemplateInputInPreview:P,Renderer:A,isLegacyRenderer:N,getExtensionHandlers:k,annotationProvider:L}=t;(0,o("3GQl6").mustPreloadWhenRenderingSPA)([o("2w2Hu").MustPreloadLoadableNames.ClassicRendererLoader]);let[D,F]=(0,i.useState)(!1);w[0]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{F(c)},w[0]=a):a=w[0];let O=a;w[1]!==D?(r=()=>{D&&window.dispatchEvent(new Event("resize"))},d=[D],w[1]=D,w[2]=r,w[3]=d):(r=w[2],d=w[3]),(0,i.useEffect)(r,d),w[4]!==C?(u=(0,o("5kjCz").getMacroAttributesFromADFNode)(C),w[4]=C,w[5]=u):u=w[5];let B=u,V=C?.content;if(w[6]!==A||w[7]!==T||w[8]!==M||w[9]!==k||w[10]!==D||w[11]!==N||w[12]!==C?.parameters?.macroParams?.title||w[13]!==P||w[14]!==R||w[15]!==V){let t,a,r,n,d={type:"doc",version:1,content:V},c=C?.parameters?.macroParams?.title;f=k&&!N?k({adf:d,contentId:M,appearance:T,showTemplateInputInPreview:P,showTemplateVariablesInPreview:R}):void 0,p=i.Fragment;let u=D?"rotate(90deg)":"rotate(0deg)";w[22]!==u?(t={transform:u,transition:"0.2s"},w[22]=u,w[23]=t):t=w[23],w[24]===Symbol.for("react.memo_cache_sentinel")?(a=e(i).createElement(e(o("6R5uz")),{color:"currentColor",spacing:"spacious",label:"",size:"small"}),w[24]=a):a=w[24],w[25]!==t?(r=e(i).createElement("div",{style:t},a),w[25]=t,w[26]=r):r=w[26],w[27]!==c?(n=void 0!==c?c:e(i).createElement(o("gtD4K").default,{id:"content-renderer-extension-handlers.expand-macro.default-title",defaultMessage:"Click here to expand..."}),w[27]=c,w[28]=n):n=w[28],w[29]!==r||w[30]!==n?(y=e(i).createElement(o("eEA8O").default,{appearance:"link",iconBefore:r,onClick:O},n),w[29]=r,w[30]=n,w[31]=y):y=w[31],h=D?s:l,m=A,g=(0,o("6gj4X").convertRendererProps)(N,{contentId:M,document:d}),w[6]=A,w[7]=T,w[8]=M,w[9]=k,w[10]=D,w[11]=N,w[12]=C?.parameters?.macroParams?.title,w[13]=P,w[14]=R,w[15]=V,w[16]=m,w[17]=p,w[18]=f,w[19]=g,w[20]=h,w[21]=y}else m=w[16],p=w[17],f=w[18],g=w[19],h=w[20],y=w[21];let j=!!L;return w[32]!==m||w[33]!==L||w[34]!==f||w[35]!==P||w[36]!==R||w[37]!==g||w[38]!==j?(E=e(i).createElement(m,{...g,extensionHandlers:f,showTemplateInputInPreview:P,showTemplateVariablesInPreview:R,annotationProvider:L,allowAnnotations:j}),w[32]=m,w[33]=L,w[34]=f,w[35]=P,w[36]=R,w[37]=g,w[38]=j,w[39]=E):E=w[39],w[40]!==E||w[41]!==h?(b=e(i).createElement("div",{style:h},E),w[40]=E,w[41]=h,w[42]=b):b=w[42],w[43]!==_||w[44]!==C?(v=(0,o("5kjCz").getExperienceName)(_,C),w[43]=_,w[44]=C,w[45]=v):v=w[45],w[46]!==B||w[47]!==M||w[48]!==S||w[49]!==_||w[50]!==v?(x=e(i).createElement(o("bX5uj").MacroExperienceSuccess,{name:v,contentId:M,extensionKey:S,mode:_,attributes:B}),w[46]=B,w[47]=M,w[48]=S,w[49]=_,w[50]=v,w[51]=x):x=w[51],w[52]!==p||w[53]!==b||w[54]!==x||w[55]!==y?(I=e(i).createElement(p,null,y,b,x),w[52]=p,w[53]=b,w[54]=x,w[55]=y,w[56]=I):I=w[56],I}:({contentId:t,extensionKey:a,mode:r,node:n,appearance:d,showTemplateVariablesInPreview:c,showTemplateInputInPreview:u,Renderer:m,isLegacyRenderer:p,getExtensionHandlers:f,annotationProvider:g})=>{(0,o("3GQl6").mustPreloadWhenRenderingSPA)([o("2w2Hu").MustPreloadLoadableNames.ClassicRendererLoader]);let[h,y]=(0,i.useState)(!1),E=(0,i.useCallback)(()=>{y(e=>!e)},[]);(0,i.useEffect)(()=>{h&&window.dispatchEvent(new Event("resize"))},[h]);let b=(0,o("5kjCz").getMacroAttributesFromADFNode)(n),v={type:"doc",version:1,content:n?.content},x=n?.parameters?.macroParams?.title,I=f&&!p?f({adf:v,contentId:t,appearance:d,showTemplateInputInPreview:u,showTemplateVariablesInPreview:c}):void 0;return e(i).createElement(i.Fragment,null,e(i).createElement(o("eEA8O").default,{appearance:"link",iconBefore:e(i).createElement("div",{style:{transform:h?"rotate(90deg)":"rotate(0deg)",transition:"0.2s"}},e(i).createElement(e(o("6R5uz")),{color:"currentColor",spacing:"spacious",label:"",size:"small"})),onClick:E},void 0!==x?x:e(i).createElement(o("gtD4K").default,{id:"content-renderer-extension-handlers.expand-macro.default-title",defaultMessage:"Click here to expand..."})),e(i).createElement("div",{style:h?s:l},e(i).createElement(m,{...(0,o("6gj4X").convertRendererProps)(p,{contentId:t,document:v}),extensionHandlers:I,showTemplateInputInPreview:u,showTemplateVariablesInPreview:c,annotationProvider:g,allowAnnotations:!!g})),e(i).createElement(o("bX5uj").MacroExperienceSuccess,{name:(0,o("5kjCz").getExperienceName)(r,n),contentId:t,extensionKey:a,mode:r,attributes:b}))};function c(e){return!e}t.exports.ExpandExtensionHandler=d}),i("2LCBF",function(t,a){var r=o("3u0dr"),n=o("frIzR"),i=o("42omo"),s=o("iu6m9"),l=o("4PPzL");let d=(0,r.isReactCompilerActiveV1)()?t=>{let a,r,l,d,c,u,m,p=(0,n.c)(23),{contentId:f,extensionKey:g,mode:h,node:y,spaceKey:E,appearance:b,showTemplateVariablesInPreview:v,showTemplateInputInPreview:x,Renderer:I,isLegacyRenderer:w,getExtensionHandlers:M,mediaToken:S,annotationProvider:_}=t;(0,o("3GQl6").mustPreloadWhenRenderingSPA)([o("2w2Hu").MustPreloadLoadableNames.ClassicRendererLoader]);let C=(0,o("e4o8D").useRenderServerPlaceholder)(),T=y?.parameters?.macroParams?.hidden?.value;p[0]!==y?(a=(0,o("5kjCz").getMacroAttributesFromADFNode)(y),p[0]=y,p[1]=a):a=p[1];let R=a,P={type:"doc",version:1,content:y?.content};p[2]!==f?(r={contentId:f},p[2]=f,p[3]=r):r=p[3];let{mode:A}=(0,o("gGHFp").useEditorContentModeValue)(r),N=(0,o("6mKj3").expValEquals)("confluence_compact_text_format","isEnabled",!0)||(0,o("6mKj3").expValEquals)("cc_editor_ai_content_mode","variant","test")&&(0,o("9wGTI").fg)("platform_editor_content_mode_button_mvp"),k=M&&!w?M({adf:P,contentId:f,appearance:b,showTemplateInputInPreview:x,showTemplateVariablesInPreview:v}):void 0;p[4]!==y?(l=(0,o("6gj4X").getMacroId)(y),p[4]=y,p[5]=l):l=p[5];let L=l;p[6]!==L||p[7]!==C?(d=C?{"data-ssr-placeholder":L}:{"data-ssr-placeholder-replace":L},p[6]=L,p[7]=C,p[8]=d):d=p[8];let D="false"!==T&&T?null:e(i).createElement(I,{...(0,o("6gj4X").convertRendererProps)(w,{contentId:f,document:P}),spaceKey:E,appearance:b||"default",contentMode:N?A:void 0,allowStickyHeaders:!1,extensionHandlers:k,showTemplateInputInPreview:x,showTemplateVariablesInPreview:v,mediaToken:S,annotationProvider:_,allowAnnotations:!!_,...(0,s.editorExperiment)("comment_on_bodied_extensions",!0)?{allowInlineComments:!0}:{}});return p[9]!==h||p[10]!==y?(c=(0,o("5kjCz").getExperienceName)(h,y),p[9]=h,p[10]=y,p[11]=c):c=p[11],p[12]!==R||p[13]!==f||p[14]!==g||p[15]!==h||p[16]!==c?(u=e(i).createElement(o("bX5uj").MacroExperienceSuccess,{name:c,extensionKey:g,mode:h,attributes:R,contentId:f}),p[12]=R,p[13]=f,p[14]=g,p[15]=h,p[16]=c,p[17]=u):u=p[17],p[18]!==L||p[19]!==d||p[20]!==D||p[21]!==u?(m=e(i).createElement("div",{"data-fabric-macro":L,"data-vc":"excerpt-macro",...d},D,u),p[18]=L,p[19]=d,p[20]=D,p[21]=u,p[22]=m):m=p[22],m}:({contentId:t,extensionKey:a,mode:r,node:n,spaceKey:l,appearance:d,showTemplateVariablesInPreview:c,showTemplateInputInPreview:u,Renderer:m,isLegacyRenderer:p,getExtensionHandlers:f,mediaToken:g,annotationProvider:h})=>{(0,o("3GQl6").mustPreloadWhenRenderingSPA)([o("2w2Hu").MustPreloadLoadableNames.ClassicRendererLoader]);let y=(0,o("e4o8D").useRenderServerPlaceholder)(),E=n?.parameters?.macroParams?.hidden?.value,b=(0,o("5kjCz").getMacroAttributesFromADFNode)(n),v={type:"doc",version:1,content:n?.content},{mode:x}=(0,o("gGHFp").useEditorContentModeValue)({contentId:t}),I=(0,o("6mKj3").expValEquals)("confluence_compact_text_format","isEnabled",!0)||(0,o("6mKj3").expValEquals)("cc_editor_ai_content_mode","variant","test")&&(0,o("9wGTI").fg)("platform_editor_content_mode_button_mvp"),w=f&&!p?f({adf:v,contentId:t,appearance:d,showTemplateInputInPreview:u,showTemplateVariablesInPreview:c}):void 0,M=(0,o("6gj4X").getMacroId)(n);return e(i).createElement("div",{"data-fabric-macro":M,"data-vc":"excerpt-macro",...y?{"data-ssr-placeholder":M}:{"data-ssr-placeholder-replace":M}},"false"!==E&&E?null:e(i).createElement(m,{...(0,o("6gj4X").convertRendererProps)(p,{contentId:t,document:v}),spaceKey:l,appearance:d||"default",contentMode:I?x:void 0,allowStickyHeaders:!1,extensionHandlers:w,showTemplateInputInPreview:u,showTemplateVariablesInPreview:c,mediaToken:g,annotationProvider:h,allowAnnotations:!!h,...(0,s.editorExperiment)("comment_on_bodied_extensions",!0)?{allowInlineComments:!0}:{}}),e(i).createElement(o("bX5uj").MacroExperienceSuccess,{name:(0,o("5kjCz").getExperienceName)(r,n),extensionKey:a,mode:r,attributes:b,contentId:t}))},c=(0,r.isReactCompilerActiveV1)()?t=>{let a,r=(0,n.c)(2);return r[0]!==t?(a=e(i).createElement(l.ErrorBoundary,{attribution:o("3IBnw").Attribution.PAGE_EXTENSIONS},e(i).createElement(d,t)),r[0]=t,r[1]=a):a=r[1],a}:t=>e(i).createElement(l.ErrorBoundary,{attribution:o("3IBnw").Attribution.PAGE_EXTENSIONS},e(i).createElement(d,t));t.exports.ExcerptExtensionHandler=c}),i("hKeSi",function(t,a){var r=o("3u0dr"),n=o("frIzR"),i=o("42omo"),s=o("iu6m9");let l=(0,r.isReactCompilerActiveV1)()?t=>{let a,r,l,d,c,u,m,p=(0,n.c)(23),{contentId:f,extensionKey:g,mode:h,node:y,spaceKey:E,appearance:b,showTemplateVariablesInPreview:v,showTemplateInputInPreview:x,Renderer:I,isLegacyRenderer:w,getExtensionHandlers:M,annotationProvider:S}=t;(0,o("3GQl6").mustPreloadWhenRenderingSPA)([o("2w2Hu").MustPreloadLoadableNames.ClassicRendererLoader]);let _=(0,o("e4o8D").useRenderServerPlaceholder)(),C=!!y?.parameters?.macroParams?.hidden?.value;p[0]!==y?(a=(0,o("5kjCz").getMacroAttributesFromADFNode)(y),p[0]=y,p[1]=a):a=p[1];let T=a,R={type:"doc",version:1,content:y?.content};p[2]!==f?(r={contentId:f},p[2]=f,p[3]=r):r=p[3];let{mode:P}=(0,o("gGHFp").useEditorContentModeValue)(r),A=(0,o("6mKj3").expValEquals)("confluence_compact_text_format","isEnabled",!0)||(0,o("6mKj3").expValEquals)("cc_editor_ai_content_mode","variant","test")&&(0,o("9wGTI").fg)("platform_editor_content_mode_button_mvp"),N=M&&!w?M({adf:R,contentId:f,appearance:b,showTemplateInputInPreview:x,showTemplateVariablesInPreview:v}):void 0;p[4]!==y?(l=(0,o("6gj4X").getMacroId)(y),p[4]=y,p[5]=l):l=p[5];let k=l;p[6]!==k||p[7]!==_?(d=(0,o("9wGTI").fg)("confluence_frontend_exclude_page_properties_vc")?_?{"data-ssr-placeholder":k}:{"data-ssr-placeholder-replace":k}:{},p[6]=k,p[7]=_,p[8]=d):d=p[8];let L=C?null:e(i).createElement(I,{...(0,o("6gj4X").convertRendererProps)(w,{contentId:f,document:R}),showTemplateInputInPreview:x,showTemplateVariablesInPreview:v,extensionHandlers:N,appearance:b||"default",contentMode:A?P:void 0,spaceKey:E,UNSTABLE_allowTableResizing:!1,annotationProvider:S,allowAnnotations:!!S,...(0,s.editorExperiment)("comment_on_bodied_extensions",!0)?{allowInlineComments:!0}:{}});return p[9]!==h||p[10]!==y?(c=(0,o("5kjCz").getExperienceName)(h,y),p[9]=h,p[10]=y,p[11]=c):c=p[11],p[12]!==T||p[13]!==f||p[14]!==g||p[15]!==h||p[16]!==c?(u=e(i).createElement(o("bX5uj").MacroExperienceSuccess,{name:c,extensionKey:g,mode:h,attributes:T,contentId:f}),p[12]=T,p[13]=f,p[14]=g,p[15]=h,p[16]=c,p[17]=u):u=p[17],p[18]!==k||p[19]!==d||p[20]!==L||p[21]!==u?(m=e(i).createElement("div",{"data-fabric-macro":k,"data-vc":"page-properties-macro",...d},L,u),p[18]=k,p[19]=d,p[20]=L,p[21]=u,p[22]=m):m=p[22],m}:({contentId:t,extensionKey:a,mode:r,node:n,spaceKey:l,appearance:d,showTemplateVariablesInPreview:c,showTemplateInputInPreview:u,Renderer:m,isLegacyRenderer:p,getExtensionHandlers:f,annotationProvider:g})=>{(0,o("3GQl6").mustPreloadWhenRenderingSPA)([o("2w2Hu").MustPreloadLoadableNames.ClassicRendererLoader]);let h=(0,o("e4o8D").useRenderServerPlaceholder)(),y=!!n?.parameters?.macroParams?.hidden?.value,E=(0,o("5kjCz").getMacroAttributesFromADFNode)(n),b={type:"doc",version:1,content:n?.content},{mode:v}=(0,o("gGHFp").useEditorContentModeValue)({contentId:t}),x=(0,o("6mKj3").expValEquals)("confluence_compact_text_format","isEnabled",!0)||(0,o("6mKj3").expValEquals)("cc_editor_ai_content_mode","variant","test")&&(0,o("9wGTI").fg)("platform_editor_content_mode_button_mvp"),I=f&&!p?f({adf:b,contentId:t,appearance:d,showTemplateInputInPreview:u,showTemplateVariablesInPreview:c}):void 0,w=(0,o("6gj4X").getMacroId)(n);return e(i).createElement("div",{"data-fabric-macro":w,"data-vc":"page-properties-macro",...(0,o("9wGTI").fg)("confluence_frontend_exclude_page_properties_vc")?h?{"data-ssr-placeholder":w}:{"data-ssr-placeholder-replace":w}:{}},y?null:e(i).createElement(m,{...(0,o("6gj4X").convertRendererProps)(p,{contentId:t,document:b}),showTemplateInputInPreview:u,showTemplateVariablesInPreview:c,extensionHandlers:I,appearance:d||"default",contentMode:x?v:void 0,spaceKey:l,UNSTABLE_allowTableResizing:!1,annotationProvider:g,allowAnnotations:!!g,...(0,s.editorExperiment)("comment_on_bodied_extensions",!0)?{allowInlineComments:!0}:{}}),e(i).createElement(o("bX5uj").MacroExperienceSuccess,{name:(0,o("5kjCz").getExperienceName)(r,n),extensionKey:a,mode:r,attributes:E,contentId:t}))};t.exports.DetailsExtensionHandler=l}),i("l7BGZ",function(e,t){let a=(0,o("jmjWc").LoadablePaint)({__loadable_id__:"Qw8xt",name:"LiveSearchLoader",loader:async()=>(await o("3nXAJ")).LiveSearch}),r=(0,o("jmjWc").LoadableAfterPaint)({__loadable_id__:"cgOQy",name:"LazyLiveSearchLoader",loader:async()=>(await o("3nXAJ")).LiveSearch});e.exports.LiveSearchLoader=a,e.exports.LazyLiveSearchLoader=r}),i("3nXAJ",function(e,t){let a=o("4mJKd")(5);e.exports=Promise.all([a("hIzQl"),a("8059b"),a("6wr18"),a("kjZZD"),a("ffEVr"),a("2IX0x")]).then(()=>o("jF1MT"))}),i("cYJC5",function(e,t){let a=(0,o("jmjWc").LoadablePaint)({__loadable_id__:"BS09z",name:"CreateFromTemplateLoader",loader:async()=>(await o("bZM0Q")).CreateFromTemplate}),r=(0,o("jmjWc").LoadableAfterPaint)({__loadable_id__:"ikblw",name:"LazyCreateFromTemplateLoader",loader:async()=>(await o("bZM0Q")).CreateFromTemplate});e.exports.CreateFromTemplateLoader=a,e.exports.LazyCreateFromTemplateLoader=r}),i("bZM0Q",function(e,t){let a=o("4mJKd")(5);e.exports=Promise.all([a("9VvWo"),a("b1vDf")]).then(()=>o("6JR3B"))}),i("fPNzj",function(t,a){var r=o("42omo");t.exports.InlineExternalImage=({width:t="auto",height:a="auto",src:n,mode:i,node:s,contentId:l})=>{let d=t=>{let a=(0,o("5kjCz").getMacroAttributesFromADFNode)(s);return e(r).createElement(o("hUS75").MacroExperienceStop,{name:(0,o("5kjCz").getExperienceName)(i,s),contentId:l,mode:i,error:t,attributes:a,source:"InlineExternalImage"})};return e(r).createElement("img",{style:{cursor:"move"},"data-testid":"external-image",width:t,height:a,src:n,onError:d,onLoad:d})}}),i("5LTS4",function(t,a){var r=o("42omo");let n=(0,o("lSOAM").createConcurrentCustomMetric)({key:o("fd6g2").LEGACY_EXTENSION_LOADING_CUSTOM_KEY}),i="none",s=e=>e?.startsWith("blocklist")?"ssr-blocked":i,l=e=>{if(!e)return!1;let t=e.getBoundingClientRect();return t.top>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)},d=e=>performance&&"function"==typeof performance.getEntriesByName?performance.getEntriesByName(e):[];t.exports.ExtensionLoadingComplete=({node:t,contentId:a,extensionKey:c})=>{let[{routeName:u}]=(0,o("ep3mz").usePageState)(),{localId:m}=t,p=t.parameters?.macroMetadata?.macroId?.value,f=o("4VJDS").default.getString("confluence-extensions-server-render-blocklist",""),g=(0,r.useRef)(null),{extensionIndex:h,isUnsupportedExtension:y}=(0,o("h8C1D").useExtensionIndex)(p),E=h===o("h8C1D").UNKNOWN_INDEX||h>=10;return(0,r.useEffect)(()=>{if(E||!(0,o("6VdZc").isInitial)())return;let e=(0,o("6VdZc").isInitial)()?d("rendererRendered.end")?.pop()?.startTime:d("browser-metric:tti")?.pop()?.duration,t=(0,o("6VdZc").isInitial)()?d("CFP-63.ssr-ttr")?.pop()?.startTime:e,r=d("browser-metric.start")?.pop()?.startTime,u=(0,o("4JC0x").getPreloadFailures)(p)||"",f=(0,o("4JC0x").getGeneralFailures)()||"",b=(0,o("6VdZc").isInitial)()?(0,o("kksmx").getExtensionSSRMark)(p)||s(u):i,v=((0,o("6VdZc").isInitial)()?t:r)??0,x={isExtensionSSRed:b,extensionIndex:h,extensionKey:c,contentId:a,pageFMP:t??0,pageTTI:e??0,isATF:l(g.current),ssrPreloadFailure:y?"unsupportedContentInternalExtension":u||f,clientRouteStart:r??0,hydratable:window?.__HYDRATABLE__||!1,hydrationFailed:window?.__HYDRATION_FAILED__||!1},I=n(`${c}.${a}.${m}`);I.start({startTime:v}),I.stop({customData:x})},[E,f,c,h,y,u,m,a,p]),e(r).createElement("span",{ref:g})}}),i("h8C1D",function(t,a){var r=o("42omo");let n=e(r).createContext({indexes:new Map}),i=e=>(0,o("lcuos").filter)(e,e=>o("8pcS0").supportedExtensions.has(e.type)),s="UNKNOWN";t.exports.UNKNOWN_INDEX=s,t.exports.ExtrensionIndexProvider=({document:t,children:a})=>{let o=(0,r.useMemo)(()=>new Map(i(t).map((e,t)=>(window.unsupportedExtension=window.unsupportedExtension||{},e.attrs?.parameters?.nestedContent?.content&&"__confluenceADFMigrationUnsupportedContentInternalExtension__"===e.attrs.extensionKey&&e.attrs.parameters.nestedContent.content.forEach(e=>{window.unsupportedExtension[e.attrs?.parameters?.macroMetadata?.macroId?.value]=t}),[e.attrs?.parameters?.macroMetadata?.macroId?.value,t]))),[t]),s=(0,r.useMemo)(()=>({indexes:o}),[o]);return e(r).createElement(n.Provider,{value:s},a)},t.exports.useExtensionIndex=e=>{let{indexes:t}=(0,r.useContext)(n),a=t.get(e),o=window.unsupportedExtension,i=!1;return o&&o[e]&&(a=o[e],i=!0),{extensionIndex:"number"==typeof a?a:s,isUnsupportedExtension:i}}}),i("3Btfb",function(t,a){var r=o("3u0dr"),n=o("frIzR"),i=o("42omo");t.exports.withNavigationPolicy=function(t){let a=(0,r.isReactCompilerActiveV1)()?function(a){let r,s=(0,n.c)(3),l=(0,o("4o1RV").useNavigationPolicy)();return s[0]!==l||s[1]!==a?(r=e(i).createElement(t,{...a,navigationPolicy:l}),s[0]=l,s[1]=a,s[2]=r):r=s[2],r}:function(a){let r=(0,o("4o1RV").useNavigationPolicy)();return e(i).createElement(t,{...a,navigationPolicy:r})};return a.displayName=`withNavigationPolicy(${t.displayName||t.name})`,a}}),i("giS6h",function(t,a){let r=e(o("42omo")).createContext({});t.exports.ClassicEditorContext=r}),i("aQw7y",function(e,t){var a=o("42omo");e.exports.useShouldHideOverlay=(e,t)=>{let r=(0,o("3jwuS").useIsCurrentPageLive)(),n=(0,a.useMemo)(()=>{let a=o("4VJDS").default.getStringList("confluence_frontend_extension_overlay_removal_list",[]);return!!e&&0!==a.length&&(!("ALLOW_ALL"!==a[0]&&!r&&((0,o("j0gZR").is1PMacro)(e)||t))||a.map(e=>e.trim().toLowerCase()).includes(e.toLowerCase()))},[e,r,t]),i=(0,a.useMemo)(()=>{if(!e)return!1;if(!(0,o("j0gZR").is1PMacro)(e)&&!t||r)return!0;let a=o("4VJDS").default.getStringList("confluence_frontend_extension_overlay_removal_list",[]);return 0!==a.length&&("ALLOW_ALL"===a[0]||a.map(e=>e.trim().toLowerCase()).includes(e.toLowerCase()))},[e,r,t]);return(0,o("9wGTI").fg)("confluence_macro_overlay_2p_logic_change")?i:n}}),i("8Ij3v",function(t,a){var r=o("42omo"),n=o("hXzKU");let i=({pageId:e,isArchived:t,setSelectionProps:a,updateDocument:n,onCommentButtonMount:o})=>(0,r.memo)(i=>{let{range:s,draftRange:l,wrapperDOM:d,isAnnotationAllowed:c,onCreate:u,onClose:m,applyDraftMode:p,removeDraftMode:f,inlineNodeTypes:g}=i;return(0,r.useEffect)(()=>{a({pageId:e,isArchived:t,updateDocument:n,range:s,draftRange:l,wrapperDOM:d,isAnnotationAllowed:c,onCreate:u,onClose:m,applyDraftMode:p,removeDraftMode:f,inlineNodeTypes:g,onCommentButtonMount:o})},[s,l,d]),null});var s=o("cMvMc");let l=({pageId:e,updateDocument:t,setViewProps:a,isArchived:n,annotations:i,clickElementTarget:l,deleteAnnotation:d,getInlineNodeTypes:c})=>{let u=(0,r.useContext)(o("1kHsc").ExperienceTrackerContext),{hasContentChanged:m}=(0,o("bSvtO").useCommentsContentState)(),{resetContentChanged:p}=(0,o("bSvtO").useCommentsContentActions)(),{showModal:f}=(0,o("8aF6s").useDialogs)(),{newlyCreatedAnnotationId:g,storedCommentData:h}=(0,o("cZa7r").useAnnotations)(),{handleClose:y,setNewlyCreatedAnnotationId:E,clearStoredCommentData:b}=(0,o("cZa7r").useAnnotationsDispatch)();return(0,r.useEffect)(()=>{if(h){let e=i?.[0]?.id,t=h?.location?.inlineMarkerRef;e&&t&&e!==t&&b()}},[i,h,b]),(0,r.useEffect)(()=>{let r=!!(i.length&&l),h=()=>{void 0!==n&&a({pageId:e,updateDocument:t,isArchived:n,annotations:i,clickElementTarget:l,deleteAnnotation:d,wasHighlightClicked:r,getInlineNodeTypes:c}),i.length&&i[0].id===g&&(E(void 0),u.succeed({name:o("irVI7").ADD_INLINE_COMMENT_PUBLISH_EXPERIENCE}))};if(m&&r&&!(0,o("9wGTI").fg)("platform_editor_comments_api_manager")){let e=!1;if((0,o("9wGTI").fg)("confluence_frontend_view_inline_comment_keyboard")){let t=u.getExperienceState(o("irVI7").VIEW_INLINE_COMMENT_EXPERIENCE);null!==t&&t?.hasStopped===!1&&t?.attributes?.entryPoint==="comments-shortcuts/ViewCommentShortcutListener"&&(u.abort({name:o("irVI7").VIEW_INLINE_COMMENT_EXPERIENCE,reason:"Comment warning dialog displayed",checkForTimeout:!0,publishDebugPoints:!0,attributes:{stopPoint:"annotation-provider-inline-comments/renderer/ViewManager"}}),e=!0)}f(s.CommentWarningDialog,{onConfirm:()=>{e&&(u.start({name:o("irVI7").VIEW_INLINE_COMMENT_EXPERIENCE,timeout:o("aJPUt").ExperienceTimeout.VIEW_INLINE_COMMENT,attributes:{...(0,o("gtj7V").getCommentsDataManagerExperimentAttributes)(),annotationId:i.length&&i[0].id,entryPoint:"annotation-provider-inline-comments/renderer/ViewManager",pageClass:"renderer"}}),u.attachDebugPoint({name:o("irVI7").VIEW_INLINE_COMMENT_EXPERIENCE,message:"Restarting experience after comment was discarded from comment warning dialog. Initial entrypoint: comments-shortcuts/ViewCommentShortcutListener"})),p(),y(),h()}})}else h()},[i,l]),null},d=({pageId:t,updateDocument:a,setViewProps:n,isArchived:o})=>(0,r.memo)(i=>e(r).createElement(l,{pageId:t,updateDocument:a,setViewProps:n,isArchived:o,...i})),c=({pageId:e,updateDocument:t,isArchived:a,setHoverProps:n,onCommentButtonMount:o})=>(0,r.memo)(i=>{let{range:s,isWithinRange:l,wrapperDOM:d,isAnnotationAllowed:c,onCreate:u,onClose:m,applyDraftMode:p,removeDraftMode:f}=i,g=(0,r.useCallback)(()=>{m(),n(null)},[m]);return(0,r.useEffect)(()=>{n({pageId:e,updateDocument:t,isArchived:a,range:s,wrapperDOM:d,isAnnotationAllowed:c,onCreate:u,onClose:g,applyDraftMode:p,removeDraftMode:f,isWithinRange:l,onCommentButtonMount:o})},[s,d,l]),null}),u=({pageId:e,validAnnotationsCallback:t,triggerAnalyticsEvent:a,setSelectionProps:r,setViewProps:s,updateDocument:l,isArchived:u,setHoverProps:m,isHighlightOptionPanelEnabled:p})=>{let f=(0,o("gczDe").getRendererAnnotationEventEmitter)();return f?.off||(f=void 0),{selectionComponent:p?i({pageId:e,updateDocument:l,isArchived:u,setSelectionProps:r,onCommentButtonMount:()=>n.LazyCommentEditor.preload()}):void 0,viewComponent:d({pageId:e,updateDocument:l,isArchived:u,setViewProps:s}),hoverComponent:c({pageId:e,updateDocument:l,isArchived:u,setHoverProps:m,onCommentButtonMount:()=>n.LazyCommentEditor.preload()}),getState:(r,n)=>(0,o("kDIns").getRendererAnnotationStates)({annotations:r,pageId:e,validAnnotationsCallback:t,triggerAnalyticsEvent:a,isNestedRender:n}),updateSubscriber:f,disallowOnWhitespace:!0,isToolbarAbove:!0,allowDraftMode:!0,allowCommentsOnMedia:!0}};var m=o("j1Ss3");let p=()=>{let{userId:e}=(0,o("bQm3c").useSessionData)(),{data:t,loading:a,error:n}=(0,m.useQuery)((0,o("eSUdr").default)`query useIsHighlightOptionPanelEnabledQuery{userPreferences{highlightOptionPanelEnabled}}`,{fetchPolicy:"cache-and-network",skip:!e});return(0,r.useMemo)(()=>{let e=!0;return n&&(0,o("7Sm4c").markErrorAsHandled)(n),!a&&t?.userPreferences&&(e=t?.userPreferences.highlightOptionPanelEnabled),{isHighlightOptionPanelEnabled:e}},[t,a,n])};t.exports.useRendererAnnotationProviderOptions=({pageId:e,validAnnotationsCallback:t,triggerAnalyticsEvent:a,updateDocument:n,isArchived:i})=>{let{setSelectionProps:s,setViewProps:l,setHoverProps:d}=(0,o("cZa7r").useAnnotationsDispatch)(),{isHighlightOptionPanelEnabled:c}=p(),m=(0,o("cZa7r").useAnnotationManager)();return(0,r.useMemo)(()=>({inlineComment:u({pageId:e,validAnnotationsCallback:t,triggerAnalyticsEvent:a,setSelectionProps:s,setHoverProps:d,setViewProps:l,updateDocument:n,isArchived:i,isHighlightOptionPanelEnabled:c}),annotationManager:m}),[e,t,a,s,d,l,n,i,c,m])}}),i("gHCIk",function(e,t){let a=(e,t)=>null===t||"object"!=typeof t||t instanceof Array?t:Object.keys(t).sort().reduce((e,a)=>(e[a]=t[a],e),{});e.exports.serializeExtensionADF=e=>JSON.stringify(e,a)}),i("1bl0g",function(t,a){var r=o("4tb0i"),n=o("lEgye");class i{emit(e,t){this.dataSourceProvider.createOrUpdate(e,t)}constructor(e){this.dataSourceProvider=void 0,this.dataSourceProvider=e}}var s=o("l998X");o("42omo");var l=o("gjBRE"),d=o("42omo"),c=o("fPlBD");let u=({editorView:t,node:a,dataSourceProvider:r})=>{let n=a.marks?.find(e=>e.type===t.state.schema.marks?.dataConsumer)?.attrs?.sources?.[0],[o,i]=e(d).useState(()=>{let e=r?.get(n);if(e)return e});return e(d).useEffect(()=>(r?.unsubscribe(n,i),r?.subscribe(n,i),()=>r?.unsubscribe(n,i)),[r,n]),o?[o]:[]};var m=e=>{let t=u(e);return(0,s.jsx)(c.Extension,{...e,references:t})};class p extends l.ExtensionNode{render(e,t){return(0,s.jsx)(o("3oRlx").ExtensionNodeWrapper,{nodeType:this.node.type.name,macroInteractionDesignFeatureFlags:e.macroInteractionDesignFeatureFlags,children:(0,s.jsx)(m,{editorAppearance:e.extensionNodeViewOptions.appearance,editorView:this.view,node:this.node,getPos:this.getPos,providerFactory:e.providerFactory,handleContentDOMRef:t,extensionHandlers:e.extensionHandlers,dataSourceProvider:e.dataSourceProvider,pluginInjectionApi:e.pluginInjectionApi,macroInteractionDesignFeatureFlags:e.macroInteractionDesignFeatureFlags,showLivePagesBodiedMacrosRendererView:e.showLivePagesBodiedMacrosRendererView,showUpdatedLivePages1PBodiedExtensionUI:e.showUpdatedLivePages1PBodiedExtensionUI,rendererExtensionHandlers:e.rendererExtensionHandlers})})}}function f(e,t,a,n,o,i,s,l,d,c){return(u,m,f)=>{let g=(0,r.getPluginState)(m.state);return new p(u,m,f,e,t,{providerFactory:a,extensionHandlers:n,extensionNodeViewOptions:o,dataSourceProvider:g?.dataSourceProvider,pluginInjectionApi:i,macroInteractionDesignFeatureFlags:s,showLivePagesBodiedMacrosRendererView:l,showUpdatedLivePages1PBodiedExtensionUI:d,rendererExtensionHandlers:c}).init()}}var g=o("gcCrc"),h=o("8m4tT"),y=o("9oPnF");let E=e=>{let{table:t,extension:a,bodiedExtension:r,inlineExtension:n}=e.nodes;return[t,a,r,n]},b=e=>{let{table:t,extension:a,bodiedExtension:r,inlineExtension:n}=e.nodes;return new Map([[t,"Table"],[a,"Extension"],[r,"Extension"],[n,"Extension"]])},v=e=>{let{extension:t,bodiedExtension:a,inlineExtension:r}=e.nodes;return new Set([t,a,r].filter(Boolean))},x=(e,t,a)=>({linkNode:{localId:t,name:a??t,node:{type:e.type.name,attrs:{...e.attrs}}},sources:[],targets:[]}),I=e=>{let t=e.split(" ");if(t.length<2)return null;let a=Number(t[t.length-1]);return"number"!=typeof a?null:{defaultName:t.slice(0,t.length-1).join(" "),defaultNameNumber:a}},w=({type:e,attrs:t},a,r,n)=>{let o=b(a),i=v(a),s="";i.has(e)&&n&&(s=n({node:{type:e.name,attrs:t}})),s||(s=o.get(e)??"Element");let l=(r?.[s]??0)+1;return{markNameWithNumber:`${s} ${l}`,markName:s,markNameNumber:l}},M=({normalizedId:e,name:t,node:a})=>S(e,t,a),S=(e,t,a)=>{let r=new(0,o("h9yJL").JSONTransformer)().encodeNode(a);return{localId:e,name:t,node:{type:r.type,attrs:r.attrs}}},_=(e,t,a)=>t.normalizedId===a.normalizedId||!!a.dataConsumer?.attrs.sources.some(a=>{let r=e.getById(a);return!!r&&_(e,t,r)}),C=(e,t)=>{let{doc:a,schema:r}=t,n=r.marks.fragment,o=b(r),i=null;return a.descendants((t,a)=>{if(i)return!1;if(!o.has(t.type))return!0;let r=n.isInSet(t.marks)??null;return(!r||r.attrs.localId!==e)&&t.attrs.localId!==e||(i={node:t,pos:a,fragmentMark:r},!1)}),i},T=(e,t,a,r)=>{let{fragment:n,dataConsumer:o}=e.marks;return[n.create({localId:t,name:a}),r&&o.create({sources:Array.from(r)??[]})].filter(Boolean)},R=(e,t,a,r)=>{let{table:n}=e.nodes,i=t===n?P:A;return t.createChecked({...a,localId:o("fO7hX").uuid.generate()},i(e,t),r)},P=(e,t)=>{let{tableCell:a,tableHeader:r,tableRow:n}=e.nodes,o=[],i=[];for(let e=0;e<3;e++){let e=a.createAndFill();e&&o.push(e);let t=r.createAndFill();t&&i.push(t)}let s=[];for(let e=0;e<3;e++)s.push(n.createChecked(null,0===e?i:o));return s},A=(e,t)=>{let{bodiedExtension:a,paragraph:r}=e.nodes;return t===a?[r.createChecked()]:o("5SAOw").Fragment.empty},N=(e,t,a,r,n)=>{r=r??a.tr;let o=C(e,a),i=o?o.pos+o.node.nodeSize:void 0;return r=(0,h.safeInsert)(t,i)(r)},k=(e,t)=>t?.reduce((t,a)=>{let r=e.getById(a)?.normalizedId;return r?t.add(r):t},new Set)??new Set,L=(e,t,a)=>r=>D(e,t.node,t.pos,a,t.dataConsumer)(r),D=(e,t,a,r,n)=>o=>{let{dataConsumer:i}=e.marks,s=(n??i.isInSet(t.marks))?.attrs.sources;if(!r?.size&&!s?.length||r?.size===s?.length&&s.every(e=>r.has(e)))return o;let l=(i?.removeFromSet(t.marks)??t.marks).concat();return r?.size&&l.push(i.create({sources:Array.from(r)})),o.setNodeMarkup(a,void 0,t.attrs,l),o},F=(e,t,a)=>r=>{let{fragment:n}=e.marks;if(a===t.fragmentMark?.attrs.name)return r;let i=(t.fragmentMark?.removeFromSet(t.node.marks)??t.node.marks).concat();return i.push(n.create({localId:t.fragmentMark?.attrs.localId??o("fO7hX").uuid.generate(),name:a})),r.setNodeMarkup(t.pos,void 0,t.node.attrs,i)},O=(e,t,a,r)=>{let n,i=e.schema.nodes[t.type];if(!b(e.schema).has(i))throw new(0,y.UnsupportedTypeError)(t.type);let s=o("fO7hX").uuid.generate();if(e.hasId(s))throw new(0,y.LocalIdCollisionError)(s);"table"!==t.type&&(n=t.attrs);let{markNameWithNumber:l}=w({type:i,attrs:n},e.schema,e.getMaxNumberUsedInFragmentMarkNames(),a);"table"===t.type&&(n={width:760});let d=R(e.schema,i,n,T(e.schema,s,l,r)),{inlineExtension:c,paragraph:u}=e.schema.nodes,m=i===c?u.create(void 0,[d]):d;return{linkNode:S(s,l,d),node:m}},B=(e,t,a,r)=>{let n=e.getById(t);if(!n)throw new(0,y.TargetReferenceError)(t);let o=e.getById(a);if(!o)throw new(0,y.SourceReferenceError)(a);if(n.normalizedId===o.normalizedId)throw new(0,y.CyclicReferenceError)(t,a);if(n.dataConsumer?.attrs.sources.some(e=>o.ids.has(e)));else{if(_(e,n,o))throw new(0,y.CyclicReferenceError)(t,a);let i=k(e,n.dataConsumer?.attrs.sources);i.add(o.normalizedId),r=L(e.schema,n,i)(r)}return{target:M(n),source:M(o),tr:r}},V=(e,t,a,r)=>{let n=e.getById(a);if(!n)throw new(0,y.SourceReferenceError)(a);let o=e.getById(t);if(!o)throw new(0,y.TargetReferenceError)(t);let i=k(e,o.dataConsumer?.attrs.sources);return i.delete(n.normalizedId)?L(e.schema,o,i)(r):r},j=(e,t,a,r)=>{let n=e.getById(t);if(!n)throw new(0,y.TargetReferenceError)(t);let o=e.getById(a);if(!o)throw new(0,y.SourceReferenceError)(a);if(n.normalizedId===o.normalizedId)throw new(0,y.CyclicReferenceError)(t,a);if(n.dataConsumer?.attrs.sources.every(e=>o.ids.has(e)));else{if(_(e,n,o))throw new(0,y.CyclicReferenceError)(t,a);r=L(e.schema,n,new Set([o.normalizedId]))(r)}return{target:M(n),source:M(o),tr:r}},K=(e,t,a,r,n,o)=>{let i=e.schema.nodes[a.type];if(!b(e.schema).has(i))throw new(0,y.UnsupportedTypeError)(a.type);if(!e.hasId(t))throw new(0,y.SourceReferenceError)(t);let{linkNode:s,node:l}=O(e,a,n,[e.getById(t).normalizedId]);return o&&(r=V(e,o,t,r)),{linkNode:s,tr:r=(r=N(t,l,e.state,r)).setMeta("referentialityTableInserted",l.type.name===e.schema.nodes.table.name)}};class z{get state(){return this.view.state}get schema(){return this.view.state.schema}getById(e){return this.connections.get(e)}hasId(e){return this.connections.has(e)}getMaxNumberUsedInFragmentMarkNames(){return{...this.maxNumberUsedInFragmentMarkName}}getMaxNumberUsedInFragmentMarkName(e){return this.maxNumberUsedInFragmentMarkName[e]??0}updateMaxNumberUsedInFragmentMarkNames(e,t){this.maxNumberUsedInFragmentMarkName[e]=t}*uniqueConnections(){for(let e of this.uniqueNormalizedIds){let t=this.connections.get(e);t&&(yield t)}}*consumerOnlyConnections(){for(let e of this.uniqueNormalizedIds){let t=this.connections.get(e);t&&t.dataConsumer?.attrs.sources.length&&(yield t)}}*sourceOnlyConnections(){for(let e of this.uniqueSourceNormalizedIds){let t=this.connections.get(e);t&&(yield t)}}*namelessOnlyConnections(){for(let e of this.namelessNormalizedIds){let t=this.connections.get(e);t&&(yield t)}}constructor(e,t,a=!0){this.view=e,this.normalizeLocalId=t,this.shallow=a,this.maxNumberUsedInFragmentMarkName={},this.connections=new Map,this.uniqueNormalizedIds=new Set,this.uniqueSourceNormalizedIds=new Set,this.namelessNormalizedIds=new Set;let{doc:r,schema:n}=this.view.state,{fragment:o,dataConsumer:i}=n.marks,s=b(n),l=new Map;for(let[e,t]of(r.descendants((e,t,r)=>{let n;if(!s.has(e.type))return!0;let d=o.isInSet(e.marks);if(!d&&!e.attrs?.localId)return!0;let c=this.normalizeLocalId(e.attrs?.localId,d?.attrs?.localId);if(!c||this.connections.has(c))return!0;if(d?.attrs.name){if(n=I(d.attrs.name)){let e=this.maxNumberUsedInFragmentMarkName[n.defaultName];(void 0===e||e<n.defaultNameNumber)&&(this.maxNumberUsedInFragmentMarkName[n.defaultName]=n.defaultNameNumber)}}else this.namelessNormalizedIds.add(c);let u=i.isInSet(e.marks),m={node:e,pos:t,parent:r,normalizedId:c,name:d?.attrs?.name??c,ids:new Set,targets:new Set,fragmentMark:d,dataConsumer:u,decodedName:n};return d?.attrs?.localId&&(m.ids.add(d.attrs.localId),this.connections.set(d.attrs.localId,m)),e.attrs?.localId&&(m.ids.add(e.attrs.localId),this.connections.set(e.attrs.localId,m)),this.uniqueNormalizedIds.add(c),u&&u.attrs.sources.forEach(e=>l.set(e,l.get(e)?.add(c)??new Set([c]))),!(a&&u)}),l)){let a=this.connections.get(e);a&&(this.uniqueSourceNormalizedIds.add(a.normalizedId),a.targets=new Set([...a.targets,...t]))}}}let H=e=>({actionSubject:o("d925B").ACTION_SUBJECT.DOCUMENT,eventType:o("d925B").EVENT_TYPE.OPERATIONAL,tags:["editor"],...e}),U=({docSize:e,count:t,tr:a,editorAnalyticsAPI:r})=>n=>{let i=H({action:o("d925B").ACTION.INITIALISED_FRAGMENT_MARK,attributes:{duration:n,docSize:e,count:t}});r?.attachAnalyticsEvent(i)(a)},q=({docSize:e,sourceNodeType:t,targetNodeType:a,type:r,actionType:n,tr:i,editorAnalyticsAPI:s})=>l=>{let d=H({action:o("d925B").ACTION.CONNECTED_NODES,attributes:{duration:l,docSize:e,sourceNodeType:t,targetNodeType:a,type:r,actionType:n}});s?.attachAnalyticsEvent(d)(i)},G=({docSize:e,oldSourceNodeType:t,newSourceNodeType:a,type:r,tr:n,editorAnalyticsAPI:i})=>s=>{let l=H({action:o("d925B").ACTION.UPDATED_SOURCE,attributes:{duration:s,docSize:e,oldSourceNodeType:t,newSourceNodeType:a,type:r}});i?.attachAnalyticsEvent(l)(n)},$=({docSize:e,targetNodeType:t,tr:a,editorAnalyticsAPI:r})=>n=>{let i=H({action:o("d925B").ACTION.DISCONNECTED_SOURCE,attributes:{duration:n,docSize:e,targetNodeType:t}});r?.attachAnalyticsEvent(i)(a)},W=({docSize:e,sourceNodeType:t,targetNodeType:a,tr:r,editorAnalyticsAPI:n})=>i=>{let s=H({action:o("d925B").ACTION.DISCONNECTED_TARGET,attributes:{duration:i,docSize:e,sourceNodeType:t,targetNodeType:a}});n?.attachAnalyticsEvent(s)(r)},Q=({docSize:e,newTargetNodeType:t,oldTargetNodeType:a,sourceNodeType:r,type:n,tr:i,editorAnalyticsAPI:s})=>l=>{let d=H({action:o("d925B").ACTION.UPDATED_TARGET,attributes:{duration:l,docSize:e,newTargetNodeType:t,oldTargetNodeType:a,sourceNodeType:r,type:n}});s?.attachAnalyticsEvent(d)(i)},X=({nodeType:e,tr:t,editorAnalyticsAPI:a})=>r=>{let n=H({action:o("d925B").ACTION.UPDATED_FRAGMENT_MARK_NAME,attributes:{duration:r,nodeType:e}});a?.attachAnalyticsEvent(n)(t)},Y=({count:e,docSize:t,tr:a,editorAnalyticsAPI:r})=>n=>{let i=H({action:o("d925B").ACTION.GOT_CONNECTIONS,attributes:{docSize:t,duration:n,count:e}});r?.attachAnalyticsEvent(i)(a)};class Z{get isAttached(){return!!this.editorView}attach(e){let{state:{schema:t}}=e;if(!t.marks.fragment)throw new(0,y.CompatibilityError)("fragmentMark not supported");this.editorView=e}detach(){this.editorView=void 0}setNodeFocusCallback(e){this.nodeFocusCallback=e}setNodeNameCallback(e){this.nodeNameCallback=e}setSelectedLocalId(e){if(this.selectedLocalId!==e&&(this.selectedLocalId=e,this.nodeFocusCallback)){if(!e)return void this.nodeFocusCallback(void 0);if(this.editorView){let{state:t}=this.editorView,a=C(e,t);a&&this.nodeFocusCallback(S(this.normalizeLocalId(e,a.fragmentMark?.attrs.localId),a.fragmentMark?.attrs.name||"",a.node))}}}initialiseFragmentMarks(){if(!this.editorView)throw new(0,y.ConfigurationError)("initialiseFragmentMarks");(0,o("2T4ch").startMeasure)(g.MEASURE_NAME.INITIALISE_FRAGMENT_MARKS);let{state:e,dispatch:t}=this.editorView,{tr:a}=e,r=e.doc.nodeSize,n=new z(this.editorView,this.normalizeLocalId,!1),i=0,s=n.getMaxNumberUsedInFragmentMarkNames();for(let t of n.namelessOnlyConnections()){let{markNameWithNumber:r,markName:n,markNameNumber:o}=w(t.node,e.schema,s,this.nodeNameCallback);s[n]=o,a=F(e.schema,t,r)(a),i++}a.setMeta("addToHistory",!1),(0,o("2T4ch").stopMeasure)(g.MEASURE_NAME.INITIALISE_FRAGMENT_MARKS,U({docSize:r,count:i,tr:a,editorAnalyticsAPI:this.editorAnalyticsAPI})),t(a)}getConnections(){(0,o("2T4ch").startMeasure)(g.MEASURE_NAME.GET_CONNECTIONS);let e={};if(!this.editorView)return(0,o("2T4ch").stopMeasure)(g.MEASURE_NAME.GET_CONNECTIONS),e;let{state:{tr:t,doc:{nodeSize:a}}}=this.editorView,r=new z(this.editorView,this.normalizeLocalId);for(let{node:t,normalizedId:a,name:n}of r.uniqueConnections())e[a]=x(t,a,n);for(let{normalizedId:t,dataConsumer:a}of r.consumerOnlyConnections()){let n=e[t];a.attrs.sources.forEach(a=>{let o=r.getById(a)?.normalizedId??a,i=e[o];i&&o!==t&&(i.targets.push(t),n?.sources.push(o))})}return(0,o("2T4ch").stopMeasure)(g.MEASURE_NAME.GET_CONNECTIONS,Y({tr:t,editorAnalyticsAPI:this.editorAnalyticsAPI,docSize:a,count:Object.keys(e).length})),e}select(e,t=!1){if(!this.editorView||!e)throw new(0,y.ConfigurationError)("select");let{state:a,dispatch:r}=this.editorView,n=C(e,a);if(n){let{tr:e}=a;e.setSelection(o("ks2lK").NodeSelection.create(a.doc,n.pos)),t&&e.scrollIntoView(),e.setMeta("addToHistory",!1),r(e)}}updateName(e,t){try{if((0,o("2T4ch").startMeasure)(g.MEASURE_NAME.UPDATE_FRAGMENT_MARK_NAME),!this.isAttached||!this.editorView)throw new(0,y.ConfigurationError)("updateName");let{state:a,state:{schema:r},dispatch:n}=this.editorView,i=C(e,a);if(!i)throw new(0,y.NodeNotFoundError)(e);let{fragment:s}=r.marks,{fragmentMark:l,node:d,pos:c}=i,u=l?.attrs.localId??o("fO7hX").uuid.generate(),m=s.create({localId:u,name:t}),p=l?d.marks.filter(e=>e.type!==m.type):d.marks.concat();p.push(m);let f=a.tr.setNodeMarkup(c,void 0,d.attrs,p);n(f);let h=S(this.normalizeLocalId(d.attrs.localId,u),t,d);return(0,o("2T4ch").stopMeasure)(g.MEASURE_NAME.UPDATE_FRAGMENT_MARK_NAME,X({tr:f,editorAnalyticsAPI:this.editorAnalyticsAPI,nodeType:d.type.name})),h}catch(e){throw(0,o("2T4ch").stopMeasure)(g.MEASURE_NAME.UPDATE_FRAGMENT_MARK_NAME),e}}getADFFromLocalId(e){if(!this.isAttached||!this.editorView)throw new(0,y.ConfigurationError)("getADFFromLocalId");let{state:t}=this.editorView,a=C(e,t);if(!a)throw new(0,y.NodeNotFoundError)(e);return new(0,o("h9yJL").JSONTransformer)().encodeNode(a.node)}connectSource(e,t){try{if((0,o("2T4ch").startMeasure)(g.MEASURE_NAME.CONNECT_NODES),!this.editorView)throw new(0,y.ConfigurationError)("connectSource");let{dispatch:a,state:r}=this.editorView,n=r.doc.nodeSize,i=new z(this.editorView,this.normalizeLocalId),{source:s,target:l,tr:d}=B(i,e,t,r.tr);return a(d),(0,o("2T4ch").stopMeasure)(g.MEASURE_NAME.CONNECT_NODES,q({tr:d,editorAnalyticsAPI:this.editorAnalyticsAPI,docSize:n,actionType:"connectSource",type:"connect",sourceNodeType:s.node.type,targetNodeType:l.node.type})),s}catch(e){throw(0,o("2T4ch").stopMeasure)(g.MEASURE_NAME.CONNECT_NODES),e}}connectTarget(e,t){try{if((0,o("2T4ch").startMeasure)(g.MEASURE_NAME.CONNECT_NODES),!this.editorView)throw new(0,y.ConfigurationError)("connectTarget");let{dispatch:a,state:r}=this.editorView,n=r.doc.nodeSize,i=new z(this.editorView,this.normalizeLocalId),{source:s,target:l,tr:d}=B(i,t,e,r.tr);return a(d),(0,o("2T4ch").stopMeasure)(g.MEASURE_NAME.CONNECT_NODES,q({tr:d,editorAnalyticsAPI:this.editorAnalyticsAPI,docSize:n,actionType:"connectTarget",type:"connect",sourceNodeType:s.node.type,targetNodeType:l.node.type})),l}catch(e){throw(0,o("2T4ch").stopMeasure)(g.MEASURE_NAME.CONNECT_NODES),e}}updateTarget(e,t,a){try{if((0,o("2T4ch").startMeasure)(g.MEASURE_NAME.UPDATE_TARGET),!this.editorView)throw new(0,y.ConfigurationError)("updateTarget");let{dispatch:r,state:n}=this.editorView,i=n.doc.nodeSize,s=new z(this.editorView,this.normalizeLocalId),{target:l,source:d,tr:c}=B(s,a,e,V(s,t,e,n.tr));return r(c),(0,o("2T4ch").stopMeasure)(g.MEASURE_NAME.UPDATE_TARGET,Q({tr:c,editorAnalyticsAPI:this.editorAnalyticsAPI,docSize:i,newTargetNodeType:l.node.type,oldTargetNodeType:s.getById(t)?.node.type.name||"",sourceNodeType:d.node.type,type:"update"})),l}catch(e){throw(0,o("2T4ch").stopMeasure)(g.MEASURE_NAME.UPDATE_TARGET),e}}updateSource(e,t){try{if((0,o("2T4ch").startMeasure)(g.MEASURE_NAME.UPDATE_SOURCE),!this.editorView)throw new(0,y.ConfigurationError)("updateSource");let{dispatch:a,state:r}=this.editorView,n=r.doc.nodeSize,i=new z(this.editorView,this.normalizeLocalId),{target:s,source:l,tr:d}=j(i,e,t,r.tr);return a(d),(0,o("2T4ch").stopMeasure)(g.MEASURE_NAME.UPDATE_SOURCE,G({tr:d,editorAnalyticsAPI:this.editorAnalyticsAPI,docSize:n,oldSourceNodeType:s.node.type,newSourceNodeType:l.node.type,type:"update"})),l}catch(e){throw(0,o("2T4ch").stopMeasure)(g.MEASURE_NAME.UPDATE_SOURCE),e}}disconnectTarget(e,t){try{if((0,o("2T4ch").startMeasure)(g.MEASURE_NAME.DISCONNECT_TARGET),!this.editorView)throw new(0,y.ConfigurationError)("disconnectTarget");let{dispatch:a,state:r}=this.editorView,n=r.doc.nodeSize,i=new z(this.editorView,this.normalizeLocalId),s=V(i,t,e,r.tr);a(s),(0,o("2T4ch").stopMeasure)(g.MEASURE_NAME.DISCONNECT_TARGET,W({tr:s,editorAnalyticsAPI:this.editorAnalyticsAPI,docSize:n,sourceNodeType:i.getById(e)?.node.type.name||"",targetNodeType:i.getById(t)?.node.type.name||""}))}catch(e){throw(0,o("2T4ch").stopMeasure)(g.MEASURE_NAME.DISCONNECT_TARGET),e}}disconnectSource(e){try{if((0,o("2T4ch").startMeasure)(g.MEASURE_NAME.DISCONNECT_SOURCE),!this.editorView)throw new(0,y.ConfigurationError)("disconnectSource");let{dispatch:t,state:a}=this.editorView,r=a.doc.nodeSize,n=C(e,a);if(!n)throw new(0,y.TargetReferenceError)(e);let i=D(a.schema,n.node,n.pos)(a.tr);t(i),(0,o("2T4ch").stopMeasure)(g.MEASURE_NAME.DISCONNECT_SOURCE,$({tr:i,editorAnalyticsAPI:this.editorAnalyticsAPI,docSize:r,targetNodeType:n.node.type.name}))}catch(e){throw(0,o("2T4ch").stopMeasure)(g.MEASURE_NAME.DISCONNECT_SOURCE),e}}insertAndConnectTarget(e,t){try{if((0,o("2T4ch").startMeasure)(g.MEASURE_NAME.CONNECT_NODES),!this.editorView)throw new(0,y.ConfigurationError)("insertAndConnectTarget");let{dispatch:a,state:r}=this.editorView,n=new z(this.editorView,this.normalizeLocalId),{linkNode:i,tr:s}=K(n,e,t,r.tr,this.nodeNameCallback);a(s);let l=s.doc.nodeSize;return(0,o("2T4ch").stopMeasure)(g.MEASURE_NAME.CONNECT_NODES,q({tr:s,editorAnalyticsAPI:this.editorAnalyticsAPI,docSize:l,actionType:"connectTarget",type:"insertAndConnect",sourceNodeType:n.getById(e)?.node.type.name||"",targetNodeType:t.type})),i}catch(e){throw(0,o("2T4ch").stopMeasure)(g.MEASURE_NAME.CONNECT_NODES),e}}insertAndConnectSource(e,t){try{if((0,o("2T4ch").stopMeasure)(g.MEASURE_NAME.CONNECT_NODES),!this.editorView)throw new(0,y.ConfigurationError)("insertAndConnectSource");let{state:a,state:{schema:r},dispatch:n}=this.editorView,i=r.nodes[t.type];if(!b(r).has(i))throw new(0,y.UnsupportedTypeError)(t.type);let s=new z(this.editorView,this.normalizeLocalId),l=s.getById(e);if(!l)throw new(0,y.TargetReferenceError)(e);let{linkNode:d,node:c}=O(s,t,this.nodeNameCallback),u=a.tr,m=k(s,l.dataConsumer?.attrs.sources).add(d.localId);u=L(r,l,m)(u),u=(u=N(e,c,a,u)).setMeta("referentialityTableInserted",c.type.name===r.nodes.table.name),n(u);let p=u.doc.nodeSize;return(0,o("2T4ch").stopMeasure)(g.MEASURE_NAME.CONNECT_NODES,q({tr:u,editorAnalyticsAPI:this.editorAnalyticsAPI,docSize:p,actionType:"connectSource",type:"insertAndConnect",sourceNodeType:c.type.name,targetNodeType:s.getById(e)?.node.type.name||""})),d}catch(e){throw(0,o("2T4ch").stopMeasure)(g.MEASURE_NAME.CONNECT_NODES),e}}replaceAndUpdateTarget(e,t,a){try{if((0,o("2T4ch").stopMeasure)(g.MEASURE_NAME.UPDATE_TARGET),!this.editorView)throw new(0,y.ConfigurationError)("replaceAndUpdateTarget");let{dispatch:r,state:n}=this.editorView,i=new z(this.editorView,this.normalizeLocalId),{linkNode:s,tr:l}=K(i,e,a,n.tr,this.nodeNameCallback,t);r(l);let d=l.doc.nodeSize;return(0,o("2T4ch").stopMeasure)(g.MEASURE_NAME.UPDATE_TARGET,Q({tr:l,editorAnalyticsAPI:this.editorAnalyticsAPI,docSize:d,type:"replaceAndUpdate",newTargetNodeType:a.type,oldTargetNodeType:i.getById(t)?.node.type.name||"",sourceNodeType:i.getById(e)?.node.type.name||""})),s}catch(e){throw(0,o("2T4ch").stopMeasure)(g.MEASURE_NAME.UPDATE_TARGET),e}}replaceAndUpdateSource(e,t){try{if((0,o("2T4ch").startMeasure)(g.MEASURE_NAME.UPDATE_SOURCE),!this.editorView)throw new(0,y.ConfigurationError)("replaceAndUpdateSource");let{state:{schema:a},state:r,dispatch:n}=this.editorView,i=a.nodes[t.type];if(!b(a).has(i))throw new(0,y.UnsupportedTypeError)(t.type);let s=new z(this.editorView,this.normalizeLocalId),l=s.getById(e);if(!l)throw new(0,y.TargetReferenceError)(e);let{linkNode:d,node:c}=O(s,t,this.nodeNameCallback),u=L(s.schema,l,new Set([d.localId]))(r.tr);u=(u=N(e,c,r,u)).setMeta("referentialityTableInserted",c.type.name===a.nodes.table.name),n(u);let m=u.doc.nodeSize;return(0,o("2T4ch").stopMeasure)(g.MEASURE_NAME.UPDATE_SOURCE,G({tr:u,editorAnalyticsAPI:this.editorAnalyticsAPI,docSize:m,oldSourceNodeType:l.node.type.name,newSourceNodeType:t.type,type:"replaceAndUpdate"})),d}catch(e){throw(0,o("2T4ch").stopMeasure)(g.MEASURE_NAME.UPDATE_SOURCE),e}}constructor({nodeNameCallback:e,nodeFocusCallback:t,editorAnalyticsAPI:a,editorView:r,featureFlags:n}={}){this.nodeNameCallback=void 0,this.nodeFocusCallback=void 0,this.normalizeLocalId=void 0,this.editorAnalyticsAPI=void 0,this.editorView=void 0,this.selectedLocalId=void 0,this.nodeNameCallback=e,this.nodeFocusCallback=t,this.editorAnalyticsAPI=a,this.editorView=r,this.normalizeLocalId=(e,t)=>t??e}}let J={TABLE_DELETED:"TABLE_DELETED"},ee=(e,t)=>{let a="string"==typeof e.type?e.type:e.type.name;return[t.nodes.table?.name].includes(a)&&e.attrs?.localId},et=new(0,o("h9yJL").JSONTransformer),ea=(0,o("2XqLN").default)(e=>et.encodeNode(e)),er=({config:e,api:t})=>({name:"referentiality",pmPlugins:()=>[{name:"referentiality",plugin:({providerFactory:a,portalProviderAPI:s,eventDispatcher:l})=>(function(e,t,a,s,l,d={},c,u,m,p,y){let b={showMacroInteractionDesignUpdates:!!m?.confluence_frontend_macro_interaction_design},v=y?.isAllowedToUseRendererView,x={appearance:d.appearance,getExtensionHeight:d.getExtensionHeight};return new(0,o("1S4f7").SafePlugin)({key:r.pluginKey,state:{init(){let e=new(0,n.DataSourceProvider),t=new i(e);return l.forEach(t=>t.init({emit:(t,a)=>e.createOrUpdate(t,a)})),{dataSourceProvider:e,nodeMutationObserver:t,changedSources:new Map,selectedNodeLocalId:void 0}},apply(e,t,a,r){let n=t.selectedNodeLocalId;if(u&&!a.selection.eq(r.selection)){let t=E(a.schema),{fragment:r}=a.schema.marks,o=(0,h.findSelectedNodeOfType)(t)(e.selection)||(0,h.findParentNodeOfType)(t)(e.selection);n=o?.node&&(r?.isInSet(o?.node.marks)?.attrs.localId||o?.node.attrs.localId)}let i=n!==t.selectedNodeLocalId;if(!e.docChanged)return i?{...t,selectedNodeLocalId:n}:t;let s=new Map;for(let[a,r]of t.changedSources.entries()){let t=e.mapping.map(a);s.set(t,r)}let l=(0,o("2pjJ5").getChangedNodes)(e).filter(({node:t})=>"cut"!==e.getMeta("uiEvent")&&ee(t,a.schema));return(l.forEach(({node:e,pos:t})=>{s.set(t,e)}),l.length)?{...t,changedSources:s,selectedNodeLocalId:n}:i?{...t,selectedNodeLocalId:n}:t}},view:e=>{let t;u?.attach(e);let a=e.state.schema.nodes.table,n=(0,r.getPluginState)(e.state);if(!n)return{};let o=n.dataSourceProvider,i=n.nodeMutationObserver;return o&&(t=t=>{if(t&&t.attrs){let r=!1;(0,h.findChildrenByType)(e.state.doc,a).forEach(({node:e})=>{e.attrs.localId===t.attrs.localId&&(r=!0)}),r||o.delete(t.attrs.localId)}},s.on(J.TABLE_DELETED,t)),i&&(0,h.findChildrenByType)(e.state.doc,a).forEach(({node:e})=>{let t=e?.marks?.find(e=>"fragment"===e.type.name)?.attrs?.localId;t&&i.emit(t,{get[g.ADFReferenceTypes.TABLE](){return ea(e)}}),i.emit(e.attrs.localId,{get[g.ADFReferenceTypes.TABLE](){return ea(e)}})}),{update(e,t){let a=(0,r.getPluginState)(e.state);if(!a)return;let n=(0,r.getPluginState)(t),{changedSources:o,nodeMutationObserver:i,selectedNodeLocalId:s}=a;s!==n?.selectedNodeLocalId&&u?.setSelectedLocalId(s),o.forEach((e,t)=>{let a=e?.marks?.find(e=>"fragment"===e.type.name)?.attrs?.localId;a&&i.emit(a,{get[g.ADFReferenceTypes.TABLE](){return ea(e)}}),e.attrs?.localId&&i.emit(e.attrs.localId,{get[g.ADFReferenceTypes.TABLE](){return ea(e)}})}),o.clear()},destroy(){u?.detach(),o&&(s.off(J.TABLE_DELETED,t),o.clear&&o.clear())}}},props:{nodeViews:{extension:f(a,s,e,t,x,c,b),bodiedExtension:f(a,s,e,t,x,c,b,v,y?.showUpdated1PBodiedExtensionUI,y?.rendererExtensionHandlers),inlineExtension:f(a,s,e,t,x,c,b)}}})})(a,e?.extensionHandlers??{},s,l,e?.externalObservers??[],{appearance:e?.appearance,getExtensionHeight:e?.getExtensionHeight},t,e?.api,e?.featureFlags,e?.__livePage,e?.__rendererExtensionOptions)}]});t.exports.referentialityPlugin=er,t.exports.createReferentiality=e=>{let t=e?.api??new Z(e);return{api:t,plugin:er({config:{...e,api:t}})}}}),i("4xvYZ",function(e,t){var a=o("4tb0i");e.exports.dataSourceResolver=e=>{let t=e?._privateGetEditorView()?.state;if(!t)return null;let r=t.selection;if(r instanceof o("ks2lK").NodeSelection){let e=r.node.marks?.find(e=>e.type===t.schema?.marks?.dataConsumer)?.attrs?.sources[0];if(!e)return null;let n=(0,a.getPluginState)(t)?.dataSourceProvider;return n?.get(e)}}}),i("lEgye",function(e,t){e.exports.DataSourceProvider=class{createOrUpdate(e,t){this.dataSources.set(e,t);let a=window.requestIdleCallback||window.requestAnimationFrame,r=window.cancelIdleCallback||window.cancelAnimationFrame,n=a(()=>{r(n),this.notifySubscribers(e,t)})}notifySubscribers(e,t){this.subscriptions.has(e)&&this.subscriptions.get(e)?.forEach(e=>{e(t)})}subscribe(e,t){this.subscriptions.has(e)||this.subscriptions.set(e,new Set),this.subscriptions.get(e)?.add(t)}unsubscribe(e,t){this.subscriptions.has(e)&&this.subscriptions.get(e)?.delete(t)}delete(e){this.dataSources.delete(e),this.notifySubscribers(e,null)}get(e){return this.dataSources.get(e)||null}clear(){this.dataSources.clear(),this.subscriptions.clear()}constructor(){this.subscriptions=new Map,this.dataSources=new Map}}}),i("eVKuj",function(e,t){var a=o("42omo"),r=o("gcCrc");let n=(e=[])=>{let t=new Map;return e.forEach(e=>{let a=e.marks?.find(e=>"fragment"===e.type),r=a?.attrs?.localId;r&&t.set(r,e),e.attrs?.localId&&t.set(e.attrs.localId,e),e.content&&(t=new Map([...t,...n(e.content)]))}),t},i=(0,o("2XqLN").default)(e=>n(e.content));e.exports.useReference=({adf:e,extensionParams:t,dataSourceProvider:n})=>{let o=i(e),s=o.get(t.localId),l=s?.marks?.find(e=>"dataConsumer"===e.type)?.attrs?.sources?.[0],[d,c]=(0,a.useState)(()=>{let e=o.get(l);if(e?.type==="table")return{[r.ADFReferenceTypes.TABLE]:e}});return(0,a.useEffect)(()=>{if(l)return n?.subscribe(l,c),()=>n?.unsubscribe(l,c)},[n,l]),{references:d?[d]:[]}}}),i("gcCrc",function(e,t){var a,r,n=((a={}).TABLE="table-adf",a),o=((r={}).INITIALISE_FRAGMENT_MARKS="initialiseFragmentMarks",r.CONNECT_NODES="connectNodes",r.UPDATE_SOURCE="updateSource",r.DISCONNECT_SOURCE="disconnectSource",r.UPDATE_TARGET="updateTarget",r.DISCONNECT_TARGET="disconnectTarget",r.UPDATE_FRAGMENT_MARK_NAME="updateFragmentMarkName",r.GET_CONNECTIONS="getConnections",r);e.exports.ADFReferenceTypes=n,e.exports.MEASURE_NAME=o}),i("9oPnF",function(e,t){class a extends ReferenceError{constructor(e){super(`Node (${e}) could not be found`),this.localId=e}}class r extends ReferenceError{constructor(e,t){super(`Connecting Target (${e}) to Source (${t}) will result in a Circular Reference`),this.targetLocalId=e,this.sourceLocalId=t}}class n extends ReferenceError{constructor(e){super(`LocalId (${e}) Collision has occured`),this.localId=e}}e.exports.CompatibilityError=class extends Error{constructor(e){super(`Unable to attach, Incorrect configuration: ${e}`),this.reason=e}},e.exports.ConfigurationError=class extends Error{constructor(e){super(`Unable to execute ${e}, API hasn't been initialized`),this.handlerName=e}},e.exports.UnsupportedTypeError=class extends Error{constructor(e){super(`Unsupported type (${e})`)}},e.exports.NodeNotFoundError=a,e.exports.TargetReferenceError=class extends a{constructor(e){super(e),this.localId=e}},e.exports.SourceReferenceError=class extends a{constructor(e){super(e),this.localId=e}},e.exports.CyclicReferenceError=r,e.exports.LocalIdCollisionError=n}),i("989nU",function(t,a){var r=o("42omo"),n=o("iaRmR"),i=o("ebUME");t.exports.FabricLegacyMacrosServerRenderer=({macroRenderedOutput:t,macroDefaultProps:a,containerRef:s,macroOutput:l,reuseSSRedElement:d,renderedByProvider:c=!1})=>{let{featureFlags:u,cloudId:m,userId:p}=(0,o("bQm3c").useSessionData)(),f=(0,o("e4o8D").useRenderServerPlaceholder)(),{createAnalyticsEvent:g}=(0,o("inPa6").useAnalyticsEvents)(),{node:h,contentId:y,mode:E,extensionKey:b}=a,{viewportHeight:v}=(0,o("bYtfC").useConnectExtensionViewportSize)(h);Object.keys(h).forEach(e=>{(void 0===h[e]||null===h[e])&&delete h[e]});let x=h.parameters?.macroMetadata?.macroId?.value,I=h.parameters?.macroParams?.isMissingRequiredParameters?.value;(0,r.useEffect)(()=>{l&&g({type:"sendTrackEvent",data:{action:"viewed",actionSubject:"macro.with.macroOutput",source:"FabricLegacyMacrosServerRenderer",attributes:{extensionKey:b,contentId:y}}}).fire()},[l,g,b,y]);let w=(0,o("ji0Re").useMacroContentData)(y,h),M=(0,o("KcDWk").useSSRedLegacyMacroElement)(x),S=t?t.filter(e=>e?.key===x):[],_=w?.macroBodyRenderer?.value||S[0]?.value?.value||l;b&&t&&(_=(0,o("6AplS").scopeCSS)(_,o("6AplS").mainContentSelector).contentWithScopedCSS);let C=(0,o("lqWPF").useDataMacroBody)(h,y),T=I&&"tasks-report-macro"!==b;if(I&&"tasks-report-macro"===b&&!h.parameters?.macroParams?.pages&&!h.parameters?.macroParams?.spaces)return e(r).createElement(o("9tVje").ExtensionPlaceholder,{isEditor:!1,macro:{title:"Task report",macroName:b,icon:{height:80,location:"/download/resources/com.atlassian.confluence.plugins.confluence-inline-tasks/tasks-report-image-resources/task-report.png",relative:!0,width:80}},description:o("9tVje").editToSetupMessage});if(!l&&T)return null;let R=w&&!C.missing||w?.macroBodyStorageFormat;if(!l&&0===S.length&&!R)return(0,o("4JC0x").markMissingMacroData)(x,b),e(r).createElement(o("3o0Dr").FabricLegacyMacrosServerLoader,a);if(f&&window.__MISSING_DATA_MACROS__?.includes(x))return e(r).createElement(o("3o0Dr").FabricLegacyMacrosServerLoader,a);if(!_||f&&!window.__MISSING_DATA_MACROS__?.includes(x)&&!window.__LEGACY_MACRO_SSRED__?.[x])return null;let P=w?.macroBodyRenderer?.webResourceDependencies?.tags?.css||w?.macroBodyRenderer?.webResource?.tags?.css||S[0]?.value?.webresource?.tags?.css,A=w?.macroBodyRenderer?.webResourceDependencies?.tags?.js||w?.macroBodyRenderer?.webResource?.tags?.js||S[0]?.value?.webresource?.tags?.js,N=(0,o("6mEZ3").extensionToADF)(a.node),k=N.type===o("8pcS0").INLINE_EXTENSION_TYPE,L={"data-fabric-macro":x,"data-macro-body":w?.macroBodyStorageFormat?.value||C.value,"data-macro-parameters":(0,o("6mEZ3").getParametersString)(h),"data-skate-created":void 0},D=w?.macroBodyRenderer?.representation||S[0]?.value?.representation||"view";w?.macroBodyRenderer?.macroRenderedRepresentation&&"include"===b&&(0,o("9wGTI").fg)("confluence_frontend_fix_include_macro_ssr_issue")&&(D=w?.macroBodyRenderer?.macroRenderedRepresentation);let F="atlas_doc_format"===D?(0,i.getSsrExtensionHandlers)({adf:_,contentId:y,userId:p,cloudId:m}):void 0,O={adf:N,isInline:k,contentId:y,mode:E,extensionKey:b,macroRepresentation:D,macroDataProps:L,macroRenderedOutput:_,featureFlags:u,nodeProps:{ref:s||null},mediaToken:w?.macroBodyRenderer?.mediaToken?.token,extensionHandlers:F,ssredElement:M,delayIframe:!0,height:v};return e(r).createElement(r.Fragment,null,P&&e(r).createElement("div",{key:"css-container","data-testid":"macro_css",dangerouslySetInnerHTML:{__html:P},style:{display:"none"}}),e(r).createElement(n.LegacyMacroStyledElement,{renderedByProvider:c,...O}),e(r).createElement(o("kksmx").ExtensionSSRMark,{macroId:x,renderType:(0,o("kksmx").getRenderType)(l,w)}),A&&e(r).createElement("div",{"data-testid":"macro_js",dangerouslySetInnerHTML:{__html:`${(0,o("l6Xaz").deferScript)(A)}`},style:{display:"none"}}))}}),i("6gj4X",function(e,t){e.exports.convertRendererProps=(e,t)=>e?{adf:t.document,objectId:t.contentId}:t,e.exports.getMacroId=e=>e?.parameters?.macroMetadata?.macroId?.value}),i("4tb0i",function(e,t){let a=new(0,o("ks2lK").PluginKey)("referentialityPlugin");e.exports.pluginKey=a,e.exports.getPluginState=e=>e&&a.getState(e)}),i("iaRmR",function(t,a){var r=o("42omo"),n=o("hEeUR");let i={};function s({macroId:t,content:a,containerRef:n,isConnectIframeEarlyInitialized:s,renderedByProvider:l}){let[d,c]=(0,r.useState)(i[t]);d||(0,o("KcDWk").collectSSRedLegacyMacro)(t);let u=(0,r.useRef)(null),m=(0,o("KcDWk").useSSRedLegacyMacroElement)(t);return((0,r.useLayoutEffect)(()=>{if(d){let e=u.current;if(e&&m)return e.insertAdjacentElement("afterend",m),s&&!1===l&&m instanceof HTMLElement&&(m.style.visibility="visible",m.style.display="revert"),n&&"function"==typeof n&&n(m),()=>{try{m.parentNode?.removeChild(m)}catch{}}}else i[t]=!0,c(!0)},[d,t,m,n,s,l]),m)?e(r).createElement(e(r).Fragment,null,d?e(r).createElement("input",{type:"hidden",ref:u,"data-legacy-macro-placeholder-ref":!0}):e(r).createElement(o("1aGr8").LoadablePlaceholderClient,{placeholderId:`legacy-macro-${t}`,clientPlaceholder:()=>a,uniquePlaceholderId:!0})):e(r).createElement(e(r).Fragment,null,a)}let l=(e,t,a,r,n,i)=>{if(!e)return n;let s=a?.match(/"h":\s*"(\d+(?:%|px)?)"/),l=(0,o("9wGTI").fg)("confluence_connect_renderer_height_preset")&&i;return{...n,...l&&{minHeight:i},height:s?.[1]||"",visibility:t?"visible":"hidden",display:t||s?.[1]&&!r?"revert":"none"}},d=(0,r.memo)(({contentId:t,className:a,isInline:i,nodeProps:d,macroDataProps:c,macroRepresentation:u,macroRenderedOutput:m,style:p,children:f,featureFlags:g,extensionHandlers:h,mediaToken:y,ssredElement:E,delayIframe:b,extensionKey:v,renderedByProvider:x,isConnectIframeEarlyInitialized:I=!1,height:w})=>{let M=i?"span":"div",S=c?.["data-fabric-macro"],_=d?.ref,C=(0,r.useRef)(null),T=(0,o("e4o8D").useRenderServerPlaceholder)(),R=(0,r.useMemo)(()=>l(I,x,m,i,p,w),[I,x,m,i,p,w]);if((0,r.useLayoutEffect)(()=>{let e=C.current;if(e&&E)return e.insertAdjacentElement("afterend",E),_&&"function"==typeof _&&_(E),()=>{try{E.parentNode?.removeChild(E)}catch{}}},[_,E]),(0,o("adbKg").useDelayedIframe)(b,E),f)return e(r).createElement(M,{className:a,style:p,...d,...c},f);if("atlas_doc_format"===u)return m?e(r).createElement(M,{className:a,style:p,...d,...c,"data-testid":"legacy-macro-adf","data-vc":`legacy-macro-element_${v||"no-extension-key-provided"}`,"data-vc-ignore-if-no-layout-shift":!0,...T?{"data-ssr-placeholder":S}:{"data-ssr-placeholder-replace":S}},e(r).createElement(n.ADFRenderer,{document:JSON.parse(m),contentId:t,featureFlags:g??{},extensionHandlers:h,mediaToken:y,appearance:"full-width"})):null;{if(!window?.__HYDRATABLE__&&E&&!(0,o("9wGTI").fg)("enable_loadable_placeholder_for_legacy_macros"))return e(r).createElement("input",{type:"hidden",ref:C,"data-legacy-ssred-element-ref":!0});let t=b?(0,o("adbKg").delayIframeLoading)(m):m,n=e(r).createElement(M,{className:a,style:R,dangerouslySetInnerHTML:{__html:`${t}`},...d,...c,...b?{"data-delay-iframe":"1"}:{},"data-testid":"legacy-macro-element","data-vc":`legacy-macro-element_${v||"no-extension-key-provided"}`,"data-vc-ignore-if-no-layout-shift":!0,...T?{"data-ssr-placeholder":S}:{"data-ssr-placeholder-replace":S}});return window.__SSR_RENDERED__&&t?.includes(`data-macro-id="${S}"`)&&(document.querySelector(`[data-fabric-macro="${S}"][data-skate-created]:not(:has(.ap-iframe-body-script)):not(:has(.ap-iframe-container))`)||document.querySelector("[data-legacy-macro-placeholder-ref]"))?(0,o("9wGTI").fg)("confluence_frontend_revert_macro_hydration_fix")?e(r).createElement(s,{macroId:S,content:n,containerRef:_,isConnectIframeEarlyInitialized:I,renderedByProvider:x}):T&&window.__SSR_REACT_STREAMING__?e(r).createElement(o("1aGr8").LoadablePlaceholderServer,{placeholderId:`legacy-macro-${S}`},n):e(r).createElement(s,{macroId:S,content:n,containerRef:_,isConnectIframeEarlyInitialized:I,renderedByProvider:x}):e(r).createElement(o("1aGr8").LoadablePlaceholderServer,{placeholderId:`legacy-macro-${S}`},n)}}),c=e=>{let t=e?.attrs?.parameters?.macroParams||{},a=e?.attrs?.extensionKey||"",r=`macro${a}`;return"jira"!==a||t.key||t.count||(r+="Table"),r};t.exports.LegacyMacroStyledElement=({adf:t,mode:a,isInline:n,...i})=>{let s="macrojiraTable"===c(t),l="macroinclude"===c(t),u=i.macroRenderedOutput?.includes("ap-iframe-body-script")&&(0,o("gEtAQ").isSpaceOverview)()&&((0,o("9wGTI").fg)("content_early_connect_iframe_initialization")||(0,o("6mKj3").expVal)("confluence_frontend_early_webpanel_initialization","isEnabled",!1));u&&(o("iHLZT").superbatchJSRecorder.includeConnectWebResources(),o("iHLZT").superbatchCSSRecorder.includeConnectWebResources());let m=i.macroRenderedOutput?.includes("ap-iframe-body-script")||i.macroRenderedOutput?.includes("ap-iframe-container"),p=e(r).createElement(d,{adf:t,mode:a,isInline:n,isConnectIframeEarlyInitialized:u,...i,className:(0,o("gMc0m").default)(["_o5724jg8 _11rm1hrf _5xln4jg8 _1v0sze3t _tmbuze3t _og5autpp _oxx4utpp",s&&"_1e0c1ule _p12f1osq _1reo1wug _1cqiaq80 _1lkk4jg8",l&&"_1t1412x7 _12c1ze3t _4lh2ze3t _1cqiaq80 _hxtqze3t _vzdwze3t",a===o("5kjCz").EDITOR&&"_kqswh2mm _uiztglyw",n&&"_11rmglyw",a===o("5kjCz").RENDERER&&n&&"_1yt4v77o _1e0c1o8l"])});return m&&(0,o("6mKj3").expVal)("confluence_frontend_iframe_exclusion","isEnabled",!1)?e(r).createElement(o("iRRvH").UFOThirdPartySegment,{name:`legacy-macro-${i.extensionKey||"connect-iframe"}`},p):p}}),i("bYtfC",function(e,t){let a=e=>{if(!e)return;let t=e.extensionKey,a=e.parameters?.macroParams;if("drawio"===t||"inc-drawio"===t||"drawio-sketch"===t){let e=Number(a?.width?.value),t=Number(a?.zoom?.value);if(e&&e>530||1!==t)return}return"plantumlcloud"===t?a?.originalHeight?.value:a?.height?.value};e.exports.useConnectExtensionViewportSize=e=>{let t=a(e),r=e?.extensionKey,n=Number(t);if(Number.isNaN(n))switch(r){case"gliffy":n=150;break;case"aura-divider":n=21;break;case"aura-cards":n=226;break;case"miro-macro-resizing":n=450;break;case"easy-math-block":n=47;break;case"mathblock":n=58;break;case"page-signatures":n=23;break;case"questionslist-macro":n=800;break;case"jiraroadmap":n=600;break;case"lucidchart":n=500;break;default:n=void 0}else switch(r){case"drawio":case"inc-drawio":case"drawio-sketch":n+=52;break;case"lref-gdrive-embedded-file":n+=79;break;case"plantumlcloud":n+=40}return{viewportHeight:n}}}),i("3o0Dr",function(t,a){var r=o("42omo");t.exports.FabricLegacyMacrosServerLoader=({node:t,mode:a,contentId:n})=>e(r).createElement(o("eczvQ").LegacyMacroRendererShadow,{node:t})}),i("lqWPF",function(e,t){e.exports.useDataMacroBody=function(e,t){let a=e.parameters?.macroParams?.__bodyContent,r=e.type===o("8pcS0").REGULAR_EXTENSION_TYPE&&!!a,n=e.type===o("8pcS0").BODIED_EXTENSION_TYPE,i=(0,o("xQxzY").useQuery)((0,o("eSUdr").default)`query useDataMacroBodyContentConverterQuery($content:String!$contentId:ID!$from:String!$to:String!$spaceKeyContext:String=""){contentConverter(from:$from to:$to content:$content contentIdContext:$contentId spaceKeyContext:$spaceKeyContext){value}}`,{variables:(0,o("92uc5").getContentConverterVariables)({content:e.content,contentId:t}),fetchPolicy:"cache-only",skip:!n});return n?i.data?{value:i.data.contentConverter?.value}:{missing:!0}:r?{value:a?.value||""}:{value:""}}}),i("ji0Re",function(e,t){let a=(e,t)=>{let{isMacroContentAndBody:a,...r}=(0,o("8mIlz").getMacroQueryVariables)({node:t,contentId:e}),n=a?o("9p5st").MacroBodyRendererQueryWithTags:o("9p5st").MacroContentRendererQueryWithTags,{data:i}=(0,o("xQxzY").useQuery)(n,{fetchPolicy:"cache-only",variables:r});return i},r=(e,t)=>{let a=t.parameters?.macroMetadata?.macroId?.value,{renderedMacro:r}=(0,o("iKSlH").useMultiMacroQuery)({contentId:e,macroId:a});return{macroBodyRenderer:r,representation:r?.macroRenderedRepresentation,mediaToken:r?.mediaToken,webResourceDependencies:r?.webResource,macroBodyStorageFormat:{value:r?.macroBodyStorage}}};e.exports.useMacroContentData=(e,t)=>(0,o("ld6xp").canUseMultiMacroQuery)(t.extensionKey)?r(e,t):a(e,t)}),i("adbKg",function(e,t){var a=o("42omo");let r=/(<iframe.*)\ssrc=((?:".*?")|(?:'.*?'))(.*>)/gim,n=/<iframe/gi;e.exports.delayIframeLoading=e=>e?e.split(n).map((e,t)=>0===t?e:`<iframe${e}`.replace(r,"$1 data-delayed-src=$2$3")).join(""):e,e.exports.useDelayedIframe=(e,t)=>{(0,a.useLayoutEffect)(()=>{t&&(e?t.setAttribute("data-delay-iframe","true"):t.removeAttribute("data-delay-iframe"))},[t,e]),(0,a.useEffect)(()=>{let a="data-delayed-src";if(t){let r=t.querySelector("iframe");if(r&&!e){let e=r.getAttribute(a);e&&(r.setAttribute("src",e),r.removeAttribute(a))}}},[t,e])}}),i("eczvQ",function(t,a){var r=o("3u0dr"),n=o("frIzR"),i=o("42omo");let s=(0,i.forwardRef)((0,r.isReactCompilerActiveV1)()?(t,a)=>{let r,s,l,d,c,u,m=(0,n.c)(13);if(m[0]!==a||m[1]!==t){let{as:e,style:n,...i}=t;r=void 0===e?"span":e,s=i,l=n,d=a,c=(0,o("gMc0m").default)(["_2rko1qi0 _1yt41b66 _1e0c1o8l _bfhkizff _1ul912am _4t3ildb6",i.className]),m[0]=a,m[1]=t,m[2]=r,m[3]=s,m[4]=l,m[5]=d,m[6]=c}else r=m[2],s=m[3],l=m[4],d=m[5],c=m[6];return m[7]!==r||m[8]!==s||m[9]!==l||m[10]!==d||m[11]!==c?(u=e(i).createElement(r,{...s,style:l,ref:d,className:c}),m[7]=r,m[8]=s,m[9]=l,m[10]=d,m[11]=c,m[12]=u):u=m[12],u}:({as:t="span",style:a,...r},n)=>e(i).createElement(t,{...r,style:a,ref:n,className:(0,o("gMc0m").default)(["_2rko1qi0 _1yt41b66 _1e0c1o8l _bfhkizff _1ul912am _4t3ildb6",r.className])})),l=(0,i.forwardRef)((0,r.isReactCompilerActiveV1)()?(t,a)=>{let r,s=(0,n.c)(3);if(s[0]!==a||s[1]!==t){let{as:n,style:l,...d}=t;r=e(i).createElement(void 0===n?"div":n,{...d,style:{...l,"--_10ib6lf":(0,o("7sObp").default)(d.height,"px")},ref:a,className:(0,o("gMc0m").default)(["_2rko1qi0 _1yt41b66 _1e0c1ule _bfhkizff _1bsb1osq _1ul91wqb _vchhusvi",d.height?"_4t3it1jn":"_4t3ildb6",d.className])}),s[0]=a,s[1]=t,s[2]=r}else r=s[2];return r}:({as:t="div",style:a,...r},n)=>e(i).createElement(t,{...r,style:{...a,"--_10ib6lf":(0,o("7sObp").default)(r.height,"px")},ref:n,className:(0,o("gMc0m").default)(["_2rko1qi0 _1yt41b66 _1e0c1ule _bfhkizff _1bsb1osq _1ul91wqb _vchhusvi",r.height?"_4t3it1jn":"_4t3ildb6",r.className])})),d=(0,r.isReactCompilerActiveV1)()?t=>{let a,r=(0,n.c)(4),{showSpinner:d,node:c}=t,{viewportHeight:u}=(0,o("bYtfC").useConnectExtensionViewportSize)(c);return r[0]!==c||r[1]!==d||r[2]!==u?(a=c&&"inlineExtension"===c.type?e(i).createElement(s,{"data-testid":"ext-skeleton"},d&&e(i).createElement(o("9hlns").default,{size:"small"})):e(i).createElement(l,{"data-testid":"ext-skeleton",height:(0,o("9wGTI").fg)("confluence_connect_macro_preset_height")?u:void 0},d&&e(i).createElement(o("9hlns").default,{size:"small"})),r[0]=c,r[1]=d,r[2]=u,r[3]=a):a=r[3],a}:({showSpinner:t,node:a})=>{let{viewportHeight:r}=(0,o("bYtfC").useConnectExtensionViewportSize)(a);return a&&"inlineExtension"===a.type?e(i).createElement(s,{"data-testid":"ext-skeleton"},t&&e(i).createElement(o("9hlns").default,{size:"small"})):e(i).createElement(l,{"data-testid":"ext-skeleton",height:(0,o("9wGTI").fg)("confluence_connect_macro_preset_height")?r:void 0},t&&e(i).createElement(o("9hlns").default,{size:"small"}))};t.exports.LegacyMacroRendererShadow=d}),a.rlb("bxFZs");
//# sourceMappingURL=FullPageEditorComponent.320e29b9.js.map
