function e(e){return e&&e.__esModule?e.default:e}function t(e,t,a,n){Object.defineProperty(e,t,{get:a,set:n,enumerable:!0,configurable:!0})}var a=globalThis.parcelRequired477,n=a.register;n("4arST",function(e,t){var n=a("42omo");e.exports.useGetCollabProviderState=({editorActions:e,collabEditProvider:t,forceAwaitCommitLocalSteps:a=!1,reason:s})=>(0,n.useCallback)((n=!0)=>n||a?e.getResolvedEditorState(s):t?.getCurrentState(),[e,t,a,s])}),n("l3Dp5",function(t,n){var s,i,r,o,l,c,u,d,p,g,m,f,b,h,y,C,v,E,S,I,k,_,P,T,A,w,M,L,D,R,N,O,F,x,U,K,V,B,j,$,q,W,H,G,J=a("42omo"),Q=a("kyKWe");let z={argumentDefinitions:[],kind:"Fragment",name:"usePublishReadEditorOnboardingStateFragment",selections:[{kind:"ScalarField",name:"key"},{kind:"ScalarField",name:"value"}],type:"OnboardingState"};z.hash="bc0f99d71f28b583e23f103ac8634d30";let Z={argumentDefinitions:[],kind:"Fragment",name:"usePublishReadLabelsFragment",selections:[{concreteType:"PaginatedLabelList",kind:"LinkedField",name:"labels",plural:!1,selections:[{concreteType:"Label",kind:"LinkedField",name:"nodes",plural:!0,selections:[{kind:"ScalarField",name:"id"},{kind:"ScalarField",name:"label"}]}]}],type:"Content"};Z.hash="bd62e6bdf52db98920b7aaccd17d29bd";let Y={fragment:{argumentDefinitions:[s={defaultValue:null,kind:"LocalArgument",name:"cloudId"},i={defaultValue:null,kind:"LocalArgument",name:"content"},r={defaultValue:null,kind:"LocalArgument",name:"contentId"},o={defaultValue:null,kind:"LocalArgument",name:"message"},l={defaultValue:null,kind:"LocalArgument",name:"moveRequest"},c={defaultValue:null,kind:"LocalArgument",name:"ncsStepVersion"},u={defaultValue:null,kind:"LocalArgument",name:"restrictions"},d={defaultValue:null,kind:"LocalArgument",name:"schedulePublishDate"},p={defaultValue:null,kind:"LocalArgument",name:"spaceKey"},g={defaultValue:null,kind:"LocalArgument",name:"suppressNotifyWatchers"},m={defaultValue:null,kind:"LocalArgument",name:"title"},f={defaultValue:null,kind:"LocalArgument",name:"version"}],kind:"Fragment",name:"usePublishUpdateBlogMutation",selections:[{args:b=[{kind:"Variable",name:"cloudId",variableName:"cloudId"},{fields:[{fields:[{kind:"Variable",name:"contentBody",variableName:"content"},{kind:"Variable",name:"contentId",variableName:"contentId"},{kind:"Variable",name:"minorEdit",variableName:"suppressNotifyWatchers"},{kind:"Variable",name:"moveRequest",variableName:"moveRequest"},{kind:"Variable",name:"ncsStepVersion",variableName:"ncsStepVersion"},{kind:"Variable",name:"restrictions",variableName:"restrictions"},{kind:"Variable",name:"schedulePublishDate",variableName:"schedulePublishDate"},{kind:"Variable",name:"spaceKey",variableName:"spaceKey"},{kind:"Variable",name:"title",variableName:"title"},{kind:"Variable",name:"version",variableName:"version"},{kind:"Variable",name:"versionMessage",variableName:"message"}],kind:"ObjectValue",name:"confluenceContentInput"},{kind:"Literal",name:"status",value:"draft"}],kind:"ObjectValue",name:"input"}],concreteType:"ConfluenceUpdateBlogPostPayload",kind:"LinkedField",name:"confluence_updateBlogPost",plural:!1,selections:[h={kind:"ScalarField",name:"success"},{concreteType:"Content",kind:"LinkedField",name:"content",plural:!1,selections:[y={kind:"ScalarField",name:"status"},{concreteType:"Space",kind:"LinkedField",name:"space",plural:!1,selections:[C={kind:"ScalarField",name:"name"}]}]},{concreteType:"MutationError",kind:"LinkedField",name:"errors",plural:!0,selections:[v={kind:"ScalarField",name:"message"},{kind:"LinkedField",name:"extensions",plural:!1,selections:[E={kind:"ScalarField",name:"statusCode"}]}]}]}],type:"Mutation"},kind:"Request",operation:{argumentDefinitions:[r,i,o,p,g,c,m,f,d,l,u,s],kind:"Operation",name:"usePublishUpdateBlogMutation",selections:[{args:b,concreteType:"ConfluenceUpdateBlogPostPayload",kind:"LinkedField",name:"confluence_updateBlogPost",plural:!1,selections:[h,{concreteType:"Content",kind:"LinkedField",name:"content",plural:!1,selections:[y,{concreteType:"Space",kind:"LinkedField",name:"space",plural:!1,selections:[C,S={kind:"ScalarField",name:"id"}]},S]},{concreteType:"MutationError",kind:"LinkedField",name:"errors",plural:!0,selections:[v,{kind:"LinkedField",name:"extensions",plural:!1,selections:[{kind:"ScalarField",name:"__typename"},E,{kind:"InlineFragment",selections:[S],type:"BulkMutationErrorExtension"}]}]}]}]},params:{cacheID:"d1dcd7aa5a5eb581bb9f71a4b40ebfab",id:"dac59ea015bb38f073e0245bc110237cf35e76efc584fe170136fdc58b974eab",metadata:{},name:"usePublishUpdateBlogMutation",operationKind:"mutation",text:'mutation usePublishUpdateBlogMutation($contentId:ID!,$content:String!,$message:String,$spaceKey:String!,$suppressNotifyWatchers:Boolean,$ncsStepVersion:String!,$title:String!,$version:Int!,$schedulePublishDate:String,$moveRequest:ConfluenceMoveRequestInput,$restrictions:PageRestrictionsInput,$cloudId:ID!){confluence_updateBlogPost(cloudId:$cloudId,input:{confluenceContentInput:{contentBody:$content,contentId:$contentId,minorEdit:$suppressNotifyWatchers,moveRequest:$moveRequest,ncsStepVersion:$ncsStepVersion,restrictions:$restrictions,schedulePublishDate:$schedulePublishDate,spaceKey:$spaceKey,title:$title,version:$version,versionMessage:$message},status:"draft"}){success,content{status,space{name,id},id},errors{message,extensions{__typename,statusCode,...on BulkMutationErrorExtension{id}}}}}'}};Y.hash="7af895b03b496a8a39cd886822cea6fd";let X={fragment:{argumentDefinitions:[I={defaultValue:null,kind:"LocalArgument",name:"cloudId"},k={defaultValue:null,kind:"LocalArgument",name:"content"},_={defaultValue:null,kind:"LocalArgument",name:"contentId"},P={defaultValue:null,kind:"LocalArgument",name:"message"},T={defaultValue:null,kind:"LocalArgument",name:"moveRequest"},A={defaultValue:null,kind:"LocalArgument",name:"ncsStepVersion"},w={defaultValue:null,kind:"LocalArgument",name:"restrictions"},M={defaultValue:null,kind:"LocalArgument",name:"schedulePublishDate"},L={defaultValue:null,kind:"LocalArgument",name:"spaceKey"},D={defaultValue:null,kind:"LocalArgument",name:"suppressNotifyWatchers"},R={defaultValue:null,kind:"LocalArgument",name:"title"},N={defaultValue:null,kind:"LocalArgument",name:"version"}],kind:"Fragment",name:"usePublishUpdatePageMutation",selections:[{args:O=[{kind:"Variable",name:"cloudId",variableName:"cloudId"},{fields:[{fields:[{kind:"Variable",name:"contentBody",variableName:"content"},{kind:"Variable",name:"contentId",variableName:"contentId"},{kind:"Variable",name:"minorEdit",variableName:"suppressNotifyWatchers"},{kind:"Variable",name:"moveRequest",variableName:"moveRequest"},{kind:"Variable",name:"ncsStepVersion",variableName:"ncsStepVersion"},{kind:"Variable",name:"restrictions",variableName:"restrictions"},{kind:"Variable",name:"schedulePublishDate",variableName:"schedulePublishDate"},{kind:"Variable",name:"spaceKey",variableName:"spaceKey"},{kind:"Variable",name:"title",variableName:"title"},{kind:"Variable",name:"version",variableName:"version"},{kind:"Variable",name:"versionMessage",variableName:"message"}],kind:"ObjectValue",name:"confluenceContentInput"},{kind:"Literal",name:"status",value:"draft"}],kind:"ObjectValue",name:"input"}],concreteType:"ConfluenceUpdatePagePayload",kind:"LinkedField",name:"confluence_updatePage",plural:!1,selections:[F={kind:"ScalarField",name:"success"},{concreteType:"Content",kind:"LinkedField",name:"content",plural:!1,selections:[x={kind:"ScalarField",name:"status"},{concreteType:"Space",kind:"LinkedField",name:"space",plural:!1,selections:[U={kind:"ScalarField",name:"name"}]}]},K={concreteType:"MutationError",kind:"LinkedField",name:"errors",plural:!0,selections:[{kind:"ScalarField",name:"message"}]}]}],type:"Mutation"},kind:"Request",operation:{argumentDefinitions:[_,k,P,L,D,A,R,N,M,T,w,I],kind:"Operation",name:"usePublishUpdatePageMutation",selections:[{args:O,concreteType:"ConfluenceUpdatePagePayload",kind:"LinkedField",name:"confluence_updatePage",plural:!1,selections:[F,{concreteType:"Content",kind:"LinkedField",name:"content",plural:!1,selections:[x,{concreteType:"Space",kind:"LinkedField",name:"space",plural:!1,selections:[U,V={kind:"ScalarField",name:"id"}]},V]},K]}]},params:{cacheID:"9476565a51ac7c7e43a747a3881a3b9b",id:"26833498b22c7d70fbdb568b26b4bf40dfd88af749332909a7297ea6648827d3",metadata:{},name:"usePublishUpdatePageMutation",operationKind:"mutation",text:'mutation usePublishUpdatePageMutation($contentId:ID!,$content:String!,$message:String,$spaceKey:String!,$suppressNotifyWatchers:Boolean,$ncsStepVersion:String!,$title:String!,$version:Int!,$schedulePublishDate:String,$moveRequest:ConfluenceMoveRequestInput,$restrictions:PageRestrictionsInput,$cloudId:ID!){confluence_updatePage(cloudId:$cloudId,input:{confluenceContentInput:{contentBody:$content,contentId:$contentId,minorEdit:$suppressNotifyWatchers,moveRequest:$moveRequest,ncsStepVersion:$ncsStepVersion,restrictions:$restrictions,schedulePublishDate:$schedulePublishDate,spaceKey:$spaceKey,title:$title,version:$version,versionMessage:$message},status:"draft"}){success,content{status,space{name,id},id},errors{message}}}'}};X.hash="4a092d33c8968666f2ab286d05db05cb";let ee={fragment:{argumentDefinitions:B=[{defaultValue:null,kind:"LocalArgument",name:"contentId"}],kind:"Fragment",name:"usePublishWriteWatchDialogQuery",selections:$=[{args:[{kind:"Variable",name:"id",variableName:"contentId"}],concreteType:"Content",kind:"LinkedField",name:"singleContent",plural:!1,selections:[j={kind:"ScalarField",name:"id"},{kind:"ScalarField",name:"currentUserIsWatching"},{kind:"ScalarField",name:"currentUserIsWatchingChildren"},{kind:"ScalarField",name:"currentUserHasAncestorWatchingChildren"},{kind:"ScalarField",name:"type"},{concreteType:"Space",kind:"LinkedField",name:"space",plural:!1,selections:[j,{kind:"ScalarField",name:"key"},{concreteType:"SpaceUserMetadata",kind:"LinkedField",name:"currentUser",plural:!1,selections:[{kind:"ScalarField",name:"isWatched"},{kind:"ScalarField",name:"isWatchingBlogs"}]},{concreteType:"OperationCheckResult",kind:"LinkedField",name:"operations",plural:!0,selections:[{kind:"ScalarField",name:"operation"},{kind:"ScalarField",name:"targetType"}]}]}]}],type:"Query"},kind:"Request",operation:{argumentDefinitions:B,kind:"Operation",name:"usePublishWriteWatchDialogQuery",selections:$},params:{cacheID:"d3077504ad82143398de67f698bd83fa",id:"68f6ab024dc28ed12433e812725c366f33bf80bbdfc1a50890e0e754e5f9805d",metadata:{},name:"usePublishWriteWatchDialogQuery",operationKind:"query",text:"query usePublishWriteWatchDialogQuery($contentId:ID!){singleContent(id:$contentId){id,currentUserIsWatching,currentUserIsWatchingChildren,currentUserHasAncestorWatchingChildren,type,space{id,key,currentUser{isWatched,isWatchingBlogs},operations{operation,targetType}}}}"}};ee.hash="97cf54f4c7a6eb0b9fc152d743a5b208";let et={fragment:{argumentDefinitions:q=[{defaultValue:null,kind:"LocalArgument",name:"contentId"}],kind:"Fragment",name:"usePublishReadWatchDialogQuery",selections:H=[{args:[{kind:"Variable",name:"id",variableName:"contentId"}],concreteType:"Content",kind:"LinkedField",name:"singleContent",plural:!1,selections:[W={kind:"ScalarField",name:"id"},{kind:"ScalarField",name:"currentUserIsWatching"},{kind:"ScalarField",name:"currentUserIsWatchingChildren"},{kind:"ScalarField",name:"currentUserHasAncestorWatchingChildren"},{kind:"ScalarField",name:"type"},{concreteType:"Space",kind:"LinkedField",name:"space",plural:!1,selections:[W,{kind:"ScalarField",name:"key"},{concreteType:"SpaceUserMetadata",kind:"LinkedField",name:"currentUser",plural:!1,selections:[{kind:"ScalarField",name:"isWatched"},{kind:"ScalarField",name:"isWatchingBlogs"}]},{concreteType:"OperationCheckResult",kind:"LinkedField",name:"operations",plural:!0,selections:[{kind:"ScalarField",name:"operation"},{kind:"ScalarField",name:"targetType"}]}]}]}],type:"Query"},kind:"Request",operation:{argumentDefinitions:q,kind:"Operation",name:"usePublishReadWatchDialogQuery",selections:H},params:{cacheID:"936286f87799e6ca0caeb3f3d609b646",id:"3f0f7a0cd2fcd849d362525b437f482a4654f1bdbc5675ae6c88d39820ea242c",metadata:{},name:"usePublishReadWatchDialogQuery",operationKind:"query",text:"query usePublishReadWatchDialogQuery($contentId:ID!){singleContent(id:$contentId){id,currentUserIsWatching,currentUserIsWatchingChildren,currentUserHasAncestorWatchingChildren,type,space{id,key,currentUser{isWatched,isWatchingBlogs},operations{operation,targetType}}}}"}};et.hash="2d5cd255c069fd9713a7b4ece55fc355";var ea=a("3venW"),en=a("dYcT6"),es=a("04e9M");let ei=(0,a("eSUdr").default)`query OnboardingEditorLabelsQuery($contentId:ID!$status:[String]){content(id:$contentId status:$status){nodes{id labels{nodes{id label}}}}}`,er={key:Object.values(a("5cryL").EDITOR_ONBOARDING_STATE_KEYS)},eo=()=>{(0,a("6mKj3").expValEquals)("confluence_centralized_onboarding_state","isEnabled",!0)||(0,a("hp2SH").getApolloClient)().query({query:a("66UJS").getOnboardingStateGQL,variables:er})},el=e=>{try{let t,n=Object.values(a("5cryL").EDITOR_ONBOARDING_STATE_KEYS);return t=(0,a("6mKj3").expValEquals)("remove_usages_of_cache_read_write","isEnabled",!0)?{onboardingState:t=n.map(t=>e({id:t}))}:(0,a("6mKj3").expValEquals)("confluence_centralized_onboarding_state","isEnabled",!0)?(0,a("ivb8S").getOnboardingStateFromCache)(n):(0,a("9PBjm").getApolloCache)().readQuery({query:a("66UJS").getOnboardingStateGQL,variables:er}),(0,a("ivb8S").deserializeState)(t)}catch(e){return(0,es.getAnalyticsWebClient)().then(t=>{t.sendOperationalEvent({source:"OnboardingState",actionSubject:"getEditorOnboardingCache",action:"failed",attributes:{error:e}})}),eo(),{}}},ec=e=>{(0,a("hp2SH").getApolloClient)().query({query:ei,variables:{contentId:e,status:["current","draft"]}})},eu=(e,t)=>{try{let n;if((0,a("6mKj3").expValEquals)("remove_usages_of_cache_read_write","isEnabled",!0))n=t({id:`Content:${e}`})?.nodes||[];else{let t=(0,a("9PBjm").getApolloCache)().readQuery({query:ei,variables:{contentId:e,status:["current","draft"]}});n=t?.content?.nodes?.[0]?.labels?.nodes||[]}return n&&!!n.find(e=>e?.label===a("5cryL").ONBOARDING_TUTORIAL_LABEL)}catch(t){return(0,es.getAnalyticsWebClient)().then(e=>{e.sendOperationalEvent({source:"LabelsQuery",actionSubject:"getEditorLabelsQueryCache",action:"failed",attributes:{error:t}})}),ec(e),!1}};var ed=a("3WXN2"),ep=a("cVfpT");let eg=(0,a("jmjWc").LoadableLazy)({__loadable_id__:"0x46P",name:"LazyWhiteBoardPublishDiscoveryDialog",loader:async()=>(await a("lmTxZ")).WhiteBoardPublishDiscoveryDialog}),em=(0,a("jmjWc").LoadableLazy)({__loadable_id__:"qKq0F",name:"LazyJiraLinkAutomationDiscoveryDialog",loader:async()=>(await a("ems45")).JiraLinkAutomationDiscoveryDialog});var ef=a("f4L8J");let eb=(0,a("jmjWc").LoadableLazy)({__loadable_id__:"nADL6",name:"LazyReleaseNotesPublishDiscoveryDialog",loader:async()=>(await Promise.resolve(a("f4L8J"))).ReleaseNotesDialog});var eh=a("ekkfU");let ey=(0,a("jmjWc").LoadableLazy)({__loadable_id__:"FirLe",name:"LazyFeedbackAnalysisDiscoveryDialog",loader:async()=>(await Promise.resolve(a("ekkfU"))).FeedbackAnalysisDialog});var eC=a("9wXqm");let ev=(0,a("jmjWc").LoadableLazy)({__loadable_id__:"a8JLk",name:"LazyProductRequirementsPublishDiscoveryDialog",loader:async()=>(await Promise.resolve(a("9wXqm"))).ProductRequirementsDialog}),eE="[a-zA-Z0-9]+-\\d+",eS=RegExp(`\\/browse\\/(?<resourceId>${eE})#?.*?\\/?$`),eI=RegExp(`(\\/jira)?\\/servicedesk\\/customer\\/portal\\/\\d+\\/${eE}\\/?.*$`),ek=RegExp(`(\\/jira)?\\/servicedesk\\/projects\\/[\\w]*\\/queues\\/(custom|issue)\\/(\\d+\\/)?${eE}\\/?.*$`),e_=RegExp(`(\\/jira)?\\/servicedesk\\/projects\\/[\\w]*\\/section\\/(incidents|changes|service-requests|problems)\\/custom\\/\\d+\\/${eE}\\/?.*$`),eP=RegExp(`(\\/jira)?\\/helpcenter\\/[\\w-]+\\/portal\\/\\d+\\/${eE}\\/?.*$`),eT=RegExp("\\/projects\\/[^\\/]+?\\/versions\\/\\d+\\/?"),eA=[eS,eI,ek,e_,eP,eT,RegExp("\\/browse\\/[^#\\/\\?]+(\\#[^\\/]*?)?(\\?[^\\/]*?)?$"),RegExp("\\/issues\\/.*?(\\&|\\?)(?!.*filter=)jql=[^&]*")],ew=e=>"extension"===e.type&&e.attrs?.extensionKey==="jira",eM=e=>"inlineCard"===e.type&&eR(e?.attrs?.url||e?.attrs?.data?.url),eL=e=>{if(!e.marks)return!1;let t=e.marks.filter(e=>"link"===e.type)[0];return eR(t?.attrs?.href)},eD=e=>(0,a("lcuos").filter)(e,e=>ew(e)||eM(e)||eL(e)).length>0,eR=e=>{if(!e)return!1;let t=e.match(/atlassian\.net|jira\.com/),a=t&&e.indexOf("/jira/")>=0,n=!!(t&&e.match(/\/browse\/[a-zA-Z][a-zA-Z0-9]{0,9}-[0-9]+/));if(a||n)return!0;for(let t of eA)if(t.test(e))return!0;return!1},eN=(0,a("jmjWc").LoadableLazy)({__loadable_id__:"Wsth_",name:"LazyPagePublishAutomationDiscoveryDialog",loader:async()=>(await a("jvs33")).PagePublishAutomationDiscoveryDialog});var eO=a("8Vmxc"),eF=a("kfvGz"),ex=a("c2PBW");let eU=(0,a("eSUdr").default)`query ContentAndHeaderQuery($contentId:ID!$spaceKey:String=null$versionOverride:Int=null$embeddedContentRender:String=null$limit:Int=4$useNewContentTopper:Boolean=false){content(id:$contentId version:$versionOverride embeddedContentRender:$embeddedContentRender){nodes{id type subType title history{createdBy{type displayName ...on KnownUser{accountId}profilePicture{path}}}emojiTitlePublished:properties(key:"emoji-title-published"){nodes{id key value version{number}}}pageTitlePublished:properties(key:"page-title-property-published")@include(if:$useNewContentTopper){nodes{id key value version{number}}}properties(keys:["cover-picture-id-published" "editor"]){nodes{id key value version{number}}}space{id key name}version{confRev message by{type displayName ...on KnownUser{accountId}profilePicture{path}}friendlyWhen when number contentTypeModified}metadata{sourceTemplateEntityId lastModifiedDate frontend{fabricEditorSupported coverPictureWidth@include(if:$useNewContentTopper)}}body{dynamic{representation value content{version{number}}webresource{superbatch{tags{js css}}tags{js css}}}}appearancePublished:properties(key:"content-appearance-published"){nodes{id key value version{number}}}}}contentContributors(id:$contentId limit:$limit){count isCurrentUserContributor nodes{type displayName ...on KnownUser{accountId}profilePicture{path}}}space(key:$spaceKey){id theme{name themeKey}lookAndFeel{headings{key value}content{header{background backgroundAttachment backgroundBlendMode backgroundClip backgroundColor backgroundImage backgroundOrigin backgroundPosition backgroundRepeat backgroundSize borderRadius padding}screen{background backgroundColor backgroundImage backgroundPosition backgroundSize backgroundRepeat backgroundOrigin backgroundClip backgroundAttachment backgroundBlendMode layer{background backgroundColor backgroundImage backgroundPosition backgroundSize backgroundRepeat backgroundOrigin backgroundClip backgroundAttachment backgroundBlendMode width height}gutterTop gutterRight gutterBottom gutterLeft}container{background backgroundColor backgroundImage backgroundPosition backgroundSize backgroundRepeat backgroundOrigin backgroundClip backgroundAttachment backgroundBlendMode padding borderRadius}}}settings{routeOverrideEnabled}}}`,eK=(e,t)=>{let n=(0,a("bMPhU").useSpaceHomepageId)(t);return(0,J.useCallback)(async()=>{let s,i,r;if(e===n)try{s=await (0,a("hp2SH").getApolloClient)().query({query:a("82xkT").SpaceOverviewQuery,context:{single:!0},fetchPolicy:"network-only",variables:{spaceKey:t,excludeOperations:!(0,a("cEgMD").isCompanyHubSpaceKey)(t)}})}catch(e){}if(e){try{i=await (0,a("hp2SH").getApolloClient)().query({query:eU,context:{single:!0},fetchPolicy:"network-only",variables:{contentId:e,spaceKey:t,useNewContentTopper:!0,cacheBuster:Date.now()}})}catch(e){}if((0,a("6mKj3").expValEquals)("confluence_compact_text_format","isEnabled",!0)||(0,a("6mKj3").expValEquals)("cc_editor_ai_content_mode","variant","test")&&(0,a("9wGTI").fg)("platform_editor_content_mode_button_mvp"))try{r=await (0,a("hp2SH").getApolloClient)().query({query:(0,a("86okN").toDocumentNode)(a("joyRP").default),context:{single:!0},fetchPolicy:"network-only",variables:{contentId:e,isDraft:!1,status:["current"]}})}catch(e){}}return{spaceOverviewQueryResponse:s,contentAndHeaderQueryResponse:i,contentModeQueryResponse:r}},[e,t,n])},eV=()=>{let{tenantId:e}=(0,J.useContext)(a("1ytiN").SPAViewContext),{isProductAdmin:t}=(0,a("1BYn9").useIsProductAdmin)(),{createAnalyticsEvent:n}=(0,a("inPa6").useAnalyticsEvents)(),s=(0,J.useCallback)(()=>{n({type:"sendTrackEvent",data:{action:"requested",actionSubject:"saveHubConfirmationDialog",source:"companyHub"}}).fire()},[n]);return(0,J.useCallback)(async n=>{if(!t)return void s();let{bannerId:i,bannerStatus:r}=await (0,a("letmB").getCompanyHubAnnouncementBanner)(n,e);if(!i)return void s();r&&"SAVED"!==r&&s()},[t,e,s])},eB="Current user does not have permission to update site settings",ej=(0,a("cgtv4").defineMessages)({publishSuccessTitle:{id:"editor-features.success.front-cover.publish.title",defaultMessage:"{companyHubName} is now active"},updateSuccessTitle:{id:"editor-features.success.front-cover.update.title",defaultMessage:"{companyHubName} has been updated"},publishSuccessDescription:{id:"editor-features.user.publish.front-cover.success",defaultMessage:"This hub is now visible to everyone. Make updates to it anytime."},updateSuccessDescription:{id:"editor-features.user.update.front-cover.success",defaultMessage:"Your recent update is now visible to everyone."},publishErrorTitle:{id:"editor-features.front-cover.publish.error-title",defaultMessage:"Something went wrong"},publishErrorDescription:{id:"editor-features.publish.front-cover.error-message",defaultMessage:"Due to an error, this landing page failed to publish. Reload and publish it again."}}),e$=(t,n,s,i)=>{let r=(0,J.useContext)(a("1kHsc").ExperienceTrackerContext),{frontCoverState:o,companyHubName:l}=(0,J.useContext)(a("1ytiN").SPAViewContext),{isProductAdmin:c}=(0,a("1BYn9").useIsProductAdmin)(),u=(0,J.useCallback)(()=>{let t,n;o===a("cEgMD").FrontCoverStateEnum.SHOWN?(t=ej.updateSuccessTitle,n=ej.updateSuccessDescription):(t=ej.publishSuccessTitle,n=ej.publishSuccessDescription),s?.showFlag({type:"success-circle",title:e(J).createElement(a("gtD4K").default,{...t,values:{companyHubName:l}}),description:e(J).createElement(a("gtD4K").default,n),close:"never",customComponent:a("aD1SW").default})},[s,l,o]),d=(0,J.useCallback)(()=>{s?.showFlag({type:"error",title:e(J).createElement(a("gtD4K").default,ej.publishErrorTitle),description:e(J).createElement(a("gtD4K").default,ej.publishErrorDescription),close:"never"})},[s]),{changeHubPublishState:p}=(0,a("5wLVq").useChangeCompanyHubPublishState)(),g=eV(),m=(0,J.useCallback)(async()=>{let e=i?await i(!0):{},t=e?.content?.nodes?.[0]?.version?.number??1;r.start({name:a("irVI7").FRONT_COVER_PUBLISH_EXPERIENCE,attributes:{contentId:n,isFirstPublish:1===t}});try{let{data:e}=await p(a("k7Jwr").GraphQLFrontCoverState.SHOWN);if(e?.updateSiteLookAndFeel.siteLookAndFeel?.frontCoverState!==a("cEgMD").FrontCoverStateEnum.SHOWN){if(e?.updateSiteLookAndFeel.errors?.some(e=>e?.message?.includes(eB)))return void r.abort({name:a("irVI7").FRONT_COVER_PUBLISH_EXPERIENCE,reason:eB});{let t=(e?.updateSiteLookAndFeel.errors||[]).map(e=>e.message).join(".");throw Error(t||"An unknown error occurred")}}r.succeed({name:a("irVI7").FRONT_COVER_PUBLISH_EXPERIENCE})}catch(e){throw r.stopOnError({name:a("irVI7").FRONT_COVER_PUBLISH_EXPERIENCE,error:e}),e}},[n,r,p,i]),f=(0,J.useCallback)(async()=>{let e=o===a("cEgMD").FrontCoverStateEnum.SHOWN;try{!e&&c&&await m()}catch(e){d();return}await g(n),u()},[o,c,m,d,u,g,n]);(0,J.useEffect)(()=>{if((0,a("cEgMD").isCompanyHubSpaceKey)(t))return r.subscribe(e=>{e.name===a("irVI7").EDIT_PAGE_PUBLISH_EXPERIENCE&&"taskSuccess"===e.action&&e.attributes?.isCompanyHub&&f()})},[n,r,t,f])},eq=({forceRefetchContent:e,maxRetryCount:t,retryDelayMs:n})=>(0,J.useCallback)(async()=>{let s=0,i=!1,r=!1,o=async()=>{let{contentAndHeaderQueryResponse:t}=await e();if(s++,i=!t?.data?.content?.nodes?.length,r=t?.data?.content?.nodes?.[0]?.subType==="live",i||r)throw Error("forceRefetchPublishedLiveDoc invalid/outdated")};try{await (0,a("bMmYR").retry)(o,{maxAttempts:t,timeout:n})}catch{}return{retryCount:s-1,isResponseInvalid:i,isResponseOutdated:r}},[e,t,n]),eW=(0,a("eSUdr").default)`mutation PublishMutation($contentId:ID!$contentType:String!$content:String!$message:String$spaceKey:String!$suppressNotifyWatchers:Boolean$ncsStepVersion:String!$title:String!$version:Int!$schedulePublishDate:String$ancestors:[Ancestor]$moveRequest:MoveRequestObj$restrictions:ContentRestrictionsObj$isBlueprintCreate:Boolean)@experimental{experimentalPublishEditorContent(contentId:$contentId contentType:$contentType content:$content message:$message spaceKey:$spaceKey ncsStepVersion:$ncsStepVersion suppressNotifyWatchers:$suppressNotifyWatchers title:$title version:$version schedulePublishDate:$schedulePublishDate ancestors:$ancestors moveRequest:$moveRequest restrictions:$restrictions isBlueprintCreate:$isBlueprintCreate){success status createdDate message traceId space{name}}}`,eH=(0,a("cgtv4").defineMessages)({titleKeywordForAutomationDiscovery:{id:"editor-features.title-keyword-for-automation-discovery.",defaultMessage:"meeting"},networkErrorTitle:{id:"editor-features.use-publish.network-error.title",defaultMessage:"Can’t save changes"},networkErrorDescription:{id:"editor-features.use-publish.network-error.description",defaultMessage:"Check your network connection, refresh the page, and try again. If the problem persists, contact your administrator for help."},outdatedRefetchErrorFlagTitle:{id:"editor-features.use-publish.outdated-refetch-error-flag.title",defaultMessage:"To view your published page, refresh now"},outdatedRefetchErrorFlagDescription:{id:"editor-features.use-publish.outdated-refetch-error-flag.description",defaultMessage:"{pageTitle} was converted and published, but we weren’t able to redirect to the converted page. If this keeps happening, contact Support."},outdatedRefetchFlagRefresh:{id:"editor-features.use-publish.outdated-refetch-error-flag.refresh",defaultMessage:"Refresh"}});class eG extends Error{constructor(e,t){super(e),this.message=e,this.traceId=t,this.traceId=t}}let eJ=({contentId:t,contentType:n,refetchNativeCollab:s,editorActions:i,embeddedConfluenceSource:r,spaceKey:o,afterPublish:l,version:c,onCollabError:u,saveDraftPromise:d,checkIfConditionPreventingPublish:p,flags:g,dialogs:m,startingLinks:f,optimisticDeleteItemInTree:b,editorPresetAPI:h})=>{let y=(0,a("8C5kA").default)(),[C,v]=(0,J.useState)(!1),{showEditorFlag:E}=(0,en.useEditorFlagsContext)(),{showEditorModal:S}=(0,a("6LguK").useEditorModalContext)(),{createAnalyticsEvent:I}=(0,a("inPa6").useAnalyticsEvents)(),k={refetchQueries:["PageRestrictionsQuery"],update:()=>{let e=JSON.parse(JSON.stringify((0,a("l1uFv").readQueryInterop)({query:et,variables:{contentId:t}})));if(!e||!e.singleContent)return;let{singleContent:s}=e,{space:i}=s;"page"===n?s.currentUserIsWatching=!0:i&&("space"===n?i.currentUser.isWatched=!0:"blogpost"===n&&(i.currentUser.isWatchingBlogs=!0)),(0,a("fEmGS").writeQueryInterop)({query:ee,data:e})}},[_]=(0,a("308Wd").useMutationInterop)(X,k),[P]=(0,a("308Wd").useMutationInterop)(Y,k),[T]=(0,a("1KmJq").useMutation)(eW,{refetchQueries:["PageRestrictionsQuery"],update:e=>{let s=Object.assign({},e.readQuery({query:(0,a("hpr9b").getWatchDialogQuery)(),variables:{contentId:t}}));if(!s||!s.singleContent)return;let{singleContent:i}=s,{space:r}=i;"page"===n?i.currentUserIsWatching=!0:r&&("space"===n?r.currentUser.isWatched=!0:"blogpost"===n&&(r.currentUser.isWatchingBlogs=!0)),e.writeQuery({query:(0,a("hpr9b").getWatchDialogQuery)(),data:s})}}),[{collabEditProvider:A,collabEditInitialized:w}]=(0,a("hYoU4").useNativeCollabState)(),M=(0,J.useContext)(a("1kHsc").ExperienceTrackerContext),L=eK(t,o),D=eq({forceRefetchContent:L,maxRetryCount:1,retryDelayMs:300}),{copyContentLink:R}=(0,ed.useCopyContentLink)({pageMode:ep.PAGE_MODE.VIEW,contentType:n,contentId:t,spaceKey:o,source:"usePublish - publishSuccessFlag"}),N=(0,a("bUSKZ").useMigratedRecently)(t),{cloudId:O,isLoggedIn:F,isLicensed:x,edition:U,isAdminHubAIEnabled:K,userId:V}=(0,a("bQm3c").useSessionData)(),{setIsPublishing:B}=(0,a("2wSyg").useDraftSyncAndPublishContext)(),j=(0,a("iV5Ic").useReactProps_DO_NOT_USE)(),[$,q]=(0,a("kdpMy").useGeneratedTitle)(),W=(0,a("3jwuS").useIsCurrentPageLive)(),H=(0,a("fFmJj").useReadFragmentInterop)({fragmentSpec:Z}),G=(0,a("fFmJj").useReadFragmentInterop)({fragmentSpec:z}),{setOnboardingState:Q}=(0,a("ivb8S").useSetOnboardingState)(),{editorOnboardingEligiblity:es,hasUserPublished:ei,editorTutorialSuccessFlagCompleted:er}=F&&x?el(G):{editorOnboardingEligiblity:null,hasUserPublished:!0,editorTutorialSuccessFlagCompleted:!0},eo=(0,a("cEgMD").isCompanyHubSpaceKey)(o),ec=!!F&&!!x&&!eo&&eu(t,H),{setHasMetPublishNudgeConditions:eE}=(0,a("dz5dy").useOnboardingEditorActions)(),eS=(0,a("4arST").useGetCollabProviderState)({editorActions:i,collabEditProvider:A,reason:"publish"}),{triggerAnalyticsEvent:eI}=(0,a("e9owJ").useEditorAnalyticsEvent)({contentId:t,contentType:n,embeddedConfluenceSource:r,source:"editPageScreen",subject:"page",version:c,collabService:"ncs"}),{triggerPageConflictAnalytics:ek}=(0,a("gQojb").usePageConflictAnalytics)({source:"usePublish",actionSubjectId:"editor.publish",contentId:t,contentType:n,collabService:"ncs",version:c}),e_=(e,t)=>{let a=Math.max(e.length,t.length);return 0===a?0:100-(a-(0,ea.get)(e,t))/a*100};e$(o,t,g,s);let eP=(0,eO.useInviteOnLinkInsertEligibilityCheck)(g),eT=(0,eO.useShowInviteOnLinkInsertFlag)(g),{isEligible:eA,suggestedUsers:ew,showShareModal:eM}=(0,eF.useShareLinkSocialOnPublish)(t,o,V,!(0,a("9wGTI").fg)("cc_engagement_share_link_publish_enabled")),eL=(0,J.useCallback)(async({suppressNotifyWatchers:i,message:r,retryOnConflict:c,isButtonClicked:k,schedulePublishDate:A,ancestors:F,newSpaceKey:x,restrictions:V,moveRequest:H})=>{if(k&&p&&await p()||C)return;let G=W?a("irVI7").LIVE_PAGE_PUBLISH_EXPERIENCE:a("irVI7").EDIT_PAGE_PUBLISH_EXPERIENCE,z=W?a("aJPUt").ExperienceTimeout.LIVE_PAGE_PUBLISH:a("aJPUt").ExperienceTimeout.EDITOR_PUBLISH;k&&(M.start({name:G,timeout:z,attributes:{collabService:"ncs",isCompanyHub:eo,contentId:t}}),a("3VbV8").FABRIC_PUBLISH_PAGE_METRIC.start());let Z=setTimeout(()=>{E({errorName:a("1mHQU").ALLOWED_FLAG_MESSAGES.PUBLISH_TIME_TOO_LONG_ERROR,isUnpublishedDraft:et})},15e3);if(v(!0),d)try{await d}catch{}B(!0);let Y=await s(!1),X=(0,a("lREFo").getBlueprintFromLabels)(Y),ee=Y?.content?.nodes?.[0],et=!ee?.history?.createdBy,ea=ee?.version?.number??1,en=ee?.space?.name,el=ee?.subType,eu=ee?.space?.homepageId===t||void 0,ed={blueprintType:X,isUnpublishedDraft:et,contentId:t,retryOnConflict:c,collabEditInitialized:w,collabService:"ncs",isPublishing:C,migratedRecently:N},ep=!1;Promise.resolve(eS()).then(s=>{let u;if(!s)return void M.fail({name:G,error:Error(`${G} failed: ackState is undefined`),attributes:ed});let{title:d,content:p,stepVersion:C}=s,k=et?1:ea+1;if(!d&&es&&(0,a("9wGTI").fg)("cc_onboarding_experience")&&""===r&&!i){S(a("8FvpY").ALLOWED_EDITOR_MODAL.ONBOARDING_EDITOR_MODAL),M.abort({name:G,reason:`${G} aborted: title is empty on normal publish`,attributes:ed});return}if(!d){M.abort({name:G,reason:`${G} aborted: title is empty`,attributes:ed}),E({errorName:a("1mHQU").ALLOWED_FLAG_MESSAGES.TITLE_REQUIRED,isUnpublishedDraft:et});return}return((0,a("6mKj3").expValEquals)("use_graphql_to_publish_pages_and_blogs","isEnabled",!0)?"blogpost"===n?P:_:T)({variables:{contentId:t,contentType:n,content:JSON.stringify(p),message:r,spaceKey:x||o,ncsStepVersion:C.toString(),suppressNotifyWatchers:i,title:d,version:k,schedulePublishDate:A,ancestors:F,restrictions:(0,a("1Z5gD").sanitizeRestrictionsForGraphQL)(V),moveRequest:H?.position&&H?.targetId?{position:(0,a("6mKj3").expValEquals)("use_graphql_to_publish_pages_and_blogs","isEnabled",!0)?H?.position?.toUpperCase():H?.position,targetId:H?.targetId}:void 0,isBlueprintCreate:!!X&&et,cloudId:O}}).then(async s=>{let u;u=(0,a("6mKj3").expValEquals)("use_graphql_to_publish_pages_and_blogs","isEnabled",!0)?"blogpost"===n?s?.data?.confluence_updateBlogPost:s?.data?.confluence_updatePage:s?.data?.experimentalPublishEditorContent;let C=u?.success,S=(0,a("6mKj3").expValEquals)("use_graphql_to_publish_pages_and_blogs","isEnabled",!0)?u?.errors?.[0]?.extensions?.[0]?.statusCode:u?.status,_=(0,a("6mKj3").expValEquals)("use_graphql_to_publish_pages_and_blogs","isEnabled",!0)?u?.errors?.[0]?.message:u?.message,P=(0,a("6mKj3").expValEquals)("use_graphql_to_publish_pages_and_blogs","isEnabled",!0)?s?.extensions?.gateway?.trace_id:u?.traceId,T=(0,a("6mKj3").expValEquals)("use_graphql_to_publish_pages_and_blogs","isEnabled",!0)?u?.content?.space?.name??en:u?.space?.name??en;if(409===S&&c){ek(_,{cloudId:O,retry:c,newVersionNumber:k,migratedRecently:N,isUnpublishedDraft:et}),v(!1),eL({suppressNotifyWatchers:i,message:r,retryOnConflict:!1,isButtonClicked:!1,schedulePublishDate:A,ancestors:F,newSpaceKey:x,restrictions:V});return}if(clearTimeout(Z),C){let s;a("3VbV8").FABRIC_PUBLISH_PAGE_METRIC.stop({customData:{collabService:"ncs",didRetry:!c}}),(0,a("6mKj3").expValEquals)("platform_synced_block","isEnabled",!0)&&(s=await h?.syncedBlock?.actions.flushBodiedSyncBlocks(),await h?.syncedBlock?.actions.flushSyncedBlocks()),H?.previousParentPageId&&b&&(0,a("9wGTI").fg)("confluence_publish_move_fix")&&b(t);let i=et?"created":"updated",r=(0,a("1iSzD").isEmbeddedConfluence_DO_NOT_USE)();if($?.generatedTitle!==""){let e=e_(d,$.generatedTitle);I({type:"sendTrackEvent",data:{actionSubject:"editorTitle",action:"publishedAfterTitleGen",source:"editPageScreen",attributes:{pageAction:i,contentId:t,diffPercentage:e}}}).fire(),e<50&&$.trackAIResultViewStored({doesNotMeetMAUCriteria:!1}),q.setGeneratedTitle("")}let C=(0,a("3JtSu").getPageElementCounts)(p),v=d.match(/\b\w+\b/g);if(r){try{await eI(i,{editorType:"next",isLivePage:"live"===el,pageElementCounts:C,titleLength:v?v.length:0})}catch(e){throw Error("An error occurred while firing Track analytics events on publish:",e.message)}j?.onPublish?.(T,x)}else eI(i,{editorType:"next",isLivePage:"live"===el,isFabric:!0,pageElementCounts:C,titleLength:v?v.length:0,isSpaceOverview:eu});if(M.succeed({name:a("irVI7").EDIT_PAGE_PUBLISH_EXPERIENCE,attributes:{contentId:t,collabService:"ncs",traceId:P,newSpaceKey:x}}),N&&M.succeed({name:a("irVI7").MIGRATE_PAGE_PUBLISH_EXPERIENCE,attributes:{contentId:t,collabService:"ncs",traceId:P}}),!A&&l){if("live"===el){let{retryCount:a,isResponseOutdated:n,isResponseInvalid:s}=await D();a>0&&I({type:"sendOperationalEvent",data:{action:"retried",actionSubject:"forceRefetchPublishedLiveDoc",source:"usePublish",attributes:{retryCount:a,isResponseOutdated:n,isResponseInvalid:s,contentId:t}}}).fire(),(n||s)&&(g?.showFlag({type:"error",title:y.formatMessage(eH.outdatedRefetchErrorFlagTitle),description:y.formatMessage(eH.outdatedRefetchErrorFlagDescription,{pageTitle:e(J).createElement("b",null,d)}),close:"never",actions:[{content:y.formatMessage(eH.outdatedRefetchFlagRefresh),href:"",onClick:()=>window.location.reload()}]}),ep=!0)}else await L();l({res:u,newSpaceKey:x,isLivePagePublish:"live"===el})}if(es&&(0,a("9wGTI").fg)("cc_onboarding_experience")&&(ei||Q({key:a("5cryL").EDITOR_ONBOARDING_STATE_KEYS.HAS_USER_PUBLISHED,value:"true"}),eE(!ei)),!A&&g){let e=ec&&!er,i=((0,a("9wGTI").fg)("a4c_free_and_standard_editions")||U===a("euL71").ConfluenceEdition.PREMIUM)&&"page"===n&&et,r=i&&!a("17wUi").confluenceLocalStorageInstance.getItemAsBoolean(a("1UApO").keys.AUTOMATION_DISCOVER_JIRA_LINK)&&eD(p),l=K&&i&&!a("17wUi").confluenceLocalStorageInstance.getItemAsBoolean(a("1UApO").keys.AUTOMATION_DISCOVER_MEETING_NOTES_TEMPLATE)&&d.toLowerCase().includes(y.formatMessage(eH.titleKeywordForAutomationDiscovery)),c=i&&!a("17wUi").confluenceLocalStorageInstance.getItemAsBoolean(a("1UApO").keys.AUTOMATION_DISCOVER_WHITE_BOARDS)&&(0,a("5ueVa").isEligibleForWhiteboardDiscovery)(d),u=i&&!a("17wUi").confluenceLocalStorageInstance.getItemAsBoolean(a("1UApO").keys.AUTOMATION_DISCOVER_RELEASE_NOTES)&&(0,ef.isEligibleForReleaseNotesDiscovery)(d,y)&&(0,a("9wGTI").fg)("a4c_rovo_release_notes_prompt"),b=i&&!a("17wUi").confluenceLocalStorageInstance.getItemAsBoolean(a("1UApO").keys.AUTOMATION_DISCOVER_PRODUCT_REQUIREMENTS)&&(0,eC.isEligibleForProductRequirementsDiscovery)(d,y)&&(0,a("9wGTI").fg)("a4c_rovo_contextual_prompts"),C=i&&!a("17wUi").confluenceLocalStorageInstance.getItemAsBoolean(a("1UApO").keys.AUTOMATION_DISCOVER_FEEDBACK_ANALYSIS)&&(0,eh.isEligibleForFeedbackAnalysisDiscovery)(d,y)&&(0,a("9wGTI").fg)("a4c_rovo_feedback_analysis_prompt"),v={publishedPageTitle:d,spaceName:T,spaceKey:o};if(c)m?.showModal(eg,v);else if(b)m?.showModal(ev,v);else if(r)M.start({name:a("irVI7").AUTOMATION_DISCOVERY_JIRA_LINK}),m?.showModal(em,v);else if(u)m?.showModal(eb,v);else if(C)m?.showModal(ey,v);else if(l)M.start({name:a("irVI7").AUTOMATION_DISCOVERY_PUBLISH_MEETING_NOTES_EXPERIENCE}),m?.showModal(eN,v);else{if(es&&(e||!ei)&&(0,a("9wGTI").fg)("cc_onboarding_experience"))return;if(!eo&&!ep){let e=et||"live"===el,t="live"===el&&(0,a("9wGTI").fg)("confluence_live_pages_open_beta_trait_opted_in"),n=eA&&e&&!t;n&&(0,a("6mKj3").expValEquals)("cc_engagement_share_link_publish_exp","cohort","experiment1")?((0,ex.showPublishSuccessFlagsWithSocialAndCopyLink)({spaceName:T,flags:g,title:d,intl:y,copyContentLink:R,createAnalyticsEvent:I,suggestedUsers:ew}),I({type:"sendScreenEvent",data:{name:"showPublishSuccessWithSocialAndCopyLinkFlags",attributes:{isSocialShareFlag:!1}}}).fire()):n&&(0,a("6mKj3").expValEquals)("cc_engagement_share_link_publish_exp","cohort","experiment2")?((0,ex.showPublishSuccessFlagsWithSocialAndCopyLink)({spaceName:T,flags:g,title:d,intl:y,copyContentLink:R,createAnalyticsEvent:I,suggestedUsers:ew,showShareModal:eM}),I({type:"sendScreenEvent",data:{name:"showPublishSuccessWithSocialAndCopyLinkFlags",attributes:{isSocialShareFlag:!0}}}).fire()):(0,a("duCvb").showPublishSuccessFlags)({isFirstTimePublish:e,spaceName:T,flags:g,title:d,intl:y,copyContentLink:R,createAnalyticsEvent:I,isConvertingFromLivePage:t})}!s&&(0,a("6mKj3").expValEquals)("platform_synced_block","isEnabled",!0)&&setTimeout(()=>{(0,a("b4kc6").showFlushSyncBlockErrorFlag)(g,y,h?.syncedBlock?.actions.flushBodiedSyncBlocks)},1e3),eP(t,p,k,f).then(e=>{e&&eT(e)}).catch(()=>{})}}}else E({errorName:_??"",statusCode:S??void 0,collabService:"ncs",isUnpublishedDraft:et}),400===S&&_?.includes("A page with this title already exists")?M.abort({name:G,reason:`${G} aborted: title is a duplicate`,attributes:{...ed,reason:_,traceId:P}}):409===S&&(_?.includes("optimistic locking failed")||_?.includes("Version must be incremented on update"))?M.abort({name:G,reason:`${G} aborted: content updated concurrently`,attributes:{...ed,reason:_,traceId:P}}):S&&S>=400&&S<=499?M.abort({name:G,reason:`${G} aborted: User error with status code ${S}`,attributes:{...ed,traceId:P,reason:_}}):P?M.fail({name:G,error:new eG(`${G} failed: Error with status code ${S}`,P),attributes:{...ed,traceId:P,reason:_}}):M.abort({name:G,reason:`${G} aborted: Presumed client network failure with status code ${S}`,attributes:{...ed,reason:_}}),N&&M.fail({name:a("irVI7").MIGRATE_PAGE_PUBLISH_EXPERIENCE,error:Error(`${a("irVI7").MIGRATE_PAGE_PUBLISH_EXPERIENCE} failed: Error with status code ${S}`),attributes:{...ed,traceId:P}})})}).catch(e=>{let t=e||Error("unknown error while publishing content"),n={...ed,stack:t.stack};e?.message=="Called getResolvedEditorState before editorView is ready"?M.abort({name:G,reason:`${G} aborted: Called getResolvedEditorState before editorView is ready`,attributes:ed}):(0,a("6fil2").containsNetworkError)(e)||e?.message==="GraphQL error: Failed to fetch"?(g?.showErrorFlag({id:"publish-network-error-flag",title:y.formatMessage(eH.networkErrorTitle),description:y.formatMessage(eH.networkErrorDescription)}),M.abort({name:G,reason:`${G} aborted: Client network failure`,attributes:ed})):(u(),(0,a("fGzMp").stopExperienceOnError)(G,t,n)),N&&(0,a("fGzMp").stopExperienceOnError)(a("irVI7").MIGRATE_PAGE_PUBLISH_EXPERIENCE,t,n)}).finally(()=>{clearTimeout(Z),a("3VbV8").FABRIC_PUBLISH_PAGE_METRIC.cancel(),ep||(B(!1),v(!1))})},[h?.syncedBlock?.actions,p,d,B,s,t,w,C,N,eS,M,eo,E,es,T,n,o,S,ek,O,l,g,j,eI,I,L,D,ei,eE,Q,ec,er,U,K,y,m,eP,eT,f,R,u,q,$,W,b,eA,eM,ew,_,P]),eR=(0,J.useCallback)(({suppressNotifyWatchers:e=!1,message:t="",schedulePublishDate:a=null,ancestors:n=[],restrictions:s,retryOnConflict:i=!0,newSpaceKey:r,moveRequest:o})=>()=>eL({suppressNotifyWatchers:e,message:t,retryOnConflict:i,isButtonClicked:!0,schedulePublishDate:a,ancestors:n,restrictions:s,newSpaceKey:r,moveRequest:o}),[eL]);return(0,J.useMemo)(()=>({onPublish:eR,isPublishingContent:C}),[C,eR])};var eQ=((G={}).PAGE="page",G.BLOGPOST="blogpost",G);t.exports.ContentTypeType=eQ,t.exports.useDraftSyncAndPublish=({contentId:t,contentType:n,refetchNativeCollab:s,editorActions:i,embeddedConfluenceSource:r,isFirstParticipant:o,isUnpublishedDraft:l,spaceKey:c,title:u,version:d,onCollabError:p,checkIfConditionPreventingPublish:g,flags:m,dialogs:f,editorPresetAPI:b,editorSessionId:h,onPublishUpdateTitleInPageTree:y,optimisticDeleteItemInTree:C,startingLinks:v,viewMode:E})=>{let S=(0,J.useRef)(!1),{push:I,match:k,matchRoute:_}=(0,J.useContext)(a("7zgzO").RoutesContext),{routePolicy:P}=(0,a("4o1RV").useNavigationPolicy)(),T=eK(t,c),A=(0,J.useCallback)(e=>{let n=(0,a("cEgMD").isCompanyHubSpaceKey)(c)?a("1NBp8").COMPANY_HUB.toUrl():e,s=_(n);(!P||P.willPushInSelf(k?.name,t,s?.name,s?.params?.contentId))&&I(n)},[_,P,t,k,I,c]),w=(0,a("8G1o2").useEditorBreadcrumbs)(t),M=(0,J.useCallback)(async e=>{await T(),l&&!e?.isDiscarding&&y?.(),A((0,a("dLX9a").getClosePreloadUrl)({contentId:t,spaceKey:c,contentType:n,breadcrumbs:w,isUnpublishedDraft:l}))},[l,n,w,c,t,T,A,y]),L=(0,J.useCallback)(({res:s,newSpaceKey:i,isLivePagePublish:r})=>{let o=(0,a("cb6fO").buildContentPath)(i||c,t,n,s.createdDate,(0,a("cb6fO").generateSlug)(u));window.__SSR_RENDERED__&&r&&(o=(0,a("cb6fO").addQueryParams)(o,{[a("bqMNb").FORCE_TRANSITION_QUERY_PARAM]:e(Q)()})),a("lABjq").pagePublishedState.pageJustPublished=!0,A(o)},[c,t,n,u,A]),{triggerSaveDraft:D,isSavingDraft:R,saveDraft:N,saveDraftPromise:O,cancelDebouncedSaveDraft:F,saveDraftError:x}=(0,a("9F9dn").useDraftSync)({contentId:t,editorActions:i,contentType:n,isFirstParticipant:o,onCollabError:p,editorPresetAPI:b,editorSessionId:h,viewMode:E});(0,J.useEffect)(()=>{S.current=R},[R]);let{isPublishingContent:U,onPublish:K}=eJ({contentId:t,contentType:n,embeddedConfluenceSource:r,refetchNativeCollab:s,editorActions:i,spaceKey:c,afterPublish:(0,J.useCallback)(({res:e,newSpaceKey:t,isLivePagePublish:a})=>{F(),y?.(),L({res:e,newSpaceKey:t,isLivePagePublish:a})},[F,y,L]),version:d,onCollabError:p,saveDraftPromise:O,checkIfConditionPreventingPublish:g,flags:m,dialogs:f,startingLinks:v,optimisticDeleteItemInTree:C,editorPresetAPI:b});return(0,J.useMemo)(()=>({triggerSaveDraft:D,isSavingDraft:R,saveDraftError:x,isPublishingContent:U,cancelDebouncedSaveDraft:F,onPublish:K,navigateOnClose:M,saveDraft:N}),[D,R,x,U,F,K,M,N])}}),n("9F9dn",function(t,n){var s,i,r,o,l=a("jSnXV"),c=a("42omo");let u=({contentId:e})=>{let t=(0,c.useRef)(void 0),n=(0,c.useRef)(void 0),{data:s}=(0,a("xQxzY").useQuery)((0,a("eSUdr").default)`query useSkipDraftSyncSkipDraftContentQuery($contentId:ID!){singleContent(id:$contentId status:["draft"]){id title version{ncsStepVersion}}}`,{variables:{contentId:e},fetchPolicy:"network-only"});return(0,c.useEffect)(()=>{let e=s?.singleContent?.version?.ncsStepVersion;t.current=e?parseInt(e):void 0,n.current=s?.singleContent?.title??void 0},[s]),{isEditorDirty:(0,c.useCallback)((e,a)=>{if(!t.current||!n.current)return!0;let s=e!==t.current,i=a!==n.current;return s||i},[])}},d=(0,a("eSUdr").default)`mutation DraftSyncMutation($contentId:ID!$contentType:String!$content:String!$title:String$ncsStepVersion:String!)@experimental{experimentalDraftSync(contentId:$contentId contentType:$contentType content:$content title:$title ncsStepVersion:$ncsStepVersion updateTrigger:"DRAFT_SYNC"){id}}`;var p=((s={}).user="user",s),g=((i={}).content="content",i.space="space",i),m=((r={}).collaborator="collaborator",r.favourite="favourite",r.touched="touched",r);let f=(0,a("eSUdr").default)`mutation useDraftSyncSetRelationMutation($input:UpdateRelationInput!){updateRelation(input:$input){targetKey sourceKey relationName url}}`;(o={}).COLLAB_PROVIDER="DRAFT_SYNC_ERROR_COLLAB_PROVIDER",o.ACK_STATE="DRAFT_SYNC_ERROR_ACK_STATE",o.NO_ACCESS="DRAFT_SYNC_ERROR_NO_ACCESS";class b{constructor(e){this.reason=e,this.reason=e}}class h extends Error{constructor(e,t){super(e),this.message=e,this.statusCode=t,this.statusCode=t}}let y=["override-document","atlaskit-analytics"];t.exports.DraftSyncResponseError=h,t.exports.useDraftSync=({contentId:t,contentType:n,editorActions:s,isFirstParticipant:i,onCollabError:r,editorPresetAPI:o,editorSessionId:C,viewMode:v})=>{let[E]=(0,a("ep3mz").usePageSpaceKey)(),S=(0,a("7QM6o").useSpaceId)(),I=a("4VJDS").default.getNumber("draft_sync_debounce_max_wait",0),{hasEditorContentChangedByAnyUser:k,hasEditorContentChangedByLocalUserExcludingComments:_}=(0,a("16o3K").useHasEditorContentChanged)({editorPresetAPI:o}),[P,T]=(0,c.useState)(!1),[A,w]=(0,c.useState)(null),M=(0,c.useRef)(null),L=(0,c.useRef)(!1),[D]=(0,a("lEnke").useExperimentalDraftSyncMutation)(),[R]=(0,a("1KmJq").useMutation)(d),N=(0,a("6mKj3").expValEquals)("confluence_migrate_experimental_draft_sync","isEnabled",!0)?D:R,[O]=(0,a("1KmJq").useMutation)(f),[{collabEditProvider:F,collabEditInitialized:x},{setIsDraftSyncPending:U}]=(0,a("hYoU4").useNativeCollabState)(),K=(0,c.useContext)(a("1kHsc").ExperienceTrackerContext),{getIsPublishing:V}=(0,a("2wSyg").useDraftSyncAndPublishContext)(),B=(0,a("3jwuS").useIsCurrentPageLive)(),{createAnalyticsEvent:j}=(0,a("inPa6").useAnalyticsEvents)(),$=(0,a("4arST").useGetCollabProviderState)({editorActions:s,collabEditProvider:F,forceAwaitCommitLocalSteps:!0,reason:"draft-sync"}),{isEditorDirty:q}=u({contentId:t}),W=(0,c.useCallback)(async e=>{try{await O({variables:{input:{relationName:e,sourceKey:"current",sourceType:p.user,targetType:g.content,targetKey:t,targetStatus:"draft"}}})}catch(e){(0,a("5ZqQS").getMonitoringClient)().submitError(e,{attribution:a("3IBnw").Attribution.PAGE_EXTENSIONS}),(0,a("7Sm4c").markErrorAsHandled)(e)}},[t,O]);(0,c.useEffect)(()=>()=>{L.current=!0},[]);let H=(0,c.useRef)(!1);(0,c.useEffect)(()=>{if(!_||!window||H.current)return;let e=window.requestIdleCallback||window.requestAnimationFrame;H.current=!0,e(async()=>{j({type:"sendTrackEvent",data:{source:"nativeCollabComponent",action:"edited",actionSubject:"editor",containerType:"space",containerId:S,objectType:"page",objectId:t,attributes:{isLivePage:B,editorSessionId:C}}}).fire(),B||W(m.touched)})},[t,B,C,j,_,v,W,S]);let G=(0,c.useCallback)((e=!1)=>!i||V()||!x||L.current||B?(U(!1),Promise.resolve()):(null!=M.current||(T(!0),M.current=new Promise(async(s,i)=>{let o;if(!F)return i(new b("DRAFT_SYNC_ERROR_COLLAB_PROVIDER"));if(A)return i(new b("DRAFT_SYNC_ERROR_NO_ACCESS"));try{if(!(o=await $(e)))return i(new b("DRAFT_SYNC_ERROR_ACK_STATE"))}catch(e){r(),i(e)}let{title:l,content:c,stepVersion:u}=o;if(!q(u,l))return s();try{await N({variables:{contentId:t,contentType:n,content:JSON.stringify(c),ncsStepVersion:u.toString(),title:l}}),s()}catch(e){(0,a("1uFM6").isUnauthorizedError)(e)?w(new h(e.message,403)):(0,a("f9jv7").isNotFoundError)(e)?w(new h(e.message,404)):(0,a("aMcHK").isStatusCodeError)(e,"503")&&e?.message?.includes("Site temporarily unavailable")&&w(new h(e.message,503)),i(e)}}).finally(()=>{U(!1),T(!1),M.current=null})),M.current),[i,$,F,x,t,n,N,r,V,q,A,U,B]),J=(0,c.useCallback)(async({isOnClose:e}={})=>{let n;if(B)return;if(!e)return G(!1).catch(e=>e instanceof b?Promise.reject(e):Promise.resolve());let s=(0,a("cEgMD").isCompanyHubSpaceKey)(E)?a("irVI7").COMPANY_HUB_EDITOR_CLOSE_EXPERIENCE:a("irVI7").EDIT_PAGE_CLOSE_EXPERIENCE;K.start({name:s,timeout:a("aJPUt").ExperienceTimeout.EDITOR_PUBLISH,attributes:{contentId:t,collabService:"ncs",isCompanyHub:(0,a("cEgMD").isCompanyHubSpaceKey)(E)}});try{let e=await $(!1),t=e?.content?.content?.length??void 0;n=void 0===t?void 0:0===t}catch{}return G(!0).then(e=>(K.succeed({name:s,attributes:{contentId:t,collabService:"ncs",...void 0!==n?{isContentEmpty:n}:{}}}),e),e=>{let i=null;if(!(e instanceof b)){let r=(0,a("422HI").isApolloError)(e)?e?.graphQLErrors[0]:e,o=(0,a("aMcHK").getStatusCode)(r)||(0,a("aMcHK").getStatusCode)(r?.originalError),l=o&&parseInt(o,10);if((a("hBkCm").BadStatusError.isBadStatusError(r)||a("hBkCm").BadStatusError.isBadStatusError(r?.originalError))&&(i=(0,a("fJlJm").getLogSafeErrorAttributes)(r).traceId||r?.originalError?.traceId),l&&!isNaN(l)&&l>=400&&l<500)return void K.abort({name:s,reason:`User error with status code ${o}`,attributes:{contentId:t,collabService:"ncs",traceId:i??"unknown",...void 0!==n?{isContentEmpty:n}:{}}})}K.stopOnError({name:s,error:e,attributes:{contentId:t,collabService:"ncs",traceId:i??"unknown",...void 0!==n?{isContentEmpty:n}:{}}})})},[G,K,t,E,$,B]),Q=(0,c.useMemo)(()=>e(l)(J,5e3,{...I>0&&{maxWait:I}}),[J,I]),z=(0,c.useCallback)(()=>Q.cancel(),[Q]),Z=(0,c.useCallback)(()=>{B||(U(!0),Q())},[Q,U,B]),Y=(0,c.useCallback)(e=>{e?.metadataSource==="client"&&Z()},[Z]),X=(0,c.useCallback)(e=>{let t=e?.json?.every(e=>!!e.stepType&&y.includes(e.stepType));!k||t||B||Z()},[k,Z,B]),ee=(0,c.useCallback)(()=>{Q.flush()},[Q]);return(0,c.useEffect)(()=>{if(F&&x&&!B)return window.addEventListener("beforeunload",ee),()=>{window.removeEventListener("beforeunload",ee)}},[x,F,ee,B]),(0,c.useEffect)(()=>{if(i&&F&&!B)return F.on("data",X),F.on("metadata:changed",Y),()=>{F.off("data",X),F.off("metadata:changed",Y)}},[F,Z,X,i,B,Y]),{cancelDebouncedSaveDraft:z,triggerSaveDraft:Z,saveDraftError:A,saveDraft:J,saveDraftPromise:M.current,isSavingDraft:P}}}),n("16o3K",function(t,n){var s=a("42omo"),i=a("a4TK8");t.exports.useHasEditorContentChanged=({editorPresetAPI:t})=>{let[n,r]=(0,s.useState)();return(0,a("6qdjm").usePluginStateEffect)(t,["collabEdit"],({collabEditState:t})=>{if(!t?.initialised)return;let a={collabInitialisedAt:t.initialised?.collabInitialisedAt,firstChangeAfterInitAt:t.initialised?.firstChangeAfterInitAt,firstContentBodyChangeAfterInitAt:t.initialised?.firstContentBodyChangeAfterInitAt,lastLocalOrganicBodyChangeAt:t.initialised?.lastLocalOrganicBodyChangeAt};e(i)(n,a)||r(a)}),(0,s.useMemo)(()=>{if(!n)return{hasEditorContentChangedByAnyUser:!1,hasEditorContentChangedByLocalUserExcludingComments:!1};let{collabInitialisedAt:e,firstChangeAfterInitAt:t,lastLocalOrganicBodyChangeAt:s,firstContentBodyChangeAfterInitAt:i}=n,r=!!e,o=r&&(0,a("9wGTI").fg)("cc_usedraftsync_organic_changes_only")?!!s:!!i;return{hasEditorContentChangedByAnyUser:r&&!!t,hasEditorContentChangedByLocalUserExcludingComments:o}},[n])}}),n("3venW",function(e,t){try{a="undefined"!=typeof Intl&&void 0!==Intl.Collator?Intl.Collator("generic",{sensitivity:"base"}):null}catch(e){console.log("Collator could not be initialized and wouldn't be used")}var a,n=[],s=[],i={get:function(e,t,i){var r,o,l,c,u,d,p=i&&a&&i.useCollator,g=e.length,m=t.length;if(0===g)return m;if(0===m)return g;for(l=0;l<m;++l)n[l]=l,s[l]=t.charCodeAt(l);if(n[m]=m,p)for(l=0;l<g;++l){for(c=0,o=l+1;c<m;++c)r=o,d=0===a.compare(e.charAt(l),String.fromCharCode(s[c])),(o=n[c]+ +!d)>(u=r+1)&&(o=u),o>(u=n[c+1]+1)&&(o=u),n[c]=r;n[c]=o}else for(l=0;l<g;++l){for(c=0,o=l+1;c<m;++c)r=o,d=e.charCodeAt(l)===s[c],(o=n[c]+ +!d)>(u=r+1)&&(o=u),o>(u=n[c+1]+1)&&(o=u),n[c]=r;n[c]=o}return o}};"undefined"!=typeof define&&null!==define&&define.amd?define(function(){return i}):null!==e&&e.exports===t?e.exports=i:"undefined"!=typeof self&&"function"==typeof self.postMessage&&"function"==typeof self.importScripts?self.Levenshtein=i:"undefined"!=typeof window&&null!==window&&(window.Levenshtein=i)}),n("lmTxZ",function(e,t){e.exports=a("4mJKd")(5)("696ho").then(()=>a("fLVvK"))}),n("4mJKd",function(e,t){e.exports=e=>t=>import(a("8tirZ").shardUrl(a("02nRr").resolve(t),e))}),n("8tirZ",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.applyShardToDomain=r,e.exports.domainShardingKey=void 0,e.exports.getDomainShardIndex=n,e.exports.shardUrl=function(e,t){return globalThis[a]?o(e,t):e},e.exports.shardUrlUnchecked=o;let a="__ATLASPACK_ENABLE_DOMAIN_SHARDS";function n(e,t){let a=t+1,n=e.split("").reduce((e,t)=>{let n=(e<<a)-e+t.charCodeAt(0);return n&n},0);return(n%=a)<0&&(n+=a),n}let s=/-\d+$/;function i(e){if(!s.test(e))return e;let t=e.lastIndexOf("-");return e.slice(0,t)}function r(e,t){let a=e.indexOf("."),n=0===t?"":`-${t-1}`;if(-1===a)return`${i(e)}${n}`;let s=i(e.slice(0,a));return`${s}${n}${e.slice(a)}`}function o(e,t){let a=new URL(e),s=n(function(e){let t=e.lastIndexOf("/");if(-1===t||t===e.length-1)throw Error("Expected an absolute URL with a file name, unable to apply sharding.");return e.slice(t+1)}(a.pathname),t);return a.hostname=r(a.hostname,s),a.toString()}e.exports.domainShardingKey=a}),n("02nRr",function(e,a){t(e.exports,"register",()=>n,e=>n=e),t(e.exports,"resolve",()=>s,e=>s=e);var n,s,i=new Map;n=function(e,t){for(var a=0;a<t.length-1;a+=2)i.set(t[a],{baseUrl:e,path:t[a+1]})},s=function(e){var t=i.get(e);if(null==t)throw Error("Could not resolve bundle with id "+e);return new URL(t.path,t.baseUrl).toString()}}),n("ems45",function(e,t){e.exports=a("4mJKd")(5)("jdEwy").then(()=>a("bFIZB"))}),n("f4L8J",function(t,n){var s=a("42omo"),i=a("aJv6Q"),r=a("cl74W");let o=(0,a("cgtv4").defineMessages)({releaseNotesModalHeader:{id:"automation-discovery.rovo.release-notes.modal.header",defaultMessage:"{publishedPageTitle} was successfully published in the {spaceName} space"},releaseNotesCta:{id:"automation-discovery.rovo.release-notes.modal.cta",defaultMessage:"Automate your release notes process?"},releaseNoteKeywordForModalTrigger:{id:"automation-discovery.rovo.release-note.trigger.keyword",defaultMessage:"release note"}}),l=(0,i.withTransparentErrorBoundary)({attribution:a("3IBnw").Attribution.AUTOMATION_FOR_CONFLUENCE})(({onClose:t,publishedPageTitle:n,spaceName:i,spaceKey:l})=>e(s).createElement(r.BaseAutomationDiscoveryDialog,{eventSourceName:a("d0Ide").EventSourceName.RELEASE_NOTES,templateName:"createReleaseNotesPageAfterJiraIssueCreation",discoveryExperience:"automationDiscoveryReleaseNotes",onClose:t,cta:e(s).createElement(a("gtD4K").default,o.releaseNotesCta),header:e(s).createElement(a("gtD4K").default,{...o.releaseNotesModalHeader,values:{publishedPageTitle:n,spaceName:i}}),localStorageKey:a("1UApO").keys.AUTOMATION_DISCOVER_RELEASE_NOTES,templateUrl:`/wiki/spaces/${l}/settings/automation#/rule/template?templateId=confluence_rovo_template_4`,spaceKey:l}));t.exports.i18n=o,t.exports.isEligibleForReleaseNotesDiscovery=(e,t)=>e.toLowerCase().includes(t.formatMessage(o.releaseNoteKeywordForModalTrigger)),t.exports.ReleaseNotesDialog=l}),n("ekkfU",function(t,n){var s=a("42omo"),i=a("aJv6Q"),r=a("cl74W");let o=(0,a("cgtv4").defineMessages)({feedbackAnalysisModalHeader:{id:"automation-discovery.rovo.feedback-analysis.modal.header",defaultMessage:"{publishedPageTitle} was successfully published in the {spaceName} space"},feedbackAnalysisCta:{id:"automation-discovery.rovo.feedback-analysis.modal.cta",defaultMessage:"Automate your feedback analysis with a template?"},feedbackKeywordForModalTrigger:{id:"automation-discovery.rovo.feedback-analysis.feedback.trigger.keyword",defaultMessage:"feedback"},summaryKeywordForModalTrigger:{id:"automation-discovery.rovo.feedback-analysis.summary.trigger.keyword",defaultMessage:"summary"},analysisKeywordForModalTrigger:{id:"automation-discovery.rovo.feedback-analysis.analysis.trigger.keyword",defaultMessage:"analysis"}}),l=(0,i.withTransparentErrorBoundary)({attribution:a("3IBnw").Attribution.AUTOMATION_FOR_CONFLUENCE})(({onClose:t,publishedPageTitle:n,spaceName:i,spaceKey:l})=>e(s).createElement(r.BaseAutomationDiscoveryDialog,{eventSourceName:a("d0Ide").EventSourceName.FEEDBACK_ANALYSIS,templateName:"createReleaseNotesPageAfterJiraIssueCreation",discoveryExperience:"automationDiscoveryFeedbackAnalysis",onClose:t,cta:e(s).createElement(a("gtD4K").default,o.feedbackAnalysisCta),header:e(s).createElement(a("gtD4K").default,{...o.feedbackAnalysisModalHeader,values:{publishedPageTitle:n,spaceName:i}}),localStorageKey:a("1UApO").keys.AUTOMATION_DISCOVER_FEEDBACK_ANALYSIS,templateUrl:`/wiki/spaces/${l}/settings/automation#/rule/template?templateId=confluence_rovo_template_3`,spaceKey:l}));t.exports.i18n=o,t.exports.isEligibleForFeedbackAnalysisDiscovery=(e,t)=>e.toLowerCase().includes(t.formatMessage(o.analysisKeywordForModalTrigger))||e.toLowerCase().includes(t.formatMessage(o.feedbackKeywordForModalTrigger))&&e.toLowerCase().includes(t.formatMessage(o.summaryKeywordForModalTrigger)),t.exports.FeedbackAnalysisDialog=l}),n("9wXqm",function(t,n){var s=a("42omo"),i=a("aJv6Q"),r=a("cl74W");let o=(0,a("cgtv4").defineMessages)({productRequirementsModalHeader:{id:"automation-discovery.rovo.product-requirements.modal.header",defaultMessage:"{publishedPageTitle} was successfully published in the {spaceName} space"},productRequirementsCta:{id:"automation-discovery.rovo.product-requirements.modal.cta",defaultMessage:"Automate your product requirements work?"},productKeywordForModalTrigger:{id:"automation-discovery.rovo.product-requirements.product.trigger.keyword",defaultMessage:"product"},requirementKeywordForModalTrigger:{id:"automation-discovery.rovo.product-requirements.requirement.trigger.keyword",defaultMessage:"requirement"}}),l=(0,i.withTransparentErrorBoundary)({attribution:a("3IBnw").Attribution.AUTOMATION_FOR_CONFLUENCE})(({onClose:t,publishedPageTitle:n,spaceName:i,spaceKey:l})=>e(s).createElement(r.BaseAutomationDiscoveryDialog,{eventSourceName:a("d0Ide").EventSourceName.PRODUCT_REQUIREMENTS,templateName:"addPRDImprovementCommentAfterPagePublished",discoveryExperience:"automationDiscoveryProductRequirements",onClose:t,cta:e(s).createElement(a("gtD4K").default,o.productRequirementsCta),header:e(s).createElement(a("gtD4K").default,{...o.productRequirementsModalHeader,values:{publishedPageTitle:n,spaceName:i}}),localStorageKey:a("1UApO").keys.AUTOMATION_DISCOVER_PRODUCT_REQUIREMENTS,templateUrl:`/wiki/spaces/${l}/settings/automation#/rule/template?templateId=confluence_rovo_template_1`,spaceKey:l}));t.exports.i18n=o,t.exports.isEligibleForProductRequirementsDiscovery=(e,t)=>e.toLowerCase().includes(t.formatMessage(o.productKeywordForModalTrigger))&&e.toLowerCase().includes(t.formatMessage(o.requirementKeywordForModalTrigger)),t.exports.ProductRequirementsDialog=l}),n("5ueVa",function(e,t){let a=/road\W?map/i,n=/(p[oa]st\s*incidents?\s*reviews?)|((\bPIR\b))/i,s=/(.+?((roles?)|(responsibilit(y|ies))).*)|(.+?((responsibilit(y|ies)|(roles?))).*)/i;var i,r=((i={}).PRIORITIZATION="confluence_collaborate_template_14",i.PIR="confluence_collaborate_template_15",i.TEAM_FORMATION="confluence_collaborate_template_16",i);e.exports.WhiteboardTemplates=r,e.exports.isEligibleForWhiteboardDiscovery=e=>!!(a.test(e)||n.test(e)||s.test(e)),e.exports.getWhiteboardTemplateByPageTitle=e=>a.test(e)?"confluence_collaborate_template_14":n.test(e)?"confluence_collaborate_template_15":s.test(e)?"confluence_collaborate_template_16":"confluence_collaborate_template_14"}),n("jvs33",function(e,t){e.exports=a("4mJKd")(5)("1rMtp").then(()=>a("iBcm9"))}),n("8Tj57",function(e,t){let n=(e,t)=>{let n=e=>{let a=e.attrs?.url;a&&t(a)};(0,a("6jPem").traverse)(e,{inlineCard:n,blockCard:n,embedCard:n})};e.exports.getJiraSmartLinks=(e,t)=>{let a={};return n(e,e=>{let n=t.getState()[e]?.details;if(!n)return;let{name:s}=n.data,{tenantId:i,product:r,subproduct:o}=n.meta;if(!s||!i||"jira"!==r||"software"!=o)return;let l="jira"===r?`${r}-${o}`:r;a[e]={name:s,tenantId:i,product:l}}),a},e.exports.getAllSmartLinks=e=>{let t=new Set;return n(e,e=>t.add(e)),t}}),n("3jm5R",function(e,t){e.exports=a("4mJKd")(5)("cCo7G").then(()=>a("gCM0C"))}),n("azUKm",function(e,t){e.exports=a("4mJKd")(5)("2yaNi").then(()=>a("dVGb1"))}),n("89br9",function(e,t){e.exports=a("4mJKd")(5)("1bqZ7").then(()=>a("5pp10"))}),n("9je4c",function(e,t){e.exports=a("4mJKd")(5)("dtcDt").then(()=>a("2fUGD"))}),n("8zT1m",function(e,t){e.exports=a("4mJKd")(5)("bbNMp").then(()=>a("arshm"))}),n("iRvSq",function(e,t){e.exports=a("4mJKd")(5)("jmeku").then(()=>a("7qoUq"))}),n("getOq",function(e,t){e.exports=a("4mJKd")(5)("gvu1P").then(()=>a("8F64s"))}),n("4Lsh2",function(e,t){e.exports=a("4mJKd")(5)("77OtH").then(()=>a("lzczy"))}),n("edYfH",function(e,t){e.exports=a("4mJKd")(5)("kwpyS").then(()=>a("hlvWq"))}),n("bJzeZ",function(e,t){e.exports=a("4mJKd")(5)("jR65k").then(()=>a("kW5Ci"))}),n("jwZyF",function(e,t){e.exports=a("4mJKd")(5)("hjKsx").then(()=>a("3eDg3"))}),n("4mQBM",function(e,t){e.exports=a("4mJKd")(5)("7SU8v").then(()=>a("7pfgY"))}),n("9ITjo",function(e,t){e.exports=a("4mJKd")(5)("6CkyE").then(()=>a("9Yhye"))}),n("8bPpr",function(e,t){e.exports=a("4mJKd")(5)("9jxAI").then(()=>a("bHyHT"))}),n("crxFV",function(e,t){e.exports=a("4mJKd")(5)("gipQq").then(()=>a("3ABrQ"))}),n("hAEsE",function(e,t){e.exports=a("4mJKd")(5)("lGaKH").then(()=>a("55qHL"))}),n("3OOGB",function(e,t){e.exports=a("4mJKd")(5)("cnozD").then(()=>a("bP5KU"))}),n("7lfzP",function(e,t){e.exports=a("4mJKd")(5)("576vh").then(()=>a("9rc9C"))}),n("142pr",function(e,t){e.exports=a("4mJKd")(5)("6TNAX").then(()=>a("d0vV5"))}),n("lCZku",function(e,t){e.exports=a("4mJKd")(5)("7DeyD").then(()=>a("c5egN"))}),n("5RsIT",function(e,t){e.exports=a("4mJKd")(5)("hshW4").then(()=>a("9g2nt"))}),n("gRCYU",function(e,t){e.exports=a("4mJKd")(5)("lqXcv").then(()=>a("rN6yJ"))}),n("grbQI",function(e,t){e.exports=a("4mJKd")(5)("fTQUk").then(()=>a("dIRzq"))}),n("36HEo",function(e,t){e.exports=a("4mJKd")(5)("hqXjy").then(()=>a("cvTkO"))}),n("ijbwo",function(e,t){e.exports=a("4mJKd")(5)("5DEnz").then(()=>a("9GOPB"))}),n("e9owJ",function(e,t){var n=a("42omo"),s=a("04e9M");e.exports.useEditorAnalyticsEvent=({blueprintType:e,contentId:t,contentType:i,embeddedConfluenceSource:r,source:o,subject:l,version:c,collabService:u})=>({triggerAnalyticsEvent:(0,n.useMemo)(()=>async(n,d={})=>{let p={contentId:t,contentType:(0,a("ajdQJ").markAsSafe)("page","blogpost")(i),blueprintType:(0,a("ajdQJ").dangerouslyCreateSafeString)(e),editorVersion:(0,a("ajdQJ").markAsSafe)("fabric","tinymce")("fabric"),version:c||null,collabService:u,...r&&{embeddedConfluenceSource:r},...d},g=await (0,s.getAnalyticsWebClient)();await g.sendTrackEvent({action:n,actionSubject:l,source:o,objectType:i,objectId:t,attributes:p})},[e,t,i,r,o,l,c,u])})}),n("bUSKZ",function(e,t){e.exports.useMigratedRecently=e=>{let{data:t,loading:n,error:s}=(0,a("xQxzY").useQuery)((0,a("eSUdr").default)`query useMigratedRecentlyMigratedRecentlyQuery($contentId:ID!){content(id:$contentId){nodes{id metadata{frontend{migratedRecently}}}}}`,{variables:{contentId:e}});return!n&&!s&&(t?.content?.nodes?.[0]?.metadata?.frontend?.migratedRecently||!1)}}),n("duCvb",function(t,n){var s=a("42omo");let i=(0,a("cgtv4").defineMessages)({copyLinkCTA:{id:"editor-features.user.copy-your-page",defaultMessage:"Copy link"},copiedCTA:{id:"editor-features.user.copied-page",defaultMessage:"Copied"}}),r=(0,a("ecnYn").xcss)({font:'var(--ds-font-body, normal 400 14px/20px ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Ubuntu, "Helvetica Neue", sans-serif)',color:"color.link",fontWeight:"var(--ds-font-weight-medium, 500)",padding:"space.0",paddingRight:"space.025",cursor:"pointer",":hover":{textDecoration:"underline"},":focus-visible":{outlineStyle:"auto",outlineOffset:"-1px"}}),o=(0,a("ecnYn").xcss)({color:"color.text.subtle",cursor:"default",":hover":{textDecoration:"none"},":focus-visible":{outlineStyle:"none"}}),l=({successPublishMessage:t,copyContentLink:n,createAnalyticsEvent:l,isFirstTimePublish:c})=>{let[u,d]=(0,s.useState)(!1);(0,s.useEffect)(()=>{if(u){let e=setTimeout(()=>{d(!1)},4e3);return()=>clearTimeout(e)}},[u]);let p=(0,s.useCallback)(()=>{u||(d(!0),l({type:"sendUIEvent",data:{action:"clicked",actionSubject:"link",actionSubjectId:"publishFlagCopyPageCTA",source:"publishSuccessFlag",attributes:{isFirstTimePublish:c}}}).fire(),n())},[u,d,n,l,c]);return e(s).createElement(a("1GzhS").default,{space:"space.100",alignInline:"start"},e(s).createElement("span",null,t),e(s).createElement(a("2W0qg").default,{onClick:p,backgroundColor:"color.background.neutral.subtle",xcss:[r,u&&o]},e(s).createElement(a("gtD4K").default,u?i.copiedCTA:i.copyLinkCTA)))},c=(0,a("cgtv4").defineMessages)({publishSuccessTitle:{id:"editor-features.success.publish.title",defaultMessage:"Published!"},updateSuccessTitle:{id:"editor-features.success.update.title",defaultMessage:"Updated!"},convertAndPublishSuccessTitle:{id:"editor-features.success.convertAndPublish.title",defaultMessage:"Converted and published!"},publishSuccessMessageWithSpaceName:{id:"editor-features.user.publish.success.with.space.name",defaultMessage:"{pageTitle} was successfully published in the {spaceName} space"},updateSuccessMessageWithSpaceName:{id:"editor-features.user.update.success.with.space.name",defaultMessage:"{pageTitle} was successfully updated in the {spaceName} space"},publishSuccessMessage:{id:"editor-features.user.publish.success",defaultMessage:"{pageTitle} was successfully published"},updateSuccessMessage:{id:"editor-features.user.update.success",defaultMessage:"{pageTitle} was successfully updated"},convertAndPublishSuccessMessage:{id:"editor-features.user.convertAndPublish.success",defaultMessage:"{pageTitle} was converted to a page and published."},publishSuccessTitleWithSocial:{id:"editor-features.publish.success.title.with.social",defaultMessage:"Page successfully published"},publishSuccessMessageWithSocial:{id:"editor-features.publish.success.message.with.social",defaultMessage:"Share this page to ensure your team can see and build on your contributions."},sharePageCTA:{id:"editor-features.publish.success.share-page",defaultMessage:"Share page"}}),u=({isFirstTimePublish:e,hasSpaceName:t,isConvertingFromLivePage:a})=>a?{title:c.convertAndPublishSuccessTitle,message:c.convertAndPublishSuccessMessage}:e?{title:c.publishSuccessTitle,message:t?c.publishSuccessMessageWithSpaceName:c.publishSuccessMessage}:{title:c.updateSuccessTitle,message:t?c.updateSuccessMessageWithSpaceName:c.updateSuccessMessage},d=async({isFirstTimePublish:t,shouldTimeout:a=!0,spaceName:n,flags:i,title:r,intl:o,copyContentLink:c,createAnalyticsEvent:d,isConvertingFromLivePage:p=!1})=>{let g=u({isFirstTimePublish:t,hasSpaceName:!!n,isConvertingFromLivePage:p}),m={spaceName:n,pageTitle:e(s).createElement("b",null,r)},f={};c&&d&&(f={description:e(s).createElement(l,{copyContentLink:c,successPublishMessage:o.formatMessage(g.message,m),createAnalyticsEvent:d,isFirstTimePublish:t})});let b=await i.showFlag({type:"success-circle",title:o.formatMessage(g.title),description:o.formatMessage(g.message,m),close:"never",messageId:"confluence-frontend-editor-features-publish-success-flag",messageType:"transactional",...f});a&&setTimeout(()=>i.hideFlag(b.id),11e3)};t.exports.showPublishSuccessFlags=d}),n("lREFo",function(e,t){let n={"meeting-notes":"content.kind.meeting-notes",decisions:"content.kind.decisions","kb-how-to-article":"content.kind.kb-how-to-article","file-list":"content.kind.file-list",retrospective:"content.kind.retrospective",requirements:"content.kind.product-requirements","shared-links":"content.kind.shared-links","kb-troubleshooting-article":"content.kind.kb-troubleshooting-article","task-report":"content.kind.task-report",jirareport:"content.kind.jirareport"},s=e=>{for(let t of e)if(void 0!==n[t])return t;return""},i=e=>s(e?.content?.nodes[0]?.labels?.nodes?.map(e=>e.name)??[]);e.exports.getBlueprintFromLabels=i,e.exports.useBlueprintType=(e,t=!1)=>{let{data:n,loading:s,error:r}=(0,a("xQxzY").useQuery)((0,a("eSUdr").default)`query useBlueprintTypeEditorEditorLabelsQuery($contentId:ID!){content(id:$contentId){nodes{id labels{nodes{id name}}}}}`,{skip:t,variables:{contentId:e}});return s||r?"":i(n)}}),n("b4kc6",function(e,t){let n="flush-sync-block-error",s=(0,a("cgtv4").defineMessages)({syncBlockErrorTitle:{id:"editor-features.error.syncBlock.save.title",defaultMessage:"Sync error"},syncBlockErrorDescription:{id:"editor-features.error.syncBlock.description",defaultMessage:"We couldn't save your recent changes to the synced block. Please check your connection and try again."},syncBlockErrorRetry:{id:"editor-features.error.syncBlock.retry",defaultMessage:"Retry"}}),i=(e,t,a)=>{e?.showErrorFlag({id:n,title:t.formatMessage(s.syncBlockErrorTitle),description:t.formatMessage(s.syncBlockErrorDescription),isAutoDismiss:!0,actions:[{content:t.formatMessage(s.syncBlockErrorRetry),onClick:async()=>{e.hideFlag(n),await a?.()||i(e,t,a)}}]})};e.exports.showFlushSyncBlockErrorFlag=i}),n("hwk5r",function(t,n){var s=a("42omo"),i=a("hSqtY");let r={CREATE_FULL_EDIT_PAGE:{page:"title.add.page",blogpost:"title.add.blogpost"},CREATE_TEMPLATE_PAGE:{page:"title.add.page.template"}},o=(0,a("cgtv4").defineMessages)({companyHubDefaultTitleI18n:{id:"document-title.document-edit-page-title.company-hub.title",defaultMessage:"Company hub"},editName:{id:"document-title.edit.name",defaultMessage:"Edit"},editTemplatePage:{id:"document-title.edit.page.template",defaultMessage:"Edit template"}}),l=e=>e.filter(e=>e).join(" - "),c=(0,a("gmMgo").default)(({content:t={},contentType:n="page",intl:c,isCreatingNew:u,isTemplateEditPage:d,isLivePage:p,spaceKey:g,title:m})=>{let{siteTitle:f,companyHubName:b}=(0,s.useContext)(a("1ytiN").SPAViewContext);return e(s).createElement(i.TransparentErrorBoundary,{attribution:a("3IBnw").Attribution.INHERIT},e(s).createElement(a("5hAil").QueryGroup,{queryProps:(0,a("3zetf").getSpaceNameQueryProps)(g)},({results:i,loading:h})=>{let y;if(h)return null;let C=(0,a("3zetf").getSpaceNameFromResults)(i);if(u){let e={id:(d?r.CREATE_TEMPLATE_PAGE:r.CREATE_FULL_EDIT_PAGE)[n]},a=c.formatMessage(e);y=d?l([a,m,C,f]):l([a,m||t?.title,C,f])}else{let e=d?o.editTemplatePage:o.editName,n=p?"":c.formatMessage(e),s=b||c.formatMessage(o.companyHubDefaultTitleI18n);y=(0,a("cEgMD").isCompanyHubSpaceKey)(g)?l([n,s,f]):l([n,m??t?.title,C,f])}return window.__DOCUMENT_TITLE_TAG__=y,e(s).createElement(a("d5RCH").PageTitle,{title:y})}))});t.exports.DocumentEditPageTitle=c}),n("8Vmxc",function(t,n){var s=a("42omo"),i=a("8Tj57");let r=()=>l()>=2,o=()=>{let e=l();e<2&&a("17wUi").confluenceLocalStorageInstance.setItem(a("1UApO").keys.INVITE_ON_LINK_INSERT_DISMISSAL_COUNT,(e+1).toString())},l=()=>{let e=a("17wUi").confluenceLocalStorageInstance.getItem(a("1UApO").keys.INVITE_ON_LINK_INSERT_DISMISSAL_COUNT);return isNaN(parseInt(e))?0:parseInt(e)},c=()=>a("17wUi").confluenceLocalStorageInstance.getItemAsBoolean(a("1UApO").keys.INVITE_ON_LINK_INSERT_OPT_OUT),u=()=>a("17wUi").confluenceLocalStorageInstance.setItem(a("1UApO").keys.INVITE_ON_LINK_INSERT_OPT_OUT,"true"),d=async(e,t,a,n,s)=>{let i=await fetch("/gateway/api/growth/invite-on-link-insert-confluence/get-invitees",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jiraCloudId:e,confluenceCloudId:t,pageId:a,userId:n,accountIds:s})});return await i.json()},p=async(e,t)=>{let a=await fetch("/gateway/api/collaboration/v1/collaborationgraph/user/user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({context:{contextType:"inviteOnLinkInsertConfluence",principalId:t,siteId:e},modelRequestParams:{experience:"CgUserNearbyUser"},expanded:!0,maxNumberOfResults:50,userId:t})});return(await a.json()).collaborationGraphEntities.filter(e=>e?.userProfile!==void 0&&e?.userProfile?.account_type!=="app"&&e?.userProfile?.account_status!=="deactivated"&&e?.userProfile?.account_status!=="deleted").map(({userProfile:{account_id:e,name:t,email:a,picture:n}})=>({id:e,name:t,email:a,avatar:n}))},g=async({userId:e,confluenceCloudId:t,pageId:n,jiraCloudId:s})=>{if(!e||await (0,a("lRCxi").isSiteOptedOut)(t))return[];let i=await p(t,e);if(!i||0===i.length)return[];let r=i.map(e=>e.id),o=await d(s,t,n,e,r);return void 0===o.ineligibilityReason||null===o.ineligibilityReason?i.filter(e=>o.accountIds.includes(e.id)):[]};var m=a("l998X");a("42omo"),a("42omo");let f=e=>t=>(0,m.jsx)(b,{children:(0,m.jsx)(e,{...t})}),b=({children:e})=>{let{locale:t}=(0,a("8C5kA").default)(),{messages:n}=function(e){let[t,n]=(0,s.useState)({}),[i,r]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{let t=!0;return async function(){let s=new Intl.Locale(e.replace("_","-")).toString();try{r(!0);let e=await function(e){switch(e){case"cs-CZ":case"cs":return a("3jm5R");case"da-DK":case"da":return a("azUKm");case"de-DE":case"de":return a("89br9");case"en-GB":return a("9je4c");case"en-US":case"en":return a("8zT1m");case"en-ZZ":return a("iRvSq");case"es-ES":case"es":return a("getOq");case"fi-FI":case"fi":return a("4Lsh2");case"fr-FR":case"fr":return a("edYfH");case"hu-HU":case"hu":return a("bJzeZ");case"it-IT":case"it":return a("jwZyF");case"ja-JP":case"ja":return a("4mQBM");case"ko-KR":case"ko":return a("9ITjo");case"nb-NB":case"nb":return a("8bPpr");case"nl-NL":case"nl":return a("crxFV");case"pl-PL":case"pl":return a("hAEsE");case"pt-BR":case"pt":return a("3OOGB");case"ru-RU":case"ru":return a("7lfzP");case"sv-SE":case"sv":return a("142pr");case"tr-TR":case"tr":return a("lCZku");case"th-TH":case"th":return a("5RsIT");case"uk-UK":case"uk":return a("gRCYU");case"vi-VI":case"vi":return a("grbQI");case"zh-TW":case"zh-HK":return a("36HEo");case"zh-ZH":case"zh-CN":case"zh":return a("ijbwo")}return Promise.resolve({default:{}})}(s),i=e.default||e;t&&n(i)}catch(e){}finally{t&&r(!1)}}(),()=>{t=!1}},[e]),{messages:t,isLoading:i}}(t);return(0,m.jsx)(a("1e2E5").default,{messages:n,locale:t,children:e},t)},h=(0,a("cgtv4").defineMessages)({addPeopleButton:{id:"invite-prompt-on-link-insert.invite-prompt-flag.add-people-button",defaultMessage:"{inviteeCount, plural, one {Add {firstName}} other {Add # people}}"},dismiss:{id:"invite-prompt-on-link-insert.invite-prompt-flag.dismiss",defaultMessage:"Don't show again"},titleGeneric:{id:"invite-prompt-on-link-insert.invite-prompt-flag.title-generic",defaultMessage:"{inviteeCount, plural, one {{displayName} may need access} other {Your team may need access}}"},descriptionWithoutPageTitleGeneric:{id:"invite-prompt-on-link-insert.invite-prompt-flag.description-without-page-title-generic",defaultMessage:"{inviteeCount, plural, one {Your collaborator <strong>{firstName}</strong> needs access to <strong>Jira</strong> to view an issue you added.} other {# of your collaborators need access to <strong>Jira</strong> to view an issue you added.}}"},descriptionWithPageTitleGeneric:{id:"invite-prompt-on-link-insert.invite-prompt-flag.description-with-page-title-generic",defaultMessage:"{inviteeCount, plural, one {Your collaborator <strong>{firstName}</strong> needs access to <strong>Jira</strong> to view <strong>{title}</strong>.} other {# of your collaborators need access to <strong>Jira</strong> to view <strong>{title}</strong>.}}"},descriptionWithoutPageTitleGenericIssueTermRefresh:{id:"invite-prompt-on-link-insert.invite-prompt-flag.description-without-page-title-generic-issue-term-refresh",defaultMessage:"{inviteeCount, plural, one {Your collaborator <strong>{firstName}</strong> needs access to <strong>Jira</strong> to view a work item you added.} other {# of your collaborators need access to <strong>Jira</strong> to view a work item you added.}}"}}),y=f(({invitees:e,targetTitle:t,targetProduct:n,shouldOpenCoreInvites:s,onSubmit:i,onDismiss:r,onOptOut:o,onOpenCoreInvites:l,...c})=>{let u=e[0].name.split(" ")[0],{formatMessage:d}=(0,a("8C5kA").default)(),p=[{content:d(h.addPeopleButton,{inviteeCount:e.length,firstName:u}),onClick:i},{content:d(h.dismiss,{}),onClick:o}];return(0,m.jsx)(a("eCEXz").default,{...c,testId:"invite-prompt",icon:(0,m.jsx)(a("gYmGc").FlagCompatibleAvatarGroup,{data:e.map(e=>({name:e.name,src:e.avatar})),boundariesElement:"scrollParent"}),onDismissed:r,title:d(h.titleGeneric,{inviteeCount:e.length,displayName:e[0].name}),description:(0,m.jsx)(a("6f0Oj").default,{xcss:C,as:"p",children:t?d(h.descriptionWithPageTitleGeneric,{strong:(...e)=>(0,m.jsx)(a("5dK2X").default,{as:"strong",children:e.join("")}),inviteeCount:e.length,title:t,firstName:u}):d((0,a("dh538").fg)("confluence-issue-terminology-refresh")?h.descriptionWithoutPageTitleGenericIssueTermRefresh:h.descriptionWithoutPageTitleGeneric,{inviteeCount:e.length,firstName:u})}),actions:o?p:p.slice(0,1)})}),C=(0,a("ecnYn").xcss)({display:"-webkit-box",lineClamp:"3",boxOrient:"vertical",overflow:"hidden",margin:"space.0"}),v=async e=>{let{url:t,...n}=e;try{let e=await (0,a("f7B1p").cfetch)(t,n);if(e.ok)return e.json();throw Error(`Fetch failed with status ${e.status}`)}catch(e){throw e instanceof Error&&(e.message=`Error while fetching: ${e.message}`),e}},E=()=>{let{cloudId:e,userId:t}=(0,a("bQm3c").useSessionData)(),{createAnalyticsEvent:n}=(0,a("inPa6").useAnalyticsEvents)();return(0,s.useMemo)(()=>({createAnalyticsEvent:n,fetchJSON:v,getCurrentCloudId:()=>e,getCurrentProduct:()=>"confluence",getCurrentUserId:()=>t}),[n,e,t])},S=(e,t)=>{let n=E(),i=(0,s.useMemo)(()=>({...n,...t}),[n,t]);return(0,a("hCOLa").useService)(e,i)},I=()=>{let e=(0,s.useMemo)(()=>({}),[]);return S(a("1BTvF").invite,e)},k={confluence:"Confluence","jira-core":"Jira Work Management","jira-product-discovery":"Jira Product Discovery","jira-servicedesk":"Jira Service Management","jira-software":"Jira Software",townsquare:"Atlas",bitbucket:"Bitbucket"},_=e=>k[e],P=e=>{let t=0;for(let a of e)t++;return t},T=(e,t)=>{let a=0,n="";for(let s of e){if(a++>=t)break;n+=s}return n},A=(e,t)=>P(e)>t?`${T(e,t-3)}...`:e,w=(0,a("cgtv4").defineMessages)({title:{id:"invite-prompt.invite-success-flag.title",defaultMessage:"{inviteeCount, plural, one {Invite successfully sent} other {Invites successfully sent}}"},descriptionGenericOne:{id:"invite-prompt.invite-success-flag.description-generic.one",defaultMessage:"We emailed <strong>{inviteeEmailOrName}</strong> inviting them to {productDisplayName}."},descriptionGenericPlural:{id:"invite-prompt.invite-success-flag.description-generic.plural",defaultMessage:"We emailed <strong>{inviteeCount} people</strong> inviting them to {productDisplayName}."},additionalInfoGeneric:{id:"invite-prompt.invite-success-flag.additional-info-generic",defaultMessage:"Some people might need your admin's approval before they can join {productDisplayName}."}}),M=f(({invitees:t,onDismiss:n,product:i,...r})=>{let{formatMessage:o}=(0,a("8C5kA").default)(),l=A(t[0].email??t[0].name,25),c=_(i),u=(0,s.useMemo)(()=>({actions:[{content:"",onClick:()=>{}}],linkComponent:class extends s.PureComponent{render(){return(0,m.jsx)(a("6f0Oj").default,{as:"p",xcss:L,children:o(w.additionalInfoGeneric,{productDisplayName:c})})}}}),[o,c]);return(0,m.jsx)(a("eCEXz").default,{...r,...u,icon:(0,m.jsx)(e(a("3sFtD")),{spacing:"spacious",label:"Success",color:`var(--ds-icon-success, ${a("6fnsQ").G300})`}),onDismissed:n,title:(0,m.jsx)(a("6f0Oj").default,{as:"p",xcss:D,children:o(w.title,{inviteeCount:t.length})}),description:(0,m.jsx)(a("5dK2X").default,{as:"p",children:1===t.length?o(w.descriptionGenericOne,{strong:(...e)=>(0,m.jsx)(a("5dK2X").default,{as:"strong",children:e.join("")}),inviteeEmailOrName:l,productDisplayName:c}):o(w.descriptionGenericPlural,{strong:(...e)=>(0,m.jsx)(a("5dK2X").default,{as:"strong",children:e.join("")}),inviteeCount:t.length,productDisplayName:c})})})}),L=(0,a("ecnYn").xcss)({color:"color.text.subtle",transform:"translateX(2px)"}),D=(0,a("ecnYn").xcss)({color:"color.text.subtle"}),R=t=>(0,s.useCallback)(a=>{let n=e=>t?.hideFlag(e);t?.showFlag({customComponent:t=>e(s).createElement(M,{...t,id:t.id,invitees:a,product:"jira-software",onDismiss:n})})},[t]);a("42omo");let N=(0,a("cgtv4").defineMessages)({title:{id:"invite-prompt.invite-error-flag.title",defaultMessage:"Something went wrong"},description:{id:"invite-prompt.invite-error-flag.description",defaultMessage:"Try inviting your teammates again. If the problem persists, contact support."},action:{id:"invite-prompt.invite-error-flag.action",defaultMessage:"Contact support"}}),O=f(({onDismiss:t,...n})=>{let{formatMessage:s}=(0,a("8C5kA").default)();return(0,m.jsx)(a("eCEXz").default,{...n,icon:(0,m.jsx)(e(a("a3fRD")),{spacing:"spacious",label:"Error",color:`var(--ds-icon-danger, ${a("6fnsQ").R300})`}),onDismissed:t,title:(0,m.jsx)(a("6f0Oj").default,{as:"p",xcss:F,children:s(N.title)}),description:(0,m.jsx)(a("6f0Oj").default,{as:"p",xcss:F,children:s(N.description)}),actions:[{content:s(N.action),href:"https://support.atlassian.com/contact/",target:"_blank"}]})}),F=(0,a("ecnYn").xcss)({color:"color.text.subtle"}),x=t=>(0,s.useCallback)(()=>{let a=e=>t?.hideFlag(e);t?.showFlag({customComponent:t=>e(s).createElement(O,{...t,id:t.id,onDismiss:a})})},[t]),U="jira-software",K=t=>{let n=I(),{createAnalyticsEvent:i}=(0,a("inPa6").useAnalyticsEvents)(),l=R(t),c=x(t);return(0,s.useCallback)((d,p,g,m,f)=>{let b={invitees:d.length,pageVersion:f},h=e=>{i({type:"sendUIEvent",data:{action:"clicked",actionSubject:"button",actionSubjectId:"dismissFlag",source:"inviteOnLinkInsert",attributes:e}}).fire(),o()},C=(e,t,a)=>{i({type:"sendUIEvent",data:{action:"clicked",actionSubject:"button",actionSubjectId:"optOutFlag",source:"inviteOnLinkInsert",attributes:t}}).fire(),a?.hideFlag(e),u()};t?.showFlag({customComponent:o=>e(s).createElement(y,{...o,id:o.id,invitees:d.slice(0,10),targetTitle:p,targetProduct:U,onDismiss:()=>{h(b)},onOptOut:r()?()=>{C(o.id,b,t)}:void 0,onSubmit:async()=>{try{await n({continueUrl:g,users:d.map(({id:e})=>({id:e})),touchpoint:"Prompt invite on link insert",integration:"invitePromptOnLink",resources:[a("k4HRJ").AnyAri.create({resourceOwner:U,resourceType:"site",resourceId:m})]}),t.hideFlag(o.id),l(d)}catch{t.hideFlag(o.id),c()}i({type:"sendUIEvent",data:{action:"clicked",actionSubject:"button",actionSubjectId:"addPeople",source:"inviteOnLinkInsert",attributes:b}}).fire()}})}),i({type:"sendUIEvent",data:{action:"shown",actionSubject:"flag",actionSubjectId:"invitePromptFlag",source:"inviteOnLinkInsert",attributes:b}}).fire()},[i,t,n,c,l])};t.exports.useInviteOnLinkInsertEligibilityCheck=e=>{let{store:t}=(0,a("eIleF").useSmartLinkContext)(),{cloudId:n,userId:r}=(0,a("bQm3c").useSessionData)(),{createAnalyticsEvent:o}=(0,a("inPa6").useAnalyticsEvents)();return(0,s.useCallback)(async(a,s,l,u)=>{if(void 0!==u&&void 0!==e)try{let e=(0,i.getJiraSmartLinks)(s,t);for(let[t,s]of Object.entries(e))if(!u?.has(t)){let{tenantId:e,name:i}=s,o=await g({userId:r,confluenceCloudId:n,pageId:a,jiraCloudId:e});if(o.length>0){if(c())return;return{invitees:o,targetTitle:i,continueUrl:t,jiraCloudId:e,pageVersion:l}}break}}catch(e){o({type:"sendOperationalEvent",data:{action:"failed",actionSubject:"checkEligibility",source:"inviteOnLinkInsert",attributes:{message:String(e),details:{...e||{}}}}}).fire()}},[n,o,e,t,r])},t.exports.useShowInviteOnLinkInsertFlag=e=>{let{createAnalyticsEvent:t}=(0,a("inPa6").useAnalyticsEvents)(),n=K(e);return(0,s.useCallback)(async({invitees:e,targetTitle:a,continueUrl:s,jiraCloudId:i,pageVersion:r})=>{try{n(e,a,s,i,r)}catch(e){t({type:"sendOperationalEvent",data:{action:"failed",actionSubject:"showInviteFlag",source:"inviteOnLinkInsert",attributes:{message:String(e),details:{...e||{}}}}}).fire()}},[t,n])}}),n("kfvGz",function(e,t){var n=a("59MXn"),s=a("42omo"),i=a("lgKMU");e.exports.useShareLinkSocialOnPublish=(e,t,r,o=!1)=>{let l=(0,s.useMemo)(()=>r?[r]:[],[r]),{cloudId:c,orgId:u}=(0,a("bQm3c").useSessionData)(),{suggestedUsers:d,loading:p}=(0,n.useUserSuggestions)({currentPickedPrincipalIds:l,maxDisplayResults:3,orgId:u,siteId:c,skip:o}),{showModal:g}=(0,a("8aF6s").useDialogs)(),m=(0,s.useCallback)(()=>{g(i.ShareAndRestrictDialogController,{contentId:e,contentType:"page",allowRestrictions:!0,pageModes:"view",refetchButtonData:()=>{},isUnpublishedDraft:!1,spaceKey:t,defaultSuggestedUsers:d||[]})},[g,e,t,d]),f=(0,s.useMemo)(()=>!p&&null!==d&&d.length>0,[d,p]),b=(0,s.useMemo)(()=>d||[],[d]);return{isEligible:f,suggestedUsers:(0,a("6mKj3").expValEquals)("confluence_edit_page_rerender_optimizations","isEnabled",!0)?b:d||[],showShareModal:m}}}),n("c2PBW",function(t,n){var s=a("42omo");let i=()=>e(s).createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"21",viewBox:"0 0 20 21",fill:"none"},e(s).createElement("path",{d:"M13.8418 5.44957L13.8243 5.44434L4.64062 14.985L4.64673 15.0016L19.6376 20.2301L13.8418 5.44957Z",fill:"#1868DB"}),e(s).createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.33767 1.60522L8.34276 5.45308L3.27832 4.64668L3.30712 3.1613L3.33767 1.60522Z",fill:"#FCA700"}),e(s).createElement("path",{d:"M12.6558 7.90377H10.9139L9.20508 2.82275H10.947L12.6558 7.90377Z",fill:"#BF63F3"}),e(s).createElement("path",{d:"M7.42836 13.8565L7.40131 13.7841C7.24596 13.3739 6.97891 13.0231 6.62807 12.7708C6.27025 12.5134 5.8496 12.3772 5.41149 12.3772C4.97338 12.3772 4.5536 12.5134 4.19491 12.7708C3.84407 13.0231 3.57702 13.3739 3.42167 13.7841L3.39462 13.8565H1.84814L1.87956 13.7195C2.06545 12.9131 2.51404 12.1818 3.14327 11.6607C3.45833 11.3998 3.81004 11.1973 4.18793 11.0568C4.57978 10.9119 4.99084 10.8386 5.41062 10.8386C5.8304 10.8386 6.24145 10.9119 6.63331 11.0568C7.01207 11.1964 7.36291 11.3998 7.67796 11.6607C8.3072 12.1818 8.75665 12.9131 8.94167 13.7195L8.97309 13.8565H7.42662H7.42836Z",fill:"#1868DB"}),e(s).createElement("path",{d:"M4.53799 8.70059C4.59123 8.65521 4.64272 8.60197 4.69159 8.54262C4.74047 8.48328 4.78323 8.42044 4.81814 8.35761C5.02323 7.98844 4.96214 7.60706 4.68985 7.29986C4.64359 7.2475 4.59123 7.19688 4.53276 7.14975C4.47428 7.10262 4.4097 7.05724 4.34599 7.02059C3.98905 6.81637 3.60417 6.83208 3.28476 7.10437C3.23065 7.15062 3.17828 7.20386 3.12854 7.26495C3.07967 7.32517 3.03777 7.38626 3.00374 7.44735C2.79952 7.8139 2.86148 8.19441 3.1329 8.50422C3.1809 8.55921 3.23501 8.61157 3.2961 8.66132C3.35719 8.71106 3.41392 8.75033 3.47501 8.78524C3.83108 8.99121 4.21683 8.9755 4.53712 8.70059H4.53799Z",fill:"#BF63F3"}),e(s).createElement("path",{d:"M11.64 11.4008C11.6933 11.3554 11.7448 11.3022 11.7936 11.2428C11.8425 11.1835 11.8853 11.1206 11.9202 11.0578C12.1253 10.6886 12.0642 10.3073 11.7919 10.0001C11.7456 9.94769 11.6933 9.89707 11.6348 9.84995C11.5763 9.80282 11.5118 9.75744 11.448 9.72078C11.0911 9.51657 10.7062 9.53227 10.3868 9.80457C10.3327 9.85082 10.2803 9.90406 10.2306 9.96515C10.1808 10.0262 10.1398 10.0865 10.1058 10.1475C9.90157 10.5141 9.96353 10.8946 10.235 11.2044C10.283 11.2594 10.3371 11.3118 10.3982 11.3615C10.4592 11.4113 10.516 11.4505 10.5771 11.4854C10.9331 11.6914 11.3189 11.6757 11.6392 11.4008H11.64Z",fill:"#09326C"}),e(s).createElement("path",{d:"M7.40029 13.7842L7.42734 13.8567H8.97382L8.9424 13.7197C8.76611 12.9517 8.34982 12.2517 7.76683 11.7368L6.70996 12.8356C7.01978 13.0817 7.25803 13.4072 7.40029 13.7842Z",fill:"#09326C"}),e(s).createElement("path",{d:"M12.6557 7.90381L12.345 6.98047L11.4565 7.90381H12.6557Z",fill:"#09326C"}),e(s).createElement("path",{d:"M7.70233 7.31836L6.89453 8.979L8.55517 9.7868L9.36297 8.12616L7.70233 7.31836Z",fill:"#FCA700"}),e(s).createElement("path",{d:"M3.01745 9.92587C3.03404 9.91104 3.05062 9.90318 3.06807 9.89097C3.08553 9.88486 3.10385 9.87264 3.12393 9.87089C3.12393 9.87089 3.13702 9.87264 3.15709 9.87613C3.17716 9.88398 3.20509 9.88922 3.23302 9.90406C3.28975 9.92849 3.33775 9.97911 3.38138 10.0131C3.432 10.1249 3.44073 10.2593 3.4992 10.3954C3.4992 10.3954 3.52189 10.4364 3.56204 10.4757C3.60306 10.5141 3.66065 10.5411 3.69207 10.5385C3.73135 10.5342 3.75578 10.5193 3.76625 10.5001C3.77673 10.4809 3.77324 10.4574 3.7584 10.4364C3.74095 10.4155 3.72087 10.3971 3.6816 10.3579C3.68247 10.3553 3.68247 10.35 3.68509 10.3474C3.63796 10.3064 3.61964 10.2296 3.60567 10.1484C3.58996 10.0664 3.57775 9.96776 3.5088 9.87002C3.50007 9.87962 3.48698 9.87875 3.48873 9.87002L3.50356 9.86304C3.47651 9.83511 3.44596 9.81155 3.42153 9.78711C3.39447 9.76617 3.36829 9.74522 3.34036 9.72864C3.28538 9.69897 3.22342 9.67802 3.15011 9.70158L3.16844 9.68151C3.03927 9.66929 2.90662 9.72777 2.8176 9.79147C2.72422 9.85518 2.64393 9.92413 2.57062 9.95729C2.53396 9.97387 2.5008 9.98347 2.46851 9.97998C2.43622 9.98086 2.40131 9.96777 2.36989 9.9538C2.31491 9.92326 2.27302 9.86304 2.23985 9.77664L2.23811 9.77926H2.23549C2.23375 9.79758 2.23898 9.84646 2.25207 9.88486C2.25731 9.9058 2.26604 9.92064 2.27215 9.93373C2.27738 9.94769 2.28349 9.95293 2.28349 9.95293C2.21804 9.93897 2.18487 9.87089 2.17353 9.80456C2.16044 9.73649 2.16306 9.66231 2.136 9.59336L2.15607 9.58726C2.17615 9.64835 2.19971 9.69722 2.21455 9.71467C2.20495 9.66231 2.19535 9.59424 2.16305 9.51133C2.13338 9.43104 2.0688 9.32893 1.96669 9.27482C1.87244 9.22158 1.75462 9.20587 1.65687 9.23206C1.56 9.25736 1.49804 9.30624 1.4544 9.34376C1.46662 9.35424 1.51026 9.28529 1.55302 9.32282C1.49978 9.34987 1.45876 9.38915 1.41775 9.41882C1.39767 9.39176 1.42822 9.38391 1.42996 9.37518C1.41775 9.3778 1.38371 9.39787 1.33833 9.42667C1.29295 9.4546 1.23447 9.49475 1.176 9.51307C1.11927 9.53227 1.0608 9.52791 1.00146 9.49737C0.947346 9.47031 0.912437 9.41358 0.881019 9.33155C0.851346 9.24951 0.82691 9.15264 0.785019 9.06449C0.745746 8.97547 0.675055 8.89867 0.612219 8.86726C0.581673 8.84893 0.554619 8.84107 0.533673 8.83846C0.513601 8.83497 0.499637 8.83496 0.493528 8.83933C0.480437 8.84718 0.497891 8.87075 0.539782 8.90827L0.521455 8.91875C0.614837 8.97635 0.655855 9.06537 0.659346 9.17533C0.666328 9.18929 0.66371 9.19191 0.680291 9.18667C0.683782 9.19016 0.690764 9.19453 0.697746 9.19104C0.737019 9.1762 0.732655 9.21547 0.737019 9.22944C0.67331 9.23904 0.690764 9.32282 0.737891 9.41358C0.760582 9.45896 0.79811 9.50086 0.829528 9.52966C0.864437 9.55758 0.892364 9.57417 0.902837 9.58027C0.888873 9.60646 0.908946 9.6274 0.938619 9.63351C0.966546 9.64224 0.997091 9.64573 1.01018 9.66057C1.00756 9.66231 0.989237 9.67278 0.986619 9.67366C0.990982 9.68238 1.02676 9.69897 1.07825 9.69635C1.12975 9.69897 1.18909 9.6754 1.23622 9.65184C1.32698 9.5986 1.38022 9.54013 1.35055 9.60995C1.48146 9.56457 1.61149 9.45722 1.72146 9.45024C1.77295 9.445 1.83753 9.4642 1.88204 9.49737C1.92655 9.53053 1.95971 9.59511 1.98851 9.6754C2.01731 9.75569 2.04 9.84907 2.088 9.94507C2.11156 9.9922 2.14385 10.0411 2.18662 10.0812C2.22851 10.1222 2.28 10.151 2.33149 10.1711C2.43273 10.2121 2.5584 10.2078 2.65004 10.1711C2.74342 10.1379 2.81498 10.0934 2.87956 10.0638L2.87171 10.0603C2.87695 10.0594 2.88567 10.0489 2.89353 10.0542C2.90749 10.028 2.93891 9.99133 2.96596 9.96515C2.99302 9.93809 3.01745 9.92238 3.01745 9.92238V9.92587ZM2.05135 9.61606C2.05135 9.61606 2.04786 9.61606 2.04698 9.61693C2.05309 9.61431 2.02429 9.55147 2.02255 9.54973L2.04087 9.541C2.11244 9.59337 2.02255 9.79322 2.03476 9.62827C2.02866 9.62478 2.04436 9.61955 2.05047 9.61606H2.05135ZM1.58444 9.41271C1.57309 9.4162 1.56087 9.42231 1.54778 9.42842C1.59666 9.35947 1.70313 9.31584 1.80087 9.34726C1.89949 9.37431 1.97106 9.44238 2.02691 9.5122C1.99898 9.51046 1.97629 9.50435 1.95796 9.49213C1.93615 9.48427 1.92306 9.46682 1.90386 9.45635C1.89513 9.45024 1.88727 9.44238 1.87855 9.4354C1.86895 9.42929 1.85935 9.42318 1.84975 9.41707C1.83229 9.40311 1.81135 9.39787 1.79564 9.39176C1.76073 9.39526 1.72669 9.39526 1.69004 9.39613C1.65426 9.39787 1.61586 9.40398 1.58269 9.41358L1.58444 9.41271ZM0.741382 9.3298L0.73091 9.33242L0.729164 9.32718C0.729164 9.32718 0.735273 9.32631 0.737019 9.32718C0.739637 9.32718 0.741382 9.32893 0.741382 9.33067V9.3298ZM2.92582 9.92151C2.92582 9.94158 2.88393 9.95904 2.89004 9.9154C2.89964 9.9154 2.90924 9.89009 2.92582 9.92151ZM1.41862 9.49475C1.43869 9.5218 1.39418 9.56369 1.36626 9.52529C1.38196 9.5122 1.40029 9.50347 1.41862 9.49475ZM3.31156 9.877C3.34647 9.85693 3.31855 9.8866 3.30807 9.90667C3.30807 9.90056 3.29847 9.89184 3.31069 9.88049V9.877H3.31156ZM3.47564 10.0995C3.49396 10.0978 3.50967 10.11 3.51229 10.117C3.50531 10.1397 3.46342 10.1126 3.47564 10.0995ZM3.67985 10.494C3.69207 10.4783 3.70342 10.4774 3.69469 10.4958C3.68596 10.508 3.66851 10.5097 3.68073 10.4897C3.68073 10.4897 3.67986 10.4923 3.68073 10.494H3.67985ZM1.16029 9.56195C1.15855 9.5314 1.16902 9.52442 1.18386 9.52267C1.19869 9.51831 1.21789 9.51831 1.22487 9.50609C1.24756 9.5602 1.18647 9.54362 1.17513 9.55584C1.16902 9.55758 1.16465 9.55933 1.16116 9.56195H1.16029ZM2.50167 10.0393C2.49905 10.0131 2.50865 10.0088 2.52175 10.0097C2.53484 10.0097 2.55229 10.0097 2.5584 10.0027L2.56538 10.0219C2.55404 10.028 2.54618 10.0358 2.53658 10.0411C2.52698 10.0446 2.51651 10.0446 2.50255 10.0385H2.50167V10.0393ZM1.63942 9.26609C1.64815 9.24078 1.67956 9.25737 1.69353 9.25475C1.69615 9.28355 1.63942 9.29926 1.63942 9.26609ZM2.14386 9.55584C2.11506 9.57067 2.11942 9.53926 2.11331 9.53315C2.12116 9.53576 2.14386 9.53751 2.1456 9.54362C2.14647 9.54798 2.14385 9.5506 2.14298 9.55584H2.14386ZM2.48422 10.062C2.46415 10.0611 2.44146 10.0629 2.42138 10.055L2.42575 10.035C2.44495 10.0419 2.46502 10.0393 2.48422 10.0411V10.062ZM2.31229 9.97038L2.32538 9.95467C2.3568 9.95206 2.32887 9.99744 2.31229 9.97038ZM2.72509 9.92587C2.72509 9.92587 2.71636 9.92937 2.71375 9.93111C2.67709 9.95991 2.68582 9.86129 2.72509 9.92587ZM2.94502 9.75744C2.94851 9.7522 2.95375 9.74347 2.95985 9.74086C3.00175 9.72951 2.97469 9.78973 2.94502 9.75744Z",fill:"#101214"}),e(s).createElement("path",{d:"M7.75714 2.66635C7.77896 2.66025 7.79728 2.66199 7.81823 2.6585C7.83656 2.66112 7.85925 2.6585 7.87757 2.66635C7.87757 2.66635 7.88805 2.67421 7.90463 2.68555C7.91947 2.70126 7.94216 2.71872 7.95961 2.7449C7.99888 2.7929 8.01808 2.8601 8.04252 2.90984C8.03728 3.0329 7.98317 3.15595 7.97357 3.30432C7.97357 3.30432 7.97532 3.35144 7.99277 3.40468C8.01197 3.45792 8.05125 3.50766 8.08005 3.51901C8.1167 3.53297 8.1455 3.53123 8.16383 3.51901C8.18128 3.50679 8.19001 3.4841 8.18565 3.45879C8.17954 3.43261 8.16994 3.40643 8.15336 3.35406C8.15597 3.35232 8.15772 3.34795 8.16121 3.34708C8.13765 3.28948 8.15685 3.21268 8.18128 3.13326C8.20485 3.05297 8.23801 2.95959 8.22143 2.84177C8.20921 2.84614 8.19787 2.84003 8.20397 2.83217H8.21968C8.20834 2.79465 8.19263 2.75974 8.18128 2.72744C8.16645 2.69603 8.15248 2.66548 8.1359 2.6393C8.10012 2.58781 8.05474 2.54155 7.97881 2.52846L8.00499 2.51886C7.8959 2.44905 7.75103 2.44032 7.64194 2.4569C7.53023 2.47086 7.42725 2.49617 7.34608 2.49181C7.30594 2.49006 7.27277 2.48308 7.24485 2.46563C7.21517 2.45166 7.19074 2.42374 7.16892 2.39755C7.13314 2.34519 7.12441 2.27275 7.13314 2.18112L7.13052 2.18286H7.12877C7.1183 2.19683 7.10085 2.24308 7.09561 2.28323C7.08863 2.32337 7.09212 2.35828 7.09212 2.35828C7.03976 2.31552 7.0415 2.24046 7.06157 2.17675C7.08077 2.11043 7.11656 2.04585 7.12441 1.97166L7.14448 1.97515C7.13488 2.03886 7.13314 2.09297 7.13837 2.11479C7.15408 2.06417 7.1759 1.99872 7.1855 1.91057C7.19597 1.82592 7.18463 1.70548 7.1183 1.61123C7.05808 1.52046 6.96121 1.45326 6.86172 1.43145C6.76397 1.4105 6.6863 1.42534 6.63132 1.43843C6.63743 1.45326 6.70812 1.41137 6.72819 1.46461C6.66797 1.46461 6.61387 1.48032 6.56412 1.48817C6.55888 1.45501 6.58943 1.46199 6.59467 1.45501C6.58245 1.45152 6.54317 1.45414 6.48994 1.4585C6.4367 1.46286 6.36688 1.47159 6.30579 1.46199C6.24645 1.45326 6.1967 1.42272 6.15743 1.36861C6.12165 1.31974 6.11641 1.25341 6.12601 1.16526C6.13648 1.07799 6.15917 0.981118 6.16267 0.883372C6.1679 0.785627 6.13997 0.686136 6.09896 0.629409C6.08063 0.598863 6.05968 0.580536 6.04223 0.568318C6.02565 0.5561 6.01343 0.549991 6.00557 0.550863C5.99074 0.551736 5.9951 0.580536 6.01517 0.633772H5.99423C6.05183 0.7289 6.04659 0.826645 6.00034 0.927009C6.00034 0.942718 5.99685 0.94359 6.0143 0.946209C6.01605 0.950572 6.02041 0.958427 6.02739 0.957554C6.06928 0.962791 6.04659 0.995082 6.04485 1.00992C5.98376 0.989845 5.96107 1.07188 5.96194 1.17486C5.96194 1.22548 5.97503 1.27959 5.99074 1.32061C6.00907 1.36075 6.02652 1.38868 6.03263 1.39915C6.00819 1.41574 6.01692 1.44454 6.03961 1.46286C6.06056 1.48381 6.08674 1.50039 6.0911 1.51959C6.08761 1.51959 6.06754 1.52046 6.06405 1.52046C6.06405 1.53094 6.08848 1.56148 6.13561 1.58243C6.18012 1.60861 6.24383 1.61472 6.29619 1.61472C6.40092 1.60861 6.4751 1.58068 6.4175 1.62955C6.55452 1.64875 6.71947 1.6121 6.8207 1.65574C6.86957 1.67494 6.91757 1.72119 6.94201 1.77181C6.96645 1.82155 6.96645 1.89486 6.95597 1.97952C6.9455 2.06417 6.92281 2.15755 6.92194 2.2649C6.92194 2.31814 6.92805 2.37574 6.94812 2.43072C6.96732 2.48657 6.99961 2.53544 7.03627 2.57646C7.10783 2.65937 7.22128 2.71261 7.3199 2.72221C7.41852 2.73443 7.5023 2.72832 7.57299 2.73094L7.56776 2.72395C7.57299 2.7257 7.58521 2.71959 7.58957 2.72832C7.61401 2.71174 7.65852 2.69254 7.69517 2.68206C7.73183 2.66985 7.76063 2.66723 7.76063 2.66723L7.75714 2.66635ZM7.03801 1.95072C7.03801 1.95072 7.03539 1.94985 7.03365 1.95072C7.03976 1.95072 7.04237 1.88265 7.04237 1.88003H7.06332C7.10347 1.96032 6.93241 2.09646 7.01794 1.95508C7.01357 1.94897 7.03103 1.95159 7.03801 1.95159V1.95072ZM6.71597 1.55625C6.70376 1.55363 6.69067 1.5545 6.6767 1.55363C6.75176 1.51435 6.86696 1.52483 6.93939 1.59726C7.01445 1.66621 7.04761 1.75959 7.06507 1.84686C7.0415 1.8329 7.02317 1.81632 7.0127 1.79799C6.99699 1.78141 6.9935 1.75959 6.98128 1.74126C6.97605 1.73166 6.97256 1.72119 6.96819 1.71072C6.96208 1.70112 6.95685 1.69152 6.95074 1.68192C6.94114 1.66097 6.92543 1.64701 6.91408 1.63392C6.88092 1.62083 6.85125 1.60512 6.81808 1.59028C6.78492 1.57545 6.74827 1.56323 6.7151 1.55712L6.71597 1.55625ZM6.00296 1.09894L5.99248 1.09632V1.09021C5.99248 1.09021 5.99947 1.09195 6.00034 1.0937C6.00208 1.09457 6.00383 1.09719 6.00296 1.09806V1.09894ZM7.67859 2.62097C7.66899 2.63843 7.62448 2.63581 7.64892 2.59915C7.65677 2.60352 7.67772 2.58519 7.67859 2.62097ZM6.53183 1.55363C6.53794 1.58679 6.47859 1.60425 6.47161 1.55712C6.49168 1.55275 6.51176 1.55275 6.53183 1.55363ZM8.04252 2.75712C8.08267 2.75537 8.04427 2.76934 8.02594 2.78155C8.02856 2.77632 8.02419 2.7641 8.04077 2.75886L8.04339 2.75625L8.04252 2.75712ZM8.08616 3.02941C8.10274 3.03639 8.11147 3.05385 8.11147 3.0617C8.09488 3.07828 8.06957 3.03552 8.08616 3.02941ZM8.08877 3.47363C8.10623 3.4649 8.1167 3.46926 8.10099 3.48235C8.0879 3.48934 8.07132 3.48235 8.09052 3.47014C8.09052 3.47014 8.08877 3.47188 8.0879 3.47363H8.08877ZM6.27088 1.49603C6.2831 1.4681 6.29532 1.46635 6.30928 1.47159C6.32412 1.47421 6.34157 1.48294 6.35292 1.47508C6.34856 1.53355 6.30143 1.49079 6.28572 1.4969C6.27961 1.49603 6.27437 1.49515 6.27088 1.4969V1.49603ZM7.24659 2.53283C7.25619 2.50839 7.26667 2.50839 7.27801 2.51537C7.28936 2.52235 7.30507 2.53021 7.31379 2.52585L7.31117 2.54592C7.29808 2.54592 7.28761 2.54941 7.27627 2.55028C7.26667 2.54854 7.25619 2.54417 7.24747 2.53283H7.24659ZM6.83205 1.45152C6.85125 1.43319 6.87132 1.46199 6.88528 1.46548C6.87394 1.49254 6.81634 1.48032 6.83205 1.45065V1.45152ZM7.14885 1.93937C7.11656 1.93937 7.13488 1.91319 7.13227 1.90534C7.13837 1.91145 7.15757 1.92279 7.1567 1.92977C7.15583 1.93414 7.15234 1.93501 7.14885 1.93937ZM7.22128 2.54417C7.20383 2.5337 7.18288 2.52584 7.16805 2.50926L7.18114 2.49355C7.1951 2.50926 7.2143 2.5145 7.23001 2.52585L7.22041 2.54417H7.22128ZM7.10957 2.38534L7.12877 2.37748C7.15757 2.38883 7.11307 2.41675 7.10957 2.38621V2.38534ZM7.49794 2.53283C7.49794 2.53283 7.48834 2.53195 7.48485 2.53283C7.43859 2.54243 7.49183 2.45777 7.49794 2.53283ZM7.76936 2.48308C7.77547 2.48046 7.78332 2.47435 7.78943 2.47523C7.83132 2.48395 7.7807 2.52585 7.76936 2.48308Z",fill:"#101214"})),r=(0,a("cgtv4").defineMessages)({publishSuccessMessageWithSpaceName:{id:"editor-features.user.publish.success.with.space.name",defaultMessage:"{pageTitle} was successfully published in the {spaceName} space"},publishSuccessMessage:{id:"editor-features.user.publish.success",defaultMessage:"{pageTitle} was successfully published"},publishSuccessMessageWithSocial:{id:"editor-features.publish.success.message.with.social",defaultMessage:"Share this page to ensure your team can see and build on your contributions."}}),o=({intl:t,title:n,spaceName:i,suggestedUsers:o=[],showSocial:l})=>{if(l){let n=(o||[]).reduce((e,t)=>{let a=t?.name,n=t?.avatarUrl;return a?[...e,{name:a,src:n||""}]:e},[]);return e(s).createElement(a("1GzhS").default,{space:"space.100",alignInline:"start"},e(s).createElement("span",null,t.formatMessage(r.publishSuccessMessageWithSocial)),n.length>0&&e(s).createElement(a("2Pg7f").default,{size:"small",data:n}))}let c=i?r.publishSuccessMessageWithSpaceName:r.publishSuccessMessage,u={spaceName:i,pageTitle:e(s).createElement("b",null,n)};return e(s).createElement(a("1GzhS").default,{space:"space.100",alignInline:"start"},e(s).createElement("span",null,t.formatMessage(c,u)))},l=(0,a("cgtv4").defineMessages)({publishSuccessTitle:{id:"editor-features.success.publish.title",defaultMessage:"Published!"},publishSuccessTitleWithSocial:{id:"editor-features.publish.success.title.with.social",defaultMessage:"Page successfully published"},copyLinkCTA:{id:"editor-features.user.copy-your-page",defaultMessage:"Copy link"},copiedCTA:{id:"editor-features.user.copied-page",defaultMessage:"Copied"},sharePageCTA:{id:"editor-features.publish.success.share-page",defaultMessage:"Share page"}}),c=async({spaceName:t,flags:n,title:r,intl:c,copyContentLink:u,createAnalyticsEvent:d,suggestedUsers:p=[],showShareModal:g})=>{let m,f=!1,b=l.publishSuccessTitleWithSocial,h=()=>{!f&&u&&(f=!0,d&&d({type:"sendUIEvent",data:{action:"clicked",actionSubject:"link",actionSubjectId:"publishFlagCopyPageCTA",source:"publishSuccessFlag",attributes:{isFirstTimePublish:!0,isSocialFlag:!0}}}).fire(),u(),n.updateFlag(m,{actions:C()}),setTimeout(()=>{f=!1,n.updateFlag(m,{actions:C()})},4e3))},y=()=>{d&&d({type:"sendUIEvent",data:{action:"clicked",actionSubject:"button",actionSubjectId:"publishFlagSharePageCTA",source:"publishSuccessFlag",attributes:{isFirstTimePublish:!0}}}).fire(),g?.()},C=()=>{let t=[];return u&&(g&&t.push({content:e(s).createElement(a("gtD4K").default,l.sharePageCTA),onClick:y}),t.push({content:f?e(s).createElement("div",{className:(0,a("gMc0m").default)(["_syaz1gmx"])},e(s).createElement(a("gtD4K").default,l.copiedCTA)):e(s).createElement(a("gtD4K").default,l.copyLinkCTA),onClick:f?void 0:h})),t},v=()=>e(s).createElement(o,{intl:c,title:r,spaceName:t,suggestedUsers:p,showSocial:!!u}),E={};u?E={type:"custom",customIcon:e(s).createElement(i,null),description:v(),actions:C()}:(E={description:v()},b=l.publishSuccessTitle);let S=await n.showFlag({type:"success-circle",title:c.formatMessage(b),close:"never",messageId:"confluence-frontend-editor-features-publish-success-flag",messageType:"transactional",...E});m=S.id,setTimeout(()=>n.hideFlag(S.id),11e3)};t.exports.showPublishSuccessFlagsWithSocialAndCopyLink=c});
//# sourceMappingURL=FullPageEditorComponent.7a997750.js.map
