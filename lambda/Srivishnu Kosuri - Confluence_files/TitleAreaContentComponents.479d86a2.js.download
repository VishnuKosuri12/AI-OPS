function e(e){return e&&e.__esModule?e.default:e}function t(e,t,n,i){Object.defineProperty(e,t,{get:n,set:i,enumerable:!0,configurable:!0})}var n=globalThis.parcelRequired477,i=n.register;i("fTmNK",function(t,i){var a=n("42omo"),o=n("jSnXV"),r=n("5d9b4");let s=({contentId:e,title:t,isEditorEmpty:i,userOffline:o})=>{let{isAIEnabledForContent:r}=(0,n("7mpOv").useIsAIEnabledForContent)({contentId:e}),s=(0,a.useContext)(n("1kHsc").ExperienceTrackerContext),{trackAIInteractionInit:l}=(0,n("fYQcF").useAIEventsInstrumentation)(),[c,d]=(0,a.useState)(!1),[u,p]=(0,a.useState)(!1),g=(0,a.useRef)(null),m=(0,a.useRef)(null),f=(0,a.useRef)(t),h=(0,a.useRef)(!0);(0,a.useEffect)(()=>{h.current=i},[i]),(0,a.useEffect)(()=>{f.current=t},[t]);let E=r&&!o&&(0,n("6mKj3").expValEquals)("confluence_ai_title_generation_on_paste_standard","isEnabled",!0),[T,_]=(0,a.useState)(""),I=(0,a.useCallback)(()=>Array.from(document.querySelectorAll(".ProseMirror")).filter(e=>!e.closest('[data-testid="chromeless-editor"]'))[0],[]),b=(0,a.useCallback)(e=>{let t=f.current;if(!E||t&&""!==t.trim()||!e)return;let i=e.textContent||"";0!==i.trim().length&&(d(!0),s?.start({name:n("irVI7").AI_TITLE_GENERATION}),l({attributes:{aiFeatureName:"aiTitleGenOnPaste"}}),_(i),p(!0))},[E,s,l]);(0,a.useEffect)(()=>{if(!E)return;let e=I();if(!e)return;let t=t=>{let i=t.clipboardData?.getData("text/plain")||"";h.current&&i.length>(0,n("6mKj3").expVal)("confluence_ai_title_generation_on_paste_standard","charLength",50)&&(g.current&&clearTimeout(g.current),g.current=setTimeout(()=>{b(e),g.current=null},100))};return m.current=e,e.addEventListener("paste",t),()=>{e.removeEventListener("paste",t),g.current&&(clearTimeout(g.current),g.current=null)}},[I,E,b]);let S=(0,a.useCallback)(()=>{d(!1),p(!1)},[]),A=(0,a.useCallback)(()=>{d(!1),p(!1)},[]);return{shouldGenerateTitle:E&&(!t||""===t.trim())&&!i,generateTitleFromPaste:b,isTitleGenerating:c,shouldShowStreaming:u,documentContext:T,onStreamingComplete:S,onStreamingError:A}},l=({contentId:e,cloudId:t,title:i,userOffline:o,onTitleGenerated:r,onTitleGeneratingChange:l,isEditorEmpty:c})=>{let{shouldShowStreaming:d,documentContext:u,onStreamingComplete:p,onStreamingError:g,isTitleGenerating:m}=s({contentId:e,cloudId:t,title:i,onTitleChange:r,userOffline:o,isEditorEmpty:c}),{locale:f}=(0,n("8C5kA").default)(),h=(0,a.useRef)(!1),E=(0,a.useRef)(u);(0,a.useEffect)(()=>{u!==E.current&&""!==u&&(h.current=!1,E.current=u)},[u]);let T=(0,a.useCallback)(e=>{h.current||(h.current=!0,r(e))},[r]),{content:_,responseState:I,error:b}=(0,n("ise6Y").useTitleGenerationStreaming)({contentId:e,cloudId:t,documentContext:u,locale:f,skip:!d,onTitleChange:T});return(0,a.useEffect)(()=>{"FinalResponse"===I&&_?p():"Error"===I&&b&&g()},[I,_,b,p,g]),(0,a.useEffect)(()=>{l?.(m)},[m,l]),null};l.displayName="EditorTitleAIGenerationOnPaste";let c=(0,n("cgtv4").defineMessages)({blogpostTitlePlaceholder:{id:"editor-title.existing.blogpost.placeholder",defaultMessage:"Blog post title"},editorOnboardingExpTitlePlaceholderText:{id:"editor-title.editor.onboarding.title.placeholder",defaultMessage:"Give this page a title"},aiGeneratedTitleDismissButton:{id:"editor-title.ai.title.error.dismiss",defaultMessage:"Dismiss"},createBlogpostTitleDescription:{id:"editor-title.description.add.blogpost",defaultMessage:", Add Blog Post"},editPageTitleDescription:{id:"editor-title.description.edit.page",defaultMessage:", Edit"},createPageTitleDescription:{id:"editor-title.description.add.page",defaultMessage:", Add Page"},createPageTemplateTitleDescription:{id:"editor-title.description.add.page.template",defaultMessage:", Create template"},editPageTemplateTitleDescription:{id:"editor-title.description.edit.page.template",defaultMessage:", Edit template"}}),d={"data-ai-suggest-title-target":"true"},u=(0,n("ecnYn").xcss)({backgroundColor:"elevation.surface"}),p=(0,n("ecnYn").xcss)({marginTop:"space.negative.075",marginBottom:"space.050"}),g=()=>e(a).createElement(e(a).Fragment,null,e(a).createElement(n("6f0Oj").default,{padding:"space.200"}),e(a).createElement(n("6f0Oj").default,{padding:"space.025"}));g.displayName="TitleGenerationPlaceholder";let m=()=>!!(0,n("6mKj3").expValEquals)("platform_editor_editor_title_field_sizing","variant","test")&&(0,n("idaAv").isFieldSizingSupported)();class f extends a.Component{static getDerivedStateFromProps(e,t){return e.title!==t.prevTitle?{title:e.title,prevTitle:e.title}:null}componentDidMount(){let{isTemplateEditor:e,title:t}=this.props,{shouldFocusTitle:n}=this.state;e&&!t&&n&&this._focusTextarea(),this._updateHeightAuto(),window.addEventListener("resize",this._onWindowResize)}componentDidUpdate(t,i){let{userOffline:o,focusEditor:r,title:s,isInPreview:l,flagArray:d,intl:u,isTitleGeneratingFromPaste:p,flags:g}=this.props,{focusChanged:m,shouldFocusTitle:f}=this.state,h=t.userOffline&&!o,E=!t.userOffline&&!o;if(this._updateHeightAuto(),i.prevTitle!==s&&(this._debouncedOnChange.cancel(),(0,n("9wGTI").fg)("platform_editor_ai_aifc_patch_ga_blockers")&&(this._focusTextarea(),s&&!this._isManualTitleChange&&this._undoRedoManager.addToUndoStack(s),this._isManualTitleChange=!1)),h&&(m&&f?this._focusTextarea():r()),E&&!s&&f&&this._focusTextarea(),d&&t.flagArray&&d.length>t.flagArray.length&&(this._hasTitleError()||String(d[0].title)===n("1mHQU").ALLOWED_FLAG_MESSAGES.AI_GENERATED_TITLE)&&this._onTitleError(),t.isTitleGeneratingFromPaste&&!p){let t=(0,n("cHfGW").buildEditorFlagMessage)({errorData:{[n("1mHQU").ALLOWED_FLAG_MESSAGES.AI_GENERATED_TITLE_FROM_PASTE]:!0},formatMessage:u.formatMessage});g.hideFlag("ai-generated-title-from-paste-flag"),g.showCustomFlag({id:"ai-generated-title-from-paste-flag",title:t?.title,description:t?.description,customIcon:e(a).createElement(n("6f0Oj").default,{paddingBlockStart:"space.050"},e(a).createElement(n("lAFHW").RovoIcon,{label:"",size:"xsmall"})),actions:[{content:u.formatMessage(c.aiGeneratedTitleDismissButton),onClick:()=>g.hideFlag("ai-generated-title-from-paste-flag")}]}),this._focusTextarea()}if(t.title===s&&t.isInPreview===l)return}componentWillUnmount(){window.removeEventListener("resize",this._onWindowResize),this._debouncedOnChange.flush(),(0,n("9wGTI").fg)("platform_editor_ai_aifc_patch_ga_blockers")&&this._undoRedoManager.clear()}_focusTextarea(){this._textareaRef.current&&this._textareaRef.current.focus()}_updateHeightAuto(){!m()&&this._textareaRef.current&&(this._textareaRef.current.style.height="auto",this._textareaRef.current.style.height=`${this._textareaRef.current.scrollHeight}px`)}render(){let{isDisabled:t,isTitleCenterAligned:i,isAIEnabledForContent:o}=this.props,r=this.props.debounceOnChange?this.state.title:this.props.title,s=this.generateDescription(),c=this._getTitlePlaceholder(),f=!!window.__SSR_RENDERED__,h=m()?n("8m9SI").EditorTitleTextAreaNext:n("8m9SI").EditorTitleTextArea,E=o&&(0,n("6mKj3").UNSAFE_expValEqualsNoExposure)("confluence_ai_title_generation","cohort","test")?n("8m9SI").AIGeneratedEditorTitleTextArea:h;return this.state.isTitleGenerating?e(a).createElement(n("6f0Oj").default,{xcss:p},e(a).createElement(n("dOOm2").AIBorder,{loading:!0,useModalStyles:!0,hideGlow:!0,customInnerContainerStyles:u},e(a).createElement(g,null))):e(a).createElement(n("6cnUO").default,null,f?null:e(a).createElement(l,{contentId:this.props.contentId,cloudId:this.props.cloudId,title:this.props.title,userOffline:this.props.userOffline,onTitleGenerated:this._setTitleAI,onTitleGeneratingChange:this.props.onTitleGeneratingChange,isEditorEmpty:this.props.isEditorEmpty??!1}),e(a).createElement(n("5izcQ").default,{name:n("kycWk").REDACTIONS_TOUR_TARGETS.TITLE_REDACTION},e(a).createElement(n("i0AJ7").EditorTitleContainer,null,e(a).createElement(E,{name:"editpages-title","data-test-id":"editor-title",...d,maxLength:255,"aria-label":c,"aria-describedby":"editor-title-description",placeholder:c,className:n("1k6sE").ALLOW_SHORTCUTS_CLASS,value:r||"",required:!0,rows:1,ref:this._textareaRef,onKeyDown:this._onKeyDown,onChange:this._onTitleChange,onFocus:this._onFocus,onBlur:this._onBlur,"data-gramm":!1,disabled:t,shouldAnimate:this.state.shouldAnimateTitle,isTitleAIGenerated:this.state.isTitleAIGenerated,isTitleCenterAligned:i,key:this.state.shouldAnimateTitle?"editor-title-animated":"editor-title"}),e(a).createElement("div",{hidden:!0},e(a).createElement(n("6F6hl").default,{id:"editor-title-description",testId:"editor-title-description"},s)))),e(a).createElement(n("2Fndw").default,null,this.props.activeRedactionsSpotlight??null))}constructor(t){super(t),this._textareaRef=void 0,this._hasEditEventFiredRef=void 0,this._undoRedoManager=void 0,this.state={title:this.props.title,prevTitle:this.props.title,shouldFocusTitle:this.props.initialShouldFocusTitle??!0,focusChanged:!1,shouldAnimateTitle:!1,isTitleAIGenerated:!1,isTitleGenerating:!1},this._isManualTitleChange=!1,this._hasTitleError=e(r)(()=>{let{flagArray:e,intl:t}=this.props,i=[(0,n("cHfGW").buildEditorFlagMessage)({errorData:{[n("1mHQU").ALLOWED_FLAG_MESSAGES.INVALID_PAGE_TITLE]:!0},formatMessage:t.formatMessage})?.title,(0,n("cHfGW").buildEditorFlagMessage)({errorData:{[n("1mHQU").ALLOWED_FLAG_MESSAGES.DUPLICATE_TITLE]:!0},formatMessage:t.formatMessage})?.title,(0,n("cHfGW").buildEditorFlagMessage)({errorData:{[n("1mHQU").ALLOWED_FLAG_MESSAGES.TITLE_REQUIRED]:!0},formatMessage:t.formatMessage})?.title,(0,n("cHfGW").buildEditorFlagMessage)({errorData:{[n("1mHQU").ALLOWED_FLAG_MESSAGES.AI_GENERATED_TITLE]:!0},formatMessage:t.formatMessage})?.title,(0,n("cHfGW").buildEditorFlagMessage)({errorData:{[n("1mHQU").ALLOWED_FLAG_MESSAGES.DUPLICATE_TITLE_WITHIN_EDITOR]:!0},formatMessage:t.formatMessage})?.title];if(e&&e.length>0){let t=String(e[0].title);return i.includes(t)}return!1}),this._debouncedOnChange=e(o)(e=>{this.props.onChange(e)},n("1ggpj").onChangeTitleDebounceTime),this._onTitleChange=e=>{let{createAnalyticsEvent:t,contentId:i,spaceId:a}=this.props,o=e.target.value;this._isManualTitleChange=!0,this.setState({title:o,isTitleAIGenerated:!1}),this.props.debounceOnChange?this._debouncedOnChange(o):this.props.onChange(o),(0,n("9wGTI").fg)("platform_editor_ai_aifc_patch_ga_blockers")&&this._undoRedoManager.clear(),this._hasEditEventFiredRef.current||(t?.({type:"sendTrackEvent",data:{source:"editorTitle",action:"edited",actionSubject:"editor",objectId:i,objectType:"page",attributes:{isLivePage:!1,editorSessionId:this.props.editorSessionId},containerType:"space",containerId:a}}).fire(),this._hasEditEventFiredRef.current=!0)},this._onFocusChanged=e=>{this.setState({shouldFocusTitle:e,focusChanged:!0}),this.props.onFocusChanged(e)},this._setTitleAI=e=>{this.setState({isTitleGenerating:!1,title:e,isTitleAIGenerated:!0}),this.props.onChange(e)},this._undoAIGeneratedTitle=()=>{let{title:e}=this.state,t=e||"",n=this._undoRedoManager.undo(t);t!==n&&(this.setState({title:n,isTitleAIGenerated:!1,prevTitle:e}),this.props.onChange(n))},this._redoAIGeneratedTitle=()=>{let{title:e}=this.state,t=e||"",n=this._undoRedoManager.redo(t);t!==n&&(this.setState({title:n,isTitleAIGenerated:!1,prevTitle:e}),this.props.onChange(n))},this.generateTitle=()=>{let{trackAIResultError:e,trackAIResultView:t,trackAIInteractionInit:i,setGeneratedTitle:a,setTrackAIResultViewStored:o,experienceTracker:r,userOffline:s,flags:l,intl:d}=this.props;if(s)return;let u=Array.from(document.querySelectorAll(".ProseMirror")).filter(e=>!e.closest('[data-testid="chromeless-editor"]')),p=u[0]?.dataset?.editorId,g=({errorMessage:t,errorCode:i=500})=>{this._setTitleAI(""),e({aiErrorMessage:t,aiErrorCode:i}),"Cannot send metadata, currently offline."===t?r.abort({name:n("irVI7").AI_TITLE_GENERATION,reason:"Editor offline"}):r.fail({name:n("irVI7").AI_TITLE_GENERATION,error:Error(t)}),this.setState({isTitleGenerating:!1});let a=(0,n("cHfGW").buildEditorFlagMessage)({errorData:{[n("1mHQU").ALLOWED_FLAG_MESSAGES.AI_GENERATED_TITLE_ERROR]:!0},formatMessage:d.formatMessage});l.hideFlag("ai-generated-title-flag"),l.showErrorFlag({id:"ai-generated-title-error-flag",title:a?.title,description:a?.description,actions:[{content:d.formatMessage(c.aiGeneratedTitleDismissButton),onClick:()=>l.hideFlag("ai-generated-title-error-flag")}]})},m="";p&&(i(),o?.(t),r.start({name:n("irVI7").AI_TITLE_GENERATION}),n("jOIil").eventHub.publishToEditor({event:"start prompt",data:{targetEditorId:p,analyticSourceId:"confluenceTitleGenOnPublish",prompt:"suggest title",hideModal:!0,streamingCallback:e=>{switch(e.type){case"initialising":this.setState({isTitleGenerating:!0});break;case"streaming":(m=e.result?.trim()??"")&&this._setTitleAI(m);break;case"complete":(m=e.result?.trim()??"")?(this._setTitleAI(m),t({doesNotMeetMAUCriteria:!0}),r.succeed({name:n("irVI7").AI_TITLE_GENERATION}),a?.(m)):g({errorMessage:"Generated title is empty"});break;case"error":g({errorMessage:e.errorInfo?.errorContent,errorCode:e.errorInfo?.statusCode})}}}}))},this.generateDescription=()=>{let{intl:{formatMessage:e},contentType:t,isTemplateEditor:n,isUnpublishedDraft:i}=this.props;return e(i?n?c.createPageTemplateTitleDescription:"blogpost"===t?c.createBlogpostTitleDescription:c.createPageTitleDescription:n?c.editPageTemplateTitleDescription:c.editPageTitleDescription)},this._onTitleError=()=>{let{createAnalyticsEvent:e,flagArray:t,intl:i,contentId:a,spaceId:o,isAIEnabledForContent:r}=this.props,s=String(t?.[0]?.title),l=(0,n("cHfGW").buildEditorFlagMessage)({errorData:{[n("1mHQU").ALLOWED_FLAG_MESSAGES.TITLE_REQUIRED]:!0},formatMessage:i.formatMessage})?.title,c=(0,n("cHfGW").buildEditorFlagMessage)({errorData:{[n("1mHQU").ALLOWED_FLAG_MESSAGES.AI_GENERATED_TITLE]:!0},formatMessage:i.formatMessage})?.title;t&&(s===l||s===c)&&e?.({type:"sendTrackEvent",data:{source:"editorTitle",action:"publishAttemptedEmptyTitle",actionSubject:"editor",objectId:a,objectType:"page",attributes:{isLivePage:!1,isAiTitleEnabled:String(t?.[0]?.title)===(0,n("cHfGW").buildEditorFlagMessage)({errorData:{[n("1mHQU").ALLOWED_FLAG_MESSAGES.AI_GENERATED_TITLE]:!0},formatMessage:i.formatMessage})?.title},containerType:"space",containerId:o}}).fire(),t&&String(t?.[0]?.title)===(0,n("cHfGW").buildEditorFlagMessage)({errorData:{[n("1mHQU").ALLOWED_FLAG_MESSAGES.AI_GENERATED_TITLE]:!0},formatMessage:i.formatMessage})?.title&&r&&(0,n("6mKj3").expValEquals)("confluence_ai_title_generation","cohort","test")?(this._focusTextarea(),this.generateTitle()):(this._focusTextarea(),this.setState({shouldAnimateTitle:!0}),setTimeout(()=>{this.setState({shouldAnimateTitle:!1}),this._focusTextarea()},1200))},this._getTitlePlaceholder=()=>{let{contentType:e,intl:t,customPlaceholder:n}=this.props;return n||("blogpost"===e?t.formatMessage(c.blogpostTitlePlaceholder):t.formatMessage(c.editorOnboardingExpTitlePlaceholderText))},this._onFocus=()=>{this._onFocusChanged(!0)},this._onBlur=()=>{this.props.onTitleBlur(this.state.title??void 0),this._onFocusChanged(!1)},this._onWindowResize=e(o)(()=>{this._updateHeightAuto()},200),this._onKeyDown=e=>{if(e.nativeEvent.isComposing)return;if((0,n("9wGTI").fg)("platform_editor_ai_aifc_patch_ga_blockers")){let t=(0,n("4tOXV").isMac)()?e.metaKey:e.ctrlKey,i="z"===e.key&&t&&!e.shiftKey,a="z"===e.key&&t&&e.shiftKey;if(i&&this._undoRedoManager.canUndo()){e.preventDefault(),e.stopPropagation(),this._undoAIGeneratedTitle();return}if(a&&this._undoRedoManager.canRedo()){e.preventDefault(),e.stopPropagation(),this._redoAIGeneratedTitle();return}}let t=e.key===n("aK0Eq").KeyboardEventKeys.TAB.key&&!e.shiftKey,i=(0,n("4tOXV").isMac)()?e.metaKey:e.ctrlKey,a=e.key===n("aK0Eq").KeyboardEventKeys.ENTER.key&&!i,o=e.key===n("aK0Eq").KeyboardEventKeys.DOWN.key;if(t||a||o)if(e.preventDefault(),e.stopPropagation(),this.props.isTemplatesSuggestionsEnabled&&this.props.templateButtonRef?.current)this.props.templateSuggestionsRef?.current?.focus();else{let{editorApi:e}=this.props;a&&e?.core?.actions.execute(e?.pageTitleUtils?.commands?.insertNewLineAtDocStart()),(t||o)&&e?.core?.actions.execute(e?.pageTitleUtils?.commands?.selectDocStart()),this.props.focusEditor()}},this._textareaRef=(0,a.createRef)(),this._hasEditEventFiredRef={current:!1},this._undoRedoManager=new(0,n("2SWmG").UndoRedoManager)}}let h=t=>i=>{let{contentId:o,title:r}=i;(0,n("2MwVI").useTrackTitleRedactionRendered)({contentId:o,title:r});let{activeSpotlight:s}=(0,n("iuuqT").useRedactionsTour)({contentId:o,step:n("kycWk").RedactionsTourSteps.FIRST,firstStepSource:n("iuuqT").RedactionTourStepSource.titleRedaction});return e(a).createElement(t,{...i,activeRedactionsSpotlight:s})};h.displayName="RedactionsChangeboarding";let E=t=>i=>{let o=(0,a.useContext)(n("1kHsc").ExperienceTrackerContext);return e(a).createElement(t,{...i,experienceTracker:o})};E.displayName="ExperienceTracking";let T=(0,n("7aRa9").withFlags)((0,n("7mpOv").withIsAIEnabledForContent)((0,n("gmMgo").default)(E(h(function(t){let i=function(i){let{trackAIInteractionInit:o,trackAIResultError:r,trackAIResultView:s}=(0,n("fYQcF").useAIEventsInstrumentation)();return e(a).createElement(t,{...i,trackAIInteractionInit:o,trackAIResultError:r,trackAIResultView:s})};return i.displayName="WithAIAnalytics",i}((0,n("1DWH0").default)()(f)))))));T.displayName="EditorTitle",t.exports.MAX_LENGTH_OF_TITLE=255,t.exports.AI_SUGGEST_TITLE_PROPS=d,t.exports.fieldSizingEnabled=m,t.exports.EditorTitle=T}),i("8m9SI",function(t,i){var a=n("42omo");let o=(0,a.forwardRef)(({as:t="textarea",style:i,...o},r)=>{let{shouldAnimate:s,isTitleCenterAligned:l,isDisabledTextBlack:c,...d}=o;return e(a).createElement(t,{...d,style:i,ref:r,className:(0,n("gMc0m").default)(["_11c81c04 _19itglyw _1reo15vq _18m915vq _ca0qidpf _u5f3idpf _n3tdidpf _19bvidpf _19pk1wug _2hwx1wug _otyr1wug _18u01wug _j7hqs4gh _1pgl1ytf _bfhk1kw7 _k48pi7a9 _4t3i1wug _1e0c1ule _1bto1l2s _14zgglyw _o5721jtm _vchhusvi _19pkidpf _1bsb1osq _12tii7uo _cun91j28 _1goxglyw _13xeglyw _h9ziglyw _1idr1rpy _1wfakb7n _nt751r31 _49pcglyw _1hvw1o36",o.shouldAnimate?"_5sag9cwz":"_5sag5cps",o.isTitleCenterAligned?"_y3gn1h6o":"_y3gn18uv",o.isDisabledTextBlack?"_vbqbi7uo":"_vbqb1gmx",o.isTitleCenterAligned?"_sdir1h6o":"_sdir18uv",o.className])})});o.displayName="EditorTitleTextArea";let r=(0,a.forwardRef)(({as:t=o,style:i,...r},s)=>e(a).createElement(t,{...r,style:i,ref:s,className:(0,n("gMc0m").default)(["_1e0t1edp",r.className])}));r.displayName="EditorTitleTextAreaNext";let s=(0,a.forwardRef)(({isTitleAIGenerated:t=!1,...i},s)=>(0,n("fTmNK").fieldSizingEnabled)()?e(a).createElement(r,{...i,ref:s,className:(0,n("gMc0m").default)([t&&"",t&&"_j7hq1bgo _5sag12me _7hjf1v3l"])}):e(a).createElement(o,{...i,ref:s,className:(0,n("gMc0m").default)([t&&"",t&&"_j7hq1bgo _5sag12me _7hjf1v3l"])}));s.displayName="AIGeneratedEditorTitleTextArea",t.exports.EditorTitleTextArea=o,t.exports.EditorTitleTextAreaNext=r,t.exports.AIGeneratedEditorTitleTextArea=s}),i("i0AJ7",function(t,i){var a=n("42omo");let o=(0,n("ecnYn").xcss)({display:"inline-flex",flexDirection:"column",gap:"space.075",width:"100%",marginBottom:"initial",marginTop:"space.025"}),r=({children:t})=>e(a).createElement(n("6f0Oj").default,{testId:"editor-title-container","data-test-id":"editor-title-container",id:"editor-title-id",xcss:[o]},t);r.displayName="EditorTitleContainer",t.exports.EditorTitleContainer=r}),i("idaAv",function(e,t){e.exports.isFieldSizingSupported=()=>CSS.supports("field-sizing","content")}),i("ise6Y",function(e,t){var i=n("42omo");let a=({contentAri:e,documentContext:t,locale:n,skip:i})=>[{ai_feature_input:{feature:"suggest_title",feature_args:{user_input:"",document_context:t,supportedMarkdownNodes:["PARAGRAPH","HEADING","BULLET_LISTS"]},content_ari:e||void 0,locale:n}},{apiPath:"v2/ai-feature/editor-ai/stream",delayChunkUpdate:{gap:10,time:20},enableFollowUp:!1,enablePartialJson:!1,skip:i,headers:{"x-experience-id":"editor","x-product":"confluence"}}];e.exports.useTitleGenerationStreaming=({contentId:e,cloudId:t,documentContext:o,locale:r,skip:s,onTitleChange:l})=>{let c=(0,i.useContext)(n("1kHsc").ExperienceTrackerContext),{trackAIResultView:d,trackAIResultError:u}=(0,n("fYQcF").useAIEventsInstrumentation)(),{pageAri:p}=(0,n("3j1mV").useConfluencePageAri)(t,e,"page"),g=(0,i.useRef)(s);g.current=s;let[m,f]=(0,i.useMemo)(()=>a({contentAri:p||"",documentContext:o,locale:r,skip:g.current}),[p,o,r]),h=(0,i.useCallback)(e=>{switch(e.responseState){case n("kAaxz").ConvoAIResponseState.AnswerPart:break;case n("kAaxz").ConvoAIResponseState.FinalResponse:l?.(e.content),d({attributes:{aiFeatureName:"aiTitleGenOnPaste",doesNotMeetMAUCriteria:!0}}),c?.succeed({name:n("irVI7").AI_TITLE_GENERATION});break;case n("kAaxz").ConvoAIResponseState.Error:let t=e.error?.message?.content||"Title generation failed";t.includes("missing valid content")||(u({aiErrorMessage:t},{attributes:{aiFeatureName:"aiTitleGenOnPaste"}}),c?.fail({name:n("irVI7").AI_TITLE_GENERATION,error:Error(t)}))}},[l,c,d,u]),[{content:E,responseState:T,error:_}]=(0,n("d3UlG").useConvoAIStreaming)(m,f,h);return{content:E,responseState:T,error:_}}}),i("2SWmG",function(e,t){e.exports.UndoRedoManager=class{trimStack(e){for(;e.length>this.maxStackSize;)e.shift()}addToUndoStack(e){let t=this.undoStack[this.undoStack.length-1];t&&t===e||(this.undoStack.push(e),this.trimStack(this.undoStack))}undo(e){if(0===this.undoStack.length)return e;for(;this.undoStack.length>0&&this.undoStack[this.undoStack.length-1]===e;)this.undoStack.pop();if(0===this.undoStack.length)return e;let t=this.undoStack.pop();return t!==e&&(this.redoStack.push(e),this.trimStack(this.redoStack)),t}redo(e){if(this.redoStack.length>0){let t=this.redoStack.pop();return t!==e&&(this.undoStack.push(e),this.trimStack(this.undoStack)),t}return e}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}clear(){this.undoStack=[],this.redoStack=[]}constructor(e=50){this.undoStack=[],this.redoStack=[],this.maxStackSize=void 0,this.maxStackSize=e}}}),i("5epXp",function(t,i){var a=n("42omo"),o=n("T1bCI"),r=n("iu6m9"),s=n("b3j2Y"),l=n("ktUCG"),c=n("8rneB");let d=e=>e.replace(/[^\w\-/.:%?=]+/g,"");async function u({title:e,locale:t}){return(0,n("f7B1p").cfetch)("/gateway/api/assist/chat/v1/invoke_agent",{method:"POST",headers:{"content-type":"application/json;charset=UTF-8","x-experience-id":"editor","x-product":"confluence"},body:JSON.stringify({recipient_agent_named_id:"editor_intent_agent",agent_input_context:{content_url:d(document.location.href),writing_intent:"unsplash_header_image.json",draft_full_content:e,draft_selected_content:void 0,supported_markdown_nodes:["PARAGRAPH","BULLET_LISTS","NUMBERED_LISTS","HEADING","BLOCKQUOTES","CODEBLOCKS","HORIZONTAL_RULE","TABLE","IMAGES","TASK_LIST","LINK","ITALICS","BOLD","STRIKETHROUGH","CODE_SPAN"],input_mime_type:"text/markdown",output_mime_type:"text/markdown",locale:t,product:"CONFLUENCE"}})}).then(e=>e.json()).then(e=>e.message.content)}var p=n("8z0fF");let g=(0,n("ecnYn").xcss)({display:"flex",flexDirection:"column",width:"100%"}),m=(0,n("ecnYn").xcss)({gap:"space.0"}),f=(0,n("ecnYn").xcss)({gap:"space.300"}),h=(0,n("ecnYn").xcss)({position:"relative",width:"100%"}),E=(0,n("ecnYn").xcss)({display:"flex"}),T=(0,n("ecnYn").xcss)({flexDirection:"column"}),_=(0,n("ecnYn").xcss)({flexDirection:"initial"}),I=(0,n("ecnYn").xcss)({gap:"space.300"}),b=(0,n("ecnYn").xcss)({marginTop:"-90px"}),S=(0,n("ecnYn").xcss)({marginTop:"initial"}),A=(0,n("ecnYn").xcss)({marginBottom:"initial"}),C=(0,n("ecnYn").xcss)({alignItems:"center"}),y=(0,n("ecnYn").xcss)({alignItems:"initial"}),v=(0,n("ecnYn").xcss)({alignSelf:"normal"}),x=(0,n("ecnYn").xcss)({marginTop:"space.negative.300"}),w=(0,n("ecnYn").xcss)({visibility:"hidden"}),k=(0,n("ecnYn").xcss)({height:"88px"}),R=(0,n("ecnYn").xcss)({marginTop:"space.0"}),j=(0,a.forwardRef)(({as:t="div",style:i,...o},r)=>{let{isTitleCenterAligned:s,hasCoverPicture:l,hasEmoji:c,isSpaceOverview:d,...u}=o;return e(a).createElement(t,{...u,style:i,ref:r,className:(0,n("gMc0m").default)(["",o.isTitleCenterAligned||o.hasCoverPicture?"_1e0c1txw":"_1e0c18uv",o.isTitleCenterAligned?"_1bah1h6o":"_1bah4jg8",o.isTitleCenterAligned?"_4cvr1h6o":"_4cvr4jg8",o.isTitleCenterAligned||o.hasCoverPicture?"_2lx21bp4":"_2lx2vrvc",o.hasCoverPicture?"_1bsb1ns9":"_1bsb1wug",o.hasCoverPicture&&(o.hasEmoji||o.isSpaceOverview)?"_19pk1uiu":"_19pkidpf",o.className])})});j.displayName="EmojiTitleSelectionWrapper";let M=(0,n("ecnYn").xcss)({width:"100%"}),P=(0,n("ecnYn").xcss)({width:`${n("75Ax4").COVER_IMAGE_FIXED_WIDTH}px`,margin:"0 auto",paddingLeft:"space.250"}),D=({contentId:t,isTitleDisabled:i,linkCreation:o,editorTitle:r,isTemplateEditor:s,onUpdateStartEmoji:l,onUpdateEndEmoji:c,isTitleCenterAligned:d,hasCoverPicture:u,hasEmoji:D,isRemovingEmoji:O,contentTopperComponent:L,isReadOnly:F,coverPictureWidth:U,isPageContentFullWidth:G,isTitleAlignmentLoading:H,isSpaceOverview:B,pageTitleContent:N,autoPageEmojiCohort:W,isUnpublishedDraft:V,isEditorEmpty:Y,emojiTitleDiscovered:K,contentType:q})=>{let z=(0,n("3jwuS").useIsCurrentPageLive)()||!B&&(0,n("9wGTI").fg)("cc_page_experiences_new_editor_byline"),$=d||u,Q=U===n("jVylI").COVERPICTUREWIDTH.FIXED,X=u?b:S,J=[h,E,d||u?T:_,d&&D&&!u?I:void 0,A,u&&d?C:y,X],Z=[g,u?f:m];return e(a).createElement(n("6f0Oj").default,{xcss:Z},!$&&!z&&L,e(a).createElement(n("6f0Oj").default,{xcss:J,testId:d?"title-wrapper-centered":"title-wrapper"},!s&&(!O||u)&&e(a).createElement(n("6f0Oj").default,{xcss:[u&&k,O&&u&&w,R,u&&Q&&G&&!d&&P]},H?null:e(a).createElement(j,{"data-testid":d?"emoji-title-selection-wrapper-centered":"emoji-title-selection-wrapper",isTitleCenterAligned:d,hasCoverPicture:u,hasEmoji:D,isSpaceOverview:B},e(a).createElement(p.EmojiTitleSelection,{contentId:t,onUpdateStartEmoji:l,onUpdateEndEmoji:c,isTitleDisabled:i,isTitleCenterAligned:d,hasCoverPicture:!!u,linkCreation:o,isReadOnly:F,hasInitialEmoji:D,pageTitleContent:N,autoPageEmojiCohort:W,isUnpublishedDraft:V,isEditorEmpty:Y,emojiTitleDiscovered:K,contentType:q}))),$&&!z&&L&&e(a).createElement(n("6f0Oj").default,{xcss:[v,(u||D&&!O)&&!B&&x]},L),e(a).createElement(n("6f0Oj").default,{xcss:[M]},r)))};D.displayName="TitleSection";var O=n("5RPbY");let L=(0,n("jmjWc").LoadableAfterPaint)({__loadable_id__:"K14-x",name:"EditorContentModeButton",loader:async()=>{let{EditorContentModeButton:e}=await n("3rsLC");return e}});var F=n("l998X");n("42omo");let U=()=>(0,F.jsx)("div",{"data-testid":"animated-loading-gradient",className:(0,n("gMc0m").default)(["_1reo15vq _18m915vq _4t3i1osq _1bsb1osq"]),children:(0,F.jsx)("div",{className:(0,n("gMc0m").default)(["_11q71s2s _y44v1sha _4t3i1osq _1bsb1osq _1lrwon4i _kdam1iql"])})}),G=(0,n("jmjWc").LoadableAfterPaint)({__loadable_id__:"SUzCl",name:"EditorPageCoverPictureEntry",loader:async()=>{let{EditorPageCoverPictureEntry:e}=await n("3Y0iy");return e}}),H=(0,n("ecnYn").xcss)({width:"100%",marginBottom:"space.100"}),B=(0,n("ecnYn").xcss)({width:"unset",marginBottom:"unset"}),N=(0,n("ecnYn").xcss)({marginRight:"space.0",display:"flex",justifyContent:"center"}),W=(0,n("ecnYn").xcss)({opacity:0}),V=(0,n("ecnYn").xcss)({opacity:1}),Y=(0,n("ecnYn").xcss)({display:"flex",justifyContent:"center",alignItems:"center",background:"color.background.accent.gray.subtlest",borderRadius:"radius.small",position:"relative"}),K=({contentId:t,contentType:i,isPublishingContent:o,userOffline:r,hasCoverPicture:s,isUploadingPicture:l,isUnpublishedDraft:c,floatingToolbarButtonStyle:d,isFixedWidthImageOption:u,updateHeight:p,currentHeight:g,isReadOnly:m,spaceKey:f,aiSuggestedUnsplashImages:h,isAIUnsplashImage:E,isUnsplash:T,dynamicCoverImageHeight:_,width:I,coverImageWidth:b,aiHeaderImageStatus:S,aiHeaderImageFileId:A,generateAIHeaderImage:C,setAIHeaderImageStatus:y})=>{(0,a.useEffect)(()=>{p&&g&&_&&Math.abs(g-_)>4&&p(_)},[p,g,_]);let v=[];l||s?v.push(H):v.push(B),v.push(N),l?v.push(W):v.push(V);let x="LOADING"===S||"LOADING_WITH_ACCEPTANCE_FLOW"===S,w={width:I&&!u?`${I}px`:"100%",height:`${_}px`,position:u?"relative":"absolute",left:"0px"};return e(a).createElement(e(a).Fragment,null,l&&e(a).createElement(n("6f0Oj").default,{xcss:Y,testId:"uploading-picture-wrapper",style:w},e(a).createElement(()=>x&&(0,n("6mKj3").isExperimentEnabled)("confluence_aifc_header_image_generation_experiment")?e(a).createElement(U,null):E?null:e(a).createElement(n("9hlns").default,{size:"medium",testId:"CoverPictureAndButton-Spinner"}),null)),e(a).createElement(n("6f0Oj").default,{xcss:v,testId:"cover-picture-and-button-wrapper"},e(a).createElement(G,{contentId:t,isPublishingContent:o,contentType:i,userOffline:r,isUnpublishedDraft:c,floatingToolbarButtonStyle:d,isFixedWidthImageOption:u,width:b,dynamicCoverImageHeight:_,isReadOnly:m,spaceKey:f,hasCoverPicture:s,aiSuggestedUnsplashImages:h,isUnsplash:T,aiHeaderImageStatus:S,aiHeaderImageFileId:A,generateAIHeaderImage:C,setAIHeaderImageStatus:y})))},q=(0,n("jmjWc").LoadableAfterPaint)({__loadable_id__:"rGXr0",name:"EmojiTitleButtonLoader",loader:async()=>(await n("jzspB")).EmojiTitleButton}),z=({contentId:t,userOffline:i,isTitleDisabled:o,isUnpublishedDraft:r,setSelectedEmoji:s,onEmojiPickerLoaded:l,onUpdateStartEmoji:c,onUpdateEndEmoji:d,floatingToolbarButtonStyle:u,contentType:p,autoPageEmojiCohort:g,emojiTitleDiscovered:m})=>{let{createAnalyticsEvent:f}=(0,n("inPa6").useAnalyticsEvents)(),h=(0,a.useCallback)(()=>{f({type:"sendUIEvent",data:{action:"hovered",source:"EmojiTitleSection",actionSubject:"pageTitle",actionSubjectId:"emojiButton",attributes:{element:"div"}}}).fire()},[f]),E=(0,a.useCallback)(()=>{f({type:"sendUIEvent",data:{action:"not:hovered",source:"EmojiTitleSection",actionSubject:"pageTitle",actionSubjectId:"emojiButton",attributes:{element:"div"}}}).fire()},[f]);return e(a).createElement(n("6f0Oj").default,{testId:"emoji-title-hover-button-wrapper",onMouseEnter:h,onMouseLeave:E},e(a).createElement(q,{isUnpublishedDraft:r,setSelectedEmoji:s,onEmojiPickerLoaded:l,disableEmoji:i,contentId:t,isTitleDisabled:o,onUpdateStartEmoji:c,onUpdateEndEmoji:d,floatingToolbarButtonStyle:u,contentType:p,autoPageEmojiCohort:g,emojiTitleDiscovered:m}))};var $=n("jkVM2");let Q=(0,a.memo)(({contentId:t,hasContentState:i,contentType:o,userOffline:r,setIsContentStateButtonFocused:s,setIsContentStateMenuOpen:l,floatingToolbarButtonStyle:c})=>{let{createAnalyticsEvent:d}=(0,n("inPa6").useAnalyticsEvents)(),[u]=(0,n("ep3mz").usePageSpaceKey)(),{isKnowledgeBaseSpace:p}=(0,n("38qvz").useSpaceType)({spaceKey:u}),g=(0,a.useCallback)(()=>{d({type:"sendUIEvent",data:{action:"clicked",actionSubject:"button",objectId:t,actionSubjectId:"editorContentStateButtonClicked",source:"editorContentStateButton"}}).fire()},[t,d]),m=(0,a.useCallback)(()=>{d({type:"sendUIEvent",data:{action:"hovered",actionSubject:"button",objectId:t,actionSubjectId:"editorContentStateButtonHovered",source:"editorContentStateButton"}}).fire()},[t,d]),f=(0,a.useCallback)(()=>{s(!0)},[s]),h=(0,a.useCallback)(()=>{s(!1)},[s]);return i||p?null:e(a).createElement(n("6f0Oj").default,{testId:"content-state-button-wrapper",onClick:g,onMouseEnter:m,onFocus:f,onBlur:h},e(a).createElement($.EditorContentState,{contentId:t,contentType:o,userOffline:r,onContentStateMenuToggle:l,floatingToolbarButtonStyle:c}))}),X=(0,n("cgtv4").defineMessages)({suggestTitleLabel:{id:"title-area-content-components.toolbar-above-title.suggest-title-button.label",defaultMessage:"Suggest title"},suggestTitleTooltipWhenDocEmpty:{id:"title-area-content-components.toolbar-above-title.suggest-title-button.empty-document.tooltip",defaultMessage:"Page cannot be empty"},suggestTitleTooltipWhenLiveDocEmpty:{id:"title-area-content-components.toolbar-above-title.suggest-title-button.empty-live-document.tooltip",defaultMessage:"Doc cannot be empty"}}),J=()=>{let e=(0,a.useRef)(null);return{toolbarButtonRef:e,getTargetEditorId:()=>{let t=Array.from(e.current?.closest(".ak-editor-content-area")?.querySelectorAll(".ProseMirror")??[]).filter(e=>!e.closest("[data-editor-popup]"));return t[0]?.dataset.editorId}}},Z=({floatingToolbarButtonStyle:t,isEditorEmpty:i,userOffline:o})=>{let r=(0,n("8C5kA").default)(),{toolbarButtonRef:s,getTargetEditorId:l}=J(),c=(0,n("3jwuS").useIsCurrentPageLive)(),d=e(a).createElement(n("eEA8O").default,{ref:s,isDisabled:!!o||!!i,appearance:"subtle",style:{...t},onClick:()=>{let e=l();e&&n("jOIil").eventHub.publishToEditor({event:"start prompt",data:{targetEditorId:e,adjustSelection:"fullDocument",analyticSourceId:"confluenceTitleToolbar",prompt:"suggest title in confluence title toolbar"}})},iconBefore:e(a).createElement(n("lAFHW").RovoIcon,{label:"",size:"xxsmall",appearance:"neutral"})},r.formatMessage(X.suggestTitleLabel));return i?e(a).createElement(n("3gadb").default,{content:c&&(0,n("9wGTI").fg)("confluence_live_pages_open_beta_trait_opted_in")?r.formatMessage(X.suggestTitleTooltipWhenLiveDocEmpty):r.formatMessage(X.suggestTitleTooltipWhenDocEmpty),position:"top-start"},d):d},ee={light:"#0065FF",dark:"#0065FF80"},et={light:"#0469FF",dark:"#0469FF80"},en={light:"#BF63F3",dark:"#BF63F380"},ei={light:"#FFA900",dark:"#FFA90080"},ea=(0,n("ecnYn").xcss)({color:"var(--ds-text-subtlest, #6B6E76)",padding:"0 0 0 4px"}),eo=(0,n("ecnYn").xcss)({display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",backgroundColor:"var(--ds-surface, #FFFFFF)",borderRadius:"var(--ds-radius-small, 3px)"}),er=(0,n("cgtv4").defineMessages)({suggestingAHeaderImage:{id:"ai-suggested-image-header.suggestingAHeaderImage",defaultMessage:"Looking for a matching header image"}}),es=({isUploadingPicture:t,isAIUnsplashImage:i,isFixedWidthImageOption:o})=>{let{colorMode:r}=(0,n("cOrQJ").default)(),{width:s}=(0,n("bUiJC").useEditorWidthObserver)({}),l=o?n("75Ax4").COVER_IMAGE_FIXED_WIDTH:s,c=o?n("75Ax4").COVER_IMAGE_FIXED_HEIGHT:(0,n("3WPGR").getDynamicCoverImageHeight)(l),{formatMessage:d}=(0,n("8C5kA").default)(),u={height:`${c-24}px`},p=(0,n("ecnYn").xcss)({background:`conic-gradient(
			from var(--panel-gradient-angle, 270deg),
				${ee[r??"light"]} 0%,
				${et[r??"light"]} 20%,
				${en[r??"light"]} 50%,
				${ei[r??"light"]} 56%,
				${ee[r??"light"]} 100%
			)`,borderRadius:"calc(var(--ds-radius-small, 3px) + var(--ds-border-width, 1px))",padding:"var(--ds-border-width, 1px)",position:"absolute",width:"calc(100% - 48px)",left:"24px",top:"24px"});return e(a).createElement(e(a).Fragment,null,t&&i&&e(a).createElement(e(a).Fragment,null,e(a).createElement(n("6f0Oj").default,{xcss:p,style:u},e(a).createElement(n("6f0Oj").default,{xcss:eo,testId:"ai-suggested-image-header-modal-container"},e(a).createElement(n("d7r2R").default,{alt:"test"}),e(a).createElement(n("6f0Oj").default,{xcss:ea},d(er.suggestingAHeaderImage))))))},el=(0,n("ecnYn").xcss)({paddingRight:"space.075",paddingLeft:"space.075"}),ec=(0,a.forwardRef)(({as:t="div",style:i,...o},r)=>{let{isSelected:s,...l}=o;return e(a).createElement(t,{...l,style:i,ref:r,className:(0,n("gMc0m").default)(["_2rkofajl _4t3izwfg _1bsbzwfg _zs12lb4i _fb25u2gc _3mngglyw",o.isSelected?"_19itfyzg":"_19itglyw",o.className])})}),ed=(0,n("cgtv4").defineMessages)({leftAlignmentIconLabel:{id:"title-area-content-components.toolbar-above-title.left-alignment-icon.label",defaultMessage:"Align Left"},centerAlignmentIconLabel:{id:"title-area-content-components.toolbar-above-title.center-alignment-icon.label",defaultMessage:"Align Center"},dropdownMenuLeftAlignedIconLabel:{id:"title-area-content-components.toolbar-above-title.dropdown-menu-left-aligned-icon.label",defaultMessage:"Left Aligned"},dropdownMenuCenterAlignedIconLabel:{id:"title-area-content-components.toolbar-above-title.dropdown-menu-center-aligned-icon.label",defaultMessage:"Center Aligned"},dropdownMenuAlignmentMenuLabel:{id:"title-area-content-components.toolbar-above-title.dropdown-menu-alignment-icon.label",defaultMessage:"Select for alignment options"},headerAlignmentTooltip:{id:"title-area-content-components.toolbar-above-title.header-alignment-tooltip",defaultMessage:"Header alignment"},leftAlignHeadingTooltip:{id:"title-area-content-components.toolbar-above-title.left-align-heading-tooltip",defaultMessage:"Left align header"},centerAlignHeadingTooltip:{id:"title-area-content-components.toolbar-above-title.center-align-heading-tooltip",defaultMessage:"Center align header"}}),eu=({alignmentButtonContainer:t,userOffline:i,createAnalyticsEvent:o,flags:r,contentType:s,alignmentButtonState:l,coverPictureState:c,contentId:d,setIsAlignmentDropdownOpen:u,isAlignmentDropdownOpen:p})=>{let g=(0,n("8C5kA").default)(),m=l?.toggleAlignmentButton,f=c?.toggleCoverPictureWidthButton,{updatePageTitleProperty:h,isUpdatingAlignment:E}=(0,n("aV3a0").useTitleContentPropertiesForEditor)({contentId:d,updateAlignmentState:m,updateCoverPictureWidthState:f,contentType:s,flags:r}),T=(0,a.useCallback)(e=>{let t=e.charAt(0).toUpperCase()+e.slice(1);o({type:"sendUIEvent",data:{action:"clicked",source:`${e}AlignmentButton`,actionSubject:"button",actionSubjectId:`pageTitle${t}AlignButton`}}).fire()},[o]),_=async e=>{t.state.alignmentButtonState===e||E||(t.setIsUpdatingAlignment(!0),t.toggleAlignmentButton(e),await h(JSON.stringify({titleLayoutAlignment:e})),t.setIsUpdatingAlignment(!1))};return e(a).createElement("div",{className:(0,n("gMc0m").default)(["_1bsb12am"])},e(a).createElement(n("52EPl").default,{trigger:({triggerRef:o,...r})=>e(a).createElement(n("3gadb").default,{content:g.formatMessage(ed.headerAlignmentTooltip),position:"bottom"},e(a).createElement(n("eEA8O").default,{...r,iconBefore:e(a).createElement(n("dcJ7R").default,{space:"space.075"},t.state.alignmentButtonState===n("jVylI").TitleAlignmentType.LEFT?e(a).createElement(e(n("6bJyJ")),{label:g.formatMessage(ed.dropdownMenuLeftAlignedIconLabel)}):e(a).createElement(e(n("kiZiu")),{label:g.formatMessage(ed.dropdownMenuCenterAlignedIconLabel)}),e(a).createElement(e(n("ghftu")),{label:"",size:"small"})),ref:o,label:g.formatMessage(ed.dropdownMenuAlignmentMenuLabel),testId:`${t.state.alignmentButtonState===n("jVylI").TitleAlignmentType.LEFT?"left":"center"}-alignment-dropdown-menu`,appearance:"subtle",shouldFitContainer:!0,isDisabled:i})),spacing:"compact",onOpenChange:()=>u(!p)},e(a).createElement(n("ahaN7").default,null,e(a).createElement(n("bUlM5").default,{direction:"row",columnGap:"space.025",xcss:el},e(a).createElement(ec,{isSelected:t.state.alignmentButtonState===n("jVylI").TitleAlignmentType.LEFT},e(a).createElement(n("3gadb").default,{content:g.formatMessage(ed.leftAlignHeadingTooltip)},e(a).createElement(n("dAYOx").default,{onClick:()=>{T(n("jVylI").TitleAlignmentType.LEFT.toLowerCase()),_(n("jVylI").TitleAlignmentType.LEFT)},isDisabled:i||t.state.isUpdatingAlignment,isSelected:t.state.alignmentButtonState===n("jVylI").TitleAlignmentType.LEFT},e(a).createElement(e(n("6bJyJ")),{label:g.formatMessage(ed.leftAlignmentIconLabel),testId:"left-alignment-button"})))),e(a).createElement(ec,{isSelected:t.state.alignmentButtonState===n("jVylI").TitleAlignmentType.CENTER},e(a).createElement(n("3gadb").default,{content:g.formatMessage(ed.centerAlignHeadingTooltip)},e(a).createElement(n("dAYOx").default,{onClick:()=>{T(n("jVylI").TitleAlignmentType.CENTER.toLowerCase()),_(n("jVylI").TitleAlignmentType.CENTER)},isDisabled:i||t.state.isUpdatingAlignment,isSelected:t.state.alignmentButtonState===n("jVylI").TitleAlignmentType.CENTER},e(a).createElement(e(n("kiZiu")),{label:g.formatMessage(ed.centerAlignmentIconLabel),testId:"center-alignment-button"}))))))))},ep=(0,n("cgtv4").defineMessages)({dictationLabel:{id:"title-area-content-components.toolbar-above-title.dictation-button.label",defaultMessage:"Dictation"},voiceTypingText:{id:"title-area-content-components.toolbar-above-title.dictation-button.text",defaultMessage:"Voice Typing"}}),eg=()=>{if("undefined"==typeof window)return!1;let e="SpeechRecognition"in window,t="webkitSpeechRecognition"in window;try{if(t){let e=window.webkitSpeechRecognition;if(e)return new e,!0}else if(e){let e=window.SpeechRecognition;if(e)return new e,!0}}catch(e){}return!1},em=({userOffline:t})=>{let i=(0,n("8C5kA").default)(),{createAnalyticsEvent:o}=(0,n("inPa6").useAnalyticsEvents)(),[r,s]=(0,a.useState)(!1),[l,c]=(0,a.useState)(!1),[d,u]=(0,a.useState)(""),p=(0,a.useRef)(null),g=(0,a.useRef)(!1),m=(0,a.useRef)(null),f=(0,a.useRef)(0),h=(0,a.useRef)(""),E=(0,a.useId)(),T=(0,a.useRef)(`dictation-floating-button${E}`);(0,a.useEffect)(()=>{g.current=!0;let e=eg();if(c(e),e||u("Speech recognition not supported in this browser"),"undefined"!=typeof document){let e=document.createElement("div");e.setAttribute("id",T.current),e.setAttribute("data-testid","dictation-floating-button"),e.setAttribute("role","button"),e.setAttribute("aria-label","Stop voice typing"),e.setAttribute("tabindex","0"),document.body.appendChild(e),m.current=e}return()=>{g.current=!1,m.current&&document.body.contains(m.current)&&document.body.removeChild(m.current)}},[]);let _=(0,a.useCallback)(()=>{if(p.current)try{p.current.stop()}catch(e){}finally{p.current=null,s(!1),m.current&&(m.current.style.display="none"),f.current>0&&(o({type:"sendOperationalEvent",data:{action:"completed",actionSubject:"dictationSession",actionSubjectId:"voiceTyping",attributes:{sessionDurationSeconds:Math.round((Date.now()-f.current)/1e3)}}}).fire(),f.current=0)}},[o]),I=(0,a.useCallback)(e=>{try{let t=window.getSelection();if(!t||!t.rangeCount)return;let n=t.getRangeAt(0);n.deleteContents();let i=document.createTextNode(e);n.insertNode(i);try{i.parentNode&&(n.selectNode(i),n.collapse(!1),t.removeAllRanges(),t.addRange(n))}catch(e){}}catch(e){}},[]),b=(0,a.useCallback)(()=>{if("undefined"==typeof window){u("Not in a browser environment"),s(!1);return}if(!eg()){u("Speech recognition not supported in this browser"),s(!1);return}try{f.current=Date.now();let e=window.webkitSpeechRecognition||window.SpeechRecognition;if(!e){u("Speech Recognition API not found"),s(!1);return}let t=new e;t.continuous=!0,t.interimResults=!1,t.lang="en-US",h.current="",t.onresult=e=>{if(!g.current)return;let t=e.results.length-1;if(t<0)return;let n=e.results[t];if(!n.isFinal)return;let i=n[0].transcript.trim(),a=h.current.trim();if(i.startsWith(a)){let e=i.slice(a.length).trim();e&&(h.current=i,I(`${e} `))}else i!==a&&(h.current=i,I(`${i} `))},t.onerror=e=>{if(g.current)if("network"===e.error)u("Network error. Please check your connection and try again."),r&&setTimeout(()=>{if(g.current&&r)try{t.start()}catch(e){s(!1),u("Failed to restart after network error")}},2e3);else{let t=`Recognition error: ${e.error||"unknown error"}`;u(t),s(!1),("not-allowed"===e.error||"permission-denied"===e.error)&&u("Microphone access denied. Please allow microphone access in your browser settings.")}},t.onend=()=>{if(g.current&&r){let e=0,n=()=>{try{t.start()}catch(t){++e<3?setTimeout(()=>{g.current&&r&&n()},Math.min(100*Math.pow(2,e),2e3)):(s(!1),u("Connection issue. Please try again."))}};n()}},t.start(),m.current&&(m.current.style.display="flex"),p.current=t}catch(e){e instanceof Error?u(`Failed to start dictation: ${e.message}`):u("Failed to start dictation: unknown error"),s(!1)}},[r,I]);(0,a.useEffect)(()=>{if(!m.current)return;let e=m.current;if(r){Object.assign(e.style,{position:"fixed",bottom:"20px",right:"20px",width:"48px",height:"48px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.2)",zIndex:"1001",background:"var(--ds-background-danger-bold, #C9372C)",color:"var(--ds-text-inverse, #FFFFFF)",cursor:"pointer"}),e.innerHTML=`
				<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
					<path d="M12 15C14.21 15 16 13.21 16 11V5C16 2.79 14.21 1 12 1C9.79 1 8 2.79 8 5V11C8 13.21 9.79 15 12 15Z" fill="white"/>
					<path d="M19 11H17.3C17.3 14.07 14.76 16.61 11.69 16.61L11.69 16.61C8.61 16.61 6.07 14.07 6.07 11H4.38C4.38 14.62 7 17.6 10.5 18.24V21H13.5V18.24C17 17.6 19 14.62 19 11Z" fill="white"/>
				</svg>
			`,e.setAttribute("title","Click to stop dictation"),e.onclick=_;let t=e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),_())};return e.addEventListener("keydown",t),()=>{e.removeEventListener("keydown",t)}}e.style.display="none"},[r,_]);let S=(0,a.useCallback)(()=>{u("");let e=!r;o({type:"sendUIEvent",data:{action:e?"started":"stopped",source:"dictationButton",actionSubject:"pageTitle",actionSubjectId:"dictationButton"}}).fire(),e?(s(!0),setTimeout(()=>{b()},0)):_()},[o,r,b,_]);return(0,a.useEffect)(()=>()=>{if(p.current)try{p.current.stop()}catch(e){}},[]),e(a).createElement("div",{"data-testid":"dictation-button-container"},e(a).createElement(n("3gadb").default,{content:d||(l?r?"Stop Voice Typing":"Start Voice Typing":"Speech recognition not supported in this browser"),position:"bottom"},e(a).createElement(n("ccHMk").default,{appearance:"subtle",onClick:S,isDisabled:t,testId:"dictation-button"},e(a).createElement(e(n("bAxHS")),{label:i.formatMessage(ep.dictationLabel)})," ",e(a).createElement(n("5dK2X").default,{as:"span"},i.formatMessage(ep.voiceTypingText)))))},ef=(0,n("ecnYn").xcss)({width:"100%",display:"flex",flexDirection:"column",marginBottom:"space.050"}),eh=(0,n("ecnYn").xcss)({alignItems:"start"}),eE=(0,n("ecnYn").xcss)({alignItems:"center",marginBottom:"space.050"}),eT=(0,n("ecnYn").xcss)({marginBottom:"space.200"}),e_=(0,n("ecnYn").xcss)({overflowX:"hidden"}),eI=(0,n("ecnYn").xcss)({width:"100%",marginBottom:"space.0"}),eb=(0,n("ecnYn").xcss)({height:`${n("75Ax4").COVER_IMAGE_FIXED_HEIGHT}px`}),eS=(0,n("ecnYn").xcss)({height:`${n("75Ax4").CALCULATE_SCALED_COVER_IMAGE_HEIGHT_FOR_EDIT_PAGE}`}),eA=(0,n("ecnYn").xcss)({marginTop:"-22px"}),eC=(0,n("ecnYn").xcss)({marginRight:"space.025"}),ey=(0,n("ecnYn").xcss)({marginLeft:"space.0"}),ev=(0,n("ecnYn").xcss)({marginLeft:"space.negative.075"}),ex=(0,n("ecnYn").xcss)({display:"flex",columnGap:"space.0",marginRight:"space.025"}),ew=(0,n("ecnYn").xcss)({marginLeft:"space.negative.075"}),ek=(0,n("ecnYn").xcss)({marginLeft:"space.0"}),eR=(0,a.forwardRef)(({as:t="div",style:i,...o},r)=>{let{hasCoverPicture:s,isUploadingPicture:l,isTitleCenterAligned:c,shouldShowToolbar:d,isReadOnly:u,hasEmoji:p,...g}=o;return e(a).createElement(t,{...g,style:i,ref:r,className:(0,n("gMc0m").default)(["_11q7vuon _2rkofajl _v564134x _kqswh2mm _4t3i1ns9 _1bsb1ns9 _19bvidpf _1pby1kze _1e0c1txw _gy1p1b66 _1fvdglyw _1df215vq",(o.hasCoverPicture||o.isUploadingPicture)&&o.isTitleCenterAligned?"_1wpz1h6o":"_1wpz1wug",(0,n("9wGTI").fg)("live_pages_content_jump_mitigation")?"_1yt4v77o":"_1yt41b66",o.shouldShowToolbar?"_tzy4kb7n":"_tzy48dtj",o.isReadOnly?"_3um015vq":"_3um0ewfl",o.hasCoverPicture&&(o.hasEmoji?"_19pkoahv":"_19pk1ejb"),o.className])})}),ej={height:"32px",alignItems:"center"},eM=(0,a.memo)(({contentId:t,userOffline:i,isUnpublishedDraft:r,isTitleDisabled:s,isCoverPictureModalOpen:l,hasCoverPicture:c,isUploadingPicture:d,isAddHeaderImageButtonFocused:u,setSelectedEmoji:p,onEmojiPickerLoaded:g,onUpdateStartEmoji:m,onUpdateEndEmoji:f,isEmojiButtonFocused:h,hasEmoji:E,contentType:T,isPublishingContent:_,hasContentState:I,isSpaceOverview:b,contentStateState:S,isTitleCenterAligned:A,alignmentButtonState:C,coverPictureState:y,isSecondEmojiPickerOpen:v,flags:x,isReadOnly:w,isEditorEmpty:k,coverPictureWidth:R,spaceKey:j,contentComponentsDisabled:M,isStatusDisconnected:P,isAIUnsplashImage:D,aiSuggestedUnsplashImages:F,coverImageWidthCached:U,isUnsplash:G,hideSuggestedTitle:H=!1,hideContentState:B=!1,hideEditorAppearanceButton:N=!1,hideAlignmentButton:W=!1,hideContentModeButton:V=!1,aiHeaderImageStatus:Y,aiHeaderImageFileId:q,generateAIHeaderImage:$,setAIHeaderImageStatus:X,autoPageEmojiCohort:J,emojiTitleDiscovered:ee})=>{let{createAnalyticsEvent:et}=(0,n("inPa6").useAnalyticsEvents)(),{isAIEnabledForContent:en}=(0,n("7mpOv").useIsAIEnabledForContent)({contentId:t}),ei=(0,n("3jwuS").useIsCurrentPageLive)(),ea=ei&&(0,n("eToX6").isInPreviewPanel)(),eo=()=>ea?"toolbar-above-title-wrapper-hidden":A?"toolbar-above-title-wrapper-centered":"toolbar-above-title-wrapper",er=(0,n("e4o8D").useRenderServerPlaceholder)(!0),el=U&&er?U===n("jVylI").COVERPICTUREWIDTH.FIXED:R===n("jVylI").COVERPICTUREWIDTH.FIXED,[ec,ed]=(0,a.useState)(!1),[ep,eg]=(0,a.useState)(!1),[eM,eP]=(0,a.useState)(!1),[eD,eO]=(0,a.useState)(u||h||ec),eL=v||eD||ep||l||eM,[eF,eU]=(0,a.useState)(eL);(0,a.useEffect)(()=>{i||eU(eL)},[i,eL]);let eG=!w&&(i?eF:eL);(0,a.useEffect)(()=>()=>{S.resetToDefaults(),y.resetToDefaults(),C?.resetToDefaults()},[S,y,C]);let eH=e(a).createElement(O.EditorAppearanceButtonNext,{contentId:t,disabled:!!M,isStatusDisconnected:!!P}),{width:eB}=(0,n("bUiJC").useEditorWidthObserver)({isFixedWidth:el}),eN=el?n("75Ax4").COVER_IMAGE_FIXED_WIDTH:eB,eW=el?n("75Ax4").COVER_IMAGE_FIXED_HEIGHT:(0,n("3WPGR").getDynamicCoverImageHeight)(eN),[eV,eY]=(0,a.useState)(eW),eK=e(a).createElement(es,{isUploadingPicture:d,isAIUnsplashImage:D,isFixedWidthImageOption:el}),eq=e(a).createElement(K,{contentId:t,contentType:T,isPublishingContent:_,userOffline:i,hasCoverPicture:c,isUploadingPicture:d,hasContentState:I,isUnpublishedDraft:r,floatingToolbarButtonStyle:ej,isFixedWidthImageOption:el,updateHeight:eY,currentHeight:eV,isReadOnly:w,spaceKey:j,aiSuggestedUnsplashImages:F,isAIUnsplashImage:D,isUnsplash:G,dynamicCoverImageHeight:eW,width:eB,coverImageWidth:eN,aiHeaderImageStatus:Y,aiHeaderImageFileId:q,generateAIHeaderImage:$,setAIHeaderImageStatus:X}),ez=(0,a.useCallback)((e,t)=>{let{contentStateUpdated:i}=t||{};try{let e=JSON.parse(i?.value);S.setContentState(e?.contentState)}catch(e){(0,n("5ZqQS").getMonitoringClient)().submitError(e,{attribution:n("3IBnw").Attribution.PAGE_EXPERIENCES}),(0,n("7Sm4c").markErrorAsHandled)(e)}},[S]),e$=(0,a.useCallback)(()=>{S.setContentState(null)},[S]);(0,n("i9VoI").useSubscriptionEvent)({subscriberId:"ToolbarAboveTitleContentStateUpdated",delta:"contentStateUpdated",contentId:t,contentType:T||"page",onDataReceived:ez}),(0,n("i9VoI").useSubscriptionEvent)({subscriberId:"TitleAreaContentComponentsContentStateDeleted",delta:"contentStateDeleted",contentId:t,contentType:T||"page",onDataReceived:e$});let eQ=!N&&(b||ei||(0,n("9wGTI").fg)("cc_page_experiences_new_editor_byline"));return e(a).createElement(o.Subscribe,{to:[n("gektR").AlignmentButtonContainer]},o=>e(a).createElement(n("6f0Oj").default,{xcss:[ef,A?eE:eh,eT,ea&&e_],testId:eo()},e(a).createElement(n("6f0Oj").default,null,eK),c||d||F?.[0]?e(a).createElement(n("6f0Oj").default,{xcss:[eA,(d||c)&&eI,(d||c)&&el&&eb,(d||c)&&!el&&eS],testId:"cover-pic-and-button-wrapper","data-id":"cover-pic-and-button-wrapper"},eq):null,e(a).createElement(eR,{isUploadingPicture:d,hasCoverPicture:c,isTitleCenterAligned:A,shouldShowToolbar:eG,hasEmoji:E,isReadOnly:w,"data-testid":"toolbar-buttons-wrapper"},!W&&e(a).createElement(eu,{alignmentButtonContainer:o,userOffline:i,createAnalyticsEvent:et,flags:x,contentType:T,alignmentButtonState:C,coverPictureState:y,contentId:t,setIsAlignmentDropdownOpen:eP,isAlignmentDropdownOpen:eM}),e(a).createElement(z,{contentId:t,userOffline:i,isUnpublishedDraft:r,isTitleDisabled:s,setSelectedEmoji:p,onEmojiPickerLoaded:g,onUpdateStartEmoji:m,onUpdateEndEmoji:f,floatingToolbarButtonStyle:ej,contentType:T,autoPageEmojiCohort:J,emojiTitleDiscovered:ee}),!B&&!I&&!b&&e(a).createElement(Q,{contentId:t,hasContentState:I,contentType:T,userOffline:i,setIsContentStateButtonFocused:ed,setIsContentStateMenuOpen:eg,floatingToolbarButtonStyle:ej}),c||d?null:e(a).createElement("div",{"data-testid":"cover-pic-and-button-wrapper"},eq),!H&&en&&e(a).createElement(Z,{isEditorEmpty:k,floatingToolbarButtonStyle:ej,userOffline:i}),!V&&((0,n("9wGTI").fg)("platform_editor_content_mode_button_mvp")||(0,n("6mKj3").expValEquals)("confluence_compact_text_format","isEnabled",!0))&&e(a).createElement(n("6f0Oj").default,{testId:"title-toolbar-right-controls-group",xcss:[ex,ei?ek:ew]},e(a).createElement(L,{contentId:t,isStatusDisconnected:P}),eQ&&e(a).createElement(n("6f0Oj").default,{testId:"editor-appearance-button-wrapper"},eH)),!(0,n("9wGTI").fg)("platform_editor_content_mode_button_mvp")&&!(0,n("6mKj3").expValEquals)("confluence_compact_text_format","isEnabled",!0)&&eQ&&e(a).createElement(n("6f0Oj").default,{xcss:[eC,ei&&ey,!ei&&ev],testId:"editor-appearance-button-wrapper"},eH),(0,n("6mKj3").expValEquals)("confluence-dictation-button-on-pages","isEnabled",!0)&&e(a).createElement(em,{userOffline:i}))))});eM.displayName="ToolbarAboveTitle";let eP={root:"_1bsb1osq _1e0c1txw _2lx21bp4 _4cvr1y6m _1u7yidpf _mow6t94y",paddingTopSpace300:"_ca0q1ejb",paddingTopSpace0:"_ca0qze3t",topSpacing:"_19pkukr8 _ca0qpxbi",paddingBottomSpace300:"_n3td1ejb",newEditorTitleHoverTopPadding:"_ca0qv47k"},eD=(0,n("ecnYn").xcss)({alignSelf:"center"}),eO=(0,n("ecnYn").xcss)({width:"100%",marginTop:"space.negative.200",marginBottom:"space.400"}),eL=(0,n("ecnYn").xcss)({marginBottom:"space.300"}),eF=({viewMode:e,isContentTopperComponentPresent:t,isNewEditorBylineLayout:i,hasCoverPicture:o,children:r})=>{let s=(0,n("luv00").useSSRPlaceholderReplaceIdProp)();return a.createElement("div",{"data-testid":"editor-title-with-buttons-div",...s,className:(0,n("gMc0m").default)([eP.root,e?(0,n("dh538").fg)("live_pages_content_jump_mitigation")?eP.paddingTopSpace0:eP.paddingTopSpace300:eP.paddingTopSpace0,t&&eP.topSpacing,t&&i&&eP.paddingBottomSpace300,t&&!o&&eP.newEditorTitleHoverTopPadding])},r)};eF.displayName="EditorTitleWithButtonsWrapper";let eU=({contentId:e,isPublishingContent:t,contentType:i,userOffline:d,isTitleDisabled:p,linkCreation:g,isUnpublishedDraft:m,children:f,isTemplateEditor:h=!1,isTitleCenterAligned:E,viewMode:T,contentTopperComponent:_,contentClassificationMetadata:I,hasClassification:b,spaceKey:S,isEditorEmpty:A,isTitleAlignmentLoading:C,contentComponentsDisabled:y,isStatusDisconnected:v,coverPictureState:x,titleAfterBlur:w,isLivePage:k,coverImageWidthCached:R,hideSuggestedTitle:j=!1,hideContentState:M=!1,hideEditorAppearanceButton:P=!1,hideContentModeButton:O=!1,hideAlignmentButton:L=!1,pageTitleContent:F,aiHeaderImageStatus:U,aiHeaderImageFileId:G,generateAIHeaderImage:H,setAIHeaderImageStatus:B,autoPageEmojiCohort:N,emojiTitleDiscovered:W})=>{let{contentAppearance:V}=(0,n("2HGN8").useContentAppearance)(),Y="full-width"===V.appearance,K=(0,n("5amrO").useEmojiStatusFieldName)(),{locale:q}=(0,n("8C5kA").default)(),z=(0,a.useRef)(),$=(0,n("bMPhU").useSpaceHomepageId)(S)===e,{hideTitleToolbar:Q}=(0,n("cxu5H").useEmbeddedViewPageFeatures)(),X=(0,n("5vi32").useIsEmbeddedConfluence_DO_NOT_USE)(),{data:J}=(0,n("xQxzY").useQuery)(n("gr7Mm").CoverPictureQuery,{fetchPolicy:window.__SSR_RENDERED__?"cache-first":"cache-and-network",context:{single:!0},variables:{contentId:e,status:["current","draft"],draftShareId:(0,n("7PLO8").getDraftShareIdFromQueryParam)()}}),{data:Z,error:ee}=(0,n("xQxzY").useQuery)(n("87Z8O").getEmojiTitleProperty,{variables:{contentId:e,status:["current","draft"],skipPublishedFragment:!1,draftShareId:(0,n("7PLO8").getDraftShareIdFromQueryParam)()}}),et=k&&(0,c.getHasLiveDocsDefaultEmoji)(Z),en=!!(Z&&((0,c.getHasEmoji)(Z,K)||et)),ei=(J?.content?.nodes?.[0]?.properties?.nodes||[]).find(e=>e?.key===n("bKd7w").CoverPictureIdPropertyKey.DRAFT),ea=(0,n("3WPGR").propertyToId)(ei),eo=!!ea?.value?.id,er=ea?.value?.id.includes("images.unsplash.com"),es=(0,a.useCallback)(async()=>{if(!0!==(0,r.editorExperiment)("platform_editor_ai_unsplash_page_header",!0)||!m&&!k||"false"===n("17wUi").confluenceLocalStorageInstance.getItem(n("1UApO").keys.AI_UNSPLASH_HEADER_ACCEPTED)||!w||x.state.hasCoverPicture||x.state.isUploadingPicture||z.current===w)return;x.setIsUploadingPicture(!0),x.setIsAIUnsplashImage(!0);let e=await u({title:w,locale:q}),t=await (0,n("gTAwR").getUnsplashPhotos)(e,0,!0);t?.length>0&&x.setAISuggestedUnsplashImages(t),z.current=w},[w,q,x,m,k]);(0,a.useEffect)(()=>{es()},[w,es]),(0,a.useEffect)(()=>{x.setHasCoverPicture(eo)},[eo,x]);let el=!h&&(!X||!Q),ec=k||!$&&(0,n("9wGTI").fg)("cc_page_experiences_new_editor_byline");return a.createElement(a.Fragment,null,ee?a.createElement(s.ErrorDisplay,{error:ee}):null,a.createElement(o.Subscribe,{to:[l.EmojiTitleStateContainer,n("bJX6u").ContentStateStateContainer,n("gektR").AlignmentButtonContainer,n("gqqjz").FlagsStateContainer]},(o,r,s,l)=>a.createElement(n("bUlM5").default,{direction:"column",xcss:[eO,ec&&eL]},a.createElement(eF,{viewMode:!!T,isContentTopperComponentPresent:!!_,isNewEditorBylineLayout:ec,hasCoverPicture:eo},el?a.createElement(eM,{contentId:e,userOffline:d,isUnpublishedDraft:m,isTitleDisabled:p,isAddHeaderImageButtonFocused:x.state.isAddHeaderImageButtonFocused,isCoverPictureModalOpen:x.state.isModalOpen,hasCoverPicture:eo,isUploadingPicture:x.state.isUploadingPicture,setSelectedEmoji:o.setSelectedEmoji,onEmojiPickerLoaded:o.onEmojiPickerLoaded,isEmojiButtonFocused:o.state.isEmojiButtonFocused,onUpdateStartEmoji:o.onUpdateStart,onUpdateEndEmoji:o.onUpdateEnd,contentType:i,isPublishingContent:t,contentStateState:r,hasContentState:!!r.state.contentState,isSpaceOverview:$,isTitleCenterAligned:E,alignmentButtonState:s,coverPictureState:x,coverPictureWidth:x.state.coverPictureWidth,isSecondEmojiPickerOpen:o.state.openSecondEmojiPicker,flags:l,contentClassificationMetadata:I,hasClassification:b,isReadOnly:T,spaceKey:S,isEditorEmpty:A,contentComponentsDisabled:y,isStatusDisconnected:v,isAIUnsplashImage:x.state.isAIUnsplashImage,aiSuggestedUnsplashImages:x.state.aiSuggestedUnsplashImages,hasEmoji:en,coverImageWidthCached:R,isUnsplash:er,hideSuggestedTitle:j,hideContentState:M,hideEditorAppearanceButton:P,hideContentModeButton:O,hideAlignmentButton:L,aiHeaderImageStatus:U,aiHeaderImageFileId:G,generateAIHeaderImage:H,setAIHeaderImageStatus:B,autoPageEmojiCohort:N,emojiTitleDiscovered:W}):null,a.createElement(D,{editorTitle:f,contentTopperComponent:_,contentId:e,isTemplateEditor:h,onUpdateStartEmoji:o.onUpdateStart,onUpdateEndEmoji:o.onUpdateEnd,isTitleDisabled:p,isTitleCenterAligned:E,linkCreation:g,hasCoverPicture:eo,hasEmoji:en,coverPictureWidth:x.state.coverPictureWidth,isRemovingEmoji:o.state.isRemovingEmoji,isReadOnly:T,contentClassificationMetadata:I,isPageContentFullWidth:Y,hasClassification:b,isTitleAlignmentLoading:C,isSpaceOverview:$,pageTitleContent:F,autoPageEmojiCohort:N,isUnpublishedDraft:m,isEditorEmpty:A,emojiTitleDiscovered:W,contentType:i})),ec&&_?a.createElement(n("6f0Oj").default,{testId:"content-topper-wrapper",xcss:[E&&eD]},_):null)))};eU.displayName="EditorTitleWithTitleAreaComponents",t.exports.EditorTitleWithTitleAreaComponents=eU}),i("gTAwR",function(e,t){async function i(e,t,i){return(0,n("f7B1p").cfetch)(`/wiki/rest/internals/1.0/unsplash/search?query=${e}&pageNumber=${t}`,{method:"GET",headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>(e.results??[]).map(e=>({artistName:e.user.name,artistUrl:e.user.links.html+n("75Ax4").REFERRAL_LINK,fullSizeImageUrl:i?e.urls.full:e.urls.regular,smallSizeImageUrl:e.urls.thumb,description:e.description,downloadLink:e.links.download_location})))}e.exports.getUnsplashPhotos=i}),i("3rsLC",function(e,t){e.exports=n("4mJKd")(5)("cC68k").then(()=>n("iI06X"))}),i("4mJKd",function(e,t){e.exports=e=>t=>import(n("8tirZ").shardUrl(n("02nRr").resolve(t),e))}),i("8tirZ",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.applyShardToDomain=r,e.exports.domainShardingKey=void 0,e.exports.getDomainShardIndex=i,e.exports.shardUrl=function(e,t){return globalThis[n]?s(e,t):e},e.exports.shardUrlUnchecked=s;let n="__ATLASPACK_ENABLE_DOMAIN_SHARDS";function i(e,t){let n=t+1,i=e.split("").reduce((e,t)=>{let i=(e<<n)-e+t.charCodeAt(0);return i&i},0);return(i%=n)<0&&(i+=n),i}let a=/-\d+$/;function o(e){if(!a.test(e))return e;let t=e.lastIndexOf("-");return e.slice(0,t)}function r(e,t){let n=e.indexOf("."),i=0===t?"":`-${t-1}`;if(-1===n)return`${o(e)}${i}`;let a=o(e.slice(0,n));return`${a}${i}${e.slice(n)}`}function s(e,t){let n=new URL(e),a=i(function(e){let t=e.lastIndexOf("/");if(-1===t||t===e.length-1)throw Error("Expected an absolute URL with a file name, unable to apply sharding.");return e.slice(t+1)}(n.pathname),t);return n.hostname=r(n.hostname,a),n.toString()}e.exports.domainShardingKey=n}),i("02nRr",function(e,n){t(e.exports,"register",()=>i,e=>i=e),t(e.exports,"resolve",()=>a,e=>a=e);var i,a,o=new Map;i=function(e,t){for(var n=0;n<t.length-1;n+=2)o.set(t[n],{baseUrl:e,path:t[n+1]})},a=function(e){var t=o.get(e);if(null==t)throw Error("Could not resolve bundle with id "+e);return new URL(t.path,t.baseUrl).toString()}}),i("3Y0iy",function(e,t){e.exports=n("4mJKd")(5)("dVM1q").then(()=>n("5tKh7"))}),i("jzspB",function(e,t){let i=n("4mJKd")(5);e.exports=Promise.all([i("2bmVk"),i("6wr18"),i("ffEVr"),i("9Zd2C")]).then(()=>n("2FMo5"))});
//# sourceMappingURL=TitleAreaContentComponents.479d86a2.js.map
