function e(e){return e&&e.__esModule?e.default:e}function t(e,t,s,a){Object.defineProperty(e,t,{get:s,set:a,enumerable:!0,configurable:!0})}var s=globalThis.parcelRequired477,a=s.register;a("eqKgz",function(e,t){let a=new(0,s("h9yJL").JSONTransformer);e.exports.htmlToADF=e=>{let t=document.createElement("div");t.innerHTML=e;let r=s("5SAOw").DOMParser.fromSchema(s("iyDxB").defaultSchema).parse(t);return a.encode(r)}}),a("4aiCO",function(e,t){let a={NAV:"NAV",FLOATING:"FLOATING"},r={isWarningDialogOpen:!1,warningDialog:a.NAV},i=(0,s("1P1Tu").createStore)({initialState:r,actions:{showWarningDialog:e=>({setState:t})=>{t({isWarningDialogOpen:!0,warningDialog:e||a.NAV})},hideWarningDialog:()=>({setState:e})=>{e({isWarningDialogOpen:!1,warningDialog:a.NAV})}},name:"WarningDialogState"}),l=(0,s("FOT9i").createContainer)(i),n=(0,s("9zUhf").createActionsHook)(i),o=(0,s("9zUhf").createStateHook)(i,{selector:e=>e.isWarningDialogOpen}),u=(0,s("9zUhf").createStateHook)(i,{selector:e=>e.warningDialog});e.exports.WarningDialog=a,e.exports.IssueCreateWarningDialogContainer=l,e.exports.useWarningDialogStateActions=n,e.exports.useIsWarningDialogOpen=o,e.exports.useGetWarningDialog=u}),a("1mDVg",function(e,t){var a,r=((a={}).VIEW="view",a.EDIT="edit",a.LIVE_VIEW="live-view",a.LIVE_EDIT="live-edit",a);let i={contentId:"",contentType:"page",summary:"",descriptionAdf:(0,s("caRYB").doc)((0,s("2FFuS").paragraph)("")),highlightedText:(0,s("caRYB").doc)((0,s("2FFuS").paragraph)("")),selectedAdf:void 0,selectedTable:void 0,selectedActionItems:void 0,insertStorageFragmentRequestPayload:void 0,insertMultipleStorageFragmentsRequestPayload:void 0,insertStorageColumnTableRequestPayload:void 0,aiState:"idle",isCreatedWithAi:!1,firstAttempt:!0,totalRetries:0,aiAnalyticsContext:{aiResponseLength:0,pageContextLength:0,highlightedTextLength:0},currentSiteSelection:"",currentProjectSelection:void 0,aiIssueCreationEnablement:{isEnabled:!1},isCreateManuallyPressed:!1,isGicIframeReady:!1,pageMode:void 0,hasEditPermission:!1,isCreatedFromActionItems:!1,editorAPI:void 0},l=(0,s("1P1Tu").createStore)({initialState:{...i},actions:{setContentId:e=>({setState:t})=>{t({contentId:e})},setContentType:e=>({setState:t})=>{t({contentType:e})},setSummary:e=>({setState:t})=>{t({summary:e})},setDescriptionAdf:e=>({setState:t})=>{t({descriptionAdf:e})},setHighlightedText:e=>({setState:t})=>{t({highlightedText:e})},setSelectedAdf:e=>({setState:t})=>{t({selectedAdf:e})},setSelectedTable:e=>({setState:t})=>{t({selectedTable:e})},setSelectedActionItems:e=>({setState:t})=>{t({selectedActionItems:e})},setAiState:e=>({setState:t})=>{t({aiState:e})},setIsCreatedWithAi:e=>({setState:t})=>{t({isCreatedWithAi:e})},setIsCreatedFromActionItem:e=>({setState:t})=>{t({isCreatedFromActionItems:e})},setInsertStorageFragmentRequestPayload:e=>({setState:t})=>{t({insertStorageFragmentRequestPayload:e})},setInsertMultipleStorageFragmentsRequestPayload:e=>({setState:t})=>{t({insertMultipleStorageFragmentsRequestPayload:e})},setInsertStorageColumnTableRequestPayload:e=>({setState:t})=>{t({insertStorageColumnTableRequestPayload:e})},setAiAnalyticsContext:(e,t)=>({setState:s,getState:a})=>{s({aiAnalyticsContext:{...a().aiAnalyticsContext,[e]:t}})},setFirstAttempt:e=>({setState:t})=>{t({firstAttempt:e})},setTotalRetries:()=>({setState:e,getState:t})=>{e({totalRetries:t().totalRetries+1})},setCurrentSiteSelection:e=>({setState:t})=>{t({currentSiteSelection:e})},setCurrentProjectSelection:e=>({setState:t})=>{t({currentProjectSelection:e})},setAiIssueCreationEnablement:e=>({setState:t})=>{t({aiIssueCreationEnablement:e})},setIsCreateManuallyPressed:e=>({setState:t})=>{t({isCreateManuallyPressed:e})},setIsGicIframeReady:e=>({setState:t})=>{t({isGicIframeReady:e})},setPageMode:e=>({setState:t})=>{t({pageMode:e})},setHasEditPermission:e=>({setState:t})=>{t({hasEditPermission:e})},setEditorAPI:e=>({setState:t})=>{t({editorAPI:e})}},name:"issueCreateSidePanelContext"}),n=(0,s("FOT9i").createContainer)(l),o=(0,s("9zUhf").createHook)(l),u=(0,s("9zUhf").createActionsHook)(l),c=(0,s("9zUhf").createStateHook)(l,{selector:e=>e.aiIssueCreationEnablement});e.exports.PageMode=r,e.exports.IssueCreateSidePanelContainer=n,e.exports.useIssueCreateSidePanelContext=o,e.exports.useIssueCreateSidePanelActions=u,e.exports.useAiIssueCreationEnablementState=c}),a("98CLM",function(t,a){var r=s("42omo");let i=(0,s("ecnYn").xcss)({flexDirection:"row-reverse",width:"100%",justifyContent:"space-between"}),l=(0,s("ecnYn").xcss)({display:"flex",justifyContent:"flex-end",flex:1,gap:"space.050"});t.exports.IssueCreateWarningDialog=({onConfirm:t,onCancel:a,issuesCount:n=1})=>{let o=()=>{t()},u=()=>{a&&a()},c=()=>e(r).createElement(s("8o1lj").default,null,e(r).createElement(s("dcJ7R").default,{xcss:l},e(r).createElement(s("ccHMk").default,{testId:"issue-create-warning-cancel-button",onClick:u},e(r).createElement(s("gtD4K").default,s("3E5yu").messages.unsavedActionCancel)),e(r).createElement(s("ccHMk").default,{testId:"issue-create-warning-ok-button",appearance:"warning",onClick:o},e(r).createElement(s("gtD4K").default,s("3E5yu").messages.unsavedActionDiscard))));return e(r).createElement(s("gtD4K").default,{...(0,s("9wGTI").fg)("confluence-issue-terminology-refresh")?s("3E5yu").messages.unsavedHeadingIssueTermRefresh:s("3E5yu").messages.unsavedHeading,values:{issuesCount:n}},t=>e(r).createElement(s("8CZUH").default,{testId:"modal-dialog-issue-create-warning"},e(r).createElement(s("9ot3w").default,null,e(r).createElement(s("dcJ7R").default,{xcss:i},e(r).createElement(s("8TTLA").CloseButton,{onClick:u}),e(r).createElement(s("d8eRd").default,{appearance:"warning"},t))),e(r).createElement(s("1DHa6").default,null,e(r).createElement(s("gtD4K").default,{...(0,s("9wGTI").fg)("confluence-issue-terminology-refresh")?s("3E5yu").messages.unsavedContentIssueTermRefresh:s("3E5yu").messages.unsavedContent,values:{issuesCount:n}})),e(r).createElement(c,null)))}}),a("3E5yu",function(e,t){let a=(0,s("cgtv4").defineMessages)({sidePanelHeader:{id:"issue-create-side-panel.header",defaultMessage:"Create Jira issue"},sidePanelFooterSubmit:{id:"issue-create-side-panel.footer.submit",defaultMessage:"Submit"},sidePanelFooterCancel:{id:"issue-create-side-panel.footer.cancel",defaultMessage:"Cancel"},sidePanelIssueCreateInsertionFailed:{id:"issue-create-side-panel.insertion-failed",defaultMessage:"We were unable to insert a link for <link>{issueKey} {issueSummary}</link>"},sidePanelFooterDisclaimerText:{id:"issue-create-side-panel.footer.disclaimer-text",defaultMessage:"Content quality may vary"},sidePanelIssueCreateAiToggleLabel:{id:"issue-create-side-panel.ai-toggle-label",defaultMessage:"Use Rovo to generate summary and description"},sidePanelFooterRovoText:{id:"issue-create-side-panel.footer.ai-text",defaultMessage:"Powered by Rovo"},sidePanelAiLoading:{id:"issue-create-side-panel.body.ai-loading",defaultMessage:"Generating issue"},sidePanelAiLoadingBulk:{id:"issue-create-side-panel.bulk-body.ai-loading",defaultMessage:"Generating issues"},jiraSiteHeading:{id:"issue-create-side-panel.body.site.heading",defaultMessage:"Site:"},jiraProjectHeading:{id:"issue-create-side-panel.body.project.heading",defaultMessage:"Project:"},jiraProjectHeadingGalaxia:{id:"issue-create-side-panel.body.project.heading-galaxia",defaultMessage:"Space:"},bulkCreateConfigureButtonText:{id:"issue-create-side-panel.bulk-create.configure-button-text",defaultMessage:"Configure"},singleCreateAiErrorDescription:{id:"issue-create-side-panel.single-create-ai-error-description",defaultMessage:"Atlassian Intelligence can‘t provide a response right now. Try again or create your issue manually."},issueGenerationErrorDescription:{id:"issue-create-side-panel.bulk-create-issue-generation-error-description",defaultMessage:"Atlassian Intelligence can’t provide a response right now. Add more content and try again. Or highlight specific text to create manually."},ethicalViolationErrorDescription:{id:"issue-create-side-panel.ethical-violation-ai-error-description",defaultMessage:"Your selected content or other content on this page might not comply with our <link>Acceptable Use Policy</link>. You can always create an issue manually."},rateLimitErrorDescription:{id:"issue-create-side-panel.rate-limit-ai-error-description",defaultMessage:"We’ve received too many recent requests for Atlassian Intelligence (AI). Try again in a few minutes or <link>read about excessive use of AI</link>. You can always create an issue manually."},exceedingTokenLimitDescription:{id:"issue-create-side-panel.exceed-token-limit-description",defaultMessage:"Atlassian Intelligence can’t create issues for lengthy Confluence pages right now. You can always create an issue manually."},noAnswerSuggestedIssues:{id:"issue-create-side-panel.no-answer-suggested-issues-ai-error-description",defaultMessage:"We can’t understand the content to suggest an issue. Select different content or create an issue manually."},bulkCreateAiErrorDescription:{id:"issue-create-side-panel.bulk-create-ai-error-description",defaultMessage:"Atlassian Intelligence can’t provide a response right now. Try again or highlight specific text to create manually."},singleCreateAiErrorDescriptionRebrandToRovo:{id:"issue-create-side-panel.single-create-ai-error-description-rebrand-to-rovo",defaultMessage:"Rovo can’t provide a response right now. Try again or create your issue manually."},issueGenerationErrorDescriptionRebrandToRovo:{id:"issue-create-side-panel.bulk-create-issue-generation-error-description-rebrand-to-rovo",defaultMessage:"Rovo can’t provide a response right now. Add more content and try again. Or highlight specific text to create manually."},rateLimitErrorDescriptionRebrandToRovo:{id:"issue-create-side-panel.rate-limit-ai-error-description-rebrand-to-rovo",defaultMessage:"We’ve received too many recent requests for Rovo. Try again in a few minutes or <link>read about excessive use of Rovo</link>. You can always create an issue manually."},exceedingTokenLimitDescriptionRebrandToRovo:{id:"issue-create-side-panel.exceed-token-limit-description-rebrand-to-rovo",defaultMessage:"Rovo can’t create issues for lengthy Confluence pages right now. You can always create an issue manually."},bulkCreateAiErrorDescriptionRebrandToRovo:{id:"issue-create-side-panel.bulk-create-ai-error-description-rebrand-to-rovo",defaultMessage:"Rovo can’t provide a response right now. Try again or highlight specific text to create manually."},connectJiraProjectErrorDescription:{id:"issue-create-side-panel.bulk-create-connect-jira-project-error-description",defaultMessage:"We weren’t able to connect to your Jira project. Please try again."},connectJiraProjectErrorDescriptionGalaxia:{id:"issue-create-side-panel.bulk-create-connect-jira-project-error-description-galaxia",defaultMessage:"We weren’t able to connect to your Jira space. Please try again."},errorTryAgainButton:{id:"issue-create-side-panel.error.button.try-again",defaultMessage:"Try again"},errorCreateManuallyButton:{id:"issue-create-side-panel.error.button.create-manually",defaultMessage:"Create manually"},sidePanelSingleIssueCreateSuccessFlagTitle:{id:"issue-create-side-panel.sucess-flag-title",defaultMessage:"You’ve created <link>{issueKey} {issueSummary}</link> issue"},sidePanelMultipleIssueCreateSuccessFlagTitle:{id:"issue-create-side-panel.multiple.sucess-flag-title",defaultMessage:"You’ve created {issueCount} {issueCount, plural, one {issue} other {issues}}"},sidePanelSingleIssueInsertLinkFailureFlagTitle:{id:"issue-create-side-panel.insert-link-failure-flag.title",defaultMessage:"We couldn’t insert a link for <link>{issueKey} {issueSummary}</link>"},sidePanelMultipleIssuesInsertLinkFailureFlagTitle:{id:"issue-create-side-panel.multiple.insert-link-failure-flag.title",defaultMessage:"We couldn’t insert links for  {issueCount} {issueCount, plural, one {issue} other {issues}}"},documentModifiedSingleIssueInsertLinkFailureFlagTitle:{id:"issue-create-side-panel.page-modified-after-selection-single-insert-failure-flag.title",defaultMessage:"We couldn’t insert a link for <link>{issueKey} {issueSummary}</link> because page content was modified after the side panel was opened"},documentModifiedMultipleIssuesInsertLinkFailureFlagTitle:{id:"issue-create-side-panel.page-modified-after-selection-multiple-insert-failure-flag.title",defaultMessage:"We couldn’t insert links for {issueCount} {issueCount, plural, one {issue} other {issues}} because page content was modified after the side panel was opened"},sidePanelMultipleIssueCreateFlagViewIssue:{id:"issue-create-side-panel.multiple.flag-view-issue",defaultMessage:"View {issueCount, plural, one {issue} other {issues}} in Jira"},sidePanelMultipleIssueCreateFlagCopyLink:{id:"issue-create-side-panel.multiple.flag-copy-link",defaultMessage:"Copy link"},sidePanelMultipleIssueCreateFlagReloadToSeeLinks:{id:"issue-create-side-panel.multiple.flag-reload-to-see-links",defaultMessage:"Reload to see links appear"},sidePanelIssueCreateErrorMessage:{id:"issue-create-side-panel.bulk-create.error.message",defaultMessage:"We weren’t able to save your {issuesCount, plural, one {issue} other {issues}}. Please try again."},sidePanelIssueCreatePartialErrorMessage:{id:"issue-create-side-panel.bulk-create.partial.error.message",defaultMessage:"We couldn’t create some of your issues. Select the checkmark on the remaining issues to create them one at a time."},sidePanelBetaText:{id:"issue-create-side-panel.beta-text",defaultMessage:"Beta"},unsavedHeading:{id:"issue-create-side-panel.unsaved-issue.warning.dialog.heading",defaultMessage:"Discard {issuesCount, plural, =0 {issue} one {issue} other {issues}}?"},unsavedContent:{id:"issue-create-side-panel.unsaved-issue.warning.dialog.content",defaultMessage:"Your {issuesCount, plural, =0 {issue} one {issue} other {issues}} will be lost."},unsavedActionDiscard:{id:"issue-create-side-panel.unsaved-issue.warning.dialog.action.discard",defaultMessage:"Discard"},unsavedActionCancel:{id:"issue-create-side-panel.unsaved-issue.warning.dialog.action.cancel",defaultMessage:"Cancel"},bulkCreateHeaderText:{id:"issue-create-side-panel.bulk-create.header",defaultMessage:"Create Jira issues"},bulkCreateCreateAllFooterButton:{id:"issue-create-side-panel.bulk-create.footer-button.create-all",defaultMessage:"Create all"},bulkCreateCancelFooterButton:{id:"issue-create-side-panel.bulk-create.footer-button.cancel",defaultMessage:"Cancel"},bulkCreateEditHeaderText:{id:"issue-create-side-panel.bulk-create-edit.header",defaultMessage:"Edit issue"},bulkCreateConfigureBodyText:{id:"issue-create-side-panel.bulk-create.configure.body",defaultMessage:"Changing these settings might re-generate the issues list."},singleWorkCreateFormBodyText:{id:"issue-create-side-panel.single-work-create-form.body",defaultMessage:"Changing these settings might re-generate the issues list."},bulkConfigureHeaderText:{id:"issue-create-side-panel.bulk-configure.header",defaultMessage:"Configure"},bulkConfigureJiraErrorText:{id:"issue-create-side-panel.bulk-configure.jira-error",defaultMessage:"There are no available projects in this site."},bulkConfigureJiraErrorTextGalaxia:{id:"issue-create-side-panel.bulk-configure.jira-error-galaxia",defaultMessage:"There are no available spaces in this site."},singleWorkCreateFormJiraErrorText:{id:"issue-create-side-panel.single-work-create-form.jira-error",defaultMessage:"There are no available projects in this site."},singleWorkCreateFormJiraErrorTextGalaxia:{id:"issue-create-side-panel.single-work-create-form.jira-error-galaxia",defaultMessage:"There are no available spaces in this site."},bulkConfigureMissingTableCoulumnMappingErrorHeaderText:{id:"issue-create-side-panel.bulk-configure.missing-table-column-mapping-error-header",defaultMessage:"Missing table column mapping"},bulkConfigureMissingTableCoulumnMappingErrorText:{id:"issue-create-side-panel.bulk-configure.missing-table-column-mapping-error-text",defaultMessage:"Please update and save the mapping of your table columns to work item fields."},bulkConfigureFormSite:{id:"issue-create-side-panel.bulk-configure.form.site",defaultMessage:"Site"},singleWorkCreateFormSite:{id:"issue-create-side-panel.single-work-create-form.form.site",defaultMessage:"Site"},bulkConfigureFormProject:{id:"issue-create-side-panel.bulk-configure.form.project",defaultMessage:"Project"},bulkConfigureFormProjectGalaxia:{id:"issue-create-side-panel.bulk-configure.form.project-galaxia",defaultMessage:"Space"},singleWorkCreateFormProject:{id:"issue-create-side-panel.single-work-create-form.form.project",defaultMessage:"Project"},singleWorkCreateFormProjectGalaxia:{id:"issue-create-side-panel.single-work-create-form.form.project-galaxia",defaultMessage:"Space"},bulkConfigureFormDefaultIssueType:{id:"issue-create-side-panel.bulk-configure.form.default.issue.type",defaultMessage:"Default Issue type"},singleWorkCreateFormDefaultIssueType:{id:"issue-create-side-panel.single-work-create-form.form.default.issue.type",defaultMessage:"Issue type"},bulkConfigureFormProjectSelectorProjects:{id:"issue-create-side-panel.bulk-configure.form.project-selector.projects",defaultMessage:"Projects"},bulkConfigureFormProjectSelectorProjectsGalaxia:{id:"issue-create-side-panel.bulk-configure.form.project-selector.projects-galaxia",defaultMessage:"Spaces"},singleWorkCreateFormProjectSelectorProjects:{id:"issue-create-side-panel.single-work-create-form.form.project-selector.projects",defaultMessage:"Projects"},singleWorkCreateFormProjectSelectorProjectsGalaxia:{id:"issue-create-side-panel.single-work-create-form.form.project-selector.projects-galaxia",defaultMessage:"Spaces"},bulkConfigureFormProjectSelectorRecentProjects:{id:"issue-create-side-panel.bulk-configure.form.project-selector.recent-projects",defaultMessage:"Recent Projects"},bulkConfigureFormProjectSelectorRecentProjectsGalaxia:{id:"issue-create-side-panel.bulk-configure.form.project-selector.recent-projects-galaxia",defaultMessage:"Recent Spaces"},singleWorkCreateFormProjectSelectorRecentProjects:{id:"issue-create-side-panel.single-work-create-form.form.project-selector.recent-projects",defaultMessage:"Recent Projects"},singleWorkCreateFormProjectSelectorRecentProjectsGalaxia:{id:"issue-create-side-panel.single-work-create-form.form.project-selector.recent-projects-galaxia",defaultMessage:"Recent Spaces"},bulkConfigureFooterCancel:{id:"issue-create-side-panel.bulk-configure.footer.cancel",defaultMessage:"Cancel"},singleCreateIssueFormFooterCancel:{id:"issue-create-side-panel.single-create-issue-form.footer.cancel",defaultMessage:"Cancel"},bulkConfigureFooterSave:{id:"issue-create-side-panel.bulk-configure.footer.save",defaultMessage:"Save"},singleCreateIssueFormFooterSave:{id:"issue-create-side-panel.single-create-issue-form.footer.save",defaultMessage:"Create"},bulkConfigureMapTableToIssueTitle:{id:"issue-create-side-panel.bulk-configure.map-table-to-issue.title",defaultMessage:"Map table to issue fields"},bulkConfigureMapTableToIssueDescription:{id:"issue-create-side-panel.bulk-configure.map-table-to-issue.description",defaultMessage:"You can map your highlighted table’s columns to specific fields in your issues."},bulkConfigureMapTableToIssueTableColumn:{id:"issue-create-side-panel.bulk-configure.map-table-to-issue.table-column",defaultMessage:"Table column"},bulkConfigureMapTableToIssueIssueField:{id:"issue-create-side-panel.bulk-configure.map-table-to-issue.issue-field",defaultMessage:"Issue field"},bulkConfigureMapTableToIssueAddMapping:{id:"issue-create-side-panel.bulk-configure.map-table-to-issue.add-mapping",defaultMessage:"Add mapping"},bulkConfigureMapTableToIssueErrorColumnNotSelected:{id:"issue-create-side-panel.bulk-configure.map-table-to-issue.error.column-not-selected",defaultMessage:"Column must be selected."},bulkConfigureMapTableToIssueErrorFieldNotSelected:{id:"issue-create-side-panel.bulk-configure.map-table-to-issue.error.field-not-selected",defaultMessage:"Field must be selected."},bulkConfigureMapTableToIssueErrorFieldAlreadyMapped:{id:"issue-create-side-panel.bulk-configure.map-table-to-issue.error.field-already-mapped",defaultMessage:"Another column is already mapped to selected field."},issueCardDescriptionIconLabel:{id:"issue-create-side-panel.bulk-create.card.description-icon",defaultMessage:"Description"},requiredFieldsSectionMessageTitle:{id:"issue-create-side-panel.bulk-create.body.required-fields-message-title",defaultMessage:"These suggestions have required fields"},requiredFieldsSectionMessageDescription:{id:"issue-create-side-panel.bulk-create.body.required-fields-message-description",defaultMessage:"Edit each suggestion and complete the required fields to create the issues"},bulkCreateIssueInsertionHeading:{id:"issue-create-side-panel.bulk-create.issue-insertion-heading",defaultMessage:"Linked Jira Issues"},sidePanelAiLoadingIssueTermRefresh:{id:"issue-create-side-panel.body.ai-loading-issue-term-refresh",defaultMessage:"Generating"},sidePanelAiLoadingIssueExperiment:{id:"issue-create-side-panel.body.ai-loading-issue-experiment",defaultMessage:"Atlassian Intelligence is generating the summary and description, which may take a few moments."},sidePanelAiLoadingIssueExperimentRebrandToRovo:{id:"issue-create-side-panel.body.ai-loading-issue-experiment-rebrand-to-rovo",defaultMessage:"Rovo is generating the summary and description, which may take a few moments."},unsavedHeadingIssueTermRefresh:{id:"issue-create-side-panel.unsaved-issue.warning.dialog.heading-issue-term-refresh",defaultMessage:"Discard {issuesCount, plural, =0 {work item} one {work item} other {work items}}?"},singleCreateAiErrorDescriptionIssueTermRefresh:{id:"issue-create-side-panel.single-create-ai-error-description-issue-term-refresh",defaultMessage:"Atlassian Intelligence can‘t provide a response right now. Try again or create your work item manually."},singleCreateAiErrorDescriptionIssueTermRefreshRebrandToRovo:{id:"issue-create-side-panel.single-create-ai-error-description-issue-term-refresh-rebrand-to-rovo",defaultMessage:"Rovo can’t provide a response right now. Try again or create your work item manually."},sidePanelSingleIssueCreateSuccessFlagTitleIssueTermRefresh:{id:"issue-create-side-panel.sucess-flag-title-issue-term-refresh",defaultMessage:"You’ve created <link>{issueKey} {issueSummary}</link> work item"},sidePanelIssueCreatePartialErrorMessageIssueTermRefresh:{id:"issue-create-side-panel.bulk-create.partial.error.message-issue-term-refresh",defaultMessage:"We couldn’t create some of your work items. Select the checkmark on the remaining work items to create them one at a time."},unsavedContentIssueTermRefresh:{id:"issue-create-side-panel.unsaved-issue.warning.dialog.content-issue-term-refresh",defaultMessage:"Your {issuesCount, plural, =0 {work item} one {work item} other {work items}} will be lost."},sidePanelAiLoadingBulkIssueTermRefresh:{id:"issue-create-side-panel.bulk-body.ai-loading-issue-term-refresh",defaultMessage:"Generating"},sidePanelMultipleIssueCreateSuccessFlagTitleIssueTermRefresh:{id:"issue-create-side-panel.multiple.sucess-flag-title-issue-term-refresh",defaultMessage:"You’ve created {issueCount} {issueCount, plural, one {work item} other {work items}}"},sidePanelHeaderIssueTermRefresh:{id:"issue-create-side-panel.header-issue-term-refresh",defaultMessage:"Create Jira work item"},noAnswerSuggestedIssuesIssueTermRefresh:{id:"issue-create-side-panel.no-answer-suggested-issues-ai-error-description-issue-term-refresh",defaultMessage:"We can’t understand the content to suggest a work item. Select different content or create manually."},ethicalViolationErrorDescriptionIssueTermRefresh:{id:"issue-create-side-panel.ethical-violation-ai-error-description-issue-term-refresh",defaultMessage:"Your selected content or other content on this page might not comply with our <link>Acceptable Use Policy</link>. You can always create a work item manually."},rateLimitErrorDescriptionIssueTermRefresh:{id:"issue-create-side-panel.rate-limit-ai-error-description-issue-term-refresh",defaultMessage:"We’ve received too many recent requests for Atlassian Intelligence (AI). Try again in a few minutes or <link>read about excessive use of AI</link>. You can always create a work item manually."},exceedingTokenLimitDescriptionIssueTermRefresh:{id:"issue-create-side-panel.exceed-token-limit-description-issue-term-refresh",defaultMessage:"Atlassian Intelligence can’t create work items for lengthy Confluence pages right now. You can always create a work item manually."},rateLimitErrorDescriptionIssueTermRefreshRebrandToRovo:{id:"issue-create-side-panel.rate-limit-ai-error-description-issue-term-refresh-rebrand-to-rovo",defaultMessage:"We’ve received too many recent requests for Rovo. Try again in a few minutes or <link>read about excessive use of AI</link>. You can always create a work item manually."},exceedingTokenLimitDescriptionIssueTermRefreshRebrandToRovo:{id:"issue-create-side-panel.exceed-token-limit-description-issue-term-refresh-rebrand-to-rovo",defaultMessage:"Rovo can’t create work items for lengthy Confluence pages right now. You can always create a work item manually."},sidePanelMultipleIssuesInsertLinkFailureFlagTitleIssueTermRefresh:{id:"issue-create-side-panel.multiple.insert-link-failure-flag.title-issue-term-refresh",defaultMessage:"We couldn’t insert links to the page for {issueCount} {issueCount, plural, one {work item} other {work items}}"},sidePanelIssueCreateErrorMessageIssueTermRefresh:{id:"issue-create-side-panel.bulk-create.error.message-issue-term-refresh",defaultMessage:"We weren’t able to save your {issuesCount, plural, one {work item} other {work items}}. Please try again."},bulkCreateConfigureBodyTextIssueTermRefresh:{id:"issue-create-side-panel.bulk-create.configure.body-issue-term-refresh",defaultMessage:"Changing these settings might re-generate the list."},bulkCreateConfigureBodyWorkFieldMappingsComponentsFieldOption:{id:"issue-create-side-panel.bulk-create.configure.body.work-field-mappings.components-field-option",defaultMessage:"Components"},singleWorkCreateFormBodyTextIssueTermRefresh:{id:"issue-create-side-panel.single-work-create-form.body-issue-term-refresh",defaultMessage:"Changing these settings might re-generate the list."},requiredFieldsSectionMessageDescriptionIssueTermRefresh:{id:"issue-create-side-panel.bulk-create.body.required-fields-message-description-issue-term-refresh",defaultMessage:"Edit each suggestion and complete the required fields to create the work items"},moreThanFiftyWorkItemsSectionMessageTitle:{id:"issue-create-side-panel.bulk-create.body.more-than-fifty-work-items-message-title",defaultMessage:"There are more than 50 work items"},moreThanFiftyWorkItemsSectionMessageDescription:{id:"issue-create-side-panel.bulk-create.body.more-than-fifty-work-items-message-description",defaultMessage:"We can’t create more than 50 work items at once. Please delete or approve work items from this list, or limit your {context, select, table {table to 50 rows} list {list to 50 action items} other {selection to 50 items}}."},moreThanTenAIWorkItemsSectionMessageTitle:{id:"issue-create-side-panel.bulk-create.body.more-than-ten-ai-work-items-message-title",defaultMessage:"The selection contains more than 10 work items"},moreThanTenAIWorkItemsSectionMessageDescription:{id:"issue-create-side-panel.bulk-create.body.more-than-ten-ai-work-items-message-description",defaultMessage:"We can’t create more than 10 work items at once with Rovo. Please limit your {context, select, table {table to 10 rows} list {list to 10 action items} other {selection to 10 items}}, or create the work items without Rovo."},bulkConfigureFormDefaultIssueTypeIssueTermRefresh:{id:"issue-create-side-panel.bulk-configure.form.default.issue.type-issue-term-refresh",defaultMessage:"Default work type"},singleWorkCreateFormDefaultIssueTypeIssueTermRefresh:{id:"issue-create-side-panel.single-work-create-form.form.default.issue.type-issue-term-refresh",defaultMessage:"Work type"},bulkCreateIssueInsertionHeadingIssueTermRefresh:{id:"issue-create-side-panel.bulk-create.issue-insertion-heading-issue-term-refresh",defaultMessage:"Linked Jira work items"},bulkCreateHeaderTextIssueTermRefresh:{id:"issue-create-side-panel.bulk-create.header-issue-term-refresh",defaultMessage:"Create Jira work items"},bulkConfigureMapTableToIssueTitleIssueTermRefresh:{id:"issue-create-side-panel.bulk-configure.map-table-to-issue.title-issue-term-refresh",defaultMessage:"Map table to work item fields"},bulkConfigureMapTableToIssueDescriptionIssueTermRefresh:{id:"issue-create-side-panel.bulk-configure.map-table-to-issue.description-issue-term-refresh",defaultMessage:"You can map your highlighted table’s columns to specific fields in your work items."},bulkConfigureMapTableToIssueIssueFieldIssueTermRefresh:{id:"issue-create-side-panel.bulk-configure.map-table-to-issue.issue-field-issue-term-refresh",defaultMessage:"Work item field"},bulkCreateEditHeaderTextIssueTermRefresh:{id:"issue-create-side-panel.bulk-create-edit.header-issue-term-refresh",defaultMessage:"Edit work item"},workCreateCommonRequiredFieldsSectionMessageNote:{id:"issue-create-side-panel.work-create-form-common.required-fields-message-note",defaultMessage:"Required fields are marked with an asterisk *"},workCreateCommonRequiredFieldsSectionMessageNoteWithoutTailingAsterisk:{id:"issue-create-side-panel.work-create-form-common.required-fields-message-note-without-tailing-asterisk",defaultMessage:"Required fields are marked with an asterisk"},workCreateCommonSummaryLabel:{id:"issue-create-side-panel.work-create-form-common.text-field-label",defaultMessage:"Summary"},workCreateCommonSummaryError:{id:"issue-create-side-panel.work-create-form-common.text-field-error",defaultMessage:"Summary is required"},workCreateCommonDescriptionLabel:{id:"issue-create-side-panel.work-create-form-common.rich-text-field-label",defaultMessage:"Description"},workCreateCommonDescriptionPlaceholder:{id:"issue-create-side-panel.work-create-form-common.rich-text-field-placeholder",defaultMessage:"Add a description..."},workCreateCommonSummaryAiLoadingPlaceholder:{id:"issue-create-side-panel.work-create-form-common.text-field-ai-loading-placeholder",defaultMessage:"Generating summary..."},workCreateCommonDescriptionAiLoadingPlaceholder:{id:"issue-create-side-panel.work-create-form-common.rich-text-field-ai-loading-placeholder",defaultMessage:"Generating description..."},transitionToGicAnywhereSectionMessage:{id:"issue-create-side-panel.transition-to-gic-anywhere-section-message",defaultMessage:"We have updated this form to show additional required fields."}});e.exports.messages=a,e.exports.JIRA_EMBED_ISSUE_CREATE_SITE_SELECTED="jiraEmbedIssueSiteSelected",e.exports.JIRA_EMBED_ISSUE_CREATE_PROJECT_SELECTED="jiraEmbedIssueProjectSelected",e.exports.JIRA_EMBED_ISSUE_CREATE_READY="jiraEmbedIssueCreateReady",e.exports.JIRA_EMBED_ISSUE_CREATE_CLOSE="jiraEmbedIssueCreateClose"}),a("hq2Sz",function(e,t){var a=s("42omo");let r={ABORT:"abort",LOADING:"loading",ERROR:"error",IDLE:"idle"},i={BULK_CREATION:"bulk-issue-creation-failed",ISSUE_GENERATION:"ai-issue-generation-failed",SITE_RETRIEVAL:"jira-site-retreival-failed",PROJECT_RETRIEVAL:"jira-project-retreival-failed",ISSUE_TYPE_RETRIEVAL:"issue-type-retreival-failed",EMPTY:""},l={[i.BULK_CREATION]:()=>(0,s("6mKj3").expVal)("confluence_work_item_create_ai_rebrand_to_rovo","isEnabled",!1)?s("3E5yu").messages.bulkCreateAiErrorDescriptionRebrandToRovo:s("3E5yu").messages.bulkCreateAiErrorDescription,[i.ISSUE_GENERATION]:()=>(0,s("6mKj3").expVal)("confluence_work_item_create_ai_rebrand_to_rovo","isEnabled",!1)?s("3E5yu").messages.issueGenerationErrorDescriptionRebrandToRovo:s("3E5yu").messages.issueGenerationErrorDescription,[i.SITE_RETRIEVAL]:()=>(0,s("6mKj3").expVal)("project-terminology-refresh","isEnabled",!1)?s("3E5yu").messages.connectJiraProjectErrorDescriptionGalaxia:s("3E5yu").messages.connectJiraProjectErrorDescription,[i.PROJECT_RETRIEVAL]:()=>(0,s("6mKj3").expVal)("project-terminology-refresh","isEnabled",!1)?s("3E5yu").messages.connectJiraProjectErrorDescriptionGalaxia:s("3E5yu").messages.connectJiraProjectErrorDescription,[i.ISSUE_TYPE_RETRIEVAL]:()=>(0,s("6mKj3").expVal)("project-terminology-refresh","isEnabled",!1)?s("3E5yu").messages.connectJiraProjectErrorDescriptionGalaxia:s("3E5yu").messages.connectJiraProjectErrorDescription},n={bulkIssuesList:[],currentIssueId:"",contentLastModifiedTimestamp:void 0,insertStorageFragmentRequestPayload:void 0,insertStorageColumnTableRequestPayload:void 0,aiState:r.IDLE,isCreatedWithAi:!1,isCreatedFromTable:!1,isCreatedFromActionItems:!1,currentJiraSite:void 0,currentJiraProject:void 0,currentDefaultIssueType:void 0,issueTypeHasRequiredFields:!1,singleIssuesCreated:[],error:"",issueTypeFields:{requiredFields:[],optionalFields:[]},manualCreateState:"idle",aiResultViewedFiredOnce:!1,closeAndAddIssuesToPage:!1,expectedIssueIndices:[],selectedTableAdf:void 0,userChoseManualCreation:!1},o={bulkIssuesList:[],currentIssueId:"",contentLastModifiedTimestamp:void 0,insertStorageFragmentRequestPayload:void 0,insertStorageColumnTableRequestPayload:void 0,aiState:r.IDLE,isCreatedWithAi:!1,isCreatedFromTable:!1,isCreatedFromActionItems:!1,error:"",manualCreateState:"idle",aiResultViewedFiredOnce:!1,closeAndAddIssuesToPage:!1,expectedIssueIndices:[],selectedTableAdf:void 0,userChoseManualCreation:!1},u=(0,s("1P1Tu").createStore)({initialState:{...n},actions:{setCurrentIssueId:e=>({setState:t})=>{t({currentIssueId:e})},setBulkIssuesList:e=>({setState:t})=>{t({bulkIssuesList:e})},setIssueTypeFields:e=>({setState:t})=>{t({issueTypeFields:e})},setAiState:e=>({setState:t,getState:s})=>{let{error:a}=s();t(a===i.ISSUE_GENERATION&&e==r.LOADING?{aiState:e,error:i.EMPTY}:e==r.ERROR?{aiState:e,error:i.ISSUE_GENERATION}:{aiState:e})},setIsCreatedWithAi:e=>({setState:t})=>{t({isCreatedWithAi:e})},setIsCreatedFromTable:e=>({setState:t})=>{t({isCreatedFromTable:e})},setIsCreatedFromActionItems:e=>({setState:t})=>{t({isCreatedFromActionItems:e})},setContentLastModifiedTimestamp:e=>({setState:t})=>{t({contentLastModifiedTimestamp:e})},setInsertStorageFragmentRequestPayload:e=>({setState:t})=>{t({insertStorageFragmentRequestPayload:e})},setInsertStorageColumnTableRequestPayload:e=>({setState:t})=>{t({insertStorageColumnTableRequestPayload:e})},removeBulkIssue:e=>({setState:t,getState:s})=>{let{bulkIssuesList:a}=s(),r=a.filter(t=>t.id!==e);t({bulkIssuesList:r,closeAndAddIssuesToPage:0===r.length})},removeBulkIssueList:e=>({setState:t,getState:s})=>{let{bulkIssuesList:a}=s();t({bulkIssuesList:a.filter(t=>!e.includes(t.id))})},setSingleIssuesCreated:e=>({setState:t,getState:s})=>{let{singleIssuesCreated:a}=s();t({singleIssuesCreated:[...a,e]})},resetSingleIssuesCreated:()=>({setState:e})=>{e({singleIssuesCreated:n.singleIssuesCreated})},setCurrentJiraSite:e=>({setState:t})=>{t({currentJiraSite:e})},setCurrentJiraProject:e=>({setState:t})=>{t({currentJiraProject:e})},setNextIssueToEdit:e=>({setState:t,getState:s})=>{let{bulkIssuesList:a,currentIssueId:r}=s(),i=a.findIndex(e=>e?.id===r),l=a.filter(e=>e?.id!==r);if(i>=a.length-1){t({bulkIssuesList:l,closeAndAddIssuesToPage:0===l.length}),e("default");return}t({currentIssueId:a[i+1]?.id,bulkIssuesList:l,closeAndAddIssuesToPage:0===l.length})},setCurrentDefaultIssueType:e=>({setState:t})=>{t({currentDefaultIssueType:e})},setIssueTypeHasRequiredFields:e=>({setState:t})=>{t({issueTypeHasRequiredFields:e})},setError:e=>({setState:t})=>{t({error:e})},setManualCreateState:e=>({setState:t,getState:s})=>{let{error:a}=s();t((a===i.SITE_RETRIEVAL||a===i.PROJECT_RETRIEVAL||a===i.ISSUE_TYPE_RETRIEVAL)&&"loading"===e?{manualCreateState:e,error:i.EMPTY}:"error"===e?{manualCreateState:e,error:i.SITE_RETRIEVAL}:{manualCreateState:e})},resetTransientBulkCreateState:()=>({setState:e})=>{e(o)},resetManualBulkCreateState:()=>({setState:e})=>{e({manualCreateState:"idle",error:i.EMPTY,bulkIssuesList:[]})},resetAIBulkCreateState:()=>({setState:e})=>{e({bulkIssuesList:[],aiResultViewedFiredOnce:!1})},setAiResultViewedFiredOnce:e=>({setState:t})=>{t({aiResultViewedFiredOnce:e})},resetCloseAndAddIssuesToPage:()=>({setState:e})=>{e({closeAndAddIssuesToPage:!1})},setExpectedIssueIndices:e=>({setState:t})=>{t({expectedIssueIndices:e})},setSelectedTableAdf:e=>({setState:t})=>{t({selectedTableAdf:e})},setUserChoseManualCreation:e=>({setState:t})=>{t({userChoseManualCreation:e})}},name:"bulkCreateContext"}),c=(0,s("FOT9i").createContainer)(u),d=(0,s("9zUhf").createHook)(u),m=(0,s("9zUhf").createActionsHook)(u),p=(0,s("9zUhf").createStateHook)(u,{selector:e=>e.contentLastModifiedTimestamp}),g=(0,s("9zUhf").createStateHook)(u,{selector:e=>({iconUrl:(0,s("f0BVO").transformStargateUrl)(e.currentDefaultIssueType?.iconUrl||""),name:e.currentDefaultIssueType?.name||"",id:e.currentDefaultIssueType?.id||""})}),f=(0,s("9zUhf").createStateHook)(u,{selector:e=>!e.isCreatedWithAi&&0===e.bulkIssuesList.length}),C=(0,s("9zUhf").createStateHook)(u,{selector:e=>e.closeAndAddIssuesToPage});e.exports.AiStates=r,e.exports.ErrorStates=i,e.exports.ErrorMessageMap=l,e.exports.BulkCreateContainer=c,e.exports.useBulkCreateContext=d,e.exports.useSetIssueTypeFields=()=>{let{setIssueTypeFields:e}=m();return e},e.exports.useSetIsCreatedWithAi=()=>{let{setIsCreatedWithAi:e}=m();return e},e.exports.useSetIsCreatedFromTable=()=>{let{setIsCreatedFromTable:e}=m();return e},e.exports.useSetIsCreatedFromActionItems=()=>{let{setIsCreatedFromActionItems:e}=m();return e},e.exports.useSetCurrentIssueId=()=>{let{setCurrentIssueId:e}=m();return e},e.exports.useRemoveBulkIssue=()=>{let{removeBulkIssue:e}=m();return e},e.exports.useSetNextIssueToEdit=()=>{let{setNextIssueToEdit:e}=m(),t=(0,s("aMxFD").useAiBulkNavigationGotoPage)();return(0,a.useCallback)(()=>void e(t),[t,e])},e.exports.useSetIssueTypeHasRequiredFields=()=>{let{setIssueTypeHasRequiredFields:e}=m();return e},e.exports.useSetSingleIssuesCreated=()=>{let{setSingleIssuesCreated:e}=m();return e},e.exports.useResetSingleIssuesCreated=()=>{let{resetSingleIssuesCreated:e}=m();return e},e.exports.useGetContentLastModifiedTimestamp=p,e.exports.useSetContentLastModifiedTimestamp=()=>{let{setContentLastModifiedTimestamp:e}=m();return e},e.exports.useSetInsertStorageFragmentRequestPayload=()=>{let{setInsertStorageFragmentRequestPayload:e}=m();return e},e.exports.useGetIssueType=g,e.exports.useGetIsMissingColumnMappingError=f,e.exports.useSetError=()=>{let{setError:e}=m();return e},e.exports.useCloseAndAddIssuesToPage=C,e.exports.useResetCloseAndAddIssuesToPage=()=>{let{resetCloseAndAddIssuesToPage:e}=m();return e},e.exports.useSetBulkIssuesList=()=>{let{setBulkIssuesList:e}=m();return e},e.exports.useSetSelectedTableAdf=()=>{let{setSelectedTableAdf:e}=m();return e},e.exports.useSetUserChoseManualCreation=()=>{let{setUserChoseManualCreation:e}=m();return e}}),a("1uJpg",function(t,a){var r=s("42omo");t.exports.RainbowLoadingSidebar=({children:t,isShown:a})=>e(r).createElement("div",{"data-testId":"rainbow-loading-sidebar",className:(0,s("gMc0m").default)(["_kqswstnw _1bsb1osq _bfhk1ut7 _4t3i1osq _154iidpf _1xi2idpf _1ltvidpf _94n5idpf _1e0c1txw _2lx21bp4",a&&"",a&&"_5pio1ynq _y44vus0d _1kl7ryy8 _1rrh1i1e",a&&""])},t)}),a("5Ew1A",function(t,a){var r=s("42omo"),i=s("T1bCI");t.exports.SidePanelWrapper=({children:t,isOpen:a=!0})=>e(r).createElement(i.Subscribe,{to:[s("hrAmX").BannerStateContainer]},i=>{let l=i.getTotalHeight(!0);return e(r).createElement(s("kmWRd").SidePanel,{isFixed:!0,headerHeight:l,panelTop:l,isOpen:a},t)})}),a("jwedr",function(e,t){var a=s("42omo");let r=e=>{let{hideSidePanel:t}=(0,s("ai7NK").useSidePanelStateActions)(),{showWarningDialog:r,hideWarningDialog:i}=(0,s("4aiCO").useWarningDialogStateActions)(),[{bulkIssuesList:l,aiState:n,error:o,isCreatedWithAi:u}]=(0,s("hq2Sz").useBulkCreateContext)(),{logAiInteractionDismissed:c}=(0,s("26Yin").useBulkCreateLoggingEvents)(),[d,m]=(0,a.useState)(),p=(0,s("QU6QS").useHistory)(),g=n===s("hq2Sz").AiStates.LOADING,f=o!==s("hq2Sz").ErrorStates.EMPTY,C=(0,a.useCallback)(()=>{u&&(g||f||0===l.length)&&c(),i(),d&&(p.block(()=>{}),p.push(d.pathname)),t(),e()},[l,t,i,p,u,f,g,c,d,e]),I=(0,a.useCallback)(()=>{i()},[i]);return(0,a.useEffect)(()=>{let e=p.block(e=>(m(e),r(),!1));return()=>e&&e()},[p,r]),{handleConfirm:C,handleCancel:I}},i=()=>{let{hideWarningDialog:e}=(0,s("4aiCO").useWarningDialogStateActions)(),t=(0,s("hq2Sz").useSetIsCreatedWithAi)();return{handleConfirm:(0,a.useCallback)(async()=>{await t(!1),await t(!0),e()},[e,t]),handleCancel:(0,a.useCallback)(()=>{e()},[e])}};e.exports.useGetWarningDialogActions=e=>{let{handleConfirm:t,handleCancel:a}=r(e),{handleConfirm:l,handleCancel:n}=i(),o=(0,s("4aiCO").useIsWarningDialogOpen)(),u=(0,s("4aiCO").useGetWarningDialog)();return{isWarningDialogOpen:o,handleConfirm:u===s("4aiCO").WarningDialog.FLOATING?l:t,handleCancel:u===s("4aiCO").WarningDialog.FLOATING?n:a}}}),a("5FJ5W",function(t,a){var r=s("42omo");let i=t=>e(r).createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e(r).createElement("title",null,t.alt),e(r).createElement("circle",{cx:"5.5",cy:"12.5",r:"1.5",fill:"#0C66E4"},e(r).createElement("animate",{attributeName:"cy",values:"11;13;13;13;13;13;13;11",dur:"1s",repeatCount:"indefinite",begin:"0s"})),e(r).createElement("circle",{cx:"11.5",cy:"10.5",r:"1.5",fill:"#1D7AFC"},e(r).createElement("animate",{attributeName:"cy",values:"11;13;13;13;13;13;13;11",dur:"1s",repeatCount:"indefinite",begin:"0.2s"})),e(r).createElement("circle",{cx:"17.5",cy:"12.5",r:"1.5",fill:"#388BFF"},e(r).createElement("animate",{attributeName:"cy",values:"11;13;13;13;13;13;13;11",dur:"1s",repeatCount:"indefinite",begin:"0.4s"}))),l=(0,s("ecnYn").xcss)({height:"100%",padding:"space.300"}),n=(0,s("ecnYn").xcss)({width:"24px",height:"24px"});t.exports.IssueCreateAiLoading=({loadingType:t="single"})=>{let a=(0,r.useMemo)(()=>{if((0,s("9wGTI").fg)("confluence-issue-terminology-refresh")){let e=(0,s("6mKj3").expVal)("aiwc_confluence_update_loading_message","isEnabled",!1)?(0,s("6mKj3").expVal)("confluence_work_item_create_ai_rebrand_to_rovo","isEnabled",!1)?s("3E5yu").messages.sidePanelAiLoadingIssueExperimentRebrandToRovo:s("3E5yu").messages.sidePanelAiLoadingIssueExperiment:s("3E5yu").messages.sidePanelAiLoadingIssueTermRefresh;return"bulk"===t?s("3E5yu").messages.sidePanelAiLoadingBulkIssueTermRefresh:e}let e=(0,s("6mKj3").expVal)("aiwc_confluence_update_loading_message","isEnabled",!1)?(0,s("6mKj3").expVal)("confluence_work_item_create_ai_rebrand_to_rovo","isEnabled",!1)?s("3E5yu").messages.sidePanelAiLoadingIssueExperimentRebrandToRovo:s("3E5yu").messages.sidePanelAiLoadingIssueExperiment:s("3E5yu").messages.sidePanelAiLoading;return"bulk"===t?s("3E5yu").messages.sidePanelAiLoadingBulk:e},[t]);return e(r).createElement(s("1GzhS").default,{xcss:l,alignBlock:"stretch"},e(r).createElement(s("dcJ7R").default,{space:"space.050",alignBlock:"center"},e(r).createElement(s("6f0Oj").default,{xcss:n},e(r).createElement(i,{alt:"Generating"})),e(r).createElement(s("5dK2X").default,{size:"large",color:"color.text.subtlest"},e(r).createElement(s("gtD4K").default,a))))}}),a("1Q0l6",function(e,t){let a=(e,t)=>`${e}/browse/${t}`,r=e=>`<a href="${e}" data-card-appearance="inline">${e}</a>`,i=()=>{let e=document.querySelector('meta[name="confluence-request-time"]');return e?Number(e.getAttribute("content")):null},l=e=>e?new Date(e).getTime():i(),n=e=>{if(!e||!e.searchText||void 0===e.searchText.numMatches)return{selectedText:"",index:-1,numMatches:0};let{searchText:{numMatches:t,index:s,selectedText:a}}=e;return{selectedText:a,index:s,numMatches:t}},o=async e=>{try{let t=await (0,s("f7B1p").cfetch)("/wiki/rest/highlighting/1.0/insert-storage-fragment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Insert storage fragment request failed");return await t.json()}catch(e){throw e}},u=async e=>{let t=await (0,s("f7B1p").cfetch)("/wiki/rest/highlighting/1.0/insert-storage-fragments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Insert storage fragments request failed");return t.json()},c=async e=>{let t=await (0,s("f7B1p").cfetch)("/wiki/rest/highlighting/1.0/insert-storage-column-table",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Insert storage column table request failed");return t.json()},d=e=>{let t=e;for(;t.hasChildNodes();)t=t.lastChild;return t},m=(e,t)=>{if(!e)return;let s=document.createRange(),a=null,r=0,i=0,l=e=>e.nodeType===Node.ELEMENT_NODE&&e.matches('span[data-node-type="status"],[data-inline-card="true"],.inlineCardView-content-wrap,.smart-link-title-wrapper'),n=(e,t)=>{let s=e;for(;s&&s!==t;){if(l(s))return!0;s=s.parentNode}return!1},o=(e,t)=>{if(e.previousSibling){for(e=e.previousSibling;e.hasChildNodes()&&!l(e);)e=e.lastChild;return e}return e.parentNode&&e.parentNode!==t.commonAncestorContainer?e.parentNode:null},u=t??e.endContainer;for(;u;){if(u.nodeType===Node.TEXT_NODE&&u.textContent&&""!==u.textContent.trim()&&!n(u,e.commonAncestorContainer)){a=u,i=e.endContainer===u?e.endOffset:u.textContent.length,r=e.startContainer===u?e.startOffset:0;break}if(u===e.startContainer)break;u=o(u,e)}return a?(s.setStart(a,r),s.setEnd(a,i),s):e},p=async(e,t)=>{if(!e||!t)return{status:"failed-to-replace"};try{let s=await e.selectionExtension?.actions.replaceWithAdf(t);return{status:s?.status==="success"||s?.status==="document-changed"?s?.status:"failed-to-replace"}}catch{return{status:"failed-to-replace"}}},g=async({createdIssues:e,currentJiraSiteUrl:t,pageMode:r,selectedTableAdf:i,editorAPI:l,payload:n,summaryInsertionColumn:o})=>{if((0,s("6mKj3").expVal)("confluence-bulk-work-create-editor","isEnabled",!1)&&r!==s("1mDVg").PageMode.VIEW&&i&&l&&null!=o){let r=new Map;for(let s of e)null!=s.rowIndex&&r.set(Number(s.rowIndex),a(t,s.key));let n=(0,s("euVTc").constructTableWithWorkItems)(i,r,o);if(!n)return!1;let u=await p(l,n);if("document-changed"===u.status)throw Error("document-changed");return"success"===u.status}return await c(n)};e.exports.constructJiraIssueUrl=a,e.exports.constructBreakContainerTag=e=>`<div><br />${e}</div>`,e.exports.constructSmartlinkTag=r,e.exports.bulkConstructSmartlinkTags=e=>e.map(e=>r(e)).join(" "),e.exports.constructHeading=e=>`<h2>${e}</h2>`,e.exports.getSummaryInsertionColumn=(e,t)=>{if(t)return 0;let s=e?.find(e=>e.field?.fieldId==="summary");return s?.column?.index},e.exports.constructInsertStorageFragmentRequestPayload=(e,t,s,a,r)=>({...n(t(a,s,e)),pageId:e,lastFetchTime:l(r),xmlModification:void 0}),e.exports.constructInsertMultipleStorageFragmentsRequestPayload=(e,t,s,a,r)=>{let i=[],o=0;for(let r of s)i.push({...n(t(a,r,e)),xmlModification:void 0,rowIndex:String(o++)});return{pageId:e,lastFetchTime:l(r),fragments:i}},e.exports.constructInsertStorageColumnTableRequestPayload=(e,t,s,a,r,i)=>({...n(t(a,s,e)),pageId:e,lastFetchTime:l(r),tableColumnIndex:i??0,cellModifications:[]}),e.exports.updateLastFetchTimeIfNotViewMode=(e,t)=>{t&&t!==s("1mDVg").PageMode.VIEW&&(e.lastFetchTime=Date.now())},e.exports.insertContentAtSelectionEnd=o,e.exports.insertMultipleContentAtSelectionEnd=u,e.exports.refreshPageWithTimeout=()=>{setTimeout(()=>{window.location.reload()},3e3)},e.exports.getValidRangeForActionItem=e=>{if(!e)return;let t=d(e.endContainer);return m(e,t)},e.exports.getValidRange=m,e.exports.getPageContentRange=()=>{let e=document.getElementById("main-content");if(e){let t=document.createRange();t.selectNodeContents(e);let s=d(t.endContainer),a=0;return s.nodeType===Node.TEXT_NODE?a=s.textContent?.length||0:s.nodeType===Node.ELEMENT_NODE&&(a=s.childNodes.length),t.setEnd(s,a),t}},e.exports.insertWorkItemsIntoTable=g}),a("euVTc",function(e,t){let a=/[0-9A-Za-z]{8}-[0-9A-Za-z]{4}-[0-9A-Za-z]{4}-[0-9A-Za-z]{4}-[0-9A-Za-z]{12}/,r=e=>e.field?i(e.field):s("CbMiC").FieldType.UNSUPPORTED,i=e=>{switch(e.schema.type){case s("2R8mu").FieldMetadataSchemaType.STRING:return e.schema.custom===s("2R8mu").FieldMetadataSchemaCustom.TEXT_AREA?s("CbMiC").FieldType.PARAGRAPH:s("CbMiC").FieldType.SHORT_TEXT;case s("2R8mu").FieldMetadataSchemaType.NUMBER:return s("CbMiC").FieldType.NUMBER;case s("2R8mu").FieldMetadataSchemaType.DATE:return s("CbMiC").FieldType.DATE;case s("2R8mu").FieldMetadataSchemaType.USER:return s("CbMiC").FieldType.USER;case s("2R8mu").FieldMetadataSchemaType.PRIORITY:return s("CbMiC").FieldType.PRIORITY;case s("2R8mu").FieldMetadataSchemaType.DATETIME:return s("CbMiC").FieldType.TIMESTAMP;case s("2R8mu").FieldMetadataSchemaType.ARRAY:if(e.schema.custom===s("2R8mu").FieldMetadataSchemaCustom.PEOPLE)return s("CbMiC").FieldType.PEOPLE;if(e.schema.system===s("2R8mu").FieldMetadataSchemaSystem.LABELS)return s("CbMiC").FieldType.LABELS;if(e.schema.items===s("2R8mu").FieldMetadataSchemaItems.VERSION)return s("CbMiC").FieldType.VERSIONS;else if(e.schema.items===s("2R8mu").FieldMetadataSchemaItems.OPTION&&e.operations?.includes(s("2R8mu").FieldMetadataSchemaOperations.ADD))return s("CbMiC").FieldType.MULTI_SELECT;else if(e.schema.items===s("2R8mu").FieldMetadataSchemaItems.OPTION&&e.operations?.includes(s("2R8mu").FieldMetadataSchemaOperations.SET))return s("CbMiC").FieldType.SINGLE_SELECT;return s("CbMiC").FieldType.UNSUPPORTED;case s("2R8mu").FieldMetadataSchemaType.TEAM:return s("CbMiC").FieldType.TEAM;case s("2R8mu").FieldMetadataSchemaType.ISSUELINK:if(e.schema.system===s("2R8mu").FieldMetadataSchemaSystem.PARENT)return s("CbMiC").FieldType.PARENT;return s("CbMiC").FieldType.UNSUPPORTED;case s("2R8mu").FieldMetadataSchemaType.COMPONENTS:return s("CbMiC").FieldType.COMPONENTS;default:return s("CbMiC").FieldType.UNSUPPORTED}},l=e=>"mention"==e.type&&e.attrs?.id?e.attrs.id:null,n=e=>{let t,s=[e],a=[];for(;void 0!==(t=s.pop());)l(t)&&a.push(t.attrs.id),t.content?.forEach(e=>{e&&s.push(e)});return a},o=e=>{let t;if(!e)return null;try{t=new URL(e)}catch{return null}let s=t.pathname,r=s.split("/");if(s.startsWith("/people/team")&&r.length>3){let e=r[3];return e.match(a)?e:null}return null},u=e=>{let t;return"inlineCard"==e.type||"blockCard"==e.type?t=e.attrs?.url:"link"==e.type?t=e.attrs?.href:"text"==e.type&&(t=e.text),o(t)},c=e=>{let t,s=[e];for(;void 0!==(t=s.pop());){let e=u(t);if(e)return e;t.content?.forEach(e=>{e&&s.push(e)}),t.marks?.forEach(e=>{s.push(e)})}return null},d=(e,t=/\s+/)=>{let s,a=[e],r=[];for(;void 0!==(s=a.pop());)"text"==s.type&&s.text&&r.push(...s.text.split(t)),s.content?.forEach(e=>{e&&a.push(e)});return r},m=(e,t,a,r,i)=>{let l;if(!a)return null;let o=a.textContent?.trim(),u=(0,s("eqKgz").htmlToADF)(a.innerHTML),m=o?new Date(o):null,g=m&&!isNaN(m.getTime())?m:null;switch(e){case s("CbMiC").FieldType.SHORT_TEXT:return o;case s("CbMiC").FieldType.PARAGRAPH:return u;case s("CbMiC").FieldType.NUMBER:return Number(o);case s("CbMiC").FieldType.DATE:return g?g.toISOString().split("T")[0]:null;case s("CbMiC").FieldType.USER:return(l=n(u)).length>0?{id:l[0]}:null;case s("CbMiC").FieldType.PRIORITY:let C=r.mappingFieldAllowedValues.get(t);if(!(0,s("2R8mu").isIdNameObjectList)(C))return null;let I=p(o,C);return I.length>0?{name:I[0].name,id:I[0].id}:null;case s("CbMiC").FieldType.COMPONENTS:let E=r.mappingFieldAllowedValues.get(t);if(!(0,s("2R8mu").isIdNameObjectList)(E))return null;let b=p(o,E,/\n+/,u);return b.length>0?b.map(e=>({id:e.id})):null;case s("CbMiC").FieldType.VERSIONS:let S=r.mappingFieldAllowedValues.get(t);if(!(0,s("2R8mu").isIdNameObjectList)(S))return null;let y=p(o,S,/\n+/,u);return y.length>0?y.map(e=>({id:e.id})):null;case s("CbMiC").FieldType.SINGLE_SELECT:case s("CbMiC").FieldType.MULTI_SELECT:let h=r.mappingFieldAllowedValues.get(t);if(!(0,s("2R8mu").isSelectOptionList)(h))return null;let T=p(o,h.map(e=>({name:e.value,id:e.id})),/\n+/,u);return T.length>0?T:null;case s("CbMiC").FieldType.TIMESTAMP:return g?g.toISOString():null;case s("CbMiC").FieldType.PEOPLE:return(l=n(u)).length>0?l.map(e=>({id:e})):null;case s("CbMiC").FieldType.LABELS:return d(u);case s("CbMiC").FieldType.TEAM:return c(u);case s("CbMiC").FieldType.PARENT:if(null==o)return null;let k=o.toUpperCase().trim(),M=r.mappingValidParentCandidates?.get(k);return M?{key:M.key,id:M.issueId}:void 0;default:if(i&&i.allowedValues&&r.mappingFieldAllowedValues){let e=f(o,i.fieldId,r);if(e)return e}return o}},p=(e,t,s=/\n+/,a)=>e&&t?(a?d(a,s):[e]).map(e=>t.find(t=>t.name.trim().toLowerCase()===e.trim().toLowerCase())).filter(e=>void 0!==e):[],g=(e,t)=>{if(!e||!t)return[];let s=e.trim().toLowerCase();return t.filter(e=>{if(!e||"object"!=typeof e)return!1;for(let t of["name","displayName","value"])if(e[t]&&"string"==typeof e[t]&&e[t].trim().toLowerCase()===s)return!0;return!1})},f=(e,t,s)=>{if(!e||!t)return null;let a=s?.mappingFieldAllowedValues?.get(t);if(a&&Array.isArray(a)){let t=g(e,a);return t.length>0?t[0]:null}return null},C=e=>Array.from(e.cells).every(e=>e.textContent?.trim()===""),I=e=>{if(!Array.isArray(e)||0===e.length)return!1;let t=e[0];return t&&"object"==typeof t&&"tagName"in t?e.every(e=>e.tagName?.toLowerCase()==="th"||e.classList?.contains("ak-renderer-table-number-column")):e.every(e=>e?.type==="tableHeader")},E=(e,t,s,a,r,i,l)=>{let n=Array.from(a.rows).slice(1).filter(e=>!C(e)),o=n.length;if(0===o)return null;let u=n.map(a=>m(e,t,a.cells[s.index],i,l)),c=u.filter(e=>null!==e&&r(e)),d=u.filter(r);return 0===d.length?null:{canBeRequired:d.length===o,fieldValues:c}},b=e=>e.length>0&&Array.from(e[0].cells).every(e=>"th"===e.tagName.toLowerCase()||e.classList.contains("ak-renderer-table-number-column")),S=/^[A-Z][A-Z0-9_]+-[1-9][0-9]*$/,y=(e,t)=>{try{let s=[...e.content??[],{type:"paragraph",content:[{type:"inlineCard",attrs:{url:t}}]}];return{type:e.type,attrs:e.attrs??{},content:s}}catch{return null}},h=(e,t,s=0)=>{let a=e.slice(),r=function(e,t,s=0){let a=e[[...t.keys()][0]];if(!a||"tableRow"!==a.type||!a.content)return -1;let r=a.content.slice(s).findIndex(e=>e?.type==="tableCell");return r<0?-1:s+r}(a,t,s);if(-1===r)return null;for(let[e,s]of t){let t=a[e];if(!t||"tableRow"!==t.type||!t.content||r>=t.content.length)return null;let i=t.content[r];if(!i)return null;let l=y(i,s);if(!l)return null;a[e]={...t,content:[...t.content.slice(0,r),l,...t.content.slice(r+1)]}}return a};e.exports.getFieldTypeFromMetadata=i,e.exports.getValidatedIssueFieldValuesForColumn=(e,t,r,i)=>{let l=new Map,n=(e,t)=>{t&&l.set(e,t)},o=e=>null!=e&&!isNaN(new Date(e.toString()).getTime()),u=e=>null!=e,c=E(s("CbMiC").FieldType.SHORT_TEXT,t,e,r,e=>null!=e&&"string"==typeof e&&e.trim().length>0,i);n(s("CbMiC").FieldType.SHORT_TEXT,c);let d=E(s("CbMiC").FieldType.PARAGRAPH,t,e,r,e=>null!=e&&"object"==typeof e,i);n(s("CbMiC").FieldType.PARAGRAPH,d);let m=E(s("CbMiC").FieldType.NUMBER,t,e,r,e=>null!=e&&!Number.isNaN(Number(e)),i);n(s("CbMiC").FieldType.NUMBER,m);let p=E(s("CbMiC").FieldType.DATE,t,e,r,o,i);n(s("CbMiC").FieldType.DATE,p);let g=E(s("CbMiC").FieldType.TIMESTAMP,t,e,r,o,i);n(s("CbMiC").FieldType.TIMESTAMP,g);let f=E(s("CbMiC").FieldType.USER,t,e,r,u,i);n(s("CbMiC").FieldType.USER,f);let C=E(s("CbMiC").FieldType.PRIORITY,t,e,r,e=>null!=e,i);n(s("CbMiC").FieldType.PRIORITY,C);let I=E(s("CbMiC").FieldType.COMPONENTS,t,e,r,e=>null!=e,i);n(s("CbMiC").FieldType.COMPONENTS,I);let b=E(s("CbMiC").FieldType.VERSIONS,t,e,r,e=>null!=e,i);n(s("CbMiC").FieldType.VERSIONS,b);let S=E(s("CbMiC").FieldType.PEOPLE,t,e,r,e=>Array.isArray(e)&&e.every(u),i);n(s("CbMiC").FieldType.PEOPLE,S);let y=E(s("CbMiC").FieldType.TEAM,t,e,r,e=>!!e?.toString().match(a),i);n(s("CbMiC").FieldType.TEAM,y);let h=E(s("CbMiC").FieldType.LABELS,t,e,r,e=>null!=e,i);n(s("CbMiC").FieldType.LABELS,h);let T=E(s("CbMiC").FieldType.PARENT,t,e,r,e=>null!=e,i);n(s("CbMiC").FieldType.PARENT,T);let k=E(s("CbMiC").FieldType.SINGLE_SELECT,t,e,r,e=>null!=e&&Array.isArray(e)&&1==e.length,i);n(s("CbMiC").FieldType.SINGLE_SELECT,k);let M=E(s("CbMiC").FieldType.MULTI_SELECT,t,e,r,e=>null!=e&&Array.isArray(e)&&e.length>0,i);return n(s("CbMiC").FieldType.MULTI_SELECT,M),l},e.exports.getClosestTableFromSelection=e=>{if(e&&e.rangeCount>0){let t=e.getRangeAt(0).commonAncestorContainer;for(t?.nodeType===Node.TEXT_NODE&&(t=t.parentElement);t&&t.nodeType===Node.ELEMENT_NODE;){if("TABLE"===t.tagName)return t;t=t.parentElement}}return null},e.exports.getRowIndicesWithContent=e=>{let t=b(e);return Array.from(e).slice(1).flatMap((e,s)=>Array.from(e.cells).some(e=>e.textContent?.trim()&&!e.classList.contains("ak-renderer-table-number-column"))?[s+ +!t]:[])},e.exports.mapTableToIssues=(e,t,a)=>{let i=0,l=t.rows,n=[],o=b(l);for(let t=1;t<l.length;t++){let u={id:"",summary:"",description:void 0,issueType:{iconUrl:"",name:"",id:""},rowIndex:t-!!o},c=!0,d=!0;for(let i of e){let e=i.column?l[t]?.cells[i.column.index]?.textContent?.trim():"";if(i.field)if("summary"===i.field.fieldId)u.summary=e||"Untitled",c=!e;else if("description"===i.field.fieldId){let a=i.column?l[t]?.cells[i.column.index]?.innerHTML:"";u.description=(0,s("eqKgz").htmlToADF)(a),d=!e}else if("assignee"===i.field.fieldId){let e=m(s("CbMiC").FieldType.USER,i.field.fieldId,i.column?l[t]?.cells[i.column.index]:null,a,i.field);e&&(u.assignee=e.id)}else if("labels"===i.field.fieldId)u.labels=m(s("CbMiC").FieldType.LABELS,i.field.fieldId,i.column?l[t]?.cells[i.column.index]:null,a,i.field)??[];else if("parent"===i.field.fieldId){let e=m(s("CbMiC").FieldType.PARENT,i.field.fieldId,i.column?l[t]?.cells[i.column.index]:null,a,i.field);e&&(u.parent=e)}else{let e=m(r(i),i.field.fieldId,i.column?l[t]?.cells[i.column.index]:null,a,i.field);u.additionalFields||(u.additionalFields=[]),null!==e&&u.additionalFields.push({field:i.field,value:e})}}c||d||(u.id=String(i++),n.push(u))}return n},e.exports.updateIssuesWithRowIndex=(e,t)=>{let s=e.errors.map(e=>e.failedElementNumber),a=t.filter((e,t)=>!s.includes(t));return e.issues.map((e,t)=>({...e,rowIndex:a[t]}))},e.exports.getJiraWorkItemKeysFromTable=e=>{let t=new Map;for(let s=0;s<e.rows.length;s++){let a=e.rows[s];for(let e=0;e<a.cells.length;e++){let s=(a.cells[e].textContent||"").trim().toUpperCase().match(S);s&&t.set(e,(t.get(e)??[]).concat(s.map(e=>e.trim().toUpperCase())))}}return t},e.exports.constructTableWithWorkItems=(e,t,s)=>{try{if("table"!==e.type||!Array.isArray(e.content))return null;let a=e.content.filter(e=>void 0!==e);if(0===a.length)return null;let r=a[0],i=+!!(Array.isArray(r?.content)&&I(r.content.slice(0))),l=new Map;for(let[e,s]of t)l.set(e+i,s);let n=h(a,l,s);if(!n||n===e.content)return null;return{...e,content:n}}catch{return null}}}),a("2ay9q",function(e,t){var a;(a={}).enabled="enabled",a.disabled="disabled",e.exports.saveCloudIdToLocalStorage=e=>{if(e?.selectedCloudId)try{s("17wUi").confluenceLocalStorageInstance.setItem(s("1UApO").PERSISTED_KEYS_ON_SERVER.PERSISTED_JIRA_CLOUD_ID_PREFERENCE,e.selectedCloudId)}catch(e){throw Error("Unable to save cloudId to localStorage")}},e.exports.getPersistedOverrideCloudId=()=>s("17wUi").confluenceLocalStorageInstance?.getItem(s("1UApO").PERSISTED_KEYS_ON_SERVER.PERSISTED_JIRA_CLOUD_ID_PREFERENCE),e.exports.getIsCreateIssueWithAiEnabledByUser=()=>"disabled"!==s("17wUi").confluenceLocalStorageInstance?.getItem(s("1UApO").keys.ISSUE_CREATE_WITH_AI),e.exports.setCreateIssueWithAiEnabledByUser=e=>{s("17wUi").confluenceLocalStorageInstance?.setItem(s("1UApO").keys.ISSUE_CREATE_WITH_AI,e?"enabled":"disabled")},e.exports.saveJiraConfigDetailsToLocalStorage=({selectedSite:e,selectedProject:t,selectedIssueType:a})=>{try{e&&t&&a&&s("17wUi").confluenceLocalStorageInstance.setItem(s("1UApO").PERSISTED_KEYS_ON_SERVER.PERSISTED_BULK_CREATE_JIRA_CONFIG_FOR_USER,{selectedSite:e,selectedProject:t,selectedIssueType:a})}catch(e){console.error(`Unable to set bulk create Jira config: ${e instanceof Error?e.message:String(e)}`)}}}),a("bImpr",function(t,a){var r=s("42omo");let i=(0,s("ecnYn").xcss)({paddingInline:"space.250",paddingBlockStart:"space.250"}),l=(0,s("ecnYn").xcss)({flexShrink:0});t.exports.IssueCreateWithAiToggle=({onChange:t,isDisabled:a=!1})=>{let{createAnalyticsEvent:n}=(0,s("inPa6").useAnalyticsEvents)(),o="issue-create-with-ai-toggle",[u,c]=(0,r.useState)((0,s("2ay9q").getIsCreateIssueWithAiEnabledByUser)()),d=(0,s("1mDVg").useAiIssueCreationEnablementState)(),[{pageMode:m,hasEditPermission:p}]=(0,s("1mDVg").useIssueCreateSidePanelContext)(),[{isCreatedFromActionItems:g,isCreatedFromTable:f,userChoseManualCreation:C}]=(0,s("hq2Sz").useBulkCreateContext)(),I=(0,s("hq2Sz").useSetUserChoseManualCreation)();(0,r.useEffect)(()=>{C&&u&&(0,s("9wGTI").fg)("confluence-ai-jira-work-create-fast-follows")&&c(!1)},[C,u]),(0,r.useEffect)(()=>{(0,s("2ay9q").setCreateIssueWithAiEnabledByUser)(u)});let E=(0,r.useCallback)(async()=>{let e=!u;c(e),(0,s("2ay9q").setCreateIssueWithAiEnabledByUser)(e),e&&C&&(0,s("9wGTI").fg)("confluence-ai-jira-work-create-fast-follows")&&I(!1),await new Promise(e=>setTimeout(e,250)),n({type:"sendUIEvent",data:{source:"issueCreateSidePanel",action:"toggled",actionSubject:"toggle",actionSubjectId:"issueCreateAiToggle",type:"ui",attributes:{newState:e?"enabled":"disabled",aiEnablement:d?.enablement,pageMode:m,hasEditPermission:p,isCreatedFromActionItems:g,isCreatedFromTable:f}}}).fire(),t(e)},[u,n,d?.enablement,m,t,p,g,f,I,C]);return e(r).createElement(s("dcJ7R").default,{xcss:i,alignBlock:"start",testId:"issue-create-side-panel.with-ai"},e(r).createElement(s("6f0Oj").default,{xcss:l},e(r).createElement(s("82gXq").default,{id:o,testId:"issue-create-side-panel.with-ai.toggle",isChecked:u,onChange:E,isDisabled:a})),e(r).createElement("label",{htmlFor:o},e(r).createElement(s("gtD4K").default,s("3E5yu").messages.sidePanelIssueCreateAiToggleLabel)))}}),a("7pE6f",function(e,t){let a=new(0,s("h9yJL").JSONTransformer);e.exports.adfToMarkdownPlus=function(e,t,r){void 0===t&&(t={}),t?.markdownPlus===void 0&&(t.markdownPlus=!0),t?.markdownPlusAvoidDuplicatedIdCounter===void 0&&(t.markdownPlusAvoidDuplicatedIdCounter=!0);let i=a;t.markdownPlusUseNextLayoutSection&&(i=new(0,s("h9yJL").JSONTransformer)((0,s("gktFz").createSchema)({...s("iyDxB").defaultSchemaConfig,customNodeSpecs:{layoutSection:s("hVXQj").layoutSectionWithSingleColumn}})));let l=i.parse(e),n=function(e){let t={};return!function e(s){if("mention"===s.type){var a,r;let e=(a=s).attrs&&"text"in(r=a.attrs)&&"id"in r&&"string"==typeof r.text&&"string"==typeof r.id?{text:a.attrs.text,id:a.attrs.id}:null;e&&(t[e.id]=e.text.replace("@",""))}s.content?.forEach(t=>{t&&e(t)})}(e),t}(i.encode(l)),{markdown:o,idMap:u}=(0,s("6eZqW").convertProsemirrorNodeToMarkdown)({node:l,featureToggles:t,mentionMap:n,idMap:r});return{markdown:o,idMap:u}}}),a("4sbrV",function(e,t){let a=new(0,s("h9yJL").JSONTransformer);e.exports.markdownPlusToAdf=function({markdown:e,idMap:t={},editorSchema:r,featureToggles:i={markdownPlus:!0}}){void 0===i&&(i={}),i?.markdownPlus===void 0&&(i.markdownPlus=!0);let l=(0,s("hAuc5").backendConvertMarkdownToProsemirrorNode)({markdown:e,schema:r||s("iyDxB").defaultSchema,idMap:t,featureToggles:i});return a.encode(l)}}),a("aXkRG",function(t,a){var r=s("42omo");let i=()=>e(r).createElement("svg",{width:"118",height:"97",viewBox:"0 0 118 97",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e(r).createElement("g",{clipPath:"url(#clip0_1257_61439)"},e(r).createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.33301 28.3123V96.881L25.1914 79.8548H84.7999V28.3123H5.33301Z",fill:"#BF63F3"}),e(r).createElement("path",{d:"M40.6277 30.3495C40.6277 25.4304 44.553 21.4886 49.4059 21.4886C54.2587 21.4886 58.184 25.4139 58.184 30.3495C58.184 32.8505 57.5877 33.9933 57.0412 34.722C56.3952 35.5667 55.5837 36.1629 54.1593 37.2064C53.9274 37.3886 53.6624 37.5708 53.3809 37.7695C51.6087 39.0779 49.3562 40.8667 47.6668 43.8314C45.9609 46.8126 45.0168 50.5558 45.0168 55.5079H53.7949C53.7949 51.6655 54.5071 49.5289 55.269 48.2205C56.0309 46.8789 57.0743 45.968 58.598 44.8417C58.7802 44.7092 58.979 44.5601 59.1943 44.4111C60.569 43.4173 62.5234 42.0095 63.9974 40.0717C65.9021 37.5873 66.9621 34.4736 66.9621 30.3495C66.9621 20.6439 59.1777 12.7104 49.4059 12.7104C39.634 12.7104 31.8496 20.6439 31.8496 30.3495V34.7386H40.6277V30.3495Z",fill:"#1868DB"}),e(r).createElement("path",{d:"M49.406 62.1165C46.3751 62.1165 43.9238 64.5677 43.9238 67.5986C43.9238 70.6296 46.3751 73.0808 49.406 73.0808C52.437 73.0808 54.8882 70.6296 54.8882 67.5986C54.8882 64.5677 52.437 62.1165 49.406 62.1165Z",fill:"#1868DB"}),e(r).createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M31.9489 28.3123H40.8596C40.6939 28.9582 40.6111 29.6538 40.6111 30.3494V34.7385H31.833V30.3494C31.833 29.6704 31.8661 28.9913 31.9489 28.3123Z",fill:"#09326C"}),e(r).createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M54.8882 67.5984C54.8882 70.6293 52.4369 73.0972 49.406 73.0972C46.375 73.0972 43.9072 70.6293 43.9072 67.5984C43.9072 64.5675 46.375 62.1162 49.406 62.1162C52.4369 62.1162 54.8882 64.5675 54.8882 67.5984Z",fill:"#09326C"}),e(r).createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M66.9619 30.3494C66.9619 34.4901 65.9019 37.5873 63.9972 40.0716C62.5232 42.0094 60.5688 43.4173 59.1941 44.411C58.9788 44.5766 58.78 44.7091 58.5979 44.8416C57.0741 45.9844 56.0307 46.8954 55.2688 48.2369C54.5069 49.5619 53.7947 51.6985 53.7947 55.5244H45.0166C45.0166 50.5723 45.9441 46.8291 47.65 43.8644C49.356 40.8998 51.6085 39.111 53.3641 37.786C53.6457 37.5873 53.9107 37.4051 54.1425 37.2229C55.5835 36.1629 56.3785 35.5832 57.0244 34.7385C57.5875 33.9932 58.1838 32.8504 58.1838 30.3494C58.1838 29.6538 58.101 28.9582 57.9354 28.3123H66.846C66.9288 28.9913 66.9619 29.6704 66.9619 30.3494Z",fill:"#09326C"}),e(r).createElement("path",{d:"M80.0122 22.0463C79.6799 22.0789 77.8184 13.4596 78.1559 9.83758C76.9474 9.23678 75.7989 7.52436 75.6751 5.62882C70.5183 2.41068 74.3806 11.5603 75.6468 14.3967C76.2719 12.3407 76.09 17.3947 76.7845 18.0977C76.7063 17.6783 78.3602 26.0497 79.7136 23.5492C79.9391 23.7906 80.3949 21.7647 80.0181 22.0492L80.0122 22.0463Z",fill:"#101214"}),e(r).createElement("path",{d:"M97.9714 11.2108C97.4794 9.37567 98.1356 7.71565 99.2924 6.08381C97.9034 -0.291475 93.8658 10.4331 92.9202 13.0451C92.9202 13.0451 91.164 17.598 91.09 17.0666C90.2879 17.4821 86.1799 23.9708 89.259 23.5153C90.0562 22.4885 90.6584 20.094 91.6197 20.0239C93.7172 19.3392 95.6045 13.1619 97.9685 11.2017L97.9714 11.2108Z",fill:"#101214"}),e(r).createElement("path",{d:"M114.75 26.5761C115.405 22.4193 108.013 26.2102 105.02 26.6553C105.02 26.6553 101.899 26.945 101.091 27.5785C101.545 27.5379 90.5256 29.2208 96.531 30.806C96.6829 30.737 100.499 30.1605 100.499 30.1605C105.624 30.8975 110.77 28.8288 114.753 26.57L114.75 26.5761Z",fill:"#101214"})),e(r).createElement("defs",null,e(r).createElement("clipPath",{id:"clip0_1257_61439"},e(r).createElement("rect",{width:"117",height:"97",fill:"white",transform:"translate(0.5)"})))),l=(0,s("ecnYn").xcss)({flexGrow:"1",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start",paddingInline:"space.800"}),n=(0,s("ecnYn").xcss)({paddingBlock:"space.300",font:'var(--ds-font-body-large, normal 400 16px/24px ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Ubuntu, "Helvetica Neue", sans-serif)',fontWeight:"var(--ds-font-weight-regular, 400)",color:"color.text.subtle"}),o=(0,s("ecnYn").xcss)({width:"100%",paddingBlock:"space.050"});t.exports.WorkItemCreationError=({creationSource:t,errorMessage:a,errorMessageValues:u,isCreatedWithAi:c,onTryAgain:d,onCreateManually:m})=>{let{createAnalyticsEvent:p}=(0,s("inPa6").useAnalyticsEvents)(),[{pageMode:g,hasEditPermission:f}]=(0,s("1mDVg").useIssueCreateSidePanelContext)(),[{isCreatedFromActionItems:C,isCreatedFromTable:I}]=(0,s("hq2Sz").useBulkCreateContext)();return(0,r.useEffect)(()=>{p({type:"sendScreenEvent",data:{name:c?"ai creation error screen":"creation error screen",source:t,attributes:{pageMode:g,hasEditPermission:f,isCreatedFromActionItems:C,isCreatedFromTable:I}}}).fire()},[p,t,g,c,f,C,I]),e(r).createElement(s("6f0Oj").default,{xcss:l},e(r).createElement(s("6f0Oj").default,null,e(r).createElement(i,null)),e(r).createElement(s("6f0Oj").default,{testId:"error-description",xcss:n},e(r).createElement(s("gtD4K").default,{...a,values:u})),d&&e(r).createElement(s("6f0Oj").default,{xcss:o},e(r).createElement(s("ccHMk").default,{testId:"error-try-again-button",onClick:d},e(r).createElement(s("gtD4K").default,s("3E5yu").messages.errorTryAgainButton))),m&&e(r).createElement(s("6f0Oj").default,{xcss:o},e(r).createElement(s("ccHMk").default,{testId:"error-create-manually-button",onClick:m},e(r).createElement(s("gtD4K").default,s("3E5yu").messages.errorCreateManuallyButton))))}}),a("74xbC",function(t,a){var r=s("42omo"),i=s("6bd6t");t.exports.IssueCreateAiFeedback=({contentId:t,entrypointId:a})=>{let[{aiState:l,aiAnalyticsContext:n}]=(0,s("1mDVg").useIssueCreateSidePanelContext)();return"loading"!==l?e(r).createElement(s("dpPtd").FlagsProvider,null,e(r).createElement(s("dchHi").FeedbackCollectorPropertiesProvider,{entrypointId:a},e(r).createElement(s("gdv5Z").default,{padding:"space.100"},e(r).createElement(i.SmartsFeedbackComponent,{analyticsProperties:{source:"confluenceHighlightIssueCreate",additionalAnalyticsAttributes:n},contentId:t})))):null}}),a("hiixe",function(t,a){var r=s("42omo");let i=(0,s("ecnYn").xcss)({borderTopColor:"color.border",borderTopStyle:"solid",borderTopWidth:"border.width",paddingTop:"space.100",paddingBottom:"space.100"}),l=(0,s("ecnYn").xcss)({paddingTop:"space.025",color:"color.text.subtlest",font:'var(--ds-font-body-small, normal 400 11px/16px ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Ubuntu, "Helvetica Neue", sans-serif)'});t.exports.AiSubFooter=()=>e(r).createElement(s("6f0Oj").default,{xcss:i},e(r).createElement(s("dcJ7R").default,{alignInline:"center",alignBlock:"center"},e(r).createElement(s("7p4As").default,{appearance:"subtle",spacing:"compact",iconBefore:t=>e(r).createElement(e(s("eXmBZ")),{...t,color:"var(--ds-text-subtlest, #6B6E76)",spacing:"none"}),href:"https://www.atlassian.com/trust/atlassian-intelligence",rel:"noopener",target:"_blank",testId:"issue-create-side-panel.ai-footer.disclaimer-text"},e(r).createElement(s("6f0Oj").default,{xcss:l},e(r).createElement(s("gtD4K").default,s("3E5yu").messages.sidePanelFooterDisclaimerText))),e(r).createElement(s("7p4As").default,{appearance:"subtle",spacing:"compact",iconAfter:t=>e(r).createElement(s("lAFHW").RovoIcon,{...t,appearance:"brand",size:"xsmall"}),href:"https://support.atlassian.com/organization-administration/docs/understand-atlassian-intelligence-features-in-products/",rel:"noopener",target:"_blank",testId:"issue-create-side-panel.ai-footer.powered-by-rovo-text"},e(r).createElement(s("6f0Oj").default,{xcss:l},e(r).createElement(s("gtD4K").default,s("3E5yu").messages.sidePanelFooterRovoText)))))}),a("dAg4H",function(e,t){var a=s("42omo"),r=s("5spQU");e.exports.useIsAIIssueCreationAllowed=({contentId:e,isBulkCreate:t=!1})=>{let[{currentSiteSelection:i,currentProjectSelection:l,isCreateManuallyPressed:n,pageMode:o,hasEditPermission:u},{setAiIssueCreationEnablement:c}]=(0,s("1mDVg").useIssueCreateSidePanelContext)(),[{currentJiraSite:d,currentJiraProject:m,isCreatedFromActionItems:p,isCreatedFromTable:g}]=(0,s("hq2Sz").useBulkCreateContext)(),{accessStatus:f,cloudId:C}=(0,s("bQm3c").useSessionData)(),{createAnalyticsEvent:I}=(0,s("inPa6").useAnalyticsEvents)(),{isAIEnabledForContent:E}=(0,s("7mpOv").useIsAIEnabledForContent)({contentId:e}),b=(0,s("1mDVg").useAiIssueCreationEnablementState)(),S=f===s("d9tcB").AccessStatus.LICENSED_USE_ACCESS||f===s("d9tcB").AccessStatus.LICENSED_ADMIN_ACCESS,y=(0,s("9wGTI").fg)("use_frontend_feature_encoding_sdk")?(0,r.isFeatureEnabled)("confluence","confluence-ai"):!(0,s("lzcvT").isFedRamp)(),h=S&&E&&y;return(0,a.useEffect)(()=>n?void c({isEnabled:!1}):h?void c({isEnabled:!0,enablement:"confluence"}):void(b?.isEnabled&&(0,s("9wGTI").fg)("confluence_ai_access_policy")&&c({isEnabled:!1,enablement:"confluence"}),(async()=>{let e=!d||!m?.projectTypeKey||C!==d.cloudId,a=!i||!l?.selectedProjectType||C!==i;if(t&&(0,s("9wGTI").fg)("confluence-create-work-items-from-action-items")?e:a)return c({isEnabled:!1});try{let e=t&&(0,s("9wGTI").fg)("confluence-create-work-items-from-action-items")?m?.projectTypeKey??"":l?.selectedProjectType??"",a=await (0,s("k9cgj").getJiraAiEnablement)(t&&(0,s("9wGTI").fg)("confluence-create-work-items-from-action-items")?d?.cloudId??"":i,s("2R8mu").MESSAGE_PROJECT_TYPE_TO_API_PROJECT_TYPE[e]);b?.enablement!="jira"||a?.isEnabled||I({type:"sendTrackEvent",data:{source:"confluenceHighlightIssueCreate",action:"disabled",actionSubject:"issueCreationAi",attributes:{pageMode:o,hasEditPermission:u,isCreatedFromActionItems:p,isCreatedFromTable:g}}}).fire(),c({isEnabled:a?.isEnabled??!1,enablement:a?.isEnabled?"jira":void 0})}catch{c({isEnabled:!1})}})()),[i,l?.selectedProjectType,c,b,h,I,n,C,o,u,d,m,t,p,g]),b}}),a("cSSgB",function(e,t){let a=e=>e.nodeType===Node.ELEMENT_NODE?e:e.parentElement,r=e=>{let t=a(e);return t?.closest("[data-task-local-id]")??null};e.exports.findActionItemElement=r,e.exports.includeEntireActionItemInSelection=e=>{if(!e||0===e.rangeCount)return e;let t=e.getRangeAt(0),{startContainer:s,endContainer:a}=t,i=r(s),l=r(a);if(i){let e=document.createRange();return e.selectNodeContents(i),e}if(l){let e=document.createRange();return e.selectNodeContents(l),e}return t},e.exports.getClosestActionListFromSelection=e=>{if(!e||0===e.rangeCount)return null;let t=e.getRangeAt(0),s=a(t.commonAncestorContainer);if(!s)return null;let r=Array.from(s.querySelectorAll('div[data-task-local-id]:not([data-task-local-id=""])')).find(e=>t.intersectsNode(e))??null;return Array.from(document.querySelectorAll('[aria-label="Action Item List"]')).find(e=>e.contains(r))??null},e.exports.mapActionItemsToIssues=e=>{let t=e?.querySelectorAll('div[data-task-local-id]:not([data-task-local-id=""]):not(:has([data-task-list-local-id]))'),a=[],r=0;return t.forEach(e=>{if(e.textContent?.trim()){let t={id:String(r),issueType:{iconUrl:"",name:"",id:""},rowIndex:r,summary:e.textContent.trim(),description:(0,s("eqKgz").htmlToADF)(e.innerHTML)};a.push(t)}r++}),a}}),a("2ViZo",function(e,t){var a,r=((a={}).None="none",a.Table="table",a.ActionItems="actionItems",a);let i=({actions:e,selectedTable:t,activeSelection:a,contentId:r,container:i,lastModified:l,setIsCreatedFromTable:n,setIsCreatedFromActionItems:o,convertSelectionToLegacyFormat:u})=>{e.setSelectedTable(t);let c=(0,s("1Q0l6").constructInsertStorageColumnTableRequestPayload)(r,u,(0,s("1Q0l6").getValidRange)(a?.getRangeAt(0)),i,l);return e.setInsertStorageColumnTableRequestPayload(c),n(!0),o(!1),e.setSelectedActionItems(void 0),e.setInsertMultipleStorageFragmentsRequestPayload(void 0),"table"},l=({actions:e,selectedActionList:t,contentId:a,container:r,lastModified:i,setIsCreatedFromTable:l,setIsCreatedFromActionItems:n,convertSelectionToLegacyFormat:o})=>{e.setSelectedActionItems(t);let u=t.querySelectorAll('div[data-task-local-id]:not([data-task-local-id=""]):not(:has([data-task-list-local-id]))'),c=[];u.forEach(e=>{let t=new Range;t.selectNodeContents(e);let a=(0,s("1Q0l6").getValidRangeForActionItem)(t);a&&c.push(a)});let d=(0,s("1Q0l6").constructInsertMultipleStorageFragmentsRequestPayload)(a,o,c,r,i);return e.setInsertMultipleStorageFragmentsRequestPayload(d),n(!0),l(!1),e.setSelectedTable(void 0),e.setInsertStorageColumnTableRequestPayload(void 0),"actionItems"};e.exports.BulkSelectionResult=r,e.exports.prepareBulkCreateFromSelection=({actions:e,activeSelection:t,contentId:a,pageMode:r,hasEditPermission:n,container:o,lastModified:u,setIsCreatedFromTable:c,setIsCreatedFromActionItems:d,convertSelectionToLegacyFormat:m})=>{let p=(0,s("cSSgB").getClosestActionListFromSelection)(t),g=(0,s("euVTc").getClosestTableFromSelection)(t);return g||p&&(0,s("9wGTI").fg)("confluence-create-work-items-from-action-items")?(e.setContentId(a),e.setPageMode(r),e.setHasEditPermission(n),g)?i({actions:e,selectedTable:g,activeSelection:t,contentId:a,container:o,lastModified:u,setIsCreatedFromTable:c,setIsCreatedFromActionItems:d,convertSelectionToLegacyFormat:m}):p&&(0,s("9wGTI").fg)("confluence-create-work-items-from-action-items")?l({actions:e,selectedActionList:p,contentId:a,container:o,lastModified:u,setIsCreatedFromTable:c,setIsCreatedFromActionItems:d,convertSelectionToLegacyFormat:m}):"none":"none"},e.exports.calculateExpectedIssueIndices=(e,t,a,r)=>e&&a?(0,s("euVTc").getRowIndicesWithContent)(a.rows):t&&r?(0,s("cSSgB").mapActionItemsToIssues)(r).map(e=>e.rowIndex??-1):[]}),a("UNr39",function(e,a){t(e.exports,"BULK_ISSUE_CREATE_SIDE_PANEL_ID",()=>s("3Fkx6").BULK_ISSUE_CREATE_SIDE_PANEL_ID),t(e.exports,"BULK_ISSUE_CREATE_SIDE_PANEL_WIDTH",()=>s("3Fkx6").BULK_ISSUE_CREATE_SIDE_PANEL_WIDTH),s("3Fkx6");let r=(0,s("jmjWc").LoadableAfterPaint)({__loadable_id__:"vnJZq",name:"BulkCreateSidePanel",loader:async()=>(await Promise.resolve(s("3Fkx6"))).BulkCreateSidePanel});e.exports.BulkCreateSidePanel=r}),a("3Fkx6",function(t,a){var r=s("42omo");let i=()=>{},l=({onClose:t,onSuccess:a,onFailure:l,analyticsSource:n,summary:o,descriptionAdf:u,isCreatedWithAi:c,isCreatedFromTable:d,isCreatedFromActionItems:m,issueTypeId:p,projectId:g,assigneeId:f,configuration:C,cloudId:I,additionalMappedFields:E})=>{let{cloudId:b}=(0,s("bQm3c").useSessionData)(),{createAnalyticsEvent:S}=(0,s("inPa6").useAnalyticsEvents)(),[{pageMode:y,hasEditPermission:h}]=(0,s("1mDVg").useIssueCreateSidePanelContext)(),T=(0,s("2ay9q").getPersistedOverrideCloudId)(),k=T!==b?T:void 0,M=k||I;return(0,r.useEffect)(()=>{S({type:"sendScreenEvent",data:{name:"linkCreateScreen",attributes:{isManuallyCreated:!c,isCreatedWithAi:c,isCreatedFromTable:d,isCreatedFromActionItems:m,pageMode:y,hasEditPermission:h},source:n}}).fire()},[c,d,m,S,n,y,h]),e(r).createElement(s("cfwlu").GicAnywhere,{cloudId:M,consumer:"confluence-highlight-issue-create",onInit:i,onSuccess:a,onClose:t,onFailure:l,summary:o,descriptionAdf:u,overrideCloudId:k,issueTypeId:p,projectId:g,assignee:f,isPayloadReady:!0,configuration:C,additionalMappedFields:E})},n=()=>{let[{currentJiraSite:e}]=(0,s("hq2Sz").useBulkCreateContext)();return(0,r.useCallback)(t=>{let a=e?.url;if(t.length>1){let e=t.map(e=>e.key).join(","),s=encodeURIComponent(`issueKey in (${e})`);return`${a}/issues/?jql=${s}`}return(0,s("1Q0l6").constructJiraIssueUrl)(a,t[0].key)},[e])},o=()=>{let{formatMessage:t}=(0,s("8C5kA").default)(),a=(0,s("aMxFD").useBulkCreateFlagsContainer)(),i=n(),{copyToClipboard:l}=(0,s("kfIha").useCopyToClipboard)(),o=(0,r.useCallback)(l=>{let n=i([{key:l.issueKey}]);a?.showFlag({id:"bulk-issue-create--single-issue-created-flag",type:"success-circle",title:t((0,s("9wGTI").fg)("confluence-issue-terminology-refresh")?s("3E5yu").messages.sidePanelSingleIssueCreateSuccessFlagTitleIssueTermRefresh:s("3E5yu").messages.sidePanelSingleIssueCreateSuccessFlagTitle,{issueKey:l.issueKey,issueSummary:l.summary,link:t=>e(r).createElement(s("auNCB").default,{href:n,target:"_blank"},t)}),close:"auto"})},[a,t,i]),u=(0,r.useCallback)((e,r,l)=>{let n=i(e);a?.showFlag({id:"bulk-issue-create--multiple-issues-created-flag",type:"success-circle",title:t((0,s("9wGTI").fg)("confluence-issue-terminology-refresh")?s("3E5yu").messages.sidePanelMultipleIssueCreateSuccessFlagTitleIssueTermRefresh:s("3E5yu").messages.sidePanelMultipleIssueCreateSuccessFlagTitle,{issueCount:e.length}),actions:[...l?[{content:t(s("3E5yu").messages.sidePanelMultipleIssueCreateFlagReloadToSeeLinks),onClick:r}]:[],{content:t(s("3E5yu").messages.sidePanelMultipleIssueCreateFlagViewIssue,{issueCount:e.length}),href:n,target:"_blank"}]})},[a,t,i]),c=(0,r.useCallback)(l=>{let n=i([{key:l.issueKey}]);a?.showFlag({id:"bulk-issue-create--single-issue-insert-link-failure-flag",type:"error",title:t(s("3E5yu").messages.sidePanelSingleIssueInsertLinkFailureFlagTitle,{issueKey:l.issueKey,issueSummary:l.summary,link:t=>e(r).createElement(s("auNCB").default,{href:n,target:"_blank"},t)}),close:"auto"})},[a,t,i]),d=(0,r.useCallback)(e=>{let r=i(e);a?.showFlag({id:"bulk-issue-create--multiple-issues-insert-link-failure-flag",type:"error",title:t((0,s("9wGTI").fg)("confluence-issue-terminology-refresh")?s("3E5yu").messages.sidePanelMultipleIssuesInsertLinkFailureFlagTitleIssueTermRefresh:s("3E5yu").messages.sidePanelMultipleIssuesInsertLinkFailureFlagTitle,{issueCount:e.length}),close:"auto",actions:[{content:t(s("3E5yu").messages.sidePanelMultipleIssueCreateFlagViewIssue,{issueCount:e.length}),href:r,target:"_blank"},{content:t(s("3E5yu").messages.sidePanelMultipleIssueCreateFlagCopyLink),onClick:()=>void l(r)}]})},[a,t,i,l]);return{triggerSingleIssueCreatedFlag:o,triggerMultipleIssuesCreatedFlag:u,triggerSingleIssueInsertLinkFailureFlag:c,triggerMultipleIssuesInsertLinkFailureFlag:d,triggerDocumentModifiedSingleIssueInsertLinkFailureFlag:(0,r.useCallback)(l=>{let n=i([{key:l.issueKey}]);a?.showFlag({id:"bulk-issue-create--document-modified-after-selection-single-insert-failure-flag",type:"error",title:t(s("3E5yu").messages.documentModifiedSingleIssueInsertLinkFailureFlagTitle,{issueKey:l.issueKey,issueSummary:l.summary,link:t=>e(r).createElement(s("auNCB").default,{href:n,target:"_blank"},t)}),close:"auto"})},[a,t,i]),triggerDocumentModifiedMultipleIssuesInsertLinkFailureFlag:(0,r.useCallback)(e=>{let r=i(e);a?.showFlag({id:"bulk-issue-create--document-modified-after-selection-multiple-issues-insert-failure-flag",type:"error",title:t(s("3E5yu").messages.documentModifiedMultipleIssuesInsertLinkFailureFlagTitle,{issueCount:e.length}),close:"auto",actions:[{content:t(s("3E5yu").messages.sidePanelMultipleIssueCreateFlagViewIssue,{issueCount:e.length}),href:r,target:"_blank"},{content:t(s("3E5yu").messages.sidePanelMultipleIssueCreateFlagCopyLink),onClick:()=>void l(r)}]})},[a,t,i,l])}},u=(0,s("ecnYn").xcss)({paddingInline:"space.100",font:'var(--ds-font-heading-small, normal 600 16px/20px ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Ubuntu, "Helvetica Neue", sans-serif)',fontWeight:"var(--ds-font-weight-medium, 500)",paddingBottom:"space.025"}),c=({children:t,onClose:a})=>{let i=(0,s("hq2Sz").useGetIsMissingColumnMappingError)();return e(r).createElement(s("6f0Oj").default,{paddingBlockEnd:"space.100"},e(r).createElement(s("bUlM5").default,{direction:"row",alignItems:"center"},e(r).createElement(s("1qfLF").default,{icon:()=>e(r).createElement(e(s("bPdpL")),{label:"back-icon",spacing:"none"}),appearance:"subtle",label:"close",onClick:a,isDisabled:i,testId:"close-bulk-issue-create-panel-button"}),e(r).createElement(s("7hXDW").default,{size:"medium",as:"h2"},e(r).createElement(s("6f0Oj").default,{xcss:u},t))))},d=(0,s("ecnYn").xcss)({flexGrow:"1"}),m=({isAiIssue:t=!1})=>{let a=(0,s("aMxFD").useAiBulkNavigationGotoPage)(),i=(0,s("hq2Sz").useSetSingleIssuesCreated)(),n=(0,s("hq2Sz").useSetNextIssueToEdit)(),u=(0,s("aMxFD").useAiBulkNavigationCurrentPage)(),{logSingleIssueCreateSuccess:m,logSingleIssueCreateFailure:p,logCreateSingleIssueClick:g}=(0,s("26Yin").useBulkCreateLoggingEvents)(),[{currentIssueId:f,currentJiraProject:C,currentJiraSite:I,bulkIssuesList:E,isCreatedWithAi:b,isCreatedFromTable:S,isCreatedFromActionItems:y}]=(0,s("hq2Sz").useBulkCreateContext)(),h=(0,s("hq2Sz").useGetIssueType)(),T=E.find(e=>e.id===f),{triggerSingleIssueCreatedFlag:k}=o(),M=(0,r.useCallback)(()=>{a("default")},[a]),A=(0,r.useCallback)(e=>{e||a("default")},[a]),F=(0,r.useCallback)(e=>{p(e)},[p]),P=(0,r.useCallback)(e=>{m(),g(e?.issueId?.toString()),k(e),(0,s("2ay9q").saveCloudIdToLocalStorage)(e);let t=(0,s("k9cgj").mapGICPayloadToCreateIssueResponse)(e);i({...t,summary:t.summary,rowIndex:T?.rowIndex}),n()},[k,m,i,n,g,T]);if(!T||!C||!h||!I)return null;let{summary:w,description:x,id:v,assignee:R,labels:j,parent:D}=T,L={...j?.length&&{labels:j},...D?.id&&{parent:D.id},...T.additionalFields?.reduce((e,t)=>(e[t.field.fieldId]=(0,s("k9cgj").convertToGICFieldValue)(t),e),{})??{}};return e(r).createElement(s("5Ew1A").SidePanelWrapper,{isOpen:"edit_issue"===u},e(r).createElement(s("1GzhS").default,{testId:"bulk-edit-content-wrapper",xcss:d},e(r).createElement(s("6f0Oj").default,{padding:"space.200"},e(r).createElement(c,{onClose:M},(0,s("9wGTI").fg)("confluence-issue-terminology-refresh")?e(r).createElement(s("gtD4K").default,s("3E5yu").messages.bulkCreateEditHeaderTextIssueTermRefresh):e(r).createElement(s("gtD4K").default,s("3E5yu").messages.bulkCreateEditHeaderText))),e(r).createElement(l,{key:`issue-id-${v}`,cloudId:I.cloudId,onSuccess:P,onFailure:F,onClose:A,analyticsSource:(0,s("26Yin").getSource)(S,y),summary:w,descriptionAdf:x,issueTypeId:h.id,configuration:{disableProjectDropdown:!0,displaySitePicker:!1},projectId:C.id,assigneeId:R,isCreatedWithAi:b,isCreatedFromTable:S,...Object.keys(L).length>0&&{additionalMappedFields:{...L,pid:C.id,issuetype:h.id,...x&&{description:x}}}}),t&&e(r).createElement(s("hiixe").AiSubFooter,null)))},p=({label:t,avatarUrl:a})=>e(r).createElement(s("u9agA").default,{space:"space.100",alignBlock:"center"},e(r).createElement(s("esRft").default,{appearance:"square",size:"xsmall",src:a}),e(r).createElement(s("iXCQx").default,{size:"medium"},t)),g=e=>({label:e.name,value:e,avatarUrl:(0,s("f0BVO").transformStargateUrl)(e.iconUrl)}),f=t=>e(r).createElement(s("3hOY6").components.Option,t,e(r).createElement(p,{label:t.label,avatarUrl:t.data.avatarUrl})),C=t=>e(r).createElement(s("3hOY6").components.SingleValue,t,e(r).createElement(p,{label:t.data.label,avatarUrl:t.data.avatarUrl})),I=t=>{let{formatMessage:a}=(0,s("8C5kA").default)(),{selectedIssueType:i,optionsIssueTypes:l}=(0,s("CbMiC").useIssueTypesState)(),{setSelectedIssueType:n}=(0,s("CbMiC").useIssueTypesActions)(),{isLoading:o}=(0,s("CbMiC").useIsConfigureLoading)(),u=(0,r.useMemo)(()=>l?.map(g),[l]),c=(0,r.useCallback)(e=>{e&&e.value!==i&&n(e.value)},[i,n]),d=i?g(i):null,{optionsIssueTypes:m=[],value:p,onChange:I,isLoading:E=!1,isDisabled:b=!1,label:S}=t,[y,h]=(0,r.useState)(p??null);(0,r.useEffect)(()=>{void 0!==p&&h(p)},[p]);let T=(0,r.useMemo)(()=>m.map(g),[m]);if(!(0,s("9wGTI").fg)("jira_ai_decouple_issue_create_fields"))return e(r).createElement(s("fb3kw").default,{name:"defaultIssueTypes",label:a((0,s("9wGTI").fg)("confluence-issue-terminology-refresh")?s("3E5yu").messages.bulkConfigureFormDefaultIssueTypeIssueTermRefresh:s("3E5yu").messages.bulkConfigureFormDefaultIssueType),testId:"work-create-issue-type-field"},({fieldProps:{id:t,...a}})=>e(r).createElement(r.Fragment,null,e(r).createElement(s("2gD2K").default,{inputId:t,...a,options:u,isDisabled:o||!d,isLoading:o,value:d,onChange:c,components:{Option:f,SingleValue:C}})));let k=e=>{e&&e.value&&e.value!==y&&(h(e.value),I?.(e.value))},M=y?g(y):null;return e(r).createElement(s("fb3kw").default,{name:"defaultIssueTypes",label:S??a((0,s("9wGTI").fg)("confluence-issue-terminology-refresh")?s("3E5yu").messages.bulkConfigureFormDefaultIssueTypeIssueTermRefresh:s("3E5yu").messages.bulkConfigureFormDefaultIssueType),testId:"work-create-issue-type-field",isRequired:t.isRequired??!1},({fieldProps:{id:t,...a}})=>e(r).createElement(s("bYRk6").default,{data:{attributes:{fieldName:"workCreateFormIssueTypeSelector"}}},e(r).createElement(s("2gD2K").default,{inputId:t,...a,value:M,options:T,onChange:k,isLoading:E,isDisabled:E||b||!M,components:{Option:f,SingleValue:C}})))},E=e=>({label:e.name,value:e,avatarUrl:(0,s("f0BVO").transformStargateUrl)(e.avatarUrls["48x48"])}),b=t=>e(r).createElement(s("3hOY6").components.Option,t,e(r).createElement(p,{label:t.label,avatarUrl:t.data.avatarUrl})),S=t=>e(r).createElement(s("3hOY6").components.SingleValue,t,e(r).createElement(p,{label:t.data.label,avatarUrl:t.data.avatarUrl})),y=t=>{let{formatMessage:a}=(0,s("8C5kA").default)(),{selectedProject:i,optionsRecentProjects:l,optionsAllProjects:n}=(0,s("CbMiC").useProjectsState)(),{setSelectedProject:o,setProjectSelectorQuery:u}=(0,s("CbMiC").useProjectsActions)(),{isLoading:c}=(0,s("CbMiC").useIsConfigureLoading)(),d=(0,r.useMemo)(()=>l&&l.length>0?[{label:a((0,s("6mKj3").expVal)("project-terminology-refresh","isEnabled",!1)?s("3E5yu").messages.bulkConfigureFormProjectSelectorRecentProjectsGalaxia:s("3E5yu").messages.bulkConfigureFormProjectSelectorRecentProjects),options:l.map(E)},{label:a((0,s("6mKj3").expVal)("project-terminology-refresh","isEnabled",!1)?s("3E5yu").messages.bulkConfigureFormProjectSelectorProjectsGalaxia:s("3E5yu").messages.bulkConfigureFormProjectSelectorProjects),options:n?.map(E)||[]}]:[{options:n?.map(E)||[]}],[l,n,a]),m=(0,r.useCallback)(e=>{e&&e.value!==i&&o(e.value)},[i,o]),p=(0,r.useRef)(null),g=(0,r.useCallback)(e=>{p.current&&clearTimeout(p.current),p.current=setTimeout(()=>{u(e)},300)},[u]),f=i?E(i):null,{optionsAllProjects:C=[],optionsRecentProjects:I=[],value:y,onChange:h,isLoading:T=!1,isDisabled:k=!1,onInputChange:M,labelProjectSelectorRecentProjects:A,labelProjectSelectorProjects:F}=t,[P,w]=(0,r.useState)(y??null),x=P?E(P):null,v=(0,r.useMemo)(()=>I&&I.length>0?[{label:A??a((0,s("6mKj3").expVal)("project-terminology-refresh","isEnabled",!1)?s("3E5yu").messages.bulkConfigureFormProjectSelectorRecentProjectsGalaxia:s("3E5yu").messages.bulkConfigureFormProjectSelectorRecentProjects),options:I.map(E)},{label:F??a((0,s("6mKj3").expVal)("project-terminology-refresh","isEnabled",!1)?s("3E5yu").messages.bulkConfigureFormProjectSelectorProjectsGalaxia:s("3E5yu").messages.bulkConfigureFormProjectSelectorProjects),options:C?.map(E)||[]}]:[{options:C?.map(E)||[]}],[I,C,a,A,F]);(0,r.useEffect)(()=>{void 0!==y&&y!==P&&w(y)},[y,P]);let R=e=>{if(!e||!e.value||e.value===P)return;let t=e?e.value:null;w(t),h?.(t)},j=(0,r.useRef)(null),D=(0,r.useCallback)(e=>{j.current&&clearTimeout(j.current),j.current=setTimeout(()=>{M?.(e)},300)},[M]);return(0,s("9wGTI").fg)("jira_ai_decouple_issue_create_fields")?e(r).createElement(s("fb3kw").default,{name:"projects",label:a((0,s("6mKj3").expVal)("project-terminology-refresh","isEnabled",!1)?s("3E5yu").messages.bulkConfigureFormProjectGalaxia:s("3E5yu").messages.bulkConfigureFormProject),testId:"work-create-project-field",isRequired:t.isRequired??!1},({fieldProps:{id:t,...a}})=>e(r).createElement(s("bYRk6").default,{data:{attributes:{fieldName:"workCreateFormProjectSelector"}}},e(r).createElement(s("2gD2K").default,{inputId:t,...a,value:x,options:v,onInputChange:D,onChange:R,isLoading:T,isDisabled:(0,s("9wGTI").fg)("jira_ai_fix_project_query_search")?k:k||T||!x,components:{Option:b,SingleValue:S}}))):e(r).createElement(s("fb3kw").default,{name:"projects",label:t.label??a((0,s("6mKj3").expVal)("project-terminology-refresh","isEnabled",!1)?s("3E5yu").messages.bulkConfigureFormProjectGalaxia:s("3E5yu").messages.bulkConfigureFormProject),testId:"work-create-project-field"},({fieldProps:{id:t,...a}})=>e(r).createElement(r.Fragment,null,e(r).createElement(s("2gD2K").default,{inputId:t,...a,isDisabled:c||!f,isLoading:c,onInputChange:g,value:f,options:d,onChange:m,components:{Option:b,SingleValue:S}})))},h=e=>({label:e.displayName,value:e}),T=t=>{let{formatMessage:a}=(0,s("8C5kA").default)(),{selectedAvailableSite:i,optionsAvailableSites:l}=(0,s("CbMiC").useAvailableSitesState)(),{setSelectedAvailableSite:n}=(0,s("CbMiC").useAvailableSitesActions)(),{isLoading:o}=(0,s("CbMiC").useIsConfigureLoading)(),u=(0,r.useMemo)(()=>l?.map(h),[l]),c=(0,r.useCallback)(e=>{e&&e.value!==i&&n(e.value)},[i,n]),{options:d=[],value:m,onChange:p,isLoading:g=!1,isDisabled:f=!1,label:C}=t,[I,E]=(0,r.useState)(m??null),b=(0,r.useMemo)(()=>d?.map(h),[d]),S=I?h(I):null;if((0,r.useEffect)(()=>{(0,s("9wGTI").fg)("jira_ai_decouple_issue_create_fields")&&void 0!==m&&E(m)},[m,E]),!(0,s("9wGTI").fg)("jira_ai_decouple_issue_create_fields"))return e(r).createElement(s("fb3kw").default,{name:"sites",label:a(s("3E5yu").messages.bulkConfigureFormSite),testId:"work-create-site-field"},({fieldProps:{id:t,...a}})=>e(r).createElement(r.Fragment,null,e(r).createElement(s("bYRk6").default,{data:{attributes:{fieldName:"workCreateFormSiteSelector"}}},e(r).createElement(s("2gD2K").default,{inputId:t,...a,value:i?h(i):null,options:u,onChange:c,isLoading:o,isDisabled:o}))));let y=e=>{if(!e||!e.value||e.value===I)return;let t=e?e.value:null;E(t),p?.(t)};return e(r).createElement(s("fb3kw").default,{name:"sites",label:C??a(s("3E5yu").messages.bulkConfigureFormSite),testId:"work-create-site-field",isRequired:t.isRequired??!1},({fieldProps:{id:t,...a}})=>e(r).createElement(r.Fragment,null,e(r).createElement(s("bYRk6").default,{data:{attributes:{fieldName:"workCreateFormSiteSelector"}}},e(r).createElement(s("2gD2K").default,{inputId:t,...a,value:S,options:b,onChange:y,isLoading:g,isDisabled:f||g}))))},k="table-column-select",M="issue-field-select",A={fieldId:"components",hasDefaultValue:!1,key:"components",name:"Components",operations:[],schema:{type:s("2R8mu").FieldMetadataSchemaType.COMPONENTS},required:!0},F=({index:t,mapping:a,tableColumnOptions:i,issueFieldOptions:l,onMappingChange:n,isLoading:o,isDisabled:u,pageMode:c,onAutoScrollOnMenuOpen:d})=>{let{deleteUnsavedColumnToFieldMapping:m}=(0,s("CbMiC").useMappingsActions)(),p=(0,r.useCallback)(()=>{d?.()},[d]),g=(0,r.useCallback)((e,t,s)=>{s&&n(e,{...a,[t]:s.value})},[a,n]),{createAnalyticsEvent:f}=(0,s("inPa6").useAnalyticsEvents)(),C=(0,r.useCallback)(e=>{o||m(e)},[o,m]),[{selectedTable:I}]=(0,s("1mDVg").useIssueCreateSidePanelContext)(),{mappingWorkItemTypes:E,mappingValidParentCandidates:b,mappingFieldAllowedValues:S,mappingAvailableComponents:y}=(0,s("CbMiC").useMappingsState)(),{selectedIssueType:h}=(0,s("CbMiC").useIssueTypesState)(),{formatMessage:T}=(0,s("8C5kA").default)(),F=(0,r.useMemo)(()=>{let e=[...l];return y&&y.length>0&&e.push({label:T(s("3E5yu").messages.bulkCreateConfigureBodyWorkFieldMappingsComponentsFieldOption),value:A}),e},[l,y,T]),P=(0,r.useMemo)(()=>{let e=new Map(S??[]);return y&&y.length>0&&e.set("components",y),e},[S,y]),w=(0,r.useMemo)(()=>F.filter(e=>{if(!a.column)return!1;let t=(0,s("euVTc").getValidatedIssueFieldValuesForColumn)(a.column,e.value.fieldId,I??new HTMLTableElement,{mappingWorkItemTypes:E??new Map,selectedIssueType:h,mappingValidParentCandidates:b??new(0,s("2R8mu").SimpleJiraIssuesSet),mappingFieldAllowedValues:P}),r=(0,s("euVTc").getFieldTypeFromMetadata)(e.value),i=t?.get(r);return null!=i&&(e.value.required?i.canBeRequired:i.fieldValues.length>0)}),[a,E,b,P,h,I,F]),x=(0,r.useCallback)(()=>{f({type:"sendUIEvent",data:{source:"confluenceHighlightActionsMenu",action:"clicked",actionSubject:"button",actionSubjectId:"deleteMapping",type:"ui",attributes:{pageMode:c}}}).fire()},[f,c]),v=(0,r.useCallback)(e=>{x(),C(e)},[x,C]);return e(r).createElement(s("eyWa4").default,{space:"space.100"},e(r).createElement(s("eyWa4").default,null,e(r).createElement(s("bfgIy").Label,{htmlFor:"table-column-select"},e(r).createElement(s("gtD4K").default,s("3E5yu").messages.bulkConfigureMapTableToIssueTableColumn)),e(r).createElement("div",null,e(r).createElement(s("2gD2K").default,{inputId:k,classNamePrefix:k,appearance:"default",options:i,defaultValue:i.find(e=>e.value===a.column),onChange:e=>g(t,"column",e),onMenuOpen:p,isLoading:o,isDisabled:u})),a.errors.column&&e(r).createElement(s("gQhRa").ErrorMessage,null," ",a.errors.column.message," ")),e(r).createElement(s("eyWa4").default,null,e(r).createElement(s("bfgIy").Label,{htmlFor:"issue-field-select"},(0,s("9wGTI").fg)("confluence-issue-terminology-refresh")?e(r).createElement(s("gtD4K").default,s("3E5yu").messages.bulkConfigureMapTableToIssueIssueFieldIssueTermRefresh):e(r).createElement(s("gtD4K").default,s("3E5yu").messages.bulkConfigureMapTableToIssueIssueField)),e(r).createElement("div",null,e(r).createElement(s("2gD2K").default,{inputId:M,classNamePrefix:M,appearance:"default",options:w,defaultValue:w.find(e=>e.value===a.field),onChange:e=>g(t,"field",e),onMenuOpen:p,isLoading:o,isDisabled:u||a.isDefaultMapping})),a.errors.field&&e(r).createElement(s("gQhRa").ErrorMessage,null," ",a.errors.field.message," ")),!a.isDefaultMapping&&e(r).createElement(s("eyWa4").default,{alignInline:"end"},e(r).createElement(s("1qfLF").default,{appearance:"subtle",icon:e(s("gKvd9")),onClick:()=>v(t),isDisabled:u,label:"delete",testId:"delete-additional-mapping"})))},P=e=>e.map(e=>({label:e.name,value:e})),w=(e,t)=>`${t}-${e.column?.index??"null"}-${e.field?.fieldId??"null"}`,x=(0,r.forwardRef)(({onAutoScrollOnMenuOpen:t},a)=>{let{formatMessage:i}=(0,s("8C5kA").default)(),[{pageMode:l}]=(0,s("1mDVg").useIssueCreateSidePanelContext)(),{isLoading:n}=(0,s("CbMiC").useIsConfigureLoading)(),{optionsColumns:o,optionsIssueTypeFields:u,unsavedColumnToFieldMappings:c,loadingIssueTypeFields:d}=(0,s("CbMiC").useMappingsState)(),{setUnsavedColumnToFieldMappings:m,addUnsavedColumnToFieldMapping:p}=(0,s("CbMiC").useMappingsActions)(),g=o?o.map(e=>({label:e.header,value:e})):[],f=u?P(u):[],C=n||d,{createAnalyticsEvent:I}=(0,s("inPa6").useAnalyticsEvents)(),E=(0,r.useMemo)(()=>{if(!c||!o)return c;let e=new Map(o.map(e=>[e.index,e]));return c.map(t=>{if(t.column){let s=e.get(t.column.index);if(s)return{...t,column:s}}return t})},[c,o]),b=(0,r.useCallback)((e,t)=>{c&&m(c.map((s,a)=>a===e?t:s))},[c,m]),S=(0,r.useMemo)(()=>E?new Set(E.map(e=>e.column?.index).filter(e=>void 0!==e)):new Set,[E]),y=(0,r.useMemo)(()=>{if(o){for(let e of o)if(!S.has(e.index))return e}},[o,S]),h=(0,r.useCallback)(()=>{C||(p({column:y,field:void 0,errors:{},isDefaultMapping:!1}),t?.())},[C,p,y,t]),T=(0,r.useCallback)(()=>{I({type:"sendUIEvent",data:{source:"confluenceHighlightActionsMenu",action:"clicked",actionSubject:"button",actionSubjectId:"addMapping",type:"ui",attributes:{pageMode:l}}}).fire()},[I,l]),k=(0,r.useCallback)(()=>{T(),h(),t?.()},[T,h,t]),M=()=>{if(!E)return!1;let e=!0,t=new Set;return m(E.map(a=>{let{column:r,field:l}=a,n={};if(r||(n.column={message:i(s("3E5yu").messages.bulkConfigureMapTableToIssueErrorColumnNotSelected)},e=!1),l){let a=l.fieldId;t.has(a)?(n.field={message:i(s("3E5yu").messages.bulkConfigureMapTableToIssueErrorFieldAlreadyMapped)},e=!1):t.add(a)}else n.field={message:i(s("3E5yu").messages.bulkConfigureMapTableToIssueErrorFieldNotSelected)},e=!1;return{...a,errors:n}})),e};return(0,r.useImperativeHandle)(a,()=>({validateMappings:M})),e(r).createElement(s("eyWa4").default,{space:"space.100"},e(r).createElement(s("7hXDW").default,{size:"small"},(0,s("9wGTI").fg)("confluence-issue-terminology-refresh")?e(r).createElement(s("gtD4K").default,s("3E5yu").messages.bulkConfigureMapTableToIssueTitleIssueTermRefresh):e(r).createElement(s("gtD4K").default,s("3E5yu").messages.bulkConfigureMapTableToIssueTitle)),e(r).createElement(s("iXCQx").default,{color:"color.text.subtlest"},(0,s("9wGTI").fg)("confluence-issue-terminology-refresh")?e(r).createElement(s("gtD4K").default,s("3E5yu").messages.bulkConfigureMapTableToIssueDescriptionIssueTermRefresh):e(r).createElement(s("gtD4K").default,s("3E5yu").messages.bulkConfigureMapTableToIssueDescription)),e(r).createElement(s("gdv5Z").default,{padding:"space.100"},e(r).createElement(s("eyWa4").default,{space:"space.100"},e(r).createElement(s("eyWa4").default,{space:"space.300"},E?.map((s,a)=>e(r).createElement(F,{key:w(s,a),index:a,mapping:s,tableColumnOptions:g,issueFieldOptions:f,onMappingChange:b,isLoading:d||C,isDisabled:d||C,pageMode:l,onAutoScrollOnMenuOpen:t}))))),e(r).createElement(s("gdv5Z").default,{padding:"space.0",paddingBlockStart:"space.025"},e(r).createElement(s("eyWa4").default,{alignInline:"start"},e(r).createElement(s("ccHMk").default,{appearance:"subtle",iconBefore:t=>e(r).createElement(e(s("g5gZt")),t),onClick:k,isDisabled:d||C},e(r).createElement(s("gtD4K").default,s("3E5yu").messages.bulkConfigureMapTableToIssueAddMapping)))))}),v=(0,s("ecnYn").xcss)({backgroundColor:"elevation.surface",position:"relative",flexShrink:0,bottom:"space.0",width:"100%","::before":{content:'""',position:"absolute",top:"space.0",left:"space.150",right:"space.150",height:"1px",backgroundColor:"elevation.surface",borderTopColor:"color.border",borderTopStyle:"solid",borderTopWidth:"border.width"}}),R=({onClose:t,closePanel:a,isSaveDisabled:i})=>{let l=(0,s("hq2Sz").useGetIsMissingColumnMappingError)();return e(r).createElement(s("6f0Oj").default,{paddingBlock:"space.200",paddingInline:"space.300",xcss:v},e(r).createElement(s("dcJ7R").default,{space:"space.100",alignInline:"end"},e(r).createElement(s("ccHMk").default,{appearance:"subtle",testId:"configure-cancel-button",onClick:l?a:t},e(r).createElement(s("gtD4K").default,s("3E5yu").messages.bulkConfigureFooterCancel)),e(r).createElement(s("ccHMk").default,{type:"submit",form:"configureForm",appearance:"primary",testId:"configure-save-button",isDisabled:i},e(r).createElement(s("gtD4K").default,s("3E5yu").messages.bulkConfigureFooterSave))))},j=(0,s("ecnYn").xcss)({flexGrow:1,overflowY:"auto"}),D=({closePanel:t=()=>{}})=>{let[{isCreatedWithAi:a,isCreatedFromTable:i,currentJiraSite:l,currentJiraProject:n,currentDefaultIssueType:o},{setCurrentJiraSite:u,setCurrentJiraProject:d,setCurrentDefaultIssueType:m}]=(0,s("hq2Sz").useBulkCreateContext)(),{formatMessage:p}=(0,s("8C5kA").default)(),{optionsAvailableSites:g,selectedAvailableSite:f}=(0,s("CbMiC").useAvailableSitesState)(),{setSelectedAvailableSite:C}=(0,s("CbMiC").useAvailableSitesActions)(),{selectedProject:E,optionsRecentProjects:b,optionsAllProjects:S}=(0,s("CbMiC").useProjectsState)(),{setSelectedProject:h,setProjectSelectorQuery:k}=(0,s("CbMiC").useProjectsActions)(),{selectedIssueType:M,optionsIssueTypes:A}=(0,s("CbMiC").useIssueTypesState)(),{setSelectedIssueType:F}=(0,s("CbMiC").useIssueTypesActions)(),{isLoading:P,isJiraError:w}=(0,s("CbMiC").useIsConfigureLoading)(),v=(0,s("CbMiC").useResetConfigureState)(),{setIsJiraError:D}=(0,s("CbMiC").useProjectsActions)(),{setUnsavedColumnToFieldMappings:L,initUnsavedColumnToFieldMappings:_,saveUnsavedColumnToFieldMapping:O}=(0,s("CbMiC").useMappingsActions)(),B=(0,s("aMxFD").useAiBulkNavigationGotoPage)(),N=(0,s("aMxFD").useAiBulkNavigationCurrentPage)(),q=(0,s("hq2Sz").useGetIsMissingColumnMappingError)(),U=(0,r.useRef)(null),G=(0,r.useRef)(null),W=(0,r.useCallback)(()=>{G.current&&setTimeout(()=>{let e=G.current;if(!e)return;let t=e.querySelector('[class*="select__menu"]');if(t){let s=e.getBoundingClientRect(),a=t.getBoundingClientRect().bottom,r=s.bottom;a>r&&e.scrollTo({top:e.scrollTop+(a-r),behavior:"smooth"})}else{let t=e.scrollHeight,s=e.clientHeight;t>s+e.scrollTop&&e.scrollTo({top:t-s,behavior:"smooth"})}},0)},[]),V=(0,r.useCallback)(()=>{if(!a){if(U.current?.validateMappings())O();else if(i)return}f&&u(f),E&&d(E),M&&m(M),(0,s("2ay9q").saveJiraConfigDetailsToLocalStorage)({selectedSite:f,selectedProject:E,selectedIssueType:M}),B("default")},[a,f,u,E,d,M,m,B,i,O]),J=(0,r.useCallback)(()=>{l&&n&&o&&v(l,n,o),a||(L(null),_()),D(!1),B("default")},[o,n,l,B,v,D,a,L,_]),K=P||!f||!E||!M,z=(0,s("9wGTI").fg)("confluence-issue-terminology-refresh")?s("3E5yu").messages.bulkCreateConfigureBodyTextIssueTermRefresh:s("3E5yu").messages.bulkCreateConfigureBodyText;return e(r).createElement(s("5Ew1A").SidePanelWrapper,{isOpen:"configure"===N},e(r).createElement(s("6f0Oj").default,{padding:"space.200",xcss:j,ref:G},e(r).createElement(s("1GzhS").default,{space:"space.100"},e(r).createElement(c,{onClose:J},e(r).createElement(s("gtD4K").default,s("3E5yu").messages.bulkConfigureHeaderText)),e(r).createElement(s("5dK2X").default,{color:"color.text.subtlest"},e(r).createElement(s("gtD4K").default,z)),w&&e(r).createElement(s("aoVih").default,{appearance:"error",testId:"bulkCreateErrorSectionMessage"},e(r).createElement(s("gtD4K").default,(0,s("6mKj3").expVal)("project-terminology-refresh","isEnabled",!1)?s("3E5yu").messages.bulkConfigureJiraErrorTextGalaxia:s("3E5yu").messages.bulkConfigureJiraErrorText)),e(r).createElement(s("1GzhS").default,{space:"space.300"},(0,s("9wGTI").fg)("platform-design_system_team-form_conversion")?e(r).createElement(s("fzqvY").default,{onSubmit:V,id:"configureForm"},(0,s("9wGTI").fg)("jira_ai_decouple_issue_create_fields")?e(r).createElement(e(r).Fragment,null,e(r).createElement(T,{options:g??[],value:f,onChange:e=>e&&C(e),isLoading:P,isDisabled:P,label:p(s("3E5yu").messages.bulkConfigureFormSite)}),e(r).createElement(y,{optionsAllProjects:S??[],optionsRecentProjects:b??[],value:E,onChange:e=>e&&h(e),isLoading:P,isDisabled:P,onInputChange:e=>k(e),label:p((0,s("6mKj3").expVal)("project-terminology-refresh","isEnabled",!1)?s("3E5yu").messages.bulkConfigureFormProjectGalaxia:s("3E5yu").messages.bulkConfigureFormProject),labelProjectSelectorRecentProjects:p((0,s("6mKj3").expVal)("project-terminology-refresh","isEnabled",!1)?s("3E5yu").messages.bulkConfigureFormProjectSelectorRecentProjectsGalaxia:s("3E5yu").messages.bulkConfigureFormProjectSelectorRecentProjects),labelProjectSelectorProjects:p((0,s("6mKj3").expVal)("project-terminology-refresh","isEnabled",!1)?s("3E5yu").messages.bulkConfigureFormProjectSelectorProjectsGalaxia:s("3E5yu").messages.bulkConfigureFormProjectSelectorProjects)}),e(r).createElement(I,{optionsIssueTypes:A??[],value:M,onChange:e=>e&&F(e),isLoading:P,isDisabled:P,label:p((0,s("9wGTI").fg)("confluence-issue-terminology-refresh")?s("3E5yu").messages.bulkConfigureFormDefaultIssueTypeIssueTermRefresh:s("3E5yu").messages.bulkConfigureFormDefaultIssueType)})):e(r).createElement(e(r).Fragment,null,e(r).createElement(T,null),e(r).createElement(y,null),e(r).createElement(I,null))):e(r).createElement(s("fzqvY").default,{onSubmit:V},({formProps:t})=>e(r).createElement("form",{id:"configureForm",...t},(0,s("9wGTI").fg)("jira_ai_decouple_issue_create_fields")?e(r).createElement(e(r).Fragment,null,e(r).createElement(T,{options:g??[],value:f,onChange:e=>e&&C(e),isLoading:P,isDisabled:P,label:p(s("3E5yu").messages.bulkConfigureFormSite)}),e(r).createElement(y,{optionsAllProjects:S??[],optionsRecentProjects:b??[],value:E,onChange:e=>e&&h(e),isLoading:P,isDisabled:P,onInputChange:e=>k(e),label:p((0,s("6mKj3").expVal)("project-terminology-refresh","isEnabled",!1)?s("3E5yu").messages.bulkConfigureFormProjectGalaxia:s("3E5yu").messages.bulkConfigureFormProject),labelProjectSelectorRecentProjects:p((0,s("6mKj3").expVal)("project-terminology-refresh","isEnabled",!1)?s("3E5yu").messages.bulkConfigureFormProjectSelectorRecentProjectsGalaxia:s("3E5yu").messages.bulkConfigureFormProjectSelectorRecentProjects),labelProjectSelectorProjects:p((0,s("6mKj3").expVal)("project-terminology-refresh","isEnabled",!1)?s("3E5yu").messages.bulkConfigureFormProjectSelectorProjectsGalaxia:s("3E5yu").messages.bulkConfigureFormProjectSelectorProjects)}),e(r).createElement(I,{optionsIssueTypes:A??[],value:M,onChange:e=>e&&F(e),isLoading:P,isDisabled:P,label:p((0,s("9wGTI").fg)("confluence-issue-terminology-refresh")?s("3E5yu").messages.bulkConfigureFormDefaultIssueTypeIssueTermRefresh:s("3E5yu").messages.bulkConfigureFormDefaultIssueType)})):e(r).createElement(e(r).Fragment,null,e(r).createElement(T,null),e(r).createElement(y,null),e(r).createElement(I,null)))),q&&e(r).createElement(s("aoVih").default,{appearance:"information",title:s("3E5yu").messages.bulkConfigureMissingTableCoulumnMappingErrorHeaderText.defaultMessage,testId:"bulkCreateWarningSectionMessage"},e(r).createElement(s("gtD4K").default,s("3E5yu").messages.bulkConfigureMissingTableCoulumnMappingErrorText)),!a&&(i||!(0,s("9wGTI").fg)("confluence-create-work-items-from-action-items"))&&e(r).createElement(x,{ref:U,onAutoScrollOnMenuOpen:W})))),e(r).createElement(R,{onClose:J,closePanel:t,isSaveDisabled:K}))},L=(e,t,s,a)=>{if(e)return s;if(t&&a){let e=a.cloneNode(!0);return e.deleteRow(0),e}return null},_=(e,t,a,i)=>{let{locale:l}=(0,s("8C5kA").default)(),[{isCreatedFromActionItems:n,isCreatedFromTable:o,expectedIssueIndices:u}]=(0,s("hq2Sz").useBulkCreateContext)(),[{selectedActionItems:c,selectedTable:d}]=(0,s("1mDVg").useIssueCreateSidePanelContext)(),m=(n||o)&&(0,s("9wGTI").fg)("confluence-create-work-items-from-action-items");return(0,r.useMemo)(()=>{let r=L(n,o,c,d),p=r?.innerHTML;return[{ai_feature_input:{context:{primary_text:m?" ":e,...m?{highlighted_text:p}:{},input_mime_type:"text/markdown",source_ari:t},source:"CONFLUENCE",locale:l,suggested_issues_config:{max_issues:m?u.length:10,suggested_issue_field_types:[{issue_type:"Task",fields:[{field_name:"Summary",field_type:"Short-Text"},{field_name:"Description",field_type:"Paragraph"}]}]},sourceType:"string"}},{apiPath:"v2/ai-feature/jira/issue/source-type/documentation/suggestions/stream",enablePartialJson:!1,skip:!e||!a,headers:{"x-experience-id":"ai-issue-create-confluence-bulk","x-product":i&&(0,s("9wGTI").fg)("confluence-create-work-items-from-action-items")?i:"confluence"}}]},[n,o,c,d,e,t,a,i,l,m,u.length])},O=()=>{let[{bulkIssuesList:e,isCreatedFromActionItems:t,isCreatedFromTable:a,expectedIssueIndices:i,aiState:l},{setBulkIssuesList:n}]=(0,s("hq2Sz").useBulkCreateContext)(),o=(0,s("1mDVg").useAiIssueCreationEnablementState)(),[u,c]=(0,r.useState)(""),[d,m]=(0,r.useState)(void 0),[p,g]=(0,r.useState)(s("hq2Sz").AiStates.LOADING),{logAiStreamingBackendFailed:f,logAiNoResultsGenerated:C,logAiInvalidResultsGenerated:I}=(0,s("26Yin").useBulkCreateLoggingEvents)(),{cloudId:E}=(0,s("bQm3c").useSessionData)(),[b]=(0,s("ep3mz").useContentType)(),[S]=(0,s("ep3mz").usePageContentId)(),y=S??"",{pageAri:h}=(0,s("3j1mV").useConfluencePageAri)(E,y,b??""),T=(t||a)&&(0,s("9wGTI").fg)("confluence-create-work-items-from-action-items"),k=(0,r.useRef)(0),M=(0,r.useRef)(!1),A=(0,r.useRef)(l);l===s("hq2Sz").AiStates.LOADING&&A.current===s("hq2Sz").AiStates.ERROR&&p===s("hq2Sz").AiStates.ERROR&&(0,s("9wGTI").fg)("confluence-ai-jira-work-create-fast-follows")&&(g(s("hq2Sz").AiStates.LOADING),c(""),m(void 0),M.current=!1),A.current=l,(0,s("xQxzY").useQuery)((0,s("eSUdr").default)`query useAIAgentStreamingDataBulkIssueADFQuery($contentId:ID!){singleContent(id:$contentId){id body{atlas_doc_format{value}}}}`,{variables:{contentId:y},onError:e=>{g(s("hq2Sz").AiStates.ERROR)},fetchPolicy:"network-only",onCompleted:e=>{let t=e?.singleContent?.body?.atlas_doc_format?.value;if(t)try{let e=JSON.parse(t),{markdown:a,idMap:r}=(0,s("7pE6f").adfToMarkdownPlus)(e);if(!a)return void g(s("hq2Sz").AiStates.ERROR);c(a),m(r)}catch(e){g(s("hq2Sz").AiStates.ERROR)}},skip:p!==s("hq2Sz").AiStates.LOADING});let[F,P]=_(u,h??"",!0,...(0,s("9wGTI").fg)("confluence-create-work-items-from-action-items")?[o?.enablement]:[]),[{content:w,responseState:x,error:v},R]=(0,s("d3UlG").useConvoAIStreaming)(F,P);(0,r.useEffect)(()=>{u&&x!==s("kAaxz").ConvoAIResponseState.FinalResponse&&!M.current&&(R(),M.current=!0)},[u,x,R]);let j=(0,r.useMemo)(()=>{try{return w?JSON.parse(w):{suggested_issues:[]}}catch{return{suggested_issues:[]}}},[w]);return(0,r.useEffect)(()=>{let e=()=>({iconUrl:"",name:"",id:""});switch(x){case s("kAaxz").ConvoAIResponseState.Initialization:(0,s("9wGTI").fg)("confluence-create-work-items-from-action-items")&&g(s("hq2Sz").AiStates.LOADING),n([]);break;case s("kAaxz").ConvoAIResponseState.AnswerPart:break;case s("kAaxz").ConvoAIResponseState.FinalResponse:try{if(j?.suggested_issues?.length===0)C(),g(s("hq2Sz").AiStates.ERROR);else if(j?.suggested_issues?.length!==i.length&&T)I(),g(s("hq2Sz").AiStates.ERROR);else{var t;let a;t=j?.suggested_issues,a=0,n(t.map(t=>({rowIndex:T?i[a++]:void 0,id:String(k.current++),summary:t.field_values.Summary,description:(0,s("4sbrV").markdownPlusToAdf)({markdown:t.field_values.Description,idMap:d}),issueType:e()}))),g(s("hq2Sz").AiStates.IDLE)}}catch(e){g(s("hq2Sz").AiStates.ERROR),f(e)}break;case s("kAaxz").ConvoAIResponseState.Error:g(s("hq2Sz").AiStates.ERROR),f(v)}},[j,d,x,k,v,w,t,a,i,T,I,f,C,n]),{content:e,currentAiState:p,responseState:x}},B=()=>{let[,{setAiState:e}]=(0,s("hq2Sz").useBulkCreateContext)(),{currentAiState:t}=O(),{isLoading:a}=(0,s("CbMiC").useIsConfigureLoading)();(0,r.useEffect)(()=>{t===s("hq2Sz").AiStates.IDLE&&a||e(t)},[t,e,a])},N=(0,s("7aRa9").withFlags)(({flags:e})=>{let t=(0,s("aMxFD").useSetBulkCreateFlagsContainer)();return(0,r.useEffect)(()=>{t(e)},[e,t]),null}),q=()=>{let e=(0,s("hq2Sz").useSetIssueTypeFields)(),[t,a]=(0,r.useState)(!1),[i,l]=(0,r.useState)(null),{selectedAvailableSite:n}=(0,s("CbMiC").useAvailableSitesState)(),{selectedProject:o}=(0,s("CbMiC").useProjectsState)(),{selectedIssueType:u}=(0,s("CbMiC").useIssueTypesState)(),{setOptionsIssueTypeFields:c,setLoadingIssueTypeFields:d,setFieldAllowedValues:m}=(0,s("CbMiC").useMappingsActions)();return(0,r.useEffect)(()=>{(async()=>{if(n&&o&&u){a(!0),d(!0);try{let t=await (0,s("k9cgj").fetchIssuesMetadata)({cloudId:n.cloudId,projectId:o.id,issueTypeId:u.id}),a=new Map;if(t){let s=[],r=[];for(let e of t.fields)e.required?s.push(e):r.push(e),e.allowedValues&&Array.isArray(e.allowedValues)&&a.set(e.fieldId,e.allowedValues);e({requiredFields:s,optionalFields:r}),c([...s,...r]),m(a)}}catch(e){U(e)&&l(e.message)}finally{a(!1),d(!1)}}})()},[n,o,u,e,c,d,m]),{isLoading:t,error:i}},U=e=>e instanceof Error,G=()=>{let{formatMessage:e}=(0,s("8C5kA").default)(),[{currentJiraSite:t,insertStorageFragmentRequestPayload:a,singleIssuesCreated:i,isCreatedWithAi:l,isCreatedFromActionItems:n,isCreatedFromTable:u,selectedTableAdf:c}]=(0,s("hq2Sz").useBulkCreateContext)(),[{insertMultipleStorageFragmentsRequestPayload:d,insertStorageColumnTableRequestPayload:m,pageMode:p,hasEditPermission:g,editorAPI:f}]=(0,s("1mDVg").useIssueCreateSidePanelContext)(),{columnToFieldMappings:C}=(0,s("CbMiC").useMappingsState)(),{triggerSingleIssueInsertLinkFailureFlag:I,triggerMultipleIssuesInsertLinkFailureFlag:E,triggerMultipleIssuesCreatedFlag:b,triggerDocumentModifiedSingleIssueInsertLinkFailureFlag:S,triggerDocumentModifiedMultipleIssuesInsertLinkFailureFlag:y}=o(),h=(0,s("hq2Sz").useResetSingleIssuesCreated)(),{logRequestFailed:T,logIssueInsertionFailure:k}=(0,s("26Yin").useBulkCreateLoggingEvents)(),M=e((0,s("9wGTI").fg)("confluence-issue-terminology-refresh")?s("3E5yu").messages.bulkCreateIssueInsertionHeadingIssueTermRefresh:s("3E5yu").messages.bulkCreateIssueInsertionHeading),A=(0,s("dPJCf").useRouteDataRef)().current?.href,F=(0,r.useCallback)((e,a)=>{let r=(0,s("1Q0l6").bulkConstructSmartlinkTags)(e.map(e=>(0,s("1Q0l6").constructJiraIssueUrl)(t?.url,e.key)));return a?.selectedText!==M?`${(0,s("1Q0l6").constructHeading)(M)}<br/>${r}`:`<p>${r}</p>`},[t?.url,M]),P=(0,r.useCallback)((e,a)=>{if((0,s("9wGTI").fg)("confluence-create-work-items-from-action-items")){let r=new Map(e.filter(e=>void 0!==e.rowIndex).map(e=>[String(e.rowIndex),e]));return a.filter(e=>r.has(e.rowIndex)).map(e=>{let a=r.get(e.rowIndex);return{...e,xmlModification:(0,s("1Q0l6").constructBreakContainerTag)((0,s("1Q0l6").constructSmartlinkTag)((0,s("1Q0l6").constructJiraIssueUrl)(t?.url,a.key)))}})}let r=new Set(e.map(e=>String(e.rowIndex)));return a.filter(e=>r.has(e.rowIndex)).map((a,r)=>({...a,xmlModification:(0,s("1Q0l6").constructBreakContainerTag)((0,s("1Q0l6").constructSmartlinkTag)((0,s("1Q0l6").constructJiraIssueUrl)(t?.url,e[r].key)))}))},[t?.url]),w=(0,r.useCallback)(e=>e.filter(e=>void 0!==e.rowIndex).map(e=>{let a=(0,s("1Q0l6").constructSmartlinkTag)((0,s("1Q0l6").constructJiraIssueUrl)(t?.url,e.key));return{rowIndex:Number(e.rowIndex),xmlInsertion:a}}),[t?.url]),x=(0,r.useCallback)(()=>{let e=M.split(" ").join("-"),[t,s]=(A??"").split("#");return s?`${t}#${e}`:`${A}#${e}`},[A,M]),v=(0,r.useCallback)(()=>{window.location.href=x(),window.location.reload()},[x]),R=(u||n)&&(0,s("9wGTI").fg)("confluence-create-work-items-from-action-items"),j=(0,r.useCallback)((e,t)=>{"document-changed"===e.message&&(0,s("9wGTI").fg)("confluence-bulk-work-create-error-messaging")?1===t.length?S({issueKey:t[0].key,summary:t[0].summary}):y(t):1===t.length?(I({issueKey:t[0].key,summary:t[0].summary}),T({requestName:"jiraSingleIssueLinkInsertion",errorMessage:e.message})):(E(t),T({requestName:"jiraMultipleIssueLinkInsertion",errorMessage:e.message})),(0,s("6mKj3").expVal)("confluence-bulk-work-create-editor","isEnabled",!1)&&k(t.length,e)},[k,T,y,S,E,I]),D=(0,r.useCallback)((e,a)=>{let r=!1;(0,s("1Q0l6").updateLastFetchTimeIfNotViewMode)(a,p);let i=Promise.resolve(!1);if(l&&!R)i=(0,s("1Q0l6").insertContentAtSelectionEnd)(a);else if(n)i=(0,s("1Q0l6").insertMultipleContentAtSelectionEnd)(a);else if(u){let r=(0,s("1Q0l6").getSummaryInsertionColumn)(C,l);i=(0,s("1Q0l6").insertWorkItemsIntoTable)({createdIssues:e,currentJiraSiteUrl:t?.url,pageMode:p,selectedTableAdf:c,editorAPI:f,payload:a,summaryInsertionColumn:r})}i.then(e=>{if(!1===e)throw Error("Failed to insert storage")}).then(()=>{r=!(0,s("6mKj3").expVal)("confluence-bulk-work-create-editor","isEnabled",!1)||"view"===p,(0,s("6mKj3").expVal)("confluence-bulk-work-create-editor","isEnabled",!1)||h()}).catch(t=>{j(t,e)}).finally(()=>{(0,s("6mKj3").expVal)("confluence-bulk-work-create-editor","isEnabled",!1)&&h(),b(e,v,r)})},[n,u,l,R,p,v,h,b,j,t?.url,f,C,c]),L=(0,r.useCallback)(()=>{i.length>0&&!g?(b(i,v,!1),h()):a&&l&&i.length>0?(a.xmlModification=F(i,a),D(i,a)):m&&(!l||(0,s("9wGTI").fg)("confluence-create-work-items-from-action-items"))&&i.length>0?(m.cellModifications=w(i),D(i,m)):!u&&n&&i.length>0&&d&&(!l||(0,s("9wGTI").fg)("confluence-create-work-items-from-action-items"))&&D(i,{pageId:d.pageId,lastFetchTime:d.lastFetchTime,fragments:P(i,d.fragments)})},[i,g,a,l,m,u,n,d,b,v,h,F,D,w,P]);return{constructAnchorLinkToHeading:x,constructXmlModification:F,constructXmlModifications:P,constructCellModifications:w,addSingleIssuesToPage:L}},W=e=>{let t=(0,s("hq2Sz").useCloseAndAddIssuesToPage)(),{addSingleIssuesToPage:a}=G(),i=(0,s("hq2Sz").useResetCloseAndAddIssuesToPage)();(0,r.useEffect)(()=>{t&&(a(),e(),i())},[t,e,a,i])},V=()=>{let t=(0,s("aMxFD").useErrorMessage)();if(!t)return null;let{createdCount:a,failedCount:i}=t,l=(0,s("9wGTI").fg)("confluence-issue-terminology-refresh")?s("3E5yu").messages.sidePanelIssueCreatePartialErrorMessageIssueTermRefresh:s("3E5yu").messages.sidePanelIssueCreatePartialErrorMessage,n=(0,s("9wGTI").fg)("confluence-issue-terminology-refresh")?s("3E5yu").messages.sidePanelIssueCreateErrorMessageIssueTermRefresh:s("3E5yu").messages.sidePanelIssueCreateErrorMessage,o=0!==a?e(r).createElement(s("gtD4K").default,l):e(r).createElement(s("gtD4K").default,{...n,values:{issuesCount:i}});return e(r).createElement(s("aoVih").default,{appearance:"error",testId:"bulkCreateErrorSectionMessage"},o)},J=["description","issuetype","project","summary","reporter"],K=()=>{let{columnToFieldMappings:e,optionsIssueTypeFields:t}=(0,s("CbMiC").useMappingsState)();return(0,r.useMemo)(()=>{let s=new Set(e?.map(e=>e.field?.fieldId).filter(e=>void 0!==e));return(t??[]).filter(e=>e.required&&!s.has(e.fieldId)&&!J.includes(e.key))},[e,t])},z="create-bulk-issues",H=()=>{let[{currentJiraSite:e}]=(0,s("hq2Sz").useBulkCreateContext)(),[t,a]=(0,r.useState)(!1),[i,l]=(0,r.useState)(null),{logRequestFailed:n}=(0,s("26Yin").useBulkCreateLoggingEvents)(),o=(0,s("hq2Sz").useSetError)();return{createBulkIssuesHandler:(0,r.useCallback)(async({issueBody:t,onComplete:r,onFailure:i,rowIndices:u})=>{if(e&&e.cloudId){a(!0),l(null);try{let a=await (0,s("k9cgj").createBulkIssues)({cloudId:e.cloudId,issueBody:t});a?(u&&u.length>0&&(a.issues=(0,s("euVTc").updateIssuesWithRowIndex)(a,u)),l(a),r(a)):(i("Empty response"),n({requestName:z,errorMessage:"Failed to create issue: Empty from response call to bulk create"}),o(s("hq2Sz").ErrorStates.BULK_CREATION))}catch(e){i(e),n({requestName:z,errorMessage:`Failed to create issue ${e.message}`}),o(s("hq2Sz").ErrorStates.BULK_CREATION)}finally{a(!1)}}},[e,n,o]),loading:t,response:i}},Y=({issue:e,issueType:t,project:s})=>{let a={description:e.description,issuetype:{id:t.id},project:{id:s.id},summary:e.summary,...e.assigneeUserId&&{assignee:{id:e.assigneeUserId}},...e.parentIssueLink&&{parent:{key:e.parentIssueLink,id:e.parentIssueLink}},...e.labels&&{labels:e.labels},...e.parent&&{parent:{key:e.parent.key,id:e.parent.id}}};return e.additionalFields&&e.additionalFields.forEach(e=>{a[e.field.fieldId]=e.value}),a},Q=()=>{let[{bulkIssuesList:e,currentJiraProject:t}]=(0,s("hq2Sz").useBulkCreateContext)(),{createBulkIssuesHandler:a,loading:i,response:l}=H(),n=(0,s("hq2Sz").useGetIssueType)(),o=(0,s("hq2Sz").useSetSingleIssuesCreated)();return{createIssueHandler:(0,r.useCallback)(async({issueId:s,onComplete:r,onFailure:i})=>{let l=e.find(e=>e.id===s);l&&t&&a({issueBody:{issueUpdates:[{fields:Y({issue:l,issueType:n,project:t})}]},onComplete:e=>{let t=e.issues?.[0];if(t){let e={...t,summary:l.summary,rowIndex:l.rowIndex};o(e),r(e)}},onFailure:i})},[e,t,a,n,o]),loading:i,response:l}},$=({issueId:t})=>{let a=(0,s("hq2Sz").useSetCurrentIssueId)(),i=(0,s("hq2Sz").useRemoveBulkIssue)(),l=K().length>0,{createIssueHandler:n,loading:u}=Q(),{triggerSingleIssueCreatedFlag:c}=o(),d=(0,s("aMxFD").useSetErrorMessage)(),{logCreateSingleIssueClick:m,logSingleIssueCreateSuccess:p,logIssueCreationFailed:g,logSidePanelIssueRemoved:f}=(0,s("26Yin").useBulkCreateLoggingEvents)(),C=l||u,I=(0,r.useCallback)(e=>{let s;e.stopPropagation(),d(null),n({issueId:t,onComplete:({key:e,summary:a,id:r})=>{p(),i(t),s=r,c({issueKey:e,summary:a})},onFailure:e=>{g(1,e),d({createdCount:0,failedCount:1})}}),m(s)},[t,i,n,c,d,m,p,g]),E=(0,r.useCallback)(e=>{e.stopPropagation(),f(),d(null),i(t)},[t,i,d,f]),b=(0,r.useCallback)(()=>{d(null),a(t)},[t,a,d]);return e(r).createElement(s("u9agA").default,{alignBlock:"center",space:"space.050"},e(r).createElement(s("1qfLF").default,{appearance:"subtle",icon:t=>e(r).createElement(e(s("cvXh8")),{...t,color:"var(--ds-icon, #292A2E)",spacing:"none"}),isDisabled:C,label:"Accept",onClick:I,testId:"bulk-create-issue-card-accept-action"}),e(r).createElement(s("1qfLF").default,{appearance:"subtle",icon:t=>e(r).createElement(e(s("hmuev")),{...t,color:"var(--ds-icon, #292A2E)",spacing:"none"}),isDisabled:u,label:"Discard",onClick:E,testId:"bulk-create-issue-card-discard-action"}),e(r).createElement(s("1qfLF").default,{appearance:"subtle",icon:t=>e(r).createElement(e(s("1Zr9M")),{...t,color:"var(--ds-icon, #292A2E)",spacing:"none"}),isDisabled:u,label:"Edit",onClick:b,testId:"bulk-create-issue-card-edit-action"}))},X=(0,s("ecnYn").xcss)({backgroundColor:"elevation.surface.raised",boxShadow:"elevation.shadow.raised",borderRadius:"radius.small",cursor:"pointer",padding:"space.100",margin:"space.025"}),Z=(0,s("ecnYn").xcss)({minHeight:"80px"}),ee=(0,s("ecnYn").xcss)({minHeight:"32px"}),et=({children:t,onIssueClick:a,onMouseEnter:i,onMouseLeave:l})=>e(r).createElement(s("2W0qg").default,{xcss:X,onClick:a,onMouseEnter:i,onMouseLeave:l},t),es=({issue:{id:t,summary:a,description:i},issueType:l})=>{let{formatMessage:n}=(0,s("8C5kA").default)(),o=(0,s("aMxFD").useAiBulkNavigationGotoPage)(),u=(0,s("hq2Sz").useSetCurrentIssueId)(),[c,d]=(0,r.useState)(!1),m=(0,r.useCallback)(()=>{o("edit_issue"),u(t)},[o,t,u]),p=(0,r.useCallback)(()=>void d(!0),[d]),g=(0,r.useCallback)(()=>void d(!1),[d]);return e(r).createElement(et,{onIssueClick:m,onMouseEnter:p,onMouseLeave:g},e(r).createElement(s("1GzhS").default,{xcss:Z,space:"space.200",spread:"space-between"},e(r).createElement(s("dcJ7R").default,{alignBlock:"center",space:"space.100"},e(r).createElement(s("5dK2X").default,{maxLines:2},a)),e(r).createElement(s("dcJ7R").default,{alignBlock:"center",spread:"space-between"},e(r).createElement(s("dcJ7R").default,{alignBlock:"center",space:"space.100"},e(r).createElement(s("dcJ7R").default,{alignBlock:"center",space:"space.050",xcss:ee},e(r).createElement(s("esRft").default,{appearance:"square",size:"xsmall",src:l.iconUrl}),e(r).createElement(s("5dK2X").default,{color:"color.text.subtlest",weight:"medium",size:"small"},l.name)),i&&e(r).createElement(e(s("6bJyJ")),{label:n(s("3E5yu").messages.issueCardDescriptionIconLabel),color:"var(--ds-icon, #292A2E)",testId:"bulk-create-issue-card-description-icon"})),c&&e(r).createElement($,{issueId:t}))))},ea=(0,s("ecnYn").xcss)({flexGrow:1,overflowY:"auto"}),er=()=>{let t=(0,s("aMxFD").useAiBulkNavigationGotoPage)(),[{bulkIssuesList:a,currentJiraSite:i,currentJiraProject:l,isCreatedWithAi:n,isCreatedFromTable:o,isCreatedFromActionItems:u,aiResultViewedFiredOnce:c,aiState:d,expectedIssueIndices:m,error:p,userChoseManualCreation:g},{setAiResultViewedFiredOnce:f,setIsCreatedWithAi:C,setAiState:I,setExpectedIssueIndices:E,setError:b,setBulkIssuesList:S}]=(0,s("hq2Sz").useBulkCreateContext)(),[{pageMode:y,hasEditPermission:h,contentId:T,selectedTable:k,selectedActionItems:M}]=(0,s("1mDVg").useIssueCreateSidePanelContext)(),{trackAIInteractionInit:A}=(0,s("fYQcF").useAIEventsInstrumentation)(),{logAiResultViewed:F}=(0,s("26Yin").useBulkCreateLoggingEvents)(),P=K().length>0,[w,x]=(0,r.useState)(!1),v=(0,s("hq2Sz").useSetUserChoseManualCreation)(),R=(0,s("1mDVg").useAiIssueCreationEnablementState)(),j="loading"===d,D="error"===d&&p===s("hq2Sz").ErrorStates.ISSUE_GENERATION,L=(0,s("hq2Sz").useGetIssueType)();(0,s("dAg4H").useIsAIIssueCreationAllowed)({contentId:T,isBulkCreate:!0}),(0,r.useEffect)(()=>{if(R?.isEnabled&&(u||o)&&(0,s("9wGTI").fg)("confluence-create-work-items-from-action-items")){let e=(0,s("2ViZo").calculateExpectedIssueIndices)(o,u,k,M);if(E(e),x(!0),g&&(0,s("9wGTI").fg)("confluence-ai-jira-work-create-fast-follows"))C(!1),I("idle");else{let t=(0,s("2ay9q").getIsCreateIssueWithAiEnabledByUser)()&&e.length>0&&e.length<=10;C(t),t||I("idle")}}else x(!1)},[u,o,R?.isEnabled,C,I,E,k,M,g]);let _=(0,r.useCallback)(e=>{e.preventDefault(),t("configure")},[t]);(0,r.useEffect)(()=>{n&&a.length>0&&!c&&(F(a.length),f(!0))},[n,a,F,c,f]);let O=(0,r.useCallback)(e=>{b(s("hq2Sz").ErrorStates.EMPTY),S([]),v(e)},[b,S,v]),B=(0,r.useCallback)((e=!1)=>{e&&O(!0),C(!1),I("idle"),x(!1)},[C,I,O]),N=(0,r.useCallback)((e=!1)=>{e&&O(!1),C(!0),I("loading"),x(!1)},[C,I,O]),q=(0,r.useCallback)(e=>{e?(A({attributes:{pageMode:y,hasEditPermission:h,aiEnablement:R?.enablement}}),N()):B()},[N,B,y,h,R?.enablement,A]),U=()=>o?"table":u?"list":"other",G=a.length>50,W=m.length>10;if((0,s("9wGTI").fg)("confluence-ai-jira-work-create-fast-follows")){if(j)return e(r).createElement(s("6f0Oj").default,{padding:"space.200",paddingBlockStart:"space.100",xcss:ea},e(r).createElement(s("1GzhS").default,{space:"space.200"},e(r).createElement(s("5FJ5W").IssueCreateAiLoading,{loadingType:"bulk"})));if(D)return e(r).createElement(s("aXkRG").WorkItemCreationError,{creationSource:s("26Yin").BULK_ISSUE_CREATE_SOURCE,errorMessage:s("hq2Sz").ErrorMessageMap[p](),onTryAgain:()=>N(!0),onCreateManually:()=>B(!0),isCreatedWithAi:!0});let t=!!i&&!!l&&a.length>0,n=w&&W&&!G&&(0,s("9wGTI").fg)("confluence-create-work-items-from-action-items")?e(r).createElement(s("aoVih").default,{title:s("3E5yu").messages.moreThanTenAIWorkItemsSectionMessageTitle.defaultMessage},e(r).createElement(s("5dK2X").default,null,e(r).createElement(s("gtD4K").default,{...s("3E5yu").messages.moreThanTenAIWorkItemsSectionMessageDescription,values:{context:U()}}))):null,c=w?e(r).createElement(s("bImpr").IssueCreateWithAiToggle,{onChange:q,isDisabled:m.length>10&&(0,s("9wGTI").fg)("confluence-create-work-items-from-action-items")}):null,d=t?e(r).createElement(s("dcJ7R").default,{space:"space.050"},e(r).createElement(s("5dK2X").default,{color:"color.text.subtlest",weight:"semibold"},e(r).createElement(s("gtD4K").default,s("3E5yu").messages.jiraSiteHeading)),e(r).createElement(s("5dK2X").default,{color:"color.text.subtlest"},i.displayName)):null,g=t?e(r).createElement(s("dcJ7R").default,{space:"space.050"},e(r).createElement(s("5dK2X").default,{color:"color.text.subtlest",weight:"semibold"},e(r).createElement(s("gtD4K").default,(0,s("6mKj3").expVal)("project-terminology-refresh","isEnabled",!1)?s("3E5yu").messages.jiraProjectHeadingGalaxia:s("3E5yu").messages.jiraProjectHeading)),e(r).createElement(s("5dK2X").default,{color:"color.text.subtlest"},l.name)):null,f=t?e(r).createElement(s("6f0Oj").default,null,e(r).createElement(s("ccHMk").default,{spacing:"compact",testId:"bulk-create-configure-button",onClick:_},e(r).createElement(s("gtD4K").default,s("3E5yu").messages.bulkCreateConfigureButtonText))):null,C=P?e(r).createElement(s("aoVih").default,{title:s("3E5yu").messages.requiredFieldsSectionMessageTitle.defaultMessage},e(r).createElement(s("5dK2X").default,null,(0,s("9wGTI").fg)("confluence-issue-terminology-refresh")?e(r).createElement(s("gtD4K").default,s("3E5yu").messages.requiredFieldsSectionMessageDescriptionIssueTermRefresh):e(r).createElement(s("gtD4K").default,s("3E5yu").messages.requiredFieldsSectionMessageDescription))):null,I=(o||u&&(0,s("9wGTI").fg)("confluence-create-work-items-from-action-items"))&&G?e(r).createElement(s("aoVih").default,{title:s("3E5yu").messages.moreThanFiftyWorkItemsSectionMessageTitle.defaultMessage},e(r).createElement(s("5dK2X").default,null,e(r).createElement(s("gtD4K").default,{...s("3E5yu").messages.moreThanFiftyWorkItemsSectionMessageDescription,values:{context:U()}}))):null,E=t?e(r).createElement(s("1GzhS").default,{space:"space.100"},a.map(t=>e(r).createElement(es,{key:t.id,issue:t,issueType:L}))):null;return e(r).createElement(s("6f0Oj").default,{padding:"space.200",paddingBlockStart:"space.100",xcss:ea},e(r).createElement(s("1GzhS").default,{space:"space.200"},n,c,e(r).createElement(s("1GzhS").default,{space:"space.100"},e(r).createElement(V,null),d,g,f,C,I),E))}return e(r).createElement(s("6f0Oj").default,{padding:"space.200",paddingBlockStart:"space.100",xcss:ea},e(r).createElement(s("1GzhS").default,{space:"space.200"},!j&&w&&W&&!G&&(0,s("9wGTI").fg)("confluence-create-work-items-from-action-items")&&e(r).createElement(s("aoVih").default,{title:s("3E5yu").messages.moreThanTenAIWorkItemsSectionMessageTitle.defaultMessage},e(r).createElement(s("5dK2X").default,null,e(r).createElement(s("gtD4K").default,{...s("3E5yu").messages.moreThanTenAIWorkItemsSectionMessageDescription,values:{context:U()}}))),!j&&w&&e(r).createElement(s("bImpr").IssueCreateWithAiToggle,{onChange:q,isDisabled:m.length>10&&(0,s("9wGTI").fg)("confluence-create-work-items-from-action-items")}),j&&e(r).createElement(s("5FJ5W").IssueCreateAiLoading,{loadingType:"bulk"}),e(r).createElement(s("1GzhS").default,{space:"space.100"},e(r).createElement(V,null),i&&e(r).createElement(s("dcJ7R").default,{space:"space.050"},e(r).createElement(s("5dK2X").default,{color:"color.text.subtlest",weight:"semibold"},e(r).createElement(s("gtD4K").default,s("3E5yu").messages.jiraSiteHeading)),e(r).createElement(s("5dK2X").default,{color:"color.text.subtlest"},i.displayName)),l&&e(r).createElement(s("dcJ7R").default,{space:"space.050"},e(r).createElement(s("5dK2X").default,{color:"color.text.subtlest",weight:"semibold"},e(r).createElement(s("gtD4K").default,(0,s("6mKj3").expVal)("project-terminology-refresh","isEnabled",!1)?s("3E5yu").messages.jiraProjectHeadingGalaxia:s("3E5yu").messages.jiraProjectHeading)),e(r).createElement(s("5dK2X").default,{color:"color.text.subtlest"},l.name)),e(r).createElement(s("6f0Oj").default,null,e(r).createElement(s("ccHMk").default,{spacing:"compact",testId:"bulk-create-configure-button",onClick:_},e(r).createElement(s("gtD4K").default,s("3E5yu").messages.bulkCreateConfigureButtonText))),P&&e(r).createElement(s("aoVih").default,{title:s("3E5yu").messages.requiredFieldsSectionMessageTitle.defaultMessage},e(r).createElement(s("5dK2X").default,null,(0,s("9wGTI").fg)("confluence-issue-terminology-refresh")?e(r).createElement(s("gtD4K").default,s("3E5yu").messages.requiredFieldsSectionMessageDescriptionIssueTermRefresh):e(r).createElement(s("gtD4K").default,s("3E5yu").messages.requiredFieldsSectionMessageDescription))),(o||u&&(0,s("9wGTI").fg)("confluence-create-work-items-from-action-items"))&&G&&e(r).createElement(s("aoVih").default,{title:s("3E5yu").messages.moreThanFiftyWorkItemsSectionMessageTitle.defaultMessage},e(r).createElement(s("5dK2X").default,null,e(r).createElement(s("gtD4K").default,{...s("3E5yu").messages.moreThanFiftyWorkItemsSectionMessageDescription,values:{context:U()}})))),e(r).createElement(s("1GzhS").default,{space:"space.100"},a.map(t=>e(r).createElement(es,{key:t.id,issue:t,issueType:L})))))},ei=(0,s("ecnYn").xcss)({flexShrink:0}),el=(0,s("ecnYn").xcss)({paddingInline:"space.100",font:'var(--ds-font-heading-small, normal 600 16px/20px ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Ubuntu, "Helvetica Neue", sans-serif)',fontWeight:"var(--ds-font-weight-medium, 500)",paddingBottom:"space.025"}),en=({onClose:t})=>e(r).createElement(s("6f0Oj").default,{padding:"space.200",paddingBlockEnd:"space.100",paddingInlineStart:"space.300",xcss:ei},e(r).createElement(s("bUlM5").default,{direction:"row",justifyContent:"space-between",alignItems:"center"},e(r).createElement(s("7hXDW").default,{size:"medium",as:"h2"},e(r).createElement(s("bUlM5").default,{direction:"row",justifyContent:"space-between",alignItems:"center"},e(r).createElement(s("6f0Oj").default,null,e(r).createElement(s("lAFHW").JiraIcon,{size:"small",appearance:"brand"})),e(r).createElement(s("6f0Oj").default,{xcss:el},(0,s("9wGTI").fg)("confluence-issue-terminology-refresh")?e(r).createElement(s("gtD4K").default,s("3E5yu").messages.bulkCreateHeaderTextIssueTermRefresh):e(r).createElement(s("gtD4K").default,s("3E5yu").messages.bulkCreateHeaderText)))),e(r).createElement(s("1qfLF").default,{icon:()=>e(r).createElement(e(s("hmuev")),{label:"close-icon",spacing:"none"}),appearance:"subtle",label:"close",onClick:t,testId:"close-issue-create-panel-button"}))),eo=()=>{let[{bulkIssuesList:e,currentJiraProject:t}]=(0,s("hq2Sz").useBulkCreateContext)(),{createBulkIssuesHandler:a,loading:i,response:l}=H(),n=(0,s("hq2Sz").useGetIssueType)();return{createAllIssuesHandler:(0,r.useCallback)(async({onComplete:s,onFailure:r})=>{if(t&&0!==e.length)a({issueBody:{issueUpdates:e.map(e=>({fields:Y({issue:e,issueType:n,project:t})}))},onComplete:({issues:t,errors:a})=>{let r=a.map(t=>e?.[t.failedElementNumber]?.id);s({createdIssueIDs:e.filter(e=>!r.includes(e.id)).map(e=>e.id),createdIssues:t,failedIssueIDs:r})},onFailure:r,rowIndices:e.filter(e=>void 0!==e.rowIndex).map(e=>Number(e.rowIndex))})},[t,e,a,n]),loading:i,response:l}},eu=(0,s("ecnYn").xcss)({paddingTop:"space.050"}),ec=({onClose:t,onCreateAll:a})=>{let{createAllIssuesHandler:i,loading:l}=eo(),[{currentJiraSite:n,bulkIssuesList:u,insertStorageFragmentRequestPayload:c,singleIssuesCreated:d,selectedTableAdf:m,isCreatedWithAi:p,isCreatedFromActionItems:g,isCreatedFromTable:f},{removeBulkIssueList:C}]=(0,s("hq2Sz").useBulkCreateContext)(),[{insertMultipleStorageFragmentsRequestPayload:I,insertStorageColumnTableRequestPayload:E,pageMode:b,hasEditPermission:S,editorAPI:y}]=(0,s("1mDVg").useIssueCreateSidePanelContext)(),{triggerMultipleIssuesCreatedFlag:h,triggerSingleIssueInsertLinkFailureFlag:T,triggerMultipleIssuesInsertLinkFailureFlag:k,triggerDocumentModifiedSingleIssueInsertLinkFailureFlag:M,triggerDocumentModifiedMultipleIssuesInsertLinkFailureFlag:A}=o(),{columnToFieldMappings:F}=(0,s("CbMiC").useMappingsState)(),P=(0,s("aMxFD").useSetErrorMessage)(),{logCreateAllClick:w,logMultipleIssueCreateSuccess:x,logIssueCreationFailed:v,logIssueInsertionFailure:R}=(0,s("26Yin").useBulkCreateLoggingEvents)(),{constructAnchorLinkToHeading:j,constructXmlModification:D,constructXmlModifications:L,constructCellModifications:_}=G(),O=(0,s("hq2Sz").useResetSingleIssuesCreated)(),B=(0,r.useCallback)(()=>{window.location.href=j(),window.location.reload()},[j]),N=K().length>0,q=0===u.length||N||(f||g&&(0,s("9wGTI").fg)("confluence-create-work-items-from-action-items"))&&u.length>50,U=(0,r.useCallback)((e,t)=>{e?.message==="document-changed"&&(0,s("9wGTI").fg)("confluence-bulk-work-create-error-messaging")?1===t.length?M({issueKey:t[0].key,summary:t[0].summary}):A(t):1===t.length?T({issueKey:t[0].key,summary:t[0].summary}):k(t),(0,s("6mKj3").expVal)("confluence-bulk-work-create-editor","isEnabled",!1)&&R(t.length,e)},[R,A,M,k,T]),W=(0,r.useCallback)((e,t)=>{let a=!1;(0,s("1Q0l6").updateLastFetchTimeIfNotViewMode)(t,b);let r=Promise.resolve(!1);if(!p||(f||g)&&(0,s("9wGTI").fg)("confluence-create-work-items-from-action-items")){if(g&&(0,s("9wGTI").fg)("confluence-create-work-items-from-action-items"))r=(0,s("1Q0l6").insertMultipleContentAtSelectionEnd)(t);else if(f){let a=(0,s("1Q0l6").getSummaryInsertionColumn)(F,p);r=(0,s("1Q0l6").insertWorkItemsIntoTable)({createdIssues:e,currentJiraSiteUrl:n?.url,pageMode:b,selectedTableAdf:m,editorAPI:y,payload:t,summaryInsertionColumn:a})}}else r=(0,s("1Q0l6").insertContentAtSelectionEnd)(t);r.then(e=>{if(!1===e)throw Error("Failed to insert storage")}).then(()=>{a=!(0,s("6mKj3").expVal)("confluence-bulk-work-create-editor","isEnabled",!1)||"view"===b}).catch(t=>{U(t,e)}).finally(()=>{(0,s("6mKj3").expVal)("confluence-bulk-work-create-editor","isEnabled",!1)&&O(),h(e,B,a)})},[g,f,p,b,B,h,m,n?.url,y,F,O,U]),V=(0,r.useCallback)(()=>{w(),P(null),i({onComplete:({createdIssues:e,createdIssueIDs:t,failedIssueIDs:r})=>{x(t.length),p&&c&&S?(c.xmlModification=D([...e,...d],c),W(e,c)):(!p||(0,s("9wGTI").fg)("confluence-create-work-items-from-action-items"))&&f&&E&&S?(E.cellModifications=_([...e,...d]),W([...e,...d],E)):!f&&g&&I&&S&&(0,s("9wGTI").fg)("confluence-create-work-items-from-action-items")?W([...e,...d],{pageId:I.pageId,lastFetchTime:I.lastFetchTime,fragments:L([...e,...d],I.fragments)}):h(e,B,!1),C(t),0!==r.length?(v(r.length),P({createdCount:t.length,failedCount:r.length})):a()},onFailure:e=>{v(u.length,e),P({createdCount:0,failedCount:u.length})}})},[w,P,i,x,S,g,I,E,p,c,f,C,D,d,W,_,L,h,B,v,a,u]);return e(r).createElement(s("dcJ7R").default,{space:"space.150",xcss:eu},e(r).createElement(s("ccHMk").default,{appearance:"subtle",onClick:t,testId:"bulk-create-button-group-cancel"},e(r).createElement(s("gtD4K").default,s("3E5yu").messages.bulkCreateCancelFooterButton)),e(r).createElement(s("ccHMk").default,{appearance:"primary",isDisabled:q,isLoading:l,onClick:V,testId:"bulk-create-button-group-create-all"},e(r).createElement(s("gtD4K").default,s("3E5yu").messages.bulkCreateCreateAllFooterButton)))};var ed=s("74xbC");let em=(0,s("ecnYn").xcss)({backgroundColor:"elevation.surface",flexShrink:0,position:"relative","::before":{content:'""',position:"absolute",top:"space.0",left:"space.150",right:"space.150",height:"1px",backgroundColor:"elevation.surface",borderTopColor:"color.border",borderTopStyle:"solid",borderTopWidth:"border.width"}}),ep=(0,s("ecnYn").xcss)({paddingTop:"space.150",paddingBottom:"space.150",paddingLeft:"space.200",paddingRight:"space.200"}),eg=({onClose:t,onCreateAll:a})=>{let[i]=(0,s("ep3mz").usePageContentId)();return e(r).createElement(s("1GzhS").default,{xcss:em},e(r).createElement(s("dcJ7R").default,{alignInline:"center",grow:"fill",spread:"space-between",xcss:ep},e(r).createElement(ed.IssueCreateAiFeedback,{contentId:i??"",entrypointId:"bfca508d-e2bb-4436-a060-3fa27bdce78f"}),e(r).createElement(ec,{onClose:t,onCreateAll:a})),e(r).createElement(s("hiixe").AiSubFooter,null))},ef=(0,s("ecnYn").xcss)({width:"100%",height:"100%",display:"flex",flexDirection:"column",flexWrap:"nowrap"}),eC=({onClose:t})=>{let{logCancelAiPanel:a}=(0,s("26Yin").useBulkCreateLoggingEvents)(),{addSingleIssuesToPage:i}=G(),[{aiState:l,error:n},o]=(0,s("hq2Sz").useBulkCreateContext)(),u=(0,r.useCallback)(()=>{a(),i(),(0,s("6mKj3").expVal)("confluence-bulk-work-create-editor","isEnabled",!1)||o.resetAIBulkCreateState(),t()},[a,t,i,o]),c=l===s("hq2Sz").AiStates.LOADING,d=n!==s("hq2Sz").ErrorStates.EMPTY,m=n===s("hq2Sz").ErrorStates.ISSUE_GENERATION,p=!c&&!d,g=d&&(!(0,s("9wGTI").fg)("confluence-ai-jira-work-create-fast-follows")||!c&&!m),f=(0,s("9wGTI").fg)("confluence-ai-jira-work-create-fast-follows")?!c&&!g:p;return e(r).createElement(s("5Ew1A").SidePanelWrapper,null,e(r).createElement(s("1uJpg").RainbowLoadingSidebar,{isShown:c},e(r).createElement(s("1GzhS").default,{xcss:ef},e(r).createElement(en,{onClose:u}),c&&e(r).createElement(s("5FJ5W").IssueCreateAiLoading,{loadingType:"bulk"}),g&&e(r).createElement(s("aXkRG").WorkItemCreationError,{creationSource:s("26Yin").BULK_ISSUE_CREATE_SOURCE,errorMessage:s("hq2Sz").ErrorMessageMap[n](),isCreatedWithAi:!0}),f&&e(r).createElement(er,null),p&&e(r).createElement(eg,{onClose:u,onCreateAll:t}))))},eI=({onClose:t})=>{let{logAiInteractionInitiated:a}=(0,s("26Yin").useBulkCreateLoggingEvents)();return q(),(0,r.useEffect)(()=>{a()},[a]),B(),W(t),e(r).createElement(e(r).Fragment,null,e(r).createElement(eC,{onClose:t}),e(r).createElement(D,null),e(r).createElement(m,null),e(r).createElement(N,null))},eE=({children:t})=>e(r).createElement(s("hq2Sz").BulkCreateContainer,{isGlobal:!0},e(r).createElement(s("aMxFD").AiBulkNavigationContextContainer,null,e(r).createElement(s("CbMiC").BulkConfigureContextContainer,null,t))),eb=()=>{let{setSelectedAvailableSite:e,setOptionsAvailableSites:t}=(0,s("CbMiC").useAvailableSitesActions)(),{selectedAvailableSite:a}=(0,s("CbMiC").useAvailableSitesState)(),{cloudId:i}=(0,s("bQm3c").useSessionData)(),l=(0,s("2ay9q").getPersistedOverrideCloudId)()||i,{logRequestFailed:n}=(0,s("26Yin").useBulkCreateLoggingEvents)(),o=(0,s("hq2Sz").useSetError)(),[,u]=(0,s("hq2Sz").useBulkCreateContext)(),c=(0,r.useRef)(a);c.current=a,(0,s("g5o3i").useGetFirstAvailableSiteDomain)({preferredCloudId:l,onComplete:(0,r.useCallback)(({availableSites:a})=>{let r=a[0],i=a.find(e=>e.cloudId===l)||r;c.current?.cloudId===i?.cloudId&&(0,s("9wGTI").fg)("confluence-create-work-items-from-action-items")||e(i),t(a)},[e,t,l]),onError:(0,r.useCallback)(e=>{n({requestName:"fetch-jira-site",errorMessage:e.message}),o(s("hq2Sz").ErrorStates.SITE_RETRIEVAL),u.setManualCreateState("error")},[n,o,u])})},eS="fetch-jira-projects",ey=()=>{let{logRequestFailed:e}=(0,s("26Yin").useBulkCreateLoggingEvents)(),t=(0,s("hq2Sz").useSetError)(),[,a]=(0,s("hq2Sz").useBulkCreateContext)(),{selectedAvailableSite:i}=(0,s("CbMiC").useAvailableSitesState)(),{setSelectedProjectIfEmpty:l,setOptionsRecentProjects:n,setOptionsAllProjects:o,setLoadingProjects:u,setIsJiraError:c}=(0,s("CbMiC").useProjectsActions)(),{projectSelectorQuery:d}=(0,s("CbMiC").useProjectsState)();(0,r.useEffect)(()=>{let r=i?.cloudId;if(!i||d&&d.trim().length>0)return;let m=e=>"fulfilled"===e.status?e.value?.[0]:void 0,p=async()=>{try{let e=await (0,s("k9cgj").fetchJiraProjects)({cloudId:r});return e&&o(e),e}catch(r){e({requestName:eS,errorMessage:`Failed to fetch projects: ${r.message}`}),t(s("hq2Sz").ErrorStates.PROJECT_RETRIEVAL),a.setManualCreateState("error")}},g=async()=>{try{let e=await (0,s("k9cgj").fetchRecentJiraProjects)({cloudId:r}),t=e?.map(e=>e.id);if(!t||0===t.length)return;let a=await (0,s("k9cgj").fetchJiraProjects)({cloudId:r,projectIds:t});return a&&n(a),a}catch(r){e({requestName:"fetch-recent-jira-projects",errorMessage:`Failed to fetch recent projects with issue create permission: ${r.message}`}),t(s("hq2Sz").ErrorStates.PROJECT_RETRIEVAL),a.setManualCreateState("error")}};(async()=>{u(!0);let[e,t]=await Promise.allSettled([g(),p()]),s=m(e)||m(t);s?l(s):c(!0),u(!1)})()},[i,u,o,e,t,n,l,d,c,a]),(0,r.useEffect)(()=>{let t=i?.cloudId;i&&d&&0!==d.trim().length&&(async()=>{try{let e=await (0,s("k9cgj").fetchJiraProjects)({cloudId:t,query:d});return e&&(n([]),o(e)),e}catch(t){e({requestName:eS,errorMessage:`Failed to fetch query projects: ${t.message}`})}})()},[i,o,e,n,d])},eh=()=>{let{logRequestFailed:e}=(0,s("26Yin").useBulkCreateLoggingEvents)(),t=(0,s("hq2Sz").useSetError)(),[,a]=(0,s("hq2Sz").useBulkCreateContext)(),{selectedAvailableSite:i}=(0,s("CbMiC").useAvailableSitesState)(),{selectedProject:l}=(0,s("CbMiC").useProjectsState)(),{setSelectedIssueTypeIfEmpty:n,setOptionsIssueTypes:o,setLoadingIssueType:u}=(0,s("CbMiC").useIssueTypesActions)();(0,r.useEffect)(()=>{let r=i?.cloudId,c=l?.id;r&&c&&(async()=>{u(!0);try{let e=await (0,s("k9cgj").fetchIssueTypes)({cloudId:r,projectId:c}),t=e?.filter(e=>!e.subtask);t&&o(t);let a=t?.[0];a&&n(a)}catch(r){t(s("hq2Sz").ErrorStates.ISSUE_TYPE_RETRIEVAL),a.setManualCreateState("error"),e({requestName:"fetch-issue-types",errorMessage:r.message})}finally{u(!1)}})()},[i?.cloudId,l?.id,u,o,t,e,n,a])},eT=()=>{let[{selectedTable:e}]=(0,s("1mDVg").useIssueCreateSidePanelContext)(),{selectedAvailableSite:t}=(0,s("CbMiC").useAvailableSitesState)(),{setMappingWorkItemTypes:a}=(0,s("CbMiC").useMappingsActions)();(0,r.useEffect)(()=>{(async()=>{let r=t?.cloudId;if(!e||!r)return;let i=Array.from((0,s("euVTc").getJiraWorkItemKeysFromTable)(e).values()).flat(),l=[];for(let e=0;e<i.length;e+=20)l.push(i.slice(e,e+20));let n=l.map(e=>(0,s("k9cgj").fetchBulkWorkItemTypes)({cloudId:r,workItemKeys:e}));a((await Promise.all(n)).filter(e=>null!=e).reduce((e,t)=>(t.forEach((t,s)=>{e.set(s,t)}),e),new Map))})()},[e,t?.cloudId,a])},ek=()=>{let[{selectedTable:e}]=(0,s("1mDVg").useIssueCreateSidePanelContext)(),{selectedAvailableSite:t}=(0,s("CbMiC").useAvailableSitesState)(),{selectedProject:a}=(0,s("CbMiC").useProjectsState)(),{selectedIssueType:i}=(0,s("CbMiC").useIssueTypesState)(),{setMappingValidParentCandidates:l}=(0,s("CbMiC").useMappingsActions)();(0,r.useEffect)(()=>{(async()=>{let r=t?.cloudId,n=a?.id,o=i?.id;if(!e||!r||!o||!n)return l(new(0,s("2R8mu").SimpleJiraIssuesSet));let u=Array.from((0,s("euVTc").getJiraWorkItemKeysFromTable)(e).values()).flat();if(0===u.length)return l(new(0,s("2R8mu").SimpleJiraIssuesSet));let c=[];for(let e=0;e<u.length;e+=20)c.push(u.slice(e,e+20));let d=new(0,s("2R8mu").SimpleJiraIssuesSet);for(let e of c){let t=e.map(async e=>{let t=await (0,s("k9cgj").executeGraphQLQuery)({query:s("k9cgj").ParentCandidatesForNewIssueQuery,variables:{projectId:n,cloudId:r,issueTypeId:o,searchTerm:e,excludeDone:!0,first:1},operationName:"ParentCandidatesForNewIssueQuery"},r),a=t?.data?.jira?.parentCandidatesWithInfoForNewIssue?.parentCandidates?.edges;if(Array.isArray(a)){let t=a.find(t=>t&&t.node&&t.node.key===e)?.node;if(t)return{issueId:t.issueId,key:t.key}}return null});(await Promise.all(t)).forEach(e=>{e&&d.add(e)})}l(d)})()},[e,t?.cloudId,i?.id,l,a?.id])},eM=()=>{let{logRequestFailed:e}=(0,s("26Yin").useBulkCreateLoggingEvents)(),{selectedAvailableSite:t}=(0,s("CbMiC").useAvailableSitesState)(),{selectedProject:a}=(0,s("CbMiC").useProjectsState)(),{setMappingAvailableComponents:i}=(0,s("CbMiC").useMappingsActions)();(0,r.useEffect)(()=>{let r=t?.cloudId,l=a?.id;r&&l&&(async()=>{try{let e=await (0,s("k9cgj").fetchJiraComponents)({cloudId:r,projectId:l});i(e??[])}catch(t){e({requestName:"fetch-project-components",errorMessage:t.message})}})()},[t,a,e,i])},eA=()=>{eb();let{selectedAvailableSite:e}=(0,s("CbMiC").useAvailableSitesState)(),[{currentJiraSite:t},{setCurrentJiraSite:a}]=(0,s("hq2Sz").useBulkCreateContext)();(0,r.useEffect)(()=>{e&&!t&&a(e)},[e,t,a]),ey();let{selectedProject:i}=(0,s("CbMiC").useProjectsState)(),[{currentJiraProject:l},{setCurrentJiraProject:n}]=(0,s("hq2Sz").useBulkCreateContext)();(0,r.useEffect)(()=>{i&&!l&&n(i)},[i,l,n]),eh();let{selectedIssueType:o}=(0,s("CbMiC").useIssueTypesState)(),[{currentDefaultIssueType:u},{setCurrentDefaultIssueType:c}]=(0,s("hq2Sz").useBulkCreateContext)();(0,r.useEffect)(()=>{o&&!u&&c(o)},[o,u,c]),eT(),ek(),eM()},eF=["description","issuetype","project","summary"],eP=()=>{let e=(0,s("hq2Sz").useSetIssueTypeHasRequiredFields)(),[t,a]=(0,r.useState)(!1),[i,l]=(0,r.useState)(null),[{currentJiraSite:n,currentJiraProject:o,currentDefaultIssueType:u}]=(0,s("hq2Sz").useBulkCreateContext)();return(0,r.useEffect)(()=>{(async()=>{if(o&&u&&n){a(!0);try{let t=await (0,s("k9cgj").fetchIssuesMetadata)({cloudId:n.cloudId,projectId:o.id,issueTypeId:u.id});if(t){let s=t.fields.some(e=>e.required&&!eF.includes(e.key)&&!e.hasDefaultValue);e(s)}}catch(e){ew(e)&&l(e.message)}finally{a(!1)}}})()},[n,o,u,e]),{isLoading:t,error:i}},ew=e=>e instanceof Error,ex=()=>{let{setOptionsColumns:e,setColumnOffset:t}=(0,s("CbMiC").useMappingsActions)(),{mappingWorkItemTypes:a,mappingFieldAllowedValues:i}=(0,s("CbMiC").useMappingsState)(),{selectedIssueType:l}=(0,s("CbMiC").useIssueTypesState)(),{selectedProject:n}=(0,s("CbMiC").useProjectsState)(),[{selectedTable:o}]=(0,s("1mDVg").useIssueCreateSidePanelContext)(),{mappingValidParentCandidates:u}=(0,s("CbMiC").useMappingsState)();(0,r.useEffect)(()=>{if(o&&o.rows.length>0){let s=[],a=o?.querySelector("tbody tr:first-of-type");if(a){let e=Array.from(a.querySelectorAll("td, th")),r=+!!e[0].classList.contains("ak-renderer-table-number-column"),i=o.rows.length>1&&Array.from(o.rows).every(e=>e.cells.length>1&&("th"===e.cells[0].tagName.toLowerCase()||"th"===e.cells[1].tagName.toLowerCase()))?1:0;t(i);let l=r+i;e.slice(r+i).forEach(e=>{let t={index:l,header:e.textContent??""};s.push(t),l+=1})}e(s)}},[o,t,e,a,l,n,u,i])},ev=(e,t)=>{if(1===e.length)return["summary","description"].map(s=>{let a=t.find(e=>e.fieldId===s);return{column:e[0],field:a}});let s={0:"summary",1:"description"};return e.slice(0,2).map((e,a)=>{let r=s[a];return{column:e,field:t.find(e=>e.fieldId===r)}})},eR=()=>{let{optionsIssueTypeFields:e,optionsColumns:t}=(0,s("CbMiC").useMappingsState)(),{setColumnToFieldMappings:a,initUnsavedColumnToFieldMappings:i}=(0,s("CbMiC").useMappingsActions)();(0,r.useEffect)(()=>{e&&t&&(a(ev(t,e)),i())},[e,t,a,i])},ej=()=>{let{columnToFieldMappings:e,columnOffset:t,mappingWorkItemTypes:a,mappingValidParentCandidates:i,mappingAvailableComponents:l,mappingFieldAllowedValues:n}=(0,s("CbMiC").useMappingsState)(),{selectedIssueType:o}=(0,s("CbMiC").useIssueTypesState)(),[{selectedTable:u,insertStorageColumnTableRequestPayload:c},{setInsertStorageColumnTableRequestPayload:d}]=(0,s("1mDVg").useIssueCreateSidePanelContext)(),m=(0,s("hq2Sz").useSetBulkIssuesList)(),p=(0,s("aMxFD").useAiBulkNavigationGotoPage)(),g=(0,r.useMemo)(()=>({mappingWorkItemTypes:a??new Map,selectedIssueType:o,mappingValidParentCandidates:i??new(0,s("2R8mu").SimpleJiraIssuesSet),mappingFieldAllowedValues:new Map([...n??new Map,...l?new Map([["components",l]]):new Map])}),[a,o,i,n,l]);(0,r.useEffect)(()=>{if(e&&e.length>0&&u){let t=(0,s("euVTc").mapTableToIssues)(e,u,g);m(t),0===t.length&&p("configure")}},[e,p,u,m,g]),(0,r.useEffect)(()=>{if(e&&e.length>0){let s=e.find(e=>e.field?.key==="summary"),a=s?.column?.index??0;d({...c,tableColumnIndex:null!=t&&0!==a?a-t:a})}},[e])},eD=()=>{let[{currentJiraSite:e,currentJiraProject:t,currentDefaultIssueType:a,manualCreateState:i,error:l,bulkIssuesList:n},o]=(0,s("hq2Sz").useBulkCreateContext)(),{loadingIssueTypeFields:u}=(0,s("CbMiC").useMappingsState)();return(0,r.useEffect)(()=>{let r=!e||!t||!a||u||n?.length===0;r&&o.setManualCreateState("loading");let i=l!==s("hq2Sz").ErrorStates.EMPTY;i&&o.setManualCreateState("error"),r||i||o.setManualCreateState("idle")},[o,a,t,e,u,l,n]),{isLoading:"loading"===i,isError:"error"===i,isIdle:"idle"===i}},eL=(0,s("ecnYn").xcss)({width:"100%",height:"100%",display:"flex",flexDirection:"column",flexWrap:"nowrap"}),e_=(0,s("ecnYn").xcss)({backgroundColor:"elevation.surface",flexShrink:0,position:"relative","::before":{content:'""',position:"absolute",top:"space.0",left:"space.150",right:"space.150",height:"1px",backgroundColor:"elevation.surface",borderTopColor:"color.border",borderTopStyle:"solid",borderTopWidth:"border.width"}}),eO=(0,s("ecnYn").xcss)({paddingTop:"space.150",paddingBottom:"space.150",paddingLeft:"space.200",paddingRight:"space.200"}),eB=(0,s("ecnYn").xcss)({width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center"}),eN=({onClose:t})=>{let{isLoading:a,isError:i,isIdle:l}=eD(),[,n]=(0,s("hq2Sz").useBulkCreateContext)(),{addSingleIssuesToPage:o}=G(),u=(0,r.useCallback)(()=>{o(),(0,s("6mKj3").expVal)("confluence-bulk-work-create-editor","isEnabled",!1)||n.resetManualBulkCreateState(),t()},[n,o,t]);return e(r).createElement(s("5Ew1A").SidePanelWrapper,null,e(r).createElement(s("1GzhS").default,{xcss:eL},e(r).createElement(en,{onClose:u}),a&&e(r).createElement(s("6f0Oj").default,{xcss:eB},e(r).createElement(s("9hlns").default,{size:"large"})),i&&e(r).createElement(s("aXkRG").WorkItemCreationError,{creationSource:s("26Yin").BULK_ISSUE_CREATE_SOURCE,errorMessage:(0,s("6mKj3").expVal)("project-terminology-refresh","isEnabled",!1)?s("3E5yu").messages.connectJiraProjectErrorDescriptionGalaxia:s("3E5yu").messages.connectJiraProjectErrorDescription}),l&&e(r).createElement(e(r).Fragment,null,e(r).createElement(er,null),e(r).createElement(s("6f0Oj").default,{xcss:e_},e(r).createElement(s("dcJ7R").default,{alignInline:"center",grow:"fill",spread:"space-between",xcss:eO},e(r).createElement(ec,{onClose:u,onCreateAll:t}))))))},eq=()=>{let[{selectedActionItems:e}]=(0,s("1mDVg").useIssueCreateSidePanelContext)(),t=(0,s("hq2Sz").useSetBulkIssuesList)(),a=(0,s("aMxFD").useAiBulkNavigationGotoPage)(),{optionsIssueTypeFields:i,loadingIssueTypeFields:l}=(0,s("CbMiC").useMappingsState)();(0,r.useEffect)(()=>{if(!e||!(0,s("9wGTI").fg)("confluence-create-work-items-from-action-items")||(0,s("9wGTI").fg)("confluence-ai-jira-work-create-fast-follows")&&(!i||0===i.length||l))return;let r=(0,s("cSSgB").mapActionItemsToIssues)(e);t(r),0===r.length&&a("configure")},[a,t,e,i,l])},eU=({onClose:t})=>(q(),ex(),eR(),ej(),eq(),W(t),e(r).createElement(e(r).Fragment,null,e(r).createElement(eN,{onClose:t}),e(r).createElement(D,{closePanel:t}),e(r).createElement(m,null),e(r).createElement(N,null))),eG=({onClose:t})=>{eA();let[a,i]=(0,s("hq2Sz").useBulkCreateContext)(),{isCreatedWithAi:l,bulkIssuesList:n}=a;eP();let{logSidePanelClosed:o}=(0,s("26Yin").useBulkCreateLoggingEvents)(),u=(0,r.useCallback)(()=>{o(),(0,s("6mKj3").expVal)("confluence-bulk-work-create-editor","isEnabled",!1)&&i.resetTransientBulkCreateState(),t()},[o,t,i]),{isWarningDialogOpen:c,handleConfirm:d,handleCancel:m}=(0,s("jwedr").useGetWarningDialogActions)(u);return e(r).createElement(e(r).Fragment,null,l?e(r).createElement(eI,{onClose:u}):e(r).createElement(eU,{onClose:u}),c&&e(r).createElement(s("98CLM").IssueCreateWarningDialog,{onCancel:m,onConfirm:d,issuesCount:n?.length}))};t.exports.bulkCreateSidePanelTestId="bulk-issue-create-side-panel",t.exports.BULK_ISSUE_CREATE_SIDE_PANEL_ID="bulk-issue-create-side-panel",t.exports.BULK_ISSUE_CREATE_SIDE_PANEL_WIDTH=320,t.exports.BulkCreateSidePanelComponent=eG,t.exports.BulkCreateSidePanel=({onClose:t})=>e(r).createElement(eE,null,e(r).createElement(s("2Rith").AIEventsInstrumentationProvider,{config:{product:"confluence",subproduct:"jira",aiFeatureName:s("26Yin").AI_BULK_ISSUE_CREATE_FEATURE_NAME,proactiveGeneratedAI:0,userGeneratedAI:1,source:"confluenceHighlightIssueCreate",skipAISessionValidation:!0}},e(r).createElement(eG,{onClose:t})))}),a("CbMiC",function(e,t){var a,r=((a={})[a.PARAGRAPH=0]="PARAGRAPH",a[a.SHORT_TEXT=1]="SHORT_TEXT",a[a.NUMBER=2]="NUMBER",a[a.DATE=3]="DATE",a[a.TIMESTAMP=4]="TIMESTAMP",a[a.USER=5]="USER",a[a.PEOPLE=6]="PEOPLE",a[a.TEAM=7]="TEAM",a[a.PRIORITY=8]="PRIORITY",a[a.COMPONENTS=9]="COMPONENTS",a[a.LABELS=10]="LABELS",a[a.VERSIONS=11]="VERSIONS",a[a.PARENT=12]="PARENT",a[a.UNSUPPORTED=13]="UNSUPPORTED",a[a.SINGLE_SELECT=14]="SINGLE_SELECT",a[a.MULTI_SELECT=15]="MULTI_SELECT",a);let i=(0,s("1P1Tu").createStore)({initialState:{optionsAvailableSites:null,optionsRecentProjects:null,optionsAllProjects:null,optionsIssueTypes:null,optionsIssueTypeFields:null,optionsColumns:null,selectedAvailableSite:null,selectedProject:null,selectedIssueType:null,loadingProjects:!1,loadingIssueType:!1,loadingIssueTypeFields:!1,projectSelectorQuery:"",isJiraError:!1,columnToFieldMappings:null,unsavedColumnToFieldMappings:null,columnOffset:null,mappingWorkItemTypes:null,mappingValidParentCandidates:null,mappingFieldAllowedValues:null,mappingAvailableComponents:null},actions:{setOptionsAvailableSites:e=>({setState:t})=>{t({optionsAvailableSites:e})},setOptionsRecentProjects:e=>({setState:t})=>{t({optionsRecentProjects:e})},setOptionsAllProjects:e=>({setState:t})=>{t({optionsAllProjects:e})},setOptionsIssueTypes:e=>({setState:t})=>{t({optionsIssueTypes:e})},setOptionsIssueTypeFields:e=>({setState:t})=>{t({optionsIssueTypeFields:e})},setOptionsColumns:e=>({setState:t})=>{t({optionsColumns:e})},setSelectedAvailableSite:e=>({setState:t})=>{t({selectedAvailableSite:e,selectedProject:null,selectedIssueType:null,optionsRecentProjects:null,optionsAllProjects:null,optionsIssueTypes:null,optionsIssueTypeFields:null,isJiraError:!1})},setSelectedProject:e=>({setState:t})=>{t({selectedProject:e,selectedIssueType:null,optionsIssueTypes:null,optionsIssueTypeFields:null})},setSelectedProjectIfEmpty:e=>({getState:t,setState:s})=>{let{selectedProject:a}=t();a||s({selectedProject:e,selectedIssueType:null,optionsIssueTypes:null,optionsIssueTypeFields:null})},setSelectedIssueType:e=>({setState:t})=>{t({selectedIssueType:e,optionsIssueTypeFields:null})},setSelectedIssueTypeIfEmpty:e=>({getState:t,setState:s})=>{let{selectedIssueType:a}=t();a||s({selectedIssueType:e,optionsIssueTypeFields:null})},setLoadingProjects:e=>({setState:t})=>{t({loadingProjects:e})},setLoadingIssueType:e=>({setState:t})=>{t({loadingIssueType:e})},setLoadingIssueTypeFields:e=>({setState:t})=>{t({loadingIssueTypeFields:e})},setProjectSelectorQuery:e=>({setState:t})=>{t({projectSelectorQuery:e})},setIsJiraError:e=>({setState:t})=>{t({isJiraError:e})},setColumnToFieldMappings:e=>({setState:t})=>{t({columnToFieldMappings:e})},setUnsavedColumnToFieldMappings:e=>({setState:t})=>{t({unsavedColumnToFieldMappings:e})},initUnsavedColumnToFieldMappings:()=>({setState:e,getState:t})=>{let{columnToFieldMappings:s,unsavedColumnToFieldMappings:a,optionsIssueTypeFields:r}=t();if(a&&r){let t=new Map(r.map(e=>[e.fieldId,e]));e({unsavedColumnToFieldMappings:a.reduce((e,s)=>{let a=s.field?.fieldId;return(void 0===a||t.has(a))&&e.push({...s,field:a?t.get(a):void 0,errors:{}}),e},[])})}else s&&e({unsavedColumnToFieldMappings:s.map(e=>({...e,isDefaultMapping:e.field?.fieldId==="summary"||e.field?.fieldId==="description",errors:{}}))})},addUnsavedColumnToFieldMapping:e=>({getState:t,setState:s})=>{let{unsavedColumnToFieldMappings:a}=t();a&&s({unsavedColumnToFieldMappings:[...a,e]})},deleteUnsavedColumnToFieldMapping:e=>({getState:t,setState:s})=>{let{unsavedColumnToFieldMappings:a}=t();a&&s({unsavedColumnToFieldMappings:a.filter((t,s)=>s!==e)})},saveUnsavedColumnToFieldMapping:()=>({getState:e,setState:t})=>{let{unsavedColumnToFieldMappings:s}=e();s&&t({columnToFieldMappings:s.map(({errors:e,isDefaultMapping:t,...s})=>s)})},setColumnOffset:e=>({setState:t})=>{t({columnOffset:e})},setFieldAllowedValues:e=>({setState:t})=>{t({mappingFieldAllowedValues:e})},setMappingWorkItemTypes:e=>({setState:t})=>{t({mappingWorkItemTypes:e})},setMappingValidParentCandidates:e=>({setState:t})=>{t({mappingValidParentCandidates:e})},setMappingAvailableComponents:e=>({setState:t})=>{t({mappingAvailableComponents:e})},resetAll:(e,t,s)=>({setState:a})=>{a({selectedAvailableSite:e,selectedProject:t,selectedIssueType:s})}},name:"BulkConfigureState"}),l=(0,s("FOT9i").createContainer)(i),n=(0,s("9zUhf").createActionsHook)(i),o=(0,s("9zUhf").createStateHook)(i,{selector:({optionsAvailableSites:e,selectedAvailableSite:t})=>({optionsAvailableSites:e,selectedAvailableSite:t})}),u=(0,s("9zUhf").createStateHook)(i,{selector:({optionsRecentProjects:e,optionsAllProjects:t,selectedProject:s,projectSelectorQuery:a})=>({optionsRecentProjects:e,optionsAllProjects:t,selectedProject:s,projectSelectorQuery:a})}),c=(0,s("9zUhf").createStateHook)(i,{selector:({optionsIssueTypes:e,selectedIssueType:t})=>({optionsIssueTypes:e,selectedIssueType:t})}),d=(0,s("9zUhf").createStateHook)(i,{selector:({selectedAvailableSite:e,loadingProjects:t,loadingIssueType:s,isJiraError:a})=>({isLoading:null==e||t||s,isJiraError:a})}),m=(0,s("9zUhf").createStateHook)(i,{selector:({optionsColumns:e,optionsIssueTypeFields:t,loadingIssueTypeFields:s,columnToFieldMappings:a,unsavedColumnToFieldMappings:r,columnOffset:i,mappingFieldAllowedValues:l,mappingWorkItemTypes:n,mappingValidParentCandidates:o,mappingAvailableComponents:u})=>({optionsColumns:e,optionsIssueTypeFields:t,loadingIssueTypeFields:s,columnToFieldMappings:a,unsavedColumnToFieldMappings:r,columnOffset:i,mappingFieldAllowedValues:l,mappingWorkItemTypes:n,mappingValidParentCandidates:o,mappingAvailableComponents:u})});e.exports.FieldType=r,e.exports.BulkConfigureContextContainer=l,e.exports.useAvailableSitesActions=()=>{let{setOptionsAvailableSites:e,setSelectedAvailableSite:t}=n();return{setOptionsAvailableSites:e,setSelectedAvailableSite:t}},e.exports.useAvailableSitesState=o,e.exports.useProjectsActions=()=>{let{setOptionsRecentProjects:e,setOptionsAllProjects:t,setSelectedProject:s,setSelectedProjectIfEmpty:a,setLoadingProjects:r,setProjectSelectorQuery:i,setIsJiraError:l}=n();return{setOptionsRecentProjects:e,setOptionsAllProjects:t,setSelectedProject:s,setSelectedProjectIfEmpty:a,setLoadingProjects:r,setProjectSelectorQuery:i,setIsJiraError:l}},e.exports.useProjectsState=u,e.exports.useIssueTypesActions=()=>{let{setOptionsIssueTypes:e,setSelectedIssueType:t,setLoadingIssueType:s,setSelectedIssueTypeIfEmpty:a}=n();return{setOptionsIssueTypes:e,setSelectedIssueType:t,setSelectedIssueTypeIfEmpty:a,setLoadingIssueType:s}},e.exports.useIssueTypesState=c,e.exports.useIsConfigureLoading=d,e.exports.useMappingsActions=()=>{let{setOptionsColumns:e,setOptionsIssueTypeFields:t,setLoadingIssueTypeFields:s,setColumnToFieldMappings:a,setUnsavedColumnToFieldMappings:r,initUnsavedColumnToFieldMappings:i,addUnsavedColumnToFieldMapping:l,deleteUnsavedColumnToFieldMapping:o,saveUnsavedColumnToFieldMapping:u,setColumnOffset:c,setFieldAllowedValues:d,setMappingWorkItemTypes:m,setMappingValidParentCandidates:p,setMappingAvailableComponents:g}=n();return{setOptionsColumns:e,setOptionsIssueTypeFields:t,setLoadingIssueTypeFields:s,setColumnToFieldMappings:a,initUnsavedColumnToFieldMappings:i,setUnsavedColumnToFieldMappings:r,addUnsavedColumnToFieldMapping:l,deleteUnsavedColumnToFieldMapping:o,saveUnsavedColumnToFieldMapping:u,setColumnOffset:c,setFieldAllowedValues:d,setMappingWorkItemTypes:m,setMappingValidParentCandidates:p,setMappingAvailableComponents:g}},e.exports.useMappingsState=m,e.exports.useResetConfigureState=()=>{let{resetAll:e}=n();return e}}),a("2R8mu",function(e,t){let s=e=>"object"==typeof e&&null!==e&&"id"in e;(a={}).JiraCore="jira-core",a.JiraServiceDesk="jira-servicedesk",a.JiraCustomerService="jira-customer-service",a.JiraSoftware="jira-software",a.JiraProductDiscovery="jira-product-discovery";var a,r,i,l,n,o,u=((r={}).VERSION="version",r.OPTION="option",r),c=((i={}).ANY="any",i.STRING="string",i.NUMBER="number",i.DATE="date",i.DATETIME="datetime",i.ISSUELINK="issuelink",i.ISSUETYPE="issuetype",i.USER="user",i.TEAM="team",i.PRIORITY="priority",i.ARRAY="array",i.COMPONENTS="components",i),d=((l={}).TEXT_AREA="com.atlassian.jira.plugin.system.customfieldtypes:textarea",l.TEXT_FIELD="com.atlassian.jira.plugin.system.customfieldtypes:textfield",l.PEOPLE="com.atlassian.jira.plugin.system.customfieldtypes:people",l),m=((n={}).LABELS="labels",n.PARENT="parent",n),p=((o={}).ADD="add",o.SET="set",o.REMOVE="remove",o);class g{add(e){this.internalMap.set(this.customIdFn(e),e)}has(e){return this.internalMap.has(this.customIdFn(e))}get(e){return this.internalMap.get(e)}hasId(e){return this.internalMap.has(e)}union(e){return new g([...e.values(),...this.values()],this.customIdFn)}values(){return Array.from(this.internalMap.values())}size(){return this.internalMap.size}constructor(e=[],t){this.internalMap=void 0,this.customIdFn=void 0,this.internalMap=new Map(e.map(e=>[t(e),e])),this.customIdFn=t}}function f(e){return"object"==typeof e&&null!==e&&"id"in e&&"name"in e}function C(e){return"object"==typeof e&&null!==e&&"id"in e&&"value"in e}e.exports.isGICCompatibleObject=s,e.exports.isGICCompatibleObjectList=e=>Array.isArray(e)&&e.every(s),e.exports.MESSAGE_PROJECT_TYPE_TO_API_PROJECT_TYPE={service_desk:"jira-servicedesk",software:"jira-software",customer_service:"jira-customer-service",business:"jira-core",product_discovery:"jira-product-discovery"},e.exports.FieldMetadataSchemaItems=u,e.exports.FieldMetadataSchemaType=c,e.exports.FieldMetadataSchemaCustom=d,e.exports.FieldMetadataSchemaSystem=m,e.exports.FieldMetadataSchemaOperations=p,e.exports.SimpleJiraIssuesSet=class extends g{constructor(e=[]){super(e,e=>e.key)}},e.exports.isIdNameObjectList=function(e){return Array.isArray(e)&&e.every(f)},e.exports.isSelectOptionList=function(e){return Array.isArray(e)&&e.every(C)}}),a("aMxFD",function(e,t){let a=(0,s("1P1Tu").createStore)({initialState:{currentPage:"default",errorMessage:null},actions:{goToPage:e=>({setState:t})=>{t({currentPage:e})},setFlags:e=>({setState:t})=>{t({flags:e})},setErrorMessage:e=>({setState:t})=>{t({errorMessage:e})}},name:"AiBulkNavigationState"}),r=(0,s("FOT9i").createContainer)(a),i=(0,s("9zUhf").createActionsHook)(a),l=(0,s("9zUhf").createStateHook)(a,{selector:e=>e.currentPage}),n=(0,s("9zUhf").createStateHook)(a,{selector:e=>e.flags}),o=(0,s("9zUhf").createStateHook)(a,{selector:e=>e.errorMessage});e.exports.AiBulkNavigationContextContainer=r,e.exports.useAiBulkNavigationGotoPage=()=>{let{goToPage:e}=i();return e},e.exports.useAiBulkNavigationCurrentPage=l,e.exports.useSetBulkCreateFlagsContainer=()=>{let{setFlags:e}=i();return e},e.exports.useBulkCreateFlagsContainer=n,e.exports.useSetErrorMessage=()=>{let{setErrorMessage:e}=i();return e},e.exports.useErrorMessage=o}),a("26Yin",function(e,t){var a=s("42omo");let r="confluenceBulkIssueCreate",i="aiIssueCreateConfluenceBulk",l=({baseAttributes:e,isCreatedWithAi:t,isCreatedFromTable:s,hasEditPermission:a,isCreatedFromActionItems:r,pageMode:l})=>(e.isCreatedFromTable=s,e.isCreatedWithAi=t,e.hasEditPermission=a,e.isCreatedFromActionItems=r,l&&(e.pageMode=l),t)?{...e,aiFeatureName:i}:e,n=(e,t)=>e||t?"confluenceHighlightIssueCreate":r,o=e=>e instanceof Error?e.message:String(e),u=()=>{let{columnToFieldMappings:e}=(0,s("CbMiC").useMappingsState)();return{numMappings:e?e.length:void 0}};e.exports.BULK_ISSUE_CREATE_SOURCE=r,e.exports.AI_BULK_ISSUE_CREATE_FEATURE_NAME=i,e.exports.getSource=n,e.exports.useBulkCreateLoggingEvents=()=>{let{createAnalyticsEvent:e}=(0,s("inPa6").useAnalyticsEvents)(),{trackAIResultError:t,trackAIInteractionInit:r,trackAIResultView:i,trackAIResultAction:c,trackAIInteractionDismiss:d}=(0,s("fYQcF").useAIEventsInstrumentation)(),[{isCreatedWithAi:m,isCreatedFromTable:p,isCreatedFromActionItems:g}]=(0,s("hq2Sz").useBulkCreateContext)(),[{pageMode:f,hasEditPermission:C}]=(0,s("1mDVg").useIssueCreateSidePanelContext)(),{numMappings:I}=u(),E=(0,a.useCallback)(t=>{let s=l({baseAttributes:{numIssues:t,...I&&{numMappings:I}},isCreatedWithAi:m,isCreatedFromTable:p,isCreatedFromActionItems:g,hasEditPermission:C,pageMode:f});e({type:"sendTrackEvent",data:{source:n(p,g),action:"created",actionSubject:"issue",attributes:s}}).fire()},[I,e,m,p,g,f,C]),b=(0,a.useCallback)((t,s)=>{let a=l({baseAttributes:{error:o(s),numIssues:t},isCreatedWithAi:m,isCreatedFromTable:p,isCreatedFromActionItems:g,hasEditPermission:C,pageMode:f});e({type:"sendTrackEvent",data:{source:n(p,g),action:"failed",actionSubject:"issueCreation",attributes:a}}).fire()},[e,m,p,g,f,C]),S=(0,a.useCallback)((t,s)=>{let a=l({baseAttributes:{error:o(s),numIssues:t},isCreatedWithAi:m,isCreatedFromTable:p,isCreatedFromActionItems:g,hasEditPermission:C,pageMode:f});e({type:"sendTrackEvent",data:{source:n(p,g),action:"failed",actionSubject:"issueInsertion",attributes:a}}).fire()},[e,m,p,g,f,C]),y=(0,a.useCallback)(()=>{E(1)},[E]),h=(0,a.useCallback)(t=>{let s=l({baseAttributes:{error:o(t)},isCreatedWithAi:m,isCreatedFromTable:p,isCreatedFromActionItems:g,hasEditPermission:C,pageMode:f});e({type:"sendTrackEvent",data:{source:n(p,g),action:"error",actionSubject:"globalIssueCreate",attributes:s}}).fire()},[e,m,p,g,f,C]),T=(0,a.useCallback)(()=>{let t=l({baseAttributes:{},isCreatedWithAi:m,isCreatedFromTable:p,isCreatedFromActionItems:g,hasEditPermission:C,pageMode:f});e({type:"sendTrackEvent",data:{source:n(p,g),action:"cancelled",actionSubject:"aiPanel",attributes:t}}).fire()},[m,p,g,C,f,e]),k=(0,a.useCallback)(e=>{i({attributes:l({baseAttributes:{issuesGenerated:e},isCreatedWithAi:m,isCreatedFromTable:p,isCreatedFromActionItems:g,hasEditPermission:C,pageMode:f})})},[i,m,p,g,f,C]),M=(0,a.useCallback)((e,t)=>{c(e,{attributes:{...l({baseAttributes:{},isCreatedWithAi:m,isCreatedFromTable:p,isCreatedFromActionItems:g,hasEditPermission:C,pageMode:f}),issueId:t}})},[p,m,g,f,c,C]),A=(0,a.useCallback)(()=>{let t=l({baseAttributes:{},isCreatedWithAi:m,isCreatedFromTable:p,isCreatedFromActionItems:g,hasEditPermission:C,pageMode:f});e({type:"sendTrackEvent",data:{source:n(p,g),action:"removed",actionSubject:"aiResult",attributes:t}}).fire()},[e,p,m,g,f,C]),F=(0,a.useCallback)(({requestName:t,errorMessage:s})=>{let a=l({baseAttributes:{errorMessage:s},isCreatedWithAi:m,isCreatedFromTable:p,isCreatedFromActionItems:g,hasEditPermission:C,pageMode:f});e({type:"sendOperationalEvent",data:{source:n(p,g),action:"failed",actionSubject:t,attributes:a}}).fire()},[e,p,m,g,f,C]),P=(0,a.useCallback)(()=>{m&&A();let t=l({baseAttributes:{},isCreatedWithAi:m,isCreatedFromTable:p,isCreatedFromActionItems:g,hasEditPermission:C,pageMode:f});e({type:"sendTrackEvent",data:{source:n(p,g),action:"removed",actionSubject:"sidePanelIssue",attributes:t}}).fire()},[m,p,g,f,e,A,C]),w=(0,a.useCallback)(t=>{let s=l({baseAttributes:{issueAction:t},isCreatedWithAi:m,isCreatedFromTable:p,isCreatedFromActionItems:g,hasEditPermission:C,pageMode:f});e({type:"sendTrackEvent",data:{source:n(p,g),action:"approved",actionSubject:"sidePanelIssue",attributes:s}}).fire()},[e,m,p,g,f,C]),x=(0,a.useCallback)(()=>{m&&M("createAll"),w("createAll")},[m,M,w]),v=(0,a.useCallback)(e=>{m&&M("createSingleIssue",e),w("createSingleIssue")},[m,M,w]),R=(0,a.useCallback)((t,s="")=>{let a=l({baseAttributes:{errorMessage:o(s),numIssues:t},isCreatedWithAi:m,isCreatedFromTable:p,isCreatedFromActionItems:g,hasEditPermission:C,pageMode:f});e({type:"sendTrackEvent",data:{source:n(p,g),action:"failed",actionSubject:"aiIssueCreation",attributes:a}}).fire()},[e,m,p,g,f,C]),j=(0,a.useCallback)(()=>{d({attributes:l({baseAttributes:{},isCreatedWithAi:m,isCreatedFromTable:p,isCreatedFromActionItems:g,hasEditPermission:C,pageMode:f})})},[p,m,g,f,d,C]),D=(0,a.useCallback)(()=>{let t=l({baseAttributes:{},isCreatedWithAi:m,isCreatedFromTable:p,isCreatedFromActionItems:g,hasEditPermission:C,pageMode:f});e({type:"sendTrackEvent",data:{source:n(p,g),action:"generated",actionSubject:"aiNoResults",attributes:t}}).fire()},[e,p,m,g,f,C]),L=(0,a.useCallback)(()=>{let t=l({baseAttributes:{},isCreatedWithAi:m,isCreatedFromTable:p,isCreatedFromActionItems:g,hasEditPermission:C,pageMode:f});e({type:"sendTrackEvent",data:{source:n(p,g),action:"generated",actionSubject:"aiInvalidResults",attributes:t}}).fire()},[e,p,m,g,f,C]),_=(0,a.useCallback)(()=>{r({attributes:l({baseAttributes:{},isCreatedWithAi:m,isCreatedFromTable:p,isCreatedFromActionItems:g,hasEditPermission:C,pageMode:f})})},[p,m,g,f,r,C]),O=(0,a.useCallback)((e="")=>{let s=l({baseAttributes:{},isCreatedWithAi:m,isCreatedFromTable:p,isCreatedFromActionItems:g,hasEditPermission:C,pageMode:f});t({aiErrorMessage:o(e)},{attributes:s})},[p,m,g,f,t,C]);return{logSingleIssueCreateSuccess:y,logMultipleIssueCreateSuccess:E,logSingleIssueCreateFailure:h,logIssueInsertionFailure:S,logCancelAiPanel:T,logCreateAllClick:x,logCreateSingleIssueClick:v,logAiInteractionInitiated:_,logAiResultViewed:k,logAiResultRemoved:A,logAiInteractionDismissed:j,logAiNoResultsGenerated:D,logAiInvalidResultsGenerated:L,logRequestFailed:F,logAiStreamingBackendFailed:O,logSidePanelIssueRemoved:P,logSidePanelIssueApproved:w,logIssueCreationFailed:(0,a.useCallback)((e,t="")=>{m&&R(e,t),b(e,t)},[m,R,b]),logSidePanelClosed:(0,a.useCallback)(()=>{let t=l({baseAttributes:{},isCreatedWithAi:m,isCreatedFromTable:p,isCreatedFromActionItems:g,hasEditPermission:C,pageMode:f});e({type:"sendUIEvent",data:{source:n(p,g),action:"closed",actionSubject:"modalDialog",actionSubjectId:"linkCreate",attributes:t}}).fire()},[e,m,p,g,f,C])}}}),a("k9cgj",function(e,t){let a=({cloudId:e,query:t,projectIds:s,orderBy:a})=>{let r=`/gateway/api/ex/jira/${e}/rest/api/3/project/search?action=create`;return a&&(r+=`&orderBy=${a}`),s&&s.length>0&&(r+=`&id=${s.join("&id=")}`),t&&t.length>0&&(r+=`&query=${t}`),r},r=async({cloudId:e,query:t,projectIds:r,orderBy:i})=>{try{let l=await (0,s("f7B1p").cfetch)(a({cloudId:e,query:t,projectIds:r,orderBy:i}),{method:"GET",headers:{Accept:"application/json"},credentials:"include"}),n=await l.json(),o=n?.values;if(!o)throw Error("Parsing response from fetchJiraProjects failed");return o}catch{throw Error("Request to fetchJiraProjects agent failed")}},i=e=>`/gateway/api/ex/jira/${e}/rest/api/3/project/recent`,l=async({cloudId:e})=>{try{if(!e)throw Error("cloudId is required");let t=await (0,s("f7B1p").cfetch)(i(e),{method:"GET",headers:{Accept:"application/json"},credentials:"include"}),a=await t.json();if(!a)throw Error("Parsing response from getRecentJiraProjects failed");return a}catch{throw Error("Request to fetchRecentJiraProjects agent failed")}},n=({cloudId:e,projectId:t})=>`/gateway/api/ex/jira/${e}/rest/api/3/issue/createmeta/${t}/issuetypes`,o=async({cloudId:e,projectId:t})=>{try{let a=await (0,s("f7B1p").cfetch)(n({cloudId:e,projectId:t}),{method:"GET",headers:{Accept:"application/json"},credentials:"include"}),r=await a.json(),i=r?.issueTypes;if(!i)throw Error("Parsing response from fetchIssueTypes failed");return i}catch{throw Error("Request to fetchIssueTypes agent failed")}},u=e=>`/gateway/api/ex/jira/${e}/rest/api/3/issue/bulk`,c=async({cloudId:e,issueBody:t})=>{try{let a=await (0,s("f7B1p").cfetch)(u(e),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)}),r=await a.json();if(!r)throw Error("Parsing response from createBulkIssues failed");return r}catch{throw Error("Request to createBulkIssues agent failed")}},d=({cloudId:e,projectId:t,issueTypeId:s,maxResults:a,startAt:r})=>{let i=`/gateway/api/ex/jira/${e}/rest/api/3/issue/createmeta/${t}/issuetypes/${s}`,l=`${i}?maxResults=${a}`;return`${l}&startAt=${r}`},m=async({cloudId:e,projectId:t,issueTypeId:a,maxResults:r=200,page:i=0,consolidatedFields:l=[]})=>{try{let n=await (0,s("f7B1p").cfetch)(d({cloudId:e,projectId:t,issueTypeId:a,maxResults:r,startAt:i*r}),{method:"GET",headers:{Accept:"application/json"},credentials:"include"}),o=await n.json();if(!o)throw Error("Parsing response from issues metadata failed");let u=[...l,...o.fields];if(o.total>u.length)return await m({cloudId:e,projectId:t,issueTypeId:a,maxResults:r,page:i+1,consolidatedFields:u});return{fields:u,maxResults:o.maxResults,total:o.total,startAt:o.startAt}}catch{throw Error("Error retrieving issue metadata")}},p=(e,t)=>`/gateway/api/ex/jira/${e}/rest/api/1/aiconfig/ai-enabled/${t}`,g=(e,t)=>(0,s("f7B1p").cfetch)(p(e,t),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"}),f=async(e,t)=>{try{let s=await g(e,t),a=await s.json();if(!a)throw Error("Parsing response from getJiraAiEnablementRequest failed");return a}catch{throw Error("Request to getJiraAiEnablementRequest agent failed")}},C=(e,t)=>{let s=encodeURI(`issuekey in (${t.join(",")})`);return`/gateway/api/ex/jira/${e}/rest/api/3/search?jql=${s}&fields=issuetype`},I=async({cloudId:e,workItemKeys:t})=>{try{let a=await (0,s("f7B1p").cfetch)(C(e,t),{method:"GET",headers:{Accept:"application/json"},credentials:"include"}),r=await a.json();if(!r||!r.issues)throw Error("Parsing response from fetchBulkIssueTypes failed");let i=new Map;return r.issues.forEach(e=>{e.key&&e.fields?.issuetype&&i.set(e.key,{issueType:e.fields.issuetype,id:e.id})}),i}catch(e){if(e instanceof s("hBkCm").BadStatusError&&400===e.response.status)return new Map;throw Error("Request to fetchBulkIssueTypes agent failed")}},E=(e,t)=>`/gateway/api/ex/jira/${e}/rest/api/3/project/${t}/components`,b=async({cloudId:e,projectId:t})=>{try{let a=await (0,s("f7B1p").cfetch)(E(e,t),{method:"GET",headers:{Accept:"application/json"},credentials:"include"}),r=await a.json();if(!r)throw Error("Parsing response from fetchComponents failed");return r}catch{throw Error("Request to fetchComponents agent failed")}},S=async(e,t)=>{let a=`/gateway/api/ex/jira/${t}/rest/gira/1/?operation=${encodeURIComponent(e.operationName)}`,r={query:e.query,variables:e.variables,operationName:e.operationName};try{let e=await (0,s("f7B1p").cfetch)(a,{method:"POST",body:JSON.stringify(r),credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json"}}),t=await e.json();if(!t)throw Error("Parsing response from GraphQL query failed");return t}catch{throw Error("Request to GraphQL endpoint failed")}},y=`
	query ParentCandidatesForNewIssueQuery(
		$projectId: ID!
		$issueTypeId: ID!
		$cloudId: ID!
		$searchTerm: String
	) {
		jira {
			parentCandidatesWithInfoForNewIssue(
				projectId: $projectId
				issueTypeId: $issueTypeId
				cloudId: $cloudId
				searchTerm: $searchTerm
				excludeDone: false
				first: 1
			) {
				parentCandidates {
					edges {
						node {
							key
							issueId
						}
					}
				}
				message
			}
		}
	}
`;e.exports.fetchJiraProjects=r,e.exports.fetchRecentJiraProjects=l,e.exports.fetchIssueTypes=o,e.exports.createBulkIssues=c,e.exports.fetchIssuesMetadata=m,e.exports.mapGICPayloadToCreateIssueResponse=e=>({id:e.issueId?e.issueId.toString():"",key:e.issueKey,self:e.link,transition:{status:200,errorCollection:{errorMessages:[],errors:{}}},summary:e.summary}),e.exports.convertToGICFieldValue=e=>(0,s("2R8mu").isGICCompatibleObject)(e.value)?e.value.id:(0,s("2R8mu").isGICCompatibleObjectList)(e.value)?e.value.map(e=>e.id):e.value,e.exports.getJiraAiEnablement=f,e.exports.fetchBulkWorkItemTypes=I,e.exports.fetchJiraComponents=b,e.exports.executeGraphQLQuery=S,e.exports.ParentCandidatesForNewIssueQuery=y}),a("f0BVO",function(e,t){e.exports.transformStargateUrl=e=>{try{if(e&&e.includes("ex/jira")&&!e.includes("gateway/api")){let t=new URL(e),s=t.pathname.split("/");return s=["gateway","api",...s.slice(1)],`${t.origin}/${s.join("/")}${t.search}`}}catch(e){}return e}});
//# sourceMappingURL=FullPageEditorComponent.c0eae84b.js.map
