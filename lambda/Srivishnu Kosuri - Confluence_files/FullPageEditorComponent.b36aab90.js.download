function e(e,t,o,n){Object.defineProperty(e,t,{get:o,set:n,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var o=globalThis,n={},r={},i=o.parcelRequired477;null==i&&(i=function(e){var t=n[e];if(void 0!==t)return t.exports;var o=r[e];if(void 0!==o){delete r[e];var i={id:e,exports:{}};return n[e]=i,o.call(i.exports,i,i.exports),i.exports}var a=Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a},i.register=function(e,t){r[e]=t},o.parcelRequired477=i);var a=i.register;o.lb||(o.lb=new Set,o.bq=[],o.rlb=e=>{o.lb.add(e),o.pq()},o.rwr=(e,t,n)=>{o.bq.push({b:e,r:t,d:n}),o.pq()},o.pq=()=>{var e=o.bq.find(e=>e.d.every(e=>o.lb.has(e)));e&&(o.bq=o.bq.filter(t=>t.b!==e.b),e.r(),o.pq())}),a("1JdaQ",function(e,t){var o=i("42omo");e.exports.usePreset=function(e,t=[]){let[n,r]=(0,o.useState)(void 0),a=(0,o.useMemo)(()=>e(new(0,i("bupcf").EditorPresetBuilder)),t);return(0,o.useLayoutEffect)(()=>a.apiResolver.on(e=>{r(e)}),[a.apiResolver]),{editorApi:n,preset:a}}}),a("bupcf",function(e,t){class o{add(e){return new o(e,...this.data)}maybeAdd(e,t){let n="function"==typeof t?t(e,this):t;return n instanceof o?n:new o(...[n?e:void 0,...this.data])}has(e){return this.data.some(t=>Array.isArray(t)?t[0]===e:t===e)}build({pluginInjectionAPI:e,excludePlugins:t}={}){let o=new Set(t||[]),n=this.processEditorPlugins({pluginInjectionAPI:e,excludePlugins:o});return e&&(this.apiEmitter(e.api()),this.resolver?.(e.api())),this.removeExcludedPlugins(n,o)}verifyDuplicatedPlugins(){let e=new Set;return this.data.filter(Boolean).forEach(t=>{let[o,n]=Array.isArray(t)?t:[t,void 0];if(e.has(o))throw Error(`${o} is already included!`);e.add(o)}),!0}processEditorPlugins({pluginInjectionAPI:e,excludePlugins:t}){this.verifyDuplicatedPlugins();let o=new Set;return this.data.slice().reverse().filter(Boolean).map(n=>{let[r,i]=this.safeEntry(n);if(o.has(r)||(o.add(r),"function"!=typeof r))return null;let a=r(e?{config:i,api:e.api()}:{config:i});return a&&t?.has(a.name)?null:(e&&e.onEditorPluginInitialized(a),a)}).filter(Boolean)}removeExcludedPlugins(e,t){return t?e.filter(e=>!e||!t.has(e.name)):e}constructor(...e){this.data=void 0,this.apiPromise=void 0,this.resolver=void 0,this.apiResolver=void 0,this.apiEmitter=()=>{},this.safeEntry=e=>Array.isArray(e)?e:[e,void 0],this.data=[...e],this.apiPromise=new Promise(e=>this.resolver=e),this.apiResolver=new n(e=>this.apiEmitter=e)}}class n{on(e){return void 0!==this.initialEvent&&Promise.resolve().then(()=>e(this.initialEvent)),this.eventDispatcher.on(this.key,e),()=>{this.eventDispatcher.off(this.key,e)}}destroy(){this.eventDispatcher.destroy()}constructor(e){this.emitter=e,this.eventDispatcher=new(0,i("5vVM5").EventDispatcher),this.key="api-resolved-event",this.initialEvent=void 0,this.emitter(e=>{this.initialEvent=e,this.eventDispatcher.emit(this.key,e)})}}e.exports.EditorPresetBuilder=o}),a("2P8JV",function(t,o){e(t.exports,"basePlugin",()=>i("fi7Vj").default)}),a("fi7Vj",function(e,t){let o=new(0,i("ks2lK").PluginKey)("scrollGutter"),n=e=>{if(e)return o.getState(e)},r=e=>(t,n)=>{let{tr:r}=t;return r.setMeta(o,{keyboardHeight:e}),n&&n(r),!0};var a=i("1oCLl"),s=e=>new(0,i("1S4f7").SafePlugin)({key:new(0,i("ks2lK").PluginKey)("disableSpellchecking"),props:{attributes:t=>{if(!e)return{};let o=e.disableSpellcheckByBrowser,n=(0,a.expValEquals)("platform_editor_hydratable_ui","isEnabled",!0)?(0,i("d7ZU3").getBrowserInfo)():i("d7ZU3").browser,r=function(e){switch(!0){case!0===e.chrome:return{browser:"chrome",version:e.chrome_version};case!0===e.ie:return{browser:"ie",version:e.ie_version};case!0===e.gecko:return{browser:"gecko",version:e.gecko_version};case!0===e.safari:return{browser:"safari",version:e.safari_version}}}(n);if(!r||!o)return{};let s=o[r.browser];return s&&n[r.browser]&&(s.maximum?r.version>=s.minimum&&r.version<=s.maximum:n[r.browser]&&r.version>=s.minimum)?{spellcheck:"false"}:{}}}});let l=e=>(e.steps||[]).some(e=>e.from>e.to);var d=e=>new(0,i("1S4f7").SafePlugin)({filterTransaction:t=>!l(t)||(console.warn("The transaction was blocked because it contains invalid steps",t.steps),e({action:i("d925B").ACTION.DISCARDED_INVALID_STEPS_FROM_TRANSACTION,actionSubject:i("d925B").ACTION_SUBJECT.EDITOR,attributes:{analyticsEventPayloads:(0,i("4VpM8").getAnalyticsEventsFromTransaction)(t)},eventType:i("d925B").EVENT_TYPE.OPERATIONAL}),!1)});let c=e=>e,p=e=>performance.now()-e;class u{start(){let e=performance.now();return this.samples.length+1===this.samplingRate&&this.onSampleStart?.(),()=>{if(null===e)return;let t=!1,o=p(e);this.push(o),o>this.slowThreshold&&(this.onSlowInput?.(o),t=!0),this.samples.length===this.samplingRate&&(this.flush(),this.onSampleEnd?.(o,{isSlow:t,severity:this.severity(o)}))}}flush(){0!==this.samples.length&&(this.dispatch(),this.samples=[],this.total=0)}dispatch(){this.dispatchSample?.(this.getLast(),this.severity(this.getLast()));let e=this.getMedian();this.dispatchAverage?.({mean:this.getMean(),median:e,sampleSize:this.samples.length},this.severity(e))}push(e){this.samples.push(e),this.total+=e}severity(e){return(0,i("lWghV").getAnalyticsEventSeverity)(e,this.normalThreshold,this.degradedThreshold)}getLast(){return this.samples[this.samples.length-1]}getMean(){return this.total/this.samples.length}getMedian(){if(1===this.samples.length)return this.samples[0];this.samples.sort((e,t)=>e-t);let e=(this.samples.length+1)/2,t=Math.floor(e);return 0==e%t?this.samples[e-1]:(this.samples[t-1]+this.samples[t])/2}constructor({samplingRate:e,slowThreshold:t,normalThreshold:o,degradedThreshold:n,dispatchAverage:r,dispatchSample:i,onSampleStart:a,onSampleEnd:s,onSlowInput:l}){this.samples=[],this.total=0,this.samplingRate=void 0,this.slowThreshold=void 0,this.normalThreshold=void 0,this.degradedThreshold=void 0,this.dispatchAverage=void 0,this.dispatchSample=void 0,this.onSampleStart=void 0,this.onSampleEnd=void 0,this.onSlowInput=void 0,this.samplingRate=e,this.slowThreshold=t,this.normalThreshold=o,this.degradedThreshold=n,this.dispatchAverage=r,this.dispatchSample=i,this.onSampleStart=a,this.onSampleEnd=s,this.onSlowInput=l}}let f=new(0,i("ks2lK").PluginKey)("frozenEditor"),h=e=>(t,o,n,r,a,s)=>{let{state:l}=o,d=r(l);return t({action:i("d925B").ACTION.BROWSER_FREEZE,actionSubject:i("d925B").ACTION_SUBJECT.EDITOR,attributes:{objectId:e?.sharedState.currentState()?.contextIdentifierProvider?.objectId,freezeTime:n,nodeSize:l.doc.nodeSize,...d,interactionType:a,severity:s},eventType:i("d925B").EVENT_TYPE.OPERATIONAL})};var m=e=>(t,o,n)=>{let r,a=null;n?.trackInteractionType&&(r=c(i("e2wMq").BROWSER_FREEZE_INTERACTION_TYPE.LOADING));let s=o&&"number"==typeof o.samplingRate?o.samplingRate:100,l=o&&o.countNodes,d=null,p={},m=e=>(e===d||(p=l?(0,i("dFD5l").countNodes)(e):{},d=e),p),g=o?.trackSeverity||!1,T=o?.severityNormalThreshold||100,E=o?.severityDegradedThreshold||500,b=(o,n)=>(r,a)=>{let{state:s}=n,l=m(s);t({action:o,actionSubject:i("d925B").ACTION_SUBJECT.EDITOR,attributes:{time:r,nodeSize:s.doc.nodeSize,...l,objectId:e?.sharedState.currentState()?.contextIdentifierProvider?.objectId,severity:g?a:void 0},eventType:i("d925B").EVENT_TYPE.OPERATIONAL})},S=(o,n)=>({mean:r,median:a,sampleSize:s},l)=>{let{state:d}=n,c=m(d);t({action:o,actionSubject:i("d925B").ACTION_SUBJECT.EDITOR,attributes:{mean:r,median:a,sampleSize:s,...c,nodeSize:d.doc.nodeSize,severity:g?l:void 0,objectId:e?.sharedState.currentState()?.contextIdentifierProvider?.objectId},eventType:i("d925B").EVENT_TYPE.OPERATIONAL})};return new(0,i("1S4f7").SafePlugin)({key:f,props:(0,i("aAn37").isPerformanceAPIAvailable)()?{handleTextInput:e=>(n?.trackInteractionType&&(r=i("e2wMq").BROWSER_FREEZE_INTERACTION_TYPE.TYPING),a&&requestAnimationFrame(a.start()),!1),handleDOMEvents:n?.trackInteractionType?{click:()=>(r=c(i("e2wMq").BROWSER_FREEZE_INTERACTION_TYPE.CLICKING),!1),paste:()=>(r=c(i("e2wMq").BROWSER_FREEZE_INTERACTION_TYPE.PASTING),!1)}:void 0}:void 0,view(o){let l;if(!(0,i("aAn37").isPerformanceObserverAvailable)())return{};a=new u({samplingRate:s,slowThreshold:300,normalThreshold:T,degradedThreshold:E,dispatchSample:b(i("d925B").ACTION.INPUT_PERF_SAMPLING,o),dispatchAverage:S(i("d925B").ACTION.INPUT_PERF_SAMPLING_AVG,o),onSlowInput:n=>{let{state:r}=o,a=m(r);t({action:i("d925B").ACTION.SLOW_INPUT,actionSubject:i("d925B").ACTION_SUBJECT.EDITOR,attributes:{time:n,nodeSize:r.doc.nodeSize,...a,objectId:e?.sharedState.currentState()?.contextIdentifierProvider?.objectId},eventType:i("d925B").EVENT_TYPE.OPERATIONAL})}});try{(l=new PerformanceObserver(a=>{let s=a.getEntries();for(let a=0;a<s.length;a++){let{duration:l}=s[a];l>600&&h(e)(t,o,l,m,n?.trackInteractionType?r:void 0,(0,i("lWghV").getAnalyticsEventSeverity)(l,T,E))}})).observe({entryTypes:["longtask"]})}catch(e){}return{destroy:()=>{a?.flush(),l?.disconnect()}}}})};let g=new(0,i("ks2lK").PluginKey)("inlineCursorTargetPlugin"),T=e=>{let t=e?.type===e?.type.schema.nodes.hardBreak;return e&&e.type.isInline&&!e.type.isText&&!t};var E=()=>new(0,i("1S4f7").SafePlugin)({key:g,state:{init:()=>({cursorTarget:void 0}),apply(e){let{selection:t,doc:o}=e,{$from:n,$to:r}=t,a=e.getMeta(g);if(t&&(0,i("kTbzR").isTextSelection)(t)&&!a){let e=T(n.nodeAfter),a=T(n.nodeBefore),s=0===n.parentOffset&&T(n.nodeAfter),l=o.resolve(n.pos).node().lastChild===n.nodeBefore&&T(n.nodeBefore),d=e=>{let o=document.createElement("span");o.contentEditable="true",o.setAttribute("aria-hidden","true"),o.appendChild(document.createTextNode(i("TfRUG").ZERO_WIDTH_SPACE)),o.className="cursor-target";let{$from:n}=t,r=n.pos,a=n.posAtIndex(Math.max(n.index()-1,0));return i("ftzrq").Decoration.widget("left"===e?a:r,o,{raw:!0,key:"inlineCursor"})};if((e||l)&&(a||s))return{cursorTarget:{decorations:[d("left"),d("right")],positions:{from:n.pos,to:r.pos}}}}return{cursorTarget:void 0}}},props:{decorations(e){var t;let{doc:o}=e,{cursorTarget:n}=g.getState(e);return!(t=n)||t.decorations.includes(null)?null:i("ftzrq").DecorationSet.create(o,n.decorations)},handleDOMEvents:{keydown:(e,t)=>(((0,a.expValEquals)("platform_editor_hydratable_ui","isEnabled",!0)?(0,i("d7ZU3").getBrowserInfo)():i("d7ZU3").browser).safari&&t instanceof KeyboardEvent&&t.shiftKey&&("ArrowLeft"===t.key||"ArrowRight"===t.key)&&e.dispatch(e.state.tr.setMeta(g,{cursorTarget:void 0})),!1),compositionend:(e,t)=>{let{state:o}=e,{cursorTarget:n}=g.getState(o);return void 0!==n&&(b({event:t,cursorTarget:n,view:e}),!0)},beforeinput:(e,t)=>{let{state:o}=e,{cursorTarget:n}=g.getState(o);return!t.isComposing&&void 0!==n&&(b({event:t,cursorTarget:n,view:e}),!0)}}}});function b({event:e,view:t,cursorTarget:o}){e.stopPropagation(),e.preventDefault();let n=e.data||"",r=t.state.tr;t.someProp("handleTextInput",e=>e(t,o.positions.from,o.positions.to,n))||(r.insertText(n),t.dispatch(r))}let S=new(0,i("ks2lK").PluginKey)("newlinePreserveMarksPlugin"),y=e=>!!e.selection.$to.parent.marks.find(t=>t.type===e.schema.marks.alignment),_=(e,t)=>(t&&t(e.tr.split(e.tr.mapping.map(e.selection.$from.pos),1)),!0);var C=()=>new(0,i("1S4f7").SafePlugin)({key:S,props:{handleKeyDown:(0,i("dus6D").keydownHandler)({Enter:(0,i("e7tBw").filterCommand)([i("2pjJ5").isSelectionEndOfParagraph,y],_)})}}),I=i("aeAfU");let O="editor-scroll-gutter";var k=(e={})=>{let{getScrollElement:t,gutterSize:n=120}=e;if(t)return new(0,i("1S4f7").SafePlugin)({key:o,state:{init:()=>({}),apply:(e,t)=>e.getMeta(o)?e.getMeta(o):t},props:{scrollThreshold:n,scrollMargin:n},view(e){let o=t(e),r=e.dom instanceof HTMLElement?e.dom:null,i=r?.parentElement,a=()=>{};return i&&o&&(a=function(e,t){if((0,I.expVal)("platform_editor_scroll_gutter_fix","isEnabled",!1)){let e=document.getElementById(O);if(e)return()=>t?.removeChild(e)}let o=document.createElement("div");return o.style.paddingBottom=`${e}px`,o.setAttribute("data-vc","scroll-gutter"),o.id=O,t&&t.appendChild(o),()=>t?.removeChild(o)}(n,i)),{destroy(){a(),i=r=null}}}})};let v=e=>{if(e){let t=n(e);return t?t.keyboardHeight:void 0}},x={enabled:!0,samplingRate:100,countNodes:!0,trackSeverity:!0,trackRenderingTime:!1,trackSingleKeypress:!1,severityDegradedThreshold:273,severityNormalThreshold:143},N={"…":"...","→":"->","←":"<-","–":"--","“":'"',"”":'"',"‘":"'","’":"'"},A=RegExp(`[${Object.keys(N).join("")}]`,"g");e.exports.default=({config:e,api:t})=>{let o=t?.featureFlags?.sharedState.currentState()||{},n=[];return t?.base?.actions.registerMarks(({tr:e,node:t,pos:o,from:n,to:r})=>{let{doc:i}=e,{schema:a}=i.type,{text:s}=a.nodes;if(t.type===s&&t.text){let s=Math.max(o,n),l=Math.min(o+t.nodeSize,r),d=i.textBetween(s,l).replace(A,e=>N[e]??e),c=e.mapping.map(s),p=e.mapping.map(l);e.replaceWith(c,p,a.text(d,t.marks))}}),{name:"base",getSharedState:t=>({allowScrollGutter:e?.allowScrollGutter,keyboardHeight:v(t)}),actions:{setKeyboardHeight:r,resolveMarks:(e,t,o)=>(function(e,t,o,n){let{doc:r}=o;r.nodesBetween(e,t,(r,i)=>{n.forEach(n=>n({tr:o,node:r,pos:i,from:e,to:t}))})})(e,t,o,n),registerMarks:e=>{n.push(e)}},pmPlugins(){let n=[{name:"filterStepsPlugin",plugin:({dispatchAnalyticsEvent:e})=>d(e)}];return n.push({name:"lazyNodeViewDecorationsPlugin",plugin:()=>new(0,i("1S4f7").SafePlugin)({key:i("ftpVl").lazyNodeViewDecorationPluginKey,state:{init:()=>({decorations:i("ftzrq").DecorationSet.empty,nodeTypes:[]}),apply(e,t,o){let n=e.getMeta(i("ftpVl").lazyNodeViewDecorationPluginKey),r=i("ftpVl").lazyNodeViewDecorationPluginKey.getState(o);if(n?.type==="add"&&n.nodeTypes.size){let t=[];return e.doc.nodesBetween(0,e.doc.nodeSize-2,(e,o)=>{n.nodeTypes.has(e.type.name)&&t.push(i("ftzrq").Decoration.node(o,o+e.nodeSize,{class:"__lazy-node-view-decoration__"}))}),{decorations:i("ftzrq").DecorationSet.create(e.doc,t)}}return n?.type==="clear"?{decorations:i("ftzrq").DecorationSet.empty}:e.docChanged?{decorations:r?.decorations.map(e.mapping,e.doc)}:r}},props:{decorations:e=>i("ftpVl").lazyNodeViewDecorationPluginKey.getState(e)?.decorations},view:e=>({update(){if(i("ftpVl").lazyNodeViewDecorationPluginKey.getState(e.state).decorations!==i("ftzrq").DecorationSet.empty){let t=e.state.tr;t.setMeta(i("ftpVl").lazyNodeViewDecorationPluginKey,{type:"clear"}),e.dispatch(t)}}})})}),n.push({name:"inlineCursorTargetPlugin",plugin:()=>e&&e.allowInlineCursorTarget?E():void 0}),n.push({name:"newlinePreserveMarksPlugin",plugin:C},{name:"frozenEditor",plugin:({dispatchAnalyticsEvent:e})=>m(t?.contextIdentifier)(e,x,void 0)},{name:"history",plugin:()=>(0,i("ke2AI").history)()},{name:"codeBlockIndent",plugin:()=>(0,i("60bKU").keymap)({...i("astHL").baseKeymap,"Mod-[":()=>!0,"Mod-]":()=>!0})}),e&&e.allowScrollGutter&&n.push({name:"scrollGutterPlugin",plugin:()=>k(e.allowScrollGutter)}),n.push({name:"disableSpellcheckingPlugin",plugin:()=>s(o)}),n},nodes:()=>[{name:"doc",node:i("jRrsu").doc},{name:"paragraph",node:i("eK2Ov").paragraph},{name:"text",node:i("bSuKu").text}]}}}),a("dFD5l",function(e,t){e.exports.countNodes=function(e){let t={},o={},n=e.schema.nodes,r=[n.extension?.name,n.inlineExtension?.name,n.bodiedExtension?.name,n.multiBodiedExtension?.name];return e.doc.descendants(e=>{let n=e.type.name;n in t?t[n]++:t[n]=1;let i=n;return r.includes(i)&&e.attrs?.extensionType&&((i=`${e.attrs.extensionType} - ${e.attrs?.extensionKey}`)in o?o[i]++:o[i]=1),!0}),{nodeCount:t,extensionNodeCount:o}}}),a("ftpVl",function(e,t){let o="requestIdleCallback"in window,n=(e,t)=>o?requestIdleCallback(e,{timeout:5e3,...t}):requestAnimationFrame(e),r=e=>o?cancelIdleCallback(e):cancelAnimationFrame(e),a=new(0,i("ks2lK").PluginKey)("lazyNodeViewDecoration"),s=new WeakMap,l=new WeakMap,d=new WeakMap,c=new WeakSet;e.exports.lazyNodeViewDecorationPluginKey=a,e.exports.withLazyLoading=({nodeName:e,loader:t,getNodeViewOptions:o})=>(p,u,f,h,m)=>{let g=s.get(u);g||(g=new Map,s.set(u,g));let T=l.get(u);if(T||l.set(u,new Map),g.has(e)){let t=T?.get(e);return t&&!c.has(u)?t(p,u,f,h,m):new(0,i("560vg").LazyNodeView)(p,u,f,h)}let E=t().then(t=>{let s=(e,n,r,a,s)=>{let l=t(e,n,r,a,o,s),d=l.dom;d.setAttribute("data-vc",`editor-lnv-loaded--${e.type.name}`);let c=r();return void 0!==c&&d.setAttribute("data-editor-lnv-placeholder-replace",(0,i("560vg").makeNodePlaceholderId)(e.type.name,c)),l};l.get(u)?.set(e,s);let[c,f]=d.get(u)||[null,new Set];c&&r(c),f.add(p.type.name);let h=n(()=>{d.set(u,[null,new Set]);let e=u.state.tr;e.setMeta(a,{type:"add",nodeTypes:f}),u.dispatch(e)});return d.set(u,[h,f]),s});return g.set(e,E),p.type?.spec?.toDOM,new(0,i("560vg").LazyNodeView)(p,u,f,h)}}),a("e7tBw",function(e,t){var o=i("dZ8uq");let n=e=>{let t=e;for(;t.pos<t.doc.nodeSize-2&&(t.pos===e.pos||t.parentOffset>0);)t=t.doc.resolve(t.pos+1);return{$pos:t,foundNode:t.pos<t.doc.nodeSize-2}};function r(e){let{selection:{$from:t}}=e,o=t.node(t.depth),n=!!o&&o.type===e.schema.nodes.codeBlock,r=e.selection instanceof i("ks2lK").NodeSelection;return t.depth>1||r||n}function a(e=!0){return function(t,o){let n,r=t.schema.nodes.paragraph;if(!r)return!1;if(t.selection instanceof i("ks2lK").TextSelection){if(function(e){let t=e.selection.$from.node(1);return t.isTextblock&&t.type!==e.schema.nodes.codeBlock&&2===t.nodeSize}(t))return!1;n=function(e,t){let o,{$from:n,$to:r}=e.selection;return t?r.end(0):n.start(0)}(t,e)}else n=function(e,t){let o,{$from:n,$to:r}=e.selection,a=e.selection instanceof i("ks2lK").NodeSelection&&e.doc.nodeAt(e.selection.$anchor.pos),s=a&&"mediaGroup"===a.type.name;return t?(o=r.end(r.depth),o=r.depth>0&&!s?o+1:o):(o=n.start(n.depth),o=n.depth>0&&!s?o-1:o),o}(t,e);let a=t.tr.insert(n,r.createAndFill());return a.setSelection(i("ks2lK").TextSelection.create(a.doc,n+1)),o&&o(a),!0}}e.exports.walkNextNode=n,e.exports.walkPrevNode=e=>{let t=e;for(;t.pos>0&&(t.pos===e.pos||t.parentOffset<t.parent.nodeSize-2);)t=t.doc.resolve(t.pos-1);return{$pos:t,foundNode:t.pos>0}},e.exports.insertNewLineWithAnalytics=e=>(0,i("dAtrv").withAnalytics)(e,{action:i("d925B").ACTION.INSERTED,actionSubject:i("d925B").ACTION_SUBJECT.TEXT,actionSubjectId:i("d925B").ACTION_SUBJECT_ID.LINE_BREAK,eventType:i("d925B").EVENT_TYPE.TRACK})(function(e,t){let{$from:o}=e.selection,n=o.parent,{hardBreak:r}=e.schema.nodes;if(r){let o=r.createChecked();if(n&&n.type.validContent(i("5SAOw").Fragment.from(o)))return t&&t(e.tr.replaceSelectionWith(o,!1)),!0}return e.selection instanceof i("ks2lK").TextSelection&&(t&&t(e.tr.insertText("\n")),!0)}),e.exports.createNewParagraphAbove=(e,t)=>!!(!function(e){let{selection:t}=e;return!(!(t instanceof i("ks2lK").NodeSelection&&(0,i("7iE7T").isMediaNode)(t.node))&&(!(t instanceof i("ks2lK").TextSelection)||(0,o.expValEqualsNoExposure)("platform_editor_block_menu","isEnabled",!0)||t.empty))||!function(e){let{selection:t}=e;return t.$from.pos===t.$from.depth}(e)}(e)&&r(e))&&(a(!1)(e,t),!0),e.exports.createParagraphNear=a,e.exports.createNewParagraphBelow=(e,t)=>!!(!function(e){let{selection:t}=e;return!(!(t instanceof i("ks2lK").NodeSelection&&(0,i("7iE7T").isMediaNode)(t.node))&&(!(t instanceof i("ks2lK").TextSelection)||(0,o.expValEqualsNoExposure)("platform_editor_block_menu","isEnabled",!0)||t.empty))||!function(e){let{selection:t,doc:o}=e;return o.nodeSize-t.$to.pos-2===t.$to.depth}(e)}(e)&&r(e))&&(a(!0)(e,t),!0),e.exports.deleteEmptyParagraphAndMoveBlockUp=e=>(t,o,r)=>{let{selection:{$from:{pos:a,parent:s},$head:l,empty:d},tr:c,doc:p}=t,{$pos:u}=n(l),f=p.nodeAt(u.pos-1);return!!(d&&f&&e(f)&&(0,i("kTbzR").isEmptyParagraph)(s)&&r?.endOfTextblock("right"))&&(c.deleteRange(a-1,a+1),o&&o(c),!0)},e.exports.insertContentDeleteRange=(e,t,o,n)=>{o.forEach(t=>{let[o,n]=t;e.insert(e.mapping.map(n),o)}),n.forEach(t=>{let[o,n]=t;e.delete(e.mapping.map(o),e.mapping.map(n))}),e.setSelection(new(0,i("ks2lK").TextSelection)(t(e)))},e.exports.isEmptySelectionAtStart=e=>{let{blockTaskItem:t}=e.schema.nodes,{empty:o,$from:n}=e.selection;if(t&&o&&(0,i("dh538").fg)("platform_editor_blocktaskitem_patch_2")){if(n.parent.isTextblock){let o=e.doc.resolve(n.start(n.depth-1)).parent;if(o.type===t){if(o.firstChild!==n.parent)return!1;{let e=n.start(n.depth);return n.pos===e}}}else if(n.parent.type===t){let e=0;if((0,i("dh538").fg)("platform_editor_blocktaskitem_patch_2")){let t=n.depth;e=n.start(t)}else{let t=n.depth-1;e=n.start(t)+1}return n.pos===e}}return o&&(0===n.parentOffset||e.selection instanceof i("adhil").GapCursorSelection)},e.exports.isEmptySelectionAtEnd=e=>{let{blockTaskItem:t}=e.schema.nodes,{empty:o,$from:n}=e.selection;if(t&&o&&(0,i("dh538").fg)("platform_editor_blocktaskitem_patch_3")){if(n.parent.isTextblock){let o=e.doc.resolve(n.end(n.depth-1)).parent;if(o.type===t){if(o.lastChild!==n.parent)return!1;{let e=n.end(n.depth);return n.pos===e}}}else if(n.parent.type===t){let e=n.end();return n.pos===e}}return o&&(n.end()===n.pos||e.selection instanceof i("adhil").GapCursorSelection)},e.exports.filterCommand=(e,t)=>function(o,n,r){return Array.isArray(e)||(e=[e]),!e.some(e=>!e(o,r))&&(t(o,n,r)||!1)}}),a("dAtrv",function(e,t){e.exports.withAnalytics=function(e,t,o){return n=>(r,i,a)=>n(r,n=>{if(i)if(t instanceof Function){let a=t(r,{currentDoc:n.doc});a&&(e?.attachAnalyticsEvent(a,o)(n),i(n))}else e?.attachAnalyticsEvent(t,o)(n),i(n)},a)}}),a("stVm3",function(t,o){e(t.exports,"betterTypeHistoryPlugin",()=>i("55skd").betterTypeHistoryPlugin)}),a("55skd",function(e,t){let o=new(0,i("ks2lK").PluginKey)("betterTypeHistoryPlugin"),n=e=>{let t=1===e.length&&e[0];if(!t||!t.docChanged||!t.isGeneric||!(t.selection instanceof i("ks2lK").TextSelection))return null;let{selection:o,steps:n}=t,r=n.filter(e=>e instanceof i("aXG5V").ReplaceStep||e instanceof i("aXG5V").ReplaceAroundStep);return o.$cursor&&1===r.length?r[0]:null},r=e=>{if(!(e.size>1&&2===e.content.childCount))return!1;let t=e.content.child(0),o=e.content.child(1);return t&&o&&t.type===o.type},a=(e,t)=>{let o=i("5SAOw").Fragment.from(t.text("\n"));return e.content.eq(o)};var s=()=>new(0,i("1S4f7").SafePlugin)({key:o,appendTransaction:(e,t,s)=>{if(e.find(e=>e.getMeta(o)))return(0,i("ke2AI").closeHistory)(s.tr);let l=n(e);if(!l)return;let d=(0,i("kTbzR").extractSliceFromStep)(l),{schema:c}=s;if(d&&(r(d)||a(d,c)))return(0,i("ke2AI").closeHistory)(s.tr)}});e.exports.betterTypeHistoryPlugin=()=>({name:"betterTypeHistory",actions:{flagPasteEvent:e=>(e.setMeta(o,!0),e)},pmPlugins:()=>[{name:"betterTypeHistory",plugin:()=>s()}]})}),a("cNucV",function(t,o){e(t.exports,"blockTypePlugin",()=>i("khxQ7").blockTypePlugin),i("khxQ7")}),a("khxQ7",function(e,o){var n=i("l998X");i("42omo");var r=i("3pLGZ"),a=i("dZ8uq"),s=i("iu6m9");let l=["heading","blockquote"],d=["em","code","strike","strong","underline","textColor","subsup","backgroundColor"],c={em:i("d925B").ACTION_SUBJECT_ID.FORMAT_ITALIC,code:i("d925B").ACTION_SUBJECT_ID.FORMAT_CODE,strike:i("d925B").ACTION_SUBJECT_ID.FORMAT_STRIKE,strong:i("d925B").ACTION_SUBJECT_ID.FORMAT_STRONG,underline:i("d925B").ACTION_SUBJECT_ID.FORMAT_UNDERLINE,textColor:i("d925B").ACTION_SUBJECT_ID.FORMAT_COLOR,subsup:"subsup",backgroundColor:i("d925B").ACTION_SUBJECT_ID.FORMAT_BACKGROUND_COLOR},p=(e,t,o,n)=>{e.forEachCell((e,r)=>{t.nodesBetween(r,r+e.nodeSize,o,n)})};function u(e,t,o,n,r){return function(a,s){if(a.type===o)if(o.isTextblock)return t.setNodeMarkup(s,e.nodes.paragraph),r.push(n),!1;else{let e=t.doc.resolve(s+1),o=t.doc.resolve(s+a.nodeSize-1),l=e.blockRange(o);if(l){let e=(0,i("aXG5V").liftTarget)(l);(e||0===e)&&(r.push(n),t.lift(l,e))}}return!0}}function f(e){return({tr:t})=>{let o,{heading:n,paragraph:r}=t.doc.type.schema.nodes;for(let e of(0,i("kTbzR").filterChildrenBetween)(t.doc,t.selection.from,t.selection.to,e=>e.type===n||e.type===r)){let t=e.node.type===n?e.node.attrs.level:0;if(o){if(t!==o){o=void 0;break}}else o=t}return e(o)({tr:t})}}function h(e,t,o){return f(n=>({tr:r})=>(t?.attachAnalyticsEvent({action:i("d925B").ACTION.FORMATTED,actionSubject:i("d925B").ACTION_SUBJECT.TEXT,eventType:i("d925B").EVENT_TYPE.TRACK,actionSubjectId:i("d925B").ACTION_SUBJECT_ID.FORMAT_HEADING,attributes:{inputMethod:e,newHeadingLevel:0,previousHeadingLevel:n}})(r),function({tr:e}){let{selection:t,doc:{type:{schema:n}}}=e;return(t instanceof i("7XFGZ").CellSelection?t.ranges:[t]).forEach(({$from:t,$to:r})=>{if(o){let o=t.blockRange(r);if(!o)return;let a=(0,i("aXG5V").liftTarget)(o);(a||0===a)&&e.lift(o,a);let s=e.mapping.map(t.pos),l=e.mapping.map(r.pos);e.setBlockType(s,l,n.nodes.paragraph,{})}else e.setBlockType(t.pos,r.pos,n.nodes.paragraph)}),e}({tr:r})))}let m=(e,t,o,n)=>f(r=>({tr:a})=>(o?.attachAnalyticsEvent({action:i("d925B").ACTION.FORMATTED,actionSubject:i("d925B").ACTION_SUBJECT.TEXT,eventType:i("d925B").EVENT_TYPE.TRACK,actionSubjectId:i("d925B").ACTION_SUBJECT_ID.FORMAT_HEADING,attributes:{inputMethod:t,newHeadingLevel:e,previousHeadingLevel:r}})(a),function({tr:t}){let{selection:o,doc:{type:{schema:r}}}=t;return(o instanceof i("7XFGZ").CellSelection?o.ranges:[o]).forEach(({$from:o,$to:a})=>{if(n){let n=o.blockRange(a);if(!n)return;let s=(0,i("aXG5V").liftTarget)(n);(s||0===s)&&t.lift(n,s);let l=t.mapping.map(o.pos),d=t.mapping.map(a.pos);t.setBlockType(l,d,r.nodes.heading,{level:e})}else t.setBlockType(o.pos,a.pos,r.nodes.heading,{level:e})}),t}({tr:a}))),g=(e,t)=>(0,i("dAtrv").withAnalytics)(t,{action:i("d925B").ACTION.FORMATTED,actionSubject:i("d925B").ACTION_SUBJECT.TEXT,eventType:i("d925B").EVENT_TYPE.TRACK,actionSubjectId:i("d925B").ACTION_SUBJECT_ID.FORMAT_BLOCK_QUOTE,attributes:{inputMethod:e}})(function(e,t){let{nodes:o}=e.schema;return!!o.paragraph&&!!o.blockquote&&(0,i("8vgNB").wrapSelectionIn)(o.blockquote)(e,t)}),T=e=>!!e&&i("boahT").WRAPPER_BLOCK_TYPES.some(t=>t.name===e.type.name),E=(e,t)=>(0,i("l03WE").createWrappingJoinRule)({nodeType:t,match:e,getAttrs:{},joinPredicate:(e,o)=>o.type===t}),b=({match:e,nodeType:t,getAttrs:o})=>(0,i("l03WE").createRule)(e,(e,n,r,i)=>{let a=Math.max(r,1),s=e.doc.resolve(a),l=o instanceof Function?o(n):o,d=s.node(-1);return d&&!d.canReplaceWith(s.index(-1),s.indexAfter(-1),t)?null:e.tr.delete(a,i).setBlockType(a,a,t,l)});function S(e){let t=function(e){let t=[];if(e.selection){let{$from:o,$to:n}=e.selection,{blockquote:r,panel:i,orderedList:a,bulletList:s,listItem:l,caption:d,codeBlock:c,decisionItem:p,decisionList:u,taskItem:f,taskList:h}=e.schema.nodes,m=[r,i,a,s,l,c,p,u,f,h];m.push(d),e.doc.nodesBetween(o.pos,n.pos,e=>{e.isBlock&&m.indexOf(e.type)>=0&&t.push(e.type)})}return t}(e),{panel:o,blockquote:n,bulletList:r,orderedList:i}=e.schema.nodes;if((0,s.editorExperiment)("platform_editor_blockquote_in_text_formatting_menu",!0)){let a=!1,s=!1,{$from:l,$to:d}=e.selection;return e.doc.nodesBetween(l.pos,d.pos,e=>(e.type===n&&(a=!0,e.descendants(e=>e.type!==r&&e.type!==i||(s=!0,!1))),!s)),t.filter(e=>e!==o).length>0&&(!a||s)}return t.filter(e=>e!==o).length>0}let y=e=>{let{from:t,to:o}=e.selection,n=!1;return e.doc.nodesBetween(t,o,e=>-1===i("boahT").FORMATTING_NODE_TYPES.indexOf(e.type.name)||(n=!0,!1)),n},_=e=>i("boahT").FORMATTING_MARK_TYPES.filter(t=>{if(e.schema.marks[t]){let{$from:o,empty:n}=e.selection,{marks:r}=e.schema;return n?!!r[t].isInSet(e.storedMarks||o.marks()):(0,i("l6xRR").anyMarkActive)(e,r[t])}return!1}).length>0,C=e=>_(e)||y(e),I=e=>!!e.find(e=>"blockquote"===e.name);function O(e){return{level:e[1].length}}var k=function(e,t,o){let n=[];if(t.nodes.heading&&n.push(...function(e,t){var o;let n=(o=t.nodes.heading,b({match:RegExp("^(#{1,6})\\s$"),nodeType:o,getAttrs:O})),r=(0,i("l03WE").createRule)(RegExp(`${i("14sLv").leafNodeReplacementCharacter}(#{1,6})\\s$`),(e,o,n,r)=>{let a=o[1].length;return(0,i("afcIe").insertBlock)(e,t.nodes.heading,n,r,{level:a})}),a=(0,i("l03WE").inputRuleWithAnalytics)((e,t)=>({action:i("d925B").ACTION.FORMATTED,actionSubject:i("d925B").ACTION_SUBJECT.TEXT,eventType:i("d925B").EVENT_TYPE.TRACK,actionSubjectId:i("d925B").ACTION_SUBJECT_ID.FORMAT_HEADING,attributes:{inputMethod:i("d925B").INPUT_METHOD.FORMATTING,newHeadingLevel:O(t).level}}),e);return[a(n),a(r)]}(e,t)),t.nodes.blockquote&&n.push(...function(e,t){let o=E(/^\s*>\s$/,t.nodes.blockquote),n=(0,i("l03WE").createRule)(RegExp(`${i("14sLv").leafNodeReplacementCharacter}\\s*>\\s$`),(e,o,n,r)=>(0,i("afcIe").insertBlock)(e,t.nodes.blockquote,n,r)),r=(0,i("l03WE").inputRuleWithAnalytics)({action:i("d925B").ACTION.FORMATTED,actionSubject:i("d925B").ACTION_SUBJECT.TEXT,eventType:i("d925B").EVENT_TYPE.TRACK,actionSubjectId:i("d925B").ACTION_SUBJECT_ID.FORMAT_BLOCK_QUOTE,attributes:{inputMethod:i("d925B").INPUT_METHOD.FORMATTING}},e);return[r(o),r(n)]}(e,t)),0!==n.length)return new(0,i("1S4f7").SafePlugin)((0,i("aIMBk").createPlugin)("block-type",n,{isBlockNodeRule:!0}))};let v=e=>{let{selection:{$from:t,$to:o}}=e,n=t.blockRange(o);if(!n)return!1;let r=t.depth===o.depth&&t.depth-1===n.depth,i=!!o.nodeAfter;return!r&&!i},x=(e,t)=>{if(e.selection.empty||!(e.selection instanceof i("ks2lK").TextSelection)||!v(e))return!1;let{tr:o}=e;o.deleteSelection();let n=Math.min(Math.max(e.selection.$from.pos,0),o.doc.content.size);return o.setSelection(i("ks2lK").Selection.near(o.doc.resolve(n),-1)),t&&t(o.scrollIntoView()),!0};var N=i("8m4tT");let A=e=>{if(!(e.selection instanceof i("ks2lK").NodeSelection&&"decisionItem"===e.selection.node.type.name))return!1;let t=(0,N.findParentNodeOfType)([e.schema.nodes.decisionList])(e.selection)?.node;return t?.childCount===1},P=e=>!!(e.selection instanceof i("ks2lK").NodeSelection&&"media"===e.selection.node.type.name&&"mediaGroup"===e.selection.$head.parent.type.name);function M(e){return(t,o)=>{let{tr:n,selection:{$from:r,$to:a},doc:s}=t;if(r.pos===a.pos)return!1;let l=!1;if(s.nodesBetween(r.pos,a.pos,(t,o)=>{if(e(t))return l=!0,!1}),!l)return!1;let d=(0,N.hasParentNodeOfType)([t.schema.nodes.panel])(t.selection),c=(0,N.hasParentNodeOfType)([t.schema.nodes.blockquote])(t.selection);return(d||c)&&P(t)||d&&A(t)?(n.setSelection(new(0,i("ks2lK").TextSelection)(n.doc.resolve(r.before()))),n.delete(r.before(),r.after())):n.delete(r.pos,a.pos),o&&o(n),!0}}let R=(0,i("astHL").chainCommands)((e,t)=>{let{$cursor:o}=e.selection;if(o&&!o.nodeBefore&&!o.nodeAfter&&1===o.pos){let{tr:n,schema:r}=e,{paragraph:i}=r.nodes,{parent:a}=o;return n.setNodeMarkup(0,i,a.attrs,[]),t&&t(n),!0}return!1},M(T),x),w=(0,i("astHL").chainCommands)((0,i("e7tBw").deleteEmptyParagraphAndMoveBlockUp)(T),M(T),x);var L=i("1oCLl");let B=[48,49,50,51,52,53,54],D=[96,97,98,99,100,101,102],U=(e,t)=>{if(e.type===t.nodes.heading){let t=i("boahT").HEADINGS_BY_LEVEL[e.attrs.level];if(t)return t}else if(e.type===t.nodes.paragraph)return i("boahT").NORMAL_TEXT;else if(e.type===t.nodes.blockquote)return i("boahT").BLOCK_QUOTE;return i("boahT").OTHER},K=(e,t)=>{switch(e){case i("boahT").NORMAL_TEXT:return!!t.schema.nodes.paragraph;case i("boahT").HEADING_1:case i("boahT").HEADING_2:case i("boahT").HEADING_3:case i("boahT").HEADING_4:case i("boahT").HEADING_5:case i("boahT").HEADING_6:return!!t.schema.nodes.heading;case i("boahT").BLOCK_QUOTE:return!!t.schema.nodes.blockquote;case i("boahT").CODE_BLOCK:return!!t.schema.nodes.codeBlock;case i("boahT").PANEL:return!!t.schema.nodes.panel}},j=(e,t)=>{let o;if(!t.selection)return i("boahT").NORMAL_TEXT;let{$from:n,$to:r}=t.selection;return t.doc.nodesBetween(n.pos,r.pos,n=>{let r=e.filter(e=>e===U(n,t.schema));if(r.length>0)return o?o!==i("boahT").OTHER&&o!==r[0]&&(o=i("boahT").OTHER):o=r[0],!1}),o||i("boahT").OTHER},F=(e,t)=>0===e?h(i("d925B").INPUT_METHOD.FORMATTING,t):m(e,i("d925B").INPUT_METHOD.FORMATTING,t),G=new(0,i("ks2lK").PluginKey)("blockTypePlugin"),H=(e,t,o,n)=>{let r=e?.analytics?.actions,a=0;return new(0,i("1S4f7").SafePlugin)({appendTransaction(e,t,n){if(o){let e=n.doc.resolve(n.doc.content.size-1).node(1),{paragraph:t}=n.schema.nodes;if(e&&e.isBlock&&e.type!==t)if((0,i("dh538").fg)("platform_editor_fix_insert_paragraph_undo"))return n.tr.insert(n.doc.content.size,n.schema.nodes.paragraph.create());else return n.tr.insert(n.doc.content.size,n.schema.nodes.paragraph.create()).setMeta("addToHistory",!1)}},state:{init(e,t){let o=i("boahT").TEXT_BLOCK_TYPES.filter(e=>K(e,t)),r=i("boahT").WRAPPER_BLOCK_TYPES.filter(e=>K(e,t)),a=(0,i("boahT").getBlockTypesInDropdown)(n).filter(e=>K(e,t)),s=I(a)?C(t):void 0;return{currentBlockType:j(a,t),blockTypesDisabled:S(t),availableBlockTypes:o,availableWrapperBlockTypes:r,availableBlockTypesInDropdown:a,formattingIsPresent:s}},apply(e,o,n,r){let i={...o,currentBlockType:j(o.availableBlockTypesInDropdown,r),blockTypesDisabled:S(r),formattingIsPresent:I(o.availableBlockTypesInDropdown)?C(r):void 0};return(i.currentBlockType!==o.currentBlockType||i.blockTypesDisabled!==o.blockTypesDisabled||i.formattingIsPresent!==o.formattingIsPresent)&&t(G,i),i}},key:G,props:{handleKeyDown:(t,o)=>{let n=B.indexOf(o.keyCode);-1===n&&(0,i("dh538").fg)("platform_editor_heading_from_numpad")&&(n=D.indexOf(o.keyCode));let s=(0,L.expValEquals)("platform_editor_hydratable_ui","isEnabled",!0)?(0,i("d7ZU3").getBrowserInfo)():i("d7ZU3").browser;if(n>-1&&o.altKey){if(s.mac&&o.metaKey)return e?.core?.actions.execute(F(n,r))??!1;else if(!s.mac&&o.ctrlKey&&a!==o.DOM_KEY_LOCATION_RIGHT)return e?.core?.actions.execute(F(n,r))??!1}else"Alt"===o.key?a=o.location:o.altKey||(a=0);return!1}}})};var z=i("42omo"),V=i("h4TOP");let W=(0,i("9K4OG").css)({"& blockquote":{boxSizing:"border-box",color:"inherit",width:"100%",display:"inline-block",paddingLeft:"var(--ds-space-200, 16px)",borderLeft:`2px solid var(--ds-border, ${i("aFUXX").akEditorBlockquoteBorderColor})`,margin:`${i("aFUXX").blockNodesVerticalMargin} 0 0 0`,marginRight:0,"[dir='rtl'] &":{paddingLeft:0,paddingRight:"var(--ds-space-200, 16px)"},"&:first-child":{marginTop:0},"&::before":{content:"''"},"&::after":{content:"none"},"& p":{display:"block"},"& table, & table:last-child":{display:"inline-table"},"> .code-block:last-child, >.mediaSingleView-content-wrap:last-child, >.mediaGroupView-content-wrap:last-child":{display:"block"},"> .extensionView-content-wrap:last-child":{display:"block"}}}),q=()=>({".fabric-editor-block-mark.fabric-editor-alignment:not(:first-child)":{"> h1:first-child":{marginTop:"1.667em"}," > h2:first-child":{marginTop:"1.8em"},"> h3:first-child":{marginTop:"2em"},"> h4:first-child":{marginTop:"1.357em"},"> h5:first-child":{marginTop:"1.667em"},"> h6:first-child":{marginTop:"1.455em"}},".ProseMirror-gapcursor:first-child + .fabric-editor-block-mark.fabric-editor-alignment, .ProseMirror-widget:first-child + .fabric-editor-block-mark.fabric-editor-alignment, .ProseMirror-widget:first-child + .ProseMirror-widget:nth-child(2) + .fabric-editor-block-mark.fabric-editor-alignment":{"> :is(h1, h2, h3, h4, h5, h6):first-child":{marginTop:"0"}}}),X=e=>(0,i("dh538").fg)("platform_editor_typography_ugc")?(0,i("9K4OG").css)({"& h1":{font:(0,i("ilPbq").default)("editor.font.heading.h1"),marginBottom:0,marginTop:"1.45833em","& strong":{fontWeight:(0,i("ilPbq").default)("editor.font.weight.heading.h1.bold")},"&::before":{}},"& h2":{font:(0,i("ilPbq").default)("editor.font.heading.h2"),marginTop:"1.4em",marginBottom:0,"& strong":{fontWeight:(0,i("ilPbq").default)("editor.font.weight.heading.h1.bold")}},"& h3":{font:(0,i("ilPbq").default)("editor.font.heading.h3"),marginTop:"1.31249em",marginBottom:0,"& strong":{fontWeight:(0,i("ilPbq").default)("editor.font.weight.heading.h1.bold")}},"& h4":{font:(0,i("ilPbq").default)("editor.font.heading.h4"),marginTop:"1.25em","& strong":{fontWeight:(0,i("ilPbq").default)("editor.font.weight.heading.h1.bold")}},"& h5":{font:(0,i("ilPbq").default)("editor.font.heading.h5"),marginTop:"1.45833em",textTransform:"none","& strong":{fontWeight:(0,i("ilPbq").default)("editor.font.weight.heading.h1.bold")}},"& h6":{font:(0,i("ilPbq").default)("editor.font.heading.h6"),marginTop:"1.59091em",textTransform:"none","& strong":{fontWeight:(0,i("ilPbq").default)("editor.font.weight.heading.h1.bold")}},...q()}):(0,i("9K4OG").css)({"& h1":{fontSize:`${24/14}em`,fontStyle:"inherit",lineHeight:28/24,color:"var(--ds-text, #292A2E)",fontWeight:"var(--ds-font-weight-medium, 500)",letterSpacing:"-0.01em",marginBottom:0,marginTop:"1.667em"},"& h2":{fontSize:`${20/14}em`,fontStyle:"inherit",lineHeight:1.2,color:"var(--ds-text, #292A2E)",fontWeight:"var(--ds-font-weight-medium, 500)",letterSpacing:"-0.008em",marginTop:"1.8em",marginBottom:0},"& h3":{fontSize:`${16/14}em`,fontStyle:"inherit",lineHeight:1.25,color:"var(--ds-text, #292A2E)",fontWeight:"var(--ds-font-weight-semibold, 600)",letterSpacing:"-0.006em",marginTop:"2em",marginBottom:0},"& h4":{fontSize:"1em",fontStyle:"inherit",lineHeight:16/14,color:"var(--ds-text, #292A2E)",fontWeight:"var(--ds-font-weight-semibold, 600)",letterSpacing:"-0.003em",marginTop:"1.357em"},"& h5":{fontSize:`${12/14}em`,fontStyle:"inherit",lineHeight:16/12,color:"var(--ds-text, #292A2E)",fontWeight:"var(--ds-font-weight-semibold, 600)",marginTop:"1.667em",textTransform:"none"},"& h6":{fontSize:`${11/14}em`,fontStyle:"inherit",lineHeight:16/11,color:"var(--ds-text-subtlest, #6B6E76)",fontWeight:"var(--ds-font-weight-bold, 700)",marginTop:"1.455em",textTransform:"none"},...q()}),$=(e,t,o)=>{let n=t?`${e} { color: var(--ds-text, ${(0,i("dh538").fg)("platform_editor_updated_block_type_colors_a11y")?"#292A2E":"white"}) !important; }`:"";return()=>(0,i("9K4OG").css)("blockquote"===e?W:X(o),">{h1, h2, h3, h4, h5, h6{margin-top:0;}blockquote{padding-top:0;padding-bottom:0;margin-top:0;}}",n)},Y=(0,i("9K4OG").css)(i("6f5RK").shortcutStyle,{marginLeft:"var(--ds-space-200, 16px)",color:`var(--ds-icon, ${i("6fnsQ").N400})`}),J=(0,i("9K4OG").css)({color:`var(--ds-icon, ${i("6fnsQ").N400})`}),Z={name:"1eh91m4",styles:"margin-left:var(--ds-space-050, 4px);min-width:40px"},Q={name:"1t1gmw4",styles:"[data-role='droplistContent']{max-height:90vh;}"},ee=(0,i("ecnYn").xcss)({minWidth:"calc(80px + 2*var(--ds-space-075, 6px))",overflow:"hidden",padding:"space.075"}),et=(0,i("ecnYn").xcss)({padding:"space.100",minWidth:"calc(80px + 2*var(--ds-space-100, 8px))"}),eo=e=>{let o=e.blockTypeName||"",n=e.formatMessage(i("2zaaI").toolbarMessages.textStyles,{blockTypeName:o}),r=e.formatMessage(i("2zaaI").toolbarMessages.textStylesTooltip),s=(0,a.expValEqualsNoExposure)("platform_editor_controls","cohort","variant1")&&e.blockTypeIcon?e.blockTypeIcon:(0,i("9K4OG").jsx)(t(i("f8c3d")),{label:n,spacing:"spacious",color:"currentColor"}),l=(0,a.expValEqualsNoExposure)("platform_editor_controls","cohort","variant1")?"spacious":"none",d=e.isSmall||(0,a.expValEqualsNoExposure)("platform_editor_controls","cohort","variant1");return(0,i("9K4OG").jsx)(i("a4eZN").default,{spacing:e.isReducedSpacing?"none":"default",selected:e.selected,className:"block-type-btn",disabled:e.disabled,onClick:e.onClick,onKeyDown:e.onKeyDown,title:r,"aria-label":n,"aria-haspopup":!0,"aria-expanded":e["aria-expanded"],iconAfter:(0,i("9K4OG").jsx)("span",{css:[i("cORDs").wrapperStyle,e.isSmall&&Z],"data-testid":"toolbar-block-type-text-styles-icon"},(0,i("9K4OG").jsx)(t(z).Fragment,null,d&&s,(0,i("9K4OG").jsx)("span",{css:i("iMS6j").expandIconContainerStyle},(0,i("9K4OG").jsx)(t(i("ghftu")),{spacing:l,label:"",color:"currentColor",size:"small"}))))},!d&&(0,i("9K4OG").jsx)(i("6f0Oj").default,{xcss:[ee,e.isReducedSpacing&&et]},(0,i("9K4OG").jsx)(i("gtD4K").default,e.title||i("boahT").NORMAL_TEXT.title)))},en=(0,i("ecnYn").xcss)({flexShrink:0});class er extends t(z).PureComponent{componentDidMount(){let e=new(0,i("60yhz").default)(({typography:e})=>{e!==this.state.typographyTheme&&this.setState({typographyTheme:e})});this.setState({observer:e}),e.observe()}componentWillUnmount(){this.state.observer?.disconnect()}render(){let{active:e,isOpenedByKeyboard:o}=this.state,{popupsMountPoint:n,popupsBoundariesElement:r,popupsScrollableElement:a,isSmall:l,isReducedSpacing:d,currentBlockType:c,blockTypesDisabled:p,availableBlockTypes:u=[],availableBlockTypesInDropdown:f=[],shouldUseDefaultRole:h,intl:{formatMessage:m},api:g}=this.props;if(!u.some(e=>"heading"===e.nodeName))return null;let T=f.filter(e=>e.name===c?.name).map(e=>e.title),E=(0,i("9K4OG").jsx)(t(i("f8c3d")),{label:""}),b=c?.icon;if(!this.props.isDisabled&&!p){let t=this.createItems(),p=(0,i("9K4OG").jsx)(eo,{isSmall:l,isReducedSpacing:d,selected:e,disabled:!1,title:T[0],onClick:this.handleTriggerClick,onKeyDown:this.handleTriggerByKeyboard,formatMessage:m,"aria-expanded":e,blockTypeName:c?.name,blockTypeIcon:b||E});return(0,i("9K4OG").jsx)("span",{css:(0,s.editorExperiment)("platform_editor_blockquote_in_text_formatting_menu",!0)?[i("cORDs").wrapperStyle,Q]:i("cORDs").wrapperStyle},(0,i("9K4OG").jsx)(V.DropdownMenuWithKeyboardNavigation,{items:t,onOpenChange:this.onOpenChange,onItemActivated:this.handleSelectBlockType,isOpen:e,mountTo:n,boundariesElement:r,scrollableElement:a,zIndex:i("aFUXX").akEditorMenuZIndex,fitHeight:360,fitWidth:106,section:{hasSeparator:!0},shouldUseDefaultRole:h,shouldFocusFirstItem:()=>(o&&this.setState({...this.state,isOpenedByKeyboard:!1}),o)},(0,i("9K4OG").jsx)(i("6f0Oj").default,{xcss:en},p)),!g?.primaryToolbar&&(0,i("9K4OG").jsx)("span",{css:i("cORDs").separatorStyles}))}return(0,i("9K4OG").jsx)("span",{css:i("cORDs").wrapperStyle},(0,i("9K4OG").jsx)(eo,{isSmall:l,isReducedSpacing:d,selected:e,disabled:!0,title:T[0],onClick:this.handleTriggerClick,onKeyDown:this.handleTriggerByKeyboard,formatMessage:m,"aria-expanded":e,blockTypeName:c?.name,blockTypeIcon:b||E}),!g?.primaryToolbar&&(0,i("9K4OG").jsx)("span",{css:i("cORDs").separatorStyles}))}constructor(...e){super(...e),this.state={active:!1,isOpenedByKeyboard:!1,typographyTheme:void 0,observer:null},this.onOpenChange=e=>{this.setState({...this.state,active:e.isOpen,isOpenedByKeyboard:e.isOpenedByKeyboard})},this.handleTriggerClick=()=>{this.onOpenChange({isOpen:!this.state.active,isOpenedByKeyboard:!1})},this.handleTriggerByKeyboard=e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),this.onOpenChange({isOpen:!this.state.active,isOpenedByKeyboard:!0}))},this.createItems=()=>{let{intl:{formatMessage:e},currentBlockType:t,availableBlockTypesInDropdown:o,formattingIsPresent:n}=this.props,r=(o??[]).map((o,n)=>{let r=t===o,a=o.tagName||"p",l=Array.isArray(o.title.defaultMessage)?o.title.defaultMessage.find(e=>"value"in e):o.title.defaultMessage,d="string"==typeof l?l:l&&"value"in l?l.value:"",c=(0,i("hgeg8").findKeymapByDescription)(d),p=o?.icon;return{content:(0,i("9K4OG").jsx)("div",{css:$(a,r,this.state.typographyTheme)},(0,i("9K4OG").jsx)(a,null,e(o.title))),value:o,"aria-label":(0,i("hgeg8").tooltip)(c,e(o.title)),key:`${o.name}-${n}`,elemBefore:(0,s.editorExperiment)("platform_editor_controls","variant1")?p:void 0,elemAfter:(0,i("9K4OG").jsx)("div",{css:[Y,r&&J]},(0,i("hgeg8").tooltip)(c)),isActive:r}});return(o??[]).map(e=>e.name).includes("blockquote")&&(0,s.editorExperiment)("platform_editor_controls","control")?[{items:r},{items:[{content:(0,i("9K4OG").jsx)("div",null,(0,i("9K4OG").jsx)("p",null,i("2zaaI").toolbarMessages.clearFormatting.defaultMessage)),value:{name:"clearFormatting"},"aria-label":(0,i("hgeg8").tooltip)(i("hgeg8").clearFormatting,i("2zaaI").toolbarMessages.clearFormatting.defaultMessage),key:"clear-formatting",elemAfter:(0,i("9K4OG").jsx)("div",{css:[Y]},(0,i("hgeg8").tooltip)(i("hgeg8").clearFormatting)),isActive:!1,isDisabled:t===i("boahT").NORMAL_TEXT&&!n}]}]:[{items:r}]},this.handleSelectBlockType=({item:e,shouldCloseMenu:t=!0})=>{let o=e.value;if("blockquote"===o.name)this.props.wrapBlockQuote(o.name);else if("clearFormatting"===o.name)this.props.clearFormatting();else{let e=this.props.currentBlockType?.name==="blockquote";this.props.setTextLevel(o.name,e)}t&&this.setState({...this.state,active:!1})}}}var ei=(0,i("gmMgo").default)(er);let ea={isSmall:!0,disabled:!1,isToolbarReducedSpacing:!0,shouldUseDefaultRole:!1};function es({api:e}){let{currentBlockType:t,blockTypesDisabled:o,availableBlockTypes:r,availableBlockTypesInDropdown:a,formattingIsPresent:l}=(0,i("eiA8Z").useSharedPluginStateWithSelector)(e,["blockType"],e=>({currentBlockType:e.blockTypeState?.currentBlockType,blockTypesDisabled:e.blockTypeState?.blockTypesDisabled,availableBlockTypes:e.blockTypeState?.availableBlockTypes,availableBlockTypesInDropdown:e.blockTypeState?.availableBlockTypesInDropdown,formattingIsPresent:e.blockTypeState?.formattingIsPresent})),d=(0,z.useCallback)((t,o)=>e?.core?.actions.execute(e?.blockType?.commands?.setTextLevel(t,i("d925B").INPUT_METHOD.FLOATING_TB,o)),[e]),c=(0,z.useCallback)(()=>e?.core?.actions.execute(e?.blockType?.commands?.insertBlockQuote(i("d925B").INPUT_METHOD.FLOATING_TB)),[e]),p=(0,z.useCallback)(()=>e?.core?.actions.execute(e?.blockType?.commands?.clearFormatting(i("d925B").INPUT_METHOD.FLOATING_TB)),[e]);return(0,n.jsx)(ei,{isSmall:ea.isSmall,isDisabled:ea.disabled,isReducedSpacing:!(0,s.editorExperiment)("platform_editor_controls","variant1")&&ea.isToolbarReducedSpacing,setTextLevel:d,currentBlockType:t,blockTypesDisabled:o,availableBlockTypes:r,availableBlockTypesInDropdown:a,formattingIsPresent:l,wrapBlockQuote:c,clearFormatting:p,shouldUseDefaultRole:ea.shouldUseDefaultRole,api:e})}function el({api:e,isSmall:t,disabled:o,isToolbarReducedSpacing:r,popupsMountPoint:a,popupsBoundariesElement:s,popupsScrollableElement:l,shouldUseDefaultRole:d}){let{currentBlockType:c,blockTypesDisabled:p,availableBlockTypes:u,availableBlockTypesInDropdown:f,formattingIsPresent:h}=(0,i("eiA8Z").useSharedPluginStateWithSelector)(e,["blockType"],e=>({currentBlockType:e.blockTypeState?.currentBlockType,blockTypesDisabled:e.blockTypeState?.blockTypesDisabled,availableBlockTypes:e.blockTypeState?.availableBlockTypes,availableBlockTypesInDropdown:e.blockTypeState?.availableBlockTypesInDropdown,formattingIsPresent:e.blockTypeState?.formattingIsPresent}));return(0,n.jsx)(ei,{isSmall:t,isDisabled:o,isReducedSpacing:r,setTextLevel:(t,o)=>e?.core?.actions.execute(e?.blockType?.commands?.setTextLevel(t,i("d925B").INPUT_METHOD.TOOLBAR,o)),wrapBlockQuote:()=>e?.core?.actions.execute(e?.blockType?.commands?.insertBlockQuote(i("d925B").INPUT_METHOD.TOOLBAR)),clearFormatting:()=>e?.core?.actions.execute(e?.blockType?.commands?.clearFormatting(i("d925B").INPUT_METHOD.TOOLBAR)),currentBlockType:c,blockTypesDisabled:p,availableBlockTypes:u,availableBlockTypesInDropdown:f,formattingIsPresent:h,popupsMountPoint:a,popupsBoundariesElement:s,popupsScrollableElement:l,shouldUseDefaultRole:d,api:e})}i("42omo"),i("42omo"),i("42omo");let ed={normal:"_11c82smr",heading1:"_11c81c04",heading2:"_11c8nf1z",heading3:"_11c8lodh",heading4:"_11c8nbxd",heading5:"_11c8140y",heading6:"_11c81vhk"},ec={normal:i("hgeg8").setNormalText,heading1:i("hgeg8").toggleHeading1,heading2:i("hgeg8").toggleHeading2,heading3:i("hgeg8").toggleHeading3,heading4:i("hgeg8").toggleHeading4,heading5:i("hgeg8").toggleHeading5,heading6:i("hgeg8").toggleHeading6},ep=({blockType:e,api:t})=>{let{formatMessage:o}=(0,i("8C5kA").default)(),r=(0,i("b3YrF").useSharedPluginStateSelector)(t,"blockType.currentBlockType"),a=(0,i("b3YrF").useSharedPluginStateSelector)(t,"blockType.availableBlockTypesInDropdown");if(!a?.some(t=>t.name===e.name))return null;let s=r?.name==="blockquote",l=(0,i("hgeg8").formatShortcut)(ec[e.name]);(0,L.expValEquals)("platform_editor_toolbar_aifc_patch_3","isEnabled",!0);let d=(0,L.expValEquals)("platform_editor_toolbar_aifc_patch_3","isEnabled",!0)?r?.name===e.name:r===e;return(0,n.jsx)(i("2GVu1").ToolbarDropdownItem,{elemBefore:e.icon,elemAfter:l?(0,n.jsx)(i("jbmmV").ToolbarKeyboardShortcutHint,{shortcut:l}):void 0,onClick:()=>{t?.core?.actions.execute(t?.blockType?.commands?.setTextLevel(e.name,i("d925B").INPUT_METHOD.TOOLBAR,s))},isSelected:d,ariaKeyshortcuts:l,children:(0,n.jsx)(i("gdv5Z").default,{xcss:ed[e.name],children:o(e.title)})})};i("42omo");let eu=({blockType:e,api:t})=>{let{formatMessage:o}=(0,i("8C5kA").default)(),r=(0,i("b3YrF").useSharedPluginStateSelector)(t,"blockType.availableBlockTypesInDropdown"),a=(0,i("b3YrF").useSharedPluginStateSelector)(t,"blockType.currentBlockType");if(!r?.some(t=>t.name===e.name))return null;let s=(0,i("hgeg8").formatShortcut)(i("hgeg8").toggleBlockQuote);return(0,n.jsx)(i("2GVu1").ToolbarDropdownItem,{elemBefore:e.icon,elemAfter:s?(0,n.jsx)(i("jbmmV").ToolbarKeyboardShortcutHint,{shortcut:s}):void 0,onClick:()=>{t?.core?.actions.execute(t?.blockType?.commands?.insertBlockQuote(i("d925B").INPUT_METHOD.TOOLBAR))},isSelected:a===e,ariaKeyshortcuts:s,children:o(e.title)})},ef=(0,i("dTb09").conditionalHooksFactory)(()=>(0,L.expValEquals)("platform_editor_toolbar_aifc_patch_3","isEnabled",!0),e=>(0,i("eiA8Z").useSharedPluginStateWithSelector)(e,["blockType"],e=>({blockTypesDisabled:e.blockTypeState?.blockTypesDisabled,currentBlockType:e.blockTypeState?.currentBlockType})),e=>({blockTypesDisabled:(0,i("b3YrF").useSharedPluginStateSelector)(e,"blockType.blockTypesDisabled"),currentBlockType:(0,i("b3YrF").useSharedPluginStateSelector)(e,"blockType.currentBlockType")})),eh=({api:e,children:o})=>{let{formatMessage:r}=(0,i("8C5kA").default)(),{blockTypesDisabled:a,currentBlockType:s}=ef(e),l=(0,i("boahT").toolbarBlockTypesWithRank)(),{editorAppearance:d}=(0,i("gzUv9").useEditorToolbar)(),c=Object.values(l).find(e=>e.name===s?.name)?.icon?.type,p=l.normal,u=(0,z.useMemo)(()=>{if("full-page"===d){let e=s&&c,o=e?c:t(i("f8c3d"));return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o,{label:"",size:"small"}),e?r(s.title):r(p.title)]})}return c?(0,n.jsx)(c,{label:`${s?.name} ${r(i("2zaaI").toolbarMessages.textStylesTooltip)}`,size:"small"}):(0,n.jsx)(t(i("f8c3d")),{label:r(i("2zaaI").toolbarMessages.textStylesTooltip),size:"small"})},[d,s,c,p,r]);return(0,n.jsx)(i("iIVVb").ToolbarTooltip,{content:r(i("2zaaI").toolbarMessages.textStylesTooltip),children:(0,n.jsx)(i("bTiiT").ToolbarDropdownMenu,{isDisabled:a,iconBefore:u,children:o})})},em=e=>{let t=[{type:i("cPCP8").TEXT_STYLES_GROUP.type,key:i("cPCP8").TEXT_STYLES_GROUP.key,parents:[{type:i("cPCP8").TEXT_SECTION.type,key:i("cPCP8").TEXT_SECTION.key,rank:i("4Chin").TEXT_SECTION_RANK[i("cPCP8").TEXT_STYLES_GROUP.key]},{type:i("cPCP8").TEXT_SECTION_PRIMARY_TOOLBAR.type,key:i("cPCP8").TEXT_SECTION_PRIMARY_TOOLBAR.key,rank:i("4Chin").TEXT_SECTION_PRIMARY_TOOLBAR_RANK[i("cPCP8").TEXT_STYLES_GROUP.key]}]},{type:i("cPCP8").TEXT_STYLES_MENU.type,key:i("cPCP8").TEXT_STYLES_MENU.key,parents:[{type:i("cPCP8").TEXT_STYLES_GROUP.type,key:i("cPCP8").TEXT_STYLES_GROUP.key,rank:i("4Chin").TEXT_STYLES_GROUP_RANK[i("cPCP8").TEXT_STYLES_MENU.key]}],component:({children:t})=>(0,n.jsx)(eh,{api:e,children:t})},{type:i("cPCP8").TEXT_STYLES_MENU_SECTION.type,key:i("cPCP8").TEXT_STYLES_MENU_SECTION.key,parents:[{type:i("cPCP8").TEXT_STYLES_MENU.type,key:i("cPCP8").TEXT_STYLES_MENU.key,rank:i("4Chin").TEXT_STYLES_MENU_RANK[i("cPCP8").TEXT_STYLES_MENU_SECTION.key]},...(0,L.expValEquals)("platform_editor_toolbar_aifc_responsive","isEnabled",!0)?[{type:i("cPCP8").TEXT_COLLAPSED_MENU.type,key:i("cPCP8").TEXT_COLLAPSED_MENU.key,rank:i("4Chin").TEXT_COLLAPSED_MENU_RANK[i("cPCP8").TEXT_STYLES_MENU_SECTION.key]}]:[]]}];return Object.values((0,i("boahT").toolbarBlockTypesWithRank)()).forEach(o=>{if(o.toolbarKey){let r={type:"menu-item",key:o.toolbarKey,parents:[{type:i("cPCP8").TEXT_STYLES_MENU_SECTION.type,key:i("cPCP8").TEXT_STYLES_MENU_SECTION.key,rank:o.toolbarRank}],component:"blockquote"===o.name?()=>(0,n.jsx)(eu,{blockType:o,api:e}):()=>(0,n.jsx)(ep,{blockType:o,api:e})};t.push(r)}}),t};i("42omo");let eg=[t(i("5wdIn")),t(i("45HPa")),t(i("7a8uv")),t(i("aYGvQ")),t(i("3yaUF")),t(i("l1461"))],eT=[i("2UWDO").messages.heading1,i("2UWDO").messages.heading2,i("2UWDO").messages.heading3,i("2UWDO").messages.heading4,i("2UWDO").messages.heading5,i("2UWDO").messages.heading6],eE="heading",eb=({level:e,api:t})=>{let{formatMessage:o}=(0,i("8C5kA").default)(),r=eg[e-1],a=eT[e-1];return t?.blockMenu?.actions.isTransformOptionDisabled(eE,{level:e})?null:(0,n.jsx)(i("2GVu1").ToolbarDropdownItem,{onClick:o=>{let n=o.nativeEvent instanceof KeyboardEvent||0===o.nativeEvent.detail?i("d925B").INPUT_METHOD.KEYBOARD:i("d925B").INPUT_METHOD.MOUSE,r=i("d925B").INPUT_METHOD.BLOCK_MENU;t?.core.actions.execute(({tr:o})=>{let i=t?.blockMenu?.commands.transformNode(o.doc.type.schema.nodes.heading,{inputMethod:r,triggeredFrom:n,targetTypeName:`${eE}${e}`,targetAttrs:{level:e}});return i?i({tr:o}):null})},elemBefore:(0,n.jsx)(r,{label:""}),children:o(a)})},eS=({level:e,api:t})=>()=>(0,n.jsx)(eb,{level:e,api:t});i("42omo");let ey="paragraph",e_=({api:e})=>{let{formatMessage:o}=(0,i("8C5kA").default)();return e?.blockMenu?.actions.isTransformOptionDisabled(ey)?null:(0,n.jsx)(i("2GVu1").ToolbarDropdownItem,{onClick:t=>{let o=t.nativeEvent instanceof KeyboardEvent||0===t.nativeEvent.detail?i("d925B").INPUT_METHOD.KEYBOARD:i("d925B").INPUT_METHOD.MOUSE,n=i("d925B").INPUT_METHOD.BLOCK_MENU;e?.core.actions.execute(({tr:t})=>{let r=e?.blockMenu?.commands.transformNode(t.doc.type.schema.nodes.paragraph,{inputMethod:n,triggeredFrom:o,targetTypeName:ey});return r?r({tr:t}):null})},elemBefore:(0,n.jsx)(t(i("eg9hW")),{label:""}),children:o(i("eKkkY").messages.paragraph)})},eC=({api:e})=>()=>(0,n.jsx)(e_,{api:e});i("42omo");let eI="blockquote",eO=({api:e})=>{let{formatMessage:o}=(0,i("8C5kA").default)();return e?.blockMenu?.actions.isTransformOptionDisabled(eI)?null:(0,n.jsx)(i("2GVu1").ToolbarDropdownItem,{onClick:t=>{let o=t.nativeEvent instanceof KeyboardEvent||0===t.nativeEvent.detail?i("d925B").INPUT_METHOD.KEYBOARD:i("d925B").INPUT_METHOD.MOUSE,n=i("d925B").INPUT_METHOD.BLOCK_MENU;e?.core.actions.execute(({tr:t})=>{let r=e?.blockMenu?.commands.transformNode(t.doc.type.schema.nodes.blockquote,{inputMethod:n,triggeredFrom:o,targetTypeName:eI});return r?r({tr:t}):null})},elemBefore:(0,n.jsx)(t(i("9RVmI")),{label:""}),children:o(i("2UWDO").messages.blockquote)})},ek=({api:e})=>()=>(0,n.jsx)(eO,{api:e}),ev=e=>[{type:"block-menu-item",key:i("btNLq").TRANSFORM_HEADINGS_H1_MENU_ITEM.key,parent:{type:"block-menu-section",key:i("btNLq").TRANSFORM_HEADINGS_MENU_SECTION.key,rank:i("gEb6G").TRANSFORM_HEADINGS_MENU_SECTION_RANK[i("btNLq").TRANSFORM_HEADINGS_H1_MENU_ITEM.key]},component:eS({level:1,api:e})},{type:"block-menu-item",key:i("btNLq").TRANSFORM_HEADINGS_H2_MENU_ITEM.key,parent:{type:"block-menu-section",key:i("btNLq").TRANSFORM_HEADINGS_MENU_SECTION.key,rank:i("gEb6G").TRANSFORM_HEADINGS_MENU_SECTION_RANK[i("btNLq").TRANSFORM_HEADINGS_H2_MENU_ITEM.key]},component:eS({level:2,api:e})},{type:"block-menu-item",key:i("btNLq").TRANSFORM_HEADINGS_H3_MENU_ITEM.key,parent:{type:"block-menu-section",key:i("btNLq").TRANSFORM_HEADINGS_MENU_SECTION.key,rank:i("gEb6G").TRANSFORM_HEADINGS_MENU_SECTION_RANK[i("btNLq").TRANSFORM_HEADINGS_H3_MENU_ITEM.key]},component:eS({level:3,api:e})},{type:"block-menu-item",key:i("btNLq").TRANSFORM_HEADINGS_H4_MENU_ITEM.key,parent:{type:"block-menu-section",key:i("btNLq").TRANSFORM_HEADINGS_MENU_SECTION.key,rank:i("gEb6G").TRANSFORM_HEADINGS_MENU_SECTION_RANK[i("btNLq").TRANSFORM_HEADINGS_H4_MENU_ITEM.key]},component:eS({level:4,api:e})},{type:"block-menu-item",key:i("btNLq").TRANSFORM_HEADINGS_H5_MENU_ITEM.key,parent:{type:"block-menu-section",key:i("btNLq").TRANSFORM_HEADINGS_MENU_SECTION.key,rank:i("gEb6G").TRANSFORM_HEADINGS_MENU_SECTION_RANK[i("btNLq").TRANSFORM_HEADINGS_H5_MENU_ITEM.key]},component:eS({level:5,api:e})},{type:"block-menu-item",key:i("btNLq").TRANSFORM_HEADINGS_H6_MENU_ITEM.key,parent:{type:"block-menu-section",key:i("btNLq").TRANSFORM_HEADINGS_MENU_SECTION.key,rank:i("gEb6G").TRANSFORM_HEADINGS_MENU_SECTION_RANK[i("btNLq").TRANSFORM_HEADINGS_H6_MENU_ITEM.key]},component:eS({level:6,api:e})},{type:"block-menu-item",key:i("btNLq").TRANSFORM_STRUCTURE_QUOTE_MENU_ITEM.key,parent:{type:"block-menu-section",key:i("btNLq").TRANSFORM_STRUCTURE_MENU_SECTION.key,rank:i("gEb6G").TRANSFORM_STRUCTURE_MENU_SECTION_RANK[i("btNLq").TRANSFORM_STRUCTURE_QUOTE_MENU_ITEM.key]},component:ek({api:e})},{type:"block-menu-item",key:i("btNLq").TRANSFORM_STRUCTURE_PARAGRAPH_MENU_ITEM.key,parent:{type:"block-menu-section",key:i("btNLq").TRANSFORM_STRUCTURE_MENU_SECTION.key,rank:i("gEb6G").TRANSFORM_STRUCTURE_MENU_SECTION_RANK[i("btNLq").TRANSFORM_STRUCTURE_PARAGRAPH_MENU_ITEM.key]},component:eC({api:e})}],ex=({formatMessage:e},t,o)=>t?Array.from({length:6},(t,a)=>{let s=a+1,l=i("2UWDO").messages[`heading${s}Description`],d=(0,i("hgeg8").tooltip)(i("60bKU").keymap[`toggleHeading${s}`]),c=`heading${s}`;return{id:c,title:e(i("2UWDO").messages[c]),description:e(l),priority:1300,keywords:[`h${s}`],keyshortcut:d,icon:()=>(0,n.jsx)(r.IconHeading,{level:s}),action(e,t){let n=e(t.schema.nodes.heading.createChecked({level:s}));return o?.attachAnalyticsEvent({action:i("d925B").ACTION.FORMATTED,actionSubject:i("d925B").ACTION_SUBJECT.TEXT,eventType:i("d925B").EVENT_TYPE.TRACK,actionSubjectId:i("d925B").ACTION_SUBJECT_ID.FORMAT_HEADING,attributes:{inputMethod:i("d925B").INPUT_METHOD.QUICK_INSERT,newHeadingLevel:s}})(n),n}}}):[],eN=({formatMessage:e},t,o)=>t?[{id:"blockquote",title:e(i("2UWDO").messages.blockquote),description:e(i("2UWDO").messages.blockquoteDescription),priority:1300,keyshortcut:">",icon:()=>(0,n.jsx)(r.IconQuote,{}),action(e,t){let n=e(t.schema.nodes.blockquote.createChecked({},t.schema.nodes.paragraph.createChecked()));return o?.attachAnalyticsEvent({action:i("d925B").ACTION.FORMATTED,actionSubject:i("d925B").ACTION_SUBJECT.TEXT,eventType:i("d925B").EVENT_TYPE.TRACK,actionSubjectId:i("d925B").ACTION_SUBJECT_ID.FORMAT_BLOCK_QUOTE,attributes:{inputMethod:i("d925B").INPUT_METHOD.QUICK_INSERT}})(n),n}}]:[];e.exports.blockTypePlugin=({config:e,api:t})=>{let o=!!t?.toolbar,r=({popupsMountPoint:o,popupsBoundariesElement:r,popupsScrollableElement:a,toolbarSize:s,disabled:l,isToolbarReducedSpacing:d})=>{let c=e&&e.isUndoRedoButtonsEnabled?s<i("zMjD6").ToolbarSize.XXL:s<i("zMjD6").ToolbarSize.XL;return(0,i("dh538").fg)("platform_editor_toolbar_responsive_fixes")&&(c=s<i("zMjD6").ToolbarSize.XXL),(0,n.jsx)(el,{isSmall:c,disabled:l,isToolbarReducedSpacing:d,api:t,popupsMountPoint:o,popupsBoundariesElement:r,popupsScrollableElement:a,shouldUseDefaultRole:!1})};return o?t?.toolbar?.actions.registerComponents(em(t)):t?.primaryToolbar?.actions.registerComponent({name:"blockType",component:r}),(0,a.expValEqualsNoExposure)("platform_editor_block_menu","isEnabled",!0)&&t?.blockMenu?.actions.registerBlockMenuComponents(ev(t)),{name:"blockType",nodes(){let t=[{name:"heading",node:i("j0UBv").heading},{name:"blockquote",node:(0,i("dh538").fg)("platform_editor_adf_with_localid")?i("iIGXo").extendedBlockquoteWithLocalId:i("iIGXo").extendedBlockquote},{name:"hardBreak",node:i("aFNbc").hardBreak}];if(e&&e.allowBlockType){let o=e.allowBlockType.exclude?e.allowBlockType.exclude:[];return t.filter(e=>-1===o.indexOf(e.name))}return t},pmPlugins:()=>[{name:"blockType",plugin:({dispatch:o})=>H(t,o,e&&e.lastNodeMustBeParagraph,e?.includeBlockQuoteAsTextstyleOption)},{name:"blockTypeInputRule",plugin:({schema:e,featureFlags:o})=>k(t?.analytics?.actions,e,o)},{name:"blockTypeKeyMap",plugin:({schema:e,featureFlags:o})=>(function(e,t,o){let n={};return(0,i("hgeg8").bindKeymapWithCommand)(i("hgeg8").insertNewLine.common,(0,i("e7tBw").insertNewLineWithAnalytics)(e),n),(0,i("hgeg8").bindKeymapWithCommand)(i("hgeg8").moveUp.common,i("e7tBw").createNewParagraphAbove,n),(0,i("hgeg8").bindKeymapWithCommand)(i("hgeg8").moveDown.common,i("e7tBw").createNewParagraphBelow,n),(0,i("hgeg8").bindKeymapWithCommand)((0,i("hgeg8").findKeyMapForBrowser)(i("hgeg8").redo),i("ke2AI").redo,n),(0,i("hgeg8").bindKeymapWithCommand)(i("hgeg8").undo.common,i("ke2AI").undo,n),(0,i("hgeg8").bindKeymapWithCommand)(i("hgeg8").backspace.common,R,n),(0,i("hgeg8").bindKeymapWithCommand)(i("hgeg8").deleteKey.common,w,n),(0,i("hgeg8").bindKeymapWithCommand)(i("hgeg8").forwardDelete.mac,w,n),t.nodes[i("boahT").BLOCK_QUOTE.nodeName]&&(0,i("hgeg8").bindKeymapWithCommand)((0,i("hgeg8").findShortcutByKeymap)(i("hgeg8").toggleBlockQuote),g(i("d925B").INPUT_METHOD.KEYBOARD,e),n),(0,i("60bKU").keymap)(n)})(t?.analytics?.actions,e,0)}],actions:{insertBlockQuote:e=>g(e,t?.analytics?.actions)},commands:{setTextLevel:(e,o,n=!1)=>{var r;return r=t?.analytics?.actions,({tr:t})=>{let{nodes:a}=t.doc.type.schema;if("normal"===e&&a.paragraph)return h(o,r,n)({tr:t});let s=i("boahT").HEADINGS_BY_NAME[e];return s&&a.heading&&s.level?m(s.level,o,r,n)({tr:t}):null}},insertBlockQuote:e=>{var o;return o=t?.analytics?.actions,f(t=>({tr:t})=>{var n;let{nodes:r}=t.doc.type.schema;return o?.attachAnalyticsEvent({action:i("d925B").ACTION.FORMATTED,actionSubject:i("d925B").ACTION_SUBJECT.TEXT,eventType:i("d925B").EVENT_TYPE.TRACK,actionSubjectId:i("d925B").ACTION_SUBJECT_ID.FORMAT_BLOCK_QUOTE,attributes:{inputMethod:e}})(t),(r.blockquote,({tr:e})=>{let{nodes:t}=e.doc.type.schema,{alignment:o,indentation:n}=e.doc.type.schema.marks;if(t.paragraph&&t.blockquote){let r=[o,n],a=e=>r.indexOf(e.type)>-1,s=e=>t=>!e(t);e.doc.nodesBetween(e.selection.from,e.selection.to,(o,n)=>{if(o.type===t.paragraph&&o.marks.some(a)){let t=e.doc.resolve(n),r=o.marks.filter(s(a));e=e.setNodeMarkup(t.pos,void 0,o.attrs,r)}});let{$from:l,$to:d}=e.selection,c=l.blockRange(d),p=c&&(0,i("aXG5V").findWrapping)(c,t.blockquote);if(p)e.wrap(c,p).scrollIntoView();else{let o=l.start(),n=d.end(),r=l.node().content,a=t.blockquote.create({},t.paragraph.create({},r)),s=new(0,i("5SAOw").Slice)(i("5SAOw").Fragment.from(a),0,0);e.replaceRange(o,n,s).scrollIntoView()}}return e})({tr:t})})},clearFormatting:e=>{var o;return o=t?.analytics?.actions,function({tr:t}){let n=[],r=t.doc.type.schema;return d.forEach(e=>{let{from:o,to:a}=t.selection,s=r.marks[e];s&&(t.selection instanceof i("7XFGZ").CellSelection?p(t.selection,t.doc,(o,i)=>o.type!==r.nodes.tableCell&&o.type!==r.nodes.tableHeader||(t.doc.rangeHasMark(i,i+o.nodeSize,s)&&(n.push(c[e]),t.removeMark(i,i+o.nodeSize,s)),!1)):t.doc.rangeHasMark(o,a,s)&&(n.push(c[e]),t.removeMark(o,a,s)))}),l.forEach(e=>{let o=r.nodes[e],{$from:a,$to:s}=t.selection;t.selection instanceof i("7XFGZ").CellSelection?p(t.selection,t.doc,u(r,t,o,e,n)):t.doc.nodesBetween(a.pos,s.pos,u(r,t,o,e,n))}),t.setStoredMarks([]),n.length&&o?.attachAnalyticsEvent({action:i("d925B").ACTION.FORMATTED,eventType:i("d925B").EVENT_TYPE.TRACK,actionSubject:i("d925B").ACTION_SUBJECT.TEXT,actionSubjectId:i("d925B").ACTION_SUBJECT_ID.FORMAT_CLEAR,attributes:{inputMethod:e,formattingCleared:n,dropdownMenu:"textStyle"}})(t),t}}},getSharedState(e){if(e)return G.getState(e)},primaryToolbarComponent:t?.primaryToolbar?void 0:r,pluginsOptions:{...!o&&{selectionToolbar:()=>"none"===((0,i("dh538").fg)("platform_editor_use_preferences_plugin")?t?.userPreferences?.sharedState.currentState()?.preferences?.toolbarDockingPosition:t?.selectionToolbar?.sharedState?.currentState()?.toolbarDocking)&&(0,s.editorExperiment)("platform_editor_controls","variant1",{exposure:!0})?{isToolbarAbove:!0,items:[{type:"custom",render:(e,o,r)=>{if(e)return(0,n.jsx)(es,{api:t})},fallback:[]}],rank:8}:void 0},quickInsert:o=>{let n=e&&e.allowBlockType&&e.allowBlockType.exclude?e.allowBlockType.exclude:[];return[...eN(o,-1===n.indexOf("blockquote"),t?.analytics?.actions),...ex(o,-1===n.indexOf("heading"),t?.analytics?.actions)]}}}}}),a("8vgNB",function(e,t){e.exports.wrapSelectionIn=function(e){return function(t,o){let n=(0,i("l9FJJ").createWrapSelectionTransaction)({state:t,type:e});return o&&o(n),!0}}}),a("l9FJJ",function(e,t){var o=i("8m4tT");e.exports.createWrapSelectionTransaction=function({state:e,type:t,nodeAttributes:n}){let{tr:r}=e,{alignment:a,indentation:s}=e.schema.marks;r=(0,i("kTbzR").removeBlockMarks)(e,[a,s])||r;let{range:l,wrapping:d}=function(e,t,o){let{$from:n,$to:r,from:a}=e.selection,s=n.blockRange(r);e.selection instanceof i("ks2lK").NodeSelection&&e.selection.node.type===e.schema.nodes.media&&(s=e.doc.resolve(a>0?a-1:a).blockRange(r));let l=!0;e.selection.empty&&e.doc.nodesBetween(n.pos,r.pos,t=>!!l&&(l=t.type!==e.schema.nodes.codeBlock));let d=l&&s&&(0,i("aXG5V").findWrapping)(s,t,o);return{range:s,wrapping:d}}(e,t,n);return d?r.wrap(l,d).scrollIntoView():(0,o.safeInsert)(t.createAndFill(n))(r).scrollIntoView(),r}}),a("4Chin",function(e,t){let o={[i("cPCP8").AI_SECTION.key]:100,[i("cPCP8").AI_VIEW_SECTION.key]:100,[i("cPCP8").TEXT_SECTION.key]:200,[i("cPCP8").TEXT_SECTION_COLLAPSED.key]:200,[i("cPCP8").INSERT_BLOCK_SECTION.key]:300,[i("cPCP8").LINKING_SECTION.key]:400,[i("cPCP8").COLLAB_SECTION.key]:500,[i("cPCP8").APPS_SECTION.key]:600,[i("cPCP8").TRACK_CHANGES_SECTION.key]:700,[i("cPCP8").OVERFLOW_SECTION.key]:800,[i("cPCP8").PIN_SECTION.key]:900,[i("cPCP8").OVERFLOW_SECTION_PRIMARY_TOOLBAR.key]:1e3},n={[i("cPCP8").ROVO_GROUP.key]:100,[i("cPCP8").ROVO_GROUP_DISPLAY_SMALL.key]:100,[i("cPCP8").ROVO_GROUP_PRIMARY_TOOLBAR.key]:100,[i("cPCP8").DEFINE_GROUP.key]:200,[i("cPCP8").IMPROVE_WRITING_GROUP.key]:300,[i("cPCP8").HERO_PROMPT_BUTTON_GROUP.key]:300},r={[i("cPCP8").ROVO_HERO_BUTTON.key]:100,[i("cPCP8").ROVO_WRITE_BUTTON_PRIMARY_TOOLBAR.key]:100,[i("cPCP8").ROVO_MENU.key]:200},a={[i("cPCP8").ROVO_HERO_BUTTON.key]:100,[i("cPCP8").ROVO_MENU_DISPLAY_SMALL.key]:200},s={[i("cPCP8").DEFINE_BUTTON.key]:100},l={[i("cPCP8").IMPROVE_WRITING_BUTTON.key]:100},d={[i("cPCP8").HERO_PROMPT_BUTTON.key]:100},c={[i("cPCP8").ROVO_PROMPT_MENU_SECTION_DISPLAY_SMALL.key]:100,[i("cPCP8").ROVO_PROMPT_MENU_SECTION.key]:100},p={[i("cPCP8").IMPROVE_WRITING_MENU_ITEM.key]:100,[i("cPCP8").HERO_PROMPT_MENU_ITEM.key]:100,[i("cPCP8").ADD_POLISH_MENU_ITEM.key]:100,[i("cPCP8").SPELLING_AND_GRAMMAR_MENU_ITEM.key]:300,[i("cPCP8").CHANGE_TONE_NESTED_MENU.key]:400,[i("cPCP8").MAKE_SHORTER_MENU_ITEM.key]:500,[i("cPCP8").MAKE_LONGER_MENU_ITEM.key]:600,[i("cPCP8").TRANSLATE_NESTED_MENU.key]:700,[i("cPCP8").DEFINE_MENU_ITEM.key]:800},u={[i("cPCP8").CHANGE_TONE_MENU_SECTION.key]:100},f={[i("cPCP8").MORE_PROFESSIONAL_MENU_ITEM.key]:100,[i("cPCP8").MORE_CASUAL_MENU_ITEM.key]:200,[i("cPCP8").MORE_EMPATHETIC_MENU_ITEM.key]:300},h={[i("cPCP8").TRANSLATE_MENU_SECTION.key]:100},m={[i("cPCP8").TEXT_STYLES_GROUP.key]:100,[i("cPCP8").TEXT_FORMATTING_GROUP.key]:200,[i("cPCP8").LISTS_INDENTATION_GROUP.key]:300,[i("cPCP8").ALIGNMENT_GROUP.key]:400,[i("cPCP8").TEXT_COLOR_HIGHLIGHT_GROUP.key]:500},g={[i("cPCP8").TEXT_STYLES_GROUP.key]:100,[i("cPCP8").BOLD_BUTTON_GROUP.key]:200,[i("cPCP8").UNDERLINE_BUTTON_GROUP.key]:300,[i("cPCP8").TEXT_FORMATTING_GROUP.key]:400,[i("cPCP8").BULLETED_LIST_BUTTON_GROUP.key]:500,[i("cPCP8").LISTS_INDENTATION_GROUP.key]:600,[i("cPCP8").ALIGNMENT_GROUP.key]:700,[i("cPCP8").TEXT_COLOR_HIGHLIGHT_GROUP.key]:800};i("cPCP8").TEXT_COLLAPSED_GROUP.key,i("cPCP8").TEXT_COLLAPSED_MENU.key;let T={[i("cPCP8").TEXT_STYLES_MENU_SECTION.key]:100,[i("cPCP8").TEXT_FORMATTING_MENU_SECTION.key]:200,[i("cPCP8").CLEAR_FORMARTTING_MENU_SECTION.key]:300,[i("cPCP8").LISTS_INDENTATION_MENU_SECTION.key]:400,[i("cPCP8").ALIGNMENT_MENU_SECTION.key]:500,[i("cPCP8").TEXT_COLOR_HIGHLIGHT_MENU_SECTION.key]:600},E={[i("cPCP8").TEXT_STYLES_MENU.key]:100},b={[i("cPCP8").TEXT_STYLES_MENU_SECTION.key]:100},S={[i("cPCP8").NORMAL_TEXT_MENU_ITEM.key]:100,[i("cPCP8").HEADING_1_MENU_ITEM.key]:200,[i("cPCP8").HEADING_2_MENU_ITEM.key]:300,[i("cPCP8").HEADING_3_MENU_ITEM.key]:400,[i("cPCP8").HEADING_4_MENU_ITEM.key]:500,[i("cPCP8").HEADING_5_MENU_ITEM.key]:600,[i("cPCP8").HEADING_6_MENU_ITEM.key]:700,[i("cPCP8").BLOCK_QUOTE_MENU_ITEM.key]:800},y={[i("cPCP8").TEXT_FORMATTING_HERO_BUTTON.key]:100,[i("cPCP8").TEXT_FORMATTING_MENU.key]:200},_={[i("cPCP8").TEXT_FORMATTING_HERO_BUTTON_COLLAPSED.key]:100,[i("cPCP8").TEXT_FORMATTING_MENU.key]:200},C={[i("cPCP8").TEXT_FORMATTING_MENU_SECTION.key]:100,[i("cPCP8").CLEAR_FORMARTTING_MENU_SECTION.key]:200},I={[i("cPCP8").BOLD_MENU_ITEM.key]:100,[i("cPCP8").ITALIC_MENU_ITEM.key]:200,[i("cPCP8").UNDERLINE_MENU_ITEM.key]:300,[i("cPCP8").STRIKE_MENU_ITEM.key]:400,[i("cPCP8").CODE_MENU_ITEM.key]:500,[i("cPCP8").SUBSCRIPT_MENU_ITEM.key]:600,[i("cPCP8").SUPERSCRIPT_MENU_ITEM.key]:700},O={[i("cPCP8").CLEAR_FORMATTING_MENU_ITEM.key]:100},k={[i("cPCP8").SYNCED_BLOCK_BUTTON.key]:100},v={[i("cPCP8").BULLETED_LIST_BUTTON.key]:100,[i("cPCP8").LISTS_INDENTATION_HERO_BUTTON.key]:200,[i("cPCP8").LISTS_INDENTATION_MENU.key]:300},x={[i("cPCP8").LISTS_INDENTATION_HERO_BUTTON_COLLAPSED.key]:100,[i("cPCP8").LISTS_INDENTATION_MENU.key]:200},N={[i("cPCP8").LISTS_INDENTATION_MENU_SECTION.key]:100},A={[i("cPCP8").BULLETED_LIST_MENU_ITEM.key]:100,[i("cPCP8").NUMBERED_LIST_MENU_ITEM.key]:200,[i("cPCP8").TASK_LIST_MENU_ITEM.key]:300,[i("cPCP8").OUTDENT_MENU_ITEM.key]:400,[i("cPCP8").INDENT_MENU_ITEM.key]:500},P={[i("cPCP8").ALIGNMENT_MENU.key]:100},M={[i("cPCP8").ALIGNMENT_MENU_SECTION.key]:100},R={[i("cPCP8").ALIGN_LEFT_MENU_ITEM.key]:100,[i("cPCP8").ALIGN_CENTER_MENU_ITEM.key]:200,[i("cPCP8").ALIGN_RIGHT_MENU_ITEM.key]:300},w={[i("cPCP8").TEXT_COLOR_HIGHLIGHT_MENU.key]:100},L={[i("cPCP8").TEXT_COLOR_HIGHLIGHT_MENU_SECTION.key]:100},B={[i("cPCP8").TEXT_COLOR_MENU_ITEM.key]:100,[i("cPCP8").HIGHLIGHT_MENU_ITEM.key]:200,[i("cPCP8").CLEAR_COLOR_MENU_ITEM.key]:300},D={[i("cPCP8").TASK_LIST_GROUP.key]:100,[i("cPCP8").MEDIA_GROUP.key]:200,[i("cPCP8").CODE_BLOCK_GROUP.key]:300,[i("cPCP8").MENTION_GROUP.key]:400,[i("cPCP8").EMOJI_GROUP.key]:500,[i("cPCP8").LAYOUT_GROUP.key]:600,[i("cPCP8").SYNCED_BLOCK_GROUP.key]:700,[i("cPCP8").TABLE_GROUP.key]:800,[i("cPCP8").INSERT_GROUP.key]:900},U={[i("cPCP8").TASK_LIST_BUTTON.key]:100},K={[i("cPCP8").MEDIA_BUTTON.key]:100},j={[i("cPCP8").CODE_BLOCK_BUTTON.key]:100},F={[i("cPCP8").MENTION_BUTTON.key]:100},G={[i("cPCP8").EMOJI_BUTTON.key]:100},H={[i("cPCP8").LAYOUT_BUTTON.key]:100},z={[i("cPCP8").TABLE_BUTTON.key]:100,[i("cPCP8").TABLE_SIZE_PICKER.key]:200},V={[i("cPCP8").INSERT_BUTTON.key]:100},W={[i("cPCP8").LINKING_GROUP.key]:100},q={[i("cPCP8").LINKING_BUTTON.key]:100},X={[i("cPCP8").COMMENT_GROUP.key]:100};i("cPCP8").COMMENT_HERO_BUTTON.key;let $={[i("cPCP8").UNDO_CHANGES_GROUP.key]:100,[i("cPCP8").REDO_CHANGES_GROUP.key]:200,[i("cPCP8").TRACK_CHANGES_GROUP.key]:300},Y={[i("cPCP8").UNDO_BUTTON.key]:100},J={[i("cPCP8").REDO_BUTTON.key]:100},Z={[i("cPCP8").TRACK_CHANGES_BUTTON.key]:100},Q={[i("cPCP8").OVERFLOW_GROUP.key]:100},ee={[i("cPCP8").OVERFLOW_MENU.key]:100},et={[i("cPCP8").PIN_MENU_SECTION.key]:100,[i("cPCP8").LOOM_MENU_SECTION.key]:200,[i("cPCP8").OVERFLOW_EXTENSIONS_MENU_SECTION.key]:300,[i("cPCP8").SELECTION_EXTENSION_MENU_SECTION.key]:300,[i("cPCP8").SYNCED_BLOCK_SECTION.key]:400},eo={[i("cPCP8").PIN_MENU_ITEM.key]:100},en={[i("cPCP8").LOOM_MENU_ITEM.key]:100,[i("cPCP8").FIRST_PARTY_EXTENSIONS_MENU_ITEM.key]:200,[i("cPCP8").EXTERNAL_EXTENSIONS_MENU_ITEM.key]:300},er={[i("cPCP8").OVERFLOW_GROUP_PRIMARY_TOOLBAR.key]:100},ei={[i("cPCP8").OVERFLOW_MENU_PRIMARY_TOOLBAR.key]:100},ea={[i("cPCP8").LOOM_MENU_SECTION.key]:100},es={[i("cPCP8").PIN_GROUP.key]:100},el={[i("cPCP8").PIN_BUTTON.key]:100},ed={[i("cPCP8").LOOM_MENU_ITEM.key]:100};e.exports.TOOLBAR_RANK=o,e.exports.AI_SECTION_RANK=n,e.exports.ROVO_GROUP_RANK=r,e.exports.ROVO_GROUP_DISPLAY_SMALL_RANK=a,e.exports.DEFINE_GROUP_RANK=s,e.exports.IMPROVE_WRITING_GROUP_RANK=l,e.exports.HERO_PROMPT_BUTTON_GROUP_RANK=d,e.exports.ROVO_MENU_RANK=c,e.exports.ROVO_PROMPT_MENU_SECTION_RANK=p,e.exports.CHANGE_TONE_MENU_RANK=u,e.exports.CHANGE_TONE_MENU_SECTION_RANK=f,e.exports.TRANSLATE_MENU_RANK=h,e.exports.TEXT_SECTION_RANK=m,e.exports.TEXT_SECTION_PRIMARY_TOOLBAR_RANK=g,e.exports.TEXT_COLLAPSED_MENU_RANK=T,e.exports.TEXT_STYLES_GROUP_RANK=E,e.exports.TEXT_STYLES_MENU_RANK=b,e.exports.TEXT_STYLES_MENU_SECTION_RANK=S,e.exports.TEXT_FORMAT_GROUP_RANK=y,e.exports.TEXT_FORMAT_GROUP_COLLAPSED_RANK=_,e.exports.TEXT_FORMAT_MENU_RANK=C,e.exports.TEXT_FORMATTING_MENU_SECTION_RANK=I,e.exports.CLEAR_FORMARTTING_MENU_SECTION_RANK=O,e.exports.SYNCED_BLOCK_SECTION_RANK=k,e.exports.LISTS_INDENTATION_GROUP_RANK=v,e.exports.LISTS_INDENTATION_GROUP_COLLAPSED_RANK=x,e.exports.LISTS_INDENTATION_MENU_RANK=N,e.exports.LISTS_INDENTATION_MENU_SECTION_RANK=A,e.exports.ALIGNMENT_GROUP_RANK=P,e.exports.ALIGNMENT_MENU_RANK=M,e.exports.ALIGNMENT_MENU_SECTION_RANK=R,e.exports.TEXT_COLOR_HIGHLIGHT_GROUP_RANK=w,e.exports.TEXT_COLOR_HIGHLIGHT_MENU_RANK=L,e.exports.TEXT_COLOR_HIGHLIGHT_MENU_SECTION_RANK=B,e.exports.INSERT_BLOCK_SECTION_RANK=D,e.exports.TASK_LIST_GROUP_RANK=U,e.exports.MEDIA_GROUP_RANK=K,e.exports.CODE_BLOCK_GROUP_RANK=j,e.exports.MENTION_GROUP_RANK=F,e.exports.EMOJI_GROUP_RANK=G,e.exports.LAYOUT_GROUP_RANK=H,e.exports.TABLE_GROUP_RANK=z,e.exports.INSERT_GROUP_RANK=V,e.exports.LINKING_SECTION_RANK=W,e.exports.LINKING_GROUP_RANK=q,e.exports.COLLAB_SECTION_RANK=X,e.exports.TRACK_CHANGES_SECTION_RANK=$,e.exports.UNDO_CHANGES_GROUP_RANK=Y,e.exports.REDO_CHANGES_GROUP_RANK=J,e.exports.TRACK_CHANGES_GROUP_RANK=Z,e.exports.OVERFLOW_SECTION_RANK=Q,e.exports.OVERFLOW_GROUP_RANK=ee,e.exports.OVERFLOW_MENU_RANK=et,e.exports.PIN_MENU_SECTION_RANK=eo,e.exports.OVERFLOW_EXTENSIONS_MENU_SECTION_RANK=en,e.exports.OVERFLOW_SECTION_PRIMARY_TOOLBAR_RANK=er,e.exports.OVERFLOW_GROUP_PRIMARY_TOOLBAR_RANK=ei,e.exports.OVERFLOW_MENU_PRIMARY_TOOLBAR_RANK=ea,e.exports.PIN_SECTION_RANK=es,e.exports.PIN_GROUP_RANK=el,e.exports.LOOM_MENU_SECTION_RANK=ed}),a("l6xRR",function(e,t){var o=i("1oCLl");let n=e=>Array.from(e.values()).every(e=>!e),r=(e,t,o)=>{let r=new Map(o.map(e=>[e,!0]));return t.forEachCell((t,i)=>{if(n(r))return;let s=i+t.nodeSize;if(r){let t=[];for(let[e,o]of r)o&&t.push(e);for(let[o,n]of a(i,s,e,t))r.set(o,n)}else r=a(i,s,e,o)}),r},a=(e,t,r,a)=>{let s=new Map(a.map(e=>[e,!0])),l=new Map(a.map(e=>[e,!1])),d=!1;return(r.nodesBetween(e,t,e=>{if(n(s))return!1;if(!e.type.isText)return!0;for(let[t,o]of(d=!0,s)){if(!o)continue;let n=t instanceof i("5SAOw").Mark?t.isInSet(e.marks):e.marks.some(e=>e.type===t);s.set(t,n)}}),(0,o.expValEquals)("platform_editor_toolbar_aifc_patch_3","isEnabled",!0))?d?s:l:s};e.exports.anyMarkActive=(e,t)=>{let{$from:o,from:n,to:r,empty:a}=e.selection;if(a)return!!t.isInSet(e.storedMarks||o.marks());let s=!1;return e.selection instanceof i("7XFGZ").CellSelection?e.selection.forEachCell((o,n)=>{let r=n+o.nodeSize;s||(s=e.doc.rangeHasMark(n,r,t))}):s=e.doc.rangeHasMark(n,r,t),s},e.exports.wholeSelectionHasMarks=(e,t)=>{let{$from:o,from:n,to:s,empty:l}=e.selection;return l?new Map(t.map(t=>[t,!!t.isInSet(e.storedMarks||o.marks())])):e.selection instanceof i("7XFGZ").CellSelection?r(e.doc,e.selection,t):a(n,s,e.doc,t)},e.exports.isMarkAllowedInRange=(e,t,o)=>{for(let n=0;n<t.length;n++){let{$from:r,$to:i}=t[n],a=0===r.depth&&e.type.allowsMarkType(o);if(e.nodesBetween(r.pos,i.pos,e=>{if(a)return!1;a=e.inlineContent&&e.type.allowsMarkType(o)}),a)return a}return!1},e.exports.isMarkExcluded=(e,t)=>!!t&&t.some(t=>t.type!==e&&t.type.excludes(e))}),a("cORDs",function(e,t){let o=(0,i("9K4OG").css)({background:"var(--ds-border, #0B120E24)",width:"1px",height:"24px",display:"inline-block",margin:"0 var(--ds-space-100, 8px)",userSelect:"none"});e.exports.buttonGroupStyleBeforeVisualRefresh={name:"ewpfso",styles:"display:inline-flex;align-items:center;& > div{display:flex;}button:not(#local-media-upload-button){&:not([disabled])::after{border:none;}}"},e.exports.buttonGroupStyle={name:"ioewc",styles:"display:inline-flex;align-items:center;& > div{display:flex;}button:not(#local-media-upload-button){&:not([disabled])::after{border:none;}}gap:var(--ds-space-050, 4px);div[role=group]{gap:var(--ds-space-050, 4px);}"},e.exports.separatorStyles=o,e.exports.wrapperStyle={name:"1ty89h5",styles:"display:flex;align-items:center;> div, > span{display:flex;}> div > div{display:flex;}margin-left:0;min-width:auto;button{&:not([disabled])::after{border:none;}}"},e.exports.triggerWrapperStyles={name:"wb8qky",styles:"display:flex;button{&:not([disabled])::after{border:none;}}"},e.exports.triggerWrapperStylesWithPadding={name:"4sd07o",styles:"display:flex;padding-right:var(--ds-space-025, 2px);button{&:not([disabled])::after{border:none;}}"},e.exports.disableBlueBorderStyles={name:"ox0lz7",styles:"&:not([disabled])::after{border:none;}"}}),a("h4TOP",function(e,o){var n=i("42omo"),r=i("1oCLl"),a=i("iu6m9"),s=i("5Gwdo");let l={name:"ul2689",styles:"& > div > div{display:flex;}"},d=(0,i("9K4OG").css)({boxShadow:"inset 0px 0px 0px 2px var(--ds-border-focused, #4688EC)",outline:"none"}),c=(e,t)=>e?(0,a.editorExperiment)("platform_editor_controls","variant1")?(0,i("9K4OG").css)("position:relative;&::before{display:block;height:100%;width:2px;position:absolute;left:0;top:0;background:var(--ds-border-selected, transparent);content:'';}>span,>span:hover,>span:active{background:",`var(--ds-background-selected, ${(0,i("dh538").fg)("platform_editor_updated_dropdown_colors")?"#E9F2FE":"#6c798f"})`,";color:",`var(--ds-text-selected, ${(0,i("dh538").fg)("platform_editor_updated_dropdown_colors")?"#1868DB":"#0C66E4"})`,";}:focus>span[aria-disabled='false']{",d,";}:focus-visible,:focus-visible>span[aria-disabled='false']{outline:none;}"):(0,i("9K4OG").css)(">span,>span:hover,>span:active{background:",`var(--ds-background-selected, ${(0,i("dh538").fg)("platform_editor_updated_dropdown_colors")?"#E9F2FE":"#6c798f"})`,";color:",`var(--ds-text-selected, ${(0,i("dh538").fg)("platform_editor_updated_dropdown_colors")?"#1868DB":"#0C66E4"})`,";}:focus>span[aria-disabled='false']{",d,";}:focus-visible,:focus-visible>span[aria-disabled='false']{outline:none;}"):(0,i("9K4OG").css)(">span:hover[aria-disabled='false']{color:var(--ds-text, #292A2E);background-color:var(--ds-background-neutral-subtle-hovered, rgb(244, 245, 247));}",!t&&`
					> span:active[aria-disabled='false'] {
						background-color: var(--ds-background-neutral-subtle-pressed, rgb(179, 212, 255));
					}`,">span[aria-disabled='true']{color:var(--ds-text-disabled, #080F214A);}:focus>span[aria-disabled='false']{",d,";}:focus-visible,:focus-visible>span[aria-disabled='false']{outline:none;}"),p=(0,i("efG2U").default)(e=>{let o=t(n).useContext(i("efG2U").OutsideClickTargetRefContext);return(0,i("9K4OG").jsx)(i("9CaSN").default,{onDroplistRef:o,...e})});class u extends n.PureComponent{renderDropdownMenu(){let{target:e,popupPlacement:t}=this.state,{items:o,mountTo:n,boundariesElement:r,scrollableElement:a,offset:s,fitHeight:l,fitWidth:d,isOpen:c,zIndex:u,shouldUseDefaultRole:f,onItemActivated:m,arrowKeyNavigationProviderOptions:g,section:T,allowEnterDefaultBehavior:E,handleEscapeKeydown:b}=this.props,S=g.type===i("5v8Ta").ArrowKeyNavigationType.COLOR?g:{...g,onSelection:e=>{let t=[];"function"==typeof m&&m({item:(t=o.reduce((e,t)=>e.concat(t.items),t))[e],shouldCloseMenu:!1})}};return(0,i("9K4OG").jsx)(i("jwWgu").default,{target:c?e:void 0,mountTo:n,boundariesElement:r,scrollableElement:a,onPlacementChanged:this.updatePopupPlacement,fitHeight:l,fitWidth:d,zIndex:u||i("aFUXX").akEditorFloatingPanelZIndex,offset:s},(0,i("9K4OG").jsx)(i("9Z3I5").ArrowKeyNavigationProvider,{...S,handleClose:this.handleCloseAndFocus,closeOnTab:!0},(0,i("9K4OG").jsx)(p,{isOpen:!0,position:t.join(" "),shouldFitContainer:!0,handleClickOutside:this.handleClose,handleEscapeKeydown:b||this.handleCloseAndFocus,handleEnterKeydown:e=>{E||e.preventDefault(),e.stopPropagation()},targetRef:this.state.target},(0,i("9K4OG").jsx)("div",{style:{height:0,minWidth:d||0}}),(0,i("9K4OG").jsx)("div",{ref:this.popupRef},(0,i("9K4OG").jsx)(i("2SlZp").default,{role:f?"group":"menu"},o.map((e,t)=>(0,i("9K4OG").jsx)(i("7rvPL").default,{hasSeparator:T?.hasSeparator&&t>0,title:T?.title,key:t},e.items.map(e=>(0,i("9K4OG").jsx)(h,{key:e.key??String(e.content),item:e,onItemActivated:this.props.onItemActivated,shouldUseDefaultRole:this.props.shouldUseDefaultRole,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave})))))))))}render(){let{children:e,isOpen:t}=this.props;return(0,i("9K4OG").jsx)("div",{css:l},(0,i("9K4OG").jsx)("div",{ref:this.handleRef},e),t?this.renderDropdownMenu():null)}componentDidUpdate(e){let{mountTo:t,isOpen:o}=this.props,n=o!==e.isOpen;if(o&&n&&"function"==typeof this.props.shouldFocusFirstItem&&this.props.shouldFocusFirstItem()){let e=new KeyboardEvent("keydown",{key:"ArrowDown",bubbles:!0});if(t)return void t.dispatchEvent(e);this.state.target?.dispatchEvent(e)}}constructor(...e){super(...e),this.state={popupPlacement:["bottom","left"],selectionIndex:-1},this.popupRef=t(n).createRef(),this.handleRef=e=>{this.setState({target:e||void 0})},this.updatePopupPlacement=e=>{let{popupPlacement:t}=this.state;(e[0]!==t[0]||e[1]!==t[1])&&this.setState({popupPlacement:e})},this.handleCloseAndFocus=e=>{this.state.target?.querySelector("button")?.focus(),this.handleClose(e)},this.handleClose=e=>{let{onOpenChange:t}=this.props;t&&t({isOpen:!1,event:e})}}}let f=t(n).forwardRef((e,t)=>{let{children:o,...n}=e;return(0,i("9K4OG").jsx)("span",{ref:t,...n,style:{position:"static"}},o)});function h({item:e,onItemActivated:o,shouldUseDefaultRole:a,onMouseEnter:s,onMouseLeave:l}){let[d,p]=t(n).useState(!1);if(!e.onClick&&!(e.value&&e.value.name))return(0,i("9K4OG").jsx)("span",{key:String(e.content)},e.content);let u=""===e["aria-label"]?void 0:e["aria-label"]||String(e.content),h=e["data-testid"]||`dropdown-item__${e.content}`,m=null===e.wrapperTabIndex?void 0:e.wrapperTabIndex||-1,g=(0,i("9K4OG").jsx)("div",{css:()=>c(e.isActive,d),role:(0,r.expValEquals)("platform_editor_august_a11y","isEnabled",!0)?a?void 0:"menuitem":void 0,tabIndex:m,"aria-disabled":e.isDisabled?"true":"false","aria-expanded":(0,r.expValEquals)("platform_editor_august_a11y","isEnabled",!0)?e["aria-expanded"]:void 0,onMouseDown:e=>{p(!!(e.target instanceof HTMLElement&&e.target.closest(`.${i("lwMQJ").DropdownMenuSharedCssClassName.SUBMENU}`)))}},(0,i("9K4OG").jsx)(i("d77M1").default,{item:e,key:e.key??String(e.content),testId:h,role:a?"button":(0,r.expValEquals)("platform_editor_august_a11y","isEnabled",!0)?void 0:"menuitem",iconBefore:e.elemBefore,iconAfter:e.elemAfter,isDisabled:e.isDisabled,onClick:()=>o&&o({item:e}),"aria-label":u,"aria-pressed":a?e.isActive:void 0,"aria-keyshortcuts":e["aria-keyshortcuts"],onMouseDown:e=>{e.preventDefault()},component:f,onMouseEnter:()=>s&&s({item:e}),onMouseLeave:()=>l&&l({item:e}),"aria-expanded":(0,r.expValEquals)("platform_editor_august_a11y","isEnabled",!0)?void 0:e["aria-expanded"]},e.content));return e.tooltipDescription?(0,i("9K4OG").jsx)(i("3gadb").default,{key:e.key??String(e.content),content:e.tooltipDescription,position:e.tooltipPosition},g):g}let m=t(n).memo(({...e})=>{let t=(0,n.useContext)(s.KeyDownHandlerContext);return(0,i("9K4OG").jsx)(u,{arrowKeyNavigationProviderOptions:{...e.arrowKeyNavigationProviderOptions,keyDownHandlerContext:t},...e})});e.exports.default=u,e.exports.DropdownMenuItem=h,e.exports.DropdownMenuWithKeyboardNavigation=m}),a("lwMQJ",function(e,t){e.exports.DropdownMenuSharedCssClassName={SUBMENU:"pm-dropdown-submenu"}}),a("9CaSN",function(n,r){e(n.exports,"default",()=>eu);var a=i("42omo"),s="undefined"!=typeof window&&"undefined"!=typeof document&&"undefined"!=typeof navigator,l=function(){for(var e=["Edge","Trident","Firefox"],t=0;t<e.length;t+=1)if(s&&navigator.userAgent.indexOf(e[t])>=0)return 1;return 0}(),d=s&&window.Promise?function(e){var t=!1;return function(){t||(t=!0,window.Promise.resolve().then(function(){t=!1,e()}))}}:function(e){var t=!1;return function(){t||(t=!0,setTimeout(function(){t=!1,e()},l))}};function c(e){return e&&"[object Function]"===({}).toString.call(e)}function p(e,t){if(1!==e.nodeType)return[];var o=e.ownerDocument.defaultView.getComputedStyle(e,null);return t?o[t]:o}function u(e){return"HTML"===e.nodeName?e:e.parentNode||e.host}function f(e){if(!e)return document.body;switch(e.nodeName){case"HTML":case"BODY":return e.ownerDocument.body;case"#document":return e.body}var t=p(e),o=t.overflow,n=t.overflowX,r=t.overflowY;return/(auto|scroll|overlay)/.test(o+r+n)?e:f(u(e))}function h(e){return e&&e.referenceNode?e.referenceNode:e}var m=s&&!!(window.MSInputMethodContext&&document.documentMode),g=s&&/MSIE 10/.test(navigator.userAgent);function T(e){return 11===e?m:10===e?g:m||g}function E(e){if(!e)return document.documentElement;for(var t=T(10)?document.body:null,o=e.offsetParent||null;o===t&&e.nextElementSibling;)o=(e=e.nextElementSibling).offsetParent;var n=o&&o.nodeName;return n&&"BODY"!==n&&"HTML"!==n?-1!==["TH","TD","TABLE"].indexOf(o.nodeName)&&"static"===p(o,"position")?E(o):o:e?e.ownerDocument.documentElement:document.documentElement}function b(e){return null!==e.parentNode?b(e.parentNode):e}function S(e,t){if(!e||!e.nodeType||!t||!t.nodeType)return document.documentElement;var o,n=e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING,r=n?e:t,i=n?t:e,a=document.createRange();a.setStart(r,0),a.setEnd(i,0);var s=a.commonAncestorContainer;if(e!==s&&t!==s||r.contains(i))return"BODY"!==(o=s.nodeName)&&("HTML"===o||E(s.firstElementChild)===s)?s:E(s);var l=b(e);return l.host?S(l.host,t):S(e,b(t).host)}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top",o="top"===t?"scrollTop":"scrollLeft",n=e.nodeName;if("BODY"===n||"HTML"===n){var r=e.ownerDocument.documentElement;return(e.ownerDocument.scrollingElement||r)[o]}return e[o]}function _(e,t){var o="x"===t?"Left":"Top";return parseFloat(e["border"+o+"Width"])+parseFloat(e["border"+("Left"===o?"Right":"Bottom")+"Width"])}function C(e,t,o,n){return Math.max(t["offset"+e],t["scroll"+e],o["client"+e],o["offset"+e],o["scroll"+e],T(10)?parseInt(o["offset"+e])+parseInt(n["margin"+("Height"===e?"Top":"Left")])+parseInt(n["margin"+("Height"===e?"Bottom":"Right")]):0)}function I(e){var t=e.body,o=e.documentElement,n=T(10)&&getComputedStyle(o);return{height:C("Height",t,o,n),width:C("Width",t,o,n)}}var O=function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")},k=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),v=function(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e},x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e};function N(e){return x({},e,{right:e.left+e.width,bottom:e.top+e.height})}function A(e){var t={};try{if(T(10)){t=e.getBoundingClientRect();var o=y(e,"top"),n=y(e,"left");t.top+=o,t.left+=n,t.bottom+=o,t.right+=n}else t=e.getBoundingClientRect()}catch(e){}var r={left:t.left,top:t.top,width:t.right-t.left,height:t.bottom-t.top},i="HTML"===e.nodeName?I(e.ownerDocument):{},a=i.width||e.clientWidth||r.width,s=i.height||e.clientHeight||r.height,l=e.offsetWidth-a,d=e.offsetHeight-s;if(l||d){var c=p(e);l-=_(c,"x"),d-=_(c,"y"),r.width-=l,r.height-=d}return N(r)}function P(e,t){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=T(10),r="HTML"===t.nodeName,i=A(e),a=A(t),s=f(e),l=p(t),d=parseFloat(l.borderTopWidth),c=parseFloat(l.borderLeftWidth);o&&r&&(a.top=Math.max(a.top,0),a.left=Math.max(a.left,0));var u=N({top:i.top-a.top-d,left:i.left-a.left-c,width:i.width,height:i.height});if(u.marginTop=0,u.marginLeft=0,!n&&r){var h=parseFloat(l.marginTop),m=parseFloat(l.marginLeft);u.top-=d-h,u.bottom-=d-h,u.left-=c-m,u.right-=c-m,u.marginTop=h,u.marginLeft=m}return(n&&!o?t.contains(s):t===s&&"BODY"!==s.nodeName)&&(u=function(e,t){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=y(t,"top"),r=y(t,"left"),i=o?-1:1;return e.top+=n*i,e.bottom+=n*i,e.left+=r*i,e.right+=r*i,e}(u,t)),u}function M(e){if(!e||!e.parentElement||T())return document.documentElement;for(var t=e.parentElement;t&&"none"===p(t,"transform");)t=t.parentElement;return t||document.documentElement}function R(e,t,o,n){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i={top:0,left:0},a=r?M(e):S(e,h(t));if("viewport"===n)i=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=e.ownerDocument.documentElement,n=P(e,o),r=Math.max(o.clientWidth,window.innerWidth||0),i=Math.max(o.clientHeight,window.innerHeight||0),a=t?0:y(o),s=t?0:y(o,"left");return N({top:a-n.top+n.marginTop,left:s-n.left+n.marginLeft,width:r,height:i})}(a,r);else{var s=void 0;"scrollParent"===n?"BODY"===(s=f(u(t))).nodeName&&(s=e.ownerDocument.documentElement):s="window"===n?e.ownerDocument.documentElement:n;var l=P(s,a,r);if("HTML"===s.nodeName&&!function e(t){var o=t.nodeName;if("BODY"===o||"HTML"===o)return!1;if("fixed"===p(t,"position"))return!0;var n=u(t);return!!n&&e(n)}(a)){var d=I(e.ownerDocument),c=d.height,m=d.width;i.top+=l.top-l.marginTop,i.bottom=c+l.top,i.left+=l.left-l.marginLeft,i.right=m+l.left}else i=l}var g="number"==typeof(o=o||0);return i.left+=g?o:o.left||0,i.top+=g?o:o.top||0,i.right-=g?o:o.right||0,i.bottom-=g?o:o.bottom||0,i}function w(e,t,o,n,r){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(-1===e.indexOf("auto"))return e;var a=R(o,n,i,r),s={top:{width:a.width,height:t.top-a.top},right:{width:a.right-t.right,height:a.height},bottom:{width:a.width,height:a.bottom-t.bottom},left:{width:t.left-a.left,height:a.height}},l=Object.keys(s).map(function(e){var t;return x({key:e},s[e],{area:(t=s[e]).width*t.height})}).sort(function(e,t){return t.area-e.area}),d=l.filter(function(e){var t=e.width,n=e.height;return t>=o.clientWidth&&n>=o.clientHeight}),c=d.length>0?d[0].key:l[0].key,p=e.split("-")[1];return c+(p?"-"+p:"")}function L(e,t,o){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=n?M(t):S(t,h(o));return P(o,r,n)}function B(e){var t=e.ownerDocument.defaultView.getComputedStyle(e),o=parseFloat(t.marginTop||0)+parseFloat(t.marginBottom||0),n=parseFloat(t.marginLeft||0)+parseFloat(t.marginRight||0);return{width:e.offsetWidth+n,height:e.offsetHeight+o}}function D(e){var t={left:"right",right:"left",bottom:"top",top:"bottom"};return e.replace(/left|right|bottom|top/g,function(e){return t[e]})}function U(e,t,o){o=o.split("-")[0];var n=B(e),r={width:n.width,height:n.height},i=-1!==["right","left"].indexOf(o),a=i?"top":"left",s=i?"left":"top",l=i?"height":"width";return r[a]=t[a]+t[l]/2-n[l]/2,o===s?r[s]=t[s]-n[i?"width":"height"]:r[s]=t[D(s)],r}function K(e,t){return Array.prototype.find?e.find(t):e.filter(t)[0]}function j(e,t,o){return(void 0===o?e:e.slice(0,function(e,t,o){if(Array.prototype.findIndex)return e.findIndex(function(e){return e[t]===o});var n=K(e,function(e){return e[t]===o});return e.indexOf(n)}(e,"name",o))).forEach(function(e){e.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var o=e.function||e.fn;e.enabled&&c(o)&&(t.offsets.popper=N(t.offsets.popper),t.offsets.reference=N(t.offsets.reference),t=o(t,e))}),t}function F(){if(!this.state.isDestroyed){var e={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};e.offsets.reference=L(this.state,this.popper,this.reference,this.options.positionFixed),e.placement=w(this.options.placement,e.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),e.originalPlacement=e.placement,e.positionFixed=this.options.positionFixed,e.offsets.popper=U(this.popper,e.offsets.reference,e.placement),e.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",e=j(this.modifiers,e),this.state.isCreated?this.options.onUpdate(e):(this.state.isCreated=!0,this.options.onCreate(e))}}function G(e,t){return e.some(function(e){var o=e.name;return e.enabled&&o===t})}function H(e){for(var t=[!1,"ms","Webkit","Moz","O"],o=e.charAt(0).toUpperCase()+e.slice(1),n=0;n<t.length;n++){var r=t[n],i=r?""+r+o:e;if(void 0!==document.body.style[i])return i}return null}function z(){return this.state.isDestroyed=!0,G(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[H("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function V(e){var t=e.ownerDocument;return t?t.defaultView:window}function W(){var e,t,o,n;this.state.eventsEnabled||(this.state=(e=this.reference,this.options,(o=this.state).updateBound=this.scheduleUpdate,V(e).addEventListener("resize",o.updateBound,{passive:!0}),!function e(t,o,n,r){var i="BODY"===t.nodeName,a=i?t.ownerDocument.defaultView:t;a.addEventListener(o,n,{passive:!0}),i||e(f(a.parentNode),o,n,r),r.push(a)}(n=f(e),"scroll",o.updateBound,o.scrollParents),o.scrollElement=n,o.eventsEnabled=!0,o))}function q(){if(this.state.eventsEnabled){var e,t;cancelAnimationFrame(this.scheduleUpdate),this.state=(e=this.reference,t=this.state,V(e).removeEventListener("resize",t.updateBound),t.scrollParents.forEach(function(e){e.removeEventListener("scroll",t.updateBound)}),t.updateBound=null,t.scrollParents=[],t.scrollElement=null,t.eventsEnabled=!1,t)}}function X(e){return""!==e&&!isNaN(parseFloat(e))&&isFinite(e)}function $(e,t){Object.keys(t).forEach(function(o){var n="";-1!==["width","height","top","right","bottom","left"].indexOf(o)&&X(t[o])&&(n="px"),e.style[o]=t[o]+n})}var Y=s&&/Firefox/i.test(navigator.userAgent);function J(e,t,o){var n=K(e,function(e){return e.name===t}),r=!!n&&e.some(function(e){return e.name===o&&e.enabled&&e.order<n.order});if(!r){var i="`"+t+"`";console.warn("`"+o+"` modifier is required by "+i+" modifier in order to work, be sure to include it before "+i+"!")}return r}var Z=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],Q=Z.slice(3);function ee(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=Q.indexOf(e),n=Q.slice(o+1).concat(Q.slice(0,o));return t?n.reverse():n}var et={FLIP:"flip",CLOCKWISE:"clockwise",COUNTERCLOCKWISE:"counterclockwise"},eo=function(){function e(t,o){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};O(this,e),this.scheduleUpdate=function(){return requestAnimationFrame(n.update)},this.update=d(this.update.bind(this)),this.options=x({},e.Defaults,r),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=t&&t.jquery?t[0]:t,this.popper=o&&o.jquery?o[0]:o,this.options.modifiers={},Object.keys(x({},e.Defaults.modifiers,r.modifiers)).forEach(function(t){n.options.modifiers[t]=x({},e.Defaults.modifiers[t]||{},r.modifiers?r.modifiers[t]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(e){return x({name:e},n.options.modifiers[e])}).sort(function(e,t){return e.order-t.order}),this.modifiers.forEach(function(e){e.enabled&&c(e.onLoad)&&e.onLoad(n.reference,n.popper,n.options,e,n.state)}),this.update();var i=this.options.eventsEnabled;i&&this.enableEventListeners(),this.state.eventsEnabled=i}return k(e,[{key:"update",value:function(){return F.call(this)}},{key:"destroy",value:function(){return z.call(this)}},{key:"enableEventListeners",value:function(){return W.call(this)}},{key:"disableEventListeners",value:function(){return q.call(this)}}]),e}();eo.Utils=("undefined"!=typeof window?window:o).PopperUtils,eo.placements=Z,eo.Defaults={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(e){var t=e.placement,o=t.split("-")[0],n=t.split("-")[1];if(n){var r=e.offsets,i=r.reference,a=r.popper,s=-1!==["bottom","top"].indexOf(o),l=s?"left":"top",d=s?"width":"height",c={start:v({},l,i[l]),end:v({},l,i[l]+i[d]-a[d])};e.offsets.popper=x({},a,c[n])}return e}},offset:{order:200,enabled:!0,fn:function(e,t){var o,n,r,i,a,s,l=t.offset,d=e.placement,c=e.offsets,p=c.popper,u=c.reference,f=d.split("-")[0],h=void 0;return X(+l)?h=[+l,0]:(o=[0,0],n=-1!==["right","left"].indexOf(f),i=(r=l.split(/(\+|\-)/).map(function(e){return e.trim()})).indexOf(K(r,function(e){return -1!==e.search(/,|\s/)})),r[i]&&-1===r[i].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead."),a=/\s*,\s*|\s+/,(-1!==i?[r.slice(0,i).concat([r[i].split(a)[0]]),[r[i].split(a)[1]].concat(r.slice(i+1))]:[r]).map(function(e,t){var o=(1===t?!n:n)?"height":"width",r=!1;return e.reduce(function(e,t){return""===e[e.length-1]&&-1!==["+","-"].indexOf(t)?(e[e.length-1]=t,r=!0,e):r?(e[e.length-1]+=t,r=!1,e):e.concat(t)},[]).map(function(e){return function(e,t,o,n){var r=e.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),i=+r[1],a=r[2];if(!i)return e;if(0===a.indexOf("%")){var s=void 0;return N("%p"===a?o:n)[t]/100*i}if("vh"!==a&&"vw"!==a)return i;var l=void 0;return("vh"===a?Math.max(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0))/100*i}(e,o,p,u)})}).forEach(function(e,t){e.forEach(function(n,r){X(n)&&(o[t]+=n*("-"===e[r-1]?-1:1))})}),h=o),"left"===f?(p.top+=h[0],p.left-=h[1]):"right"===f?(p.top+=h[0],p.left+=h[1]):"top"===f?(p.left+=h[0],p.top-=h[1]):"bottom"===f&&(p.left+=h[0],p.top+=h[1]),e.popper=p,e},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(e,t){var o=t.boundariesElement||E(e.instance.popper);e.instance.reference===o&&(o=E(o));var n=H("transform"),r=e.instance.popper.style,i=r.top,a=r.left,s=r[n];r.top="",r.left="",r[n]="";var l=R(e.instance.popper,e.instance.reference,t.padding,o,e.positionFixed);r.top=i,r.left=a,r[n]=s,t.boundaries=l;var d=t.priority,c=e.offsets.popper,p={primary:function(e){var o=c[e];return c[e]<l[e]&&!t.escapeWithReference&&(o=Math.max(c[e],l[e])),v({},e,o)},secondary:function(e){var o="right"===e?"left":"top",n=c[o];return c[e]>l[e]&&!t.escapeWithReference&&(n=Math.min(c[o],l[e]-("right"===e?c.width:c.height))),v({},o,n)}};return d.forEach(function(e){var t=-1!==["left","top"].indexOf(e)?"primary":"secondary";c=x({},c,p[t](e))}),e.offsets.popper=c,e},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(e){var t=e.offsets,o=t.popper,n=t.reference,r=e.placement.split("-")[0],i=Math.floor,a=-1!==["top","bottom"].indexOf(r),s=a?"right":"bottom",l=a?"left":"top";return o[s]<i(n[l])&&(e.offsets.popper[l]=i(n[l])-o[a?"width":"height"]),o[l]>i(n[s])&&(e.offsets.popper[l]=i(n[s])),e}},arrow:{order:500,enabled:!0,fn:function(e,t){if(!J(e.instance.modifiers,"arrow","keepTogether"))return e;var o,n=t.element;if("string"==typeof n){if(!(n=e.instance.popper.querySelector(n)))return e}else if(!e.instance.popper.contains(n))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),e;var r=e.placement.split("-")[0],i=e.offsets,a=i.popper,s=i.reference,l=-1!==["left","right"].indexOf(r),d=l?"height":"width",c=l?"Top":"Left",u=c.toLowerCase(),f=l?"bottom":"right",h=B(n)[d];s[f]-h<a[u]&&(e.offsets.popper[u]-=a[u]-(s[f]-h)),s[u]+h>a[f]&&(e.offsets.popper[u]+=s[u]+h-a[f]),e.offsets.popper=N(e.offsets.popper);var m=s[u]+s[d]/2-h/2,g=p(e.instance.popper),T=parseFloat(g["margin"+c]),E=parseFloat(g["border"+c+"Width"]),b=m-e.offsets.popper[u]-T-E;return b=Math.max(Math.min(a[d]-h,b),0),e.arrowElement=n,e.offsets.arrow=(v(o={},u,Math.round(b)),v(o,l?"left":"top",""),o),e},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(e,t){if(G(e.instance.modifiers,"inner")||e.flipped&&e.placement===e.originalPlacement)return e;var o=R(e.instance.popper,e.instance.reference,t.padding,t.boundariesElement,e.positionFixed),n=e.placement.split("-")[0],r=D(n),i=e.placement.split("-")[1]||"",a=[];switch(t.behavior){case et.FLIP:a=[n,r];break;case et.CLOCKWISE:a=ee(n);break;case et.COUNTERCLOCKWISE:a=ee(n,!0);break;default:a=t.behavior}return a.forEach(function(s,l){if(n!==s||a.length===l+1)return e;r=D(n=e.placement.split("-")[0]);var d,c=e.offsets.popper,p=e.offsets.reference,u=Math.floor,f="left"===n&&u(c.right)>u(p.left)||"right"===n&&u(c.left)<u(p.right)||"top"===n&&u(c.bottom)>u(p.top)||"bottom"===n&&u(c.top)<u(p.bottom),h=u(c.left)<u(o.left),m=u(c.right)>u(o.right),g=u(c.top)<u(o.top),T=u(c.bottom)>u(o.bottom),E="left"===n&&h||"right"===n&&m||"top"===n&&g||"bottom"===n&&T,b=-1!==["top","bottom"].indexOf(n),S=!!t.flipVariations&&(b&&"start"===i&&h||b&&"end"===i&&m||!b&&"start"===i&&g||!b&&"end"===i&&T),y=!!t.flipVariationsByContent&&(b&&"start"===i&&m||b&&"end"===i&&h||!b&&"start"===i&&T||!b&&"end"===i&&g),_=S||y;(f||E||_)&&(e.flipped=!0,(f||E)&&(n=a[l+1]),_&&(i="end"===(d=i)?"start":"start"===d?"end":d),e.placement=n+(i?"-"+i:""),e.offsets.popper=x({},e.offsets.popper,U(e.instance.popper,e.offsets.reference,e.placement)),e=j(e.instance.modifiers,e,"flip"))}),e},behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:function(e){var t=e.placement,o=t.split("-")[0],n=e.offsets,r=n.popper,i=n.reference,a=-1!==["left","right"].indexOf(o),s=-1===["top","left"].indexOf(o);return r[a?"left":"top"]=i[o]-(s?r[a?"width":"height"]:0),e.placement=D(t),e.offsets.popper=N(r),e}},hide:{order:800,enabled:!0,fn:function(e){if(!J(e.instance.modifiers,"hide","preventOverflow"))return e;var t=e.offsets.reference,o=K(e.instance.modifiers,function(e){return"preventOverflow"===e.name}).boundaries;if(t.bottom<o.top||t.left>o.right||t.top>o.bottom||t.right<o.left){if(!0===e.hide)return e;e.hide=!0,e.attributes["x-out-of-boundaries"]=""}else{if(!1===e.hide)return e;e.hide=!1,e.attributes["x-out-of-boundaries"]=!1}return e}},computeStyle:{order:850,enabled:!0,fn:function(e,t){var o,n,r,i,a,s,l,d,c,p,u,f,h,m=t.x,g=t.y,T=e.offsets.popper,b=K(e.instance.modifiers,function(e){return"applyStyle"===e.name}).gpuAcceleration;void 0!==b&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var S=void 0!==b?b:t.gpuAcceleration,y=E(e.instance.popper),_=A(y),C={position:T.position},I=(o=window.devicePixelRatio<2||!Y,r=(n=e.offsets).popper,i=n.reference,a=Math.round,s=Math.floor,l=function(e){return e},d=a(i.width),c=a(r.width),p=-1!==["left","right"].indexOf(e.placement),u=-1!==e.placement.indexOf("-"),f=o?p||u||d%2==c%2?a:s:l,h=o?a:l,{left:f(d%2==1&&c%2==1&&!u&&o?r.left-1:r.left),top:h(r.top),bottom:h(r.bottom),right:f(r.right)}),O="bottom"===m?"top":"bottom",k="right"===g?"left":"right",v=H("transform"),N=void 0,P=void 0;P="bottom"===O?"HTML"===y.nodeName?-y.clientHeight+I.bottom:-_.height+I.bottom:I.top,N="right"===k?"HTML"===y.nodeName?-y.clientWidth+I.right:-_.width+I.right:I.left,S&&v?(C[v]="translate3d("+N+"px, "+P+"px, 0)",C[O]=0,C[k]=0,C.willChange="transform"):(C[O]=P*("bottom"===O?-1:1),C[k]=N*("right"===k?-1:1),C.willChange=O+", "+k);var M={"x-placement":e.placement};return e.attributes=x({},M,e.attributes),e.styles=x({},C,e.styles),e.arrowStyles=x({},e.offsets.arrow,e.arrowStyles),e},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(e){var t,o;return $(e.instance.popper,e.styles),t=e.instance.popper,Object.keys(o=e.attributes).forEach(function(e){!1!==o[e]?t.setAttribute(e,o[e]):t.removeAttribute(e)}),e.arrowElement&&Object.keys(e.arrowStyles).length&&$(e.arrowElement,e.arrowStyles),e},onLoad:function(e,t,o,n,r){var i=L(r,t,e,o.positionFixed),a=w(o.placement,i,t,e,o.modifiers.flip.boundariesElement,o.modifiers.flip.padding);return t.setAttribute("x-placement",a),$(t,{position:o.positionFixed?"fixed":"absolute"}),o},gpuAcceleration:void 0}}};let en={"top left":{position:"top-start",animation:"top"},"top center":{position:"top",animation:"top"},"top right":{position:"top-end",animation:"top"},"right top":{position:"right-start",animation:"right"},"right middle":{position:"right",animation:"right"},"right bottom":{position:"right-end",animation:"right"},"bottom left":{position:"bottom-start",animation:"bottom"},"bottom center":{position:"bottom",animation:"bottom"},"bottom right":{position:"bottom-end",animation:"bottom"},"left top":{position:"left-start",animation:"left"},"left middle":{position:"left",animation:"left"},"left bottom":{position:"left-end",animation:"left"}},er={default:"right middle"},ei={hasExtractedStyles:!1,offsets:{popper:{left:-9999,top:-9999,position:null}},cssPosition:"absolute",originalHeight:null,maxHeight:null};class ea extends a.Component{componentDidMount(){this.applyPopper(this.props)}componentDidUpdate(e,t){let{onPositioned:o}=this.props,{hasExtractedStyles:n}=this.state;this.props!==e&&this.applyPopper(this.props),!t.hasExtractedStyles&&n&&o&&o()}componentWillUnmount(){this.popper&&this.popper.destroy()}calculateMaxHeight(e,t,o,n){let r=0;if(document.documentElement&&(r=document.documentElement.clientHeight),"fixed"!==n)return null;let i=Math.max(r,window.innerHeight||0);return i<e&&t+o>=i-50?i-12:null}applyPopper(e){var t;if(!this.targetRef.current||!this.contentRef.current||(this.popper&&this.popper.destroy(),!e.content))return;let o=this.targetRef.current.children[0],n={placement:((t=e.position)&&en[t]?en[t].position:null)||en[er.default].position,onCreate:this.extractStyles,onUpdate:this.extractStyles,modifiers:{applyStyle:{enabled:!1},hide:{enabled:!1},offset:{enabled:!0,offset:this.props.offset},flip:{enabled:!1,flipVariations:!0,boundariesElement:"viewport",padding:0},preventOverflow:{enabled:!1,escapeWithReference:!0}},positionFixed:!1};o&&(this.popper=new eo(o,this.contentRef.current,n))}render(){let{transform:e,hasExtractedStyles:o,maxHeight:n}=this.state;return t(a).createElement("div",null,t(a).createElement("div",{ref:this.targetRef},this.props.children),t(a).createElement("div",{ref:this.contentRef,style:{top:0,left:0,position:"absolute",transform:e,maxHeight:n||"auto",...o?{}:{opacity:0}}},this.props.content))}constructor(e){super(e),this.popper=void 0,this.targetRef=t(a).createRef(),this.contentRef=t(a).createRef(),this.extractStyles=e=>{if(e){let t=e.offsets.popper.height,o=Math.round(e.offsets.popper.left),n=Math.round(e.offsets.popper.top),r="absolute",i=this.state.originalHeight||t,a=this.calculateMaxHeight(i,t,n,r);this.setState({cssPosition:r,hasExtractedStyles:!0,transform:`translate3d(${o}px, ${n}px, 0px)`,originalHeight:i,maxHeight:a})}},this.state=ei,this.extractStyles=(0,i("2P8Ax").default)(this.extractStyles.bind(this))}}ea.defaultProps={boundariesElement:"viewport",children:null,content:null,offset:"0, 0",position:"right middle",zIndex:400,lockScroll:!1,isAlwaysFixed:!1,onPositioned:()=>{}};let es="platform-pkg",el="0.0.0-use.local",ed=(0,i("9K4OG").keyframes)({"0%":{opacity:0},"100%":{opacity:1}});class ec extends a.Component{render(){let{children:e,isOpen:t,position:o,trigger:n,onPositioned:r,testId:a,id:s}=this.props,l=t?(0,i("9K4OG").jsx)("div",{css:this.menuWrapper,"data-role":"droplistContent","data-testid":a&&`${a}--content`,ref:this.handleContentRef,id:s,role:"presentation"},e):null;return(0,i("9K4OG").jsx)("div",{css:[this.wrapperStyles,(0,i("dh538").fg)("p2m-drop-down-motion")&&this.motionStyles],ref:this.handleDroplistRef},(0,i("9K4OG").jsx)(ea,{content:l,offset:"0, 8",position:o,onPositioned:r},(0,i("9K4OG").jsx)("div",{css:[this.triggerStyles,(0,i("dh538").fg)("p2m-drop-down-motion")&&this.motionStyles],ref:this.handleTriggerRef},n)))}constructor(...e){super(...e),this.dropContentRef=void 0,this.triggerRef=void 0,this.wrapperStyles=(0,i("9K4OG").css)({display:this.props.shouldFitContainer?"block":"inline-flex",flex:this.props.shouldFitContainer?"1 1 auto":void 0,transitionDuration:"0.2s",transition:"box-shadow 0.15s cubic-bezier(0.47, 0.03, 0.49, 1.38)"}),this.triggerStyles=(0,i("9K4OG").css)({transitionDuration:"0.2s",transition:"box-shadow 0.15s cubic-bezier(0.47, 0.03, 0.49, 1.38)",display:this.props.shouldFitContainer?"block":"inline-flex",boxSizing:this.props.shouldFitContainer?"border-box":void 0}),this.motionStyles=(0,i("9K4OG").css)({animationName:`${ed}`,animationDuration:"360ms",animationTimingFunction:"cubic-bezier(0.8, 0, 0, 1)"}),this.menuWrapper=()=>(0,i("9K4OG").css)({color:"var(--ds-text-subtle, #505258)",backgroundColor:"var(--ds-surface-overlay, #FFFFFF)",borderRadius:"var(--ds-radius-small, 3px)",boxShadow:"var(--ds-shadow-overlay, 0px 8px 12px #1E1F2126, 0px 0px 1px #1E1F214f)",boxSizing:"border-box",overflow:"auto",padding:"var(--ds-space-050, 4px) 0",maxHeight:"90vh"}),this.componentDidMount=()=>{this.setContentWidth(),document.addEventListener("click",this.handleClickOutside,!0),document.addEventListener("keydown",this.handleEsc)},this.componentDidUpdate=()=>{this.props.isOpen&&this.setContentWidth()},this.componentWillUnmount=()=>{document.removeEventListener("click",this.handleClickOutside,!0),document.removeEventListener("keydown",this.handleEsc)},this.setContentWidth=()=>{let{dropContentRef:e,triggerRef:t}=this,{shouldFitContainer:o}=this.props;o&&e&&t&&(e.style.width=`${t.offsetWidth-2}px`)},this.handleEsc=e=>{("Escape"===e.key||"Esc"===e.key)&&this.props.isOpen&&this.close(e)},this.handleClickOutside=e=>{if(this.props.isOpen&&e.target instanceof Node){let t=this.triggerRef&&this.triggerRef.contains(e.target),o=this.dropContentRef&&this.dropContentRef.contains(e.target);t||o||this.close(e)}},this.close=e=>{this.props.onOpenChange&&this.props.onOpenChange({isOpen:!1,event:e})},this.handleContentRef=e=>{this.dropContentRef=e,e&&e.focus()},this.handleDroplistRef=e=>{this.props.onDroplistRef?.(e)},this.handleTriggerRef=e=>{this.triggerRef=e}}}let ep=(0,i("eWRwJ").default)("atlaskit");var eu=(0,i("ggbZE").default)({componentName:"droplist",packageName:es,packageVersion:el})((0,i("1DWH0").default)({onOpenChange:ep({action:"toggled",actionSubject:"droplist",attributes:{componentName:"droplist",packageName:es,packageVersion:el}})})(ec))}),a("9Z3I5",function(e,o){var n=i("42omo");let r=({children:e,selectedRowIndex:o,selectedColumnIndex:r,isOpenedByKeyboard:i,isPopupPositioned:l,handleClose:d,closeOnTab:c,editorRef:p,ignoreEscapeKey:u,popupsMountPoint:f})=>{let h=(0,n.useRef)(null),m=(0,n.useRef)(-1===r?0:r),g=(0,n.useRef)(-1===o?0:o),T=f||p.current,[E]=(0,n.useState)(T),b=(e,t)=>{g.current===e.length-1?g.current=0:g.current=g.current+1},S=(e,t)=>{0===g.current?g.current=e.length-1:g.current=g.current-1};return(0,n.useLayoutEffect)(()=>{let e=(e,t)=>{m.current===t.length-1?(b(e,t),m.current=0):m.current=m.current+1},t=(e,t)=>{0===m.current?(S(e,t),m.current=t.length-1):m.current=m.current-1},o=()=>{let e=s(a(h?.current)[g.current]);e&&e?.length!==0&&e[m.current]?.focus()},n=n=>{if("Tab"===n.key&&c)return void d(n);let r=a(h?.current),i=s(r[g.current]);switch(n.key){case"ArrowDown":b(r,i),o(),n.preventDefault();break;case"ArrowUp":S(r,i),o(),n.preventDefault();break;case"ArrowLeft":t(r,i),o(),n.preventDefault();break;case"ArrowRight":e(r,i),o(),n.preventDefault();break;case"Escape":u||d(n);break;default:return}};return E&&E.addEventListener("keydown",n),i&&l&&setTimeout(()=>{o()}),()=>{E&&E.removeEventListener("keydown",n)}},[m,i,l,h,d,c,u,E]),t(n).createElement("div",{className:"custom-key-handler-wrapper",ref:h},e)};function a(e){return e?Array.from(e.querySelectorAll("div[role=radiogroup]")||[]):[]}function s(e){return e?Array.from(e.querySelectorAll("button[role=radio]:not([disabled])")||[]):[]}let l=e=>e.some(e=>"true"!==e.getAttribute("aria-disabled")),d=({children:e,handleClose:o,disableArrowKeyNavigation:r,keyDownHandlerContext:i,closeOnTab:a,onSelection:s,editorRef:d,popupsMountPoint:p,disableCloseOnArrowClick:u})=>{let f=(0,n.useRef)(null),[h,m]=(0,n.useState)(-1),g=p?[p,d.current]:[d.current],[T]=(0,n.useState)(g),E=(0,n.useCallback)(e=>{let t=(h+1)%e.length;for(;t!==h&&"true"===e[t].getAttribute("aria-disabled");)t=(t+1)%e.length;return m(t),t},[h]),b=(0,n.useCallback)(e=>{let t=(e.length+h-1)%e.length;for(;t!==h&&"true"===e[t].getAttribute("aria-disabled");)t=(e.length+t-1)%e.length;return m(t),t},[h]);return(0,n.useEffect)(()=>{let e=c(f?.current),t=e[h];if(t&&"true"===t.getAttribute("aria-disabled")){let t=E(e);e[t]?.focus()}},[h,s,E,b]),(0,n.useLayoutEffect)(()=>{if(r)return;let e=e=>{let t=e.target;if("Tab"===e.key&&a){o(e),i?.handleTab();return}let n=c(f?.current);if(n&&n?.length!==0)switch(t instanceof HTMLElement&&!f.current?.contains(t)&&m(-1),e.key){case"ArrowDown":if(l(n)){let t=E(n);n[t]?.focus(),e.preventDefault()}break;case"ArrowUp":if(l(n)){let t=b(n);n[t]?.focus(),e.preventDefault()}break;case"ArrowLeft":if(t instanceof HTMLElement&&!t.closest(".custom-key-handler-wrapper"))return;u||o(e),t instanceof HTMLElement&&!t.closest('[data-testid="editor-floating-toolbar"]')&&i?.handleArrowLeft();break;case"ArrowRight":if(t instanceof HTMLElement&&!t.closest(".custom-key-handler-wrapper"))return;u||o(e),t instanceof HTMLElement&&!t.closest('[data-testid="editor-floating-toolbar"]')&&i?.handleArrowRight();break;case"Escape":o(e);break;case"Enter":"function"==typeof s&&s(h);break;default:return}};return T&&T.forEach(function(t){t&&t.addEventListener("keydown",e)}),()=>{T&&T.forEach(function(t){t&&t.removeEventListener("keydown",e)})}},[h,f,o,r,i,a,s,E,b,T,u]),t(n).createElement("div",{className:"menu-key-handler-wrapper custom-key-handler-wrapper",ref:f},e)};function c(e){return e?Array.from(e.querySelectorAll('a[href], button:not([disabled]), textarea, input, select, div[tabindex="-1"]')||[]):[]}e.exports.ArrowKeyNavigationProvider=e=>{let{children:o,type:a,...s}=e;return a===i("5v8Ta").ArrowKeyNavigationType.COLOR?t(n).createElement(i("40aJG").default.Consumer,null,({popupsMountPoint:i,editorView:a,editorRef:l})=>l&&t(n).createElement(r,{selectedRowIndex:e.selectedRowIndex,selectedColumnIndex:e.selectedColumnIndex,isOpenedByKeyboard:e.isOpenedByKeyboard,isPopupPositioned:e.isPopupPositioned,editorRef:l,popupsMountPoint:i,...s},o)):t(n).createElement(i("40aJG").default.Consumer,null,({popupsMountPoint:e,editorView:r,editorRef:i})=>i&&t(n).createElement(d,{editorRef:i,popupsMountPoint:e,...s},o))}}),a("5v8Ta",function(e,t){var o,n=((o={}).COLOR="color",o.MENU="menu",o);e.exports.ArrowKeyNavigationType=n}),a("a4eZN",function(e,o){var n=i("42omo"),r=i("k7eoe"),a=t(n).forwardRef((e,o)=>t(n).createElement(i("eEA8O").default,{ref:o,...e,style:{alignItems:"center"}}));let s={name:"15currb",styles:"display:flex;height:100%"},l=t(n).forwardRef((e,t)=>{let{buttonId:o,testId:l,className:d="",href:c,iconAfter:p,iconBefore:u,disabled:f,selected:h,spacing:m,target:g,children:T,hideTooltip:E,title:b,keymap:S,titlePosition:y="top",item:_,rel:C,"aria-label":I,"aria-haspopup":O,"aria-expanded":k,"aria-pressed":v,"aria-keyshortcuts":x,"aria-controls":N,"data-ds--level":A,onClick:P,onKeyDown:M,onItemClick:R,onFocus:w,onBlur:L,onMouseEnter:B,onMouseLeave:D}=e,U=(0,n.useCallback)((e,t)=>{!f&&(o&&t.update(e=>({...e,action:i("d925B").ACTION.CLICKED,actionSubject:i("d925B").ACTION_SUBJECT.TOOLBAR_BUTTON,actionSubjectId:o,eventType:i("d925B").EVENT_TYPE.UI})).fire(r.FabricChannel.editor),P&&P(e),_&&R&&R(_))},[f,P,R,_,o]),K=(0,i("9K4OG").jsx)(a,{ref:t,appearance:"subtle",testId:l,className:d,href:c,iconAfter:p,iconBefore:u,isDisabled:f,isSelected:h,onClick:U,spacing:m||"default",target:g,shouldFitContainer:!0,"aria-expanded":k,"aria-controls":N,"aria-haspopup":O,"aria-label":I,"aria-pressed":v,"aria-keyshortcuts":x,onKeyDown:M,onFocus:w,onBlur:L,onMouseEnter:B,onMouseLeave:D,"data-ds--level":A,rel:C},T);if(!b)return K;let j=E?null:(0,i("9K4OG").jsx)(i("hgeg8").ToolTipContent,{description:b,keymap:S});return(0,i("9K4OG").jsx)(i("3gadb").default,{content:j,hideTooltipOnClick:!0,position:y},(0,i("9K4OG").jsx)("div",{css:s},K))});e.exports.default=l}),a("6f5RK",function(e,t){let o=(0,i("9K4OG").css)("background-color:var(--ds-background-neutral, #0515240F);color:var(--ds-text-subtle, #505258);border-radius:var(--ds-radius-small, 3px);padding:var(--ds-space-050, 4px);line-height:12px;font-size:",(0,i("aFUXX").relativeFontSizeToBase16)(11.67),";align-self:flex-end;@media (max-width: ",i("aFUXX").akEditorMobileMaxWidth,"px){display:none;}");e.exports.shortcutStyle=o}),a("jbmmV",function(e,t){var o=i("l998X");i("42omo");var n=i("1oCLl");e.exports.ToolbarKeyboardShortcutHint=({shortcut:e,isDisabled:t})=>t&&(0,n.expValEquals)("platform_editor_toolbar_aifc_patch_5","isEnabled",!0)?(0,o.jsx)(i("c4sKh").default,{appearance:"primaryInverted",children:(0,o.jsx)(i("iXCQx").default,{color:"color.text.disabled",children:e})}):(0,o.jsx)(i("c4sKh").default,{children:e})}),a("bTiiT",function(e,t){var o=i("l998X"),n=i("42omo"),r=i("1oCLl");let a={sectionMargin:"_1mouv77o",firstSectionSeparator:"_18l8n7od",scrollContainer:"_c71lnklw _18m91wug"},s=({iconBefore:e,children:t,isDisabled:r,testId:a,label:s,onClick:l})=>{let{onDropdownOpenChanged:d}=(0,i("8hoW2").useToolbarUI)(),c=(0,i("5v3PK").useToolbarDropdownMenu)(),p=(0,n.useCallback)(e=>{d(e),e.isOpen||c?.closeMenu(e.event)},[c,d]),u=(0,n.useCallback)(e=>{c?.isOpen?c?.closeMenu(e):c?.openMenu(e)},[c]);return(0,o.jsx)(i("52EPl").default,{trigger:t=>(0,o.jsx)(i("7ERUE").ToolbarButton,{ref:t.triggerRef,isSelected:t.isSelected,"aria-expanded":t["aria-expanded"],"aria-haspopup":t["aria-haspopup"],"aria-controls":t["aria-controls"],onBlur:t.onBlur,onClick:e=>{l&&l(e,!c?.isOpen),u(e),t.onClick&&t.onClick(e)},onFocus:t.onFocus,testId:a,iconBefore:e,isDisabled:r,label:s}),onOpenChange:p,isOpen:c?.isOpen,children:t})};e.exports.ToolbarDropdownMenu=({iconBefore:e,children:t,isDisabled:n,testId:l,label:d,hasSectionMargin:c=!0,enableMaxHeight:p=!1,onClick:u})=>(0,o.jsx)(s,{iconBefore:e,isDisabled:n,testId:l,label:d,onClick:u,children:(0,o.jsx)(i("gdv5Z").default,{xcss:(0,i("1bHXt").cx)(c&&a.sectionMargin,p&&a.scrollContainer,(0,r.expValEquals)("platform_editor_toolbar_migrate_loom","isEnabled",!0)&&a.firstSectionSeparator),"data-toolbar-component":"menu",children:t})})}),a("btNLq",function(e,t){e.exports.TRANSFORM_MENU_SECTION={key:"transform-menu-section"},e.exports.TRANSFORM_MENU_ITEM={key:"transform-menu-item"},e.exports.TRANSFORM_CREATE_MENU_SECTION={key:"transform-create-menu-section"},e.exports.TRANSFORM_HEADINGS_MENU_SECTION={key:"transform-headings-menu-secion"},e.exports.TRANSFORM_HEADINGS_H1_MENU_ITEM={key:"transform-headings-h1-menu-item"},e.exports.TRANSFORM_HEADINGS_H2_MENU_ITEM={key:"transform-headings-heading-2-menu-item"},e.exports.TRANSFORM_HEADINGS_H3_MENU_ITEM={key:"transform-headings-heading-3-menu-item"},e.exports.TRANSFORM_HEADINGS_H4_MENU_ITEM={key:"transform-headings-heading-4-menu-item"},e.exports.TRANSFORM_HEADINGS_H5_MENU_ITEM={key:"transform-headings-heading-5-menu-item"},e.exports.TRANSFORM_HEADINGS_H6_MENU_ITEM={key:"transform-headings-heading-6-menu-item"},e.exports.TRANSFORM_SUGGESTED_MENU_SECTION={key:"transform-suggested-menu-section"},e.exports.TRANSFORM_STRUCTURE_MENU_SECTION={key:"transform-structure-menu-section"},e.exports.TRANSFORM_SUGGESTED_MENU_ITEM={key:"transform-suggested-menu-item"},e.exports.TRANSFORM_STRUCTURE_BULLETED_LIST_MENU_ITEM={key:"transform-structure-bulleted-list-menu-item"},e.exports.TRANSFORM_STRUCTURE_TASK_LIST_MENU_ITEM={key:"transform-structure-task-list-menu-item"},e.exports.TRANSFORM_STRUCTURE_NUMBERED_LIST_MENU_ITEM={key:"transform-structure-numbered-list-menu-item"},e.exports.TRANSFORM_STRUCTURE_CODE_BLOCK_MENU_ITEM={key:"transform-structure-code-block-menu-item"},e.exports.TRANSFORM_STRUCTURE_PANEL_MENU_ITEM={key:"transform-structure-panel-menu-item"},e.exports.TRANSFORM_STRUCTURE_EXPAND_MENU_ITEM={key:"transform-structure-expand-menu-item"},e.exports.TRANSFORM_STRUCTURE_LAYOUT_MENU_ITEM={key:"transform-structure-layout-menu-item"},e.exports.TRANSFORM_STRUCTURE_QUOTE_MENU_ITEM={key:"transform-structure-quote-menu-item"},e.exports.TRANSFORM_STRUCTURE_DECISION_MENU_ITEM={key:"transform-structure-decision-menu-item"},e.exports.TRANSFORM_STRUCTURE_PARAGRAPH_MENU_ITEM={key:"transform-structure-paragraph-menu-item"},e.exports.TRANSFORM_CLEAR_MENU_SECTION={key:"transform-clear-menu-section"},e.exports.TRANSFORM_CLEAR_MENU_ITEM={key:"transform-clear-menu-item"},e.exports.BLOCK_ACTIONS_MENU_SECTION={key:"block-actions-menu-section"},e.exports.BLOCK_ACTIONS_CREATE_SYNCED_BLOCK_MENU_ITEM={key:"block-actions-create-synced-block-menu-item"},e.exports.BLOCK_ACTIONS_COPY_LINK_TO_BLOCK_MENU_ITEM={key:"block-actions-copy-link-to-block-menu-item"},e.exports.POSITION_MENU_SECTION={key:"position-menu-section"},e.exports.POSITION_MOVE_UP_MENU_ITEM={key:"position-move-up-menu-item"},e.exports.POSITION_MOVE_DOWN_MENU_ITEM={key:"position-move-down-menu-item"},e.exports.DELETE_MENU_SECTION={key:"delete-menu-section"},e.exports.DELETE_MENU_ITEM={key:"delete-menu-item"}}),a("gEb6G",function(e,t){let o={[i("btNLq").TRANSFORM_MENU_SECTION.key]:200,[i("btNLq").BLOCK_ACTIONS_MENU_SECTION.key]:300,[i("btNLq").POSITION_MENU_SECTION.key]:400,[i("btNLq").DELETE_MENU_SECTION.key]:500},n={[i("btNLq").TRANSFORM_MENU_ITEM.key]:100},r={[i("btNLq").TRANSFORM_SUGGESTED_MENU_ITEM.key]:100},a={[i("btNLq").TRANSFORM_SUGGESTED_MENU_SECTION.key]:100,[i("btNLq").TRANSFORM_CREATE_MENU_SECTION.key]:200,[i("btNLq").TRANSFORM_STRUCTURE_MENU_SECTION.key]:300,[i("btNLq").TRANSFORM_HEADINGS_MENU_SECTION.key]:400,[i("btNLq").TRANSFORM_CLEAR_MENU_SECTION.key]:500},s={[i("btNLq").TRANSFORM_HEADINGS_H1_MENU_ITEM.key]:100,[i("btNLq").TRANSFORM_HEADINGS_H2_MENU_ITEM.key]:200,[i("btNLq").TRANSFORM_HEADINGS_H3_MENU_ITEM.key]:300,[i("btNLq").TRANSFORM_HEADINGS_H4_MENU_ITEM.key]:400,[i("btNLq").TRANSFORM_HEADINGS_H5_MENU_ITEM.key]:500,[i("btNLq").TRANSFORM_HEADINGS_H6_MENU_ITEM.key]:600},l={[i("btNLq").TRANSFORM_STRUCTURE_BULLETED_LIST_MENU_ITEM.key]:100,[i("btNLq").TRANSFORM_STRUCTURE_TASK_LIST_MENU_ITEM.key]:200,[i("btNLq").TRANSFORM_STRUCTURE_NUMBERED_LIST_MENU_ITEM.key]:300,[i("btNLq").TRANSFORM_STRUCTURE_CODE_BLOCK_MENU_ITEM.key]:400,[i("btNLq").TRANSFORM_STRUCTURE_PANEL_MENU_ITEM.key]:500,[i("btNLq").TRANSFORM_STRUCTURE_EXPAND_MENU_ITEM.key]:600,[i("btNLq").TRANSFORM_STRUCTURE_LAYOUT_MENU_ITEM.key]:700,[i("btNLq").TRANSFORM_STRUCTURE_QUOTE_MENU_ITEM.key]:800,[i("btNLq").TRANSFORM_STRUCTURE_DECISION_MENU_ITEM.key]:900,[i("btNLq").TRANSFORM_STRUCTURE_PARAGRAPH_MENU_ITEM.key]:1e3};i("btNLq").TRANSFORM_CLEAR_MENU_ITEM.key;let d={[i("btNLq").BLOCK_ACTIONS_CREATE_SYNCED_BLOCK_MENU_ITEM.key]:100,[i("btNLq").BLOCK_ACTIONS_COPY_LINK_TO_BLOCK_MENU_ITEM.key]:200},c={[i("btNLq").POSITION_MOVE_UP_MENU_ITEM.key]:100,[i("btNLq").POSITION_MOVE_DOWN_MENU_ITEM.key]:200},p={[i("btNLq").DELETE_MENU_ITEM.key]:100};e.exports.MAIN_BLOCK_MENU_SECTION_RANK=o,e.exports.TRANSFORM_MENU_SECTION_RANK=n,e.exports.TRANSFORM_SUGGESTED_MENU_SECTION_RANK=r,e.exports.TRANSFORM_MENU_ITEM_RANK=a,e.exports.TRANSFORM_HEADINGS_MENU_SECTION_RANK=s,e.exports.TRANSFORM_STRUCTURE_MENU_SECTION_RANK=l,e.exports.BLOCK_ACTIONS_MENU_SECTION_RANK=d,e.exports.POSITION_MENU_SECTION_RANK=c,e.exports.DELETE_MENU_SECTION_RANK=p}),a("cMZNY",function(e,t){var o,n,r,a,s,l="text/plain",d=e=>{};(function(){(console.warn||console.log).apply(console,arguments)}).bind("[clipboard-polyfill]");var c="undefined"==typeof window?void 0:window,p="undefined"==typeof globalThis?void 0:globalThis,u=null!=(o=null==c?void 0:c.Promise)?o:null==p?void 0:p.Promise,f="undefined"==typeof navigator?void 0:navigator,h=null==f?void 0:f.clipboard;null==(n=null==h?void 0:h.read)||n.bind(h),null==(r=null==h?void 0:h.readText)||r.bind(h);var m=null==(a=null==h?void 0:h.write)?void 0:a.bind(h);null==(s=null==h?void 0:h.writeText)||s.bind(h);var g=null==c?void 0:c.ClipboardItem,T=function(){if(!u)throw Error("No `Promise` implementation available for `clipboard-polyfill`. Consider using: https://github.com/lgarron/clipboard-polyfill#flat-file-version-with-promise-included");return u}();function E(e,t,o){for(var n in d("listener called"),e.success=!0,t){var r=t[n],i=o.clipboardData;i.setData(n,r),n===l&&i.getData(n)!==r&&(d("setting text/plain failed"),e.success=!1)}o.preventDefault()}function b(e){var t={success:!1},o=E.bind(this,t,e);document.addEventListener("copy",o);try{document.execCommand("copy")}finally{document.removeEventListener("copy",o)}return t.success}function S(e,t){y(e);var o=b(t);return _(),o}function y(e){var t=document.getSelection();if(t){var o=document.createRange();o.selectNodeContents(e),t.removeAllRanges(),t.addRange(o)}}function _(){var e=document.getSelection();e&&e.removeAllRanges()}function C(e,t){var o=[];for(var n in e){var r=e[n];o.push(t(r))}return T.all(o).then(t=>{for(var o={},n=0;n<e.length;n++)o[e[n]]=t[n];return o})}var I=T.resolve(),O=()=>T.resolve(!0),k=T.resolve(!1);function v(e,t){for(var o in e)if(-1!==e[o].types.indexOf(t))return!0;return!1}var x=function(e,t){var o,n=Object.keys(e),r={};for(var i in e){var a=e[i];"string"==typeof a?r[i]=new Blob([a],{type:i}):r[i]=a}return{types:n,presentationStyle:null!=(o=null==t?void 0:t.presentationStyle)?o:"unspecified",getType:function(e){return T.resolve(r[e])}}};function N(e){return C(e.types,function(t){return e.getType(t)}).then(t=>new Promise((o,n)=>{var r={};e.presentationStyle&&(r.presentationStyle=e.presentationStyle),g?o(new g(t,r)):n("window.ClipboardItem is not defined")}))}let A=()=>!!navigator.clipboard&&"function"==typeof navigator.clipboard.writeText,P=()=>window.clipboardData&&"function"==typeof window.clipboardData.setData,M=e=>"extension"===e||"bodiedExtension"===e||"inlineExtension"===e||"multiBodiedExtension"===e,R=async e=>{if(A())try{await navigator.clipboard.writeText(e)}catch(e){throw Error("Clipboard api is not supported")}else if(P())try{await window.clipboardData.setData("text",e)}catch(e){throw Error("IE clipboard api is not supported")}else throw Error("Clipboard api is not supported")},w=async(e,t)=>{if(A()&&"undefined"!=typeof ClipboardItem)try{let o=new ClipboardItem({"text/plain":new Blob([t||e.innerText],{type:"text/plain"}),"text/html":new Blob([e.innerHTML],{type:"text/html"})});await navigator.clipboard.write([o])}catch(e){throw Error("Clipboard api is not supported")}else if(document&&"object"==typeof document)try{L(e,t)}catch(e){console.log(e)}},L=async(e,t)=>{var o,n;let r=new x({"text/html":new Blob([e.innerHTML],{type:"text/html"}),"text/plain":new Blob([t||e.innerText],{type:"text/plain"})});await (o=[r],(n=()=>m&&g?(d("Using `navigator.clipboard.write()`."),T.all(o.map(N)).then(e=>m(e).then(O).catch(e=>{if(!v(o,l)&&!v(o,"text/html"))throw e;return k}))):k,new T((e,t)=>{try{e(n())}catch(e){t(e)}})).then(e=>{var t;if(e)return I;return v(o,l)||d("clipboard.write() was called without a `text/plain` data type. On some platforms, this may result in an empty clipboard. Call suppressWarnings() to suppress this warning."),C((t=o[0]).types,function(e){return t.getType(e).then(e=>new T((t,o)=>{var n=new FileReader;n.addEventListener("load",()=>{var e=n.result;"string"==typeof e?t(e):o("could not convert blob to string")}),n.readAsText(e)}))}).then(e=>{if(!function(e){var t,o,n,r,i,a,s,p=l in e;if("undefined"==typeof ClipboardEvent&&void 0!==(null==c?void 0:c.clipboardData)&&void 0!==(null==c?void 0:c.clipboardData.setData)){if(!p)throw Error("No `text/plain` value was specified.");if(function(e){if(!c.clipboardData)return!1;var t=c.clipboardData.setData("Text",e);return t&&d("writeTextIE worked"),t}(e[l]))return!0;throw Error("Copying failed, possibly because the user rejected it.")}if(b(e))return d("regular execCopy worked"),!0;if(navigator.userAgent.indexOf("Edge")>-1)return d('UA "Edge" => assuming success'),!0;if(S(document.body,e))return d("copyUsingTempSelection worked"),!0;if((a=document.createElement("div")).setAttribute("style","-webkit-user-select: text !important"),a.textContent="temporary element",document.body.appendChild(a),s=S(a,e),document.body.removeChild(a),s)return d("copyUsingTempElem worked"),!0;return t=e[l],d("copyTextUsingDOM"),(o=document.createElement("div")).setAttribute("style","-webkit-user-select: text !important"),n=o,o.attachShadow&&(d("Using shadow DOM."),n=o.attachShadow({mode:"open"})),(r=document.createElement("span")).innerText=t,n.appendChild(r),document.body.appendChild(o),y(r),i=document.execCommand("copy"),_(),document.body.removeChild(o),!!i&&(d("copyTextUsingDOM worked"),!0)}(e))throw Error("write() failed")})}))};e.exports.copyToClipboard=R,e.exports.copyHTMLToClipboard=w,e.exports.copyHTMLToClipboardPolyfill=L,e.exports.getAnalyticsPayload=(e,t)=>{let{selection:o,doc:n}=e,r=(0,i("3tffm").getNodeSelectionAnalyticsPayload)(o)||(0,i("3tffm").getRangeSelectionAnalyticsPayload)(o,n)||(0,i("3tffm").getAllSelectionAnalyticsPayload)(o)||(0,i("3tffm").getCellSelectionAnalyticsPayload)(e);if(r){let e,n,{actionSubjectId:a}=r,s=r.attributes?.node,l=[];switch(a){case i("d925B").ACTION_SUBJECT_ID.NODE:s&&(l.push(s),M(s)&&(e=o.node.attrs.extensionType,n=o.node.attrs.extensionKey));break;case i("d925B").ACTION_SUBJECT_ID.RANGE:l.push(...r.attributes.nodes);break;case i("d925B").ACTION_SUBJECT_ID.ALL:l.push("all");break;case i("d925B").ACTION_SUBJECT_ID.CELL:{let{selectedCells:e}=r.attributes;l.push(...Array(e).fill("tableCell"))}}return M(s)?{eventType:i("d925B").EVENT_TYPE.TRACK,action:t,actionSubject:i("d925B").ACTION_SUBJECT.DOCUMENT,attributes:{content:l,extensionKey:n,extensionType:e}}:{eventType:i("d925B").EVENT_TYPE.TRACK,action:t,actionSubject:i("d925B").ACTION_SUBJECT.DOCUMENT,attributes:{content:l}}}if(o instanceof i("ks2lK").TextSelection&&o.$cursor)return{eventType:i("d925B").EVENT_TYPE.TRACK,action:t,actionSubject:i("d925B").ACTION_SUBJECT.DOCUMENT,attributes:{content:["caret"]}}},e.exports.getNodeCopiedAnalyticsPayload=(e,t)=>{let o,n,r=e.type.name;return M(r)&&(o=e.attrs.extensionType,n=e.attrs.extensionKey),{eventType:i("d925B").EVENT_TYPE.TRACK,action:i("d925B").ACTION.COPIED,actionSubject:i("d925B").ACTION_SUBJECT.DOCUMENT,attributes:{content:[r],inputMethod:t,nodeType:r,...o?{extensionType:o}:{},...n?{extensionKey:n}:{}}}}}),a("3tffm",function(e,t){let o=e=>(t,o)=>(o&&o(t.tr.setSelection(new(0,i("ks2lK").NodeSelection)(t.doc.resolve(e)))),!0);e.exports.getNodeSelectionAnalyticsPayload=function(e){if(e instanceof i("ks2lK").NodeSelection)return{action:i("d925B").ACTION.SELECTED,actionSubject:i("d925B").ACTION_SUBJECT.DOCUMENT,actionSubjectId:i("d925B").ACTION_SUBJECT_ID.NODE,eventType:i("d925B").EVENT_TYPE.TRACK,attributes:{node:e.node.type.name}}},e.exports.getAllSelectionAnalyticsPayload=function(e){if(e instanceof i("ks2lK").AllSelection)return{action:i("d925B").ACTION.SELECTED,actionSubject:i("d925B").ACTION_SUBJECT.DOCUMENT,actionSubjectId:i("d925B").ACTION_SUBJECT_ID.ALL,eventType:i("d925B").EVENT_TYPE.TRACK}},e.exports.getCellSelectionAnalyticsPayload=function(e){if(e.selection instanceof i("7XFGZ").CellSelection){let t=(0,i("2QyFu").selectedRect)(e),o=t.map.cellsInRect(t).length,n=t.map.map.length;return{action:i("d925B").ACTION.SELECTED,actionSubject:i("d925B").ACTION_SUBJECT.DOCUMENT,actionSubjectId:i("d925B").ACTION_SUBJECT_ID.CELL,eventType:i("d925B").EVENT_TYPE.TRACK,attributes:{selectedCells:o,totalCells:n}}}},e.exports.getRangeSelectionAnalyticsPayload=function(e,t){if(e instanceof i("ks2lK").TextSelection&&e.from!==e.to){let{from:o,to:n,anchor:r,head:a}=e,s=[];return t.nodesBetween(o,n,(e,t)=>{if(e.isText||t>=o&&t+e.nodeSize<=n)return s.push(e.type.name),!1}),{action:i("d925B").ACTION.SELECTED,actionSubject:i("d925B").ACTION_SUBJECT.DOCUMENT,actionSubjectId:i("d925B").ACTION_SUBJECT_ID.RANGE,eventType:i("d925B").EVENT_TYPE.TRACK,attributes:{from:r,to:a,nodes:s}}}},e.exports.createSelectionClickHandler=function(e,t,n){return function(r,i,a,s,l,d){if(n.useLongPressSelection)return!1;if(d&&-1!==e.indexOf(a.type.name)){let e=l.target;if(e instanceof HTMLElement&&t(e))return o(n.getNodeSelectionPos?n.getNodeSelectionPos(r.state,s):s)(r.state,r.dispatch),!0}return!1}}}),a("2QyFu",function(e,t){e.exports.selectedRect=function(e){let t,o=e.selection,n=(0,i("bzgWU").selectionCell)(o);if(!n)throw Error("selectedRect: invalid $pos for selection");let r=n.node(-1),a=n.start(-1),s=i("LmqWp").TableMap.get(r);return(t=o instanceof i("7XFGZ").CellSelection?s.rectBetween(o.$anchorCell.pos-a,o.$headCell.pos-a):s.findCell(n.pos-a)).tableStart=a,t.map=s,t.table=r,t}}),a("bzgWU",function(e,t){e.exports.selectionCell=function(e){return(0,i("BW42l").isSelectionType)(e,"cell")?e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell:(0,i("BW42l").isSelectionType)(e,"node")&&"cell"===e.node.type.spec.tableRole?e.$anchor:(0,i("3gZJH").cellAround)(e.$head)||(0,i("3gZJH").cellNear)(e.$head)}}),a("BW42l",function(e,t){e.exports.isSelectionType=function(e,t){return!!e&&e.toJSON().type===t}}),a("cQ4aK",function(e,t){var o,n=((o={}).Before="Before",o.Start="Start",o.Inside="Inside",o.End="End",o);e.exports.RelativeSelectionPos=n}),a("4AaC5",function(e,t){let o=(0,i("9K4OG").keyframes)({"from, to":{opacity:0},"50%":{opacity:1}}),n="ProseMirror-hide-gapcursor",r=".ProseMirror-gapcursor",a='.ProseMirror-widget:not([data-blocks-decoration-container="true"]):not([data-blocks-drag-handle-container="true"]):not([data-blocks-quick-insert-container="true"])',s='[layout="wrap-left"]',l='[layout="wrap-right"]';(0,i("9K4OG").css)(".ProseMirror{&.",n,"{caret-color:transparent;}",r,"{display:none;pointer-events:none;position:relative;& span{caret-color:transparent;position:absolute;height:100%;width:100%;display:block;}& span::after{animation:1s ",o," step-start infinite;border-left:1px solid;content:'';display:block;position:absolute;top:0;height:100%;}&.-left span::after{left:var(--ds-space-negative-050, -4px);}&.-right span::after{right:var(--ds-space-negative-050, -4px);}& span[layout='full-width'],& span[layout='wide'],& span[layout='fixed-width']{margin-left:50%;transform:translateX(-50%);}&",l,"{float:right;}&:first-of-type+ul,&:first-of-type+span+ul,&:first-of-type+ol,&:first-of-type+span+ol,&:first-of-type+pre,&:first-of-type+span+pre,&:first-of-type+blockquote,&:first-of-type+span+blockquote{margin-top:0;}}&.ProseMirror-focused ",r,"{display:block;border-color:transparent;}}",r,s,"+span+",s,",",r,l,"+span+",l,",",r,"+",s,"+",l,",",r,"+",s,"+span+",l,",",r,"+",l,"+",s,",",r,"+",l,"+span+",s,",",s,"+",r,"+",l,",",s,"+",r,"+span ",l,",",l,"+",r,"+",s,",",l,"+",r,"+span+",s,",",s,"+",r,"{clear:none;}",s,"+",r,"+",l,">div,",s,"+",r,"+span+",l,">div,",l,"+",r,"+",s,">div,",l,"+",r,"+span+",s,">div,",r,"+",l,"+",s,">div,",r,"+",l,"+span+",s,">div,",r,"+",s,"+",l,">div,",r,"+",s,"+span+",l,">div{margin-right:0;margin-left:0;margin-bottom:0;}",s,"+",r,",",l,"+",r,"{float:left;}",r,"+",s,"+span+",l,"::after,",r,"+",l,"+span+",s,"::after,",s,"+",r,"+",l,"::after,",s,"+",r,"+span+",l,"::after,",l,"+",r,"+",s,"::after,",l,"+",r,"+span+",s,"::after{visibility:hidden;display:block;font-size:0;content:' ';clear:both;height:0;}",s,"+",r,"+",l,"+*,",s,"+",r,"+",l,"+span+*,",l,"+",r,"+",s,"+*,",l,"+",r,"+",s,"+span+*,",s,"+",r,"+span+",l,"+*,",l,"+",r,"+span+",s,"+*,",r,"+",s,"+span+",l,"+*,",r,"+",l,"+span+",s,"+*,",s,"+",r,"+",l,"+*>*,",s,"+",r,"+",l,"+span+*>*,",l,"+",r,"+",s,"+*>*,",l,"+",r,"+",s,"+span+*>*,",s,"+",r,"+span+",l,"+*>*,",l,"+",r,"+span+",s,"+*>*,",r,"+",s,"+span+",l,"+*>*,",r,"+",l,"+span+",s,"+*>*,",a,"+",r,"+*,",a,"+",r,"+span+*{margin-top:0;}"),e.exports.hideCaretModifier=n}),a("l6okE",function(e,t){function o(e){return e.start(e.depth)}function n(e){return e.end(e.depth)+1}let r=({nodes:e})=>{let t=new Set([e.bulletList,e.orderedList,e.taskList,e.listItem,e.taskItem,e.tableHeader,e.tableRow,e.tableCell,e.table,e.mediaGroup,e.mediaSingle]);return e=>!t.has(e.type)},a=(e,t,o=r(e.doc.type.schema))=>{let n=e.blockRange(t,o);return n?{$from:e.doc.resolve(n.start),$to:t.doc.resolve(n.end),range:n}:{$from:e,$to:t}};e.exports.isSelectionAtStartOfNode=(e,t)=>{if(!t)return!1;for(let o=e.depth+1;o>0;o--){let n=e.node(o);if(n&&n.eq(t))break;if(o>1&&e.before(o)!==e.before(o-1)+1)return!1}return!0},e.exports.isSelectionAtEndOfNode=(e,t)=>{if(!t)return!1;for(let o=e.depth+1;o>0;o--){let n=e.node(o);if(n&&n.eq(t))break;if(o>1&&e.after(o)!==e.after(o-1)-1)return!1}return!0},e.exports.atTheEndOfDoc=function(e){let{selection:t,doc:o}=e;return o.nodeSize-t.$to.pos-2===t.$to.depth},e.exports.atTheBeginningOfDoc=function(e){let{selection:t}=e;return t.$from.pos===t.$from.depth},e.exports.atTheEndOfBlock=function(e){let{selection:t}=e,{$to:o}=t;return!(t instanceof i("adhil").GapCursorSelection)&&(t instanceof i("ks2lK").NodeSelection&&!!t.node.isBlock||n(o)===o.pos+1)},e.exports.endPositionOfParent=n,e.exports.atTheBeginningOfBlock=function(e){let{selection:t}=e,{$from:n}=t;return!(t instanceof i("adhil").GapCursorSelection)&&(t instanceof i("ks2lK").NodeSelection&&!!t.node.isBlock||o(n)===n.pos)},e.exports.startPositionOfParent=o,e.exports.expandSelectionBounds=(e,t)=>{let o,n,r=e.sharedDepth(t.pos)+1,i=e.min(t),a=e.max(t),s=i.depth,l=a.depth,d=l>1&&s>1,c=d&&!a.parent.isTextblock&&!a.sameParent(i),p=d&&a.parent.isTextblock&&a.before(l-1)!==i.before(s-1);if(l>s)o=i.before(r),n=a.after(r);else if(l<s)o=i.before(r),n=a.after(r);else if(c||p)o=i.before(r),n=a.after(r);else{if(!i.node().inlineContent)return{$anchor:e,$head:t};o=s?i.before():i.pos,n=l?a.after():a.pos}let u=e.doc.resolve(o),f=e.doc.resolve(n);return{$anchor:e===i?u:f,$head:t===a?f:u}},e.exports.deleteSelectedRange=(e,t)=>{let o=t||e.selection,n=o.$from.pos,r=o.$to.pos;if(o instanceof i("ks2lK").TextSelection)n=a(o.$from,o.$to).$from.pos;else if((0,i("iYC9s").isTableSelected)(o)){let e=(0,i("id9O1").findTable)(o);e&&(n=e.pos,r=e.pos+e.node.nodeSize)}return e.deleteRange(n,r),e},e.exports.expandToBlockRange=a,e.exports.expandSelectionToBlockRange=({$from:e,$to:t})=>a(e,t)}),a("id9O1",function(e,t){var o=i("8m4tT");let n=e=>(0,o.findParentNodeClosestToPos)(e,e=>e.type.spec.tableRole&&"table"===e.type.spec.tableRole),r=e=>(0,o.findParentNodeClosestToPos)(e,e=>e.type.spec.tableRole&&/cell/i.test(e.type.spec.tableRole));e.exports.findTable=e=>(0,o.findParentNode)(e=>e.type.spec.tableRole&&"table"===e.type.spec.tableRole)(e),e.exports.findTableClosestToPos=n,e.exports.findCellClosestToPos=r,e.exports.findCellRectClosestToPos=e=>{let t=r(e);if(t){let o=n(e);if(o){let e=i("LmqWp").TableMap.get(o.node),n=t.pos-o.start;return e.rectBetween(n,n)}}}}),a("iYC9s",function(e,t){let o=e=>t=>{if(!(0,i("BW42l").isSelectionType)(t,"cell"))return!1;let o=i("LmqWp").TableMap.get(t.$anchorCell.node(-1)),n=t.$anchorCell.start(-1),r=o.cellsInRect(e),a=o.cellsInRect(o.rectBetween(t.$anchorCell.pos-n,t.$headCell.pos-n));for(let e=0,t=r.length;e<t;e++)if(-1===a.indexOf(r[e]))return!1;return!0};e.exports.isColumnSelected=e=>t=>!!(0,i("BW42l").isSelectionType)(t,"cell")&&o({left:e,right:e+1,top:0,bottom:i("LmqWp").TableMap.get(t.$anchorCell.node(-1)).height})(t),e.exports.isRowSelected=e=>t=>!!(0,i("BW42l").isSelectionType)(t,"cell")&&o({left:0,right:i("LmqWp").TableMap.get(t.$anchorCell.node(-1)).width,top:e,bottom:e+1})(t),e.exports.isTableSelected=e=>{if((0,i("BW42l").isSelectionType)(e,"cell")){let t=i("LmqWp").TableMap.get(e.$anchorCell.node(-1));return o({left:0,right:t.width,top:0,bottom:t.height})(e)}return!1}}),a("czo2Z",function(t,o){e(t.exports,"codeBlockPlugin",()=>i("7rj2U").default),i("7rj2U")}),a("7rj2U",function(e,o){var n=i("l998X");i("42omo");var r=i("3pLGZ"),a=i("dZ8uq"),s=i("8m4tT");let l={SET_COPIED_TO_CLIPBOARD:"SET_COPIED_TO_CLIPBOARD",SET_SHOULD_IGNORE_FOLLOWING_MUTATIONS:"SET_SHOULD_IGNORE_FOLLOWING_MUTATIONS",SET_IS_WRAPPED:"SET_IS_WRAPPED"},d=new(0,i("ks2lK").PluginKey)("codeBlockCopySelectionPlugin");function c({state:e,transaction:t}){let o=(0,i("kgnzE").getSelectedNodeOrNodeParentByNodeType)({nodeType:e.schema.nodes.codeBlock,selection:t.selection});return o?{decorationStartAndEnd:[o.start,o.start+o.node.nodeSize],codeBlockNode:o.node}:{decorationStartAndEnd:void 0,codeBlockNode:void 0}}function p(e,t){let o=e.tr;return o.setMeta(d,"show-selection"),t&&t(o),!0}function u(e,t){let o=e.tr;return o.setMeta(d,"remove-selection"),t&&t(o),!0}let f=new(0,i("ks2lK").PluginKey)("codeBlockPlugin");function h(e,t,o){let n=e.selection.$from,r=!e.selection.empty||e.selection instanceof i("adhil").GapCursorSelection?e.selection.$to.pos:n.end(),a=n.start(),s=0===n.depth?0:n.before(),l=e.doc.slice(n.pos,r),d=(0,i("3Ter7").mapSlice)(l,(t,o,n)=>{if(t.type===e.schema.nodes.hardBreak)return e.schema.text("\n");if(t.isText)return t.mark([]);if(t.isInline)return t.attrs.timestamp?e.schema.text((0,i("dIxHZ").timestampToString)(t.attrs.timestamp,null)):t.attrs.url?e.schema.text(t.attrs.url):t.attrs.text?e.schema.text(t.attrs.text):null;if(l.content.childCount-1===n)return t.content;let r=o&&l.content.childCount-1===n;return t.content.childCount&&t.type===e.schema.nodes.paragraph&&!r?t.content.append(i("5SAOw").Fragment.from(e.schema.text("\n\n"))):t.content.childCount?t.content:null}),c=e.tr,p=a===t?s:t,u=e.schema.nodes.codeBlock.createChecked(o,d.content);c.replaceWith(p,Math.min(r,c.doc.content.size),u);let f=c.doc.resolve(c.mapping.map(p)+1),h=i("ks2lK").TextSelection.findFrom(f,e.selection instanceof i("adhil").GapCursorSelection?-1:1,!0);return h?c.setSelection(h):c.setSelection(i("ks2lK").TextSelection.create(c.doc,Math.min(t+n.node().nodeSize-1,c.doc.content.size)))}let m=e=>(0,i("dAtrv").withAnalytics)(e,{action:i("d925B").ACTION.DELETED,actionSubject:i("d925B").ACTION_SUBJECT.CODE_BLOCK,attributes:{inputMethod:i("d925B").INPUT_METHOD.FLOATING_TB},eventType:i("d925B").EVENT_TYPE.TRACK})(g),g=(e,t)=>{let{schema:{nodes:o},tr:n}=e;if(t){let e=n;t((0,s.findSelectedNodeOfType)(o.codeBlock)(n.selection)?(0,s.removeSelectedNode)(n):(0,s.removeParentNodeOfType)(o.codeBlock)(n))}return!0},T=e=>t=>(o,n)=>{let{codeBlock:r}=o.schema.nodes,a=f.getState(o)?.pos;if("number"!=typeof a)return!1;let l=o.tr.setNodeMarkup(a,r,{language:t}).setMeta("scrollIntoView",!1),d=(0,s.isNodeSelection)(o.selection)?i("ks2lK").NodeSelection.create(l.doc,a):l.selection,c=l.setSelection(d);return n&&(e?.attachAnalyticsEvent({action:i("d925B").ACTION.LANGUAGE_SELECTED,actionSubject:i("d925B").ACTION_SUBJECT.CODE_BLOCK,attributes:{language:t},eventType:i("d925B").EVENT_TYPE.TRACK})(c),n(c)),!0},E=e=>(t,o)=>{let{schema:{nodes:n},tr:r}=t,a=(0,s.findParentNodeOfType)(n.codeBlock)(r.selection),c=a&&a.node.textContent;if(c){if((0,i("cMZNY").copyToClipboard)(c),r.setMeta(f,{type:l.SET_COPIED_TO_CLIPBOARD,data:!0}),r.setMeta(d,"remove-selection"),e){let o=(0,i("cMZNY").getAnalyticsPayload)(t,i("d925B").ACTION.COPIED);o&&(o.attributes.inputMethod=i("d925B").INPUT_METHOD.FLOATING_TB,o.attributes.nodeType=a?.node.type.name,e.attachAnalyticsEvent(o)(r))}o&&o(r)}return!0},b=(e,t)=>{let{tr:o}=e,n=f.getState(e);if(n&&n.contentCopied)o.setMeta(f,{type:l.SET_COPIED_TO_CLIPBOARD,data:!1}),o.setMeta(d,"remove-selection"),t&&t(o);else{let o=e.tr;o.setMeta(d,"remove-selection"),t&&t(o)}return!0},S=(e,t)=>{let{tr:o}=e;return o.setMeta(f,{type:l.SET_SHOULD_IGNORE_FOLLOWING_MUTATIONS,data:!0}),t&&t(o),!0},y=(e,t)=>{let{tr:o}=e;return o.setMeta(f,{type:l.SET_SHOULD_IGNORE_FOLLOWING_MUTATIONS,data:!1}),t&&t(o),!0};function _({state:e}){let{tr:t}=e,{from:o}=e.selection,{codeBlock:n}=e.schema.nodes,r=e.selection.$from.node(-1),a=r?.type,l=e.selection.$from.parent.type;return(0,i("zT4ZO").shouldSplitSelectedNodeOnNodeInsertion)({parentNodeType:l,grandParentNodeType:a,content:n.createAndFill()})&&(0,i("zT4ZO").contentAllowedInCodeBlock)(e)?t=h(e,o,void 0):(0,s.safeInsert)(n.createAndFill())(t).scrollIntoView(),t}let C=e=>(t,o)=>{let n=(0,i("dv3tk").findCodeBlock)(t)?.node,{tr:r}=t;if(!i("dNXVc").codeBlockWrappedStates||!n)return!1;let a=!(0,i("dNXVc").isCodeBlockWordWrapEnabled)(n);return i("dNXVc").codeBlockWrappedStates.set(n,a),r.setMeta(f,{type:l.SET_IS_WRAPPED,data:a}),o&&(e?.attachAnalyticsEvent({action:i("d925B").ACTION.TOGGLE_CODE_BLOCK_WRAP,actionSubject:i("d925B").ACTION_SUBJECT.CODE_BLOCK,attributes:{platform:i("e2wMq").PLATFORMS.WEB,mode:i("e2wMq").MODE.EDITOR,wordWrapEnabled:a,codeBlockNodeSize:n.nodeSize},eventType:i("d925B").EVENT_TYPE.TRACK})(r),o(r)),!0};var I=i("1oCLl");let O=new(0,i("ks2lK").PluginKey)("codeBlockAutoFullStopTransformPluginKey"),k={"{":"}","[":"]","(":")"},v=(e,t)=>!!/^[}\])]/.test(t)||!/^[^\s]/.test(t),x=(e,t)=>{let o=Object.keys(k).find(t=>e.endsWith(t)),n=o?k[o]:void 0,r=!!n&&t.startsWith(n);return{left:o,right:n,hasTrailingMatchingBracket:r}};function N(e){return e.$cursor||void 0}let A=e=>e.selection.$from.sameParent(e.selection.$to)&&e.selection.$from.parent.type===e.schema.nodes.codeBlock,P=e=>!!N(e.selection)&&A(e),M=e=>{let{$from:t}=e.selection;if(t.nodeBefore&&t.nodeBefore.isText){let e=t.nodeBefore.text.lastIndexOf("\n");return{text:t.nodeBefore.text.substring(e+1),pos:t.start()+e+1}}return{text:"",pos:t.pos}},R=e=>{let{$to:t}=e.selection;if(t.nodeAfter&&t.nodeAfter.isText){let e=t.nodeAfter.text.indexOf("\n");return{text:t.nodeAfter.text.substring(0,e>=0?e:void 0),pos:e>=0?t.pos+e:t.end()}}return{text:"",pos:t.pos}};function w(e){let{pos:t}=M(e),{pos:o}=R(e);return{text:e.doc.textBetween(t,o),start:t,end:o}}let L=(e,t)=>{let o=0;e.split("\n").forEach(e=>{t(e,o),o+=e.length+1})},B={token:" ",size:2,regex:/[^ ]/},D={token:"	",size:1,regex:/[^\t]/},U=e=>{let t=e.startsWith("	")?D:B,o=e.search(t.regex);return{indentToken:t,indentText:e.substring(0,o>=0?o:e.length)}};function K(e,t){return 0===t||0===e.length?0:e.length/t}let j=e=>(t,o)=>{let{text:n,start:r}=w(t),{tr:a,selection:s}=t;return L(n,(t,o)=>{let{indentText:n,indentToken:l}=U(t),d=K(n,l.size),c=l.token.repeat(l.size-n.length%l.size||l.size);a.insertText(c,a.mapping.map(r+o,-1)),e?.attachAnalyticsEvent({action:i("d925B").ACTION.FORMATTED,actionSubject:i("d925B").ACTION_SUBJECT.TEXT,actionSubjectId:i("d925B").ACTION_SUBJECT_ID.FORMAT_INDENT,eventType:i("d925B").EVENT_TYPE.TRACK,attributes:{inputMethod:i("d925B").INPUT_METHOD.KEYBOARD,previousIndentationLevel:d,newIndentLevel:d+1,direction:i("aU3dp").INDENT_DIRECTION.INDENT,indentType:i("aU3dp").INDENT_TYPE.CODE_BLOCK}})(a),s.empty||a.setSelection(i("ks2lK").TextSelection.create(a.doc,a.mapping.map(s.from,-1),a.selection.to))}),o&&o(a),!0},F=e=>(t,o)=>{let{text:n,start:r}=w(t),{tr:a}=t;return L(n,(t,o)=>{let{indentText:n,indentToken:s}=U(t);if(n){let t=K(n,s.size),l=n.length%s.size||s.size;a.delete(a.mapping.map(r+o),a.mapping.map(r+o+l)),e?.attachAnalyticsEvent({action:i("d925B").ACTION.FORMATTED,actionSubject:i("d925B").ACTION_SUBJECT.TEXT,actionSubjectId:i("d925B").ACTION_SUBJECT_ID.FORMAT_INDENT,eventType:i("d925B").EVENT_TYPE.TRACK,attributes:{inputMethod:i("d925B").INPUT_METHOD.KEYBOARD,previousIndentationLevel:t,newIndentLevel:t-1,direction:i("aU3dp").INDENT_DIRECTION.OUTDENT,indentType:i("aU3dp").INDENT_TYPE.CODE_BLOCK}})(a)}}),o&&o(a),!0};function G(e,t){let{text:o}=M(e),{indentText:n}=U(o);return!!n&&!!t&&(t(e.tr.insertText("\n"+n)),!0)}let H={"'":"'",'"':'"',"`":"`"},z=(e,t)=>!!/^[}\])]/.test(t)||!(/^[^\s]/.test(t)||/[A-Za-z0-9]$/.test(e)||/[\'\"\`]$/.test(e)),V=(e,t)=>{let o=Object.keys(H).find(t=>e.endsWith(t)),n=o?H[o]:void 0,r=!!n&&t.startsWith(n);return{left:o,right:n,hasTrailingMatchingQuote:r}},W={...k,...H},q=e=>Object.keys(W).some(t=>e.startsWith(W[t])),X=e=>Object.keys(W).some(t=>e===W[t]);var $=e=>{let t=e?.analytics?.actions;return new(0,i("1S4f7").SafePlugin)({props:{handleTextInput(t,o,n,r){let{state:i,dispatch:a}=t,l=e?.composition?.sharedState.currentState();if(P(i)&&!l?.isComposing){let e=M(i).text,t=R(i).text;if(q(t)&&X(r)&&t.startsWith(r))return a((0,s.setTextSelection)(n+r.length)(i.tr)),!0;if(v(e,t)){let{left:l,right:d}=x(e+r,t);if(l&&d){let e=i.schema.text(r+d),t=i.tr.replaceWith(o,n,e);return a((0,s.setTextSelection)(o+r.length)(t)),!0}}if(z(e,t)){let{left:l,right:d}=V(e+r,t);if(l&&d){let e=i.schema.text(r+d),t=i.tr.replaceWith(o,n,e);return a((0,s.setTextSelection)(o+r.length)(t)),!0}}}return!1},handleKeyDown:(0,i("dus6D").keydownHandler)({Backspace:(e,t)=>{if(P(e)){let o=N(e.selection),n=M(e).text,r=R(e).text,{left:i,right:a,hasTrailingMatchingBracket:s}=x(n,r);if(i&&a&&s&&t)return t(e.tr.delete(o.pos-i.length,o.pos+a.length)),!0;let{left:l,right:d,hasTrailingMatchingQuote:c}=V(n,r);if(l&&d&&c&&t)return t(e.tr.delete(o.pos-l.length,o.pos+d.length)),!0;let{indentToken:{size:p,token:u},indentText:f}=U(n);if(n===f&&f.endsWith(u.repeat(p))&&t)return t(e.tr.delete(o.pos-(p-f.length%p||p),o.pos)),!0}return!1},Enter:(0,i("e7tBw").filterCommand)(A,G),"Mod-]":(0,i("e7tBw").filterCommand)(A,j(t)),"Mod-[":(0,i("e7tBw").filterCommand)(A,F(t)),Tab:(0,i("e7tBw").filterCommand)(A,(e,o)=>{if(!o)return!1;if(P(e)){let{text:t}=M(e),{indentToken:n}=U(t),r=n.token.repeat(n.size-t.length%n.size||n.size);return o(e.tr.insertText(r)),!0}return j(t)(e,o)}),"Shift-Tab":(0,i("e7tBw").filterCommand)(A,F(t)),"Mod-a":(e,t)=>{if(A(e)){let{$from:o,$to:n}=e.selection;if((0!==o.parentOffset||n.parentOffset!==n.parent.nodeSize-2)&&t)return t(e.tr.setSelection(i("ks2lK").TextSelection.create(e.doc,o.start(),n.end()))),!0}return!1}})}})};let Y=e=>t=>t.delete(e.before(e.depth),e.after(e.depth)),J=e=>t=>{let o=i("ks2lK").Selection.findFrom(t.doc.resolve(e),-1,!0);return o&&t.setSelection(o),t},Z=e=>f.getState(e),Q={container:i("5MaNT").CodeBlockSharedCssClassName.CODEBLOCK_CONTAINER,start:i("5MaNT").CodeBlockSharedCssClassName.CODEBLOCK_START,end:i("5MaNT").CodeBlockSharedCssClassName.CODEBLOCK_END,contentWrapper:i("5MaNT").CodeBlockSharedCssClassName.CODEBLOCK_CONTENT_WRAPPER,contentWrapped:i("5MaNT").CodeBlockSharedCssClassName.CODEBLOCK_CONTENT_WRAPPED,gutter:i("5MaNT").CodeBlockSharedCssClassName.CODEBLOCK_LINE_NUMBER_GUTTER,content:i("5MaNT").CodeBlockSharedCssClassName.CODEBLOCK_CONTENT,lineNumberWidget:i("5MaNT").CodeBlockSharedCssClassName.CODEBLOCK_CONTAINER_LINE_NUMBER_WIDGET},ee=RegExp("\n","g"),et=(e,t,o)=>["div",{class:Q.container},["div",{class:Q.start,contenteditable:"false"}],["div",{class:Q.contentWrapper},["div",{class:Q.gutter,contenteditable:"false"}],["div",{class:Q.content},["code",{"data-language":e.attrs.language||"",spellcheck:"false",contenteditable:t?"true":"false","data-testid":"code-block--code","aria-label":o,...(0,i("dh538").fg)("platform_editor_adf_with_localid")&&{"data-local-id":e.attrs.localId}},0]]],["div",{class:Q.end,contenteditable:"false"}]];class eo{handleEditorDisabledChanged(){this.api?.editorDisabled&&(this.cleanupEditorDisabledListener=this.api.editorDisabled.sharedState.onChange(e=>{this.contentDOM&&this.contentDOM.setAttribute("contenteditable",e.nextSharedState.editorDisabled?"false":"true")}))}updateDOMAndSelection(e,t){if(this.dom?.childNodes&&this.dom.childNodes.length>1){let o=this.dom.childNodes[1],n=o?.childNodes[1];if(n?.childNodes?.length>0){let o=n.firstChild;o.innerHTML=e;let r=Array.from(o.childNodes).find(e=>"#text"===e.nodeName),i=window.getSelection(),a=document.createRange();a.setStart(r,t),a.collapse(!0),i?.removeAllRanges(),i?.addRange(a)}}}coalesceDOMElements(){if(this.dom?.childNodes&&this.dom.childNodes.length>1){let e=this.dom.childNodes[1],t=e?.childNodes[1];if(t?.childNodes&&t.childNodes.length>1){let e="";for(;t.childNodes.length>1;){let o=t.lastChild;e=o.innerHTML+e,t.removeChild(o)}let o=t.firstChild;e=o.innerHTML+"\n"+e;let n=o.innerHTML.length+1;setTimeout(this.updateDOMAndSelection.bind(this,e,n),20)}}}update(e){return e.type===this.node.type&&(e!==this.node&&(e.attrs.language!==this.node.attrs.language&&this.contentDOM.setAttribute("data-language",e.attrs.language||""),this.node=e,this.maintainDynamicGutterSize(),((0,I.expValEquals)("platform_editor_hydratable_ui","isEnabled",!0)?(0,i("d7ZU3").getBrowserInfo)():i("d7ZU3").browser).android&&(this.coalesceDOMElements(),y(this.view.state,this.view.dispatch))),!0)}ignoreMutation(e){let t=Z(this.view.state);return!!t?.shouldIgnoreFollowingMutations||e.target===this.lineNumberGutter||e.target.parentNode===this.lineNumberGutter}destroy(){this.cleanupEditorDisabledListener&&this.cleanupEditorDisabledListener(),this.cleanupEditorDisabledListener=void 0}constructor(e,t,o,n,r,a){this.cleanupEditorDisabledListener=a,this.node=void 0,this.dom=void 0,this.contentDOM=void 0,this.lineNumberGutter=void 0,this.getPos=void 0,this.view=void 0,this.formattedAriaLabel="",this.api=void 0,this.maintainDynamicGutterSize=()=>{let e=1;this.node.forEach(t=>{t.text&&(e+=(t.text.match(ee)||[]).length)});let t=e.toString().length;this.dom.style.setProperty("--lineNumberGutterWidth",`${t}ch`)};let{dom:s,contentDOM:l}=i("5SAOw").DOMSerializer.renderSpec(document,et(e,!r?.editorDisabled?.sharedState.currentState()?.editorDisabled,n));this.getPos=o,this.view=t,this.node=e,this.dom=s,this.contentDOM=l,this.lineNumberGutter=this.dom.querySelector(`.${Q.gutter}`),this.api=r,this.maintainDynamicGutterSize(),i("dNXVc").codeBlockWrappedStates.has(e)||i("dNXVc").codeBlockWrappedStates.set(e,i("dNXVc").defaultWordWrapState),this.handleEditorDisabledChanged()}}let en=(e,t,o,n,r)=>new eo(e,t,o,n,r),er="decorationWidgetType",ei="decorationNodeType",ea=e=>(function(e){let t=[];return e.doc.descendants((o,n)=>o.type!==e.schema.nodes.codeBlock||(t.push({node:o,pos:n}),!1)),t})(e).flatMap(e=>ec(ed(e))),es=(e,t,o)=>{let n=o;return n=el(e,t,n),n=ep(e,t,n)},el=(e,t,o)=>{let n=o,r=[];return t.forEach(e=>{let t=n.find(e.pos,e.pos+e.node.nodeSize,e=>e.type===er),o=ed(e);(0===t.length||t.length!==o.length||t[0].spec.totalLineCount!==o.length)&&(n=n.remove(t),r.push(...ec(o)))}),n.add(e.doc,[...r])},ed=e=>{let{node:t,pos:o}=e,n=t.content,r=[];return 0===n.size?[{lineStart:o+1,lineNumber:1}]:(n.forEach(e=>{let t=e.textContent,n=o,i=t.split("\n").map((e,t)=>{let o=e.length,r=n+1;return n+=o+1,{lineStart:r,lineNumber:t+1}});r=[...r,...i]}),r)},ec=e=>e.map(t=>{let{lineStart:o,lineNumber:n}=t;return i("ftzrq").Decoration.widget(o,()=>{let e=document.createElement("span");return e.textContent=`${n}`,e.classList.add(Q.lineNumberWidget),e},{type:er,side:-1,totalLineCount:e.length})}),ep=(e,t,o)=>{let n=o;return t.forEach(t=>{(0,i("dNXVc").isCodeBlockWordWrapEnabled)(t.node)!==(0!==ef(t.pos,o).length)&&(n=eu(o,e,t))}),n},eu=(e,t,o)=>{if(!o||void 0===o.pos)return e;let n=e,{pos:r,node:a}=o;if((0,i("dNXVc").isCodeBlockWordWrapEnabled)(a)){let e=i("ftzrq").Decoration.node(r,r+a.nodeSize,{class:Q.contentWrapped},{type:ei});n=n.add(t.doc,[e])}else{let e=ef(r,n);if(n=n.remove(e),0===e.length&&r+a.nodeSize<=t.doc.content.size){let e=i("ftzrq").Decoration.node(r,r+a.nodeSize,{},{type:ei});n=n.add(t.doc,[e])}}return n},ef=(e,t)=>{let o=e+1;return t.find(o,o,e=>e.type===ei)},eh=({useLongPressSelection:e=!1,getIntl:t,allowCompositionInputOverride:o=!1,api:n})=>{let r={click:()=>{n?.core?.actions.execute(n?.interaction?.commands.handleInteraction)}};return o&&(r.beforeinput=(e,t)=>{let o=t.inputType,n=t.data,r=(0,I.expValEquals)("platform_editor_hydratable_ui","isEnabled",!0)?(0,i("d7ZU3").getBrowserInfo)():i("d7ZU3").browser;return r.ios&&t.composed&&"insertParagraph"===o&&(0,i("dv3tk").findCodeBlock)(e.state,e.state.selection)?(t.preventDefault(),!0):r.android&&t.composed&&"insertCompositionText"===o&&"\n"===n[n?.length-1]&&(0,i("dv3tk").findCodeBlock)(e.state,e.state.selection)?((t.target.outerText+"\n").endsWith(n)?setTimeout(()=>{e.someProp("handleKeyDown",t=>t(e,new KeyboardEvent("keydown",{bubbles:!0,cancelable:!0,key:"Enter",code:"Enter"})))},0):S(e.state,e.dispatch),!0):(r.android&&y(e.state,e.dispatch),!1)}),new(0,i("1S4f7").SafePlugin)({state:{init(e,t){let o=(0,i("dv3tk").findCodeBlock)(t,t.selection),r=n?.codeBlockAdvanced!==void 0&&(0,I.expValEquals)("platform_editor_code_block_fold_gutter","isEnabled",!0)?[]:ea(t);return{pos:o?o.pos:null,contentCopied:!1,isNodeSelected:!1,shouldIgnoreFollowingMutations:!1,decorations:i("ftzrq").DecorationSet.create(t.doc,r)}},apply(e,t,o,r){let a=e.getMeta(f);if(a?.type===l.SET_IS_WRAPPED){let o=(0,i("dv3tk").findCodeBlock)(r,e.selection);return{...t,decorations:eu(t.decorations,e,o)}}if(e.docChanged){let a=(0,i("dv3tk").findCodeBlock)(r,e.selection),s=t.decorations.map(e.mapping,e.doc),l=function(e){let t=[],o=new Set;return(e.steps.forEach(n=>{n.getMap().forEach((n,r,i,a)=>{e.doc.nodesBetween(i,Math.min(a,e.doc.content.size),(e,n)=>{"codeBlock"!==e.type.name||o.has(n)||(o.add(n),t.push({node:e,pos:n}))})})}),t.length<1)?null:t}(e);return l&&((0,i("dNXVc").updateCodeBlockWrappedStateNodeKeys)(l,o),n?.codeBlockAdvanced===void 0&&(s=es(e,l,s))),{...t,pos:a?a.pos:null,isNodeSelected:e.selection instanceof i("ks2lK").NodeSelection,decorations:s}}if(e.selectionSet){let o=(0,i("dv3tk").findCodeBlock)(r,e.selection);return{...t,pos:o?o.pos:null,isNodeSelected:e.selection instanceof i("ks2lK").NodeSelection}}return a?.type===l.SET_COPIED_TO_CLIPBOARD?{...t,contentCopied:a.data}:a?.type===l.SET_SHOULD_IGNORE_FOLLOWING_MUTATIONS?{...t,shouldIgnoreFollowingMutations:a.data}:t}},key:f,props:{decorations:e=>f.getState(e).decorations||i("ftzrq").DecorationSet.empty,nodeViews:{codeBlock:(e,o,r)=>{let{formatMessage:a}=t();return en(e,o,r,a(i("2UWDO").messages.codeblock),n)}},handleClickOn:(0,i("3tffm").createSelectionClickHandler)(["codeBlock"],e=>!!(e.classList.contains(Q.lineNumberWidget)||e.classList.contains(Q.gutter)),{useLongPressSelection:e}),handleDOMEvents:r}})},em=()=>{let e=window.getSelection();if(e){let t=e&&1===e.rangeCount&&e.getRangeAt(0).cloneRange();t&&(e.removeAllRanges(),e.addRange(t))}};var eg=(e,t)=>{((0,I.expValEquals)("platform_editor_hydratable_ui","isEnabled",!0)?(0,i("d7ZU3").getBrowserInfo)():i("d7ZU3").browser).gecko&&e.docChanged&&"number"==typeof f.getState(t)?.pos&&em()};i("42omo");let eT=()=>(0,n.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",children:(0,n.jsx)("g",{fill:"currentColor",clipPath:"url(#clip0_654_431)",children:(0,n.jsx)("path",{d:"M20 4h-1v16h1V4ZM3 8a1 1 0 0 1 1-1h9.5a4.5 4.5 0 1 1 0 9h-2.086l.293.293a1 1 0 0 1-1.414 1.414l-2-2a1 1 0 0 1 0-1.414l2-2a1 1 0 0 1 1.414 1.414l-.293.293H13.5a2.5 2.5 0 0 0 0-5H4a1 1 0 0 1-1-1Z",clipRule:"evenodd",fillRule:"evenodd"})})}),eE=()=>(0,n.jsx)(eT,{"aria-label":"wrapIcon"}),eb=[{name:"(None)",alias:["none"],value:"none"},...i("cTQmR").SUPPORTED_LANGUAGES],eS=(e=!1,o,n)=>(r,{formatMessage:a})=>{let l=o?.editorViewMode?.sharedState.currentState()?.mode==="view",{hoverDecoration:d}=o?.decorations?.actions??{},c=o?.analytics?.actions,h=f.getState(r),g=h?.pos??null;if(!h||null===g)return;let S=r.doc.nodeAt(g),y=r.schema.nodes.codeBlock;if(S?.type!==y)return;let _=(0,i("dNXVc").isCodeBlockWordWrapEnabled)(S),I=S?.attrs?.language,O=(n?eb.map(e=>({...e,name:n(e.name)})):eb).sort((e,t)=>"none"===e.alias[0]?-1:e.name.toLowerCase()>t.name.toLowerCase()?1:e.name.toLowerCase()<t.name.toLowerCase()?-1:0).map(e=>({label:e.name,value:e.alias[0],alias:e.alias})),k={id:"editor.codeBlock.languageOptions",type:"select",selectType:"list",onChange:e=>T(c)(e.value),defaultValue:I?O.find(e=>e.value===I)||O.find(e=>e.alias.includes(I)):null,placeholder:a(i("f8J4a").codeBlockButtonMessages.selectLanguage),options:O,filterOption:ey},v={type:"separator"},x=(0,i("iHzeA").areToolbarFlagsEnabled)(!!o?.toolbar),N=e?[{id:"editor.codeBlock.copy",type:"button",supportsViewMode:!0,appearance:"subtle",icon:t(i("gt9HV")),onClick:E(c),title:a(h.contentCopied?i("f8J4a").codeBlockButtonMessages.copiedCodeToClipboard:i("f8J4a").codeBlockButtonMessages.copyCodeToClipboard),onMouseEnter:p,onMouseLeave:b,onFocus:p,onBlur:u,hideTooltipOnClick:!1,disabled:h.isNodeSelected,tabIndex:null},v]:[],A=[];if(x){let o=[{title:a(i("61p3e").default.delete),icon:t(i("gKvd9"))({label:""}),onMouseEnter:d?.(y,!0),onMouseLeave:d?.(y,!1),onFocus:d?.(y,!0),onBlur:d?.(y,!1),onClick:m(c)}];e&&o.unshift({title:a(i("61p3e").default.copyToClipboard),onClick:E(c),icon:t(i("gt9HV"))({label:""}),onMouseEnter:p,onMouseLeave:b,onFocus:p,onBlur:u,disabled:h.isNodeSelected}),A=l?[...N]:[{type:"separator",fullHeight:!0},{type:"overflow-dropdown",testId:"code-block-overflow-dropdown-trigger",options:o}]}else A=[v,...N,{id:"editor.codeBlock.delete",type:"button",appearance:"danger",icon:t(i("gKvd9")),iconFallback:t(i("gKvd9")),onMouseEnter:d?.(y,!0),onMouseLeave:d?.(y,!1),onFocus:d?.(y,!0),onBlur:d?.(y,!1),onClick:m(c),title:a(i("61p3e").default.remove),tabIndex:null}];return{title:"CodeBlock floating controls",getDomRef:e=>(0,s.findDomRefAtPos)(g,e.domAtPos.bind(e)),nodeType:y,items:[k,...x?[]:[v],{id:"editor.codeBlock.wrap",type:"button",supportsViewMode:!0,icon:t(i("aK2ZC")),iconFallback:eE,onClick:C(c),title:a((0,i("dh538").fg)("editor_a11y_remove_unwrap_button")?i("f8J4a").codeBlockButtonMessages.wrapCode:_?i("f8J4a").codeBlockButtonMessages.unwrapCode:i("f8J4a").codeBlockButtonMessages.wrapCode),tabIndex:null,selected:_},...A],scrollable:!0}},ey=(e,t)=>{let{data:o}=e,n=t.toLowerCase();return o.label.toLowerCase().includes(n)||o.alias.some(e=>e.toLowerCase()===n)};i("42omo");let e_="codeBlock",eC=({api:e})=>{let{formatMessage:o}=(0,i("8C5kA").default)();return e?.blockMenu?.actions.isTransformOptionDisabled(e_)?null:(0,n.jsx)(i("2GVu1").ToolbarDropdownItem,{onClick:t=>{let o=t.nativeEvent instanceof KeyboardEvent||0===t.nativeEvent.detail?i("d925B").INPUT_METHOD.KEYBOARD:i("d925B").INPUT_METHOD.MOUSE,n=i("d925B").INPUT_METHOD.BLOCK_MENU;e?.core.actions.execute(({tr:t})=>{let r=e?.blockMenu?.commands.transformNode(t.doc.type.schema.nodes.codeBlock,{inputMethod:n,triggeredFrom:o,targetTypeName:e_});return r?r({tr:t}):null})},elemBefore:(0,n.jsx)(t(i("eIlE7")),{label:""}),children:o(i("eKkkY").messages.codeBlock)})},eI=e=>()=>(0,n.jsx)(eC,{api:e});e.exports.default=({config:e,api:t})=>((0,a.expValEqualsNoExposure)("platform_editor_block_menu","isEnabled",!0)&&t?.blockMenu?.actions.registerBlockMenuComponents([{type:"block-menu-item",key:i("btNLq").TRANSFORM_STRUCTURE_CODE_BLOCK_MENU_ITEM.key,parent:{type:"block-menu-section",key:i("btNLq").TRANSFORM_STRUCTURE_MENU_SECTION.key,rank:i("gEb6G").TRANSFORM_STRUCTURE_MENU_SECTION_RANK[i("btNLq").TRANSFORM_STRUCTURE_CODE_BLOCK_MENU_ITEM.key]},component:eI(t)}]),{name:"codeBlock",nodes:()=>[{name:"codeBlock",node:(0,i("dh538").fg)("platform_editor_adf_with_localid")?i("4HD7y").codeBlockWithLocalId:i("4HD7y").codeBlock}],getSharedState(e){if(e)return{copyButtonHoverNode:d.getState(e).codeBlockNode}},pmPlugins:()=>[{name:"codeBlock",plugin:({getIntl:o})=>eh({...e,getIntl:o,api:t})},{name:"codeBlockInputRule",plugin:({schema:e})=>(function(e,t){let o=function(e,t){let o=(0,i("l03WE").inputRuleWithAnalytics)({action:i("d925B").ACTION.INSERTED,actionSubject:i("d925B").ACTION_SUBJECT.DOCUMENT,actionSubjectId:i("d925B").ACTION_SUBJECT_ID.CODE_BLOCK,attributes:{inputMethod:i("d925B").INPUT_METHOD.FORMATTING},eventType:i("d925B").EVENT_TYPE.TRACK},e),n=e=>e.length>0&&3===e[0].length,r=(0,i("l03WE").createRule)(/(?!\s)(`{3,})$/,(e,t,o,r)=>{if(!n(t))return null;let i={};if(t[4]&&(i.language=t[4]),function(e){if(!e.selection)return!1;let{$from:t}=e.selection,o=t.parent;if(!o.isTextblock||o.type===e.schema.nodes.codeBlock)return!1;let n=t.depth-1,r=t.node(n),i=t.index(n);return r.canReplaceWith(i,i+1,e.schema.nodes.codeBlock)}(e))return h(e,o,i);let a=e.tr;a.delete(o,r);let l=a.doc.type.schema.nodes.codeBlock.createChecked();return(0,s.safeInsert)(l)(a),a}),a=(0,i("l03WE").createRule)(RegExp(`((${i("14sLv").leafNodeReplacementCharacter}\`{3,})|^\\s(\`{3,}))(\\S*)$`),(e,o,r,a)=>{if(!n(o))return null;let s={};o[4]&&(s.language=o[4]);let l=Math.max(o.index+e.selection.$from.start(),1);return(0,i("afcIe").insertBlock)(e,t.nodes.codeBlock,l,a,s)});return[o(r),o(a)]}(t,e);return new(0,i("1S4f7").SafePlugin)((0,i("aIMBk").createPlugin)("code-block-input-rule",o,{isBlockNodeRule:!0}))})(e,t?.analytics?.actions)},{name:"codeBlockIDEKeyBindings",plugin:()=>$(t)},{name:"codeBlockKeyMap",plugin:({schema:e})=>(0,i("dus6D").keymap)({Backspace:(t,o)=>{let n=N(t.selection),{codeBlock:r,listItem:a,table:l,layoutColumn:d,paragraph:c}=t.schema.nodes;if(!n||n.parent.type!==r||!o)return!1;if(1===n.pos||(0,s.hasParentNodeOfType)(a)(t.selection)&&0===n.parentOffset){let e=(0,s.findParentNodeOfTypeClosestToPos)(n,r);return!!e&&(o(t.tr.setNodeMarkup(e.pos,e.node.type,e.node.attrs,[]).setBlockType(n.pos,n.pos,c)),!0)}if(n.node&&(0,i("l9G9n").isEmptyNode)(e)(n.node())&&((0,s.hasParentNodeOfType)(d)(t.selection)||(0,s.hasParentNodeOfType)(l)(t.selection))){let{tr:e}=t,r=n.pos;return Y(n)(e),J(r)(e),o(e.scrollIntoView()),!0}return!!(0,i("l9G9n").isEmptyNode)(e)(n.node())&&(o(Y(n)(t?.tr)),!0)}})},{name:"codeBlockCopySelection",plugin:()=>new(0,i("1S4f7").SafePlugin)({key:d,state:{init:()=>({decorationStartAndEnd:void 0}),apply(e,t,o,n){switch(e.getMeta(d)){case"show-selection":return c({state:n,transaction:e});case"remove-selection":return{decorationStartAndEnd:void 0};default:if(void 0!==t.decorationStartAndEnd)return c({state:n,transaction:e});return t}}},props:{decorations(e){if(d.getState(e).decorationStartAndEnd){let[t,o]=d.getState(e).decorationStartAndEnd;return i("ftzrq").DecorationSet.create(e.doc,[i("ftzrq").Decoration.inline(t,o,{class:"ProseMirror-fake-text-selection"})])}return i("ftzrq").DecorationSet.empty}}})},{name:"codeBlockAutoFullStopTransform",plugin:()=>new(0,i("1S4f7").SafePlugin)({key:O,appendTransaction(e,t,o){if(!(0,i("dh538").fg)("code_block_auto_insertion_bug_fix"))return;let{tr:n}=o,{tr:r}=t,{from:a}=r.selection,{from:s,to:l}=n.selection,d=!!(0,i("dv3tk").findCodeBlock)(t,r.selection)&&!!(0,i("dv3tk").findCodeBlock)(o,n.selection);if(((0,I.expValEquals)("platform_editor_hydratable_ui","isEnabled",!0)?(0,i("d7ZU3").getBrowserInfo)():i("d7ZU3").browser).mac&&s===l&&s===a+1&&d)try{let e=r.doc.textBetween(a-1,a),t=n.doc.textBetween(s-2,s-1);if(" "===e&&"."===t)return n.delete(s-2,s),n.insertText("  ",s-2),n}catch(e){}}})}],onEditorViewStateUpdated(e){eg(e.originalTransaction,e.newEditorState)},actions:{insertCodeBlock:e=>{var o;return o=t?.analytics?.actions,(0,i("dAtrv").withAnalytics)(o,{action:i("d925B").ACTION.INSERTED,actionSubject:i("d925B").ACTION_SUBJECT.DOCUMENT,actionSubjectId:i("d925B").ACTION_SUBJECT_ID.CODE_BLOCK,attributes:{inputMethod:e},eventType:i("d925B").EVENT_TYPE.TRACK})(function(e,t){let o=_({state:e});return t&&t(o),!0})}},pluginsOptions:{quickInsert:({formatMessage:e})=>[{id:"codeblock",title:e(i("2UWDO").messages.codeblock),description:e(i("2UWDO").messages.codeblockDescription),keywords:["code block"],priority:700,keyshortcut:"```",icon:()=>(0,n.jsx)(r.IconCode,{}),action(e,o,n){let r=_({state:o});return t?.analytics?.actions.attachAnalyticsEvent({action:i("d925B").ACTION.INSERTED,actionSubject:i("d925B").ACTION_SUBJECT.DOCUMENT,actionSubjectId:i("d925B").ACTION_SUBJECT_ID.CODE_BLOCK,attributes:{inputMethod:(0,a.expValEqualsNoExposure)("platform_editor_plain_text_support","isEnabled",!0)&&n||i("d925B").INPUT_METHOD.QUICK_INSERT},eventType:i("d925B").EVENT_TYPE.TRACK})(r),r}}],floatingToolbar:eS(e?.allowCopyToClipboard,t,e?.overrideLanguageName)}})}),a("dNXVc",function(e,t){var o=i("1oCLl");let n=new WeakMap,r=new WeakMap,a=e=>{let t=n.get(e);return void 0!==t&&t},s=e=>r.get(e)||[],l=(e,t)=>{if(r.has(t))return;let o=s(e);r.set(t,o),r.delete(e)},d=(e,t)=>{if(r.has(e.node)||t.doc.content.size<=e.pos)return;let o=t.doc.nodeAt(e.pos);if(!o||o.type!==t.schema.nodes.codeBlock)return;let n=s(o);r.set(e.node,n)};e.exports.defaultWordWrapState=!1,e.exports.codeBlockWrappedStates=n,e.exports.isCodeBlockWordWrapEnabled=a,e.exports.getCodeBlockFoldState=s,e.exports.setCodeBlockFoldState=(e,t)=>{r.set(e,t)},e.exports.transferCodeBlockWrappedValue=(e,t)=>{if((0,o.expValEquals)("platform_editor_code_block_fold_gutter","isEnabled",!0)&&l(e,t),n.has(t))return;let r=a(e);n.set(t,r),n.delete(e)},e.exports.updateCodeBlockWrappedStateNodeKeys=(e,t)=>{e.forEach(e=>{if((0,o.expValEquals)("platform_editor_code_block_fold_gutter","isEnabled",!0)&&d(e,t),n.has(e.node)||t.doc.content.size<=e.pos)return;let r=t.doc.nodeAt(e.pos);if(!r||r.type!==t.schema.nodes.codeBlock)return;let i=a(r);n.set(e.node,i)})}}),a("zT4ZO",function(e,t){var o,n=i("8m4tT");i("l9G9n"),(o={}).Before="before",o.After="after";let r=({selection:e,doc:t},o)=>{if(e.$from.depth>1){if(o.attrs.layout&&"default"!==o.attrs.layout)return o.type.createChecked({...o.attrs,layout:"default"},o.content,o.marks);let e=t.type.schema.marks.breakout;if(e&&e.isInSet(o.marks)){let t=e.removeFromSet(o.marks);return o.type.createChecked(o.attrs,o.content,t)}}return o},a=(e,t)=>t.resolve(e.after()).node().lastChild===e.node(),s=(e,t)=>t.resolve(e.before()).node().firstChild===e.node(),l=e=>{let{nodes:t}=e.doc.type.schema;return(0,n.hasParentNodeOfType)([t.orderedList,t.bulletList])(e.selection)},d=e=>{let{nodes:t}=e.doc.type.schema;return(0,n.hasParentNodeOfType)(t.panel)(e.selection)},c=e=>{let{nodes:t}=e.doc.type.schema,o=(0,n.findParentNodeOfType)([t.orderedList,t.bulletList])(e.selection);return!!o&&(0,i("irKZA").isListItemNode)(e.doc.resolve(o.pos).parent)},p=(e,t,o,n,r)=>s(n,e.doc)&&"before"===t||a(n,e.doc)&&"after"===t?e.insert(o[t](),r):e.insert(n[t](),r),u=(e,t)=>[t.bulletList,t.orderedList,t.panel].includes(e),f=(e,t)=>o=>{let r,{nodes:d}=o.doc.type.schema,f=[d.rule,d.mediaSingle];if(e instanceof i("5SAOw").Fragment||!f.includes(e.type)||!o.selection.empty||(0,n.isNodeSelection)(o.selection))return null;let{$from:g}=o.selection,T=t?o.doc.resolve(t):(0,n.isNodeSelection)(o.selection)?o.doc.resolve(g.pos+1):g,E=T.end(),b=T.start();(0,i("kTbzR").isEmptyParagraph)(T.parent)?a(T,o.doc)?r="after":s(T,o.doc)&&(r="before"):T.pos===E?r="after":T.pos===b&&(r="before");let S=o.selection.$from.node(-1)?.type,y=o.selection.$from.parent.type,_=!r&&!m({parentNodeType:y,grandParentNodeType:S,content:e}),C=e.type===d.rule&&c(o),I=e.type!==d.rule&&l(o);if(C||_&&I||_&&!l(o))return(0,n.safeInsert)(e,o.selection.from)(o);let{from:O,to:k}=o.selection;if(e.type===d.rule&&l(o)&&T.pos!==E)return o.replaceRange(O,k,new(0,i("5SAOw").Slice)(i("5SAOw").Fragment.from(d.rule.createChecked()),0,0));if(!r)return null;if((0,i("kTbzR").isEmptyParagraph)(T.parent)&&(0,n.canInsert)(o.doc.resolve(T[r]()),e))return h(o.replaceWith(T.before(),T.after(),e),-1);let v=T;for(;v.depth>0;){let t=o.doc.resolve(v[r]()),a=t.node();if((0,n.canInsert)(v,e))break;if(u(a.type,o.doc.type.schema.nodes)){let n=h(p(o,r,t,v,e),e.nodeSize);if([d.orderedList,d.bulletList].includes(a.type)&&n)return n.setSelection(i("ks2lK").TextSelection.between(n.selection.$from,n.selection.$from));return n}v=t}return h(o.insert(v.pos,e),e.nodeSize)},h=(e,t)=>{let o=e.steps[e.steps.length-1];if(!(o instanceof i("aXG5V").ReplaceStep||o instanceof i("aXG5V").ReplaceAroundStep))return null;let n=o.to+o.slice.openStart+t;return e.setSelection(new(0,i("adhil").GapCursorSelection)(e.doc.resolve(n),i("adhil").Side.RIGHT)).scrollIntoView()},m=({parentNodeType:e,grandParentNodeType:t,content:o})=>!!("doc"===e.name||"paragraph"===e.name&&t.validContent(i("5SAOw").Fragment.from(o)));e.exports.normaliseNestedLayout=r,e.exports.safeInsert=f,e.exports.shouldSplitSelectedNodeOnNodeInsertion=m,e.exports.insertSelectedItem=(e,t={})=>(o,a,s)=>{let l;if(!e)return a;let c=e instanceof i("5SAOw").Fragment;try{l=e instanceof i("5SAOw").Node||c?e:"string"==typeof e?o.schema.text(e):i("5SAOw").Node.fromJSON(o.schema,e)}catch(e){return console.error(e),a}if(l instanceof i("5SAOw").Node&&l.isText)a=a.replaceWith(s,s,l);else if(l instanceof i("5SAOw").Node&&l.isBlock){let e=d(a);a="rule"!==l.type.name||e||(0,i("kTbzR").isEmptyParagraph)(a.selection.$from.parent)?(0,n.safeInsert)(r(o,l),void 0,!0)(a):f(l,a.selection.from)(a)??a}else if(l instanceof i("5SAOw").Node&&l.isInline||c){let e=c?l:i("5SAOw").Fragment.fromArray([l,o.schema.text(" ")]);a=a.replaceWith(s,s,e),a=t.selectInlineNode?a.setSelection(i("ks2lK").NodeSelection.create(a.doc,s)):a.setSelection(i("ks2lK").Selection.near(a.doc.resolve(s+e.size)))}return a},e.exports.contentAllowedInCodeBlock=function(e){let{$from:t,$to:o}=e.selection,n=!0;return e.doc.nodesBetween(t.pos,o.pos,(r,i)=>{if(t.pos<=i&&i+r.nodeSize<=o.pos)return!!n&&(n=r.type===e.schema.nodes.listItem||r.type===e.schema.nodes.bulletList||r.type===e.schema.nodes.orderedList||r.type===e.schema.nodes.paragraph||r.isInline||r.type===e.schema.nodes.panel||r.isText)}),n},e.exports.fragmentContainsNodeType=function(e,t){let o=!1;return e.descendants(e=>e.type!==t||(o=!0,!1)),o}}),a("l9G9n",function(t,o){e(t.exports,"isEmptyParagraph",()=>i("kTbzR").isEmptyParagraph),e(t.exports,"hasDocAsParent",()=>i("2pjJ5").hasDocAsParent);var n=i("8m4tT");function r(e){if(e&&e.textContent)return!1;if(!e||!e.childCount||1===e.childCount&&(0,i("kTbzR").isEmptyParagraph)(e.firstChild))return!0;let t=[],o=[];return e.forEach(e=>{e.isInline?o.push(e):t.push(e)}),!o.length&&!t.filter(e=>!!e.childCount&&!(1===e.childCount&&(0,i("kTbzR").isEmptyParagraph)(e.firstChild))||e.isAtom).length}t.exports.pmHistoryPluginKey="history$",t.exports.shallowEqual=function(e={},t={}){let o=Object.keys(e),n=Object.keys(t);return o.length===n.length&&o.reduce((o,n)=>o&&e[n]===t[n],!0)},t.exports.isSelectionInsideLastNodeInDocument=function(e){let t=e.$anchor.node(0),o=e.$anchor.node(1);return t.lastChild===o},t.exports.isInListItem=e=>(0,n.hasParentNodeOfType)(e.schema.nodes.listItem)(e.selection),t.exports.findFarthestParentNode=e=>t=>{let o=null;for(let n=t.depth;n>0;n--){let r=t.node(n);e(r)&&(o={pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r})}return o},t.exports.insideTableCell=e=>{let{tableCell:t,tableHeader:o}=e.schema.nodes;return(0,n.hasParentNodeOfType)([t,o])(e.selection)},t.exports.checkNodeDown=function(e,t,o){let n=function(e,t){let o=["blockquote","bulletList","orderedList"];if(1===t.depth)return t;let n=t.node(t.depth),r=t;for(;t.depth>=1;)(n=(t=e.resolve(t.before(t.depth))).node(t.depth))&&-1!==o.indexOf(n.type.name)&&(r=t);return r}(t,e.$to).depth;if(0===n)return!1;let r=t.resolve(e.$to.after(n));return!!r.nodeAfter&&o(r.nodeAfter)},t.exports.isEmptyNode=e=>{let{doc:t,paragraph:o,expand:n,codeBlock:i,blockquote:a,panel:s,heading:l,listItem:d,bulletList:c,orderedList:p,taskList:u,taskItem:f,decisionList:h,decisionItem:m,media:g,mediaGroup:T,mediaSingle:E}=e.nodes,b=e=>{switch(e.type){case g:case T:case E:return!1;case o:case i:case l:case f:case m:return 0===e.content.size;case n:case a:case s:case d:return 2===e.content.size&&b(e.content.firstChild);case c:case p:return 4===e.content.size&&b(e.content.firstChild);case u:case h:return 2===e.content.size&&b(e.content.firstChild);case t:let S=!0;return e.content.forEach(e=>{S=S&&b(e)}),S;default:return r(e)}};return b},t.exports.isNodeEmpty=r,t.exports.isInEmptyLine=function(e){let{selection:t}=e,{$cursor:o,$anchor:n}=t;if(!o)return!1;let r=o.node();return!!r&&(0,i("kTbzR").isEmptyParagraph)(r)&&(0,i("2pjJ5").hasDocAsParent)(n)}}),a("lkJUe",function(e,t){function o(e){return"function"==typeof e}e.exports.pluginFactory=function(e,t,n={}){let{mapping:r,onDocChanged:i,onSelectionChanged:a}=n;return{createPluginState:(n,s)=>({init:(e,t)=>o(s)?s(t):s,apply:(o,s,l,d)=>{let c=r?r(o,s,d):s,p=c,u=o.getMeta(e);return u&&(p=t(c,u)),i&&o.docChanged?p=i(o,p,d):a&&o.selectionSet&&(p=a(o,p,d)),p!==c&&n(e,p),p}}),createCommand:(t,n)=>(r,i)=>{if(i){let a=n?n(r.tr,r):r.tr,s=o(t)?t(r):t;if(!a||!s)return!1;i(a.setMeta(e,s))}return!0},getPluginState:t=>e.getState(t)}}}),a("5mxQU",function(e,t){e.exports.isTextInput=e=>{let[t]=e.steps;if(!t||!(t instanceof i("aXG5V").ReplaceStep))return!1;let{slice:{content:o},from:n,to:r}=t,a=o.firstChild;return n===r&&1===o.childCount&&!!a&&!!a.text&&1===a.text.length}}),a("1HVk8",function(e,t){let o=(e,t)=>t.filter(t=>e.includes(t.name)).map(e=>({name:e.name,state:{detected:!1},fns:{async:e.fns.async,sync:e.fns.sync}})),n={GRAMMARLY:"grammarly-extension, grammarly-popups, [data-grammarly-shadow-root]"},r=[{name:"grammarly",fns:{sync:()=>!!document?.querySelector(n.GRAMMARLY),async:(e,t)=>{document?.querySelector(n.GRAMMARLY)&&e();let o=[],r=()=>{for(let t of o)for(let o of t)o?.type==="childList"&&o?.addedNodes?.length&&Array.from(o.addedNodes).some(e=>e.parentElement?.querySelector(n.GRAMMARLY))&&e();o=[]},i=setInterval(()=>{"function"==typeof window.requestIdleCallback?window.requestIdleCallback(r):window.requestAnimationFrame(r)},1e3),a=new MutationObserver(e=>{o.push(e)});t(()=>{o=[],clearInterval(i),a?.disconnect()}),a.observe(document.documentElement,{childList:!0,subtree:!0})}}}];e.exports.sniffUserBrowserExtensions=function(e){try{let t=o(e.extensions,r);if(!0!==e.async)return t.filter(e=>e.fns.sync?.()).map(e=>e.name);{let o=[],n=Promise.all(t.map(e=>new Promise(t=>{"function"==typeof e.fns.async?e.fns.async(()=>{e.state.detected=!0,t()},e=>{o.push(e)}):(e.state.detected=!1,t())}))),r=new Promise(t=>setTimeout(t,e.asyncTimeoutMs,"race_complete"));return Promise.race([n,r]).then(()=>t.filter(e=>e.state.detected).map(e=>e.name)).catch(()=>[]).finally(()=>o.map(e=>e()))}}catch(t){return e.async?Promise.resolve([]):[]}}}),a("56SXY",function(e,t){e.exports.autoJoinTr=function(e,t){if(Array.isArray(t)){let e=t;t=t=>e.indexOf(t.type.name)>-1}let o=[];for(let t=0;t<e.mapping.maps.length;t++){let n=e.mapping.maps[t];for(let e=0;e<o.length;e++)o[e]=n.map(o[e]);n.forEach((e,t,n,r)=>o.push(n,r))}let n=[];for(let r=0;r<o.length;r+=2){let i=o[r],a=o[r+1],s=e.doc.resolve(i),l=s.sharedDepth(a),d=s.node(l);for(let e=s.indexAfter(l),o=s.after(l+1);o<=a;++e){let r=d.maybeChild(e);if(!r)break;if(e&&-1===n.indexOf(o)){let i=d.child(e-1);i.type===r.type&&t(i,r)&&n.push(o)}o+=r.nodeSize}}n.sort((e,t)=>e-t);for(let t=n.length-1;t>=0;t--)(0,i("aXG5V").canJoin)(e.doc,n[t])&&e.join(n[t])}}),a("5GR8v",function(e,t){let o=e=>{let t={},{doc:o,schema:n}=e,r=new Map,i=new Map;for(let[e,a]of(o.descendants((e,o)=>{let a,s;if(e.marks.some(e=>(e.type===n.marks.dataConsumer?a=e:e.type===n.marks.fragment&&(s=e),!!a&&!!s)),!s&&!e.attrs?.localId)return!0;let l=s?.attrs?.localId??e.attrs?.localId;return!l||(s?.attrs?.localId&&r.set(s.attrs.localId,l),e.attrs?.localId&&r.set(e.attrs.localId,l),!!t[l]||(t[l]={localId:l,name:s?.attrs?.name,node:e,pos:o,targets:[]},a&&a.attrs.sources.length&&i.set(l,a.attrs.sources),!a))}),i))a.forEach(o=>{let n=r.get(o)??o,i=t[n];i&&n!==e&&i.targets.push(e)});return t},n=(e,t)=>{if(!e.size)return[];let o=[...e],n=new Set;for(;o.length;){let e=o.pop();t[e]&&(n.add(t[e].localId),o=o.concat(t[e]?.targets.filter(e=>!n.has(t[e]?.localId))??[]))}return Array.from(n)},r=(e,t)=>{let o=new Set([e]),n=new Map,r=new Set;for(n.set(e,!1);o.size>0;){let[a]=o;i(a,t).forEach(t=>{n.get(t)||(o.add(t),r.add(t)),t!==e&&r.add(t)}),n.set(a,!0),o.delete(a)}return r.size},i=(e,t)=>e&&t[e]?t[e].targets:[],a=(e,t)=>{if("object"==typeof e){let o;return e.forEach(e=>{o=o??t[e]?.name}),o||null}return e&&t[e]?t[e].name:null},s=(e,t)=>new Set(t?[t.attrs?.localId,t.marks?.find(t=>t.type===e.schema.marks.fragment)?.attrs?.localId].filter(Boolean):[]);e.exports.isReferencedSource=(e,t)=>{if(!t)return!1;let o=!1,n=new Set([t.attrs?.localId,t.marks?.find(t=>t.type===e.schema.marks.fragment)?.attrs?.localId].filter(Boolean));return!!n.size&&(e.doc.descendants(t=>{if(o)return!1;let r=t.marks.find(t=>t.type===e.schema.marks.dataConsumer);return!r||!(o=r.attrs.sources?.some(e=>n.has(e))??!1)}),o)},e.exports.removeConnectedNodes=(e,t)=>{if(!t)return e.tr;let r=s(e,t),i=o(e),a=n(r,i);if(!a?.length)return e.tr;let{tr:l}=e,d=l;return a.forEach(e=>{if(!i[e])return;let{node:t,pos:o}=i[e];d=d.delete(d.mapping.map(o),d.mapping.map(t.nodeSize+o))}),d},e.exports.getChildrenInfo=(e,t)=>{let n=!0;if(!t)return[];let i=new Set,l=[],d=o(e);for(let o of(s(e,t).forEach(e=>{d[e]&&d[e].targets.forEach(i.add,i)}),i))if(a(o,d))l.push({id:o,name:a(o,d),amount:r(o,d)});else{n=!1;break}return n?l:[]},e.exports.getNodeName=(e,t)=>t?.marks?.find(t=>t.type===e.schema.marks.fragment)?.attrs?.name??""}),a("eYlm5",function(e,t){e.exports.gridTypeForLayout=e=>"wrap-left"===e||"wrap-right"===e?"wrapped":"full"}),a("2bi6l",function(e,t){e.exports.findNodePosByLocalIds=(e,t,o={})=>{if(0===t.length)return[];let n=[],r=new Set(t);return o.includeDocNode&&r.has(e.doc.attrs?.localId)&&n.push({node:e.doc,pos:0}),e.doc.descendants((e,t)=>(r.has(e.attrs?.localId)&&n.push({node:e,pos:t}),r.size!==n.length)),n}}),a("kgnzE",function(e,t){var o=i("8m4tT"),n=i("1oCLl");e.exports.getSelectedNodeOrNodeParentByNodeType=function({nodeType:e,selection:t}){let n=(0,o.findSelectedNodeOfType)(e)(t);return n||(n=(0,o.findParentNodeOfType)(e)(t)),n},e.exports.toDOM=(e,t)=>i("5SAOw").DOMSerializer.fromSchema(t).serializeNode(e),e.exports.copyDomNode=(e,t,o)=>{if(e){let r=document.createElement("div");r.appendChild(e);let a=o.$from.doc.type.schema,s=(0,n.expValEquals)("platform_editor_hydratable_ui","isEnabled",!0)?(0,i("d7ZU3").getBrowserInfo)():i("d7ZU3").browser;t.inlineContent?r.firstChild.setAttribute("data-pm-slice","1 1 []"):r.firstChild.setAttribute("data-pm-slice","0 0 []"),s.safari&&o instanceof i("ks2lK").NodeSelection&&(o.node.type===a.nodes.extension||o.node.type===a.nodes.mediaSingle)?(0,i("cMZNY").copyHTMLToClipboardPolyfill)(r):(0,i("cMZNY").copyHTMLToClipboard)(r)}}}),a("aU3dp",function(e,t){var o,n,r=((o={}).INDENT="indent",o.OUTDENT="outdent",o),i=((n={}).PARAGRAPH="paragraph",n.LIST="list",n.HEADING="heading",n.CODE_BLOCK="codeBlock",n.TASK_LIST="taskList",n);e.exports.INDENT_DIRECTION=r,e.exports.INDENT_TYPE=i}),a("iHzeA",function(e,t){var o=i("dZ8uq");e.exports.areToolbarFlagsEnabled=e=>!!((0,o.expValEqualsNoExposure)("platform_editor_controls","cohort","variant1")||e)}),a("jiT42",function(t,o){e(t.exports,"compositionPlugin",()=>i("gyXPd").compositionPlugin)}),a("gyXPd",function(e,t){let o=new(0,i("ks2lK").PluginKey)("compositionPlugin"),n=()=>navigator.userAgent.indexOf("Linux")>=0;var r=()=>new(0,i("1S4f7").SafePlugin)({key:o,state:{init:()=>({isComposing:!1,zeroWidthSpacePos:void 0}),apply:(e,t)=>{let n=e.getMeta(o),r=e.getMeta("zeroWidthSpacePos");return void 0===n?t:{isComposing:n,zeroWidthSpacePos:r}}},props:{handleDOMEvents:{compositionstart:(e,t)=>{let{tr:r}=e.state;return r.setMeta(o,!0),n()&&0===e.state.selection.$from.parentOffset&&(r.insertText(i("TfRUG").ZERO_WIDTH_SPACE),r.setMeta("zeroWidthSpacePos",e.state.selection.$from.pos)),e.dispatch(r),!1},compositionend:(e,t)=>{let{tr:r}=e.state;if(r.setMeta(o,!1),n()){let t=o.getState(e.state)?.zeroWidthSpacePos;void 0!==t&&r.deleteRange(t,t+1),r.setMeta("zeroWidthSpacePos",void 0)}return e.dispatch(r),!1}}}});e.exports.compositionPlugin=()=>({name:"composition",getSharedState:e=>e?{isComposing:!!o.getState(e)?.isComposing}:{isComposing:!1},pmPlugins:()=>[{name:"composition",plugin:()=>r()}]})}),a("7aKg5",function(t,o){e(t.exports,"copyButtonPlugin",()=>i("kIhx9").copyButtonPlugin)}),a("kIhx9",function(e,o){let n=new(0,i("ks2lK").PluginKey)("copyButtonPlugin");function r({$pos:e,markType:t}){if(!e.doc.rangeHasMark(e.pos,Math.min(e.pos+1,e.doc.nodeSize),t))return!1;if(1===e.parent.childCount){let t=e.pos,o=e.doc.nodeAt(t);if(!o||!o.isText)return!1;let n=e.pos-e.parentOffset,r=n+o.nodeSize;return{start:n,end:r}}if(e.parent.childCount>1){let t=e.pos-e.textOffset,o=e.doc.nodeAt(t);if(!o||!o.isText)return!1;let n=t+o.nodeSize;return{start:t,end:n}}return!1}function a({markType:e,transaction:t}){let o=r({$pos:t.selection.$anchor,markType:e});if(o)return{...o,markType:e};let n=r({$pos:t.selection.$head,markType:e});if(n)return{...n,markType:e}}var s=i("1oCLl"),l=i("dZ8uq");function d(e){return function(t,o){let r=t.tr;return r.setMeta(n,{showSelection:!0,markType:e}),o&&o(r),!0}}function c(e,t){let o=e.tr;o.setMeta(n,{removeSelection:!0});let r=n.getState(e);return r?.copied&&o.setMeta(n,{copied:!1}),t&&t(o),!0}let p=(e,t,o,r)=>(a,d)=>{let{tr:c,schema:p}=a,u=(0,i("kgnzE").getSelectedNodeOrNodeParentByNodeType)({nodeType:e,selection:c.selection});if(!u)return!1;c.setMeta(n,{copied:!0});let f=(0,i("cMZNY").getAnalyticsPayload)(a,i("d925B").ACTION.COPIED);if(f&&t&&(f.attributes.inputMethod=i("d925B").INPUT_METHOD.FLOATING_TB,f.attributes.nodeType=u.node.type.name,t?.attachAnalyticsEvent?.(f)(c)),d){let e=(0,i("kgnzE").toDOM)(u.node,p);if((0,l.expValEqualsNoExposure)("platform_editor_block_menu","isEnabled",!0))(0,i("kgnzE").copyDomNode)(e,u.node.type,c.selection);else if(e){let t=document.createElement("div"),o=(0,s.expValEquals)("platform_editor_hydratable_ui","isEnabled",!0)?(0,i("d7ZU3").getBrowserInfo)():i("d7ZU3").browser;t.appendChild(e),u.node.type.inlineContent?t.firstChild.setAttribute("data-pm-slice","1 1 []"):t.firstChild.setAttribute("data-pm-slice","0 0 []"),o.safari&&a.selection instanceof i("ks2lK").NodeSelection&&(a.selection.node.type===a.schema.nodes.extension||a.selection.node.type===a.schema.nodes.mediaSingle)?(0,i("cMZNY").copyHTMLToClipboardPolyfill)(t):(0,i("cMZNY").copyHTMLToClipboard)(t)}c.setMeta("scrollIntoView",!1),d(c)}return r&&o?.accessibilityUtils?.actions.ariaNotify(r,{priority:"important"}),!0},u=(e,t,o)=>(r,i)=>{let a=r.tr,s=e=>{a=e};o?o(r,s):t?.(e,!1)(r,s);let l=n.getState(r);return l?.copied&&a.setMeta(n,{copied:!1}),i&&i(a),!0},f=(e,o)=>r=>(r,a)=>r.flatMap(r=>"copy-button"!==r.type?[r]:r?.hidden?[]:r?.items.map(r=>r?.type==="separator"?r:function(e,o,r,a){var s;let l,{state:f,formatMessage:h,onMouseEnter:m,onMouseLeave:g,onFocus:T,onBlur:E}=e,b=n.getState(f);return l="nodeType"in e&&void 0!==e.nodeType?{onClick:p(e.nodeType,r,a,h(i("61p3e").default.copiedToClipboard)),onMouseEnter:m||o?.(e.nodeType,!0,"ak-editor-selected-node"),onFocus:T||o?.(e.nodeType,!0,"ak-editor-selected-node"),onMouseLeave:u(e.nodeType,o,g),onBlur:u(e.nodeType,o,E)}:{onClick:(s=e.markType,function(e,t){let o=e.tr.selection.$head.parent.maybeChild(e.tr.selection.$head.index());if(!o)return!1;if(t){let a=(0,i("kgnzE").toDOM)(o,e.schema);if(a){let e=document.createElement("div"),t=document.createElement("p");e.appendChild(t),t.appendChild(a),e.firstChild.setAttribute("data-pm-slice","1 1 []");let o=a.getAttribute("href");(0,i("cMZNY").copyHTMLToClipboard)(e,"link"===s.name&&o?o:void 0)}let l=e.tr;l.setMeta(n,{copied:!0});let d=(0,i("cMZNY").getAnalyticsPayload)(e,i("d925B").ACTION.COPIED);d&&r&&(d.attributes.inputMethod=i("d925B").INPUT_METHOD.FLOATING_TB,d.attributes.markType=s.name,r?.attachAnalyticsEvent?.(d)(l)),t(l)}return!0}),onMouseEnter:d(e.markType),onFocus:d(e.markType),onMouseLeave:c,onBlur:c},{id:"editor.floatingToolbar.copy",type:"button",appearance:"subtle",icon:t(i("gt9HV")),title:h(b?.copied?i("61p3e").default.copiedToClipboard:i("61p3e").default.copyToClipboard),...l,hideTooltipOnClick:!1,tabIndex:null}}(r,a,e,o)));e.exports.copyButtonPlugin=({api:e})=>({name:"copyButton",pmPlugins:()=>[{name:"copyButton",plugin:()=>new(0,i("1S4f7").SafePlugin)({key:n,state:{init:()=>({copied:!1,markSelection:void 0}),apply(e,t){let o=e.getMeta(n);return o?.copied!==void 0?{copied:o.copied,markSelection:void 0}:o?.showSelection?{copied:t.copied,markSelection:a({markType:o.markType,transaction:e})}:o?.removeSelection?{copied:t.copied,markSelection:void 0}:t.markSelection?{copied:t.copied,markSelection:a({markType:t.markSelection.markType,transaction:e})}:t}},props:{decorations:e=>i("ftzrq").DecorationSet.empty}})}],actions:{processCopyButtonItems:f(e?.analytics?.actions,e)}})}),a("8exqI",function(t,o){e(t.exports,"decorationsPlugin",()=>i("4KTOl").decorationsPlugin)}),a("4KTOl",function(e,t){var o,n=i("dZ8uq"),r=i("8m4tT");let a=new(0,i("ks2lK").PluginKey)("decorationPlugin");var s=((o={})[o.DECORATION_ADD=0]="DECORATION_ADD",o[o.DECORATION_REMOVE=1]="DECORATION_REMOVE",o);let l=(e,t)=>{let{tr:o}=e,{decoration:n}=a.getState(e);return!!n&&!!t&&(t(o.setMeta(a,{action:1})),!0)},d=(e,t,o="danger")=>(n,s)=>{let l,d;if(n.selection instanceof i("ks2lK").NodeSelection){let t=n.selection.node;(Array.isArray(e)?e:[e]).indexOf(t.type)>-1&&(l=n.selection.from,d=t)}let c=(0,r.findParentNodeOfType)(e)(n.selection);return void 0===l&&c&&(l=c.pos,d=c.node),void 0!==l&&void 0!==d&&(s&&s(n.tr.setMeta(a,{action:+!t,data:i("ftzrq").Decoration.node(l,l+d.nodeSize,{class:o},{key:"decorationNode"})}).setMeta("addToHistory",!1)),!0)};var c=()=>new(0,i("1S4f7").SafePlugin)({key:a,state:{init:()=>({decoration:void 0}),apply(e,t){t.decoration&&t.decoration instanceof i("ftzrq").Decoration&&e.mapping.mapResult(t.decoration.from).deleted&&(t={decoration:void 0}),t.decoration&&t.decoration instanceof i("ftzrq").DecorationSet&&(0,n.expValEqualsNoExposure)("platform_editor_block_menu","isEnabled",!0)&&(t.decoration=t.decoration.map(e.mapping,e.doc));let o=e.getMeta(a);if(!o)return t;switch(o.action){case 0:return{decoration:o.data,hasDangerDecorations:(0,n.expValEqualsNoExposure)("platform_editor_block_menu","isEnabled",!0)?o.hasDangerDecorations:void 0};case 1:return{decoration:void 0,hasDangerDecorations:void 0};default:return t}}},props:{decorations(e){let{doc:t}=e,{decoration:o}=a.getState(e);return o instanceof i("ftzrq").Decoration?i("ftzrq").DecorationSet.create(t,[o]):o instanceof i("ftzrq").DecorationSet&&(0,n.expValEqualsNoExposure)("platform_editor_block_menu","isEnabled",!0)?o:null}}});let p=({nodeType:e,add:t,className:o="danger"})=>({tr:l})=>{let d,c,p;if(l.selection instanceof i("ks2lK").NodeSelection){let t=l.selection.node;(Array.isArray(e)?e:[e]).indexOf(t.type)>-1&&(d=l.selection.from,c=t)}let u=(0,r.findParentNodeOfType)(e)(l.selection);if(u&&(void 0===d||"mediaGroup"===u.node.type.name)&&(d=u.pos,c=u.node),void 0===d||void 0===c)return l;if(p=i("ftzrq").Decoration.node(d,d+c.nodeSize,{class:o},{key:"decorationNode"}),l.selection instanceof i("ks2lK").TextSelection&&(p=i("ftzrq").Decoration.inline(d,l.selection.to,{class:o,style:"background-color: var(--ds-background-danger, #FFECEB);"},{key:"decorationNode"})),l.selection instanceof i("7XFGZ").CellSelection){let e=(0,i("id9O1").findTable)(l.selection);if(!e)return l;let t=i("LmqWp").TableMap.get(e.node),n=(0,i("iP1et").getSelectionRect)(l.selection);if(!t||!n)return l;let r=i("ftzrq").Decoration.node(e.pos,e.pos+e.node.nodeSize,{class:o},{key:"decorationNode"}),a=t.cellsInRect(n).map(t=>t+e.start).map(e=>{let t=l.doc.nodeAt(e);if(t)return i("ftzrq").Decoration.node(e,e+t.nodeSize,{class:o},{key:"decorationNode"})}).filter(e=>!!e);p=i("ftzrq").DecorationSet.create(l.doc,[r,...a])}return l.setMeta(a,{action:t?s.DECORATION_ADD:s.DECORATION_REMOVE,data:p,hasDangerDecorations:(0,n.expValEqualsNoExposure)("platform_editor_block_menu","isEnabled",!0)?"danger"===o:void 0}).setMeta("addToHistory",!1),l},u=()=>({tr:e})=>e.setMeta(a,{action:s.DECORATION_REMOVE});e.exports.decorationsPlugin=()=>({name:"decorations",pmPlugins:()=>[{name:"decorationPlugin",plugin:()=>c()}],actions:{hoverDecoration:d,removeDecoration:l},getSharedState:e=>e?a.getState(e):{decoration:void 0},commands:{hoverDecoration:(0,n.expValEqualsNoExposure)("platform_editor_block_menu","isEnabled",!0)?({nodeType:e,add:t,className:o})=>p({nodeType:e,add:t,className:o}):void 0,removeDecoration:(0,n.expValEqualsNoExposure)("platform_editor_block_menu","isEnabled",!0)?()=>u():void 0}})}),a("iP1et",function(e,t){e.exports.getSelectionRect=e=>{if(!(0,i("BW42l").isSelectionType)(e,"cell"))return;let t=e.$anchorCell.start(-1);return i("LmqWp").TableMap.get(e.$anchorCell.node(-1)).rectBetween(e.$anchorCell.pos-t,e.$headCell.pos-t)}}),a("12MPQ",function(t,o){e(t.exports,"editorDisabledPlugin",()=>i("lgjGE").editorDisabledPlugin)}),a("lgjGE",function(e,t){var o,n=((o={}).TOGGLE_DISABLED="TOGGLE_DISABLED",o);function r(e,t){return t&&"action"in t&&"TOGGLE_DISABLED"===t.action?t.disabled===e.disabledByPlugin?e:{...e,disabledByPlugin:!!t.disabled}:e}let a=new(0,i("ks2lK").PluginKey)("editorDisabledPlugin"),{getPluginState:s}=(0,i("lkJUe").pluginFactory)(a,r);e.exports.editorDisabledPlugin=({config:e={},api:t})=>({name:"editorDisabled",getSharedState(e){if(!e)return{editorDisabled:!1};let t=a.getState(e);return t?(0,i("dh538").fg)("platform_editor_ai_generic_prep_for_aifc_2")?{editorDisabled:t.disabledByPlugin||t.editorDisabled}:t:{editorDisabled:!1}},pmPlugins:()=>[{name:"editorDisabled",plugin:({dispatch:t})=>(function(e,t){let o=(0,i("2P8Ax").default)(e=>{if(!e.editable!==s(e.state).editorDisabled){let t={editorDisabled:!e.editable,disabledByPlugin:s(e.state).disabledByPlugin},o=e.state.tr.setMeta(a,t).setMeta("editorDisabledPlugin",t);o.setMeta("isLocal",!0),e.dispatch(o)}});return new(0,i("1S4f7").SafePlugin)({key:a,state:{init:()=>({editorDisabled:t?.initialDisabledState??!1,disabledByPlugin:!1}),apply:(e,t)=>{let o=e.getMeta(a);return o?(0,i("dh538").fg)("platform_editor_ai_generic_prep_for_aifc_2")&&"action"in o?r(t,o):t.editorDisabled!==o.editorDisabled?{...t,...o}:t:t}},props:{editable:(0,i("dh538").fg)("platform_editor_ai_generic_prep_for_aifc_2")?e=>{let{disabledByPlugin:t}=a.getState(e)??{disabledByPlugin:!1};return!t&&void 0}:void 0},view:e=>(o(e),{update(e){o(e)},destroy(){o.cancel()}})})})(0,e)}],commands:{toggleDisabled:e=>({tr:t})=>(0,i("dh538").fg)("platform_editor_ai_generic_prep_for_aifc_2")?t.setMeta(a,{action:n.TOGGLE_DISABLED,disabled:e}):null}})}),a("1AOco",function(t,o){e(t.exports,"floatingToolbarPlugin",()=>i("7sK9h").floatingToolbarPlugin),i("7sK9h")}),a("7sK9h",function(e,o){var n=i("l998X");i("42omo");var r=i("5nZsM"),a=i("8m4tT"),s=i("1oCLl"),l=i("dZ8uq"),d=i("iu6m9");let c=(e,t,o)=>({tr:n})=>{let r=(0,i("kgnzE").getSelectedNodeOrNodeParentByNodeType)({nodeType:e,selection:n.selection});if(!r)return n;let a=n.doc.type.schema,d=(0,i("kgnzE").toDOM)(r.node,a);if((0,l.expValEqualsNoExposure)("platform_editor_block_menu","isEnabled",!0))(0,i("kgnzE").copyDomNode)(d,r.node.type,n.selection);else if(d){let e=document.createElement("div"),t=(0,s.expValEquals)("platform_editor_hydratable_ui","isEnabled",!0)?(0,i("d7ZU3").getBrowserInfo)():i("d7ZU3").browser;e.appendChild(d),r.node.type.inlineContent?e.firstChild.setAttribute("data-pm-slice","1 1 []"):e.firstChild.setAttribute("data-pm-slice","0 0 []"),t.safari&&n.selection instanceof i("ks2lK").NodeSelection&&(n.selection.node.type===a.nodes.extension||n.selection.node.type===a.nodes.mediaSingle)?(0,i("cMZNY").copyHTMLToClipboardPolyfill)(e):(0,i("cMZNY").copyHTMLToClipboard)(e)}if(t){let e=(0,i("cMZNY").getNodeCopiedAnalyticsPayload)(r.node,o);t.attachAnalyticsEvent(e)(n)}return n.setMeta("scrollIntoView",!1),n},p=new(0,i("ks2lK").PluginKey)("forceFocusStatePlugin");var u=()=>new(0,i("1S4f7").SafePlugin)({key:p,state:{init:()=>({selector:null}),apply:(e,t)=>{let o=e.getMeta(p);return o&&"selector"in o?{selector:o.selector}:t}}});let f=e=>t=>t.setMeta(p,{selector:e}),h=new(0,i("ks2lK").PluginKey)("floatingToolbarData"),{createPluginState:m,createCommand:g,getPluginState:T}=(0,i("lkJUe").pluginFactory)(h,(e,t)=>{switch(t.type){case"SHOW_CONFIRM_DIALOG":return{...e,confirmDialogForItem:t.data.buttonIndex,confirmDialogForItemOption:t.data.optionIndex};case"HIDE_CONFIRM_DIALOG":return{...e,confirmDialogForItem:void 0};default:return e}}),E=(e,t)=>g({type:"SHOW_CONFIRM_DIALOG",data:{buttonIndex:e,optionIndex:t}},e=>e.setMeta("addToHistory",!1)),b=()=>g({type:"HIDE_CONFIRM_DIALOG"},e=>e.setMeta("addToHistory",!1)),S=e=>new(0,i("1S4f7").SafePlugin)({state:m(e,{}),key:h});i("42omo");var y=i("42omo");let _=e=>{let[t,o]=(0,y.useState)(!1),{onConfirm:r,onClose:a,options:s,intl:{formatMessage:l},testId:d}=e,c=s?.title||l(i("k4fPq").default.confirmModalDefaultHeading),p=s?.okButtonLabel||l(i("k4fPq").default.confirmModalOK),u=s?.cancelButtonLabel||l(i("k4fPq").default.confirmModalCancel),f=s?.checkboxLabel,h=s?.getChildrenInfo?.(),m=e=>{let{id:t,name:o,amount:r}=e;return(0,n.jsx)("li",{id:t,children:l(i("k4fPq").default.confirmModalListUnit,{name:o,amount:r})})};return(0,n.jsxs)(i("8CZUH").default,{onClose:a,testId:d,children:[(0,n.jsx)(i("9ot3w").default,{hasCloseButton:!0,children:(0,n.jsx)(i("d8eRd").default,{appearance:"warning",children:c})}),(0,n.jsxs)(i("1DHa6").default,{children:[(0,n.jsx)(i("iXCQx").default,{as:"p",children:s?.message}),!!h?.length&&(0,n.jsx)(({nodes:e})=>0===e.length?null:(0,n.jsx)("ul",{children:e.map(e=>(0,y.createElement)(m,{...e,key:e.id}))}),{nodes:h}),(0,n.jsx)(i("iXCQx").default,{as:"p",children:(0,n.jsx)(i("7gpC4").default,{isChecked:t,onChange:()=>o(!t),label:f,testId:d?`${d}-checkbox`:void 0})})]}),(0,n.jsxs)(i("8o1lj").default,{children:[(0,n.jsx)(i("ccHMk").default,{appearance:"default",onClick:a,testId:d?`${d}-cancel-button`:void 0,children:u}),(0,n.jsx)(i("ccHMk").default,{appearance:"warning",onClick:()=>{r(t),a()},testId:d?`${d}-confirm-button`:void 0,children:p})]})]})};i("42omo");let C=e=>{let{onConfirm:t,onClose:o,options:r,intl:{formatMessage:a},testId:s}=e,l=r?.title||a(i("k4fPq").default.confirmModalDefaultHeading),d=r?.okButtonLabel||a(i("k4fPq").default.confirmModalOK),c=r?.cancelButtonLabel||a(i("k4fPq").default.confirmModalCancel);return(0,n.jsxs)(i("8CZUH").default,{onClose:o,testId:s,children:[(0,n.jsx)(i("9ot3w").default,{hasCloseButton:!0,children:(0,n.jsx)(i("d8eRd").default,{appearance:"warning",children:l})}),(0,n.jsx)(i("1DHa6").default,{children:(0,n.jsx)(i("iXCQx").default,{as:"p",children:r?.message})}),(0,n.jsxs)(i("8o1lj").default,{children:[(0,n.jsx)(i("ccHMk").default,{appearance:"default",onClick:o,testId:s?`${s}-cancel-button`:void 0,children:c}),(0,n.jsx)(i("ccHMk").default,{appearance:"warning",onClick:()=>{t(),o()},testId:s?`${s}-confirm-button`:void 0,children:d})]})]})},I=(0,i("gmMgo").default)(e=>{let{options:t}=e;return t?(0,n.jsx)(i("6xdDU").default,{children:((t=!1)=>t?(0,n.jsx)(_,{...e}):(0,n.jsx)(C,{...e}))(t?.isReferentialityDialog)}):null});i("aaI8u");var O=i("1QXSD");let k=(e,t)=>{if(e===t)return!0;if(null==e||null==t)return!1;let o=Object.keys(e),n=Object.keys(t);if(o.length!==n.length)return!1;let r=Object.prototype.hasOwnProperty.bind(t);for(let n=0;n<o.length;n++){let i=o[n];if(!r(i)||e[i]!==t[i])return!1}return!0},v=(e,t,o=k)=>{if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!o(e[n],t[n]))return!1;return!0},x=(e,t,o=[])=>Object.keys(e).filter(e=>-1===o.indexOf(e)).every(o=>e[o]instanceof Object?k(e[o],t[o]):e[o]===t[o]),N=(e,t)=>{if(e.type!==t.type)return!1;switch(e.type){case"button":return x(e,t,["type","onClick","onMouseEnter","onMouseLeave"]);case"copy-button":return x(e,t,["type","items"]);case"input":return x(e,t,["type","onSubmit","onBlur"]);case"select":if(Array.isArray(e.options)&&Array.isArray(t.options)&&!v(e.options,t.options,(e,t)=>x(e,t)))return!1;return x(e,t,["type","onChange","options"]);case"overflow-dropdown":case"dropdown":if(Array.isArray(e.options)&&Array.isArray(t.options)&&!v(e.options,t.options,(e,t)=>x(e,t,["onClick"])))return!1;return x(e,t,["type","options"]);case"custom":return!1;case"separator":case"extensions-placeholder":return x(e,t)}},A=(e,t)=>void 0===e&&void 0===t||void 0!==e&&void 0!==t&&e.length===t.length&&e.every((e,o)=>N(t[o],e));var P=i("5Gwdo"),M=i("2dkHo");i("42omo");let R=(0,i("ecnYn").xcss)({width:"100%",borderBlockEnd:"none",borderBlockStart:"var(--ds-border-width, 1px) solid var(--ds-border, #0B120E24)",borderInline:"none"}),w=()=>(0,n.jsx)(i("6f0Oj").default,{as:"hr",xcss:R,role:"presentation"}),L={width:175,height:32},B=(0,i("9K4OG").css)({padding:"var(--ds-space-200, 16px) 0 var(--ds-space-100, 8px)"}),D=(0,i("9K4OG").css)({minWidth:`${L.width}px`,"& button":{minHeight:"var(--ds-space-400, 32px)",padding:"var(--ds-space-100, 8px) var(--ds-space-100, 8px) 7px","& > [data-item-elem-before]":{marginRight:"var(--ds-space-050, 4px)"}}}),U=(0,y.memo)(e=>{let{hide:t,dispatchCommand:o,items:n,intl:r,editorView:a,showSelected:s=!0,areAnyNewToolbarFlagsEnabled:l}=e;return l?(0,i("9K4OG").jsx)("div",{css:D,role:"menu"},n.filter(e=>e&&(!("hidden"in e)||!e.hidden)).map((e,n)=>"type"in e?"separator"===e.type?(0,i("9K4OG").jsx)(i("4BNmH").DropdownSeparator,{key:n}):"overflow-dropdown-heading"===e.type?(0,i("9K4OG").jsx)("div",{key:e.title,css:B},(0,i("9K4OG").jsx)(i("gBbsI").default,null,e.title)):"custom"===e.type?e.render(a,{hide:t,dispatchCommand:o,editorView:a,showSelected:s,intl:r}):void 0:(0,i("9K4OG").jsx)(O.DropdownMenuItem,{key:n,item:e,hide:t,dispatchCommand:o,editorView:a,showSelected:s,intl:r}))):(0,i("9K4OG").jsx)("div",{css:D,role:"menu"},n.filter(e=>!e.hidden).map((e,n)=>(0,i("9K4OG").jsx)(O.DropdownMenuItem,{key:n,item:e,hide:t,dispatchCommand:o,editorView:a,showSelected:s,intl:r})))});var K=(0,i("gmMgo").default)(U);let j=(0,i("9K4OG").css)({margin:"0px var(--ds-space-negative-050, -4px)"}),F={name:"zjik7",styles:"display:flex"},G=({icon:e})=>(0,i("9K4OG").jsx)("div",{css:F},e,(0,i("9K4OG").jsx)("span",{css:j},(0,i("9K4OG").jsx)(t(i("ghftu")),{color:"currentColor",spacing:"spacious",label:"Expand dropdown menu",size:"small"})));class H extends y.Component{render(){let e,{isOpen:o}=this.state,{title:n,icon:r,iconBefore:a,options:s,dispatchCommand:l,mountPoint:d,boundariesElement:c,scrollableElement:p,hideExpandIcon:u,disabled:f,tooltip:h,buttonTestId:m,dropdownWidth:g,dropdownListId:T,alignDropdownWithToolbar:E,footer:b,onMount:S,pulse:_,spotlightConfig:C,shouldFitContainer:I,alignX:O,areAnyNewToolbarFlagsEnabled:k}=this.props;if(r){let t=u?r:(0,i("9K4OG").jsx)(G,{icon:r});e=(0,i("9K4OG").jsx)(i("3P0Cg").default,{testId:m,title:n,icon:t,onClick:this.toggleOpen,onKeyDown:this.toggleOpenByKeyboard,selected:o,disabled:f,tooltipContent:h,ariaHasPopup:!!k||void 0,onMount:S,pulse:_,spotlightConfig:C,areAnyNewToolbarFlagsEnabled:k})}else e=(0,i("9K4OG").jsx)(i("3P0Cg").default,{testId:m,iconAfter:(0,i("9K4OG").jsx)("span",{css:j},(0,i("9K4OG").jsx)(t(i("ghftu")),{color:"currentColor",spacing:"spacious",label:"Expand dropdown menu",size:"small"})),icon:a,onClick:this.toggleOpen,onKeyDown:this.toggleOpenByKeyboard,selected:o,disabled:f,tooltipContent:h,ariaHasPopup:!0,areaControls:T,onMount:S,pulse:_,spotlightConfig:C,areAnyNewToolbarFlagsEnabled:k},n);let v=Array.isArray(s)||"function"==typeof s?g||L.width:s.width,x=Array.isArray(s)?s.length*L.height+8:"function"==typeof s?this.makeArrayOptionsFromCallback(s).length:s.height;return(0,i("9K4OG").jsx)(M.DropdownContainer,{alignX:O,mountTo:d,boundariesElement:c,scrollableElement:p,isOpen:o,handleClickOutside:this.hide,handleEscapeKeydown:this.hideOnEsc,onOpenChange:this.onOpenChanged,fitWidth:v+10,fitHeight:x+10,trigger:e,dropdownListId:T,alignDropdownWithParentElement:E,arrowKeyNavigationProviderOptions:{type:i("5v8Ta").ArrowKeyNavigationType.MENU},shouldFitContainer:I},Array.isArray(s)?this.renderArrayOptions(s):"function"==typeof s?this.renderArrayOptions(this.makeArrayOptionsFromCallback(s)):s.render({hide:this.hide,dispatchCommand:l}),b&&(0,i("9K4OG").jsx)(t(y).Fragment,null,(0,i("9K4OG").jsx)(w,null),b))}componentDidUpdate(e,t){if(t.isOpen!==this.state.isOpen&&(this.props.setDisableParentScroll&&this.props.setDisableParentScroll(this.state.isOpen),!this.props.mountPoint&&this.state.isOpen)&&this.state.isOpenedByKeyboard){let e=document.querySelector('[data-role="droplistContent"]');e&&setTimeout(()=>{let t=new KeyboardEvent("keydown",{bubbles:!0,key:"ArrowDown"});e.dispatchEvent(t)},0)}}constructor(...e){super(...e),this.state={isOpen:!1,isOpenedByKeyboard:!1},this.triggerRef=t(y).createRef(),this.makeArrayOptionsFromCallback=e=>e(),this.renderArrayOptions=e=>{let{showSelected:t,dispatchCommand:o,editorView:n,areAnyNewToolbarFlagsEnabled:r}=this.props;return(0,i("9K4OG").jsx)(K,{hide:this.hide,dispatchCommand:o,items:e,showSelected:t,editorView:n,areAnyNewToolbarFlagsEnabled:r})},this.toggleOpen=()=>{let e=this.props.onClick;e&&e(),this.setState({isOpen:!this.state.isOpen,isOpenedByKeyboard:!1});let t=this.props.onToggle;t&&requestAnimationFrame(()=>{this.props.dispatchCommand(t)})},this.toggleOpenByKeyboard=e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),this.setState({isOpen:!this.state.isOpen,isOpenedByKeyboard:!0}))},this.hide=()=>{this.setState({...this.state,isOpen:!1})},this.hideOnEsc=()=>{document.querySelector(`[data-testid=${this.props.buttonTestId}]`)?.focus(),this.hide()},this.onOpenChanged=e=>{!e.isOpen&&e.event instanceof KeyboardEvent&&(e.event?.key==="Escape"?this.hideOnEsc():this.hide())}}}let z={name:"1o944d1",styles:"position:relative;button{top:-1px;&:not([disabled])::after{border:none;}}svg{path{transform-origin:50% 50%;transform:scale(1.14);}}"},V={name:"1spoyok",styles:"position:relative;button{&:not([disabled])::after{border:none;}}"},W=e=>e.emojiState?.emojiProvider,q=(0,i("efG2U").default)(e=>{let t=(0,i("eiA8Z").useSharedPluginStateWithSelector)(e.pluginInjectionApi,["emoji"],W),o=(0,y.useContext)(i("efG2U").OutsideClickTargetRefContext);return t?(0,i("9K4OG").jsx)(i("fnia6").EmojiPicker,{emojiProvider:Promise.resolve(t),onSelection:e.updateEmoji,onPickerRef:o}):null}),X=e=>{let o=t(y).useRef(null),[n,r]=t(y).useState(!1);t(y).useEffect(()=>{e.setDisableParentScroll&&e.setDisableParentScroll(n)},[n]);let a=(0,y.useCallback)(()=>{r(!n)},[r,n]),s=t=>{r(!1),e.onChange&&e.onChange(t),requestAnimationFrame(()=>{e.editorView?.focus()})},l=(0,y.useCallback)(e=>!document.body.contains(e),[]),d=(0,y.useCallback)(e=>{e&&e.target&&!l(e.target)&&a()},[l,a]),c=(0,y.useCallback)(()=>{r(!1),o.current?.focus()},[r,o]),p=e.title||"";return(0,i("9K4OG").jsx)("div",{css:(0,i("dh538").fg)("platform-visual-refresh-icons")?V:z},(0,i("9K4OG").jsx)(i("3gadb").default,{content:p,position:"top"},(0,i("9K4OG").jsx)(i("1qfLF").default,{appearance:"subtle",key:e.idx,onClick:a,ref:o,isSelected:e.isSelected,label:p,spacing:"compact",icon:()=>(0,i("9K4OG").jsx)(t(i("4FHTF")),{color:"currentColor",label:"emoji-picker-button",spacing:"spacious"})})),(()=>{if(o.current&&n)return(0,i("9K4OG").jsx)(i("jwWgu").default,{target:o.current,mountTo:e.setDisableParentScroll?e.mountPoint:o.current.parentElement,fitHeight:431,fitWidth:352,offset:[0,10],zIndex:e.setDisableParentScroll?600:void 0,focusTrap:!0,preventOverflow:!0,boundariesElement:e.popupsBoundariesElement},(0,i("9K4OG").jsx)(q,{handleEscapeKeydown:c,handleClickOutside:d,pluginInjectionApi:e.pluginInjectionApi,updateEmoji:s}))})())};var $=i("4wH3g");let Y=()=>null,J=e=>e.hasOwnProperty("default"),Z=async e=>{if(!e)return Y;let t=await e();return J(t)?t.default:t},Q=e=>{let{item:o,node:r,extensionApi:a,areAnyNewToolbarFlagsEnabled:s}=e,l=t(y).useMemo(()=>o.icon?t($)({__loadable_id__:"aISYW",name:"platform.packages.editor.editor-plugin-floating-toolbar.src.ui.ExtensionsPlaceholder",loader:async()=>Z(o.icon),loading:Y}):void 0,[o.icon]);return(0,n.jsx)(i("3P0Cg").default,{title:o.label,ariaLabel:o.ariaLabel?o.ariaLabel:"string"==typeof o.tooltip?o.tooltip:o.label?o.label:"",icon:l?(0,n.jsx)(l,{label:o.label||""}):void 0,onClick:()=>{if("function"!=typeof o.action)throw Error(`'action' of context toolbar item '${o.key}' is not a function`);let e=(0,i("7iE7T").nodeToJSON)(r);o.action(e,a)},tooltipContent:o.tooltip,tooltipStyle:o.tooltipStyle,disabled:o.disabled,areAnyNewToolbarFlagsEnabled:s,children:o.label})},ee=e=>{let{node:o,editorView:r,extensionProvider:a,separator:s,applyChangeToContextPanel:l,extensionApi:d,scrollable:c,setDisableScroll:p,dispatchCommand:u,popupsMountPoint:f,popupsBoundariesElement:h,popupsScrollableElement:m,alignDropdownWithToolbar:g,areAnyNewToolbarFlagsEnabled:T}=e,[E,b]=(0,y.useState)([]);(0,y.useEffect)(()=>{e();async function e(){let e=await a;e&&b(await e.getExtensions())}},[]);let S=t(y).useMemo(()=>(0,i("7iE7T").nodeToJSON)(o),[o]),_=t(y).useMemo(()=>(0,i("2cmfr").getContextualToolbarItemsFromModule)(E,S,d),[E,S,d]);if(!_.length)return null;let C=[];s&&["start","both"].includes(s)&&C.push((0,n.jsx)(i("faH35").default,{areAnyNewToolbarFlagsEnabled:T}));let I=(0,i("sxTNo").isNestedTablesSupported)(r.state.schema)&&(0,i("dh538").fg)("platform_editor_use_nested_table_pm_nodes")&&(0,i("sxTNo").isSelectionTableNestedInTable)(r.state);return _.forEach((e,t)=>{I&&["referentiality:connections","chart:insert-chart"].includes(e.key)&&(e.disabled=!0),"type"in e&&"dropdown"===e.type?C.push((0,n.jsx)(H,{title:e.title,icon:e.icon,dispatchCommand:u||(()=>{}),options:e.options,disabled:e.disabled,tooltip:e.tooltip,hideExpandIcon:e.hideExpandIcon,mountPoint:f,boundariesElement:h,scrollableElement:m,dropdownWidth:e.dropdownWidth,showSelected:e.showSelected,buttonTestId:e.testId,editorView:r,setDisableParentScroll:c?p:void 0,dropdownListId:e?.id&&`${e.id}-dropdownList`,alignDropdownWithToolbar:g,onToggle:e.onToggle,footer:e.footer,onMount:e.onMount,onClick:e.onClick,pulse:e.pulse,areAnyNewToolbarFlagsEnabled:T},e.id)):C.push((0,n.jsx)(Q,{node:o,item:e,editorView:r,applyChangeToContextPanel:l,extensionApi:d,areAnyNewToolbarFlagsEnabled:T})),t<_.length-1&&C.push((0,n.jsx)(i("faH35").default,{areAnyNewToolbarFlagsEnabled:T}))}),s&&["end","both"].includes(s)&&C.push((0,n.jsx)(i("faH35").default,{areAnyNewToolbarFlagsEnabled:T})),(0,n.jsx)(i("hArLp").default,{children:C})},et=e=>{let{defaultValue:t,onBlur:o,onSubmit:n,placeholder:r}=e,[a,s]=(0,y.useState)(t||"");return(0,i("9K4OG").jsx)("form",{onSubmit:e=>{e.preventDefault(),n&&n(a)}},(0,i("9K4OG").jsx)("input",{css:i("1DCSy").panelTextInput,value:a,onChange:e=>{s(e.target.value)},placeholder:r,onBlur:e=>{e.preventDefault(),o&&o(a)}}))},eo=(0,i("ecnYn").xcss)({borderLeft:"solid var(--ds-border, #0B120E24) 1px",right:"space.0",borderTopRightRadius:"radius.small",borderBottomRightRadius:"radius.small"}),en=(0,i("ecnYn").xcss)({borderRight:"solid var(--ds-border, #0B120E24) 1px",left:"space.0",borderTopLeftRadius:"radius.small",borderBottomLeftRadius:"radius.small"}),er=(0,i("ecnYn").xcss)({backgroundColor:"elevation.surface.overlay",zIndex:"1",position:"absolute"}),ei=({intl:e,scrollContainerRef:o,node:r,disabled:a,side:s})=>{let[l,d]=(0,y.useState)(!1),[c,p]=(0,y.useState)(!0),u=(0,i("2P8Ax").default)(()=>{if(!o.current)return;let{scrollLeft:e,scrollWidth:t,offsetWidth:n}=o.current;p("left"===s?e>0:e<t-n-1)}),f=()=>{u()},h=new ResizeObserver(e=>{let t=o.current?.scrollWidth||0,n=o.current?.parentNode,r=-1;n instanceof HTMLElement&&(r=n.offsetWidth),-1!==r&&(r>=t?d(!1):(d(!0),f()))});(0,y.useEffect)(()=>{let e;f();let t=o.current;return t&&(e=(0,i("fFa3V").bind)(t,{type:"scroll",listener:f}),h.observe(t)),()=>{t&&(e?.(),h.unobserve(t)),u.cancel()}},[]),(0,y.useEffect)(()=>{let e=o.current;e&&e.scrollTo?.({left:0})},[r.type,o]);let m="left"===s?t(i("laHi9")):t(i("6R5uz"));return l&&("left"===s&&c||"right"===s&&c)&&(0,n.jsx)(i("6f0Oj").default,{padding:"space.050",xcss:["left"===s?en:eo,er],children:(0,n.jsx)(i("1qfLF").default,{appearance:"subtle",label:e.formatMessage("left"===s?i("k4fPq").default.floatingToolbarScrollLeft:i("k4fPq").default.floatingToolbarScrollRight),onClick:()=>{let{width:e=0}=o.current?.getBoundingClientRect()||{},t=o.current?.scrollLeft||0;o.current?.scrollTo({top:0,left:"left"===s?t-e:t+e,behavior:"smooth"})},isDisabled:a,icon:e=>(0,n.jsx)(m,{label:e.label,size:"small"}),isTooltipDisabled:!1,tooltip:{position:"top"}})})},ea=(0,i("9K4OG").css)({display:"grid",gridTemplateColumns:"1fr 1fr",gridGap:"var(--ds-space-050, 4px)",padding:"var(--ds-space-050, 4px) var(--ds-space-100, 8px)",borderLeft:`solid var(--ds-border, ${i("6fnsQ").N30}) 1px`,flexShrink:0,alignItems:"center"}),es=t(i("laHi9")),el=t(i("6R5uz")),ed=({intl:e,scrollContainerRef:t,node:o,disabled:n,areAnyNewToolbarFlagsEnabled:r})=>{let a=(0,y.useRef)(null),[s,l]=(0,y.useState)(!1),[d,c]=(0,y.useState)(!0),[p,u]=(0,y.useState)(!0),f=(0,i("2P8Ax").default)(()=>{if(!t.current)return;let{scrollLeft:e,scrollWidth:o,offsetWidth:n}=t.current;c(e>0),u(e+n<o-1)}),h=()=>f(),m=new ResizeObserver(e=>{let o=t.current?.scrollWidth||0;t.current?.parentNode?.offsetWidth>=o?l(!1):(l(!0),h())});return(0,y.useEffect)(()=>{h();let e=t.current;return e&&(e.addEventListener("scroll",h),m.observe(e)),()=>{e&&(e.removeEventListener("scroll",h),m.unobserve(e)),f.cancel()}},[]),(0,y.useEffect)(()=>{let e=t.current;e&&e.scrollTo?.({left:0})},[o.type]),s?(0,i("9K4OG").jsx)("div",{ref:a,css:ea,className:"scroll-buttons"},(0,i("9K4OG").jsx)(i("3P0Cg").default,{title:e.formatMessage(i("k4fPq").default.floatingToolbarScrollLeft),icon:(0,i("9K4OG").jsx)(es,{label:e.formatMessage(i("k4fPq").default.floatingToolbarScrollLeft),size:"small"}),onClick:()=>{let{width:e=0}=t.current?.getBoundingClientRect()||{},o=t.current?.scrollLeft||0;t.current?.scrollTo({top:0,left:o-e,behavior:"smooth"})},disabled:!d||n,areAnyNewToolbarFlagsEnabled:r}),(0,i("9K4OG").jsx)(i("3P0Cg").default,{title:e.formatMessage(i("k4fPq").default.floatingToolbarScrollRight),icon:(0,i("9K4OG").jsx)(el,{label:e.formatMessage(i("k4fPq").default.floatingToolbarScrollRight),size:"small"}),onClick:()=>{let{width:e=0}=t.current?.getBoundingClientRect()||{},o=t.current?.scrollLeft||0;t.current?.scrollTo({top:0,left:o+e,behavior:"smooth"})},disabled:!p||n,areAnyNewToolbarFlagsEnabled:r})):null};function ec(e){let o=(0,y.useRef)(null),{width:r=200}=e,a=t(y).useMemo(()=>({container:e=>({...e,width:r}),menuPortal:t=>{let n=o?.current?.select?.controlRef?.parentNode||o?.current?.select?.select?.controlRef?.parentNode,i=n&&e.setDisableParentScroll?{top:n.offsetTop,left:n.offsetLeft,height:n.offsetHeight,width:r}:{};return{...t,...i}}}),[r]);return(0,n.jsx)(i("2gD2K").default,{ref:o,options:e.options,value:e.defaultValue,onChange:e.onChange,placeholder:e.placeholder,spacing:"compact",menuPlacement:"auto",filterOption:e.filterOption,styles:a,menuPortalTarget:e.mountPoint,onMenuOpen:()=>{e.setDisableParentScroll&&e.setDisableParentScroll(!0)},onMenuClose:()=>{e.setDisableParentScroll&&e.setDisableParentScroll(!1)},label:e.ariaLabel,classNamePrefix:e.classNamePrefix})}let ep=t(y).memo(({items:e,groupLabel:o,dispatchCommand:n,popupsMountPoint:r,popupsBoundariesElement:a,editorView:l,dispatchAnalyticsEvent:d,popupsScrollableElement:c,scrollable:p,providerFactory:u,extensionsProvider:f,node:h,setDisableScroll:m,mountRef:g,api:T,intl:b})=>{var S;let y=p?r||l?.dom.closest(".fabric-editor-popup-scroll-parent")||l?.dom.closest(".ak-editor-content-area")||void 0:r,_=(0,i("iHzeA").areToolbarFlagsEnabled)(!!T?.toolbar),C=(o,S)=>{switch(o.type){case"button":var C,I;let O=o.icon;return(0,i("9K4OG").jsx)(i("3P0Cg").default,{className:o.className,key:S,title:o.title,href:o.href,icon:o.icon?(0,i("9K4OG").jsx)(O,{color:(C=o.disabled,I=o.selected,C?"var(--ds-icon-disabled, #080F214A)":I?"var(--ds-icon-selected, #1868DB)":"currentColor"),spacing:"spacious",label:void 0,"aria-hidden":!0}):void 0,iconAfter:o.iconAfter?(0,i("9K4OG").jsx)(o.iconAfter,{label:""}):void 0,appearance:o.appearance,target:o.target,onClick:()=>{o.confirmDialog?n(E(S)):(n(o.onClick),o.focusEditoronEnter&&!l?.hasFocus()&&l?.focus())},onMouseEnter:()=>n(o.onMouseEnter),onMouseLeave:()=>n(o.onMouseLeave),onFocus:()=>n(o.onFocus),onBlur:()=>n(o.onBlur),onMount:o.onMount,onUnmount:o.onUnmount,selected:o.selected,disabled:o.disabled,tooltipContent:o.tooltipContent,testId:o.testId,hideTooltipOnClick:o.hideTooltipOnClick,ariaHasPopup:o.ariaHasPopup,tabIndex:o.tabIndex,isRadioButton:o.isRadioButton,ariaLabel:(0,s.expValEquals)("platform_editor_floating_toolbar_button_aria_label","isEnabled",!0)?o?.ariaLabel:void 0,pulse:o.pulse,spotlightConfig:o.spotlightConfig,interactionName:o.interactionName,areAnyNewToolbarFlagsEnabled:_},o.showTitle&&o.title);case"input":return(0,i("9K4OG").jsx)(et,{key:S,mountPoint:r,boundariesElement:a,defaultValue:o.defaultValue,placeholder:o.placeholder,onSubmit:e=>n(o.onSubmit(e)),onBlur:e=>n(o.onBlur(e))});case"custom":return o.render(l,S,d);case"overflow-dropdown":let k;return k=(0,i("dh538").fg)("platform_editor_fix_confirm_table_removal")?o.options.map((e,t)=>{if(!("type"in e)&&e.confirmDialog){let o=e.confirmDialog?E(S,t):e.onClick;return{...e,onClick:o}}return e}):o.options,(0,i("9K4OG").jsx)(H,{alignX:_?"right":void 0,key:S,title:b.formatMessage(i("61p3e").default.viewMore),icon:(0,i("9K4OG").jsx)(t(i("9VJDA")),{label:"",spacing:"spacious"}),dispatchCommand:n,options:k,disabled:o.disabled,tooltip:o.tooltip,hideExpandIcon:!0,mountPoint:r,boundariesElement:a,scrollableElement:c,dropdownWidth:o.dropdownWidth,showSelected:o.showSelected,buttonTestId:o.testId,editorView:l,setDisableParentScroll:p?m:void 0,dropdownListId:o?.id&&`${o.id}-dropdownList`,alignDropdownWithToolbar:1===e.length,onClick:o.onClick,areAnyNewToolbarFlagsEnabled:_});case"dropdown":let v=o.icon,x=o.iconBefore;return(0,i("9K4OG").jsx)(H,{key:S,title:o.title,icon:v&&(0,i("9K4OG").jsx)(v,{label:o.title}),iconBefore:x&&(0,i("9K4OG").jsx)(x,{label:""}),dispatchCommand:n,options:o.options,disabled:o.disabled,tooltip:o.tooltip,hideExpandIcon:o.hideExpandIcon,mountPoint:r,boundariesElement:a,scrollableElement:c,dropdownWidth:o.dropdownWidth,showSelected:o.showSelected,buttonTestId:o.testId,editorView:l,setDisableParentScroll:p?m:void 0,dropdownListId:o?.id&&`${o.id}-dropdownList`,alignDropdownWithToolbar:1===e.length,onToggle:o.onToggle,footer:o.footer,onMount:o.onMount,onClick:o.onClick,pulse:o.pulse,shouldFitContainer:o.shouldFitContainer,areAnyNewToolbarFlagsEnabled:_});case"select":if("list"===o.selectType){let e=o.title||o.placeholder;return(0,i("9K4OG").jsx)(ec,{key:S,dispatchCommand:n,options:o.options,hideExpandIcon:o.hideExpandIcon,mountPoint:p?g.current:void 0,boundariesElement:a,scrollableElement:c,defaultValue:o.defaultValue,placeholder:o.placeholder,onChange:e=>n(o.onChange(e)),ariaLabel:e,filterOption:o.filterOption,setDisableParentScroll:p?m:void 0,classNamePrefix:"floating-toolbar-select"})}if("color"===o.selectType)return(0,i("9K4OG").jsx)(i("lAt6Q").default,{skipFocusButtonAfterPick:!0,key:S,isAriaExpanded:o.isAriaExpanded,title:o.title,onChange:e=>{n(o.onChange(e))},colorPalette:o.options,currentColor:o.defaultValue?o.defaultValue.value:void 0,placement:"Panels",mountPoint:y,setDisableParentScroll:p?m:void 0,hexToPaletteColor:i("6icEc").hexToEditorBackgroundPaletteColor,paletteColorTooltipMessages:i("8LFdJ").backgroundPaletteTooltipMessages,returnEscToButton:o.returnEscToButton});if("emoji"===o.selectType)return(0,i("9K4OG").jsx)(X,{key:S,editorView:l,title:o.title,providerFactory:u,isSelected:o.selected,onChange:e=>n(o.onChange(e)),mountPoint:y,popupsBoundariesElement:a,setDisableParentScroll:p?m:void 0,pluginInjectionApi:T});return null;case"extensions-placeholder":if(!l||!f)return null;return(0,i("9K4OG").jsx)(ee,{key:S,node:h,editorView:l,extensionProvider:f,separator:o.separator,applyChangeToContextPanel:T?.contextPanel?.actions.applyChange,extensionApi:T?.extension?.actions.api(),dispatchCommand:n,popupsMountPoint:r,popupsBoundariesElement:a,popupsScrollableElement:c,alignDropdownWithToolbar:1===e.length,scrollable:p,areAnyNewToolbarFlagsEnabled:_});case"separator":if(_)return o.fullHeight?(0,i("9K4OG").jsx)(i("faH35").default,{key:S,fullHeight:!0,areAnyNewToolbarFlagsEnabled:!0}):null;return(0,i("9K4OG").jsx)(i("faH35").default,{key:S,fullHeight:o.fullHeight,areAnyNewToolbarFlagsEnabled:!1})}},I=(S=e.filter(e=>!e.hidden),S.reduce((e,t,o)=>{let{finalOutput:n,buttonGroup:r}=e;if("button"===t.type){let i=o<S.length-1,a=S[o+1]&&"button"===S[o+1].type,l=S[o-1]&&"button"===S[o-1].type,d=i&&a||l;((0,s.expValEquals)("platform_editor_august_a11y","isEnabled",!0)?d&&!1!==t.isRadioButton:d)?(t.isRadioButton=!0,r.push(t),!a&&l&&(n.push(r),e.buttonGroup=[])):n.push(t)}else if("separator"===t.type&&_){let e=o===S.length-1,r=S[o-1]?.type==="separator";0===o||e||r||n.push(t)}else n.push(t);return e},{buttonGroup:[],finalOutput:[]}).finalOutput);return(0,i("9K4OG").jsx)(i("hArLp").default,{testId:"editor-floating-toolbar-items"},I.map((t,n)=>{if(Array.isArray(t))return(0,i("9K4OG").jsx)("div",{key:n,css:_?ef:eu,role:"radiogroup","aria-label":o??void 0,"data-testid":"editor-floating-toolbar-grouped-buttons"},t.map(t=>{let o=e.findIndex(e=>e===t);return C(t,o)}));{let o=e.findIndex(e=>e===t);return C(t,o)}}))},(e,t)=>!!t.node&&!(e.node.type!==t.node.type||e.node.attrs.localId!==t.node.attrs.localId||!A(e.items,t.items)||!e.mounted!=!t.mounted)),eu={name:"h1up05",styles:"display:flex;gap:var(--ds-space-050, 4px)"},ef={name:"gcdzb",styles:"display:flex;gap:var(--ds-space-075, 6px)"};var eh={name:"q568uz",styles:"min-height:var(--ds-space-500, 40px)"},em={name:"oxur4o",styles:"padding-left:var(--ds-space-050, 4px)"},eg={name:"oxur4o",styles:"padding-left:var(--ds-space-050, 4px)"},eT={name:"s0vnfv",styles:"height:32px"},eE={name:"1k18kha",styles:"height:40px"};let eb=(e,t,o,n)=>(0,i("9K4OG").css)({backgroundColor:"var(--ds-surface-overlay, white)",borderRadius:"var(--ds-radius-small, 3px)",boxShadow:"var(--ds-shadow-overlay, 0 0 1px rgba(9, 30, 66, 0.31), 0 4px 8px -2px rgba(9, 30, 66, 0.25))",display:"flex",lineHeight:1,boxSizing:"border-box","& > div > div":{alignItems:"center"}},t?(0,i("9K4OG").css)(o?eE:eT,"overflow:hidden;"):e?(0,i("9K4OG").css)({padding:"var(--ds-space-0, 0) 4px var(--ds-space-0, 0) 4px"},n&&eg):(0,i("9K4OG").css)({padding:"var(--ds-space-050, 4px) var(--ds-space-100, 8px)"},n&&em),e?eh:void 0);var eS={name:"zjik7",styles:"display:flex"},ey={name:"9kivhj",styles:"margin-left:var(--ds-space-100, 8px)"},e_={name:"8gsxsd",styles:"margin-left:var(--ds-space-050, 4px)"},eC={name:"upho8i",styles:"overflow-x:auto;overflow-y:hidden;scrollbar-width:none"},eI={name:"d3v9zr",styles:"overflow:hidden"};let eO=({scrollable:e,scrollDisabled:t,firstElementIsSelect:o,areAnyNewToolbarFlagsEnabled:n})=>(0,i("9K4OG").css)(e?(0,i("9K4OG").css)(t?eI:eC,{WebkitOverflowScrolling:"touch",padding:"var(--ds-space-050, 4px) 0 var(--ds-space-050, 4px)","> div":{"> div:first-child":o?e_:ey,"> div:last-child":{marginRight:"var(--ds-space-100, 8px)"}}},n?(0,i("9K4OG").css)({padding:"var(--ds-space-0, 0) 4px var(--ds-space-600, 48px) 4px","> div":{minHeight:"var(--ds-space-500, 40px)",gap:"var(--ds-space-075, 6px)","> div:first-child":{marginLeft:0},"> div:last-child":{marginRight:0}}}):void 0):eS);class ek extends y.Component{resetStyling(){if(this.props.editorView){let{state:e,dispatch:t}=this.props.editorView;this.props.api?.decorations?.actions.removeDecoration(e,t)}}setDisableScroll(e){e?requestAnimationFrame(()=>{this.setState({scrollDisabled:e})}):this.setState({scrollDisabled:e})}componentDidMount(){this.setState({mounted:!0})}componentDidUpdate(e){!function(e){let t=e?.state;if(t){let{selector:o}=p.getState(t);if(o){let t=document.querySelector(o);if(t){t.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}),t.focus();let{state:{tr:o},dispatch:n}=e;n(f(null)(o))}}}}(this.props?.editorView),this.props.node!==e.node&&this.resetStyling()}componentWillUnmount(){let{editorView:e}=this.props;if(e){let{state:{tr:t},dispatch:o}=e;o(f(null)(t))}this.resetStyling()}render(){let{items:e,className:o,node:n,intl:r,scrollable:a,mediaAssistiveMessage:s}=this.props,l=(0,i("iHzeA").areToolbarFlagsEnabled)(!!this.props.api?.toolbar);if(!e||!e.length)return null;let d="select"===e[0].type,c=e.find(e=>"select"===e.type&&"list"===e.selectType);return(0,i("9K4OG").jsx)(t(y).Fragment,null,(0,i("9K4OG").jsx)(P.ToolbarArrowKeyNavigationProvider,{editorView:this.props.editorView,handleEscape:this.handleEscape,disableArrowKeyNavigation:!this.shouldHandleArrowKeys(),childComponentSelector:"[data-testid='editor-floating-toolbar']",isShortcutToFocusToolbar:this.isShortcutToFocusToolbar,intl:r},(0,i("9K4OG").jsx)("div",{ref:this.toolbarContainerRef,css:()=>[eb(l,a,void 0!==c,d)],"aria-label":r.formatMessage(i("k4fPq").default.floatingToolbarAriaLabel),role:"toolbar","data-testid":"editor-floating-toolbar",className:o,onMouseDown:l?this.captureMouseEvent:void 0},(0,i("9K4OG").jsx)(i("cftLn").default,{text:s?`${s}, ${r.formatMessage(i("k4fPq").default.floatingToolbarAnnouncer)}`:r.formatMessage(i("k4fPq").default.floatingToolbarAnnouncer),delay:250}),a&&l&&(0,i("9K4OG").jsx)(ei,{intl:r,scrollContainerRef:this.scrollContainerRef,node:n,disabled:this.state.scrollDisabled,side:"left"}),(0,i("9K4OG").jsx)("div",{"data-testid":"floating-toolbar-items",ref:this.scrollContainerRef,css:eO({areAnyNewToolbarFlagsEnabled:l,scrollable:a,scrollDisabled:this.state.scrollDisabled,firstElementIsSelect:d})},(0,i("9K4OG").jsx)(ep,{...this.props,setDisableScroll:this.setDisableScroll.bind(this),mountRef:this.mountRef,mounted:this.state.mounted})),a&&(l?(0,i("9K4OG").jsx)(ei,{intl:r,scrollContainerRef:this.scrollContainerRef,node:n,disabled:this.state.scrollDisabled,side:"right"}):(0,i("9K4OG").jsx)(ed,{intl:r,scrollContainerRef:this.scrollContainerRef,node:n,disabled:this.state.scrollDisabled,areAnyNewToolbarFlagsEnabled:l}))),(0,i("9K4OG").jsx)("div",{ref:this.mountRef})))}constructor(e){super(e),this.scrollContainerRef=void 0,this.mountRef=void 0,this.toolbarContainerRef=void 0,this.shouldHandleArrowKeys=()=>!this.props.items?.find(e=>"custom"===e.type&&e.disableArrowNavigation),this.handleEscape=e=>{let t=!!document.querySelector('[data-role="droplistContent"]'),o=!!document.querySelector(".floating-toolbar-select__menu");t||o||(this.props.editorView?.focus(),e.preventDefault(),e.stopPropagation())},this.captureMouseEvent=e=>{(this.props.items?.length!==1||"custom"!==this.props.items[0].type)&&(e.stopPropagation(),e.preventDefault())},this.isShortcutToFocusToolbar=e=>e.altKey&&("F10"===e.key||121===e.keyCode),this.scrollContainerRef=t(y).createRef(),this.mountRef=t(y).createRef(),this.toolbarContainerRef=t(y).createRef(),this.state={scrollDisabled:!1,mounted:!1}}}var ev=(0,i("gmMgo").default)(ek);let ex=e=>{if(e.length<=1)return e[0];let t=e.reduce((e,t)=>(t.options&&e.push(...t.options),e),[]),o=[...t.filter(e=>"rank"in e&&"number"==typeof e.rank).sort((e,t)=>(t.rank||0)-(e.rank||0)),...t.filter(e=>!("rank"in e&&"number"==typeof e.rank))];return{type:"overflow-dropdown",dropdownWidth:e.reduce((e,t)=>t.dropdownWidth&&t.dropdownWidth>e?t.dropdownWidth:e,0),options:o}},eN=["dragging","tableContextualMenuPopupOpen","tableDragMenuPopupOpen","commenting","resizing","blockMenuOpen","statusPickerOpen"],eA=(e,t)=>{let o;if(t.find(t=>{let n=(0,a.findSelectedNodeOfType)(t.nodeType)(e);return n&&(o={node:n.node,pos:n.pos,config:t}),!!n}),o)return o;let n={};t.forEach(e=>{Array.isArray(e.nodeType)?e.nodeType.forEach(t=>{n[t.name]=e}):n[e.nodeType.name]=e});let{$from:r}=e;for(let e=r.depth;e>0;e--){let t=r.node(e),o=n[t.type.name];if(o)return{config:o,node:t,pos:r.pos}}if(e instanceof i("ks2lK").AllSelection){var s;let e,t=r.node(0),o=null,i=(s=e=>!!(o=n[e.type.name]),t.descendants(t=>!e&&(!s(t)||(e=t,!1))),e);if(i&&o)return{config:o,node:i,pos:r.pos}}},eP=(e,t)=>{try{return(0,a.findDomRefAtPos)(e.state.selection.from,e.domAtPos.bind(e))}catch(o){console.warn(o),t&&t({action:i("d925B").ACTION.ERRORED,actionSubject:i("d925B").ACTION_SUBJECT.CONTENT_COMPONENT,eventType:i("d925B").EVENT_TYPE.OPERATIONAL,attributes:{component:i("d925B").CONTENT_COMPONENT.FLOATING_TOOLBAR,selection:e.state.selection.toJSON(),position:e.state.selection.from,docSize:e.state.doc.nodeSize,error:o.toString(),errorStack:o.stack||void 0}})}};function eM(e){return!!e}function eR({pluginInjectionApi:e,editorView:o,popupsMountPoint:a,popupsBoundariesElement:d,popupsScrollableElement:c,providerFactory:p,dispatchAnalyticsEvent:u}){let f,h,{floatingToolbarState:m,editorDisabledState:g,editorViewModeState:T,userIntentState:E,blockControlsState:S}=(0,i("1Oo9w").useSharedPluginState)(e,["floatingToolbar","editorDisabled","editorViewMode","userIntent","blockControls"]),{configWithNodeInfo:y,floatingToolbarData:_}=m??{};if((0,i("eTj7Y").isSSR)()||!y||!y.config||void 0!==y.config?.visible&&!y.config?.visible)return null;let C=!!(e?.userIntent&&(0,l.expValEqualsNoExposure)("platform_editor_lovability_user_intent","isEnabled",!0));if((E?.currentUserIntent==="dragging"||E?.currentUserIntent==="blockMenuOpen"&&(0,s.expValEquals)("platform_editor_block_menu","isEnabled",!0))&&!C||E?.currentUserIntent&&eN.includes(E?.currentUserIntent)&&C)return null;let{config:O,node:k}=y;if(e?.toolbar){let e=o.state.selection,t="$anchorCell"in e&&!e.empty,n=e instanceof i("ks2lK").TextSelection&&!e.empty;if((0,i("dh538").fg)("platform_editor_toolbar_aifc_user_intent_fix")){if(n&&"hyperlink-floating-toolbar"!==O.className||t&&E?.currentUserIntent==="default")return null}else if(n&&"hyperlink-floating-toolbar"!==O.className||t)return null}let{items:v}=O,{groupLabel:x}=O,{title:N,getDomRef:A=eP,align:P="center",className:M="",height:R,width:w,zIndex:L,offset:B=[0,12],forcePlacement:D,preventPopupOverflow:U,onPositionCalculated:K,absoluteOffset:j={top:0,left:0,right:0,bottom:0},focusTrap:F,mediaAssistiveMessage:G="",stick:H=!0}=O,z=A(o,u),V=g&&g.editorDisabled,W=T?.mode==="view";if(!z||V&&!W)return null;let q=Array.isArray(v)?v:v?.(k);if(W){let e="supportsViewMode";v=q.filter(t=>e in t&&!!t[e])}if((0,i("iHzeA").areToolbarFlagsEnabled)(!!e?.toolbar)){let t=Array.isArray(v)?v:v?.(k),o=t.filter(e=>"overflow-dropdown"===e.type);if(o.length>1){let e=ex(o),n=t.filter(e=>"overflow-dropdown"!==e.type);if(n.length>0)for(;n.at(-1)?.type==="separator";)n.pop();v=[...n,{type:"separator",fullHeight:!0,supportsViewMode:!0},e]}o.length>0&&u&&(v=(Array.isArray(v)?v:v?.(k)).map(t=>{if("overflow-dropdown"!==t.type)return t;let o=t.onClick;return{...t,onClick:()=>{let t=e?.editorViewMode?.sharedState.currentState()?.mode;u({action:i("d925B").ACTION.CLICKED,actionSubject:i("d925B").ACTION_SUBJECT.BUTTON,actionSubjectId:i("d925B").ACTION_SUBJECT_ID.FLOATING_TOOLBAR_OVERFLOW,eventType:i("d925B").EVENT_TYPE.UI,attributes:{editorContentMode:t}}),o?.()}}}))}let X=e?.copyButton?.actions.processCopyButtonItems(o.state)(Array.isArray(v)?v:v(k),e?.decorations?.actions.hoverDecoration);K&&(f=e=>K(o,e));let $=e=>e&&e(o.state,o.dispatch,o);if((0,i("dh538").fg)("platform_editor_fix_confirm_table_removal")){let{confirmDialogForItem:e,confirmDialogForItemOption:t}=_||{},o=e?X?.[e]:void 0;if(o?.type==="button"&&(h=o),o?.type==="overflow-dropdown"&&void 0!==t){let e=o.options[t];"type"in e||(h=e)}}else{let{confirmDialogForItem:e}=_||{};h=e?X[e]:void 0}let Y=O.scrollable,J="function"==typeof h?.confirmDialog?h?.confirmDialog():h?.confirmDialog;return(0,n.jsxs)(i("7fmpI").ErrorBoundary,{component:i("d925B").ACTION_SUBJECT.FLOATING_TOOLBAR_PLUGIN,componentId:t(r)(N),dispatchAnalyticsEvent:u,fallbackComponent:null,children:[(0,n.jsx)(i("jwWgu").default,{ariaLabel:N,role:(0,i("dh538").fg)("platform_editor_a11y_add_role_to_popup")?"toolbar":void 0,offset:B,target:z,alignY:"bottom",forcePlacement:D,fitHeight:R,fitWidth:w,absoluteOffset:j,alignX:P,stick:H,zIndex:L,mountTo:a,boundariesElement:d,scrollableElement:c,onPositionCalculated:f,style:Y?{maxWidth:"100%"}:{},focusTrap:F,preventOverflow:U,children:(0,n.jsx)(i("dYBVS").WithProviders,{providerFactory:p,providers:["extensionProvider"],renderNode:t=>(0,n.jsx)(ev,{target:z,items:X,groupLabel:x,node:k,dispatchCommand:$,editorView:o,className:M,focusEditor:()=>o.focus(),providerFactory:p,popupsMountPoint:a,popupsBoundariesElement:d,popupsScrollableElement:c,dispatchAnalyticsEvent:u,extensionsProvider:t.extensionProvider,scrollable:Y,api:e,mediaAssistiveMessage:G})})}),(0,n.jsx)(I,{testId:"ak-floating-toolbar-confirmation-modal",options:J,onConfirm:(e=!1)=>{J.onConfirm?$(J.onConfirm(e)):$(h.onClick)},onClose:()=>{$(b()),o.hasFocus()||o.focus()}})]})}let ew=new(0,i("ks2lK").PluginKey)("floatingToolbarPluginKey");e.exports.floatingToolbarPlugin=({api:e})=>({name:"floatingToolbar",pmPlugins:(t=[])=>[{name:"floatingToolbar",plugin:({providerFactory:o,getIntl:n})=>(function(e){let{floatingToolbarHandlers:t,providerFactory:o,getIntl:n,api:r}=e,a=n(),c=e=>{let n=[];for(let i=0;i<t.length;i++){let s=(0,t[i])(e,a,o,n);if(s){let e=!!(r?.userIntent&&(0,l.expValEqualsNoExposure)("platform_editor_lovability_user_intent","isEnabled",!0));if(s.__suppressAllToolbars&&(0,d.editorExperiment)("platform_editor_controls","variant1")&&!e||e&&eN.includes(r?.userIntent?.sharedState.currentState()?.currentUserIntent||"")){n=void 0;break}n.push(Array.isArray(s.nodeType)?{...s,nodeType:s.nodeType.filter(eM)}:s)}}return n&&eA(e.selection,n)},p=e=>{if(r?.userIntent&&(0,l.expValEqualsNoExposure)("platform_editor_lovability_user_intent","isEnabled",!0))return!1;for(let n=0;n<t.length;n++){let r=(0,t[n])(e,a,o);if(r?.__suppressAllToolbars)return!0}return!1};return new(0,i("1S4f7").SafePlugin)({key:ew,state:{init:()=>({getConfigWithNodeInfo:c}),apply:(0,s.expValEquals)("platform_editor_lovability_suppress_toolbar_event","isEnabled",!0)?(e,t,o,n)=>({getConfigWithNodeInfo:c,suppressedToolbar:p(n)}):()=>({getConfigWithNodeInfo:c})},view:(0,s.expValEquals)("platform_editor_lovability_suppress_toolbar_event","isEnabled",!0)?()=>({update:(e,t)=>{let o=ew.getState(e.state),n=ew.getState(t);o?.suppressedToolbar&&!n?.suppressedToolbar&&r?.analytics?.actions?.fireAnalyticsEvent({action:i("d925B").ACTION.SUPPRESSED,actionSubject:i("d925B").ACTION_SUBJECT.FLOATING_TOOLBAR_PLUGIN,actionSubjectId:i("d925B").ACTION_SUBJECT_ID.FLOATING_TOOLBAR,eventType:i("d925B").EVENT_TYPE.TRACK})}}):void 0})})({api:e,floatingToolbarHandlers:t,providerFactory:o,getIntl:n})},{name:"floatingToolbarData",plugin:({dispatch:e})=>S(e)},{name:"forceFocus",plugin:()=>u()}],actions:{forceFocusSelector:f},commands:{copyNode:(t,o)=>c(t,e?.analytics?.actions,o)},getSharedState(t){if(t)return{configWithNodeInfo:"hasNotHadInteraction"!==e?.interaction?.sharedState.currentState()?.interactionState?ew.getState(t)?.getConfigWithNodeInfo?.(t)??void 0:void 0,floatingToolbarData:h.getState(t)}},contentComponent:({popupsMountPoint:t,popupsBoundariesElement:o,popupsScrollableElement:r,editorView:i,providerFactory:a,dispatchAnalyticsEvent:s})=>i?(0,n.jsx)(eR,{editorView:i,pluginInjectionApi:e,popupsMountPoint:t,popupsBoundariesElement:o,popupsScrollableElement:r,providerFactory:a,dispatchAnalyticsEvent:s}):null})}),a("aaI8u",function(e,o){var n=i("42omo"),r=i("4wH3g"),a=i("1QXSD");let s=()=>null,l=e=>e.hasOwnProperty("default"),d=async e=>{if(!e)return s;let t=await e();return l(t)?t.default:t},c=({item:e,disabled:o,node:a,extension:l})=>{let c=e.icon?t(r)({__loadable_id__:"nxb4U",name:"convertExtensionToDropdownMenuItem",loader:async()=>d(e.icon),loading:s}):void 0,p="";return e.label?p=e.label:"string"==typeof e.tooltip?p=e.tooltip:e.ariaLabel&&(p=e.ariaLabel),e.disabled=o?.(e.key)||!1,{title:p,icon:c?t(n).createElement(c,{label:e.label||""}):void 0,disabled:e.disabled,onClick:()=>{if("function"!=typeof e.action)throw Error(`'action' of context toolbar item '${e.key}' is not a function`);let t=(0,i("7iE7T").nodeToJSON)(a);return l.extensionApi&&e.action(t,l.extensionApi),!0}}},p=({item:e,editorView:o,disabled:r,node:i,extension:s,dropdownOptions:l})=>{let d=c({item:e,disabled:r,node:i,extension:s});return d?t(n).createElement(a.DropdownMenuItem,{key:e.key,item:d,editorView:o,hide:l.hide,dispatchCommand:l.dispatchCommand,showSelected:l.showSelected,intl:l.intl}):null};e.exports.DropdownMenuExtensionItems=e=>{let{node:o,editorView:r,extension:a,disabled:s,dropdownOptions:l,areAnyNewToolbarFlagsEnabled:d}=e,[c,u]=(0,n.useState)([]);(0,n.useEffect)(()=>{e();async function e(){let e=await a.extensionProvider;e&&u(await e.getExtensions())}},[a.extensionProvider]);let f=t(n).useMemo(()=>(0,i("7iE7T").nodeToJSON)(o),[o]),h=t(n).useMemo(()=>a.extensionApi?(0,i("2cmfr").getContextualToolbarItemsFromModule)(c,f,a.extensionApi):[],[c,f,a.extensionApi]);return h.length&&l?t(n).createElement(t(n).Fragment,null,h.map((e,i)=>"key"in e?t(n).createElement(p,{key:e.key,item:e,editorView:r,disabled:s,node:o,extension:a,dropdownOptions:l}):null),d&&t(n).createElement(i("4BNmH").DropdownSeparator,null)):null}}),a("3P0Cg",function(o,n){e(o.exports,"default",()=>g);var r=i("42omo");function a({pulse:e,radius:o=3,children:n}){return e?t(r).createElement(i("1lhEF").Pulse,{radius:o,pulse:e??!1},n):t(r).createElement(t(r).Fragment,null,n)}let s=e=>{let{referenceElement:o,placement:n="top-start",...a}=e;return t(r).createElement(i("lqsSp").Popper,{referenceElement:o,placement:n,strategy:"absolute"},({ref:e,style:o})=>t(r).createElement("div",{ref:e,style:o},t(r).createElement(i("91xA1").default,a)))},l={"&&":{padding:"0px"},"& > span":{margin:"0px"}},d=(e,{appearance:t="default",state:o="default",mode:n="light"})=>e[t]&&e[t][o]?e[t][o][n]:"initial",c={danger:{default:{light:"inherit",dark:"inherit"},hover:{light:"var(--ds-background-neutral-subtle-hovered, #0515240F)",dark:"var(--ds-background-neutral-subtle-hovered, #0515240F)"},active:{light:"var(--ds-background-neutral-pressed, #080F214A)",dark:"var(--ds-background-neutral-pressed, #080F214A)"}}},p={danger:{default:{light:"inherit",dark:"inherit"},hover:{light:"var(--ds-background-danger-hovered, #FFD5D2)",dark:"var(--ds-background-danger-hovered, #FFD5D2)"},active:{light:"var(--ds-background-danger-pressed, #FFB8B2)",dark:"var(--ds-background-danger-pressed, #FFB8B2)"}}},u={danger:{default:{light:"var(--ds-icon, #292A2E)",dark:"var(--ds-icon, #292A2E)"},hover:{light:"var(--ds-icon-danger, #C9372C)",dark:"var(--ds-icon-danger, #C9372C)"},active:{light:"var(--ds-icon-danger, #C9372C)",dark:"var(--ds-icon-danger, #C9372C)"}}},f={danger:{default:{light:"var(--ds-icon-subtle, #505258)",dark:"var(--ds-icon-subtle, #505258)"},hover:{light:"var(--ds-icon-danger, #C9372C)",dark:"var(--ds-icon-danger, #C9372C)"},active:{light:"var(--ds-icon-danger, #C9372C)",dark:"var(--ds-icon-danger, #C9372C)"}}},h=e=>({background:d((0,i("dh538").fg)("platform-visual-refresh-icons")?p:c,e),color:d((0,i("dh538").fg)("platform-visual-refresh-icons")?f:u,e)}),m={minWidth:"var(--ds-space-400, 32px)",padding:"0px var(--ds-space-050, 4px)"};var g=({title:e,icon:o,iconAfter:n,onClick:d,onKeyDown:c,onMouseEnter:p,onMouseLeave:u,onFocus:f,onBlur:g,onMount:T,onUnmount:E,selected:b,disabled:S,href:y,target:_,appearance:C="subtle",children:I,className:O,tooltipContent:k,tooltipStyle:v,testId:x,interactionName:N,hideTooltipOnClick:A=!0,ariaHasPopup:P,tabIndex:M,areaControls:R,ariaLabel:w,isRadioButton:L,pulse:B,spotlightConfig:D,areAnyNewToolbarFlagsEnabled:U})=>{let K=(o||n)&&!I,j=K?l:{},F=P?void 0:b,G=L?F:void 0,H=L?void 0:F,[z,V]=(0,r.useState)(null);(0,r.useEffect)(()=>(T?.(),()=>E?.()),[]);let W=D?.isSpotlightOpen?D?.onTargetClick:void 0,q=(0,r.useCallback)(e=>{W?.(),d?.(e)},[d,W]);return t(r).createElement(t(r).Fragment,null,t(r).createElement(i("3gadb").default,{content:k||(K?e:void 0),component:v,hideTooltipOnClick:A,position:"top"},t(r).createElement("div",{onMouseEnter:p,onMouseLeave:u},t(r).createElement(a,{pulse:B||D?.pulse},t(r).createElement(i("4KS7f").default,{className:O,ref:e=>V(e),theme:(e,t)=>{let{buttonStyles:o,...n}=e(t);return{buttonStyles:{...o,...j,..."danger"===C&&h({appearance:C,state:t.state,mode:t.mode}),...U?m:{}},...n}},"aria-label":w||e,"aria-pressed":H,"aria-checked":G,role:L?"radio":void 0,"aria-expanded":P?b:void 0,"aria-controls":P?R:void 0,spacing:U?"default":"compact",href:y,target:_,appearance:C,"aria-haspopup":P,iconBefore:o||void 0,iconAfter:n,onClick:q,onKeyDown:c,isSelected:b,isDisabled:S,testId:x,interactionName:N,onFocus:f,onBlur:g,tabIndex:M},I)))),D?.isSpotlightOpen&&z&&t(r).createElement(s,{referenceElement:z,...D.spotlightCardOptions}))}}),a("faH35",function(t,o){e(t.exports,"default",()=>s);let n=(0,i("9K4OG").css)({background:"var(--ds-border, #0B120E24)",width:"1px",height:"20px",margin:"0 var(--ds-space-050, 4px)",alignSelf:"center"}),r={name:"pange0",styles:"background:var(--ds-border, #0B120E24);width:1px;height:20px;align-self:center"},a={name:"1k18kha",styles:"height:40px"};var s=({fullHeight:e,areAnyNewToolbarFlagsEnabled:t})=>(0,i("9K4OG").jsx)("div",{css:[t?r:n,e&&a],className:"separator"})}),a("8LFdJ",function(e,t){let o=(0,i("cgtv4").defineMessages)({"#FFFFFF":{id:"fabric.theme.white",defaultMessage:"White"},"#B3D4FF":{id:"fabric.theme.subtle-blue",defaultMessage:"Subtle blue"},"#B3F5FF":{id:"fabric.theme.subtle-teal",defaultMessage:"Subtle teal"},"#ABF5D1":{id:"fabric.theme.subtle-green",defaultMessage:"Subtle green"},"#FFF0B3":{id:"fabric.theme.subtle-yellow",defaultMessage:"Subtle yellow"},"#FFBDAD":{id:"fabric.theme.subtle-red",defaultMessage:"Subtle red"},"#EAE6FF":{id:"fabric.theme.subtle-purple",defaultMessage:"Subtle purple"},"#97A0AF":{id:"fabric.theme.gray",defaultMessage:"Gray"},"#4C9AFF":{id:"fabric.theme.blue",defaultMessage:"Blue"},"#00B8D9":{id:"fabric.theme.teal",defaultMessage:"Teal"},"#36B37E":{id:"fabric.theme.green",defaultMessage:"Green"},"#FFC400":{id:"fabric.theme.yellow",defaultMessage:"Yellow"},"#FF5630":{id:"fabric.theme.red",defaultMessage:"Red"},"#FF991F":{id:"fabric.theme.bold-orange",defaultMessage:"Bold orange"},"#6554C0":{id:"fabric.theme.purple",defaultMessage:"Purple"},"#0747A6":{id:"fabric.theme.bold-blue",defaultMessage:"Bold blue"},"#008DA6":{id:"fabric.theme.bold-teal",defaultMessage:"Bold teal"},"#006644":{id:"fabric.theme.bold-green",defaultMessage:"Bold green"},"#BF2600":{id:"fabric.theme.bold-red",defaultMessage:"Bold red"},"#403294":{id:"fabric.theme.bold-purple",defaultMessage:"Bold purple"},"#172B4D":{id:"fabric.theme.default",defaultMessage:"Default"}}),n=(0,i("cgtv4").defineMessages)({"#FFFFFF":{id:"fabric.theme.dark-gray",defaultMessage:"Dark gray"}}),r={...o,...n},a=(0,i("cgtv4").defineMessages)({"#DEEBFF":{id:"fabric.theme.subtle-blue",defaultMessage:"Subtle blue"},"#B3D4FF":{id:"fabric.theme.blue",defaultMessage:"Blue"},"#4C9AFF":{id:"fabric.theme.bold-blue",defaultMessage:"Bold blue"},"#E6FCFF":{id:"fabric.theme.subtle-teal",defaultMessage:"Subtle teal"},"#B3F5FF":{id:"fabric.theme.teal",defaultMessage:"Teal"},"#79E2F2":{id:"fabric.theme.bold-teal",defaultMessage:"Bold teal"},"#E3FCEF":{id:"fabric.theme.subtle-green",defaultMessage:"Subtle green"},"#ABF5D1":{id:"fabric.theme.green",defaultMessage:"Green"},"#57D9A3":{id:"fabric.theme.bold-green",defaultMessage:"Bold green"},"#FFFAE6":{id:"fabric.theme.subtle-yellow",defaultMessage:"Subtle yellow"},"#FFF0B3":{id:"fabric.theme.yellow",defaultMessage:"Yellow"},"#FFC400":{id:"fabric.theme.bold-yellow",defaultMessage:"Bold yellow"},"#FFEBE6":{id:"fabric.theme.subtle-red",defaultMessage:"Subtle red"},"#FFBDAD":{id:"fabric.theme.red",defaultMessage:"Red"},"#FF8F73":{id:"fabric.theme.bold-red",defaultMessage:"Bold red"},"#EAE6FF":{id:"fabric.theme.subtle-purple",defaultMessage:"Subtle purple"},"#C0B6F2":{id:"fabric.theme.purple",defaultMessage:"Purple"},"#998DD9":{id:"fabric.theme.bold-purple",defaultMessage:"Bold purple"},"#FFFFFF":{id:"fabric.theme.white",defaultMessage:"White"},"#F4F5F7":{id:"fabric.theme.gray",defaultMessage:"Gray"},"#B3BAC5":{id:"fabric.theme.bold-gray",defaultMessage:"Bold gray"}}),s=(0,i("cgtv4").defineMessages)({"#FFFFFF":{id:"fabric.theme.subtle-gray",defaultMessage:"Subtle gray"},"#B3BAC5":{id:"fabric.theme.bold-gray",defaultMessage:"Bold gray"}}),l={...a,...s},d=(0,i("cgtv4").defineMessages)({"#7AB2FF":{id:"fabric.theme.subtle-blue",defaultMessage:"Subtle blue"},"#247FFF":{id:"fabric.theme.blue",defaultMessage:"Blue"},"#0055CC":{id:"fabric.theme.bold-blue",defaultMessage:"Bold blue"},"#003884":{id:"fabric.theme.bolder-blue",defaultMessage:"Bolder blue"},"#60C6D2":{id:"fabric.theme.subtle-teal",defaultMessage:"Subtle teal"},"#1D9AAA":{id:"fabric.theme.teal",defaultMessage:"Teal"},"#1D7F8C":{id:"fabric.theme.bold-teal",defaultMessage:"Bold teal"},"#206B74":{id:"fabric.theme.bolder-teal",defaultMessage:"Bolder teal"},"#6BE1B0":{id:"fabric.theme.subtle-green",defaultMessage:"Subtle green"},"#23A971":{id:"fabric.theme.green",defaultMessage:"Green"},"#177D52":{id:"fabric.theme.bold-green",defaultMessage:"Bold green"},"#055C3F":{id:"fabric.theme.bolder-green",defaultMessage:"Bolder green"},"#FFDB57":{id:"fabric.theme.subtle-yellow",defaultMessage:"Subtle yellow"},"#FFBE33":{id:"fabric.theme.yellow",defaultMessage:"Yellow"},"#FF9D00":{id:"fabric.theme.bold-yellow",defaultMessage:"Bold yellow"},"#946104":{id:"fabric.theme.bolder-yellow",defaultMessage:"Bolder yellow"},"#FF8F73":{id:"fabric.theme.subtle-red",defaultMessage:"Subtle red"},"#FC552C":{id:"fabric.theme.red",defaultMessage:"Red"},"#D32D03":{id:"fabric.theme.bold-red",defaultMessage:"Bold red"},"#A32000":{id:"fabric.theme.bolder-red",defaultMessage:"Bolder red"},"#FAA53D":{id:"fabric.theme.subtle-orange",defaultMessage:"Subtle orange"},"#D97008":{id:"fabric.theme.orange",defaultMessage:"Orange"},"#B65C02":{id:"fabric.theme.bold-orange",defaultMessage:"Bold orange"},"#974F0C":{id:"fabric.theme.bolder-orange",defaultMessage:"Bolder orange"},"#E774BB":{id:"fabric.theme.subtle-magenta",defaultMessage:"Subtle magenta"},"#DA62AC":{id:"fabric.theme.magenta",defaultMessage:"Magenta"},"#CD519D":{id:"fabric.theme.bold-magenta",defaultMessage:"Bold magenta"},"#943D73":{id:"fabric.theme.bolder-magenta",defaultMessage:"Bolder magenta"},"#B5A7FB":{id:"fabric.theme.subtle-purple",defaultMessage:"Subtle purple"},"#8B77EE":{id:"fabric.theme.purple",defaultMessage:"Purple"},"#5A43D0":{id:"fabric.theme.bold-purple",defaultMessage:"Bold purple"},"#44368B":{id:"fabric.theme.bolder-purple",defaultMessage:"Bolder purple"},"#8993A5":{id:"fabric.theme.subtle-gray",defaultMessage:"Subtle gray"},"#8590A2":{id:"fabric.theme.gray",defaultMessage:"Gray"},"#758195":{id:"fabric.theme.bold-gray",defaultMessage:"Bold gray"},"#44546F":{id:"fabric.theme.bolder-gray",defaultMessage:"Bolder gray"}}),c={...d},p=(0,i("cgtv4").defineMessages)({"#091E4224":{id:"fabric.theme.subtle-gray",defaultMessage:"Subtle gray"},"#758195":{id:"fabric.theme.gray",defaultMessage:"Gray"},"#172B4D":{id:"fabric.theme.bold-gray",defaultMessage:"Bold gray"}}),u={...p};e.exports.textPaletteTooltipMessages={light:o,dark:r},e.exports.backgroundPaletteTooltipMessages={light:a,dark:l},e.exports.chartsColorPaletteTooltipMessages={light:d,dark:c},e.exports.borderPaletteTooltipMessages={light:p,dark:u}}),a("lAt6Q",function(o,n){e(o.exports,"default",()=>f);var r=i("42omo"),a=i("iu6m9");let s={name:"bjn8wh",styles:"position:relative"},l=(0,i("ecnYn").xcss)({marginTop:"space.0",marginBottom:"space.0",marginLeft:"space.negative.050",marginRight:"space.negative.050"}),d=(0,i("ecnYn").xcss)({marginTop:"space.negative.025",marginRight:"space.negative.050"}),c=(0,i("9K4OG").css)({button:{"&::after":{border:"none"},"&:hover":{backgroundColor:"var(--ds-background-selected, #E9F2FE)"}}}),p=()=>(0,i("9K4OG").css)({borderRadius:"var(--ds-radius-small, 3px)",backgroundColor:"var(--ds-surface-overlay, #FFFFFF)",boxShadow:"var(--ds-shadow-overlay, 0px 8px 12px #1E1F2126, 0px 0px 1px #1E1F214f)",padding:"var(--ds-space-100, 8px) 0px"}),u=(0,i("efG2U").default)(i("hxEux").default);var f=(0,i("ggbZE").default)({source:"ConfigPanel"})((0,i("1DWH0").default)()(e=>{let o=t(r).useRef(null),[n,f]=t(r).useState(!1),[h,m]=t(r).useState(!1),[g,T]=t(r).useState(!1),{formatMessage:E}=(0,i("8C5kA").default)(),b=()=>{f(!n),n||(T(!1),m(!1))};t(r).useEffect(()=>{e.setDisableParentScroll&&e.setDisableParentScroll(n)},[n]);let S=()=>{o.current?.focus()},y=t(r).useCallback(()=>{T(!1),m(!1),f(!1),S()},[]),_=t(r).useCallback(e=>(m(!0),e),[]),{onChange:C,createAnalyticsEvent:I,colorPalette:O,placement:k,skipFocusButtonAfterPick:v}=e,x=t(r).useCallback((e,t)=>{if(T(!1),f(!1),m(!1),C){I&&I({action:i("d925B").ACTION.UPDATED,actionSubject:i("d925B").ACTION_SUBJECT.PICKER,actionSubjectId:i("d925B").ACTION_SUBJECT_ID.PICKER_COLOR,attributes:{color:e,label:t,placement:k},eventType:i("d925B").EVENT_TYPE.TRACK}).fire(i("ajtqX").editorAnalyticsChannel);let o=O.find(t=>t.value===e);o&&C(o)}v||S()},[O,C,I,k,v]),N=e.title||"",A=e.currentColor&&e.hexToPaletteColor?e.hexToPaletteColor(e.currentColor):e.currentColor;return(0,i("9K4OG").jsx)("div",{css:s},(0,i("9K4OG").jsx)(i("3gadb").default,{content:N,position:"top"},(0,i("dh538").fg)("platform-visual-refresh-icons")?(0,i("9K4OG").jsx)("div",{css:c},(0,i("9K4OG").jsx)(i("ccHMk").default,{appearance:"subtle",ref:o,"aria-label":N,"aria-expanded":e.isAriaExpanded?n:void 0,spacing:(0,a.editorExperiment)("platform_editor_controls","variant1")?"default":"compact",onClick:b,onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),b(),T(!0))},"data-selected-color":e.currentColor,isSelected:n},(0,i("9K4OG").jsx)(i("dcJ7R").default,{alignBlock:"start"},(0,i("9K4OG").jsx)("span",{css:()=>(0,i("9K4OG").css)({height:`${e.size?.height?"inherit":""}`,"&:before":{display:"flex",justifyContent:"center",alignItems:"center",alignSelf:"center",content:"''",border:`var(--ds-border-width, 1px) solid ${i("lhtyR").DEFAULT_BORDER_COLOR}`,borderRadius:"var(--ds-radius-small, 3px)",backgroundColor:A||"transparent",width:e.size?.width||"14px",height:e.size?.height||"14px",marginTop:"var(--ds-space-025, 2px)"}})}),(0,i("9K4OG").jsx)(i("6f0Oj").default,{xcss:d},(0,i("9K4OG").jsx)(t(i("ghftu")),{color:"currentColor",spacing:"spacious",label:"color-picker-chevron-down",size:"small"}))))):(0,i("9K4OG").jsx)(i("eEA8O").default,{appearance:"subtle",ref:o,"aria-label":N,"aria-expanded":e.isAriaExpanded?n:void 0,spacing:"compact",onClick:b,onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),b(),T(!0))},css:()=>(0,i("9K4OG").css)({padding:"var(--ds-space-075, 6px) 10px",backgroundColor:"var(--ds-background-neutral-subtle, transparent)",height:`${e.size?.height?"inherit":""}`,"&:before":{display:"flex",justifyContent:"center",alignItems:"center",alignSelf:"center",content:"''",border:`var(--ds-border-width, 1px) solid ${i("lhtyR").DEFAULT_BORDER_COLOR}`,borderRadius:"var(--ds-radius-small, 3px)",backgroundColor:A||"transparent",width:e.size?.width||"14px",height:e.size?.height||"14px",padding:0,margin:"0px var(--ds-space-025, 2px)"},"&:hover":{background:"var(--ds-background-neutral-subtle-hovered, #0515240F)"}}),iconAfter:(0,i("9K4OG").jsx)(i("6f0Oj").default,{xcss:l},(0,i("9K4OG").jsx)(t(i("ghftu")),{color:"currentColor",spacing:"spacious",label:"color-picker-chevron-down",size:"small"})),"data-selected-color":e.currentColor})),(()=>{if(!n||!o.current)return;let t=e.currentColor||null,{selectedRowIndex:r,selectedColumnIndex:a}=(0,i("ahQKW").getSelectedRowAndColumnFromPalette)(e.colorPalette,t,e.cols);return(0,i("9K4OG").jsx)(i("jwWgu").default,{target:o.current,fitHeight:350,fitWidth:350,offset:[0,10],alignX:e.alignX,mountTo:e.setDisableParentScroll?e.mountPoint:void 0,absoluteOffset:e.absoluteOffset,zIndex:e.setDisableParentScroll?600:void 0,ariaLabel:(0,i("dh538").fg)("editor_a11y_aria_label_removal_popup")?E(i("b2CWF").colorPickerButtonMessages.colorPickerMenuLabel):"Color picker popup",onPositionCalculated:_},(0,i("9K4OG").jsx)("div",{css:p,"data-test-id":"color-picker-menu"},(0,i("9K4OG").jsx)(i("9Z3I5").ArrowKeyNavigationProvider,{type:i("5v8Ta").ArrowKeyNavigationType.COLOR,selectedRowIndex:r,selectedColumnIndex:a,closeOnTab:!0,handleClose:()=>f(!1),isOpenedByKeyboard:g,isPopupPositioned:h,ignoreEscapeKey:e.returnEscToButton},(0,i("9K4OG").jsx)(u,{cols:e.cols,selectedColor:t,onClick:x,handleClickOutside:b,handleEscapeKeydown:y,paletteOptions:{palette:e.colorPalette,hexToPaletteColor:e.hexToPaletteColor,paletteColorTooltipMessages:e.paletteColorTooltipMessages}}))))})())}))}),a("b2CWF",function(e,t){let o=(0,i("cgtv4").defineMessages)({colorPickerMenuLabel:{id:"fabric.editor.colorPicker.menuLabel",defaultMessage:"Color picker menu"}});e.exports.colorPickerButtonMessages=o}),a("hxEux",function(o,n){e(o.exports,"default",()=>p);var r=i("42omo"),a=i("lcPXp");i("42omo");let s=(0,i("9K4OG").css)({height:"26px",width:"26px",background:"var(--ds-background-neutral, #0515240F)",padding:0,borderRadius:"var(--ds-radius-small, 4px)",border:"1px solid var(--ds-border-inverse, #FFFFFF)",cursor:"pointer",display:"block"}),l=(0,i("9K4OG").css)({border:"1px solid transparent",fontSize:0,display:"flex",alignItems:"center",padding:"var(--ds-space-025, 2px)",borderRadius:"var(--ds-radius-medium, 6px)","&:focus-within, &:focus, &:hover":{borderColor:"var(--ds-border, #0B120E24) !important"}});var d=e=>{let{autoFocus:o,tabIndex:n,value:r,label:a,isSelected:d,borderColor:c,checkMarkColor:p="#FFFFFF",hexToPaletteColor:u,decorator:f}=e,h=u?u(r):r;return(0,i("9K4OG").jsx)(i("3gadb").default,{content:a},(0,i("9K4OG").jsx)("span",{css:l},(0,i("9K4OG").jsx)("button",{type:"button",css:s,"aria-label":a,role:"radio","aria-checked":d,onClick:t=>{let{onClick:o,value:n,label:r}=e;t.preventDefault(),o(n,r)},onKeyDown:t=>{let{onKeyDown:o,value:n,label:r}=e;o&&(t.preventDefault(),o(n,r,t))},onMouseDown:e=>{e.preventDefault()},tabIndex:n,className:`${d?"selected":""}`,style:{backgroundColor:h||"var(--ds-background-input, #FFFFFF)",border:`var(--ds-border-width, 1px) solid ${c}`},autoFocus:o},!f&&d&&(0,i("9K4OG").jsx)(t(i("cvXh8")),{LEGACY_primaryColor:p,label:""}),f)))};let c=(0,i("9K4OG").css)({padding:"0 var(--ds-space-100, 8px)",display:"flex"});var p=(0,i("gmMgo").default)(e=>{let{cols:o=i("ahQKW").DEFAULT_COLOR_PICKER_COLUMNS,onClick:n,onKeyDown:s,selectedColor:l,className:p,intl:{formatMessage:u},paletteOptions:f}=e,{palette:h,hexToPaletteColor:m,paletteColorTooltipMessages:g}=f,{colorMode:T}=(0,i("cOrQJ").default)(),E=!!m,b=t(r).useMemo(()=>(0,i("ahQKW").getColorsPerRowFromPalette)(h,o),[h,o]);return(0,i("9K4OG").jsx)(t(r).Fragment,null,b.map(e=>(0,i("9K4OG").jsx)("div",{css:c,className:p,key:`row-first-color-${e[0].value}`,role:"radiogroup"},e.map(({value:e,label:t,border:o,message:r,decorator:c})=>(g&&("dark"===T&&(r=(0,i("hMewq").default)(g.dark,e.toUpperCase())),"light"===T&&(r=(0,i("hMewq").default)(g.light,e.toUpperCase()))),(0,i("9K4OG").jsx)(d,{key:e,value:e,borderColor:o,label:r?u(r):t,onClick:n,onKeyDown:s,isSelected:e===l,checkMarkColor:function(e,t){let o=(0,i("ahQKW").getTokenCSSVariableValue)(e)||e,n=["#FFFFFF","#42526E"].sort((e,t)=>a.default.difference(t,o)-a.default.difference(e,o))[0];return t?"#FFFFFF"===n?"var(--ds-icon-inverse, #FFFFFF)":"var(--ds-icon, #292A2E)":n}(e,E),hexToPaletteColor:m,decorator:c}))))))})}),a("hMewq",function(t,o){e(t.exports,"default",()=>n);function n(e,t){let o=e[t];return o||console.warn(`Text color palette does not have an internationalization message for color ${t.toUpperCase()}.
You must add a message description to properly translate this color.
Using current label as default message.
This could have happen when someone changed the 'colorPalette' from 'adf-schema' without updating this file.
`),o}}),a("ahQKW",function(e,t){function o(e,t=7){return e.reduce((e,o,n)=>{let r=Math.floor(n/t);return e[r]=e[r]||[],e[r].push(o),e},[])}e.exports.DEFAULT_COLOR_PICKER_COLUMNS=7,e.exports.getColorsPerRowFromPalette=o,e.exports.getSelectedRowAndColumnFromPalette=function(e,t,n=7){var r;let i,a;return r=o(e,n),i=-1,a=-1,r.forEach((e,o)=>{e.forEach(({value:e},n)=>{e===t&&(i=o,a=n)})}),{selectedRowIndex:i,selectedColumnIndex:a}},e.exports.getTokenCSSVariableValue=e=>{let t=e.match(/var\(([^,\)]+)(,.*)?\)/);if(t){let e=t[1].trim(),o=t[2]?t[2].replace(",","").trim():"";return"undefined"==typeof document?o:window.getComputedStyle(document.documentElement).getPropertyValue(e).trim()||o}return""}}),a("lhtyR",function(e,t){var o=i("lcPXp");let n=function(e,t){let{r:n,g:r,b:i}=o.default.convert(e).rgb;return`rgba(${n}, ${r}, ${i}, 0.12)`}("#172B4D",0);e.exports.DEFAULT_BORDER_COLOR=n}),a("2dkHo",function(e,o){var n=i("42omo"),r=i("5Gwdo");let a=t(n).memo(function(e){let t=(0,n.useContext)(r.KeyDownHandlerContext),o=e.arrowKeyNavigationProviderOptions;return e.arrowKeyNavigationProviderOptions.type===i("5v8Ta").ArrowKeyNavigationType.MENU&&(o={...e.arrowKeyNavigationProviderOptions,keyDownHandlerContext:t}),(0,i("9K4OG").jsx)(i("6qITU").default,{...e,arrowKeyNavigationProviderOptions:o})});e.exports.DropdownContainer=a}),a("6qITU",function(e,o){var n=i("42omo");class r extends n.PureComponent{componentDidUpdate(e){if(!e.isOpen&&this.props.isOpen&&this.state.target){let e=(0,i("7YjFd").calculatePlacement)(this.state.target,this.props.boundariesElement||document.body,this.props.fitWidth,this.props.fitHeight,this.props.alignX,this.props.alignY,this.props.forcePlacement);this.setState({popupPlacement:e})}}renderDropdown(){let{target:e,popupPlacement:o}=this.state,{children:r,mountTo:a,boundariesElement:s,scrollableElement:l,onOpenChange:d,fitHeight:c,fitWidth:p,zIndex:u,arrowKeyNavigationProviderOptions:f,dropdownListId:h,alignDropdownWithParentElement:m,target:g,forcePlacement:T,alignX:E,alignY:b,offset:S,shouldFitContainer:y=!0}=this.props;return t(n).createElement(i("jwWgu").default,{target:g??(m?e?.closest("[data-testid='editor-floating-toolbar']"):e),mountTo:a,boundariesElement:s,scrollableElement:l,onPlacementChanged:T?void 0:this.updatePopupPlacement,fitHeight:c,fitWidth:p,zIndex:u,allowOutOfBounds:m,alignX:E,alignY:b,forcePlacement:T,offset:S},t(n).createElement(i("9Z3I5").ArrowKeyNavigationProvider,{...f,closeOnTab:!0,handleClose:this.handleCloseAndFocus},t(n).createElement("div",{style:{height:0,minWidth:p||0}},t(n).createElement(i("9CaSN").default,{isOpen:!0,onOpenChange:d,position:o.join(" "),shouldFitContainer:y,id:h},r))))}render(){let{trigger:e,isOpen:o}=this.props;return e?t(n).createElement(i("efG2U").OutsideClickTargetRefContext.Consumer,null,r=>t(n).createElement(t(n).Fragment,null,t(n).createElement("div",{ref:this.handleRef(r)},e),o?this.renderDropdown():null)):t(n).createElement(t(n).Fragment,null,o?this.renderDropdown():null)}constructor(e){super(e),this.handleRef=e=>t=>{e(t),this.setState({target:t||void 0})},this.updatePopupPlacement=e=>{this.setState({popupPlacement:e})},this.handleCloseAndFocus=e=>{this.state.target?.querySelector("button")?.focus(),this.handleClose(e)},this.handleClose=e=>{this.props.onOpenChange&&this.props.onOpenChange({isOpen:!1,event:e})},this.state={popupPlacement:["bottom","left"]}}}let a=(0,i("efG2U").default)(r);e.exports.default=a}),a("sxTNo",function(e,t){e.exports.getParentOfTypeCount=e=>t=>{let o=0;for(let n=t.depth;n>0;n--)t.node(n).type===e&&o++;return o},e.exports.getPositionAfterTopParentNodeOfType=e=>t=>{for(let o=1;o<=t.depth;o++)if(t.node(o).type===e)return t.after(o)},e.exports.isSelectionTableNestedInTable=e=>{let t=(0,i("id9O1").findTable)(e.selection);if(!t)return!1;let o=e.doc.resolve(t.pos).parent,n=e.schema.nodes;return[n.tableHeader,n.tableCell].includes(o.type)},e.exports.isNestedTablesSupported=e=>{let{table:t,tableCell:o,tableHeader:n}=e.nodes;if(!t||!o||!n)return!1;let r=o.contentMatch.matchType(t)?.validEnd===!0,i=n.contentMatch.matchType(t)?.validEnd===!0;return r||i}}),a("gATpw",function(e,o){var n,r,a=i("l998X");i("42omo");var s=((n={}).SHOW_INSERT_TOOLBAR="SHOW_INSERT_TOOLBAR",n.HIDE_TOOLBAR="HIDE_TOOLBAR",n.SELECTION_CHANGE="SELECTION_CHANGE",n.INSERT_LINK_TOOLBAR="INSERT",n.EDIT_INSERTED_TOOLBAR="EDIT_INSERTED_TOOLBAR",n.SET_CONFIGURE_BUTTON_TARGET_POS="SET_CONFIGURE_BUTTON_TARGET_POS",n.SET_CONFIGURE_DROPDOWN_OPEN="SET_CONFIGURE_DROPDOWN_OPEN",n),l=((r={}).EDIT_LINK_TOOLBAR="EDIT",r.INSERT_LINK_TOOLBAR="INSERT",r.EDIT_INSERTED_TOOLBAR="EDIT_INSERTED",r),d=i("3pLGZ"),c=i("iu6m9"),p=i("dQl1W");let u=(e,t)=>{if(e){if(e.type===l.EDIT_LINK_TOOLBAR||e.type===l.EDIT_INSERTED_TOOLBAR){let{pos:o,deleted:n}=t.mapping.mapResult(e.pos,1),r=t.doc.nodeAt(o);if(!n&&r.type.schema.marks.link.isInSet(r.marks))return r===e.node&&o===e.pos?e:{...e,pos:o,node:r}}else if(e.type===l.INSERT_LINK_TOOLBAR)return{...e,from:t.mapping.map(e.from),to:t.mapping.map(e.to)}}},f=(e,t,o)=>{if(!e)switch(t){case s.SHOW_INSERT_TOOLBAR:{let{from:e,to:t}=o.selection;if((0,i("b0F8r").canLinkBeCreatedInRange)(e,t)(o))return{type:l.INSERT_LINK_TOOLBAR,from:e,to:t};return}case s.SELECTION_CHANGE:let n=(0,i("i9vfM").getActiveLinkMark)(o);if(n)return{...n,type:l.EDIT_LINK_TOOLBAR};return;default:return}if(e.type===l.EDIT_LINK_TOOLBAR)switch(t){case s.EDIT_INSERTED_TOOLBAR:{let t=(0,i("i9vfM").getActiveLinkMark)(o);if(t){if(t.pos===e.pos&&t.node===e.node)return{...e,type:l.EDIT_INSERTED_TOOLBAR};return{...t,type:l.EDIT_INSERTED_TOOLBAR}}return}case s.SELECTION_CHANGE:let r=(0,i("i9vfM").getActiveLinkMark)(o);if(r){if(r.pos===e.pos&&r.node===e.node)return e;return{...r,type:l.EDIT_LINK_TOOLBAR}}return;case s.HIDE_TOOLBAR:return;default:return e}if(e.type===l.INSERT_LINK_TOOLBAR)switch(t){case s.SELECTION_CHANGE:case s.HIDE_TOOLBAR:break;default:return e}},h=e=>{let t=e.content();if(0!==t.size&&1===t.content.childCount&&t.content.firstChild&&e instanceof i("ks2lK").TextSelection)return t.content.firstChild.textContent},m=new(0,i("ks2lK").PluginKey)("hyperlinkPlugin"),g=(e,o,n,r,a,l)=>new(0,i("1S4f7").SafePlugin)({state:{init(e,t){let o=(0,i("b0F8r").canLinkBeCreatedInRange)(t.selection.from,t.selection.to)(t);return{activeText:h(t.selection),canInsertLink:o,timesViewed:0,activeLinkMark:f(void 0,s.SELECTION_CHANGE,t),editorAppearance:n}},apply(o,r,a,l){let d=r,c=o.getMeta(m)&&o.getMeta(m).type,g=o.getMeta(m)&&o.getMeta(m).inputMethod;if(o.docChanged&&(d={activeText:d.activeText,canInsertLink:(0,i("b0F8r").canLinkBeCreatedInRange)(l.selection.from,l.selection.to)(l),timesViewed:d.timesViewed,inputMethod:g,activeLinkMark:u(d.activeLinkMark,o),editorAppearance:n}),c){let e=[s.SHOW_INSERT_TOOLBAR,s.EDIT_INSERTED_TOOLBAR].includes(c)?{timesViewed:++d.timesViewed,searchSessionId:t(p)()}:{timesViewed:d.timesViewed,searchSessionId:d.searchSessionId};d={activeText:d.activeText,canInsertLink:d.canInsertLink,inputMethod:g,activeLinkMark:f(d.activeLinkMark,c,l),editorAppearance:n,...e}}let T=a.selection.from!==l.selection.from||a.selection.to!==l.selection.to;return o.selectionSet&&T&&(d={activeText:h(l.selection),canInsertLink:(0,i("b0F8r").canLinkBeCreatedInRange)(l.selection.from,l.selection.to)(l),activeLinkMark:f(d.activeLinkMark,s.SELECTION_CHANGE,l),timesViewed:d.timesViewed,searchSessionId:d.searchSessionId,inputMethod:g,editorAppearance:n}),(0,i("l9G9n").shallowEqual)(d,r)||e(m,d),d}},key:m,props:{decorations:()=>i("ftzrq").DecorationSet.empty,handleDOMEvents:{mouseup:(e,t)=>!!T(t)&&(t.preventDefault(),!0),mousedown:(e,t)=>{if(!t.shiftKey||!T(t))return!1;let{state:o}=e,{selection:{$anchor:n}}=o,r=e.posAtCoords({left:t.clientX,top:t.clientY});if(r?.pos!=null&&r.pos!==n.pos){let t=o.tr.setSelection(i("ks2lK").TextSelection.create(o.doc,n.pos,r.pos));return e.dispatch(t),!0}return!1}}}});function T(e){return e?.target instanceof HTMLElement&&"A"===e.target.tagName}function E(e,t,o,n,r){return({tr:a})=>{if(!(0,i("i9vfM").isTextAtPos)(t)({tr:a}))return null;let l=a.doc.resolve(t),d=a.doc.nodeAt(t),c=a.doc.type.schema.marks.link,p=c.isInSet(d.marks),u=(0,i("b0F8r").normalizeUrl)(e);if(p&&p.attrs.href===u)return null;let f=n&&t!==n?n:t-l.textOffset+d.nodeSize;return a.removeMark(t,f,c),e.trim()?a.addMark(t,f,c.create({...p&&p.attrs||{},href:u})):o?.attachAnalyticsEvent((0,i("iGbqR").unlinkPayload)(i("d925B").ACTION_SUBJECT_ID.HYPERLINK))(a),r||a.setMeta(m,{type:s.HIDE_TOOLBAR}),a}}function b(e,t,o,n){return({tr:r})=>{let a=r.doc.resolve(o),l=r.doc.nodeAt(o);if(!l)return null;let d=(0,i("b0F8r").normalizeUrl)(e),c=r.doc.type.schema.marks.link.isInSet(l.marks),p=r.doc.type.schema.marks.link,u=n&&o!==n?n:o-a.textOffset+l.nodeSize;if(!d&&t)r.removeMark(o,u,p),r.insertText(t,o,u);else{if(!d)return null;r.insertText(t,o,u);let e={...c&&c.attrs||{},href:d};r.addMark(o,o+t.length,p.create(e)),r.setMeta(m,{type:s.HIDE_TOOLBAR})}return r}}function S(e,t,o,n){return(0,i("gmyMu").editorCommandToPMCommand)(b(e,t,o,n))}function y(e,t,o,n,r,a,l,d="inline",c){return(p,u)=>{let f=p.schema.marks.link,{tr:h}=p;if(o.trim()){let g=(0,i("b0F8r").normalizeUrl)(o),T=m.getState(p)?.activeText,E=t,b=r||n||o;if(r&&r===T||(h.insertText(b,e,t),E=h.mapping.map(e)===e+b.length+2?e+b.length+1:e+b.length),h.addMark(e,E,f.create({href:g})),h.setSelection(i("ks2lK").Selection.near(h.doc.resolve(E))),r&&r!==o)(0,i("doRn8").addLinkMetadata)(p.selection,h,{action:i("d925B").ACTION.INSERTED,inputMethod:a,sourceEvent:l});else{let e=c?.queueCardsFromChangedTr;e?e?.(p,h,a,i("d925B").ACTION.INSERTED,!1,l,d):(0,i("doRn8").addLinkMetadata)(p.selection,h,{action:i("d925B").ACTION.INSERTED,inputMethod:a,sourceEvent:l})}return h.setMeta(m,{type:s.HIDE_TOOLBAR}),u&&u(h),!0}return h.setMeta(m,{type:s.HIDE_TOOLBAR}),u&&u(h),!1}}let _=(e,t,o,n,r,a,s,l,d=!1,c,p)=>!d||s||l?(0,i("dAtrv").withAnalytics)(a,(0,i("b0F8r").getLinkCreationAnalyticsEvent)(e,n))(y(t,o,n,s,l,e,c,p,r)):y(t,o,n,s,l,e,c,p,r);function C(e){return(t,o)=>{if(o){let{tr:n}=t;n.setMeta(m,{type:s.EDIT_INSERTED_TOOLBAR,inputMethod:i("d925B").INPUT_METHOD.FLOATING_TB}),e?.attachAnalyticsEvent((0,i("iGbqR").buildEditLinkPayload)(i("d925B").ACTION_SUBJECT_ID.HYPERLINK))(n),o(n)}return!0}}function I(e,t){return({tr:o})=>{let n=o.setMeta(m,{type:s.SHOW_INSERT_TOOLBAR,inputMethod:e});return t?.attachAnalyticsEvent({action:i("d925B").ACTION.INVOKED,actionSubject:i("d925B").ACTION_SUBJECT.TYPEAHEAD,actionSubjectId:i("d925B").ACTION_SUBJECT_ID.TYPEAHEAD_LINK,attributes:{inputMethod:e},eventType:i("d925B").EVENT_TYPE.UI})(n),n}}function O(){return function(e,t){return t&&t(k(e.tr)),!0}}let k=e=>e.setMeta(m,{type:s.HIDE_TOOLBAR}),v=e=>(t,o)=>{let{tr:n}=t;return k(n),e?.hideLinkToolbar?.(n),!!o&&(o(n),!0)},x=(e,t)=>!!t&&(O()(e,t),!0),N=new(0,i("ks2lK").PluginKey)("fakeCursorToolbarPlugin"),A=e=>{let t=document.createElement("div");return t.className="ProseMirror-fake-text-cursor",i("ftzrq").Decoration.widget(e,t,{key:"hyperlink-text-cursor"})},P=(e,t)=>i("ftzrq").Decoration.inline(e,t,{class:"ProseMirror-fake-text-selection"}),M=e=>{let t=m.getState(e);if(t&&t.activeLinkMark&&t.activeLinkMark.type===l.INSERT_LINK_TOOLBAR)return t.activeLinkMark},R=new(0,i("1S4f7").SafePlugin)({key:N,state:{init:()=>i("ftzrq").DecorationSet.empty,apply(e,t,o,n){let r=M(o),a=M(n);if(r&&a){let{from:o,to:n}=a,i=e.mapping.map(r.from),s=e.mapping.map(r.to);if(i===o&&s===n)return t.map(e.mapping,e.doc)}if(a){let{from:t,to:o}=a;return i("ftzrq").DecorationSet.create(e.doc,[t===o?A(t):P(t,o)])}return i("ftzrq").DecorationSet.empty}},props:{decorations:e=>N.getState(e)}}),w=new(0,i("ks2lK").PluginKey)("hyperlinkToolbarItems"),L=e=>new(0,i("1S4f7").SafePlugin)({key:w,state:{init:(t,o)=>e,apply:(e,t)=>{let o=e.getMeta(w);return o||t}}}),B=e=>function(t,o){let n=w.getState(t)?.skipAnalytics??!1,r=t.selection.$from.nodeBefore;if(!r||!r.isText||!r.text)return!1;let a=r.text.split(" "),s=a[a.length-1],l=(0,i("81OAa").getLinkMatch)(s);if(l){if(!(0,i("azNN5").shouldAutoLinkifyMatch)(l))return!1;let a=l.raw,s=t.selection.$from.pos-a.length,d=t.selection.$from.pos;if(t.doc.rangeHasMark(s,d,t.schema.marks.link))return!1;let c=l.url,p=t.schema.mark("link",{href:c}),u=(0,i("b0F8r").findFilepaths)(r.text,s-(r.text.length-a.length));if((0,i("b0F8r").isLinkInMatches)(s,u))return!1;let f=t.tr.addMark(s,d,p);o&&((0,i("doRn8").addLinkMetadata)(t.selection,f,{inputMethod:i("d925B").INPUT_METHOD.AUTO_DETECT}),n||e?.attachAnalyticsEvent((0,i("b0F8r").getLinkCreationAnalyticsEvent)(i("d925B").INPUT_METHOD.AUTO_DETECT,c))(f),o(f))}return!1};i("42omo"),i("42omo");let D=({api:e})=>{let{formatMessage:o}=(0,i("8C5kA").default)(),n=(0,i("eiA8Z").useSharedPluginStateWithSelector)(e,["hyperlink"],e=>e?.hyperlinkState?.canInsertLink??!0);return(0,a.jsx)(i("iIVVb").ToolbarTooltip,{content:(0,a.jsx)(i("hgeg8").ToolTipContent,{description:o(i("4HWgE").toolbarInsertBlockMessages.link),keymap:i("hgeg8").addLink}),children:(0,a.jsx)(i("7ERUE").ToolbarButton,{iconBefore:(0,a.jsx)(t(i("1bY7o")),{label:o(i("4HWgE").toolbarInsertBlockMessages.link),size:"small"}),onClick:()=>{e?.core.actions.execute(e?.hyperlink.commands.showLinkToolbar(i("d925B").INPUT_METHOD.FLOATING_TB))},testId:"editor-toolbar__link-button",isDisabled:!n})})},U=e=>[{type:i("cPCP8").LINKING_GROUP.type,key:i("cPCP8").LINKING_GROUP.key,parents:[{type:i("cPCP8").LINKING_SECTION.type,key:i("cPCP8").LINKING_SECTION.key,rank:i("4Chin").LINKING_SECTION_RANK[i("cPCP8").LINKING_GROUP.key]}]},{type:i("cPCP8").LINKING_BUTTON.type,key:i("cPCP8").LINKING_BUTTON.key,parents:[{type:i("cPCP8").LINKING_GROUP.type,key:i("cPCP8").LINKING_GROUP.key,rank:i("4Chin").LINKING_GROUP_RANK[i("cPCP8").LINKING_BUTTON.key]}],component:()=>(0,a.jsx)(D,{api:e})}];var K=i("42omo"),j=i("8m4tT");function F(e){return void 0!==e.pos}let G=(e,t,o,n)=>{if(e){let{tr:r}=t;n?.attachAnalyticsEvent(o(i("d925B").ACTION_SUBJECT_ID.HYPERLINK))(r),e(r)}},H=e=>(t,o)=>(G(o,t,i("iGbqR").buildVisitedLinkPayload,e),!0),z=e=>({timesViewed:e.hyperlinkState?.timesViewed,inputMethod:e.hyperlinkState?.inputMethod,searchSessionId:e.hyperlinkState?.searchSessionId});function V({linkPickerOptions:e={},onSubmit:t,displayText:o,displayUrl:n,providerFactory:r,view:s,onCancel:l,invokeMethod:d,lpLinkPicker:c,onClose:p,onEscapeCallback:u,onClickAwayCallback:f,pluginInjectionApi:h}){let{timesViewed:m,inputMethod:g,searchSessionId:T}=(0,i("eiA8Z").useSharedPluginStateWithSelector)(h,["hyperlink"],z),E=(0,K.useRef)((0,i("91bcx").isOfflineMode)(h?.connectivity?.sharedState.currentState()?.mode));return(0,a.jsx)(i("6YpFi").HyperlinkAddToolbar,{linkPickerOptions:e,onSubmit:t,displayText:o,displayUrl:n,providerFactory:r,view:s,onCancel:l,invokeMethod:d,lpLinkPicker:c,onClose:p,onEscapeCallback:u,onClickAwayCallback:f,timesViewed:m,inputMethod:g,searchSessionId:T,isOffline:E.current})}let W=(e,o)=>(n,r,s)=>{if(e.disableFloatingToolbar)return;let l=!!o?.toolbar,d=m.getState(n),p=d?.activeLinkMark;if(n.selection instanceof i("ks2lK").TextSelection&&n.selection.to!==n.selection.from&&p?.type==="EDIT"&&(0,c.editorExperiment)("platform_editor_controls","variant1"))return;let{formatMessage:u}=r,f=o?.card?.actions,h=o?.analytics?.actions,g=e.lpLinkPicker??!0;if(p){let m={title:"Hyperlink floating controls",nodeType:[n.schema.nodes.text,n.schema.nodes.paragraph,n.schema.nodes.heading,n.schema.nodes.taskItem,n.schema.nodes.decisionItem,n.schema.nodes.caption].filter(e=>!!e),align:"left",className:p.type.match("INSERT|EDIT_INSERTED")?"hyperlink-floating-toolbar":"",getDomRef:p&&("EDIT_INSERTED"===p.type||"EDIT"===p.type)&&(0,c.editorExperiment)("platform_editor_controls","variant1")?e=>{let t=(0,j.findDomRefAtPos)(p.pos,e.domAtPos.bind(e));return t instanceof HTMLElement?t:void 0}:void 0};switch(p.type){case"EDIT":{let{pos:e,node:a}=p,s=a.marks.filter(e=>e.type===n.schema.marks.link),l=s[0]&&s[0].attrs.href,d=(0,i("81OAa").isSafeUrl)(l),c=u(d?i("fpEzC").linkMessages.openLink:i("ckqYV").linkToolbarMessages.unableToOpenLink),f=u(i("ckqYV").linkToolbarMessages.unlink),g=u(i("ckqYV").linkToolbarMessages.editLink),T={url:l,title:""};p.node.text&&(T.title=p.node.text);let b=(0,i("iHzeA").areToolbarFlagsEnabled)(!!o?.toolbar),S=o?.card?.actions,y=S?.getStartingToolbarItems(r,l,C(h),T,b?n:void 0)??[{id:"editor.link.edit",testId:"editor.link.edit",type:"button",onClick:C(h),title:g,showTitle:!b,metadata:T,icon:b?t(i("1Zr9M")):void 0},{type:"separator"}],_={id:"editor.link.openLink",testId:"editor.link.openLink",type:"button",disabled:!d,target:"_blank",href:d?l:void 0,onClick:H(h),title:c,icon:t(i("8tdj3")),className:"hyperlink-open-link",metadata:T,tabIndex:null},I={id:"editor.link.unlink",testId:"editor.link.unlink",type:"button",onClick:(0,i("doRn8").commandWithMetadata)((0,i("doRn8").commandWithMetadata)((0,i("gmyMu").editorCommandToPMCommand)(E("",e,h,void 0,void 0)),{action:i("d925B").ACTION.UNLINK}),{inputMethod:i("d925B").INPUT_METHOD.FLOATING_TB}),title:f,icon:t(i("dZMVn")),tabIndex:null},O=[...y,...b?[I,{type:"separator",fullHeight:!0},_,{type:"separator",fullHeight:!0}]:[_,{type:"separator"},I,{type:"separator"}],{type:"copy-button",items:[{state:n,formatMessage:u,markType:n.schema.marks.link}]},...S?.getEndingToolbarItems(r,l)??[]];return{...m,height:32,width:250,items:O,scrollable:!0}}case"EDIT_INSERTED":case"INSERT":{let t;if(F(p)&&p.node){let e=p.node.marks.filter(e=>e.type===n.schema.marks.link);t=e[0]&&e[0].attrs.href}let r=F(p)?function(e,t){if(!e.node)return;let o=(0,i("b0F8r").normalizeUrl)(e.node.text),n=e.node.marks.find(e=>e.type===t.schema.marks.link);if(o!==(n&&n.attrs.href))return e.node.text}(p,n):d.activeText,c=g?i("9fPrY").LINKPICKER_HEIGHT_IN_PX:i("9fPrY").RECENT_SEARCH_HEIGHT_IN_PX,u=!g&&(0,i("dh538").fg)("platform_editor_link_picker_width_fix")?void 0:i("9fPrY").RECENT_SEARCH_WIDTH_IN_PX;return{...m,preventPopupOverflow:!0,height:c,width:u,items:[{type:"custom",fallback:[],disableArrowNavigation:!0,render:(d,c)=>{if(!d)return null;let u=(0,a.jsx)(V,{pluginInjectionApi:o,view:d,linkPickerOptions:e?.linkPicker,lpLinkPicker:g,displayUrl:t,displayText:r||"",providerFactory:s,onCancel:()=>d.focus(),onEscapeCallback:v(f),onClickAwayCallback:x,onSubmit:(e,t="",o,r,a)=>{let s=F(p),l=s?i("d925B").ACTION.UPDATED:i("d925B").ACTION.INSERTED,c=w.getState(n)?.skipAnalytics??!1;(s?(0,i("doRn8").commandWithMetadata)(S(e,o||t,p.pos),{action:l,inputMethod:r,sourceEvent:a}):_(r,p.from,p.to,e,f,h,t,o,c,a))(d.state,d.dispatch,d),d.focus()}},c);return l?(0,a.jsx)(i("1eLzC").UserIntentPopupWrapper,{api:o,children:u}):u}}]}}}}},q=e=>{if(void 0!==e)switch(e.type){case"EDIT":case"EDIT_INSERTED":return e.pos;case"INSERT":return}};e.exports.hyperlinkPlugin=({config:e={},api:o})=>{let n,r=!!o?.toolbar;return r&&o?.toolbar?.actions.registerComponents(U(o)),{name:"hyperlink",marks:()=>[{name:"link",mark:i("gQUY7").link}],commands:{showLinkToolbar:(e=i("d925B").INPUT_METHOD.TOOLBAR)=>I(e,o?.analytics?.actions),updateLink:(e,t)=>{let n=q(o?.hyperlink?.sharedState.currentState()?.activeLinkMark);return void 0===n?()=>null:b(e,t,n)},removeLink:()=>{var e;let t=q(o?.hyperlink?.sharedState.currentState()?.activeLinkMark);return void 0===t?()=>null:(e=o?.analytics?.actions,({tr:o})=>(E("",t,e)({tr:o}),(0,i("doRn8").addLinkMetadata)(o.selection,o,{action:i("d925B").ACTION.UNLINK}),o))}},actions:{hideLinkToolbar:k,insertLink:(e,t,n,r,i,a,s=!1,l,d)=>_(e,t,n,r,o?.card?.actions,o?.analytics?.actions,i,a,s,l,d),updateLink:S},getSharedState(e){if(e)return m.getState(e)},pmPlugins:()=>[{name:"hyperlink",plugin:({dispatch:t,getIntl:n})=>g(t,n(),e?.editorAppearance,o,e?.onClickCallback,e.__livePage)},{name:"fakeCursorToolbarPlugin",plugin:()=>R},{name:"hyperlinkInputRule",plugin:({schema:t})=>(function(e,t,o=!1){var n;if(!e.marks.link)return;let r=(n=i("b0F8r").LinkMatcher.create(),(0,i("l03WE").createRule)(n,(e,o,n,r)=>{let{schema:a}=e;if(e.doc.rangeHasMark(n,r,a.marks.link)||void 0===o.url||!(0,i("azNN5").shouldAutoLinkifyMatch)(o))return null;let s=(0,i("b0F8r").normalizeUrl)(o.url);if(""===s)return null;let l=a.mark("link",{href:s}),d=e.selection.$from.nodeBefore;if(!d||!d.isText||!d.text)return null;let c=(0,i("b0F8r").findFilepaths)(d.text,n-(d.text.length-o.text.length));if((0,i("b0F8r").isLinkInMatches)(n,c))return e.tr;let p=Math.min(n+o.text.length,e.doc.content.size),u=e.tr.addMark(n,p,l);return p===r&&u.insertText(" "),(0,i("doRn8").addLinkMetadata)(e.selection,u,{inputMethod:i("d925B").INPUT_METHOD.AUTO_DETECT}),w.getState(e)?.skipAnalytics||t?.attachAnalyticsEvent((0,i("b0F8r").getLinkCreationAnalyticsEvent)(i("d925B").INPUT_METHOD.AUTO_DETECT,s))(u),u})),a=(0,i("l03WE").createRule)(/(^|[^!])\[(.*?)\]\((\S+)\)$/,(e,o,n,r)=>{let{schema:a}=e,[,s,l,d]=o,c=(0,i("b0F8r").normalizeUrl)(d).trim(),p=a.mark("link",{href:c}),u=e.tr.replaceWith(n+s.length,r,a.text((l||"").trim(),[p]));return(0,i("doRn8").addLinkMetadata)(e.selection,u,{inputMethod:i("d925B").INPUT_METHOD.FORMATTING}),w.getState(e)?.skipAnalytics||t?.attachAnalyticsEvent((0,i("b0F8r").getLinkCreationAnalyticsEvent)(i("d925B").INPUT_METHOD.FORMATTING,c))(u),u});return new(0,i("1S4f7").SafePlugin)((0,i("aIMBk").createPlugin)("hyperlink",[r,a],o?{checkOnBlur:!0,appendTextOnBlur:" "}:void 0))})(t,o?.analytics?.actions,e.autoLinkOnBlur)},{name:"hyperlinkKeymap",plugin:()=>(function(e){let t={};return(0,i("hgeg8").bindKeymapWithEditorCommand)(i("hgeg8").addLink.common,I(i("d925B").INPUT_METHOD.SHORTCUT,e),t),(0,i("hgeg8").bindKeymapWithCommand)(i("hgeg8").enter.common,B(e),t),(0,i("hgeg8").bindKeymapWithCommand)(i("hgeg8").insertNewLine.common,B(e),t),(0,i("hgeg8").bindKeymapWithCommand)(i("hgeg8").escape.common,(e,t,o)=>(m.getState(e).activeLinkMark&&(O()(e,t),o&&o.focus()),!1),t),(0,i("dus6D").keymap)(t)})(o?.analytics?.actions)},{name:"hyperlinkToolbarButtons",plugin:()=>L(o?.card?.actions?{skipAnalytics:!0}:void 0)}],pluginsOptions:{quickInsert:({formatMessage:e})=>[{id:"hyperlink",title:e(i("4HWgE").toolbarInsertBlockMessages.link),description:e(i("4HWgE").toolbarInsertBlockMessages.linkDescription),keywords:["hyperlink","url"],priority:1200,keyshortcut:(0,i("hgeg8").tooltip)(i("hgeg8").addLink),icon:()=>(0,a.jsx)(d.IconLink,{}),action(e,t){let n=e(void 0);return n.setMeta(m,{type:s.SHOW_INSERT_TOOLBAR,inputMethod:i("d925B").INPUT_METHOD.QUICK_INSERT}),!1!==o?.analytics?.actions?.attachAnalyticsEvent?.({action:i("d925B").ACTION.INVOKED,actionSubject:i("d925B").ACTION_SUBJECT.TYPEAHEAD,actionSubjectId:i("d925B").ACTION_SUBJECT_ID.TYPEAHEAD_LINK,attributes:{inputMethod:i("d925B").INPUT_METHOD.QUICK_INSERT},eventType:i("d925B").EVENT_TYPE.UI})(n)&&n}}],floatingToolbar:W(e,o),...!r&&{selectionToolbar:(e,{formatMessage:n})=>"none"===((0,i("dh538").fg)("platform_editor_use_preferences_plugin")?o?.userPreferences?.sharedState.currentState()?.preferences.toolbarDockingPosition:o?.selectionToolbar?.sharedState?.currentState()?.toolbarDocking)&&(0,c.editorExperiment)("platform_editor_controls","variant1",{exposure:!0})?{isToolbarAbove:!0,items:[(()=>{let{from:r,to:a}=e.selection,s=(0,i("b0F8r").canLinkBeCreatedInRange)(r,a)(e),l=n(i("4HWgE").toolbarInsertBlockMessages.link);return{type:"button",disabled:!s,testId:"ak-editor-selection-toolbar-link-button",icon:t(i("1bY7o")),title:l,tooltipContent:(0,i("hgeg8").tooltip)(i("hgeg8").addLink,l),showTitle:!1,onClick:(e,t)=>(0,i("gmyMu").editorCommandToPMCommand)(I(i("d925B").INPUT_METHOD.FLOATING_TB,o?.analytics?.actions))(e,t)}})()],rank:2}:void 0},...!r&&{primaryToolbarComponent:!o?.primaryToolbar&&(0,c.editorExperiment)("platform_editor_controls","variant1",{exposure:!0})?n:void 0}}}}}),a("doRn8",function(e,t){function o(e,t,o){let{storedMarks:n}=t,r=t.mapping.map(e.$from.pos);return t.step(new(0,i("8EkET").LinkMetaStep)(r,o)),n&&t.setStoredMarks(n),t}e.exports.addLinkMetadata=o,e.exports.getLinkMetadataFromTransaction=function(e){return e.steps.reduce((e,t)=>t instanceof i("8EkET").LinkMetaStep?{...e,...t.getMetadata()}:e,{})},e.exports.commandWithMetadata=(e,t)=>(n,r,i)=>r?e(n,e=>{o(n.selection,e,t),r(e)},i):e(n,r,i)}),a("8EkET",function(e,t){class o extends i("cO9ey").Step{getMetadata(){return this.metadata}invert(){let{sourceEvent:e,...t}=this.metadata;return new o(this.pos,t,!0)}apply(e){return i("aXG5V").StepResult.ok(e)}map(e){let t=this.pos;return"number"==typeof t&&(t=e.map(t)),new o(t,this.metadata,this.isInverted)}getMap(){return new(0,i("aXG5V").StepMap)([this.pos||0,0,0])}merge(){return null}toJSON(){return{stepType:"replace",from:0,to:0}}static fromJSON(){return new(0,i("aXG5V").ReplaceStep)(0,0,i("5SAOw").Slice.empty)}constructor(e,t,o=!1){super(),this.pos=e,this.metadata=t,this.isInverted=o}}i("cO9ey").Step.jsonID("editor-linking-meta",o),e.exports.LinkMetaStep=o}),a("i9vfM",function(e,t){var o=i("iu6m9");let n=e=>!!e.doc.type.schema.marks.link.isInSet(e.selection.$from.marks()),r=e=>{let{$from:t,$to:o}=e.selection;return t===o&&!!e.doc.type.schema.marks.link.isInSet(t.nodeAfter?.marks||[])},a=e=>{let{$from:t,$to:o}=e.selection;return t===o&&!!e.doc.type.schema.marks.link.isInSet(t.nodeBefore?.marks||[])},s=e=>{let{$from:t,$to:o}=e.selection,n=t.nodeAfter;return!!n&&0===t.textOffset&&o.pos-t.pos===n.nodeSize&&!!e.doc.type.schema.marks.link.isInSet(n.marks)};e.exports.isTextAtPos=function(e){return({tr:t})=>{let o=t.doc.nodeAt(e);return!!o&&o.isText}},e.exports.getLinkPreferencesURLFromENV=()=>(0,i("kfZYI").getUrlForDomainInContext)("id","prod")+"/manage-profile/link-preferences",e.exports.getActiveLinkMark=e=>{let{selection:{$from:t}}=e;if(n(e)||s(e)){let o=t.pos-t.textOffset,n=e.doc.nodeAt(o);return n&&n.isText?{node:n,pos:o}:void 0}if(r(e)&&(0,o.editorExperiment)("platform_editor_controls","variant1")){let o=e.doc.nodeAt(t.pos);return o&&o.isText&&1===o.nodeSize?{node:o,pos:t.pos}:void 0}if(a(e)&&(0,o.editorExperiment)("platform_editor_controls","variant1")){let o=e.doc.nodeAt(t.pos-1);return o&&o.isText&&1===o.nodeSize?{node:o,pos:t.pos-1}:void 0}}}),a("6YpFi",function(e,o){var n=i("42omo");let r=(e,t)=>{let o=(0,n.useRef)(null);return(0,n.useEffect)(()=>{let n=e=>{let n=o.current;e.target instanceof Element&&n&&!n.contains(e.target)&&t()},r=t=>{"Escape"===t.key&&(t.preventDefault(),e())};return document.addEventListener("mousedown",n),document.addEventListener("keydown",r),()=>{document.removeEventListener("mousedown",n),document.removeEventListener("keydown",r)}},[t,e]),o},a=({view:e,onCancel:o,invokeMethod:a="_unknown",editorAppearance:s,onClose:l,onEscapeCallback:d,onClickAwayCallback:c,...p})=>{let u=(0,n.useRef)(l);(0,n.useEffect)(()=>{u.current=l}),(0,n.useEffect)(()=>()=>u.current?.(),[]);let f=(0,n.useCallback)(()=>{let{state:t,dispatch:n}=e;d?.(t,n),o?.()},[e,o,d]),h=r(f,(0,n.useCallback)(()=>{let{state:t,dispatch:n}=e;c?.(t,n),o?.()},[e,o,c])),m=(0,i("lWghV").getAnalyticsEditorAppearance)(s),g=(0,n.useMemo)(()=>({attributes:{invokeMethod:a,location:m},location:m}),[a,m]);return t(n).createElement("div",{ref:h},t(n).createElement(i("bYRk6").default,{data:g},t(n).createElement(i("4iPjq").default,{...p,onCancel:f})))};var s=i("jSnXV"),l=i("jTxSS"),d=i("1oCLl"),c=i("k8ulM");let p=(0,i("cgtv4").defineMessages)({hyperlinkIconIssueLabel:{id:"fabric.editor.headingLink.hyperlinkIconIssueLabel",defaultMessage:"Issue"},hyperlinkIconBugLabel:{id:"fabric.editor.headingLink.hyperlinkIconBugLabel",defaultMessage:"Bug"},hyperlinkIconStoryLabel:{id:"fabric.editor.headingLink.hyperlinkIconStoryLabel",defaultMessage:"Story"},hyperlinkIconTaskLabel:{id:"fabric.editor.headingLink.hyperlinkIconTaskLabel",defaultMessage:"Task"},hyperlinkIconPageLabel:{id:"fabric.editor.headingLink.hyperlinkIconPageLabel",defaultMessage:"Page"},hyperlinkIconBlogLabel:{id:"fabric.editor.headingLink.hyperlinkIconBlogLabel",defaultMessage:"Blog"},hyperlinkIconIssueLabelIssueTermRefresh:{id:"fabric.editor.headingLink.hyperlinkIconIssueLabel.issue-term-refresh",defaultMessage:"Work Item"}}),u=(0,i("gmMgo").default)(e=>{let{intl:o}=e;return t(n).createElement(i("GLxTx").default,{label:o.formatMessage((0,i("dh538").fg)("confluence-issue-terminology-refresh")?p.hyperlinkIconIssueLabelIssueTermRefresh:p.hyperlinkIconIssueLabel)})}),f=(0,i("gmMgo").default)(e=>{let{intl:o}=e;return t(n).createElement(i("5pEhQ").default,{label:o.formatMessage(p.hyperlinkIconBugLabel)})}),h=(0,i("gmMgo").default)(e=>{let{intl:o}=e;return t(n).createElement(i("hrqJ0").default,{label:o.formatMessage(p.hyperlinkIconStoryLabel)})}),m=(0,i("gmMgo").default)(e=>{let{intl:o}=e;return t(n).createElement(i("9wTHj").default,{label:o.formatMessage(p.hyperlinkIconTaskLabel)})}),g=(0,i("gmMgo").default)(e=>{let{intl:o}=e;return t(n).createElement(i("13WX1").default,{label:o.formatMessage(p.hyperlinkIconPageLabel)})}),T=(0,i("gmMgo").default)(e=>{let{intl:o}=e;return t(n).createElement(i("hxQwS").default,{label:o.formatMessage(p.hyperlinkIconBlogLabel)})}),E={"jira.issue":t(n).createElement(u,null),"jira.issue.bug":t(n).createElement(f,null),"jira.issue.story":t(n).createElement(h,null),"jira.issue.task":t(n).createElement(m,null),"confluence.page":t(n).createElement(g,null),"confluence.blogpost":t(n).createElement(T,null)},b=e=>t(c).createHash().update(e).digest("hex"),S=e=>e.split(" ").length,y={name:"19nbz8q",styles:"clip:rect(1px, 1px, 1px, 1px);clip-path:inset(50%);height:1px;width:1px;margin:var(--ds-space-negative-025, -2px);overflow:hidden;padding:0;position:absolute"},_=(0,i("ecnYn").xcss)({padding:"space.0",marginRight:"space.100",backgroundColor:"color.background.neutral.subtle",border:"none"}),C={name:"154v9b4",styles:"position:absolute;right:0"},I=(0,i("9K4OG").css)({padding:"var(--ds-space-150, 12px) var(--ds-space-100, 8px)"}),O={name:"1s21os8",styles:"margin-top:var(--ds-space-150, 12px)"},k={name:"36ynaz",styles:'color:var(--ds-text-subtlest, #6B6E76);padding-bottom:var(--ds-space-050, 4px);font:var(--ds-font-body-small, normal 400 11px/16px ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Ubuntu, "Helvetica Neue", sans-serif);font-weight:var(--ds-font-weight-medium, 500)'},v={name:"bjn8wh",styles:"position:relative"},x=(0,i("cgtv4").defineMessages)({displayText:{id:"fabric.editor.displayText",defaultMessage:"Text to display"},clearText:{id:"fabric.editor.clearLinkText",defaultMessage:"Clear text"},clearLink:{id:"fabric.editor.clearLink",defaultMessage:"Clear link"},hyperlinkAriaLabel:{id:"fabric.editor.hyperlink.ariaLabel",defaultMessage:"Hyperlink Edit"},searchLinkAriaDescription:{id:"fabric.editor.hyperlink.searchLinkAriaDescription",defaultMessage:"Suggestions will appear below as you type into the field"},searchLinkResults:{id:"fabric.editor.hyperlink.searchLinkResults",defaultMessage:"{count, plural, =0 {no results} one {# result} other {# results}} found"},linkVisibleLabel:{id:"fabric.editor.hyperlink.linkVisibleLabel",defaultMessage:"Paste or search for link"},textVisibleLabel:{id:"fabric.editor.hyperlink.textVisibleLabel",defaultMessage:"Display text (optional)"}}),N=(0,i("9K4OG").jsx)(i("13WX1").default,{label:"page"}),A=({name:e,container:t,iconUrl:o,objectId:n,url:r,viewedTimestamp:i})=>({objectId:n,name:e,container:t,iconUrl:o,url:r,lastViewedDate:i?new Date(i):void 0,prefetch:!0}),P=({objectId:e,container:t,title:o,contentType:n,url:r,updatedTimestamp:i})=>({objectId:e,container:t,name:o,url:r,lastUpdatedDate:i?new Date(i):void 0,icon:n&&E[n]||N,prefetch:!1});class M extends n.PureComponent{async componentDidMount(){let{timesViewed:e,inputMethod:t,searchSessionId:o}=this.props;document.addEventListener("mousedown",this.handleClickOutside),this.fireAnalytics({action:i("d925B").ACTION.VIEWED,actionSubject:i("d925B").ACTION_SUBJECT.CREATE_LINK_INLINE_DIALOG,attributes:{timesViewed:e??0,searchSessionId:o??"",trigger:t??""},eventType:i("d925B").EVENT_TYPE.SCREEN});let[n,r]=await Promise.all([this.props.activityProvider,this.props.searchProvider]);(0,l.flushSync)(()=>this.setState({activityProvider:n,searchProvider:r})),await this.loadInitialLinkSearchResult()}componentWillUnmount(){let{searchSessionId:e}=this.props;document.removeEventListener("mousedown",this.handleClickOutside),this.submitted||this.fireAnalytics({action:i("d925B").ACTION.DISMISSED,actionSubject:i("d925B").ACTION_SUBJECT.CREATE_LINK_INLINE_DIALOG,attributes:{source:this.analyticSource,searchSessionId:e??"",trigger:"blur"},eventType:i("d925B").EVENT_TYPE.UI})}async getRecentItems(e,t){let{searchSessionId:o}=this.props,n=performance.now();try{let r=w(t?await e.searchRecent(t):await e.getRecentItems()),a=r.map(A),s=performance.now()-n;return this.fireAnalytics({action:i("d925B").ACTION.INVOKED,actionSubject:i("d925B").ACTION_SUBJECT.SEARCH_RESULT,actionSubjectId:i("d925B").ACTION_SUBJECT_ID.RECENT_ACTIVITIES,attributes:{duration:s,count:a.length},eventType:i("d925B").EVENT_TYPE.OPERATIONAL}),this.fireAnalytics({action:i("d925B").ACTION.SHOWN,actionSubject:i("d925B").ACTION_SUBJECT.SEARCH_RESULT,actionSubjectId:i("d925B").ACTION_SUBJECT_ID.PRE_QUERY_SEARCH_RESULTS,attributes:{source:this.analyticSource,preQueryRequestDurationMs:s,searchSessionId:o??"",resultCount:a.length,results:r.map(e=>({resultContentId:e.objectId,resultType:e.type??""}))},eventType:i("d925B").EVENT_TYPE.UI}),a}catch(t){let e=performance.now();return this.fireAnalytics({action:i("d925B").ACTION.INVOKED,actionSubject:i("d925B").ACTION_SUBJECT.SEARCH_RESULT,actionSubjectId:i("d925B").ACTION_SUBJECT_ID.RECENT_ACTIVITIES,attributes:{duration:e-n,count:-1,errorCode:t.status},eventType:i("d925B").EVENT_TYPE.OPERATIONAL}),[]}}fireAnalytics(e){this.props.createAnalyticsEvent&&this.fireCustomAnalytics&&this.fireCustomAnalytics({payload:e})}async loadInitialLinkSearchResult(){let{displayUrl:e,activityProvider:t}=this.state;try{if(!e&&t){this.setState({isLoading:!0});let e=await this.getRecentItems(t);this.setState({items:e})}}finally{this.setState({isLoading:!1})}}render(){let{items:e,isLoading:o,selectedIndex:n,displayUrl:r,displayText:a}=this.state,{intl:{formatMessage:s},activityProvider:l}=this.props,c=s(x.clearLink),p="search-recent-links-field-description",u="hyperlink-search-list",f=n>-1?`link-search-list-item-${n}`:"",h="search-recent-links-field-id",m="display-text-filed-id",g=((0,d.expValEquals)("platform_editor_hydratable_ui","isEnabled",!0)?(0,i("d7ZU3").getBrowserInfo)():i("d7ZU3").browser).safari&&this.getScreenReaderText(),T=(0,i("dh538").fg)("platform_editor_link_picker_width_fix")?i("3a8Ut").narrowContainerWidth:!!l&&i("3a8Ut").containerWithProvider;return(0,i("9K4OG").jsx)("div",{"aria-label":(0,i("dh538").fg)("platform_editor_dec_a11y_fixes")?s(x.hyperlinkAriaLabel):"Hyperlink Edit",className:"recent-list","data-testid":"hyperlink-add-toolbar"},(0,i("9K4OG").jsx)("div",{css:[i("3a8Ut").container,T,I],ref:this.wrapperRef},(0,i("9K4OG").jsx)("label",{htmlFor:h,css:k},s(x.linkVisibleLabel)),(0,i("9K4OG").jsx)("div",{css:[i("3a8Ut").inputWrapper,v]},g&&(0,i("9K4OG").jsx)(i("cftLn").default,{ariaLive:"assertive",text:g,ariaRelevant:"additions",delay:250}),(0,i("9K4OG").jsx)("div",{css:y,"aria-hidden":"true",id:p},s(x.searchLinkAriaDescription)),(0,i("9K4OG").jsx)(i("8i5w2").default,{role:"combobox",ariaExpanded:!(0,d.expValEquals)("editor_enghealth_hyperlink_toolbar_aria_values","isEnabled",!0,!1)||e&&e.length>0&&!o,ariaActiveDescendant:f,ariaControls:u,ariaAutoComplete:!0,describedById:p,ref:e=>this.urlInputContainer=e,testId:"link-url",onSubmit:this.handleSubmit,onChange:this.updateInput,autoFocus:{preventScroll:!0},onCancel:this.handleCancel,defaultValue:r,onKeyDown:this.handleKeyDown,inputId:h}),r&&(0,i("9K4OG").jsx)("div",{css:C},(0,i("9K4OG").jsx)(i("3gadb").default,{content:c},(0,i("9K4OG").jsx)(i("2W0qg").default,{xcss:_,onClick:this.handleClearText},(0,i("9K4OG").jsx)(t(i("bRp3h")),{label:c,color:"var(--ds-icon-subtle, #505258)"}))))),(0,i("9K4OG").jsx)("label",{htmlFor:m,css:[k,O]},s(x.textVisibleLabel)),(0,i("9K4OG").jsx)("div",{css:[i("3a8Ut").inputWrapper,v]},(0,i("9K4OG").jsx)(i("8i5w2").default,{ref:e=>this.displayTextInputContainer=e,testId:"link-text",onChange:this.updateTextInput,onCancel:this.handleCancel,defaultValue:a,onSubmit:this.handleSubmit,onKeyDown:this.handleKeyDown,inputId:m}),a&&(0,i("9K4OG").jsx)("div",{css:C},(0,i("9K4OG").jsx)(i("3gadb").default,{content:s(x.clearText)},(0,i("9K4OG").jsx)(i("2W0qg").default,{xcss:_,onClick:this.handleClearDisplayText,onKeyDown:this.handleClearTextKeyDown},(0,i("9K4OG").jsx)(t(i("bRp3h")),{label:s(x.clearText),color:"var(--ds-icon-subtle, #505258)"}))))),(0,i("9K4OG").jsx)("div",{css:y,"aria-live":"polite","aria-atomic":"true",id:"fabric.editor.hyperlink.suggested.results"},r&&s(x.searchLinkResults,{count:e.length})),(0,i("9K4OG").jsx)(i("48vaT").default,{ariaControls:"fabric.editor.hyperlink.suggested.results",id:u,role:"listbox",items:e,isLoading:o,selectedIndex:n,listItemRefCallback:this.listItemRefCallback,onFocus:this.handleListItemFocus,onKeyDown:this.handleKeyDown,onSelect:this.handleSelected,onMouseEnter:this.handleMouseEnterResultItem,onMouseLeave:this.handleMouseLeaveResultItem})))}constructor(e){super(e),this.submitted=!1,this.urlInputContainer=null,this.displayTextInputContainer=null,this.wrapperRef=t(n).createRef(),this.listItemRefs={current:{}},this.handleClearText=void 0,this.handleClearDisplayText=void 0,this.debouncedQuickSearch=void 0,this.fireCustomAnalytics=void 0,this.quickSearchQueryVersion=0,this.analyticSource="createLinkInlineDialog",this.quickSearch=async(e,t,o)=>{let{searchProvider:n,displayUrl:r}=this.state,{searchSessionId:a}=this.props;if(!n)return;let s=++this.quickSearchQueryVersion;this.fireAnalytics({action:i("d925B").ACTION.ENTERED,actionSubject:i("d925B").ACTION_SUBJECT.TEXT,actionSubjectId:i("d925B").ACTION_SUBJECT_ID.LINK_SEARCH_INPUT,attributes:{queryLength:e.length,queryVersion:s,queryHash:b(e),searchSessionId:a??"",wordCount:S(e),source:this.analyticSource},nonPrivacySafeAttributes:{query:e},eventType:i("d925B").EVENT_TYPE.UI});let l=performance.now();try{var d,c;let p=await n.quickSearch(e,o),u=w((d=[...t,...p.map(P)],c=(e,t)=>e.objectId===t.objectId,d.filter((e,t,o)=>o.findIndex(t=>c?c(e,t):e===t)===t)));r===e&&s===this.quickSearchQueryVersion&&this.setState({items:u,isLoading:!1});let f=performance.now()-l;this.fireAnalytics({action:i("d925B").ACTION.INVOKED,actionSubject:i("d925B").ACTION_SUBJECT.SEARCH_RESULT,actionSubjectId:i("d925B").ACTION_SUBJECT_ID.QUICK_SEARCH,attributes:{duration:f,count:p.length},eventType:i("d925B").EVENT_TYPE.OPERATIONAL}),this.fireAnalytics({action:i("d925B").ACTION.SHOWN,actionSubject:i("d925B").ACTION_SUBJECT.SEARCH_RESULT,actionSubjectId:i("d925B").ACTION_SUBJECT_ID.POST_QUERY_SEARCH_RESULTS,attributes:{source:this.analyticSource,postQueryRequestDurationMs:f,searchSessionId:a??"",resultCount:p.length,results:p.map(e=>({resultContentId:e.objectId,resultType:e.contentType}))},eventType:i("d925B").EVENT_TYPE.UI})}catch(t){let e=performance.now();this.fireAnalytics({action:i("d925B").ACTION.INVOKED,actionSubject:i("d925B").ACTION_SUBJECT.SEARCH_RESULT,actionSubjectId:i("d925B").ACTION_SUBJECT_ID.QUICK_SEARCH,attributes:{duration:e-l,count:-1,errorCode:t.status},eventType:i("d925B").EVENT_TYPE.OPERATIONAL})}},this.updateInput=async e=>{let{activityProvider:t,searchProvider:o}=this.state;if(this.setState({displayUrl:e}),t)if(0===e.length)this.setState({items:await this.getRecentItems(t),selectedIndex:-1});else if((0,i("81OAa").isSafeUrl)(e))this.setState({items:[],selectedIndex:-1,isLoading:!1});else{let n=await this.getRecentItems(t,e),r=n.length<5&&!!o;this.setState({items:n,isLoading:r}),r&&this.debouncedQuickSearch(e,n,5)}},this.createClearHandler=e=>async()=>{let{activityProvider:t}=this.state;switch(e){case"displayUrl":this.setState({[e]:"",items:t?w(await t.getRecentItems()):[]}),this.urlInputContainer&&this.urlInputContainer.focus();break;case"displayText":this.setState({[e]:""}),this.displayTextInputContainer&&this.displayTextInputContainer.focus()}},this.handleClickOutside=e=>{if(e.target instanceof Element&&this.wrapperRef.current&&!this.wrapperRef.current.contains(e.target)){let{view:{state:e,dispatch:t},onClickAwayCallback:o}=this.props;o?.(e,t)}},this.getScreenReaderText=()=>{let{intl:e}=this.props,{items:t,selectedIndex:o}=this.state;if(t.length&&o>-1){let{name:n,container:r,lastUpdatedDate:a,lastViewedDate:s}=t[o],l=(0,i("1j5Rt").transformTimeStamp)(e,s,a);return`${n}, ${r}, ${l?.pageAction} ${l?.dateString} ${l?.timeSince||""}`}},this.listItemRefCallback=(e,t)=>{this.listItemRefs.current&&(null===e?delete this.listItemRefs.current[t]:this.listItemRefs.current[t]=e)},this.isUrlPopulatedWithSelectedItem=()=>{let{items:e,selectedIndex:t,displayUrl:o}=this.state,n=e[t];return!!n&&n.url===o},this.handleSelected=(e,t)=>{this.handleInsert(e,t,i("d925B").INPUT_METHOD.TYPEAHEAD,"click")},this.handleInsert=(e,t,o,n)=>{let{searchSessionId:r,onSubmit:a}=this.props,{items:s,selectedIndex:l,displayText:d}=this.state;if(a&&(this.submitted=!0,a(e,t,d,o)),"click"===n||this.isUrlPopulatedWithSelectedItem()){let e=s[l];this.fireAnalytics({action:i("d925B").ACTION.SELECTED,actionSubject:i("d925B").ACTION_SUBJECT.SEARCH_RESULT,attributes:{source:this.analyticSource,searchSessionId:r??"",trigger:n,resultCount:s.length,selectedResultId:e.objectId,selectedRelativePosition:l,prefetch:e.prefetch??!1},eventType:i("d925B").EVENT_TYPE.UI})}},this.handleMouseEnterResultItem=e=>{let{items:t}=this.state,o=R(t,t=>t.objectId===e);this.setState({selectedIndex:o})},this.handleMouseLeaveResultItem=e=>{let{items:t,selectedIndex:o}=this.state;o===R(t,t=>t.objectId===e)&&this.setState({selectedIndex:-1})},this.handleSubmit=()=>{let{displayUrl:e,selectedIndex:t,items:o}=this.state,n=o[t];if(this.isUrlPopulatedWithSelectedItem())this.handleInsert((0,i("b0F8r").normalizeUrl)(n.url),n.name,i("d925B").INPUT_METHOD.TYPEAHEAD,"keyboard");else if(e&&e.length>0){let t=(0,i("b0F8r").normalizeUrl)(e);t&&this.handleInsert(t,e,i("d925B").INPUT_METHOD.MANUAL,"notselected")}},this.handleClearTextKeyDown=e=>{let{keyCode:t}=e;if(9===t){if(this.state.items.length>0)return;if(!this.submitted){let{displayUrl:e,displayText:t}=this.state,o=(0,i("b0F8r").normalizeUrl)(e);this.handleInsert(o,t||e,i("d925B").INPUT_METHOD.MANUAL,"notselected")}e.preventDefault();return}},this.handleListItemFocus=e=>{this.setState({selectedIndex:e})},this.handleKeyDown=e=>{let{items:t,selectedIndex:o}=this.state,{view:n,onEscapeCallback:r,searchSessionId:a}=this.props,{keyCode:s}=e;if(27===s){e.preventDefault();let{state:t,dispatch:o}=n;r?.(t,o);return}if(!t||!t.length)return;let l=o;40===s?(e.preventDefault(),l=(o+1)%t.length):38===s&&(e.preventDefault(),l=o>0?o-1:t.length-1),[40,38].includes(s)&&t[l]&&(this.listItemRefs.current&&this.listItemRefs.current[t[l].objectId]?.focus(),this.setState({selectedIndex:l,displayUrl:t[l].url}),this.fireAnalytics({action:i("d925B").ACTION.HIGHLIGHTED,actionSubject:i("d925B").ACTION_SUBJECT.SEARCH_RESULT,attributes:{source:this.analyticSource,searchSessionId:a??"",selectedResultId:t[l].objectId,selectedRelativePosition:l},eventType:i("d925B").EVENT_TYPE.UI}))},this.updateTextInput=e=>{this.setState({displayText:e})},this.handleCancel=e=>{let{view:{state:t,dispatch:o},onClickAwayCallback:n}=this.props;e.preventDefault(),n?.(t,o)},this.state={selectedIndex:-1,isLoading:!1,displayUrl:(0,i("b0F8r").normalizeUrl)(e.displayUrl),displayText:e.displayText,items:[]},this.handleClearText=this.createClearHandler("displayUrl"),this.handleClearDisplayText=this.createClearHandler("displayText"),this.debouncedQuickSearch=t(s)(this.quickSearch,400),this.fireCustomAnalytics=(0,i("ajtqX").fireAnalyticsEvent)(e.createAnalyticsEvent)}}function R(e,t){let o=-1;return e.some((e,n)=>!!t(e)&&(o=n,!0)),o}function w(e){return e.slice(0,5)}let L=(0,i("gmMgo").default)(M);var B=(0,i("1DWH0").default)()(L);let D=e=>({url:t,title:o,displayText:n,rawUrl:r,meta:a},s)=>{e(t,o??r,n||void 0,"manual"===a.inputMethod?i("d925B").INPUT_METHOD.MANUAL:i("d925B").INPUT_METHOD.TYPEAHEAD,s)};e.exports.HyperlinkAddToolbar=function({linkPickerOptions:e={},onSubmit:o,displayText:r,displayUrl:s,providerFactory:l,view:d,onCancel:c,invokeMethod:p,lpLinkPicker:u,onClose:f,onEscapeCallback:h,onClickAwayCallback:m,editorAppearance:g,inputMethod:T,searchSessionId:E,timesViewed:b,isOffline:S}){return t(n).createElement(i("dYBVS").WithProviders,{providers:["activityProvider","searchProvider"],providerFactory:l,renderNode:({activityProvider:i,searchProvider:l})=>u&&!S?t(n).createElement(a,{view:d,invokeMethod:p??T,editorAppearance:g,...e,url:s,displayText:r,onSubmit:D(o),onCancel:c,onClose:f,onEscapeCallback:h,onClickAwayCallback:m}):t(n).createElement(B,{activityProvider:i,searchProvider:l,onSubmit:o,displayText:r,displayUrl:s,view:d,onEscapeCallback:h,onClickAwayCallback:m,inputMethod:T,searchSessionId:E,timesViewed:b})})}}),a("4iPjq",function(t,o){e(t.exports,"default",()=>r);let n=(0,i("aqrhZ").lazyForPaint)(()=>i("iHmmz").then(({LinkPicker:e})=>({default:e})));var r=(0,i("5wEPK").composeLinkPicker)(n)}),a("5wEPK",function(e,t){var o=i("l998X"),n=i("42omo"),r=i("aqrhZ");class a extends n.Component{componentDidCatch(e,t){let{onError:o}=this.props;o&&o(e,t),this.setState({hasError:!0})}render(){let{children:e,ErrorComponent:t}=this.props,{hasError:n}=this.state;return n&&t?(0,o.jsx)(t,{}):e}constructor(e){super(e),this.state={hasError:!1}}}i("42omo");let s=(0,i("cgtv4").defineMessages)({heading:{defaultMessage:"Something went wrong!",id:"fabric.linkPicker.unhandledError.heading"},description:{defaultMessage:"Try reloading the page.",id:"fabric.linkPicker.unhandledError.description"}}),l=()=>{let e=(0,i("8C5kA").default)(),t=e.formatMessage(s.heading),n=e.formatMessage(s.description);return(0,o.jsx)(i("lO9iE").MinHeightContainer,{minHeight:i("2lNr8").LINK_PICKER_MIN_HEIGHT_IN_PX_FALLBACK,"data-testid":"link-picker-root-error-boundary-ui",className:(0,i("gMc0m").default)(["_11c81vhk"]),children:(0,o.jsx)(i("atwsN").EmptyState,{header:t,renderImage:()=>(0,o.jsx)(i("c2ARh").GenericErrorSVG,{}),description:n})})};function d({children:e}){let{createAnalyticsEvent:t}=(0,i("inPa6").useAnalyticsEvents)(),r=(0,i("knjgj").useLinkPickerSessionId)(),s=(0,n.useCallback)((e,o)=>{t((0,i("abGcM").default)("ui.linkPicker.unhandledErrorCaught",{browserInfo:window?.navigator?.userAgent||"unknown",error:e.toString(),componentStack:o?.componentStack??""})).fire(i("2lNr8").ANALYTICS_CHANNEL),(0,i("hzd6s").failUfoExperience)(i("hzd6s").ufoExperience.mounted,r)},[t,r]);return(0,o.jsx)(a,{onError:s,ErrorComponent:l,children:e})}i("42omo");let c=({hideDisplayText:e,isLoadingPlugins:t,plugins:o,url:n})=>{if(!n){if(o&&o.length>1||t)return e?"495px":"590px";if(o?.length===1)return e?"450px":"545px"}return e?"155px":"252px"},p=e=>{let t=c(e);return(0,o.jsx)(i("lO9iE").MinHeightContainer,{minHeight:t,"data-testid":"link-picker-root-loader-boundary-ui",className:(0,i("gMc0m").default)(["_4cvr1h6o"]),children:(0,o.jsx)(i("9hlns").default,{testId:"link-picker.component-loading-indicator",interactionName:e.name||"link-picker-loading",size:"medium"})})};i("42omo"),i("42omo");let u={cs:()=>i("2gcdD"),da:()=>i("DYTht"),de:()=>i("8zwJo"),en_GB:()=>i("84kdm"),en_ZZ:()=>i("kwTsF"),en:()=>Promise.resolve(i("iaMDd")),es:()=>i("9mG71"),fi:()=>i("bMlWv"),fr:()=>i("fjiBS"),hu:()=>i("hlzGQ"),it:()=>i("bf4mq"),ja:()=>i("q6JSw"),ko:()=>i("hIeXr"),nb:()=>i("cmUnM"),nl:()=>i("44eXX"),pl:()=>i("iww4U"),pt_BR:()=>i("4WSCh"),ru:()=>i("9msg5"),sv:()=>i("3XoOh"),th:()=>i("khF3L"),tr:()=>i("3Shvv"),uk:()=>i("7MpfQ"),vi:()=>i("bbM1s"),zh_TW:()=>i("kaYYE"),zh:()=>i("eRdDH")},f=async e=>{try{let t=e.replace("-","_");if(t in u)return(await u[t]()).default}catch(e){}try{let t=e.split(/[-_]/)[0];if(t in u)return(await u[t]()).default}catch(e){}},h=({children:e})=>(0,o.jsx)(i("keVvA").default,{defaultMessages:i("iaMDd").default,loaderFn:f,children:e}),m=({children:e})=>(0,o.jsx)(h,{children:e}),g="link-picker-root",T={packageName:"platform-pkg",packageVersion:"0.0.0-use.local",componentName:i("2lNr8").COMPONENT_NAME,source:i("2lNr8").COMPONENT_NAME},E=({children:e})=>(0,o.jsx)("div",{"data-testid":g,children:e}),b=e=>(0,o.jsx)("div",{role:"dialog","aria-modal":"false","aria-label":"link-picker",...e,className:(0,i("gMc0m").default)(["_1bsb1ubl"])});e.exports.composeLinkPicker=e=>(0,n.memo)(t=>{let{component:n}=t;return(0,o.jsx)(i("bYRk6").default,{data:T,children:(0,o.jsx)(i("knjgj").LinkPickerSessionProvider,{children:(0,o.jsx)(m,{children:(0,o.jsx)("div",{style:{"--link-picker-width":t.disableWidth?"100%":`${i("2lNr8").LINK_PICKER_WIDTH_IN_PX}px`,"--link-picker-padding-left":t.paddingLeft??"var(--ds-space-200, 16px)","--link-picker-padding-right":t.paddingRight??"var(--ds-space-200, 16px)","--link-picker-padding-top":t.paddingTop??"var(--ds-space-200, 16px)","--link-picker-padding-bottom":t.paddingBottom??"var(--ds-space-200, 16px)"},children:(0,o.jsx)(b,{children:(0,o.jsx)(d,{children:(0,o.jsx)(r.LazySuspense,{fallback:(0,o.jsx)(p,{url:t.url,hideDisplayText:t.hideDisplayText,isLoadingPlugins:t.isLoadingPlugins,plugins:t.plugins}),children:(0,o.jsx)(n??E,{...t,"data-testid":g,children:(0,o.jsx)(e,{...t})})})})})})})})})})}),a("2lNr8",function(e,t){e.exports.ANALYTICS_CHANNEL="media",e.exports.COMPONENT_NAME="linkPicker",e.exports.RECENT_SEARCH_LIST_SIZE=5,e.exports.LINK_PICKER_WIDTH_IN_PX=342,e.exports.LINK_PICKER_MIN_HEIGHT_IN_PX_FALLBACK="290px"}),a("knjgj",function(e,t){var o=i("l998X"),n=i("42omo"),r=i("dQl1W");let a=(0,n.createContext)("SESSION_UNINITIALIZED"),s=e=>{let t=(0,n.useRef)(!1);return t.current||(e(),t.current=!0),null};e.exports.LinkPickerSessionProvider=({children:e})=>{let{current:t}=(0,n.useRef)((0,r.v4)());return(0,n.useEffect)(()=>()=>(0,i("hzd6s").abortUfoExperience)(i("hzd6s").ufoExperience.mounted,t),[t]),s(()=>(0,i("hzd6s").startUfoExperience)(i("hzd6s").ufoExperience.mounted,t)),(0,o.jsx)(a.Provider,{value:t,children:e})},e.exports.useLinkPickerSessionId=()=>(0,n.useContext)(a)}),a("hzd6s",function(e,t){let o={mounted:"component-mounted"},n={[o.mounted]:new(0,i("9801n").ConcurrentExperience)(o.mounted,{type:i("iqaft").ExperienceTypes.Load,performanceType:i("iqaft").ExperiencePerformanceTypes.PageSegmentLoad,platform:{component:"link-picker"}})};e.exports.ufoExperience=o,e.exports.startUfoExperience=(e,t,o)=>{let r=n[e].getInstance(t);r.start(),o&&r.addMetadata(o)},e.exports.succeedUfoExperience=(e,t,o)=>{n[e].getInstance(t).success({metadata:o})},e.exports.failUfoExperience=(e,t,o)=>{n[e].getInstance(t).failure({metadata:o})},e.exports.abortUfoExperience=(e,t,o)=>{n[e].getInstance(t).abort({metadata:o})}}),a("abGcM",function(e,t){e.exports.default=function(e,t){let[o,n,r,i]=e.split(".");return"screen"===o?{eventType:o,name:n,action:"viewed",attributes:t}:{eventType:o,actionSubject:n,actionSubjectId:i,action:r,attributes:t}}}),a("c2ARh",function(e,t){var o=i("l998X");i("42omo"),e.exports.GenericErrorSVG=e=>(0,o.jsxs)("svg",{viewBox:"0 0 96 96",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,className:(0,i("gMc0m").default)(["_1bsb16xz _4t3i16xz _1e0c1ule"]),children:[(0,o.jsx)("path",{fill:"#fff",d:"M64.861 32.06a27.753 27.753 0 0 0-2.667-4.133 28.187 28.187 0 0 0-3.376-3.669c-6.985-6.311-15.57-6.89-23.609-2.53a30.226 30.226 0 0 0-4.056 2.656 30.624 30.624 0 0 0-3.735 3.4c-6.225 6.717-7.82 15.154-3.505 23.462a28.108 28.108 0 0 0 2.698 4.193 27.67 27.67 0 0 0 3.33 3.62c6.94 6.266 15.518 6.85 23.596 2.507a30.492 30.492 0 0 0 4.23-2.758 30.07 30.07 0 0 0 3.593-3.257c6.252-6.692 7.847-15.161 3.494-23.49h.007Z"}),(0,o.jsx)("path",{fill:"#DDDEE1",d:"M43.092 66.774c-5.306 0-10.382-1.997-14.75-5.938a30.405 30.405 0 0 1-3.62-3.93 30.243 30.243 0 0 1-2.928-4.553c-4.657-8.961-3.247-18.509 3.871-26.192a33.271 33.271 0 0 1 4.025-3.67 32.834 32.834 0 0 1 4.378-2.869c9.209-4.995 18.816-3.951 26.353 2.86a30.945 30.945 0 0 1 3.665 3.98 30.303 30.303 0 0 1 2.898 4.488c4.705 9.003 3.295 18.565-3.868 26.231a32.148 32.148 0 0 1-3.879 3.515 33.415 33.415 0 0 1-4.562 2.975c-3.858 2.073-7.782 3.1-11.583 3.1v.003Zm2.53-45.486c-3.019 0-6.147.84-9.275 2.54a28.433 28.433 0 0 0-3.735 2.448 28.059 28.059 0 0 0-3.442 3.135c-5.746 6.203-6.86 13.566-3.135 20.736a25.395 25.395 0 0 0 2.472 3.83 25.304 25.304 0 0 0 3.044 3.309c5.99 5.41 13.398 6.182 20.862 2.175a28.02 28.02 0 0 0 3.899-2.545 28.03 28.03 0 0 0 3.31-2.999c5.777-6.182 6.883-13.552 3.124-20.75a25.553 25.553 0 0 0-2.44-3.777 25.848 25.848 0 0 0-3.087-3.358c-3.49-3.153-7.442-4.744-11.59-4.744h-.006Z"}),(0,o.jsx)("path",{fill:"#DDDEE1",d:"M62.822 59.694c-1.235-1.72-2.562-1.71-3.857-.708-1.215.939-1.54 2.21-.244 3.882l1.48 1.913 4.102-3.174-1.48-1.913Z"}),(0,o.jsx)("path",{fill:"#DDDEE1",d:"m65.334 60.811-6.159 4.762L70.748 80.54l6.16-4.761L65.333 60.81Z"}),(0,o.jsx)("path",{fill:"#B7B9BE",d:"m64.344 61.577-4.178 3.23 3.925 5.076 4.178-3.23-3.925-5.076Z"}),(0,o.jsx)("path",{fill:"#DDDEE1",fillRule:"evenodd",d:"M55.057 33.452 36.213 52.296l-2.468-2.469 18.844-18.844 2.468 2.469Z",clipRule:"evenodd"}),(0,o.jsx)("path",{fill:"#DDDEE1",fillRule:"evenodd",d:"M52.589 52.296 33.745 33.452l2.468-2.469 18.844 18.844-2.468 2.469Z",clipRule:"evenodd"})]})}),a("atwsN",function(e,t){var o=i("l998X");i("42omo");e.exports.EmptyState=({testId:e,header:t,description:n,action:r,renderImage:a})=>(0,o.jsxs)(i("1s5hv").default,{xcss:"_ca0q1ejb _u5f3oahv _19bvoahv _n3td1jfw _y3gn1h6o",testId:e,direction:"column",alignItems:"center",gap:"space.200",children:[a?.(),(0,o.jsx)(i("7hXDW").default,{size:"small",as:"h2",children:t}),n&&(0,o.jsx)(i("iXCQx").default,{as:"p",color:"color.text",children:n}),r&&r]})}),a("lO9iE",function(e,t){var o=i("l998X");let n=(0,i("42omo").forwardRef)(({className:e,minHeight:t,...n},r)=>(0,o.jsx)("div",{ref:r,className:(0,i("gMc0m").default)(["_1e0c1txw _4cvr1fhb _1bah1h6o _1tke16li",e]),...n,style:{"--link-picker-min-height":t}}));e.exports.MinHeightContainer=n}),a("2gcdD",function(e,t){let o=i("4mJKd")(5);e.exports=Promise.all([o("1jsQH"),o("bv8GZ"),o("i5eMd"),o("4DYJ5"),o("gyXEE"),o("hoPZ9")]).then(()=>i("k82rV"))}),a("4mJKd",function(e,t){e.exports=e=>t=>import(i("8tirZ").shardUrl(i("02nRr").resolve(t),e))}),a("8tirZ",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.applyShardToDomain=a,e.exports.domainShardingKey=void 0,e.exports.getDomainShardIndex=n,e.exports.shardUrl=function(e,t){return globalThis[o]?s(e,t):e},e.exports.shardUrlUnchecked=s;let o="__ATLASPACK_ENABLE_DOMAIN_SHARDS";function n(e,t){let o=t+1,n=e.split("").reduce((e,t)=>{let n=(e<<o)-e+t.charCodeAt(0);return n&n},0);return(n%=o)<0&&(n+=o),n}let r=/-\d+$/;function i(e){if(!r.test(e))return e;let t=e.lastIndexOf("-");return e.slice(0,t)}function a(e,t){let o=e.indexOf("."),n=0===t?"":`-${t-1}`;if(-1===o)return`${i(e)}${n}`;let r=i(e.slice(0,o));return`${r}${n}${e.slice(o)}`}function s(e,t){let o=new URL(e),r=n(function(e){let t=e.lastIndexOf("/");if(-1===t||t===e.length-1)throw Error("Expected an absolute URL with a file name, unable to apply sharding.");return e.slice(t+1)}(o.pathname),t);return o.hostname=a(o.hostname,r),o.toString()}e.exports.domainShardingKey=o}),a("02nRr",function(t,o){e(t.exports,"register",()=>n,e=>n=e),e(t.exports,"resolve",()=>r,e=>r=e);var n,r,i=new Map;n=function(e,t){for(var o=0;o<t.length-1;o+=2)i.set(t[o],{baseUrl:e,path:t[o+1]})},r=function(e){var t=i.get(e);if(null==t)throw Error("Could not resolve bundle with id "+e);return new URL(t.path,t.baseUrl).toString()}}),a("DYTht",function(e,t){let o=i("4mJKd")(5);e.exports=Promise.all([o("deyvi"),o("cdeuH"),o("4UPfH"),o("hfFxJ"),o("1Mp9N"),o("2Fu3d")]).then(()=>i("5CXR9"))}),a("8zwJo",function(e,t){let o=i("4mJKd")(5);e.exports=Promise.all([o("6dERU"),o("7gF8f"),o("gd4qs"),o("gofGr"),o("dBb6q"),o("eJgH8")]).then(()=>i("28QMN"))}),a("84kdm",function(e,t){let o=i("4mJKd")(5);e.exports=Promise.all([o("kTurq"),o("djb49"),o("fviv5"),o("2RQvP"),o("7Lkvk")]).then(()=>i("b4NXj"))}),a("kwTsF",function(e,t){let o=i("4mJKd")(5);e.exports=Promise.all([o("j0PWv"),o("ksTQ6"),o("eBoC7"),o("7NpX8"),o("cukQS"),o("5FaEJ")]).then(()=>i("5SuH4"))}),a("9mG71",function(e,t){let o=i("4mJKd")(5);e.exports=Promise.all([o("dlmud"),o("5CGnz"),o("bNv64"),o("bFU3Y"),o("3CucM"),o("9yemY")]).then(()=>i("7TuuZ"))}),a("bMlWv",function(e,t){let o=i("4mJKd")(5);e.exports=Promise.all([o("cbkj0"),o("9Oxgj"),o("4Afgd"),o("exaJ2"),o("lp8Wm"),o("l2LZP")]).then(()=>i("ezgWl"))}),a("fjiBS",function(e,t){let o=i("4mJKd")(5);e.exports=Promise.all([o("17m16"),o("kAg8V"),o("cMubu"),o("hcCcg"),o("cHWSM"),o("35Ssm")]).then(()=>i("gYv97"))}),a("hlzGQ",function(e,t){let o=i("4mJKd")(5);e.exports=Promise.all([o("b4NO6"),o("fM2oh"),o("3fLE9"),o("j9KTb"),o("b37xN"),o("ik6u5")]).then(()=>i("bVNwo"))}),a("bf4mq",function(e,t){let o=i("4mJKd")(5);e.exports=Promise.all([o("1K1Fj"),o("xnqy2"),o("8hOn0"),o("3hjAq"),o("7PjNK"),o("Vt6S9")]).then(()=>i("lxZVf"))}),a("q6JSw",function(e,t){let o=i("4mJKd")(5);e.exports=Promise.all([o("38sfA"),o("awkVi"),o("h4OCL"),o("2bCHJ"),o("ktSfi"),o("9GZ76")]).then(()=>i("hflsJ"))}),a("hIeXr",function(e,t){let o=i("4mJKd")(5);e.exports=Promise.all([o("bjmre"),o("11DLa"),o("bcQs2"),o("fdXnq"),o("iouLY"),o("4sOIV")]).then(()=>i("73LWR"))}),a("cmUnM",function(e,t){let o=i("4mJKd")(5);e.exports=Promise.all([o("asvK9"),o("barSq"),o("aBa7j"),o("cItJR"),o("hPZE5"),o("QTjdE")]).then(()=>i("h0YR4"))}),a("44eXX",function(e,t){let o=i("4mJKd")(5);e.exports=Promise.all([o("7v6wU"),o("a8heY"),o("b544F"),o("SctKm"),o("dzIm8"),o("hrf1M")]).then(()=>i("573SD"))}),a("iww4U",function(e,t){let o=i("4mJKd")(5);e.exports=Promise.all([o("aEpRh"),o("6hlNE"),o("K6fhx"),o("1fJz1"),o("jqwnR"),o("lsloj")]).then(()=>i("8sMYh"))}),a("4WSCh",function(e,t){let o=i("4mJKd")(5);e.exports=Promise.all([o("3fuR9"),o("2bqSD"),o("gZU54"),o("9yA8o"),o("bGhLc"),o("iRKhU")]).then(()=>i("lRfBG"))}),a("9msg5",function(e,t){let o=i("4mJKd")(5);e.exports=Promise.all([o("fMrUo"),o("bJykp"),o("4Wdqb"),o("448N7"),o("9v6ER"),o("aEAsN")]).then(()=>i("hZouV"))}),a("3XoOh",function(e,t){let o=i("4mJKd")(5);e.exports=Promise.all([o("9eNkX"),o("dh2Er"),o("k10Cs"),o("gBDdh"),o("8Mz40"),o("l6YHr")]).then(()=>i("4LH4L"))}),a("khF3L",function(e,t){e.exports=i("4mJKd")(5)("jYGxH").then(()=>i("hlxQj"))}),a("3Shvv",function(e,t){e.exports=i("4mJKd")(5)("czAFw").then(()=>i("gQkbc"))}),a("7MpfQ",function(e,t){e.exports=i("4mJKd")(5)("c0Efy").then(()=>i("lC9hp"))}),a("bbM1s",function(e,t){e.exports=i("4mJKd")(5)("dKBuH").then(()=>i("fzD7h"))}),a("kaYYE",function(e,t){let o=i("4mJKd")(5);e.exports=Promise.all([o("j9OUx"),o("bV8sS"),o("l079e"),o("ebljE"),o("hF4v3"),o("afU9w")]).then(()=>i("6PXdj"))}),a("eRdDH",function(e,t){let o=i("4mJKd")(5);e.exports=Promise.all([o("gDiIK"),o("eLlpV"),o("f1B4n"),o("j4dSZ"),o("1Tuyb"),o("7iCpI")]).then(()=>i("5WXmf"))}),a("iHmmz",function(e,t){let o=i("4mJKd")(5);e.exports=Promise.all([o("9XYQ9"),o("nbjnv"),o("6wr18"),o("8JZKd"),o("kTv6A"),o("7EorR"),o("kHOMt"),o("hhss7"),o("Wowvf"),o("ffEVr"),o("gZGoR"),o("joFPh"),o("c0JsV")]).then(()=>i("cDSVd"))}),a("8i5w2",function(e,t){var o=i("42omo"),n=i("1oCLl");class r extends o.PureComponent{componentDidUpdate(e){e.defaultValue!==this.props.defaultValue&&this.setState({value:this.props.defaultValue})}componentWillUnmount(){window.clearTimeout(this.focusTimeoutId)}render(){let{placeholder:e,width:t,maxLength:o,testId:n,ariaLabel:r,describedById:a,ariaActiveDescendant:s,ariaControls:l,ariaExpanded:d,ariaAutoComplete:c,role:p,inputId:u}=this.props,{value:f}=this.state;return(0,i("9K4OG").jsx)("input",{css:[i("1DCSy").panelTextInput,void 0!==t&&(0,i("1DCSy").panelTextInputWithCustomWidth)(t)],role:p,"aria-autocomplete":c?"list":void 0,"aria-expanded":d,"aria-controls":l,"aria-activedescendant":s,"aria-describedby":a,"data-testid":n||"",type:"text",placeholder:e,value:f,onChange:this.handleChange,onKeyDown:this.handleKeydown,onMouseDown:this.onMouseDown,onBlur:this.onBlur,ref:this.handleRef,maxLength:o,"aria-label":r,"aria-required":this.props?.ariaRequired,"aria-invalid":this.props?.ariaInvalid,id:u})}focus(){let{input:e}=this;if(e){let t="object"==typeof this.props.autoFocus?this.props.autoFocus:{};e.focus(t)}}isUndoEvent(e){let t=(0,n.expValEquals)("platform_editor_hydratable_ui","isEnabled",!0)?(0,i("d7ZU3").getBrowserInfo)():i("d7ZU3").browser;return 90===e.keyCode&&(t.mac&&e.metaKey&&!e.shiftKey||!t.mac&&e.ctrlKey)}isRedoEvent(e){let t=(0,n.expValEquals)("platform_editor_hydratable_ui","isEnabled",!0)?(0,i("d7ZU3").getBrowserInfo)():i("d7ZU3").browser;return!t.mac&&e.ctrlKey&&89===e.keyCode||t.mac&&e.metaKey&&e.shiftKey&&90===e.keyCode||e.ctrlKey&&e.shiftKey&&90===e.keyCode}constructor(e){super(e),this.input=void 0,this.focusTimeoutId=void 0,this.onMouseDown=()=>{let{onMouseDown:e}=this.props;e&&e()},this.onBlur=e=>{let{onBlur:t}=this.props;t&&t(e)},this.handleChange=()=>{let{onChange:e}=this.props;this.input&&this.setState({value:this.input.value}),e&&this.input&&e(this.input.value)},this.handleKeydown=e=>{let{onUndo:t,onRedo:o,onSubmit:n,onCancel:r}=this.props;13===e.keyCode&&n?(e.preventDefault(),n(this.input.value)):27===e.keyCode&&r?r(e):"function"==typeof t&&this.isUndoEvent(e)?(e.preventDefault(),t()):"function"==typeof o&&this.isRedoEvent(e)&&(e.preventDefault(),o()),this.props.onKeyDown&&this.props.onKeyDown(e)},this.handleRef=e=>{e instanceof HTMLInputElement?(this.input=e,this.props.autoFocus&&(this.focusTimeoutId=window.setTimeout(()=>this.focus()))):this.input=void 0},this.state={value:e.defaultValue||""}}}e.exports.default=r}),a("48vaT",function(e,t){var o=i("42omo");let n=(0,i("cgtv4").defineMessages)({story:{id:"fabric.editor.story",defaultMessage:"Story"},epic:{id:"fabric.editor.epic",defaultMessage:"Epic"},task:{id:"fabric.editor.task",defaultMessage:"Task"},bug:{id:"fabric.editor.bug",defaultMessage:"Bug"},subTask:{id:"fabric.editor.subTask",defaultMessage:"Sub-task"},improvement:{id:"fabric.editor.improvement",defaultMessage:"Improvement"},defaultAltText:{id:"fabric.editor.defaultAltText",defaultMessage:"Document"}}),r=(e,t)=>{let o=t.formatMessage(n.defaultAltText);return e.includes("story.svg")&&(o=t.formatMessage(n.story)),e.includes("epic.svg")&&(o=t.formatMessage(n.epic)),e.includes("avatarId=10318")&&(o=t.formatMessage(n.task)),e.includes("avatarId=10303")&&(o=t.formatMessage(n.bug)),e.includes("avatarId=10518")&&(o=t.formatMessage(n.subTask)),e.includes("avatarId=10310")&&(o=t.formatMessage(n.improvement)),o},a=(0,i("9K4OG").css)({backgroundColor:"transparent",padding:"var(--ds-space-100, 8px) var(--ds-space-150, 12px)",cursor:"pointer",display:"flex",marginTop:0}),s={name:"172qvh2",styles:"background-color:var(--ds-background-neutral-subtle-hovered, #0515240F)"},l={name:"d3v9zr",styles:"overflow:hidden"},d={name:"15va48x",styles:"color:var(--ds-text, #292A2E);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;line-height:20px"},c=(0,i("9K4OG").css)({color:"var(--ds-text-subtlest, #6B6E76)",lineHeight:"14px",fontSize:(0,i("aFUXX").relativeFontSizeToBase16)(11)}),p={name:"r2c2s1",styles:"min-width:16px;margin-top:var(--ds-space-050, 4px);margin-right:var(--ds-space-150, 12px);img{max-width:16px;}"},u=(0,o.forwardRef)((e,t)=>{let{id:n,item:u,onFocus:f,onKeyDown:h,onMouseEnter:m,onMouseLeave:g,onMouseMove:T,onSelect:E,selected:b,intl:S}=e,y=(0,o.useCallback)(e=>{e.preventDefault(),E(u.url,u.name)},[E,u.url,u.name]),_=(0,o.useCallback)(e=>{"Enter"===e.key&&E(u.url,u.name),h?.(e)},[E,h,u.url,u.name]),C=(0,o.useCallback)(()=>{T?.(u.objectId)},[T,u.objectId]),I=(0,o.useCallback)(()=>{m?.(u.objectId)},[m,u.objectId]),O=(0,o.useCallback)(()=>{g?.(u.objectId)},[g,u.objectId]);return(0,i("9K4OG").jsx)("div",{ref:t,css:[a,b&&s],role:"option",tabIndex:0,id:n,"aria-selected":b,"data-testid":"link-search-list-item",onFocus:f,onKeyDown:_,onMouseMove:C,onMouseEnter:I,onMouseLeave:O,onClick:y},u.icon?(0,i("9K4OG").jsx)("span",{css:p},u.icon):u.iconUrl?(0,i("9K4OG").jsx)("span",{css:p},(0,i("9K4OG").jsx)("img",{src:u.iconUrl,alt:r(u.iconUrl,S)})):null,(0,i("9K4OG").jsx)("span",{css:l},(0,i("9K4OG").jsx)("div",{css:d},u.name),(0,i("9K4OG").jsx)("div",{"data-testid":"link-search-list-item-container",css:c},u.container,(()=>{let e=(0,i("1j5Rt").transformTimeStamp)(S,u.lastViewedDate,u.lastUpdatedDate);return e&&(0,i("9K4OG").jsx)(o.Fragment,null,"  •",(0,i("9K4OG").jsx)("span",{className:"link-search-timestamp","data-testid":"link-search-timestamp"},"  ",e.pageAction," ",e.dateString," ",e.timeSince||""))})())))}),f=(0,i("gmMgo").default)(u,{forwardRef:!0}),h=(0,i("9K4OG").css)({paddingTop:0,marginTop:"var(--ds-space-150, 12px)",borderTop:"var(--ds-border-width, 1px) solid var(--ds-border, #0B120E24)"}),m={name:"q64ud4",styles:"text-align:center;min-height:80px;margin-top:var(--ds-space-400, 32px)"},g={name:"n1lsvi",styles:"padding:0;list-style:none"};e.exports.default=({listItemRefCallback:e,onFocus:t,onKeyDown:o,onSelect:n,onMouseMove:r,onMouseEnter:a,onMouseLeave:s,items:l,selectedIndex:d,isLoading:c,ariaControls:p,role:u,id:T})=>{let E,b;return l&&l.length>0&&(E=(0,i("9K4OG").jsx)("ul",{css:g,id:T,role:u,"aria-controls":p,"data-testid":`${T}--items`},l.map((l,c)=>(0,i("9K4OG").jsx)(f,{id:`link-search-list-item-${c}`,item:l,selected:d===c,onFocus:()=>t?.(c),onKeyDown:o,onMouseMove:r,onMouseEnter:a,onMouseLeave:s,onSelect:n,key:l.objectId,ref:t=>e?.(t,l.objectId)})))),c&&(b=(0,i("9K4OG").jsx)("div",{id:T,"data-testid":`${T}--loading`,css:m},(0,i("9K4OG").jsx)(i("9hlns").default,{size:"medium",interactionName:"link-search-spinner"}))),(0,i("9K4OG").jsx)("div",{css:h},E,b)}}),a("3a8Ut",function(e,t){let o=(0,i("9K4OG").css)({display:"flex",lineHeight:0,padding:"var(--ds-space-075, 6px) 0",alignItems:"center"}),n=(0,i("9K4OG").css)({display:"flex",flexDirection:"column",overflow:"auto",padding:0,width:`${i("9fPrY").RECENT_SEARCH_WIDTH_WITHOUT_ITEMS_IN_PX}px`,lineHeight:"initial"}),r=(0,i("9K4OG").css)({width:`${i("9fPrY").RECENT_SEARCH_WIDTH_IN_PX}px`});e.exports.inputWrapper=o,e.exports.container=n,e.exports.containerWithProvider=r,e.exports.narrowContainerWidth={name:"1raezz8",styles:"width:292px"}}),a("9fPrY",function(e,t){e.exports.RECENT_SEARCH_WIDTH_IN_PX=420,e.exports.RECENT_SEARCH_WIDTH_WITHOUT_ITEMS_IN_PX=360,e.exports.RECENT_SEARCH_HEIGHT_IN_PX=360,e.exports.LINKPICKER_HEIGHT_IN_PX=570}),a("1eLzC",function(e,t){var o=i("42omo"),n=i("dZ8uq");e.exports.UserIntentPopupWrapper=({userIntent:e="popupOpen",children:t,api:r})=>((0,o.useEffect)(()=>(r?.core.actions.execute(r?.userIntent?.commands.setCurrentUserIntent((0,n.expValEqualsNoExposure)("platform_editor_lovability_user_intent","isEnabled",!0)?e:"popupOpen")),()=>{(0,n.expValEqualsNoExposure)("platform_editor_lovability_user_intent","isEnabled",!0)&&e!==r?.userIntent?.sharedState.currentState()?.currentUserIntent||((0,i("dh538").fg)("platform_editor_fix_popup_user_intent")?setTimeout(()=>{r?.core.actions.execute(r?.userIntent?.commands.setCurrentUserIntent("default"))},0):r?.core.actions.execute(r?.userIntent?.commands.setCurrentUserIntent("default")))}),[]),t)}),a("3HEm4",function(t,o){e(t.exports,"pastePlugin",()=>i("36iDo").pastePlugin),i("36iDo")}),a("36iDo",function(e,o){var n,r,a=i("dQl1W");let s=(e,t,o)=>{if(!o)return e.content;let n={...e.attrs,localId:i("fO7hX").uuid.generate()};return t.nodes.syncBlock.create(n,null,[...e.marks])},l=(e,t)=>t?e:e.content,d=(e,t,o)=>{let n="fabric-editor"===o;return e=(0,i("3Ter7").mapSlice)(e,e=>e.type===t.nodes.syncBlock?s(e,t,n):e.type===t.nodes.bodiedSyncBlock?l(e,n):e)},c=e=>{let t=new DOMParser().parseFromString(e,"text/html");return t.querySelectorAll(`div.${i("ly3wu").BreakoutCssClassName.BREAKOUT_MARK}`).forEach(e=>{let t=e.querySelector(`:scope > div[${i("e6n00").SyncBlockRendererDataAttributeName}]`);t&&e.replaceWith(t)}),t.body.innerHTML},p=(e,t)=>{let o=e.content.firstChild;if(1===e.content.childCount&&o&&"decisionItem"===o.type.name){let n=t.nodes.decisionList.create({},o);return new(0,i("5SAOw").Slice)(i("5SAOw").Fragment.from(n),e.openStart,e.openEnd)}return e};var u=i("8m4tT"),f=i("2v1PW"),h=i("1oCLl"),m=i("iu6m9"),g=((n={}).START_TRACKING_PASTED_MACRO_POSITIONS="START_TRACKING_PASTED_MACRO_POSITIONS",n.STOP_TRACKING_PASTED_MACRO_POSITIONS="STOP_TRACKING_PASTED_MACRO_POSITIONS",n.ON_PASTE="ON_PASTE",n);let T=new(0,i("ks2lK").PluginKey)("pastePlugin"),{createPluginState:E,createCommand:b,getPluginState:S}=(0,i("lkJUe").pluginFactory)(T,(e,t)=>{switch(t.type){case g.START_TRACKING_PASTED_MACRO_POSITIONS:return{...e,pastedMacroPositions:{...e.pastedMacroPositions,...t.pastedMacroPositions}};case g.STOP_TRACKING_PASTED_MACRO_POSITIONS:{let o=Object.fromEntries(Object.entries(e.pastedMacroPositions).filter(([e])=>!t.pastedMacroPositionKeys.includes(e)));return{...e,pastedMacroPositions:o}}case g.ON_PASTE:return{...e,lastContentPasted:t.contentPasted};default:return e}},{mapping:(e,t)=>{if(e.docChanged){let o=!1,n=Object.entries(t.pastedMacroPositions).reduce((t,[n,r])=>{let i=e.mapping.map(r);return r!==i&&(o=!0),t[n]=e.mapping.map(r),t},{});if(o)return{...t,pastedMacroPositions:n}}return t}}),y=e=>b(()=>({type:g.START_TRACKING_PASTED_MACRO_POSITIONS,pastedMacroPositions:e})),_=e=>b(()=>({type:g.STOP_TRACKING_PASTED_MACRO_POSITIONS,pastedMacroPositionKeys:e})),C=/^\s*[\*\-\u2022](\s+|\s+$)/,I=/^\s*\d[\.\)](\s+|$)/,O=(e,t)=>!!(e&&e.type===t.nodes.listItem),k=(e,t)=>{if(!e||!e.text)return null;let{bulletList:o,orderedList:n}=t.nodes;return[{node:o,matcher:C},{node:n,matcher:I}].reduce((t,o)=>{if(t)return t;let n=e.text.match(o.matcher);return n?[o.node,n[0].length]:t},null)},v=(e,t)=>{let o=[],n=[];return e.forEach(e=>{e.type===t.nodes.hardBreak?(0!==n.length&&o.push(n),n=[e]):n.push(e)}),o.push(n),o},x=(e,t,o)=>{let n,r=v((0,i("3Ter7").mapChildren)(e.content,e=>e),o),{paragraph:a,hardBreak:s,listItem:l,orderedList:d}=o.nodes,c=[],p=[];for(var u=0;u<r.length;u+=1){let n,f=r[u];if(0===u)if(f[0]?.type===s){p.push(f);continue}else n=k(f[0],o);else{if(1===f.length){p.push(f);continue}n=k(f[1],o)}if(!n||O(t,o)){p.push(f);continue}let[h,m]=n,g=f.find(e=>e.type!==s),T=f.slice(f.findIndex(e=>e.type!==s)),E=g?.text?.substr(m),b=E?[o.text(E,g?.marks),...T.slice(1)]:T.slice(1),S=l?.createAndFill(void 0,a.createChecked(void 0,b));if(!S){p.push(f);continue}let y=h===d?{order:parseInt(g.text.split(".")[0])}:void 0,_=h.createChecked(y,[S]);0!==p.length&&a.validContent(i("5SAOw").Fragment.from(p.flat()))&&(c.push(a.createAndFill(e.attrs,p.flat(),e.marks)),p=[]),c.push(_)}0!==p.length&&a.validContent(i("5SAOw").Fragment.from(p.flat()))&&c.push(o.nodes.paragraph.createAndFill(e.attrs,p.flat(),e.marks));let f=c.flat(),h=i("ks2lK").EditorState.create({schema:o});return(0,i("astHL").autoJoin)((e,t)=>{if(!t)return!1;let n=f.some(e=>e.type===o.nodes.bulletList||e.type===o.nodes.orderedList);return(!f.some(e=>e.isText)||!!n)&&(t(e.tr.replaceWith(0,2,f)),!0)},(e,t)=>(0,i("irKZA").isListNode)(e)&&(0,i("irKZA").isListNode)(t))(h,e=>{n=e}),n?n.doc.content:i("5SAOw").Fragment.from(f)},N=(e,t)=>(0,i("3Ter7").mapSlice)(e,(e,o)=>e.type===t.nodes.paragraph?x(e,o,t):e),A=(e,t)=>{let o=!1;if(e.content.forEach(e=>{o=o||e.marks.some(e=>e.type===t.marks.code)}),t.nodes.paragraph.validContent(e.content)&&!o){let o=P({fragment:e.content,schema:t});return new(0,i("5SAOw").Slice)(o,e.openStart+1,e.openEnd+1)}return(0,i("3Ter7").mapSlice)(e,e=>e.type===t.nodes.paragraph?P({fragment:e.content,blockMarks:e.marks,schema:t}):e)},P=({fragment:e,blockMarks:t=[],schema:o})=>{let n=[],r=[],a=null,{hardBreak:s,paragraph:l}=o.nodes;return e.forEach((e,d)=>{if(!o.nodes.paragraph.validContent(i("5SAOw").Fragment.from(e)))return void n.push(e);if(0===d&&e.type===s){n.push(l.createChecked(void 0,r,[...t])),a=e;return}if(a&&a.type===s&&e.type===s){r.pop(),n.push(l.createChecked(void 0,r,[...t])),r=[];return}r.push(e),a=e}),r.length&&n.push(l.createChecked(void 0,r,[...t])),i("5SAOw").Fragment.from(n.length?n:[l.createAndFill(void 0,void 0,[...t])])},M=e=>!!e&&(e.indexOf("image/")>-1||e.indexOf("video/")>-1),R=(e,t)=>{let{mediaGroup:o,mediaSingle:n,media:r}=t.nodes;return(0,i("3Ter7").mapSlice)(e,(e,t)=>{if(!t&&e.type===r)if(n&&(M(e.attrs.__fileMimeType)||"external"===e.attrs.type))return n.createChecked({},e);else return o.createChecked({},[e]);return e})},w=(e,t,o)=>{let{mediaInline:n,mediaSingle:r,media:a}=t.nodes,s=(0,i("3Ter7").mapSlice)(e,e=>{if(e.type===r){let t=o?.media?.sharedState.currentState();return t?.mediaOptions?.allowPixelResizing?r.createChecked({width:e.attrs.width||i("gAARK").DEFAULT_IMAGE_WIDTH,widthType:e.attrs.widthType||"pixel",layout:e.attrs.layout},e.content,e.marks):e}return e});return(0,i("3Ter7").mapSlice)(s,e=>{let t=(0,i("fCrf0").getRandomHex)(8);return e.type===a?(o?.core.actions.execute(o?.media?.commands.trackMediaPaste(e.attrs)),a.createChecked({...e.attrs,__external:"external"===e.attrs.type,__mediaTraceId:"external"===e.attrs.type?null:t},e.content,e.marks)):"mediaInline"===e.type.name?(o?.core.actions.execute(o?.media?.commands.trackMediaPaste(e.attrs)),n.createChecked({...e.attrs,__mediaTraceId:t},e.content,e.marks)):e})},L=e=>"0"===e.style.opacity||"none"===e.style.display||"hidden"===e.style.visibility,B=["DIV","TD","BLOCKQUOTE"];function D(e){return!!e&&-1!==B.indexOf(e.tagName)}let U=e=>{let t=new DOMParser().parseFromString(e,"text/html").body,o=t.querySelector('b[id^="docs-internal-guid-"]');o&&(0,i("4vlwG").unwrap)(t,o);let n=t.querySelectorAll("img");return n.length?(n.forEach(e=>{let o=e.parentElement;if(!o)return;if(L(o)||L(e))return void o.removeChild(e);if(D(o)||o instanceof HTMLSpanElement&&o.closest('[class*="emoji-common"]'))return;let n=(0,i("4vlwG").walkUpTreeUntil)(o,e=>e.parentElement===t||D(e.parentElement));n&&n.parentElement&&(n.parentElement.insertBefore(e,n.nextElementSibling||n),o.innerText=o.innerText.trim(),(0,i("4vlwG").removeNestedEmptyEls)(o))}),t.lastElementChild&&"BR"===t.lastElementChild.tagName&&t.removeChild(t.lastElementChild),t.innerHTML):e};function K(e){return!!e&&e.indexOf("urn:schemas-microsoft-com:office:word")>=0}function j(e){return!!e&&e.indexOf("urn:schemas-microsoft-com:office:excel")>=0}function F(e){let t=e.clipboardData.getData("text/html");if(t&&t.match(/class=\"\s?author-d-.+"/gim))return"dropbox-paper";if(K(t))return"microsoft-word";if(j(t))return"microsoft-excel";if(t&&t.match(/id=\"docs-internal-guid-.+"/gim))return"google-docs";if(t&&t.match(/data-sheets-.+=/gim))return"google-spreadsheets";if(t&&t.indexOf('content="Cocoa HTML Writer"')>=0)return"apple-pages";if(t&&t.indexOf('data-pm-slice="')>=0)return"fabric-editor";return"uncategorized"}function G(...e){return t=>{let o=!0;return t.content.descendants(t=>o=o&&e.indexOf(t.type)>-1),o}}function H(e,t){return o=>{let{marks:{code:n,link:r,annotation:a}}=e;if(!Array.isArray(t)||0===t.length)return o;let s=i("5SAOw").Slice.fromJSON(e,o.toJSON()||{}),l=[r,a];return s.content.descendants((o,a,s)=>o.isText&&s&&s.isBlock?(o.marks=[...o.marks&&!n.isInSet(t)&&o.marks.filter(e=>l.includes(e.type))||[],...s.type.allowedMarks(t).filter(e=>e.type!==r)].sort((0,i("2oGxU").sortByOrderWithTypeName)("marks")),!1):(o.isInline&&["inlineCard","emoji","status","date","mention"].includes(o.type.name)&&s&&s.isBlock&&(o.marks=[...o.marks,...s.type.allowedMarks(t).filter(t=>t.type===e.marks.annotation)]),!0)),s}}function z(e){if(!e)return!1;let{type:t}=e,o=t.createAndFill();return o&&o.nodeSize===e.nodeSize&&o.content.eq(e.content)&&i("5SAOw").Mark.sameSet(o.marks,e.marks)}function V(e){var t;if(e instanceof i("ks2lK").NodeSelection&&(t=e.node)&&"panel"===t.type.name)return e.node;let{doc:{type:{schema:{nodes:{panel:o}}}}}=e.$from,n=(0,u.findParentNodeOfType)(o)(e);return n?n.node:null}let W=e=>!!e&&(e.includes("</a></a>")||e.includes('"></a><a')),q=e=>W(e)?e.split(/(?=<a)/).filter(e=>!(e.includes("<a")&&e.includes('"></a>'))&&!(e.includes("<a")&&!e.includes("</a>"))).join("").replace(/<\/a><\/a>/gi,"</a>").replace(/<a>/gi,"<a"):e,X=(e,t,o)=>{if((0,i("iYC9s").isTableSelected)(e.selection)){let{totalRowCount:n,totalColumnCount:r}=(0,i("9KolL").getSelectedTableInfo)(e.selection);return o?.attachAnalyticsEvent({action:i("3824I").TABLE_ACTION.REPLACED,actionSubject:i("d925B").ACTION_SUBJECT.TABLE,attributes:{totalColumnCount:r,totalRowCount:n,inputMethod:i("d925B").INPUT_METHOD.CLIPBOARD},eventType:i("d925B").EVENT_TYPE.TRACK})(t),t}return e.tr},$=(e,t,o)=>{let{blockCard:n,inlineCard:r}=t.schema.nodes,a=[];return(0,i("3Ter7").mapChildren)(e.content,(e,i,s)=>{e.type!==n||Y(t,s,o?.allowBlockCards??!1)?a.push(e):a.push(r.createChecked(e.attrs,e.content,e.marks))}),new(0,i("5SAOw").Slice)(i("5SAOw").Fragment.fromArray(a),e.openStart,e.openEnd)},Y=(e,t,o)=>o&&(0,i("7iE7T").isSupportedInParent)(e,t);var J=i("cUcZ5");let Z=(e,t)=>{if((0,i("iYC9s").isTableSelected)(e.selection)){let o=(0,i("id9O1").findTable)(e.selection);if(o){let n="string"==typeof t?new(0,i("5SAOw").Slice)(i("5SAOw").Fragment.from(e.schema.text(t)),0,0):t,r=e.tr.replace(o.pos,o.pos+o.node.nodeSize,n);return r.setSelection(i("ks2lK").TextSelection.create(r.doc,o.pos+n.size+1)),r}}return e.tr};function Q(e){return({tr:t,slice:o,schema:n})=>{let{selection:r,selection:{$to:a,$from:s}}=t,{from:l}=r;if(e&&!e.type.validContent(i("5SAOw").Fragment.from(o.content))){let e=a.pos+1;if(n){let t=(0,u.findParentNodeOfType)(n.nodes.multiBodiedExtension)(r);t&&!t.node.type.validContent(i("5SAOw").Fragment.from(o.content))&&(e=t.start+t.node.nodeSize-1)}t.replaceRange(e,e,o);let l=t.doc.resolve(s.before()).node();if(l&&l.childCount>1&&l.firstChild?.type.name==="paragraph"&&(0,i("kTbzR").isEmptyParagraph)(l.firstChild)){let e=t.doc.resolve(s.before()).posAtIndex(0),o=t.doc.resolve(s.before()).posAtIndex(1);o-e==2&&t.delete(e,o)}t.setSelection(i("ks2lK").TextSelection.near(t.doc.resolve(e+o.content.size-o.openStart-o.openEnd+1)));return}let d=new(0,i("aXG5V").Transform)(t.doc.type.createAndFill());d.replaceRange(0,d.doc.content.size,o);let c=d.doc.slice(0),p=e.copy(c.content),f=r instanceof i("ks2lK").NodeSelection?r.node:null,h=f?l:t.doc.resolve(l).start(),m=f?l+f.nodeSize:h;t.replaceRangeWith(h,m,p),t.setSelection(i("ks2lK").TextSelection.near(t.doc.resolve(s.pos+p.content.size),-1))}}function ee({tr:e,slice:t}){let{schema:o}=e.doc.type;e.replaceSelection(new(0,i("5SAOw").Slice)(i("5SAOw").Fragment.from(o.nodes.blockquote.createAndFill()),0,0)),et({tr:e}),e.replaceSelection(t)}function et({tr:e}){let t=e.steps[0];if(!(t instanceof i("aXG5V").ReplaceStep))return e;let o=e.mapping.map(t.to),n=i("ks2lK").Selection.findFrom(e.doc.resolve(Math.min(o,e.doc.content.size)),-1);n&&e.setSelection(n)}i("l9G9n");let eo=e=>{let{expand:t,nestedExpand:o}=e.schema.nodes;return(0,u.hasParentNodeOfType)([t,o])(e.selection)};function en(e,...t){let o=[e,...t];return function(e){return o.reduceRight((e,t)=>t(e),e)}}let er=(e,t)=>{let{$from:o,$to:n,from:r,to:i}=e,a=t?t(o)||t(n):null,s=a?.parent;if(!a||!s)return!1;let l=o.pos<n.pos?a.pos+o.depth-1:a.pos+n.depth-1,d=o.pos<n.pos?a.pos+s.nodeSize-n.depth-1:a.pos+s.nodeSize-o.depth-1;return!!l&&!!d&&(r<i?l>=o.pos&&d<=n.pos:r>i&&l>=n.pos&&d<=o.pos)},ei=(e,t)=>{let o=e.nodeAt(t);if(!o||!o.isTextblock)return null;let n=t+1,r=n+o.content.size,a=Math.max(0,Math.min(n,e.content.size)),s=Math.max(0,Math.min(r,e.content.size));if(s<=a)return null;let l=i("ks2lK").TextSelection.findFrom(e.resolve(a),1,!0),d=i("ks2lK").TextSelection.findFrom(e.resolve(s),-1,!0);if(!l||!d)return null;let c=l.$from.pos,p=d.$to.pos;return p>c?{from:c,to:p}:null};async function ea(e,t,o){if(!o.provider)throw Error("No card provider found");let n=await o.provider;return await n.resolve(e,t)}function es(e,t,o,n,r){if(o){let a,s,l=o.state.tr.selection;return s="number"==typeof n&&"number"==typeof r?(a=o.state.tr.replaceRange(n,r,e)).mapping.map(n,-1):(a=o.state.tr.replaceSelection(e)).mapping.map(l.from,-1),o.dispatch(a),o.dispatch((0,i("ke2AI").closeHistory)(o.state.tr).replaceRangeWith(s,s+e.size,t).scrollIntoView()),!0}return!1}function el(e,o,n,r,a,s){return(l,d,c)=>{let p=null;if(s){let t=s(e);t&&(p=i("5SAOw").Node.fromJSON(l.schema,t))}if(p||(p=r?.(l,e)??null),p){if(a&&a.resolveBeforeMacros&&a.resolveBeforeMacros.length){if(0>a.resolveBeforeMacros.indexOf(p.attrs.extensionKey))return es(o,p,c);if(!c)throw Error("View is missing");let r=t(J)(),i=`handleMacroAutoConvert-from-${r}`,s=`handleMacroAutoConvert-to-${r}`;return y({[i]:l.selection.from,[s]:l.selection.to})(l,d),ea(e,"inline",a).then(()=>{let{pastedMacroPositions:e}=S(c.state);d&&ec(o,n,e[i],e[s])(c.state,d)}).catch(()=>{let{pastedMacroPositions:e}=S(c.state);es(o,p,c,e[i],e[s])}).finally(()=>{_([i,s])(c.state,d)}),!0}return es(o,p,c)}return!!p}}let ed=e=>{let t=!1;return e.content.forEach(e=>{("expand"===e.type.name||"nestedExpand"===e.type.name)&&(t=!0)}),t};function ec(e,t,o,n){return(r,a)=>{let s=(0,i("ke2AI").closeHistory)(r.tr),l="number"==typeof o?o:s.selection.from;"number"==typeof o&&"number"==typeof n?s.replaceRange(o,n,e):s.replaceSelection(e);let d=s.doc.resolve(Math.min(l+e.size,s.doc.content.size));return s.setSelection(i("ks2lK").TextSelection.near(d,-1)),t?.(r,s,i("d925B").INPUT_METHOD.CLIPBOARD),a&&a(s.scrollIntoView()),!0}}let ep=e=>t=>(o,n)=>{let r=Z(o,t);return!!(r=X(o,r,e)).docChanged&&(n&&n(r),!0)};function eu(e,t){return!!((0,i("l9G9n").isInListItem)(e)&&["taskList","taskItem"].includes(t.content.firstChild?.type?.name||""))}function ef(e){let{selection:t,tr:o}=e,{orderedList:n,bulletList:r,listItem:a}=e.schema.nodes,s=(0,u.findParentNodeOfType)(a)(t),l=(0,u.findParentNodeOfType)([r,n])(t);if(!s||!l)return!1;let d=(0,u.findParentNodeOfTypeClosestToPos)(o.doc.resolve(l.pos),[r,n]),c=!1;return s.node.content.forEach(e=>{(0,i("irKZA").isListNode)(e)&&(c=!0)}),c||!!d}let eh={url:i("aSgIe").PasteContents.url,paragraph:i("aSgIe").PasteContents.text,bulletList:i("aSgIe").PasteContents.bulletList,orderedList:i("aSgIe").PasteContents.orderedList,heading:i("aSgIe").PasteContents.heading,blockquote:i("aSgIe").PasteContents.blockquote,codeBlock:i("aSgIe").PasteContents.codeBlock,panel:i("aSgIe").PasteContents.panel,rule:i("aSgIe").PasteContents.rule,mediaSingle:i("aSgIe").PasteContents.mediaSingle,mediaCard:i("aSgIe").PasteContents.mediaCard,mediaGroup:i("aSgIe").PasteContents.mediaGroup,table:i("aSgIe").PasteContents.table,tableCells:i("aSgIe").PasteContents.tableCells,tableHeader:i("aSgIe").PasteContents.tableHeader,tableRow:i("aSgIe").PasteContents.tableRow,decisionList:i("aSgIe").PasteContents.decisionList,decisionItem:i("aSgIe").PasteContents.decisionItem,taskList:i("aSgIe").PasteContents.taskItem,extension:i("aSgIe").PasteContents.extension,bodiedExtension:i("aSgIe").PasteContents.bodiedExtension,blockCard:i("aSgIe").PasteContents.blockCard,layoutSection:i("aSgIe").PasteContents.layoutSection},em={blockquote:i("d925B").ACTION_SUBJECT_ID.PASTE_BLOCKQUOTE,blockCard:i("d925B").ACTION_SUBJECT_ID.PASTE_BLOCK_CARD,bodiedExtension:i("d925B").ACTION_SUBJECT_ID.PASTE_BODIED_EXTENSION,bulletList:i("d925B").ACTION_SUBJECT_ID.PASTE_BULLET_LIST,codeBlock:i("d925B").ACTION_SUBJECT_ID.PASTE_CODE_BLOCK,decisionList:i("d925B").ACTION_SUBJECT_ID.PASTE_DECISION_LIST,extension:i("d925B").ACTION_SUBJECT_ID.PASTE_EXTENSION,heading:i("d925B").ACTION_SUBJECT_ID.PASTE_HEADING,mediaGroup:i("d925B").ACTION_SUBJECT_ID.PASTE_MEDIA_GROUP,mediaSingle:i("d925B").ACTION_SUBJECT_ID.PASTE_MEDIA_SINGLE,orderedList:i("d925B").ACTION_SUBJECT_ID.PASTE_ORDERED_LIST,panel:i("d925B").ACTION_SUBJECT_ID.PASTE_PANEL,rule:i("d925B").ACTION_SUBJECT_ID.PASTE_RULE,table:i("d925B").ACTION_SUBJECT_ID.PASTE_TABLE,tableCell:i("d925B").ACTION_SUBJECT_ID.PASTE_TABLE_CELL,tableHeader:i("d925B").ACTION_SUBJECT_ID.PASTE_TABLE_HEADER,tableRow:i("d925B").ACTION_SUBJECT_ID.PASTE_TABLE_ROW,taskList:i("d925B").ACTION_SUBJECT_ID.PASTE_TASK_LIST};function eg({selection:e,schema:t}){let{nodes:{paragraph:o,listItem:n,taskItem:r,decisionItem:a}}=t,s=(0,u.findParentNode)(e=>e.type!==o&&e.type!==n&&e.type!==r&&e.type!==a)(e);return s?em[s.node.type.name]||i("d925B").ACTION_SUBJECT_ID.PASTE_PARAGRAPH:i("d925B").ACTION_SUBJECT_ID.PASTE_PARAGRAPH}function eT(e,t,o){return{action:i("d925B").ACTION.PASTED,actionSubject:i("d925B").ACTION_SUBJECT.DOCUMENT,actionSubjectId:e,eventType:i("d925B").EVENT_TYPE.TRACK,attributes:{inputMethod:i("d925B").INPUT_METHOD.KEYBOARD,...t},...o&&o.length>0?{nonPrivacySafeAttributes:{linkDomain:o}}:{}}}function eE(e,t,o,n){return r=>{var a;let s,l=e.clipboardData?e.clipboardData.getData("text/plain")||e.clipboardData.getData("text/uri-list"):"",d=eg({selection:r,schema:r.$from.doc.type.schema}),c=t.size,p=function({schema:e,slice:t}){let{nodes:{paragraph:o},marks:{link:n}}=e,r=new Set;return(t.content.forEach(e=>{if(e.type!==o||0!==e.content.size){if("text"===e.type.name&&n.isInSet(e.marks)||e.type===o&&e.rangeHasMark(0,e.nodeSize-2,n))return void r.add("url");r.add(e.type.name)}}),r.size>1)?i("aSgIe").PasteContents.mixed:0===r.size?i("aSgIe").PasteContents.uncategorized:eh[r.values().next().value]||i("aSgIe").PasteContents.uncategorized}({schema:r.$from.doc.type.schema,slice:t}),u=[],f=((0,i("3Ter7").mapSlice)(t,e=>(("media"===e.type.name||"mediaInline"===e.type.name)&&(s=e.attrs.__mediaTraceId),e)),s);if((p===i("aSgIe").PasteContents.url||p===i("aSgIe").PasteContents.mixed)&&(0,i("3Ter7").mapSlice)(t,e=>{let t=e.marks.find(e=>"link"===e.type.name);return t&&u.push(t.attrs.href),e}),o.asPlain)return a=u.length,{action:i("d925B").ACTION.PASTED_AS_PLAIN,actionSubject:i("d925B").ACTION_SUBJECT.DOCUMENT,actionSubjectId:d,eventType:i("d925B").EVENT_TYPE.TRACK,attributes:{inputMethod:i("d925B").INPUT_METHOD.KEYBOARD,pasteSize:l.length,linksInPasteCount:a}};let h=F(e),m=[],g=[];if(t.content.descendants(e=>{"mention"===e.type.name&&(m.push(e.attrs.id),g.push(e.attrs.localId))}),n?.mention?.actions?.announceMentionsInsertion){let e=[];t.content.descendants(t=>{if("mention"===t.type.name&&e.push({type:"added",id:t.attrs.id,localId:t.attrs.localId,method:"pasted"}),"taskItem"===t.type.name)return t.content.forEach(o=>{"mention"===o.type.name&&e.push({type:"added",localId:o.attrs.localId,id:o.attrs.id,taskLocalId:t.attrs.localId,method:"pasted"})}),!1}),n?.mention?.actions?.announceMentionsInsertion(e)}if(o.type===i("aSgIe").PasteTypes.plain)return eT(d,{pasteSize:l.length,type:o.type,content:i("aSgIe").PasteContents.text,source:h,hyperlinkPasteOnText:!1,linksInPasteCount:u.length,mentionIds:m,mentionLocalIds:g,pasteSplitList:o.pasteSplitList});let T=u.map(i("b0F8r").getLinkDomain);return eT(d,{type:o.type,pasteSize:c,content:p,source:h,hyperlinkPasteOnText:!!o.hyperlinkPasteOnText,linksInPasteCount:u.length,mediaTraceId:f,mentionIds:m,mentionLocalIds:g,pasteSplitList:o.pasteSplitList},T)}}let eb=e=>(t,o,n,r)=>{let i=t.state.tr,a=eE(o,n,r)(t.state.selection);e?.attachAnalyticsEvent(a)(i),t.dispatch(i)},eS=e=>(t,o,n)=>ex(e)(eE(o,n,{type:i("aSgIe").PasteTypes.plain,asPlain:!0}))((t,o,r)=>{if(!r)return!1;if(r.shiftKey||r.input?.shiftKey){let r=(0,i("ke2AI").closeHistory)(t.tr),{selection:a}=r;return r=Z(t,n),(r=X(t,r,e)).docChanged||r.replaceSelection(n),(t.storedMarks||[]).forEach(e=>{r.addMark(a.from,a.from+n.size,e)}),r.scrollIntoView(),o&&o(r),!0}return!1}),ey=(e,t,o,n,r)=>{var a;return ex(r?.analytics?.actions)(eE(t,o,{type:n}))((a=r?.card?.actions?.queueCardsFromChangedTr,(e,t)=>{let{schema:n,tr:{selection:r}}=e,{marks:{code:s},nodes:{decisionItem:l,emoji:d,hardBreak:c,mention:p,paragraph:f,taskItem:m,text:g,panel:T,bulletList:E,orderedList:b,taskList:S,listItem:y,expand:_,heading:C,codeBlock:I}}=n,O=e.selection instanceof i("ks2lK").NodeSelection&&["decisionList","decisionItem","taskList","taskItem"].includes(e.selection.node.type.name),k=(0,u.hasParentNodeOfType)([l,m,T])(e.selection),v=(0,u.hasParentNodeOfType)([I])(e.selection),x=(0,u.hasParentNodeOfType)([y])(e.selection),N=V(r),A=!!N,P=o.content.firstChild?.type===T&&0===o.openStart&&0===o.openEnd;if(A&&(v||x&&!P&&(0,h.expValEquals)("platform_editor_pasting_text_in_panel","isEnabled",!0)))return!1;let M=!1,R=!1;o.content.nodesBetween(0,o.content.size,e=>{(e.type===E||e.type===b||e.type===_||e.type===C||e.type===y)&&(M=!0),A&&e.type===S&&(R=!0)});let w=(0,u.hasParentNode)(e=>e.type===m||e.type===l)(r),L=A&&!w&&o.content.firstChild?.type===f&&o.openEnd<2;if(M||L||!O&&!k)return!1;let B=[(0,i("b0F8r").linkifyContent)(n)],D=r.$head.marks();r instanceof i("ks2lK").TextSelection&&Array.isArray(D)&&D.length>0&&G(f,g,d,p,c)(o)&&(!s.isInSet(D)||(0,i("l6xRR").anyMarkActive)(e,s))&&B.push(H(n,r.$head.marks()));let U=en.apply(null,B)(o),K=U.content.firstChild.type===S||U.content.firstChild.type===m,j=(0,i("ke2AI").closeHistory)(e.tr);if(N&&R&&o.content.firstChild?.type===T&&z(N)&&r.$from.node()===r.$to.node())return!!Q(N)({tr:j,slice:o});let F=(U.content.firstChild.type.inlineContent||["decisionList","decisionItem","taskItem","taskList","panel"].includes(U.content.firstChild.type.name))&&(!(0,i("l9G9n").isInListItem)(e)||(0,i("l9G9n").isInListItem)(e)&&K),W=A&&T.validContent(U.content);if((F||O)&&!W&&(1!==U.openStart||0!==U.openEnd)&&(0!==U.openStart||1!==U.openEnd)||U.content.firstChild?.type===f)j.replaceSelection(U).scrollIntoView();else{let e=r.$from.pos===r.$from.start()&&r.$to.end()===r.$to.pos;if(W&&r.$from.pos!==r.$to.pos&&!e)j.replaceSelection(new(0,i("5SAOw").Slice)(U.content,0,U.openEnd)).scrollIntoView();else if(["mediaSingle"].includes(U.content.firstChild.type.name)&&A){let e=(0,u.findParentNodeOfType)(T)(r);if(A&&e&&(0,i("l9G9n").isNodeEmpty)(e.node)){j.insert(r.$from.pos,U.content).scrollIntoView();let e=j.selection.from+U.size;j.setSelection(new(0,i("ks2lK").TextSelection)(j.doc.resolve(e)))}else j.replaceSelection(U).scrollIntoView()}else if(W&&e&&j.delete(r.$from.pos,r.$to.pos),(0,u.safeInsert)(U.content)(j).scrollIntoView(),U.content.lastChild?.type?.name==="rule")j.setSelection(i("ks2lK").TextSelection.near(j.doc.resolve(j.selection.$from.pos+U.content.size)));else{let e=j.doc.resolve(j.selection.$from.end());j.setSelection(new(0,i("ks2lK").TextSelection)(e))}}return a?.(e,j,i("d925B").INPUT_METHOD.CLIPBOARD),t&&t(j),!0}))},e_=e=>(t,o,n,r)=>ex(e)(eE(o,n,{type:r}))((e,t)=>{if((0,i("dh538").fg)("platform_editor_fix_captions_on_copy")&&function(e,t){if(1!==e.content.childCount||!(0,i("7iE7T").isParagraph)(e.content.child(0),t))return!1;let o=e.content.child(0);if(1!==o.content.childCount||!(0,i("7iE7T").isText)(o.content.child(0),t))return!1;let{marks:n,text:r=""}=o.content.child(0);return n.some(e=>(0,i("7iE7T").isLinkMark)(e,t))||function(e){try{return new URL(e),!0}catch{return!1}}(r)}(n,e.schema))return!1;let{caption:o}=e.schema.nodes,r=e.tr;return!!(0,u.hasParentNodeOfType)(o)(e.selection)&&(r.replaceSelection(n).scrollIntoView(),t&&t(r),!0)}),eC=e=>(t,o,n,r)=>ex(e)(eE(o,n,{type:i("aSgIe").PasteTypes.plain}))((e,t)=>{let{codeBlock:o}=e.schema.nodes;if(r&&(0,u.hasParentNodeOfType)(o)(e.selection)){let o=(0,i("ke2AI").closeHistory)(e.tr);return o.scrollIntoView(),t&&t(o.insertText(r)),!0}return!1}),eI=e=>(t,o,n,r,a)=>{var s;return ex(e)(eE(o,n,{type:r}))((s=i("d925B").INPUT_METHOD.CLIPBOARD,function(e){return(t,o,n)=>{if(n){if(function(e,t){let{media:o}=e.schema.nodes;return 1===t.content.childCount&&t.content.firstChild.type===o}(t,e))return a?.(n,e.content.firstChild,s)??!1;if((0,i("4KOFJ").insideTable)(t)&&function(e,t){let{mediaSingle:o}=e.schema.nodes;return o&&1===t.content.childCount&&t.content.firstChild.type===o}(t,e)){let n=t.tr.replaceSelection(e),r=n.doc.resolve(n.mapping.map(t.selection.$from.pos));return o&&o(n.setSelection(new(0,i("adhil").GapCursorSelection)(r,i("adhil").Side.RIGHT))),!0}}return!1}})(n))},eO=(e,t,o,n,r)=>{var a;return ex(r?.analytics?.actions)(eE(t,o,{type:n}))((a=r?.card?.actions?.queueCardsFromChangedTr,(e,t)=>{let{schema:n,tr:{selection:r}}=e,{marks:{code:s,annotation:l},nodes:{bulletList:d,emoji:c,hardBreak:p,heading:f,listItem:h,mention:m,orderedList:g,text:T}}=n;if(!(r instanceof i("ks2lK").TextSelection))return!1;let E=r.$head.marks();if(0===E.length)return!1;let b=s&&s.isInSet(E)&&(0,i("l6xRR").anyMarkActive)(e,s),S=l&&l.isInSet(E),y=(0,u.hasParentNodeOfType)([f])(e.selection);if(G(d,p,f,h,T,c,m,g)(o)||y||b||S){let r=H(n,E)(o),s=(0,i("ke2AI").closeHistory)(e.tr).replaceSelection(r).setStoredMarks(E).scrollIntoView();return a?.(e,s,i("d925B").INPUT_METHOD.CLIPBOARD),t&&t(s),!0}return!1}))},ek=(e,t,o,n)=>ex(n?.analytics?.actions)(eE(t,o,{type:i("aSgIe").PasteTypes.markdown}))(ec(o,n?.card?.actions?.queueCardsFromChangedTr)),ev=(e,t,o,n)=>{var r,a;return ex(n?.analytics?.actions)(eE(t,o,{type:i("aSgIe").PasteTypes.richText},n))((r=o,a=n?.card?.actions?.queueCardsFromChangedTr,(e,t)=>{var o;let{codeBlock:n,heading:s,paragraph:l,panel:d}=e.schema.nodes,{selection:c,schema:p}=e,f=r.content?.firstChild,h=r.content?.lastChild,m=e.tr;(o=r).content.firstChild&&o.content.firstChild.marks.some(t=>t.type===e.schema.marks.code)&&function(e){let{$from:{nodeBefore:t},from:o}=e.selection;t&&t.isText&&t.text.endsWith("`")&&e.delete(o-1,o)}(m),function(e,t){let o=t.content.firstChild;return o&&(0,i("4KOFJ").insideTable)(e)&&(0,i("irKZA").isListNode)(o)&&t.openStart>t.openEnd}(e,r)&&(r=function(e){if(!e.content.firstChild)return e;let t=e.content.firstChild,o=[];!function e(t,o){t.content.forEach(t=>{(0,i("irKZA").isListNode)(t)||(0,i("irKZA").isListItemNode)(t)&&(0,i("irKZA").isListNode)(t.firstChild)?e(t,o):o.push(t)})}(t,o);let n=e.content.replaceChild(0,t.type.createChecked(t.attrs,o));return new(0,i("5SAOw").Slice)(n,e.openEnd,e.openEnd)}(r)),(0,i("ke2AI").closeHistory)(m);let g=(0,i("irKZA").isListNode)(f),T=(0,i("irKZA").isListNode)(h),E=f?.type?.name==="taskList",b=h?.type?.name==="taskList",S=c.$to.node(c.$to.depth-1),y=c.$to.node().type.validContent(r.content)||[s,l].includes(c.$to.node().type)&&S.type.validContent(r.content),_=(0,u.findParentNodeOfType)(d)(m.selection),C=_&&_.node?.content.size===2;if(!(E||b)&&(g||T||C))!function({tr:e,slice:t,schema:o}){var n;let{selection:r,selection:{$to:a,$from:s}}=e,{$cursor:l}=r,d=V(r),c=s.blockRange(a,i("irKZA").isListNode);if(!l&&c)return function({tr:e,slice:t}){let{selection:{$to:o,$from:n,to:r,from:a}}=e;if(n.sameParent(o)||n.depth===o.depth)return e.replaceSelection(t);let s=n.blockRange(o);if(!s)return;let l=o.nodeAfter?r:r+2,d=e.doc.slice(l,s.end);e.deleteRange(a,s.end);let c=e.mapping.map(a);if(e.replaceRange(c,c,t),d.size<=0)return;let p=i("ks2lK").TextSelection.near(e.doc.resolve(e.mapping.map(c)),-1);d.openEnd=d.openStart,e.replaceRange(p.from,p.from,d),e.setSelection(i("ks2lK").TextSelection.near(e.doc.resolve(p.from),-1))}({tr:e,slice:t});if(d&&z(d)&&s.node()===a.node())return Q(d)({tr:e,slice:t,schema:o});if(!l||c)return e.replaceSelection(t);if(z(e.doc.resolve(l.pos).node()))return function({tr:e,slice:t}){e.replaceSelection(t)}({tr:e,slice:t});let p=!!(0,u.findParentNodeOfType)([o.nodes.taskList,o.nodes.decisionList])(r),f=1===t.content.childCount&&(0,i("irKZA").isListNode)(t.content.firstChild)&&t.content.firstChild?.childCount===1;if(!(p&&f)&&(n=r)instanceof i("ks2lK").TextSelection&&n.empty&&n.$cursor&&(!n.$cursor.nodeBefore||!n.$cursor.nodeAfter))return function({tr:e,slice:t}){let{selection:o}=e,{$cursor:n}=o;if(!n)return;let r=n.nodeBefore?n.after():n.before();e.replaceRange(r,r,t);let a=e.doc.resolve(Math.min(r+t.content.size-t.openEnd,e.doc.content.size));e.setSelection(i("ks2lK").TextSelection.near(a,-1))}({tr:e,slice:t});e.replaceSelection(t)}({tr:m,slice:r,schema:p});else if(y)if(f?.type?.name==="blockquote"&&f?.content.firstChild?.type.name&&["bulletList","orderedList","mediaSingle"].includes(f?.content.firstChild?.type.name))ee({tr:m,slice:r});else{m.replaceSelection(r);let t=["panel","nestedExpand","decisionList","codeBlock"].includes(r.content.lastChild?.type?.name||""),o=r.content.lastChild,n=m.doc.resolve(m.mapping.map(c.from)),a=o?.type.isTextblock?i("ks2lK").TextSelection.findFrom(n,-1,!0):new(0,i("adhil").GapCursorSelection)(n,i("adhil").Side.RIGHT);if(a)m.setSelection(a);else if((0,i("l9G9n").insideTableCell)(e)&&t){let e=m.doc.resolve(m.mapping.map(c.$from.pos));m.setSelection(new(0,i("adhil").GapCursorSelection)(e,i("adhil").Side.RIGHT))}}else{let t=!1;r.content.nodesBetween(0,r.content.size,(o,n)=>{if(o.type===e.schema.nodes.listItem)return t=!0,!1}),(0,i("l9G9n").insideTableCell)(e)&&(0,i("l9G9n").isInListItem)(e)&&(0,u.canInsert)(c.$from,r.content)&&(0,u.canInsert)(c.$to,r.content)||t?m.replaceSelection(r):eu(e,r)&&!ef(e)?function({tr:e,slice:t}){let{schema:o}=e.doc.type,n=e.selection.from;e.replaceSelection(new(0,i("5SAOw").Slice)(i("5SAOw").Fragment.from(o.nodes.taskItem.createAndFill()),0,0));let r=i("ks2lK").Selection.near(e.doc.resolve(n+1));e.setSelection(r),e.replaceSelection(t)}({tr:m,slice:r}):(m=(0,u.safeInsert)(r.content,m.selection.$to.pos)(m),eu(e,r)&&et({tr:m}))}return m.setStoredMarks([]),m.selection.empty&&m.selection.$from.parent.type===n&&m.setSelection(i("ks2lK").TextSelection.near(m.selection.$from,1)),m.scrollIntoView(),a?.(e,m,i("d925B").INPUT_METHOD.CLIPBOARD),t&&t(m),!0}))},ex=e=>t=>o=>(n,r,i)=>{let a=n.tr;if(!o(n,e=>{a=e},i))return!1;if(r&&a.docChanged){let o=t(n.selection);e?.attachAnalyticsEvent(o)(a),r(a)}return!0},eN=e=>(t,o,n,r)=>ex(e)(eE(o,n,{type:i("aSgIe").PasteTypes.richText}))((e,t)=>{let{schema:o,tr:i}=e,{selection:a}=i,s=n.content.firstChild,l=0===n.openStart&&0===n.openEnd,d=a.$to.node(a.$to.depth-1),c=l&&!er(a,r);return!!d&&d?.type===o.nodes.listItem&&!!s&&!!["panel","decisionList"].includes(s?.type.name)&&!(n.content.childCount>1)&&s?.content.firstChild!==void 0&&!c&&(i.replaceSelection(n).scrollIntoView(),t&&t(i),!0)}),eA=e=>(t,o,n)=>ex(e)(eE(o,n,{type:i("aSgIe").PasteTypes.richText,pasteSplitList:!0}))((e,t)=>{let{tr:o}=e,{selection:r}=o,{$from:a,$to:s,from:l,to:d}=r,{orderedList:c,bulletList:p,listItem:f}=e.schema.nodes,h=(0,u.findParentNodeOfType)(f)(r),m=(0,u.findParentNodeOfType)([p,c])(r),g=m?.node,T=n.content,E=(0,i("irKZA").isListNode)(T.firstChild)&&(0,i("irKZA").isListNode)(T.lastChild),b=!1;if(n.content.forEach(e=>{f&&(!e.isBlock||f.spec.content?.includes(e.type.name))||(b=!0)}),!h||!T||(0,u.canInsert)(a,T)||!b||E||!m)return!1;let S=s.depth-m.depth+1,y=s.depth-m.depth;if(ef(e))return!1;let _=o.doc.nodeAt(d+y)?.type.name==="listItem",C=s.indexAfter(s.depth-y),I=o.doc.resolve(m.pos+1).posAtIndex(C),O=T.firstChild&&["taskItem","taskList","heading","blockquote"].includes(T.firstChild.type.name);n.content.firstChild?.type.name==="blockquote"&&(0,u.contains)(n.content.firstChild,e.schema.nodes.listItem)?ee({tr:o,slice:n}):O||_||T.childCount>1&&T.firstChild?.type.name!=="paragraph"?o.replaceWith(l,O&&_?d+y:O||!_?d:d+S,T).scrollIntoView():o.replaceSelection(n).scrollIntoView();let k=o.mapping.map(I);if(k>o.doc.nodeSize)return!1;let v=(0,u.findParentNodeOfTypeClosestToPos)(o.doc.resolve(k),[c]),x=g?.attrs.order,N=(0,u.findParentNodeOfTypeClosestToPos)(o.doc.resolve(l-1),[c])?.node.childCount;return"number"==typeof x&&N&&v&&o.setNodeMarkup(v.pos,c,{...v.node.attrs,order:x+N}),!!o.docChanged&&(t&&t(o),!0)}),eP=e=>(t,o,n)=>ex(e)(eE(o,n,{type:i("aSgIe").PasteTypes.richText,pasteSplitList:!0}))((e,t)=>{let o=!!eo(e);if(!(0,i("4KOFJ").insideTable)(e)&&!o||!ed(n))return!1;let{expand:r,nestedExpand:a}=e.schema.nodes,{tr:s}=e,l=!1,d=(0,i("3Ter7").mapSlice)(n,e=>{if(e.type===r||e.type===a){l=!0;try{return a.createChecked(e.attrs,e.content,e.marks)}catch(t){return s=(0,u.safeInsert)(e,s.selection.$to.pos)(s),i("5SAOw").Fragment.empty}}return e});return!!l&&!!t&&(t(n.openStart>1&&n.openEnd>1?s.replaceSelection(d):(0,u.safeInsert)(d.content)(s)),!0)}),eM=(e,t)=>(o,n,r)=>ex(e)(eE(n,r,{type:i("aSgIe").PasteTypes.richText,pasteSplitList:!0}))((e,o)=>{if(!t||!(0,i("4KOFJ").insideTable)(e))return!1;let{schema:n,selection:a}=e,s=!1;if(r.content.forEach(t=>{t.type===e.schema.nodes.table&&(s=!0)}),s)if((0,m.editorExperiment)("nested-tables-in-tables",!0,{exposure:!0})){if((0,i("sxTNo").getParentOfTypeCount)(n.nodes.table)(a.$from)>1){let t=(0,i("sxTNo").getPositionAfterTopParentNodeOfType)(n.nodes.table)(a.$from),{tr:s}=e;if((s=(0,u.safeInsert)(r.content,t)(s)).scrollIntoView(),o)return o(s),!0}}else{let t=(0,i("sxTNo").getPositionAfterTopParentNodeOfType)(n.nodes.table)(a.$from),{tr:s}=e;if((s=(0,u.safeInsert)(r.content,t)(s)).scrollIntoView(),o)return o(s),!0}return!1}),eR=e=>(t,o,n)=>ex(e)(eE(o,n,{type:i("aSgIe").PasteTypes.richText}))(ep(e)(n)),ew=e=>(t,o,n,r)=>ex(e)(eE(o,n,{type:r,hyperlinkPasteOnText:!0}))((e,t)=>{let o,{schema:r,selection:a,selection:{from:s,to:l},tr:d}=e;if(1===n.content.childCount&&(0,i("7iE7T").isParagraph)(n.content.child(0),r)){let e=n.content.child(0);if(1===e.content.childCount&&(0,i("7iE7T").isText)(e.content.child(0),r)){let t=e.content.child(0);o=t.marks.find(e=>(0,i("7iE7T").isLinkMark)(e,r)&&(e.attrs.href===t.text||decodeURI(e.attrs.href)===t.text))}}let c=(0,i("dh538").fg)("platform_editor_link_paste_select_all")?function(e){let t=e.selection;if(!(t instanceof i("ks2lK").AllSelection))return null;let o=0,n=-1;return(e.doc.nodesBetween(t.from,t.to,(e,t)=>!e.isTextblock||!(++o>1)&&(n=t,!0)),1!==o)?null:ei(e.doc,n)}(e):null,p=c?.from??s,u=c?.to??l;return!!(o&&(a instanceof i("ks2lK").TextSelection||c)&&!a.empty&&(0,i("b0F8r").canLinkBeCreatedInRange)(p,u)(e))&&(d.addMark(p,u,o),t&&t(d),!0)}),eL=({view:e,duration:t,content:o,distortedDuration:n})=>{let r=eg({selection:e.state.selection,schema:e.state.schema});return{action:i("d925B").ACTION.PASTED_TIMED,actionSubject:i("d925B").ACTION_SUBJECT.EDITOR,eventType:i("d925B").EVENT_TYPE.OPERATIONAL,attributes:{pasteIntoNode:r,content:o,time:t,distortedDuration:n}}},eB=e=>{let t=new Set;return e.size&&e.forEach(e=>{e.content&&e.content.size&&(t=new Set([...t,...eB(e.content)])),t.add(e.type.name)}),Array.from(t)};function eD(e){return e.content.textBetween(0,e.content.size,"\n\n",e=>{switch(e.type.name){case"hardBreak":return"\n";case"text":return e.text;case"inlineCard":case"blockCard":return e.attrs.url;case"mention":return e.attrs.text;default:return e.text??""}})}var eU=i("c4jUA");let eK=e=>e?.clipboardData?.types?.some(e=>"x-tinymce/html"===e)??!1,ej=(e,t)=>eK(e)&&!!t&&!!t.match(/class=\"\s?(confluenceTd|confluenceTh|confluenceTable).+"/gim),eF=e=>{let t=new DOMParser,o=t.parseFromString(e,"text/html"),n=t.parseFromString(`<table>${e}</table>`,"text/html");return n.body.querySelectorAll("meta").forEach(e=>{n.head.prepend(e)}),{tableWrappedDoc:n,nonTableWrappedDoc:o}},eG=(e,t)=>e%t==0,eH=e=>{let t=e.querySelectorAll("td").length,o=e.querySelectorAll("th").length,n=e.querySelectorAll('td[colspan]:not([colspan="1"])').length,r=!1,i=e.querySelectorAll("th,td");for(let e=0,t=!1;e<i.length;e++){if(t&&"TH"===i[e].nodeName){r=!0;break}"TD"===i[e].nodeName&&(t=!0)}let a=o>0&&0===t,s=t>0&&0===o,l=a||s||(eG(o,t)||eG(t,o))&&!(o>1&&1===t);return{cellCount:t,thCount:o,mergedCellCount:n,hasThAfterTd:r,hasIncompleteRow:!l}},ez=(e,o)=>{let n=Array.from(e.body.querySelectorAll("th,td")),r=t(eU)(n,o),i=e.body.querySelector("tbody");return r.forEach(t=>{let o=e.createElement("tr");i?.append(o),o.append(...t)}),(Array.from(i.querySelectorAll("tr"))?.filter(e=>0===e.innerHTML.trim().length)).forEach(e=>e.remove()),e.body.innerHTML},eV=(e,t,o)=>{let n=0;for(;!eG(o+n,t);)n++;let r=Array.from(Array(n)).map(()=>e.createElement("td")),i=e.body.querySelector("td:last-of-type");return i?.parentElement?.append(...r),{updatedCellCount:o+n}},eW=e=>{let{cellCount:t,thCount:o,mergedCellCount:n,hasThAfterTd:r,hasIncompleteRow:i}=eH(e);if(n||r)return e.body.innerHTML;if(!o)return ez(e,1);if(i){let{updatedCellCount:n}=eV(e,o,t);t=n}for(let n=o;n>0;n--)if(eG(o,n)&&eG(t,n))return ez(e,n);return e.body.innerHTML},eq=e=>!e.includes("<table ")&&(e.includes("<td ")||e.includes("<th ")),eX=e=>{let{nonTableWrappedDoc:t,tableWrappedDoc:o}=eF(e),n=!!(!t.body.querySelector("th, td")&&o.body.querySelector("th, td")),r=o.querySelectorAll("body > table:only-child")&&!o.querySelector("body > table > tbody > tr > :not(th,td)");return n&&r?eW(o):null},e$=e=>{let{blockquote:t}=e.schema.nodes;return(0,u.hasParentNodeOfType)(t)(e.selection)};var eY=((r={})[r.UpdateMovedAction=0]="UpdateMovedAction",r[r.RemoveMovedAction=1]="RemoveMovedAction",r);let eJ=new(0,i("ks2lK").PluginKey)("moveAnalyticsPlugin"),eZ={contentMoved:{nodeName:void 0,size:void 0,nodeDepth:void 0,currentActions:[],nodeTypes:void 0,hasSelectedMultipleNodes:void 0}},{createPluginState:eQ,createCommand:e0,getPluginState:e1}=(0,i("lkJUe").pluginFactory)(eJ,(e,t)=>{switch(t.type){case eY.UpdateMovedAction:return{...e,contentMoved:{...e.contentMoved,...t.data}};case eY.RemoveMovedAction:return{...e,contentMoved:eZ.contentMoved};default:return e}}),e2=(e,t)=>e0(o=>{let{contentMoved:n}=e1(o),r={currentActions:[...n.currentActions,t],size:e?.size||n.size,nodeName:e?.nodeName,nodeDepth:e?.nodeDepth,nodeTypes:e?.nodeTypes,hasSelectedMultipleNodes:e?.hasSelectedMultipleNodes};return{type:eY.UpdateMovedAction,data:r}},e=>e.setMeta("addToHistory",!1)),e5=()=>e0(()=>({type:eY.RemoveMovedAction}),e=>e.setMeta("addToHistory",!1)),e9=()=>e=>{let t={type:eY.RemoveMovedAction};return e.setMeta(eJ,t)},e8=["caption","layoutColumn","listItem","tableHeader","tableCell","tableRow","text","placeholder","unsupportedBlock","unsupportedInline","hardBreak","confluenceUnsupportedBlock","confluenceUnsupportedInline","taskItem","decisionItem"],e4=e=>e8.includes(e),e3=e=>{let{from:t,to:o,$from:n}=e;return t===o&&0===n.parentOffset},e6=["emoji","date","status","mention","mediaInline","inlineCard","inlineExtension"],e7=e=>e6.includes(e),te=e=>{if(1!==e.$from.depth)return!0;let t=e.$from.parent.content.size,o=e.content().size,n=e.$from.parent.childCount;return 1!==n&&(2!==n||t-o!=1)},tt=e=>{let{schema:t,selection:o}=e;if(o instanceof i("7XFGZ").CellSelection)return!1;let{table:n}=t.nodes;return!!(0,u.findParentNodeOfTypeClosestToPos)(o.$from,n)},to=e=>{let t=(0,u.findParentNodeClosestToPos)(e.$from,()=>!0);return t?"heading"===t.node.type.name||"paragraph"===t.node.type.name?t.depth-1:t.depth:0},tn=e=>{let{$from:t,$to:o}=e;return 0===t.textOffset&&0===o.textOffset},tr=e=>{for(let t=0;t<e.childCount;t++)if(e4(e.maybeChild(t)?.type.name||""))return!0;return!1},ti=e=>{let t=[];return e.size&&e.forEach(e=>{t.push(e.type.name)}),{nodeTypes:(0,i("dh538").fg)("platform_editor_track_node_types")?[...new Set(t)].sort().join(","):void 0,hasSelectedMultipleNodes:t.length>1}},ta=(e,t)=>{let o=!1;return new(0,i("1S4f7").SafePlugin)({key:eJ,state:eQ(e,eZ),props:{handleDOMEvents:{cut:()=>{o=!0}},handlePaste:({state:e,dispatch:o},n,r)=>{let{contentMoved:a}=e1(e);if(!a.currentActions.includes("contentCut"))return;let{content:s}=r;if(!s.firstChild?.type.name||!a?.nodeName||!e3(e.selection))return;let{tr:l}=e;t?.attachAnalyticsEvent({action:i("d925B").ACTION.MOVED,actionSubject:i("d925B").ACTION_SUBJECT.DOCUMENT,actionSubjectId:i("d925B").ACTION_SUBJECT_ID.NODE,eventType:i("d925B").EVENT_TYPE.TRACK,attributes:{nodeType:a?.nodeName,nodeDepth:a?.nodeDepth,destinationNodeDepth:to(e.selection),nodeTypes:a?.nodeTypes,hasSelectedMultipleNodes:a?.hasSelectedMultipleNodes}})(l),o(e9()(l))},transformCopied:(e,{state:t,dispatch:n})=>{if(!o)return e;let r=!1,{content:a,size:s}=e,{selection:l}=t,d=(0,i("dh538").fg)("platform_editor_track_node_types"),c=a.firstChild?.type.name||"",p,u=!1;if(a.childCount>1)if(d)if(tr(a))r=!0;else{let e=ti(a);p=e.nodeTypes,u=e.hasSelectedMultipleNodes}else r=!0;else 1===a.childCount?(!r&&e4(c)&&(r=!0),r||tn(l)||(r=!0),!r&&e7(c)&&te(l)&&(r=!0),!r&&tt(t)&&(r=!0)):r=!0;if(r)e5()(t,n);else{let e={size:s,nodeName:c,nodeDepth:to(l)};d&&(e={...e,nodeTypes:p??c,hasSelectedMultipleNodes:u}),e2(e,"contentCut")(t,n)}return o=!1,e}}})};e.exports.pastePlugin=({config:e,api:o})=>{let{cardOptions:n,sanitizePrivateContent:r,isFullPage:s}=e??{},l=(o?.featureFlags?.sharedState.currentState(),o?.analytics?.actions);return{name:"paste",pmPlugins:()=>[{name:"paste",plugin:({schema:e,providerFactory:s,dispatchAnalyticsEvent:l,dispatch:b,getIntl:S})=>(function(e,o,n,r,s,l,b,S,y){var _;let C,I,O=s?.analytics?.actions,k=new(0,i("aRZzN").MarkdownTransformer)(e,i("jvA0K").md);async function v(e,t){if("extensionProvider"===e&&t)try{C=await (0,i("2cmfr").getExtensionAutoConvertersFromProvider)(t)}catch(e){console.error(e)}}y&&y.subscribe("extensionProvider",v);let x=!1;return new(0,i("1S4f7").SafePlugin)({key:T,state:E(n,{pastedMacroPositions:{},lastContentPasted:null}),props:{clipboardTextSerializer:(0,i("dh538").fg)("platform_editor_date_to_text")?(_=l(),e=>e.content.textBetween(0,e.content.size,"\n\n",e=>{switch(e.type.name){case"hardBreak":return"\n";case"text":return e.text;case"inlineCard":case"blockCard":return e.attrs.url;case"mention":return e.attrs.text;case"date":return(0,i("dIxHZ").timestampToString)(e.attrs.timestamp,_);default:return e.text??""}})):eD,handleDOMEvents:{paste:(e,t)=>(I=t,(0,h.expValEquals)("cc_editor_interactivity_monitoring","isEnabled",!0)&&t.clipboardData&&f.insm.startHeavyTask("paste"),!1)},handlePaste(n,r,l){var c;let p;if(!r.clipboardData)return!1;let E=r.clipboardData.getData("text/plain"),S=r.clipboardData.getData("text/html"),y=r.clipboardData.getData("text/uri-list");!y||E||S||(E=y,l=new(0,i("5SAOw").Slice)(i("5SAOw").Fragment.from(e.text(E)),1,1)),E?.includes("\r")&&(E=E.replace(/\r/g,"")),(0,i("dh538").fg)("platform_editor_legacy_content_macro_insert")||(l=(0,i("igNsz").transformSliceToRemoveLegacyContentMacro)(l,e));let _=(0,i("8gdgt").isPastedFile)(r),I=E&&!S,v=!!S;if(_){if(!S||S.match(/<img .*>/)&&!(0,i("Girkv").isMediaBlobUrl)(S)&&!e$(n.state))return(0,h.expValEquals)("cc_editor_interactivity_monitoring","isEnabled",!0)&&f.insm.endHeavyTask("paste"),!0;r.stopPropagation()}let{state:x}=n,N=eB(l.content),A=t(a)(),P=`Editor Paste Plugin Paste Duration_${A}`;(0,i("jz9wK").measureRender)(P,({duration:e,distortedDuration:t})=>{let r=eL({view:n,duration:e,content:N,distortedDuration:t});r&&o(r),(0,h.expValEquals)("cc_editor_interactivity_monitoring","isEnabled",!0)&&f.insm.endHeavyTask("paste")});let M=e=>{let t;for(let o of e.steps){let e=(0,i("kTbzR").extractSliceFromStep)(o);e&&(t=e)}return t},R=e=>{let{placeholder:t}=x.schema.nodes,o=x.doc.resolve(x.selection.$anchor.pos).nodeAfter?.type===t,a=(0,u.hasParentNodeOfType)(x.schema.nodes.layoutColumn)(x.selection),l=e.steps.some(e=>{let t=(0,i("kTbzR").extractSliceFromStep)(e),o=!1;return t?.content?.forEach(e=>{e.type===x.schema.nodes.table&&(o=!0)}),o});!o&&!l&&!a&&s?.betterTypeHistory&&(e=s?.betterTypeHistory?.actions.flagPasteEvent(e));let d=e.docChanged;if((0,i("doRn8").addLinkMetadata)(n.state.selection,e,{action:I?i("d925B").ACTION.PASTED_AS_PLAIN:i("d925B").ACTION.PASTED,inputMethod:i("d925B").INPUT_METHOD.CLIPBOARD}),d)if((0,h.expValEquals)("platform_editor_pasting_nested_table_fix","isEnabled",!0)){let t=M(e);if(t){let o={pasteStartPos:x.selection.from,pasteEndPos:e.selection.to,text:E,isShiftPressed:!!(n.shiftKey||n.input?.shiftKey),isPlainText:!!I,pastedSlice:t,pastedAt:Date.now(),pasteSource:F(r)};e.setMeta(T,{type:g.ON_PASTE,contentPasted:o})}}else{let t=Math.min(x.selection.anchor,x.selection.head),o=e.selection.to,i={pasteStartPos:t,pasteEndPos:o,text:E,isShiftPressed:!!(n.shiftKey||n.input?.shiftKey),isPlainText:!!I,pastedSlice:e.doc.slice(t,o),pastedAt:Date.now(),pasteSource:F(r)};e.setMeta(T,{type:g.ON_PASTE,contentPasted:i})}n.dispatch(e.setMeta("uiEvent","paste"))};l=function(e,t){let o;if(0===t.content.size)return t;let{schema:n,selection:{$from:r}}=e;if(o=!1,t.content.descendants(e=>(e.marks.length>0&&(o=!0),!1)),!o)return t;let a=r.parent.textContent.length>0;if(1===t.content.childCount&&a)return t;let s=r.node(Math.max(0,r.depth-1)),l=function(e){let t=new Set;return e.content.descendants(e=>(e.marks.map(e=>e.type).forEach(e=>t.add(e)),!1)),t}(t),d=[];for(let e of l)s.type.allowsMarkType(e)||d.push(e);if(0===d.length){let e=Math.max(0,t.openStart-1);return new(0,i("5SAOw").Slice)(t.content,e,t.openEnd)}return(0,i("3Ter7").mapSlice)(t,e=>e.type===n.nodes.paragraph?n.nodes.paragraph.createChecked(void 0,e.content,e.marks.filter(e=>!d.includes(e.type))):e.type===n.nodes.heading?n.nodes.heading.createChecked(e.attrs,e.content,e.marks.filter(e=>!d.includes(e.type))):e)}(x,l),l=function({state:e,slice:t,text:o,event:n}){let r=function(e){try{let t=e?JSON.parse(e):void 0;return t?.mode}catch(e){}}(n?.clipboardData?.getData("vscode-editor-data"));if(o&&r&&i("cTQmR").SUPPORTED_LANGUAGES.some(e=>e.alias[0]===r)){let{schema:n}=e;t=(0,i("3Ter7").mapSlice)(t,e=>e.type.name===n.nodes.codeBlock?.name?n.nodes.codeBlock.createChecked({language:r},n.text(o)):e)}return t}({state:x,slice:l,event:r,text:E}),(0,m.editorExperiment)("platform_synced_block",!0)&&(l=d(l,e,F(r)));let w=(0,i("b0F8r").linkifyContent)(x.schema)(l);if(eS(O)(n,r,w)(x,R,n)||(0,i("dh538").fg)("platform_editor_fix_captions_on_copy")&&e_(O)(n,r,l,i("aSgIe").PasteTypes.richText)(x,R))return!0;if(l=(function(e,t,o){let{mediaSingle:n,layoutSection:r,table:a,bulletList:s,orderedList:l,expand:d,nestedExpand:c}=t.nodes;return t=>{let p=e;return(0,u.hasParentNodeOfType)([r,a,s,l,d,c])(t)&&(p=(0,i("3Ter7").mapSlice)(p,e=>{let i=o?.media?.sharedState.currentState(),p=i?.mediaOptions?.allowPixelResizing?{layout:e.attrs.layout,widthType:e.attrs.widthType,width:e.attrs.width}:{layout:e.attrs.layout},f={};return(0,u.hasParentNodeOfType)([r,a])(t)?f={...p}:(0,u.hasParentNodeOfType)([s,l,d,c])(t)&&(f={...p,layout:"center"}),"mediaSingle"===e.type.name?n.createChecked(f,e.content,e.marks):e})),p}})(l,e,s)(x.selection),I&&(p=function(e,t,o){let n=function(e){let t=/^( {0,3})```.*$/,o=/^( {0,3})```[ \t]*$/,n=!1;return e.split("\n").map(e=>{if(!n&&t.test(e))return n=!0,e;if(n&&o.test(e))return n=!1,e;if(n)return e;{let t=e.replace(/\\/g,"\\\\");return t.replace(/(\[([^\]]+)\]\()?((https?|ftp|jamfselfservice):\/\/[^\s>"]+)/g,e=>e.match(/^(https?|ftp|jamfselfservice):\/\/[^\s>"]+$/)?`<${e}>`:e)}}).join("\n")}(e),r=k.parse(n);if(r&&r.content)return new(0,i("5SAOw").Slice)(r.content,t,o)}(E,l.openStart,l.openEnd),p=p?.size?p:void 0)){if(ew(O)(n,r,p,i("aSgIe").PasteTypes.markdown)(x,R))return!0;if(el(E,p,s?.card?.actions?.queueCardsFromChangedTr,s?.extension?.actions?.runMacroAutoConvert,b,C)(x,R,n))return eb(O)(n,r,p,{type:i("aSgIe").PasteTypes.markdown}),!0}l=$(l,x,b);let L=x.selection.$head.depth,B=x.selection.$head.node(L-1),D=B?.type,U=[e.nodes?.panel,e.nodes?.taskList,e.nodes?.decisionList];if(0===l.openStart&&1!==l.openEnd&&B&&U.includes(D)&&(l.openStart=1),eC(O)(n,r,l,E)(x,R)||eI(O)(n,r,l,_?i("aSgIe").PasteTypes.binary:i("aSgIe").PasteTypes.richText,s?.media?.actions.insertMediaAsMediaSingle)(x,R,n)||eR(O)(n,r,l)(x,R))return!0;let K=!1,j=D===e.nodes.tableCell||D===e.nodes.tableHeader;if(l=(K=!!(p&&I&&j&&eB(p.content).includes(e.nodes.table?.name)))?p:l,(0,i("dmcsV").handlePaste)(n,r,l,{pasteSource:F(r)}))return eb(O)(n,r,l,{type:i("aSgIe").PasteTypes.richText}),!0;if(eM(O,(0,i("sxTNo").isNestedTablesSupported)(x.schema)&&(0,i("dh538").fg)("platform_editor_use_nested_table_pm_nodes"))(n,r,l)(x,R)||ey(n,r,l,I?i("aSgIe").PasteTypes.plain:i("aSgIe").PasteTypes.richText,s)(x,R))return!0;if(I&&p&&!K)return!!eO(n,r,p,i("aSgIe").PasteTypes.markdown,s)(x,R)||ek(n,r,p,s)(x,R);if(v&&e$(x)){let{blockquote:t}=e.nodes,o=[];(0,i("3Ter7").mapChildren)(l.content,e=>{if(e.type!==t||(0,u.contains)(e,x.schema.nodes.listItem))o.push(e);else for(let t=0;t<e.childCount;t++)o.push(e.child(t))}),l=new(0,i("5SAOw").Slice)(i("5SAOw").Fragment.fromArray(o),l.openStart,l.openEnd)}if(v||K){if(l=(0,i("b0F8r").linkifyContent)(x.schema)(l),ew(O)(n,r,l,i("aSgIe").PasteTypes.richText)(x,R))return!0;if(el(E,l,s?.card?.actions?.queueCardsFromChangedTr,s?.extension?.actions?.runMacroAutoConvert,b,C)(x,R,n))return eb(O)(n,r,l,{type:i("aSgIe").PasteTypes.richText}),!0;if(function(e){if(!e)return!1;try{let t=new URL(e),o=t.hostname.toLowerCase(),n=t.protocol.toLowerCase();if("https:"!==n)return!1;return o.endsWith("sharepoint.com")||o.endsWith("onedrive.com")||o.endsWith("onedrive.live.com")}catch{return!1}}(E)&&((0,i("dh538").fg)("platform_editor_sharepoint_url_smart_card_fallback")||(0,i("dh538").fg)("platform_editor_sharepoint_url_smart_card_jira"))){let t=e.nodes.inlineCard.create({url:E}),o=new(0,i("5SAOw").Slice)(i("5SAOw").Fragment.from(t),0,0);return R&&R(x.tr.replaceSelection(o)),!0}if((c=l,(e,t)=>{let o=(0,u.hasParentNodeOfType)(e.schema.nodes.bodiedExtension)(e.selection);if(!(0,i("4KOFJ").insideTable)(e)||!o)return!1;let{bodiedExtension:n}=e.schema.nodes,r=(0,i("3Ter7").mapSlice)(c,e=>e.type===n?n.createChecked(e.attrs,e.content,e.marks):e);return!!t&&(t(e.tr.replaceSelection(r)),!0)})(x,R)||(l.content.size&&(0,i("bYZ53").containsAnyAnnotations)(l,x)&&s?.annotation?.actions.stripNonExistingAnnotations(l,x),eO(n,r,l,i("aSgIe").PasteTypes.richText,s)(x,R)))return!0;if(D!==x.schema.nodes.doc){let e=i("5SAOw").Slice.fromJSON(x.schema,l.toJSON()||{});e.content.descendants(e=>(e.marks=e.marks.filter(e=>"breakout"!==e.type.name),!1)),l=e}return!!eP(O)(n,r,l)(x,R)||((0,i("4KOFJ").insideTable)(x)||(l=(0,i("hcbpx").transformSliceNestedExpandToExpand)(l,x.schema)),!!(!(0,i("dh538").fg)("platform_editor_fix_captions_on_copy")&&e_(O)(n,r,l,i("aSgIe").PasteTypes.richText)(x,R)||eN(O)(n,r,l,s?.list?.actions.findRootParentListNode)(x,R)||eA(O)(n,r,l)(x,R))||ev(n,r,l,s)(x,R))}return!1},transformPasted(t){var o;return S&&(o=t,t=(0,i("3Ter7").mapSlice)(o,t=>{if(t.type.name===e.nodes.mention?.name){let o={...t.attrs,text:""};return e.nodes.mention.create(o,t.content,t.marks)}return t})),x&&(t=(0,i("dv3tk").transformSliceToJoinAdjacentCodeBlocks)(t)),(t=N(t=A(t=p(t=w(t=R(t=(0,i("dv3tk").transformSingleLineCodeBlockToCodeMark)(t,e),e),e,s),e),e),e)).content.childCount&&t.content.lastChild.type===e.nodes.codeBlock&&(t=new(0,i("5SAOw").Slice)(t.content,0,0)),(0,m.editorExperiment)("single_column_layouts",!0)||(t=(0,i("edTnG").transformSingleColumnLayout)(t,e)),t=(0,i("igNsz").transformSliceToRemoveMacroId)(t,e)},transformPastedHTML(e){if(e.indexOf('id="docs-internal-guid-')>=0&&(e=(e=e.replace(/white-space:pre/g,"")).replace(/white-space:pre-wrap/g,"")),I&&ej(I,e)&&eq(e)){let t=eX(e);t&&(e=t)}return!K(e)&&!j(e)&&e.indexOf("<img ")>=0&&(e=U(e)),W(e)&&(e=q(e)),x=e.indexOf('data-qa="code-line"')>=0,e.indexOf(i("e6n00").SyncBlockRendererDataAttributeName)>=0&&(0,m.editorExperiment)("platform_synced_block",!0)&&(e=c(e)),I=null,e}}})})(e,l,b,0,o,S,n,r,s)},{name:"moveAnalyticsPlugin",plugin:({dispatch:e})=>s?ta(e,l):void 0}],getSharedState:e=>e?{lastContentPasted:T.getState(e).lastContentPasted}:{lastContentPasted:null}}}}),a("aSgIe",function(e,t){e.exports.PasteTypes={richText:"richText",plain:"plain",markdown:"markdown",binary:"binary"},e.exports.PasteContents={text:"text",url:"url",code:"code",mediaSingle:"mediaSingle",mediaCard:"mediaCard",mediaGroup:"mediaGroup",tableCells:"tableCells",table:"table",expand:"expand",nestedExpand:"nestedExpand",mixed:"mixed",blockquote:"blockquote",blockCard:"blockCard",bodiedExtension:"bodiedExtension",multiBodiedExtension:"multiBodiedExtension",bulletList:"bulletList",codeBlock:"codeBlock",decisionList:"decisionList",decisionItem:"decisionItem",extension:"extension",heading:"heading",layoutSection:"layoutSection",orderedList:"orderedList",panel:"panel",rule:"rule",tableHeader:"tableHeader",tableRow:"tableRow",taskItem:"taskItem",uncategorized:"uncategorized"}}),a("4KOFJ",function(e,t){var o=i("8m4tT");e.exports.insideTable=e=>{let{table:t,tableCell:n}=e.schema.nodes;return(0,o.hasParentNodeOfType)([t,n])(e.selection)}}),a("8gdgt",function(e,t){e.exports.isPastedFile=function(e){var t,o;let{clipboardData:n}=e;return!!n&&(t=n.types,o="Files",!t.indexOf&&t.contains?t.contains(o):t.indexOf(o)>-1)}}),a("jvA0K",function(e,o){var n=i("2Yzoe"),r=i("2Gb84");let a=(e,t,o)=>[].concat(e.slice(0,t),o,e.slice(t+1)),s=e=>/^<a[>\s]/i.test(e),l=e=>/^<\/a\s*>/i.test(e),d=e=>{let o=e.tokens,n=new(t(r));for(let t=0,r=o.length;t<r;t++){if("inline"!==o[t].type||!n.pretest(o[t].content))continue;let r=o[t].children,d=0;for(let c=r.length-1;c>=0;c--){let p=r[c];if("link_close"===p.type){for(c--;r[c].level!==p.level&&"link_open"!==r[c].type;)c--;continue}if("html_inline"===p.type&&(s(p.content)&&d>0&&d--,l(p.content)&&d++),!(d>0)&&"text"===p.type&&n.test(p.content)){let s=p.content,l=(0,i("81OAa").linkifyMatch)(s);l.length||(l=n.match(s)||[]),l=l.filter(e=>(0,i("azNN5").shouldAutoLinkifyMatch)(e));let d=[],u=p.level,f=0,h=(0,i("b0F8r").findFilepaths)(s);for(let t=0;t<l.length;t++){if((0,i("b0F8r").isLinkInMatches)(l[t].index,h))continue;let{url:o}=l[t],n=e.md.normalizeLink(o);if(!e.md.validateLink(n))continue;let r=l[t].text;r=l[t].schema?"mailto:"!==l[t].schema||/^mailto:/i.test(r)?e.md.normalizeLinkText(r):e.md.normalizeLinkText("mailto:"+r).replace(/^mailto:/,""):e.md.normalizeLinkText("http://"+r).replace(/^http:\/\//,"");let a=l[t].index;if(a>f){let t=new e.Token("text","",0);t.content=s.slice(f,a),t.level=u,d.push(t)}let c=new e.Token("link_open","a",1);c.attrs=[["href",n]],c.level=u++,c.markup="linkify",c.info="auto",d.push(c),(c=new e.Token("text","",0)).content=r,c.level=u,d.push(c),(c=new e.Token("link_close","a",-1)).level=--u,c.markup="linkify",c.info="auto",d.push(c),f=l[t].lastIndex}if(f<s.length){let t=new e.Token("text","",0);t.content=s.slice(f),t.level=u,d.push(t)}o[t].children=r=a(r,c,d)}}}},c=(e,t)=>{let o=e.pos;if(10!==e.src.charCodeAt(o))return!1;let n=e.pending.length-1;return t||(n>=0&&32===e.pending.charCodeAt(n)?n>=1&&32===e.pending.charCodeAt(n-1)?e.push("hardbreak","br",0):(e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0)):e.push("softbreak","br",0)),e.pos=++o,!0},p=(e,t)=>{let o,n,r,i,a=t+1,s=e.md.block.ruler.getRules("paragraph"),l=e.lineMax,d=e.parentType;for(e.parentType="paragraph";a<l&&!e.isEmpty(a);a++)if(!(e.sCount[a]-e.blkIndent>3)&&!(e.sCount[a]<0)){for(n=0,o=!1,r=s.length;n<r;n++)if(s[n](e,a,l,!0)){o=!0;break}if(o)break}let c=e.getLines(t,a,e.blkIndent,!1);return e.line=a,(i=e.push("paragraph_open","p",1)).map=[t,e.line],(i=e.push("inline","",0)).content=c,i.map=[t,e.line],i.children=[],i=e.push("paragraph_close","p",-1),e.parentType=d,!0},u=t(n)("zero",{html:!1});u.enable(["entity","escape","newline"]),u.use(e=>e.block.ruler.at("paragraph",p)),u.use(e=>e.core.ruler.push("custom-linkify",d)),u.use(e=>e.inline.ruler.at("newline",c)),u.use(function(e){e.core.ruler.after("inline","ignore-list-heading-md-plugin",function(e){e.tokens=e.tokens.reduce((t,o,n)=>{let{type:r}=o;return"heading_open"===r?e.tokens[n-1]?.type==="list_item_open"?t.push(new e.Token("paragraph_open","p",1)):t.push(o):"heading_close"===r&&e.tokens[n+1]?.type==="list_item_close"?t.push(new e.Token("paragraph_close","p",-1)):t.push(o),t},[])})}),e.exports.md=u}),a("ly3wu",function(e,t){e.exports.BreakoutCssClassName={BREAKOUT_MARK:"fabric-editor-breakout-mark",BREAKOUT_MARK_DOM:"fabric-editor-breakout-mark-dom"}}),a("edTnG",function(e,t){let o=e=>e.type===e.type.schema.nodes.layoutSection||e.type===e.type.schema.nodes.layoutColumn;function n(e){let t=(0,i("3Ter7").mapFragment)(i("5SAOw").Fragment.from(e),e=>o(e)?e.content:e),n=[];return t.forEach(e=>n.push(e)),n}function r(e,t){return 0===t?n(e):e}function a(e,t,o){return t===o.childCount-1?n(e):e}e.exports.transformSingleColumnLayout=(e,t)=>{if(1===e.content.childCount&&0===e.openStart&&0===e.openEnd){if(e.content.firstChild?.type===t.nodes.layoutColumn)return new(0,i("5SAOw").Slice)(e.content.firstChild.content,0,0);else if(e.content.firstChild?.type===t.nodes.layoutSection&&1===e.content.firstChild.childCount&&e.content.firstChild.firstChild?.type===t.nodes.layoutColumn)return new(0,i("5SAOw").Slice)(e.content.firstChild.firstChild.content,0,0)}return e},e.exports.transformSliceToRemoveOpenLayoutNodes=function(e,t){return e.openStart&&e.openEnd&&1===e.content.childCount&&e.content.firstChild.type===t.nodes.layoutSection?new(0,i("5SAOw").Slice)((0,i("3Ter7").flatmap)(e.content,r),e.openStart-2,e.openEnd-2):(e.openStart&&e.content.firstChild.type===t.nodes.layoutSection&&(e=new(0,i("5SAOw").Slice)((0,i("3Ter7").flatmap)(e.content,r),e.openStart-2,e.openEnd)),e.openEnd&&e.content.lastChild.type===t.nodes.layoutSection&&(e=new(0,i("5SAOw").Slice)((0,i("3Ter7").flatmap)(e.content,a),e.openStart,e.openEnd-2)),e)}}),a("hcbpx",function(e,t){var o=i("8m4tT");e.exports.findExpand=(e,t)=>{let{expand:n,nestedExpand:r}=e.schema.nodes;return(0,o.findSelectedNodeOfType)([n,r])(t||e.selection)||(0,o.findParentNodeOfType)([n,r])(t||e.selection)},e.exports.transformSliceToRemoveOpenExpand=(e,t)=>e.openStart>1&&e.openEnd>1&&1===e.content.childCount&&e.content.firstChild&&e.content.firstChild.type===t.nodes.expand?new(0,i("5SAOw").Slice)(e.content.firstChild.content,e.openStart-1,e.openEnd-1):e,e.exports.transformSliceToRemoveOpenNestedExpand=(e,t)=>e.openStart>1&&e.openEnd>1&&1===e.content.childCount&&e.content.firstChild&&e.content.firstChild.type===t.nodes.nestedExpand?new(0,i("5SAOw").Slice)(e.content.firstChild.content,e.openStart-1,e.openEnd-1):e,e.exports.transformSliceNestedExpandToExpand=(e,t)=>{let{expand:o,nestedExpand:n}=t.nodes,r=[];return(0,i("3Ter7").mapChildren)(e.content,e=>{e.type===n?r.push(o.createChecked(e.attrs,e.content,e.marks)):r.push(e)}),new(0,i("5SAOw").Slice)(i("5SAOw").Fragment.fromArray(r),e.openStart,e.openEnd)},e.exports.transformSliceExpandToNestedExpand=e=>{let t=[];try{(0,i("3Ter7").mapChildren)(e.content,e=>{let{expand:o,nestedExpand:n}=e.type.schema.nodes;if(e.type===o){let o=n.createChecked(e.attrs,e.content,e.marks);o&&t.push(o)}else t.push(e)})}catch(e){return null}return new(0,i("5SAOw").Slice)(i("5SAOw").Fragment.fromArray(t),e.openStart,e.openEnd)}}),a("igNsz",function(e,t){let o=e=>e.attrs?.extensionType==="com.atlassian.confluence.migration"&&e.attrs?.extensionKey==="legacy-content";e.exports.transformSliceToRemoveOpenBodiedExtension=(e,t)=>{let{bodiedExtension:o}=t.nodes,n=(0,i("3Ter7").mapFragment)(e.content,(t,n,r)=>{if(t.type===o&&!n){let o=e.openStart&&0===r,n=e.openEnd&&r+1===e.content.childCount;if(o||n)return t.content}return t});return new(0,i("5SAOw").Slice)(n,n.firstChild&&n.firstChild.type!==e.content.firstChild.type?e.openStart-1:e.openStart,n.lastChild&&n.lastChild.type!==e.content.lastChild.type?e.openEnd-1:e.openEnd)},e.exports.transformSliceToRemoveOpenMultiBodiedExtension=(e,t)=>{let{multiBodiedExtension:o,extensionFrame:n}=t.nodes,r=2;e.content.firstChild?.type===o&&e.content.firstChild?.firstChild?.type!==n&&(r=1);let a=(0,i("3Ter7").mapFragment)(e.content,(t,a,s)=>{if(t.type===o&&!a||t.type===n){let o=e.openStart>=r&&0===s,n=e.openEnd>=r&&s+1===e.content.childCount;if(o||n)return t.content}return t.type===o&&t.attrs.parameters?.macroMetadata?.macroId?.value&&(t.attrs.parameters.macroMetadata.macroId.value=i("fO7hX").uuid.generate()),t});return new(0,i("5SAOw").Slice)(a,a.firstChild&&a.firstChild.type!==e.content.firstChild.type?e.openStart-r:e.openStart,a.lastChild&&a.lastChild.type!==e.content.lastChild.type?e.openEnd-r:e.openEnd)},e.exports.transformSliceToRemoveLegacyContentMacro=(e,t)=>{let{extension:n}=t.nodes;return(0,i("3Ter7").mapSlice)(e,e=>e.type===n&&o(e)?null:e)},e.exports.transformSliceToRemoveMacroId=(e,t)=>{let{extension:o,inlineExtension:n}=t.nodes;return(0,i("3Ter7").mapSlice)(e,e=>([o,n].includes(e.type)&&void 0!==e.attrs.parameters?.macroMetadata?.macroId?.value&&delete e.attrs.parameters.macroMetadata.macroId,e))}}),a("dmcsV",function(e,t){var o=i("8m4tT"),n=i("iu6m9");function r(e,t){let o=e.createAndFill();if(!o)throw Error("fitSlice: unable to create node");return new(0,i("aXG5V").Transform)(o).replace(0,o.content.size,t).doc}function a(e,t,o,n,r,i,a,s){if(0===a||a===t.height)return!1;let l=!1;for(let d=r;d<i;d++){let r=a*t.width+d,i=t.map[r];if(t.map[r-t.width]===i){l=!0;let r=o.nodeAt(i);if(!r)throw Error(`isolateHorizontal: no cell found at pos ${i}`);let{top:c,left:p}=t.findCell(i);e.setNodeMarkup(e.mapping.slice(s).map(i+n),void 0,{...r.attrs,rowspan:a-c});let u=r.type.createAndFill({...r.attrs,rowspan:c+r.attrs.rowspan-a});if(!u)throw Error("isolateHorizontal: failed to create cell");e.insert(e.mapping.slice(s).map(t.positionAt(a,p,o)),u),d+=r.attrs.colspan-1}}return l}function s(e,t,o,n,r,a,s,l){if(0===s||s===t.width)return!1;let d=!1;for(let c=r;c<a;c++){let r=c*t.width+s,a=t.map[r];if(t.map[r-1]===a){d=!0;let r=o.nodeAt(a);if(!r)throw Error(`isolateVertical: could not find cell at pos ${a}`);let p=t.colCount(a),u=e.mapping.slice(l).map(a+n);e.setNodeMarkup(u,void 0,(0,i("jl382").removeColSpan)(r.attrs,s-p,r.attrs.colspan-(s-p)));let f=r.type.createAndFill((0,i("jl382").removeColSpan)(r.attrs,0,s-p));if(!f)throw Error("isolateVertical: failed to create cell");e.insert(u+r.nodeSize,f),c+=r.attrs.rowspan-1}}return d}function l(e,t,o,n,r){let l=e.doc,d=(0,i("2QyFu").selectedRect)(e),c=(0,i("d1kIV").tableNodeTypes)(e.schema),p=(0,i("2vynv").isHeaderEnabledByType)("row",d,c),u=(0,i("2vynv").isHeaderEnabledByType)("column",d,c);if(o&&!(l=e.doc.nodeAt(o-1)))throw Error(`insertCells: could not find table at pos ${o-1}`);let f=i("LmqWp").TableMap.get(l),{top:h,left:m}=n,g=m+r.width,T=h+r.height,{tr:E}=e,b=0;function S(){l=o?E.doc.nodeAt(o-1):E.doc,f=i("LmqWp").TableMap.get(l),b=E.mapping.maps.length}(function(e,t,o,n,r,a,s){let l,d,{schema:c}=e.doc.type,p=(0,i("d1kIV").tableNodeTypes)(c);if(r>t.width)for(let i=0,a=0;i<t.height;i++){let s,c=o.child(i);a+=c.nodeSize;let u=[];s=null==c.lastChild||c.lastChild.type===p.cell?l||(l=p.cell.createAndFill()):d||(d=p.header_cell.createAndFill());for(let e=t.width;e<r;e++)u.push(s);e.insert(e.mapping.slice(0).map(a-1+n),u)}if(a>t.height){let c=[];for(let e=0,n=(t.height-1)*t.width;e<Math.max(t.width,r);e++){let r;if(e>=t.width)r=!1;else{let i=t.map[n+e],a=o.nodeAt(i);if(!a)throw Error(`growTable: no node found at pos ${i}`);r=a.type===p.header_cell}c.push(r?d||(d=p.header_cell.createAndFill()):l||(l=p.cell.createAndFill()))}let u=p.row.create(null,i("5SAOw").Fragment.from(c)),f=[];for(let e=t.height;e<a;e++)f.push(u);e.insert(e.mapping.slice(s).map(n+o.nodeSize-2),f)}return!!(l||d)})(E,f,l,o,g,T,0)&&S(),a(E,f,l,o,m,g,h,b)&&S(),a(E,f,l,o,m,g,T,b)&&S(),s(E,f,l,o,h,T,m,b)&&S(),s(E,f,l,o,h,T,g,b)&&S();for(let e=h;e<T;e++){let t=f.positionAt(e,m,l),n=f.positionAt(e,g,l);E.replace(E.mapping.slice(b).map(t+o),E.mapping.slice(b).map(n+o),new(0,i("5SAOw").Slice)(r.rows[e-h],0,0))}S();var y=f,_=l;let{schema:C}=e,I=(e,t,n,r)=>{let i=o+y.positionAt(t,n,_),a=e.doc.nodeAt(i),s=r?C.nodes.tableHeader:C.nodes.tableCell,l=s!==a?.type,d=!!a&&[C.nodes.tableCell,C.nodes.tableHeader].includes(a.type);l&&d&&e.setNodeMarkup(i,s,a?.attrs,a?.marks)};I(E,0,0,u||p);for(let e=1;e<y.width;e++)I(E,0,e,p);for(let e=1;e<y.height;e++)I(E,e,0,u);E.setSelection(new(0,i("7XFGZ").CellSelection)(E.doc.resolve(o+f.map[h*f.width+m]),E.doc.resolve(o+f.map[(T-1)*f.width+g-1]))),t(E)}let d=["microsoft-excel","google-spreadsheets"],c=(e,t,o)=>{let n=[];for(let r of e.rows){let e=t.left;for(let t=0;t<r.childCount;t++){let i=r.child(t);if(e+i.attrs.colspan<=o.width)n.push(i),e+=i.attrs.colspan;else break}}for(let e of n)e.attrs.colwidth=null;return e};e.exports.handlePaste=function(e,t,a,s){if(!(0,i("bMyNT").isInTable)(e.state))return!1;let{schema:p}=e.state,u=(0,n.editorExperiment)("nested-tables-in-tables",!0),f=(0,i("dh538").fg)("platform_editor_paste_full_table_inside_empty_cell"),h=1===a.content.childCount&&a.content.firstChild?.type===p.nodes.table&&0!==a.openStart&&0!==a.openEnd,m=e.state.selection,g=m instanceof i("7XFGZ").CellSelection;if(f&&u&&!h&&!g&&m.empty&&!(s&&d.includes(s.pasteSource))){let e=(0,o.findParentNode)(e=>e.type===p.nodes.tableCell||e.type===p.nodes.tableHeader)(m);if(e&&e.node.contentMatchAt(0).matchType(p.nodes.table)?.validEnd)return!1}let T=function(e){if(!e.size)return null;let{content:t,openStart:o,openEnd:n}=e;if(!t.firstChild)throw Error("pastedCells: no firstChild defined for content");for(;1===t.childCount&&(o>0&&n>0||"table"===t.firstChild.type.spec.tableRole);)if(o--,n--,!(t=t.firstChild.content).firstChild)throw Error("pastedCells: no firstChild defined for content");let a=t.firstChild,s=a.type.spec.tableRole,{schema:l}=a.type,d=[];if("row"===s)for(let e=0;e<t.childCount;e++){let a=t.child(e).content,s=e?0:Math.max(0,o-1),c=e<t.childCount-1?0:Math.max(0,n-1);(s||c)&&(a=r((0,i("d1kIV").tableNodeTypes)(l).row,new(0,i("5SAOw").Slice)(a,s,c)).content),d.push(a)}else{if("cell"!==s&&"header_cell"!==s)return null;d.push(o||n?r((0,i("d1kIV").tableNodeTypes)(l).row,new(0,i("5SAOw").Slice)(t,o,n)).content:t)}let c=d.map(e=>(function(e,t){let o=[];return t.forEach(t=>{let n=(0,i("d1kIV").tableNodeTypes)(e).cell,r=t.type===n?t:n.createAndFill(t.attrs,t.content,t.marks)??t;o.push(r)}),i("5SAOw").Fragment.from(o)})(l,e));return function(e,t){let o=[];for(let e=0;e<t.length;e++){let n=t[e];for(let t=n.childCount-1;t>=0;t--){let{rowspan:r,colspan:i}=n.child(t).attrs;for(let t=e;t<e+r;t++)o[t]=(o[t]||0)+i}}let n=0;for(let e=0;e<o.length;e++)n=Math.max(n,o[e]);for(let r=0;r<o.length;r++)if(r>=t.length&&t.push(i("5SAOw").Fragment.empty),o[r]<n){let a=(0,i("d1kIV").tableNodeTypes)(e).cell.createAndFill(),s=[];for(let e=o[r];e<n;e++)s.push(a);t[r]=t[r].append(i("5SAOw").Fragment.from(s))}return{height:t.length,width:n,rows:t}}(l,c)}(a);if(g){T||(T={width:1,height:1,rows:[i("5SAOw").Fragment.from(r((0,i("d1kIV").tableNodeTypes)(e.state.schema).cell,a))]});let t=m.$anchorCell.node(-1),o=m.$anchorCell.start(-1),n=i("LmqWp").TableMap.get(t),s=n.rectBetween(m.$anchorCell.pos-o,m.$headCell.pos-o);return T=function({width:e,height:t,rows:o},n,r){let a=o,s=e,l=t;if(s!==n){let e=[],t=[];for(let o=0;o<a.length;o++){let r=a[o],s=[];for(let t=e[o]||0,a=0;t<n;a++){let l=r.child(a%r.childCount);t+l.attrs.colspan>n&&(l=l.type.create((0,i("jl382").removeColSpan)(l.attrs,l.attrs.colspan,t+l.attrs.colspan-n),l.content)),s.push(l),t+=l.attrs.colspan;for(let t=1;t<l.attrs.rowspan;t++)e[o+t]=(e[o+t]||0)+l.attrs.colspan}t.push(i("5SAOw").Fragment.from(s))}a=t,s=n}if(l!==r){let e=[];for(let t=0,o=0;t<r;t++,o++){let n=[],s=a[o%l];for(let e=0;e<s.childCount;e++){let o=s.child(e);t+o.attrs.rowspan>r&&(o=o.type.create({...o.attrs,rowspan:Math.max(1,r-o.attrs.rowspan)},o.content)),n.push(o)}e.push(i("5SAOw").Fragment.from(n))}a=e,l=r}return{width:s,height:l,rows:a}}(T,s.right-s.left,s.bottom-s.top),l(e.state,e.dispatch,o,s,c(T,s,n)),!0}if(T){let t=(0,i("bzgWU").selectionCell)(m);if(!t)throw Error("handlePaste: no cell found");let o=t.start(-1),n=i("LmqWp").TableMap.get(t.node(-1)).findCell(t.pos-o),r=i("LmqWp").TableMap.get(t.node(-1));return l(e.state,e.dispatch,o,n,c(T,n,r)),!0}return!1}}),a("d1kIV",function(e,t){e.exports.tableNodeTypes=function(e){let t=e.cached.tableNodeTypes;if(!t)for(let o in t={},e.cached.tableNodeTypes=t,e.nodes){let n=e.nodes[o],r=n.spec.tableRole;r&&(t[r]=n)}return t}}),a("2vynv",function(e,t){function o(e,t,o){let n=t.map.cellsInRect({left:0,top:0,right:"row"===e?t.map.width:1,bottom:"column"===e?t.map.height:1});for(let e=0;e<n.length;e++){let r=t.table.nodeAt(n[e]);if(r&&r.type!==o.header_cell)return!1}return!0}e.exports.isHeaderEnabledByType=o,e.exports.toggleHeader=function(e){return function(t,n){if(!(0,i("bMyNT").isInTable)(t))return!1;if(n){let r,a=(0,i("d1kIV").tableNodeTypes)(t.schema),s=(0,i("2QyFu").selectedRect)(t),l=t.tr,d=o("row",s,a),c=o("column",s,a),p=+!!("column"===e?d:"row"===e&&c),u="column"===e?new(0,i("LmqWp").Rect)(0,p,1,s.map.height):"row"===e?new(0,i("LmqWp").Rect)(p,0,s.map.width,1):s;r="column"===e?c?a.cell:a.header_cell:"row"===e?d?a.cell:a.header_cell:a.cell,s.map.cellsInRect(u).forEach(e=>{let t=e+s.tableStart,o=l.doc.nodeAt(t);o&&l.setNodeMarkup(t,r,o.attrs)}),n(l)}return!0}}}),a("9KolL",function(e,t){function o(e){let t,o=0,n=0,r=(0,i("id9O1").findTable)(e);return r&&(o=(t=i("LmqWp").TableMap.get(r.node)).height,n=t.width),{table:r,map:t,totalRowCount:o,totalColumnCount:n}}e.exports.getSelectedTableInfo=o,e.exports.getSelectedCellInfo=function(e){let t=1,n=1,r=1,{table:a,map:s,totalRowCount:l,totalColumnCount:d}=o(e);if(a&&s){let o=(0,i("iP1et").getSelectionRect)(e);o&&(r=s.cellsInRect(o).length,t=o.right-o.left,n=o.bottom-o.top)}return{totalRowCount:l,totalColumnCount:d,horizontalCells:t,verticalCells:n,totalCells:r}}}),a("k2RCe",function(t,o){e(t.exports,"quickInsertPlugin",()=>i("e6sdP").quickInsertPlugin),i("e6sdP")}),a("e6sdP",function(e,o){var n=i("l998X");i("42omo");let r=(0,i("2XqLN").default)((e,t)=>e.reduce((e,o)=>{if("function"==typeof o&&!o.disableMemo){let n=o(t);return e.concat(n)}return e.concat(o)},[])),a=(e,t)=>{let o=r(e,t);return e.some(e=>"function"==typeof e&&e.disableMemo)?o.flatMap(e=>"function"==typeof e&&e.disableMemo?e(t):e):o},s={threshold:.3,includeScore:!0,keys:[{name:"title",weight:.57},{name:"keywords",weight:.08},{name:"description",weight:.04},{name:"keyshortcut",weight:.01}]};var l=i("1oCLl");let d=new(0,i("ks2lK").PluginKey)("quickInsertPluginKey"),c=({tr:e})=>e.setMeta(d,{isElementBrowserModalOpen:!0}),p=()=>(e,t)=>(t&&t(e.tr.setMeta(d,{isElementBrowserModalOpen:!1})),!0),u=e=>f(e),f=e=>(t,o)=>(n,r)=>{let a=t.action((e,t={})=>(0,i("zT4ZO").insertSelectedItem)(e,t)(n,n.tr,n.selection.head),n,o);return a&&r&&r(a),e?.(t),!0},h=new(0,i("ks2lK").PluginKey)("quickInsertOpenExperience"),m={QUICK_INSERT_BUTTON:"quick-insert-button",TYPEAHEAD:"typeahead"},g={USER_CANCELED:"user-canceled",EDITOR_DESTROYED:"editor-destroyed"},T=({refs:e,dispatchAnalyticsEvent:t})=>{let o,n,r=()=>(o||(o=e.popupsMountPoint||e.wrapperElement||(0,i("fWXWs").getPopupContainerFromEditorView)(n)),o),a=new(0,i("grmt9").Experience)("menu-open",{actionSubjectId:"quick-insert-menu",dispatchAnalyticsEvent:t,checks:[new(0,i("fo9p3").ExperienceCheckTimeout)({durationMs:500}),new(0,i("SI3ya").ExperienceCheckDomMutation)({onDomMutation:({mutations:e})=>{if(e.some(_))return{status:"success"}},observeConfig:()=>({target:r(),options:{childList:!0}})})]});return new(0,i("1S4f7").SafePlugin)({key:h,props:{handleDOMEvents:{click:(e,t)=>{y(t.target)&&a.start({method:m.QUICK_INSERT_BUTTON})},beforeinput:(e,t)=>{E(t)&&b(e)&&a.start({method:m.TYPEAHEAD})},keydown:(e,t)=>{S(t.key)&&!C(r())&&a.abort({reason:g.USER_CANCELED})}}},view:e=>(n=e.dom,{destroy:()=>{a.abort({reason:g.EDITOR_DESTROYED})}})})},E=({inputType:e,data:t})=>"insertText"===e&&"/"===t,b=({state:e})=>{let{from:t,$from:o}=e.selection;if("codeBlock"===o.parent.type.name||o.marks().some(e=>"code"===e.type.name))return!1;if(0===t)return!0;let n=e.doc.resolve(t).nodeBefore;return!n||0===(n.textContent?.slice(-1)||"").trim().length},S=e=>"Escape"===e||"Backspace"===e,y=e=>e instanceof HTMLElement&&("editor-quick-insert-button"===e.dataset.testid||!!e.closest('[data-testid="editor-quick-insert-button"]')),_=({type:e,addedNodes:t})=>"childList"===e&&[...t].some(C),C=e=>(0,i("fWXWs").containsPopupWithNestedElement)(e,".fabric-editor-typeahead");var I=i("42omo"),O=i("ism5g");let k=(0,i("9K4OG").css)({display:"inline-flex",margin:"0 var(--ds-space-negative-050, -4px)"}),v=(0,i("9K4OG").css)({flex:"1 0 auto",margin:"0 var(--ds-space-050, 4px)"}),x=(0,i("9K4OG").css)({display:"flex",flex:"1 1 auto",boxSizing:"border-box",padding:"var(--ds-space-200, 16px) var(--ds-space-200, 16px) 0 10px",overflow:"hidden",backgroundColor:`var(--ds-surface-overlay, ${i("6fnsQ").N0})`,borderRadius:"var(--ds-radius-small, 3px)"}),N=(0,i("9K4OG").css)({display:"flex",padding:"var(--ds-space-200, 16px)",position:"relative",alignItems:"center",justifyContent:"space-between"}),A={name:"1446vv2",styles:"display:flex;justify-content:flex-end;padding-block-start:var(--ds-space-200, 16px);padding-inline:var(--ds-space-200, 16px)"},P=e=>{let[t,o]=(0,I.useState)(),{helpUrl:n,intl:r,onInsertItem:a}=e,s=(0,I.useCallback)(e=>{o(e)},[o]),l=(0,I.useCallback)(e=>{a(e)},[a]),d=(0,I.useCallback)(()=>(0,i("9K4OG").jsx)(M,{onInsert:()=>l(t),beforeElement:n?R(n,r.formatMessage(i("auDHv").messages.help)):void 0}),[l,t,n,r]),c=(0,I.useCallback)(()=>{var t;return(0,i("9K4OG").jsx)("div",{css:x},(0,i("9K4OG").jsx)(O.default,{categories:[{title:(t=e.intl).formatMessage(i("auDHv").messages.all),name:"all"},{title:t.formatMessage(i("auDHv").messages.AI),name:"AI"},{title:t.formatMessage(i("auDHv").messages.formatting),name:"formatting"},{title:t.formatMessage(i("auDHv").messages["confluence-content"]),name:"confluence-content"},{title:t.formatMessage(i("auDHv").messages.media),name:"media"},{title:t.formatMessage(i("auDHv").messages.visuals),name:"visuals"},{title:t.formatMessage(i("auDHv").messages.navigation),name:"navigation"},{title:t.formatMessage(i("auDHv").messages["external-content"]),name:"external-content"},{title:t.formatMessage(i("auDHv").messages.communication),name:"communication"},{title:t.formatMessage(i("auDHv").messages.reporting),name:"reporting"},{title:t.formatMessage(i("auDHv").messages.admin),name:"admin"},{title:t.formatMessage(i("auDHv").messages.development),name:"development"}],getItems:e.getItems,showSearch:!0,showCategories:!0,mode:"full",onSelectItem:s,onInsertItem:l,emptyStateHandler:e.emptyStateHandler,autoFocusSearch:!1}))},[e.intl,e.getItems,s,l,e.emptyStateHandler]),p=(0,i("dh538").fg)("platform_editor_fix_browse_modal_header")?r.formatMessage(i("auDHv").messages.browse):void 0;return(0,i("9K4OG").jsx)("div",{"data-editor-popup":!0},(0,i("9K4OG").jsx)(i("6xdDU").default,null,e.isOpen&&(0,i("9K4OG").jsx)(i("8CZUH").default,{label:p,testId:"element-browser-modal-dialog",stackIndex:0,key:"element-browser-modal",onClose:e.onClose,onCloseComplete:e.onCloseComplete,height:"664px",width:"x-large",shouldReturnFocus:e.shouldReturnFocus},(0,i("9K4OG").jsx)("div",{css:A},(0,i("9K4OG").jsx)(i("8TTLA").CloseButton,{onClick:e.onClose})),(0,i("9K4OG").jsx)(c,null),(0,i("9K4OG").jsx)(d,null))))};P.displayName="ModalElementBrowser";let M=({onInsert:e,beforeElement:t})=>{let o=(0,i("8C5kA").default)(),{onClose:n}=(0,i("804cB").useModal)();return(0,i("9K4OG").jsx)("div",{css:N},t||(0,i("9K4OG").jsx)("span",null),(0,i("9K4OG").jsx)("div",{css:k},(0,i("9K4OG").jsx)("div",{css:v},(0,i("9K4OG").jsx)(i("eEA8O").default,{appearance:"primary",onClick:e,testId:"ModalElementBrowser__insert-button"},(0,i("dh538").fg)("platform_editor_dec_a11y_fixes")?o.formatMessage(i("auDHv").messages.insert):"Insert")),(0,i("9K4OG").jsx)("div",{css:v},(0,i("9K4OG").jsx)(i("eEA8O").default,{appearance:"subtle",onClick:n,testId:"ModalElementBrowser__close-button"},(0,i("dh538").fg)("platform_editor_dec_a11y_fixes")?o.formatMessage(i("auDHv").messages.close):"Close"))))},R=(e,o)=>(0,i("9K4OG").jsx)(i("eEA8O").default,{iconBefore:(0,i("9K4OG").jsx)(t(i("195qZ")),{label:""}),appearance:"subtle-link",href:e,target:"_blank",testId:"ModalElementBrowser__help-button"},o);var w=(0,i("gmMgo").default)(P);let L=({quickInsertState:e,isOffline:o,editorView:r,helpUrl:a,insertItem:s,getSuggestions:l,api:d})=>{let c=(0,I.useCallback)((e,t)=>l?.({query:e,category:t})?.map(e=>o&&e.isDisabledOffline?{...e,isDisabled:!0}:e)??[],[l,e.lazyDefaultItems,e.providedItems,o]),u=(0,I.useCallback)(()=>{r.hasFocus()||r.focus()},[r]),f=t(I).useRef(null),h=(0,I.useCallback)(e=>{p()(r.state,r.dispatch),(0,i("dh538").fg)("platform_editor_ease_of_use_metrics")&&d?.core.actions.execute(d?.metrics?.commands.startActiveSessionTimer()),f.current=e},[r,d]),m=(0,I.useCallback)(()=>{p()(r.state,r.dispatch),(0,i("dh538").fg)("platform_editor_ease_of_use_metrics")&&d?.core.actions.execute(d?.metrics?.commands.startActiveSessionTimer()),u()},[r,u,d]),g=(0,I.useCallback)(()=>{if(!f.current)return void u();let e=f.current;f.current=null,u(),s?.(e)(r.state,r.dispatch)},[r,u,s]);return(0,n.jsx)(w,{getItems:c,onInsertItem:h,helpUrl:a,isOpen:e.isElementBrowserModalOpen||!1,emptyStateHandler:e.emptyStateHandler,onClose:m,onCloseComplete:g,shouldReturnFocus:!1})};var B=({editorView:e,helpUrl:t,pluginInjectionAPI:o})=>{let{lazyDefaultItems:r,providedItems:a,isElementBrowserModalOpen:s,emptyStateHandler:l,mode:d}=(0,i("eiA8Z").useSharedPluginStateWithSelector)(o,["quickInsert","connectivity"],e=>({lazyDefaultItems:e.quickInsertState?.lazyDefaultItems,providedItems:e.quickInsertState?.providedItems,isElementBrowserModalOpen:e.quickInsertState?.isElementBrowserModalOpen,emptyStateHandler:e.quickInsertState?.emptyStateHandler,mode:e.connectivityState?.mode}));return(0,n.jsx)(L,{quickInsertState:{lazyDefaultItems:r,providedItems:a,isElementBrowserModalOpen:s,emptyStateHandler:l},editorView:e,helpUrl:t,isOffline:(0,i("91bcx").isOfflineMode)(d),insertItem:o?.quickInsert?.actions?.insertItem,getSuggestions:o?.quickInsert?.actions?.getSuggestions,api:o})};let D=(e,t=()=>[],o)=>{let{query:n,category:r,disableDefaultItems:a,featuredItems:l,prioritySortingFn:d}=e,c=a?[]:t(),p=o?(0,i("i4oLV").dedupe)([...c,...o],e=>`${e.title}-${e.description??""}`):c;return l?p.filter(e=>e.featured):function(e,t,o){if(""===e)return t.slice(0).sort((e,t)=>(e.priority||Number.POSITIVE_INFINITY)-(t.priority||Number.POSITIVE_INFINITY));let n={...s};if(o){let e=o(t);e&&(n.sortFn=e)}return new(0,i("3KVX0").default)(t,n).search(e).map(e=>e.item)}(((0,i("dh538").fg)("platform_editor_fix_space_triggering_ai")?n?.trimEnd():n)||"","all"!==r&&r?p.filter(e=>e.categories&&e.categories.includes(r)):p,d)},U=e=>(t,o)=>(o&&o(t.tr.setMeta(d,e)),!0);e.exports.quickInsertPlugin=({config:e,api:o})=>{let r,s={},p=t=>{e?.onInsert?.(t)},f={id:i("lOELb").TypeAheadAvailableNodes.QUICK_INSERT,trigger:"/",headless:e?.headless,getItems({query:t,editorState:o}){let n=d.getState(o);return Promise.resolve(D({query:t,disableDefaultItems:e?.disableDefaultItems,prioritySortingFn:e?.prioritySortingFn},n?.lazyDefaultItems,n?.providedItems))},selectItem:(e,t,o)=>{let n=t.action(o,e);return n&&p(t),n},getMoreOptionsButtonConfig:e?.enableElementBrowser||!(0,i("dh538").fg)("platform_editor_controls_fix_view_more_in_comment")?({formatMessage:e})=>({title:e(i("4HWgE").toolbarInsertBlockMessages.viewMore),ariaLabel:e(i("4HWgE").toolbarInsertBlockMessages.viewMoreAriaLabel),onClick:c,iconBefore:(0,n.jsx)(t(i("9VJDA")),{label:""})}):void 0};return{name:"quickInsert",pmPlugins:t=>[{name:"quickInsert",plugin:({providerFactory:o,getIntl:n,dispatch:r})=>{var s,l,c,p,u;return s=t,l=o,c=n,p=r,u=e?.emptyStateHandler,new(0,i("1S4f7").SafePlugin)({key:d,state:{init:()=>({isElementBrowserModalOpen:!1,emptyStateHandler:u,lazyDefaultItems:()=>a(s||[],c())}),apply(e,t){let o=e.getMeta(d);if(o&&Object.keys(o).some(e=>t[e]!==o[e])){let e={...t,...o};return p(d,e),e}return t}},view(e){let t=async(t,o)=>{if(o)try{let t=await o,n=await t.getItems();U({provider:t,providedItems:n})(e.state,e.dispatch)}catch(e){console.error("Error getting items from quick insert provider",e)}};return l.subscribe("quickInsertProvider",t),{destroy(){l.unsubscribe("quickInsertProvider",t)}}}})}},...(0,l.expValEquals)("platform_editor_experience_tracking","isEnabled",!0)?[{name:"quickInsertOpenExperience",plugin:()=>T({refs:s,dispatchAnalyticsEvent:e=>o?.analytics?.actions?.fireAnalyticsEvent(e)})}]:[]],pluginsOptions:{typeAhead:f},contentComponent:({editorView:t,popupsMountPoint:r,wrapperElement:a})=>(s.popupsMountPoint=r||void 0,s.wrapperElement=a||void 0,!t||(0,l.expValEquals)("platform_editor_hydratable_ui","isEnabled",!0)&&(0,i("eTj7Y").isSSR)())?null:e?.enableElementBrowser?(0,n.jsx)(B,{editorView:t,helpUrl:e?.elementBrowserHelpUrl,pluginInjectionAPI:o}):null,getSharedState(e){if(!e)return null;let t=d.getState(e);return t?{typeAheadHandler:f,lazyDefaultItems:t.lazyDefaultItems,emptyStateHandler:t.emptyStateHandler,providedItems:t.providedItems,isElementBrowserModalOpen:t.isElementBrowserModalOpen}:null},actions:{insertItem:u(p),openTypeAhead:(e,t)=>!!o?.typeAhead?.actions.open({triggerHandler:f,inputMethod:e,removePrefixTriggerOnCancel:t}),getSuggestions:t=>{let{lazyDefaultItems:n,providedItems:r}=o?.quickInsert?.sharedState.currentState()??{};return e?.prioritySortingFn&&(t={...t,prioritySortingFn:e.prioritySortingFn}),D(t,n,r)}},commands:{openElementBrowserModal:({tr:e})=>((0,i("dh538").fg)("platform_editor_ease_of_use_metrics")&&o?.metrics?.commands.handleIntentToStartEdit({shouldStartTimer:!1,shouldPersistActiveSession:!0})({tr:e}),c({tr:e})),addQuickInsertItem:e=>({tr:t})=>{let{lazyDefaultItems:n}=o?.quickInsert?.sharedState.currentState()??{},i=n?n():[],s=a([e],r);return t.setMeta(d,{lazyDefaultItems:()=>[...i,...s]})}},usePluginHook:()=>{r=(0,i("8C5kA").default)()}}}}),a("fWXWs",function(e,t){e.exports.containsPopupWithNestedElement=(e,t)=>e instanceof HTMLElement&&(e.matches('[data-editor-popup="true"]')?!!e.querySelector(t):!!e.querySelector(`:scope > [data-editor-popup="true"] ${t}`)),e.exports.getPopupContainerFromEditorView=e=>{let t=e?.closest(".ak-editor-content-area");return t?.querySelector(':scope > [data-testid="plugins-components-wrapper"]')||void 0}}),a("grmt9",function(e,t){let o={pending:["started"],started:["aborted","failed","succeeded"],aborted:["started"],failed:["started"],succeeded:["started"]},n=(e,t)=>o[e]?.includes(t)??!1;class r{start(e){this.checks.forEach(t=>t.start(e))}stop(){this.checks.forEach(e=>e.stop())}constructor(e){this.checks=void 0,this.checks=e}}e.exports.Experience=class{startCheck(){this.stopCheck(),this.check.start(({status:e,reason:t,metadata:o})=>{"success"===e?this.success({reason:t,metadata:o}):"abort"===e?this.abort({reason:t,metadata:o}):"failure"===e&&this.failure({reason:t,metadata:o})})}stopCheck(){this.check.stop()}getEndStateMetadata(e){let t={...e?.metadata};return e?.reason&&(t.experienceEndReason=e.reason),t}transitionTo(e,t){return!!n(this.currentState,e)&&(this.currentState=e,"started"===e&&(this.isSampledTrackingEnabled=Math.random()<this.sampleRate,this.startTimeMs=Date.now(),this.startMetadata=t),this.trackTransition(e,t),"started"===e?this.startCheck():(this.stopCheck(),this.startMetadata=void 0),this.statesSeen.add(e),!0)}trackTransition(e,t){let o={experienceKey:this.id,experienceStatus:e,experienceStatusFirstSeen:!this.statesSeen.has(e),experienceStartTime:this.startTimeMs||0,experienceDuration:this.startTimeMs?Date.now()-this.startTimeMs:0,...this.globalMetadata,...this.startMetadata,...t},n={action:i("d925B").ACTION.EXPERIENCE_MEASURED,actionSubject:i("d925B").ACTION_SUBJECT.EDITOR,actionSubjectId:this.actionSubjectId,eventType:i("d925B").EVENT_TYPE.OPERATIONAL,attributes:o};if(this.dispatchAnalyticsEvent(n),this.isSampledTrackingEnabled){let e={action:i("d925B").ACTION.EXPERIENCE_SAMPLED,actionSubject:i("d925B").ACTION_SUBJECT.EDITOR,actionSubjectId:this.actionSubjectId,eventType:i("d925B").EVENT_TYPE.OPERATIONAL,attributes:o};this.dispatchAnalyticsEvent(e)}}start(e){return e.forceRestart&&"started"===this.currentState&&this.abort({reason:i("8kPu1").EXPERIENCE_ABORT_REASON.RESTARTED}),this.transitionTo("started",{experienceStartMethod:e.method,...e.metadata})}success(e){let t=this.getEndStateMetadata(e);return this.transitionTo("succeeded",t)}abort(e){let t=this.getEndStateMetadata(e);return this.transitionTo("aborted",t)}failure(e){let t=this.getEndStateMetadata(e);return this.transitionTo("failed",t)}constructor(e,t){this.id=void 0,this.actionSubjectId=void 0,this.dispatchAnalyticsEvent=void 0,this.sampleRate=void 0,this.globalMetadata=void 0,this.check=void 0,this.currentState="pending",this.statesSeen=new Set,this.isSampledTrackingEnabled=void 0,this.startTimeMs=void 0,this.startMetadata=void 0,this.id=e,this.actionSubjectId=t.actionSubjectId,this.dispatchAnalyticsEvent=t.dispatchAnalyticsEvent,this.sampleRate=t.sampleRate??i("8kPu1").DEFAULT_EXPERIENCE_SAMPLE_RATE,this.globalMetadata={...t.metadata,experienceAction:t.action},this.check=new r(t.checks||[])}}}),a("SI3ya",function(e,t){e.exports.ExperienceCheckDomMutation=class{start(e){this.stop();let t=this.observeConfig();if(!t?.target)return void e({status:"failure",reason:i("8kPu1").EXPERIENCE_FAILURE_REASON.DOM_MUTATION_TARGET_NOT_FOUND});this.mutationObserver=new MutationObserver(t=>{try{let o=this.onDomMutation({mutations:t});o&&e(o)}catch(t){e({status:"failure",reason:i("8kPu1").EXPERIENCE_FAILURE_REASON.DOM_MUTATION_CHECK_ERROR})}});let{target:o,options:n}=t;this.mutationObserver.observe(o,n)}stop(){this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=void 0)}constructor({onDomMutation:e,observeConfig:t}){this.mutationObserver=void 0,this.onDomMutation=void 0,this.observeConfig=void 0,this.onDomMutation=e,this.observeConfig=t}}}),a("fo9p3",function(e,t){let o={status:"failure",reason:i("8kPu1").EXPERIENCE_FAILURE_REASON.TIMEOUT};e.exports.ExperienceCheckTimeout=class{start(e){this.stop(),this.timeoutId=setTimeout(()=>{e(this.onTimeout()||o)},this.durationMs)}stop(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=void 0)}constructor({durationMs:e,onTimeout:t=()=>o}){this.timeoutId=void 0,this.durationMs=0,this.onTimeout=void 0,this.durationMs=e,this.onTimeout=t}}}),a("iVgsf",function(e,t){let o=i("4mJKd")(5);e.exports=Promise.all([o("lkOIY"),o("6wr18"),o("ffEVr"),o("Wowvf"),o("5WLpx")]).then(()=>i("lEolr"))}),a("8EdHV",function(e,t){function o(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!=e&&this.setState(e)}function n(e){this.setState((function(t){var o=this.constructor.getDerivedStateFromProps(e,t);return null!=o?o:null}).bind(this))}function r(e,t){try{var o=this.props,n=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(o,n)}finally{this.props=o,this.state=n}}o.__suppressDeprecationWarning=!0,n.__suppressDeprecationWarning=!0,r.__suppressDeprecationWarning=!0,e.exports.polyfill=function(e){var t=e.prototype;if(!t||!t.isReactComponent)throw Error("Can only polyfill class components");if("function"!=typeof e.getDerivedStateFromProps&&"function"!=typeof t.getSnapshotBeforeUpdate)return e;var i=null,a=null,s=null;if("function"==typeof t.componentWillMount?i="componentWillMount":"function"==typeof t.UNSAFE_componentWillMount&&(i="UNSAFE_componentWillMount"),"function"==typeof t.componentWillReceiveProps?a="componentWillReceiveProps":"function"==typeof t.UNSAFE_componentWillReceiveProps&&(a="UNSAFE_componentWillReceiveProps"),"function"==typeof t.componentWillUpdate?s="componentWillUpdate":"function"==typeof t.UNSAFE_componentWillUpdate&&(s="UNSAFE_componentWillUpdate"),null!==i||null!==a||null!==s)throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+(e.displayName||e.name)+" uses "+("function"==typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()")+" but also contains the following legacy lifecycles:"+(null!==i?"\n  "+i:"")+(null!==a?"\n  "+a:"")+(null!==s?"\n  "+s:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks");if("function"==typeof e.getDerivedStateFromProps&&(t.componentWillMount=o,t.componentWillReceiveProps=n),"function"==typeof t.getSnapshotBeforeUpdate){if("function"!=typeof t.componentDidUpdate)throw Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=r;var l=t.componentDidUpdate;t.componentDidUpdate=function(e,t,o){var n=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:o;l.call(this,e,t,n)}}return e}}),a("iYupH",function(t,o){Object.defineProperty(t.exports,"__esModule",{value:!0,configurable:!0}),e(t.exports,"default",()=>i);var n,r=!!("undefined"!=typeof window&&window.document&&window.document.createElement);function i(e){if((!n&&0!==n||e)&&r){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),n=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return n}}),a("c2Q7G",function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports}),a("iyK4o",function(e,t){var o=i("atzas");function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}e.exports=function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports}),a("4CXrK",function(e,t){var o=i("crVe8").default,n=i("gurtx");e.exports=function(e,t){if(t&&("object"==o(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return n(e)},e.exports.__esModule=!0,e.exports.default=e.exports}),a("JL40l",function(e,t){var o=i("gHZmH");e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports}),a("cLwe6",function(e,t){var o=i("eGvGZ");Object.defineProperty(e.exports,"__esModule",{value:!0}),Object.defineProperty(e.exports,"CellMeasurer",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e.exports,"CellMeasurerCache",{enumerable:!0,get:function(){return r.default}}),e.exports.default=void 0;var n=o(i("4Gybo")),r=o(i("g0BUc"));e.exports.default=n.default}),a("4Gybo",function(e,t){var o=i("eGvGZ"),n=i("crVe8");Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=void 0;var r=o(i("c2Q7G")),a=o(i("iyK4o")),s=o(i("4CXrK")),l=o(i("18f43")),d=o(i("JL40l")),c=o(i("l2SD1")),p=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var o=u(t);if(o&&o.has(e))return o.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&({}).hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}return r.default=e,o&&o.set(e,r),r}(i("42omo"));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,o=new WeakMap;return(u=function(e){return e?o:t})(e)}function f(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(f=function(){return!!e})()}var h=e.exports.default=function(e){function t(){(0,r.default)(this,t);for(var e,o,n,i=arguments.length,a=Array(i),d=0;d<i;d++)a[d]=arguments[d];return o=t,n=[].concat(a),o=(0,l.default)(o),e=(0,s.default)(this,f()?Reflect.construct(o,n||[],(0,l.default)(this).constructor):o.apply(this,n)),(0,c.default)(e,"_child",p.createRef()),(0,c.default)(e,"_measure",function(){var t=e.props,o=t.cache,n=t.columnIndex,r=void 0===n?0:n,i=t.parent,a=t.rowIndex,s=void 0===a?e.props.index||0:a,l=e._getCellMeasurements(),d=l.height,c=l.width;(d!==o.getHeight(s,r)||c!==o.getWidth(s,r))&&(o.set(s,r,c,d),i&&"function"==typeof i.recomputeGridSize&&i.recomputeGridSize({columnIndex:r,rowIndex:s}))}),(0,c.default)(e,"_registerChild",function(t){!t||t instanceof Element||console.warn("CellMeasurer registerChild expects to be passed Element or null"),e._child.current=t,t&&e._maybeMeasureCell()}),e}return(0,d.default)(t,e),(0,a.default)(t,[{key:"componentDidMount",value:function(){this._maybeMeasureCell()}},{key:"componentDidUpdate",value:function(){this._maybeMeasureCell()}},{key:"render",value:function(){var e=this,t=this.props.children,o="function"==typeof t?t({measure:this._measure,registerChild:this._registerChild}):t;return null===o?o:(0,p.cloneElement)(o,{ref:function(t){"function"==typeof o.ref?o.ref(t):o.ref&&(o.ref.current=t),e._child.current=t}})}},{key:"_getCellMeasurements",value:function(){var e=this.props.cache,t=this._child.current;if(!t||!t.ownerDocument||!t.ownerDocument.defaultView||!(t instanceof t.ownerDocument.defaultView.HTMLElement))return{height:0,width:0};var o=t.style.width,n=t.style.height;e.hasFixedWidth()||(t.style.width="auto"),e.hasFixedHeight()||(t.style.height="auto");var r=Math.ceil(t.offsetHeight),i=Math.ceil(t.offsetWidth);return o&&(t.style.width=o),n&&(t.style.height=n),{height:r,width:i}}},{key:"_maybeMeasureCell",value:function(){var e=this.props,t=e.cache,o=e.columnIndex,n=void 0===o?0:o,r=e.parent,i=e.rowIndex,a=void 0===i?this.props.index||0:i;if(!t.has(a,n)){var s=this._getCellMeasurements(),l=s.height,d=s.width;t.set(a,n,d,l),r&&"function"==typeof r.invalidateCellSizeAfterRender&&r.invalidateCellSizeAfterRender({columnIndex:n,rowIndex:a})}}}])}(p.PureComponent);(0,c.default)(h,"__internalCellMeasurerFlag",!1)}),a("g0BUc",function(e,t){var o=i("eGvGZ");Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=e.exports.DEFAULT_WIDTH=e.exports.DEFAULT_HEIGHT=void 0;var n=o(i("c2Q7G")),r=o(i("iyK4o")),a=o(i("l2SD1")),s=e.exports.DEFAULT_HEIGHT=30,l=e.exports.DEFAULT_WIDTH=100;function d(e,t){return"".concat(e,"-").concat(t)}e.exports.default=(0,r.default)(function e(){var t=this,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,n.default)(this,e),(0,a.default)(this,"_cellHeightCache",{}),(0,a.default)(this,"_cellWidthCache",{}),(0,a.default)(this,"_columnWidthCache",{}),(0,a.default)(this,"_rowHeightCache",{}),(0,a.default)(this,"_defaultHeight",void 0),(0,a.default)(this,"_defaultWidth",void 0),(0,a.default)(this,"_minHeight",void 0),(0,a.default)(this,"_minWidth",void 0),(0,a.default)(this,"_keyMapper",void 0),(0,a.default)(this,"_hasFixedHeight",void 0),(0,a.default)(this,"_hasFixedWidth",void 0),(0,a.default)(this,"_columnCount",0),(0,a.default)(this,"_rowCount",0),(0,a.default)(this,"columnWidth",function(e){var o=e.index,n=t._keyMapper(0,o);return void 0!==t._columnWidthCache[n]?t._columnWidthCache[n]:t._defaultWidth}),(0,a.default)(this,"rowHeight",function(e){var o=e.index,n=t._keyMapper(o,0);return void 0!==t._rowHeightCache[n]?t._rowHeightCache[n]:t._defaultHeight});var r=o.defaultHeight,i=o.defaultWidth,c=o.fixedHeight,p=o.fixedWidth,u=o.keyMapper,f=o.minHeight,h=o.minWidth;this._hasFixedHeight=!0===c,this._hasFixedWidth=!0===p,this._minHeight=f||0,this._minWidth=h||0,this._keyMapper=u||d,this._defaultHeight=Math.max(this._minHeight,"number"==typeof r?r:s),this._defaultWidth=Math.max(this._minWidth,"number"==typeof i?i:l)},[{key:"clear",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=this._keyMapper(e,t);delete this._cellHeightCache[o],delete this._cellWidthCache[o],this._updateCachedColumnAndRowSizes(e,t)}},{key:"clearAll",value:function(){this._cellHeightCache={},this._cellWidthCache={},this._columnWidthCache={},this._rowHeightCache={},this._rowCount=0,this._columnCount=0}},{key:"defaultHeight",get:function(){return this._defaultHeight}},{key:"defaultWidth",get:function(){return this._defaultWidth}},{key:"hasFixedHeight",value:function(){return this._hasFixedHeight}},{key:"hasFixedWidth",value:function(){return this._hasFixedWidth}},{key:"getHeight",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this._hasFixedHeight)return this._defaultHeight;var o=this._keyMapper(e,t);return void 0!==this._cellHeightCache[o]?Math.max(this._minHeight,this._cellHeightCache[o]):this._defaultHeight}},{key:"getWidth",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this._hasFixedWidth)return this._defaultWidth;var o=this._keyMapper(e,t);return void 0!==this._cellWidthCache[o]?Math.max(this._minWidth,this._cellWidthCache[o]):this._defaultWidth}},{key:"has",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=this._keyMapper(e,t);return void 0!==this._cellHeightCache[o]}},{key:"set",value:function(e,t,o,n){var r=this._keyMapper(e,t);t>=this._columnCount&&(this._columnCount=t+1),e>=this._rowCount&&(this._rowCount=e+1),this._cellHeightCache[r]=n,this._cellWidthCache[r]=o,this._updateCachedColumnAndRowSizes(e,t)}},{key:"_updateCachedColumnAndRowSizes",value:function(e,t){if(!this._hasFixedWidth){for(var o=0,n=0;n<this._rowCount;n++)o=Math.max(o,this.getWidth(n,t));var r=this._keyMapper(0,t);this._columnWidthCache[r]=o}if(!this._hasFixedHeight){for(var i=0,a=0;a<this._columnCount;a++)i=Math.max(i,this.getHeight(e,a));var s=this._keyMapper(e,0);this._rowHeightCache[s]=i}}}])}),a("158AJ",function(o,n){e(o.exports,"default",()=>a);var r=i("42omo");function a(){let{iconThemed:e}=(0,i("1R4Hk").useIconThemed)();return t(r).createElement("svg",{focusable:"false","aria-hidden":!0,width:40,height:40,viewBox:"0 0 40 40"},t(r).createElement("defs",null,t(r).createElement("linearGradient",{x1:"-26.046%",y1:"100%",x2:"62.626%",y2:"0%",id:"fallback-a"},t(r).createElement("stop",{stopColor:"#B3BAC5",offset:"0%"}),t(r).createElement("stop",{stopColor:"#A5ADBA",offset:"100%"})),t(r).createElement("linearGradient",{x1:"-12.24%",y1:"100%",x2:"82.44%",y2:"0%",id:"fallback-b"},t(r).createElement("stop",{stopColor:"#5A6977",offset:"0%"}),t(r).createElement("stop",{stopColor:"#454F59",offset:"100%"}))),t(r).createElement("g",{fill:"none",fillRule:"evenodd"},t(r).createElement("path",{fill:e({light:"#FFF",dark:"#161A1D"}),d:"M0 0h40v40H0z"}),t(r).createElement("path",{fill:e({light:"#DFE1E6",dark:"#738496"}),d:"M20 16h12v12H20z"}),t(r).createElement("path",{fill:e({light:"url(#fallback-a)",dark:"url(#fallback-b)"}),d:"M8 16h12v12H8z"}),t(r).createElement("path",{d:"M20 16c-4 .5-6.029 2.5-6.086 6-.057 3.5-2.028 5.5-5.914 6h12V16z",fill:e({light:"#A5ADBA",dark:"#454F59"})}),t(r).createElement("path",{fill:e({light:"#B3BAC5",dark:"#454F59"}),d:"M17.5 13h5v3h-5z"}),t(r).createElement("path",{fill:e({light:"#A5ADBA",dark:"#454F59"}),d:"M10 13h5v3h-5z"}),t(r).createElement("path",{fill:e({light:"#DFE1E6",dark:"#738496"}),d:"M25 13h5v3h-5z"})))}}),a("inOAE",function(t,o){e(t.exports,"textFormattingPlugin",()=>i("5mDFx").textFormattingPlugin),i("5mDFx")}),a("5mDFx",function(e,o){var n,r,a,s,l,d,c=i("l998X");i("42omo");var p=i("iu6m9");let u=(e,t,o)=>({tr:n})=>{let r=e.create(o);return n.selection instanceof i("ks2lK").TextSelection&&n.selection.$cursor?(r.isInSet(n.storedMarks||n.selection.$cursor.marks())?n.removeStoredMark(r):n.addStoredMark(r),n):f(r,t)({tr:n})},f=(e,t)=>({tr:o})=>{if(o.selection instanceof i("7XFGZ").CellSelection){let n=!0,r=[];o.selection.forEachCell((t,a)=>{r.push({node:t,pos:a});let s=a+t.nodeSize;n&&(n=(0,i("b167b").entireSelectionContainsMark)(e,o.doc,a,s))});for(let i=r.length-1;i>=0;i--){let a=r[i],s=a.pos,l=s+a.node.nodeSize;h(s,l,n,e,o,t)}}else{let{$from:n,$to:r}=o.selection,a=(0,i("b167b").entireSelectionContainsMark)(e,o.doc,n.pos,r.pos);h(n.pos,r.pos,a,e,o,t)}return o.docChanged?o:null},h=(e,t,o,n,r,a)=>{let{schema:s}=r.doc.type,{code:l}=s.marks;return n.type===l&&a?.base?.actions?.resolveMarks(e,t,r),r.doc.nodesBetween(r.mapping.map(e),r.mapping.map(t),(a,s)=>{if((0,i("dh538").fg)("editor_inline_comments_on_inline_nodes")){if(!a.isText&&!["emoji","status","date","mention","inlineCard"].includes(a.type.name))return!0}else if(!a.isText)return!0;let l=Math.max(s,r.mapping.map(e)),d=Math.min(s+a.nodeSize,r.mapping.map(t));return o?r.removeMark(l,d,n):r.addMark(l,d,n),!0}),r},m=({tr:e})=>{let{em:t}=e.doc.type.schema.marks;return t?(0,i("b167b").toggleMark)(t)({tr:e}):null},g=e=>t=>({tr:o})=>{let n=m({tr:o});return n?(e?.attachAnalyticsEvent({action:i("d925B").ACTION.FORMATTED,actionSubject:i("d925B").ACTION_SUBJECT.TEXT,eventType:i("d925B").EVENT_TYPE.TRACK,actionSubjectId:i("d925B").ACTION_SUBJECT_ID.FORMAT_ITALIC,attributes:{inputMethod:t}})(n),n):null},T=({tr:e})=>{let{strike:t}=e.doc.type.schema.marks;return t?(0,i("b167b").toggleMark)(t)({tr:e}):null},E=e=>t=>({tr:o})=>{let n=T({tr:o});return n?(e?.attachAnalyticsEvent({action:i("d925B").ACTION.FORMATTED,actionSubject:i("d925B").ACTION_SUBJECT.TEXT,eventType:i("d925B").EVENT_TYPE.TRACK,actionSubjectId:i("d925B").ACTION_SUBJECT_ID.FORMAT_STRIKE,attributes:{inputMethod:t}})(n),n):null},b=({tr:e})=>{let{strong:t}=e.doc.type.schema.marks;return t?(0,i("b167b").toggleMark)(t)({tr:e}):null},S=e=>t=>({tr:o})=>{let n=b({tr:o});return n?(e?.attachAnalyticsEvent({action:i("d925B").ACTION.FORMATTED,actionSubject:i("d925B").ACTION_SUBJECT.TEXT,eventType:i("d925B").EVENT_TYPE.TRACK,actionSubjectId:i("d925B").ACTION_SUBJECT_ID.FORMAT_STRONG,attributes:{inputMethod:t}})(n),n):null},y=({tr:e})=>{let{underline:t}=e.doc.type.schema.marks;return t?(0,i("b167b").toggleMark)(t)({tr:e}):null},_=e=>t=>({tr:o})=>{let n=y({tr:o});return n?(e?.attachAnalyticsEvent({action:i("d925B").ACTION.FORMATTED,actionSubject:i("d925B").ACTION_SUBJECT.TEXT,eventType:i("d925B").EVENT_TYPE.TRACK,actionSubjectId:i("d925B").ACTION_SUBJECT_ID.FORMAT_UNDERLINE,attributes:{inputMethod:t}})(n),n):null},C=({tr:e})=>{let{subsup:t}=e.doc.type.schema.marks;return t?(0,i("b167b").toggleMark)(t,{type:"sup"})({tr:e}):null},I=e=>t=>({tr:o})=>{let n=C({tr:o});return n?(e?.attachAnalyticsEvent({action:i("d925B").ACTION.FORMATTED,actionSubject:i("d925B").ACTION_SUBJECT.TEXT,eventType:i("d925B").EVENT_TYPE.TRACK,actionSubjectId:i("d925B").ACTION_SUBJECT_ID.FORMAT_SUPER,attributes:{inputMethod:t}})(n),n):null},O=({tr:e})=>{let{subsup:t}=e.doc.type.schema.marks;return t?(0,i("b167b").toggleMark)(t,{type:"sub"})({tr:e}):null},k=e=>t=>({tr:o})=>{let n=O({tr:o});return n?(e?.attachAnalyticsEvent({action:i("d925B").ACTION.FORMATTED,actionSubject:i("d925B").ACTION_SUBJECT.TEXT,eventType:i("d925B").EVENT_TYPE.TRACK,actionSubjectId:i("d925B").ACTION_SUBJECT_ID.FORMAT_SUB,attributes:{inputMethod:t}})(n),n):null},v=({api:e})=>({tr:t})=>{let{code:o}=t.doc.type.schema.marks;return o?u(o,e)({tr:t}):null},x=(e,t)=>o=>({tr:n})=>{let r=v({api:t})({tr:n});return r?(e?.attachAnalyticsEvent({action:i("d925B").ACTION.FORMATTED,actionSubject:i("d925B").ACTION_SUBJECT.TEXT,eventType:i("d925B").EVENT_TYPE.TRACK,actionSubjectId:i("d925B").ACTION_SUBJECT_ID.FORMAT_CODE,attributes:{inputMethod:o}})(r),r):null},N=(e,t,o,n)=>{e.forEachCell((e,r)=>{t.nodesBetween(r,r+e.nodeSize,o,n)})},A=["heading","blockquote"],P=["em","code","strike","strong","underline","textColor","subsup","backgroundColor"],M={em:i("d925B").ACTION_SUBJECT_ID.FORMAT_ITALIC,code:i("d925B").ACTION_SUBJECT_ID.FORMAT_CODE,strike:i("d925B").ACTION_SUBJECT_ID.FORMAT_STRIKE,strong:i("d925B").ACTION_SUBJECT_ID.FORMAT_STRONG,underline:i("d925B").ACTION_SUBJECT_ID.FORMAT_UNDERLINE,textColor:i("d925B").ACTION_SUBJECT_ID.FORMAT_COLOR,subsup:"subsup",backgroundColor:i("d925B").ACTION_SUBJECT_ID.FORMAT_BACKGROUND_COLOR},R=(e,t,o,n,r)=>function(a,s){if(a.type===o)if(o.isTextblock)return t.setNodeMarkup(s,e.nodes.paragraph),r.push(n),!1;else{let e=t.doc.resolve(s+1),o=t.doc.resolve(s+a.nodeSize-1),l=e.blockRange(o);if(l){let e=(0,i("aXG5V").liftTarget)(l);(e||0===e)&&(r.push(n),t.lift(l,e))}}return!0};function w(e,t,o,n,r){return function(a,s){if(a.type===o)if(o.isTextblock)return t.setNodeMarkup(s,e.schema.nodes.paragraph),r.push(n),!1;else{let e=t.doc.resolve(s+1),o=t.doc.resolve(s+a.nodeSize-1),l=e.blockRange(o);if(l){let e=(0,i("aXG5V").liftTarget)(l);(e||0===e)&&(r.push(n),t.lift(l,e))}}return!0}}let L=e=>t=>({tr:o})=>{let n=[],{schema:r}=o.doc.type;return P.forEach(e=>{let{from:t,to:a}=o.selection,s=r.marks[e];s&&(o.selection instanceof i("7XFGZ").CellSelection?N(o.selection,o.doc,(t,i)=>t.type!==o.doc.type.schema.nodes.tableCell&&t.type!==r.nodes.tableHeader||(o.doc.rangeHasMark(i,i+t.nodeSize,s)&&(n.push(M[e]),o.removeMark(i,i+t.nodeSize,s)),!1)):o.doc.rangeHasMark(t,a,s)&&(n.push(M[e]),o.removeMark(t,a,s)))}),A.forEach(e=>{let t=r.nodes[e],{$from:a,$to:s}=o.selection;o.selection instanceof i("7XFGZ").CellSelection?N(o.selection,o.doc,R(r,o,t,e,n)):o.doc.nodesBetween(a.pos,s.pos,R(r,o,t,e,n))}),o.setStoredMarks([]),n.length&&t&&e?.attachAnalyticsEvent({action:i("d925B").ACTION.FORMATTED,eventType:i("d925B").EVENT_TYPE.TRACK,actionSubject:i("d925B").ACTION_SUBJECT.TEXT,actionSubjectId:i("d925B").ACTION_SUBJECT_ID.FORMAT_CLEAR,attributes:{inputMethod:t,formattingCleared:n,dropdownMenu:t===i("d925B").INPUT_METHOD.TOOLBAR||t===i("d925B").INPUT_METHOD.FLOATING_TB?"textFormatting":void 0}})(o),o},B=(e,t)=>{let{code:o}=e.schema.marks,n=t>=0&&e.doc.nodeAt(t);return!!n&&!!n.marks.filter(e=>e.type===o).length},D=(e,t)=>{let{from:o,to:n,empty:r}=e.selection;if(r)return!!t.isInSet(e.tr.storedMarks||e.selection.$from.marks());let i=!1;return e.doc.nodesBetween(o,n,e=>{i=i||t.isInSet(e.marks)}),i},U=e=>{let{from:t,to:o}=e.selection,n=!1;return e.doc.nodesBetween(t,o,e=>-1===A.indexOf(e.type.name)||(n=!0,!1)),n},K=e=>P.filter(t=>{if(e.schema.marks[t]){let{$from:o,empty:n}=e.selection,{marks:r}=e.schema;return n?!!r[t].isInSet(e.storedMarks||o.marks()):(0,i("l6xRR").anyMarkActive)(e,r[t])}return!1}).length>0,j=e=>K(e)||U(e),F=(e,t)=>e&&e.filter(e=>!t.includes(e)),G=(e,t)=>e.filter(e=>e.content===t).length>0,H=new(0,i("ks2lK").PluginKey)("clearFormattingPlugin"),z=e=>new(0,i("1S4f7").SafePlugin)({state:{init:(e,t)=>({formattingIsPresent:j(t)}),apply(t,o,n,r){let i=j(r);return i!==o.formattingIsPresent?(e(H,{formattingIsPresent:i}),{formattingIsPresent:i}):o}},key:H});var V=i("1oCLl"),W=function(e){let t={};return(0,i("hgeg8").bindKeymapWithEditorCommand)((0,V.expValEquals)("platform_editor_hydratable_ui","isEnabled",!0)?(0,i("hgeg8").findShortcutByKeymap)(i("hgeg8").clearFormatting):i("hgeg8").clearFormatting.common,L(e)(i("d925B").INPUT_METHOD.SHORTCUT),t),(0,i("dus6D").keymap)(t)},q=new(0,i("1S4f7").SafePlugin)({props:{handleClick(e,t,o){if(navigator&&/Edge\/\d/.test(navigator.userAgent)||t>e.state.doc.content.size)return!1;let{code:n}=e.state.schema.marks,{paragraph:r}=e.state.schema.nodes,a=e.state.doc.resolve(t),s=(a.nodeBefore?a.nodeBefore.isInline:a.nodeAfter)&&(a.nodeAfter?a.nodeAfter.isInline:a.nodeBefore)&&0===a.textOffset,l=n&&(a.nodeBefore&&n.isInSet(a.nodeBefore.marks)||a.nodeAfter&&n.isInSet(a.nodeAfter.marks)),d=o.target&&o.target instanceof Node&&e.posAtDOM(o.target),c=e.state.doc.nodeAt(t),p=!!(c&&c.isText),u=a.parent.type===r&&0===a.textOffset&&null===a.nodeAfter;if(s&&l&&d&&(p||u)){let t=o.target.parentNode===e.domAtPos(d).node&&n.isInSet(e.state.doc.resolve(d).nodeAfter.marks),r=a.nodeBefore&&n.isInSet(a.nodeBefore.marks)?a.nodeAfter:a.nodeBefore,s=e.state.tr.setSelection(i("ks2lK").TextSelection.near(a));return t?s.setStoredMarks([n.create()]):s.setStoredMarks(r?r.marks:[]),e.dispatch(s),!0}return!1}}}),X=((n=X||{}).STRONG="__",n.STRIKE="~~",n.STRONG_MARKDOWN="**",n.ITALIC_MARKDOWN="*",n.ITALIC="_",n.CODE="`",n);let $={"~~":["_","__","**","*"],__:["~~","*"],"**":["_","~~"],"*":["~~","__"],_:["~~","**"],"`":["( "]};function Y(e,t,o,n){return(t,r,i,a)=>{let s,{doc:l,schema:d,tr:c}=t,p=t.doc.textBetween(i,i+o.length);if((p!==o||d?.marks?.code?.isInSet(l.resolve(i+1).marks()))&&(!(0,V.expValEquals)("platform_editor_lovability_inline_code","isEnabled",!0)||t.doc.textBetween(a-o.length,a)!==o)||(l.nodesBetween(i,a,e=>e.type===d.nodes.hardBreak?(s=!0,!1):!s),s))return null;let u=l.resolve(i),f=l.resolve(a);if(u.sameParent(f)&&!u.parent.type.allowsMarkType(e))return null;"code"===e.name&&n?.base?.actions?.resolveMarks(c.mapping.map(i),c.mapping.map(a),c);let h=c.mapping.map(i),m=c.mapping.map(a);return c.addMark(h,m,e.create()),c.doc.textBetween(m-o.length,m)===o&&c.delete(m-o.length,m),p===o&&c.delete(h,h+o.length),c.removeStoredMark(e)}}class J extends RegExp{exec(e){if(!e)return null;let t=[...e].reverse().join(""),o=super.exec(t);if(!o)return null;for(let e=0;e<o.length;e++)o[e]&&"string"==typeof o[e]&&(o[e]=[...o[e]].reverse().join(""));return o.input&&"string"==typeof o.input&&(o.input=[...o.input].reverse().join("")),o.input&&o[0]&&(o.index=o.input.length-o[0].length),o}}let Z=e=>{let t=e.replace(/(\W)/g,"\\$1"),o=$[e].map(e=>e.replace(/(\W)/g,"\\$1")).join("|"),n="^X(?=[^X\\s]).*?[^\\sX]X(?=[\\sOBJECT_REPLACEMENT_CHARACTER]COMBINATIONS|$)".replace("OBJECT_REPLACEMENT_CHARACTER",i("14sLv").leafNodeReplacementCharacter).replace("COMBINATIONS",o?`|${o}`:"");return new J(String.prototype.hasOwnProperty("replaceAll")?n.replaceAll("X",t):n.replace(/X/g,t))},Q=Z("__"),ee=Z("**"),et=Z("_"),eo=Z("*"),en=Z("~~"),er=Z("`"),ei=((e,t=!1)=>{let o=e.replace(/(\W)/g,"\\$1"),n=$[e].map(e=>e.replace(/(\W)/g,"\\$1")).join("|"),r=n?`|${n}`:"",a=`${t?"":"^"}X(?=[^X\\s]).*?[^\\sX]X(?=[\\s${i("14sLv").leafNodeReplacementCharacter}]${r}|$)`;return new J(String.prototype.hasOwnProperty("replaceAll")?a.replaceAll("X",o):a.replace(/X/g,o))})("`",!0);var ea=function(e,t,o){var n,r;let a=[];if(e.marks.strong&&a.push(...function(e,t){let o=(0,i("l03WE").inputRuleWithAnalytics)({action:i("d925B").ACTION.FORMATTED,actionSubject:i("d925B").ACTION_SUBJECT.TEXT,actionSubjectId:i("d925B").ACTION_SUBJECT_ID.FORMAT_STRONG,eventType:i("d925B").EVENT_TYPE.TRACK,attributes:{inputMethod:i("d925B").INPUT_METHOD.FORMATTING}},t),n=(0,i("l03WE").createRule)(Q,Y(e.marks.strong,e,"__")),r=(0,i("l03WE").createRule)(ee,Y(e.marks.strong,e,"**"));return[o(n),o(r)]}(e,t)),e.marks.em&&a.push(...function(e,t){let o=(0,i("l03WE").inputRuleWithAnalytics)({action:i("d925B").ACTION.FORMATTED,actionSubject:i("d925B").ACTION_SUBJECT.TEXT,actionSubjectId:i("d925B").ACTION_SUBJECT_ID.FORMAT_ITALIC,eventType:i("d925B").EVENT_TYPE.TRACK,attributes:{inputMethod:i("d925B").INPUT_METHOD.FORMATTING}},t),n=(0,i("l03WE").createRule)(et,Y(e.marks.em,e,"_")),r=(0,i("l03WE").createRule)(eo,Y(e.marks.em,e,"*"));return[o(n),o(r)]}(e,t)),e.marks.strike&&a.push(...(n=e,r=t,[(0,i("l03WE").inputRuleWithAnalytics)({action:i("d925B").ACTION.FORMATTED,actionSubject:i("d925B").ACTION_SUBJECT.TEXT,actionSubjectId:i("d925B").ACTION_SUBJECT_ID.FORMAT_STRIKE,eventType:i("d925B").EVENT_TYPE.TRACK,attributes:{inputMethod:i("d925B").INPUT_METHOD.FORMATTING}},r)((0,i("l03WE").createRule)(en,Y(n.marks.strike,n,"~~")))])),e.marks.code&&a.push(...function(e,t,o){let n=(0,i("l03WE").inputRuleWithAnalytics)({action:i("d925B").ACTION.FORMATTED,actionSubject:i("d925B").ACTION_SUBJECT.TEXT,actionSubjectId:i("d925B").ACTION_SUBJECT_ID.FORMAT_CODE,eventType:i("d925B").EVENT_TYPE.TRACK,attributes:{inputMethod:i("d925B").INPUT_METHOD.FORMATTING}},t),r=(0,V.expValEquals)("platform_editor_lovability_inline_code","isEnabled",!0);return[n((0,i("l03WE").createRule)(r?ei:er,Y(e.marks.code,e,"`",o),r))]}(e,t,o)),0!==a.length)return new(0,i("1S4f7").SafePlugin)((0,i("aIMBk").createPlugin)("text-formatting",a))};let es=new(0,i("ks2lK").PluginKey)("textFormatting"),el=()=>(e,t)=>{let{code:o}=e.schema.marks,{empty:n,$cursor:r}=e.selection;if(!n||!r)return!1;let{storedMarks:i}=e.tr;if(o){let n=D(e,o.create()),a=e.doc.rangeHasMark(r.pos,r.pos,o),s=e.doc.rangeHasMark(r.pos,r.pos+1,o),l=!a&&!s&&(!i||!!i.length),d=!a&&s&&(!i||!i.length);if(!n&&d)return t&&t(e.tr.addStoredMark(o.create())),!0;if(n&&l)return t&&t(e.tr.removeStoredMark(o)),!0}return!1},ed=()=>(e,t)=>{let{code:o}=e.schema.marks,{empty:n,$cursor:r}=e.selection;if(!n||!r)return!1;let{storedMarks:a}=e.tr;if(o){let n=o&&D(e,o.create()),s=B(e,r.pos),l=B(e,r.pos-1),d=B(e,r.pos-2),c=s&&!l&&Array.isArray(a),p=l&&!d&&(null===a||Array.isArray(a)&&!!a.length),u=(c&&Array.isArray(a)&&!a.length||!c&&null===a)&&!l&&d,f=!s&&l&&Array.isArray(a)&&!a.length;if(!n&&u){let n=e.tr.setSelection(i("ks2lK").Selection.near(e.doc.resolve(r.pos-1)));return t&&t(n.removeStoredMark(o)),!0}if(!n&&f)return t&&t(e.tr.addStoredMark(o.create())),!0;if(n&&p){let n=e.tr.setSelection(i("ks2lK").Selection.near(e.doc.resolve(r.pos-1)));return t&&t(n.addStoredMark(o.create())),!0}let h=0===r.index(r.depth-1);if(n&&(c||!r.nodeBefore&&h))return t&&t(e.tr.removeStoredMark(o)),!0}return!1},ec=(e,t,o)=>(n,r)=>{if(n.selection.empty){let{nodeBefore:a}=n.doc.resolve(e),{nodeAfter:s}=n.doc.resolve(t),l=a&&a.text&&a.text.endsWith("`"),d=s&&s.text&&s.text.startsWith("`");if(l&&d){let a=n.tr.replaceRangeWith(e-1,t+1,n.schema.text(o));if(r){let o=n.schema.marks.code.create();r(a=(0,i("b167b").applyMarkOnRange)(a.mapping.map(e-1),a.mapping.map(t+1),!1,o,a).setStoredMarks([o]))}return!0}}return!1},ep=e=>(t,o,n)=>(0,i("dAtrv").withAnalytics)(e,{action:i("d925B").ACTION.FORMATTED,actionSubject:i("d925B").ACTION_SUBJECT.TEXT,eventType:i("d925B").EVENT_TYPE.TRACK,actionSubjectId:i("d925B").ACTION_SUBJECT_ID.FORMAT_CODE,attributes:{inputMethod:i("d925B").INPUT_METHOD.FORMATTING}})(ec(t,o,n)),eu=e=>e instanceof i("ks2lK").NodeSelection,ef=(e,t,o)=>!eu(t.selection)&&(0,i("astHL").toggleMark)(e,{type:o})(t),eh=(e,t)=>{let{em:o,code:n,strike:r,strong:a,subsup:s,underline:l}=e.schema.marks,d={isInitialised:!0};if((0,V.expValEquals)("platform_editor_controls","cohort","variant1")){n&&(d.codeInSelection=(0,i("l6xRR").anyMarkActive)(e,n.create()));let t=[[n,"code"],[o,"em"],[r,"strike"],[a,"strong"],[l,"underline"],[s?.create({type:"sub"}),"subscript"],[s?.create({type:"sup"}),"superscript"]].filter(([e])=>e),c=new Map(t),p=(0,i("l6xRR").wholeSelectionHasMarks)(e,Array.from(c.keys()));for(let[o,n]of t){let t=p.get(o);void 0!==t&&(d[`${n}Active`]=t),d[`${n}Disabled`]=!!d.codeInSelection&&"code"!==n||!ef(o instanceof i("5SAOw").MarkType?o:o.type,e)}return d}if(n&&(d.codeActive=(0,i("l6xRR").anyMarkActive)(e,n.create()),d.codeDisabled=!ef(n,e)),o&&(d.emActive=(0,i("l6xRR").anyMarkActive)(e,o),d.emDisabled=!!d.codeActive||!ef(o,e)),r&&(d.strikeActive=(0,i("l6xRR").anyMarkActive)(e,r),d.strikeDisabled=!!d.codeActive||!ef(r,e)),a&&(d.strongActive=(0,i("l6xRR").anyMarkActive)(e,a),d.strongDisabled=!!d.codeActive||!ef(a,e)),s){let t=s.create({type:"sub"}),o=s.create({type:"sup"});d.subscriptActive=(0,i("l6xRR").anyMarkActive)(e,t),d.superscriptActive=(0,i("l6xRR").anyMarkActive)(e,o),d.subscriptDisabled=!!d.codeActive||!ef(s,e,"sub"),d.superscriptDisabled=!!d.codeActive||!ef(s,e,"sup")}return l&&(d.underlineActive=(0,i("l6xRR").anyMarkActive)(e,l),d.underlineDisabled=!!d.codeActive||!ef(l,e)),d},em=(e,t)=>new(0,i("1S4f7").SafePlugin)({state:{init:(e,o)=>eh(o,t),apply(o,n,r,a){let s=eh(a,t);return(0,i("l9G9n").shallowEqual)(n,s)?n:(e(es,s),s)}},key:es,props:{handleKeyDown(e,t){let{state:o,dispatch:n}=e;return t.key!==i("hgeg8").moveRight.common||t.metaKey?t.key!==i("hgeg8").moveLeft.common||t.metaKey?("u"===t.key&&t.metaKey&&es.getState(o)?.underlineDisabled&&(0,p.editorExperiment)("platform_editor_controls","variant1")&&t.preventDefault(),!1):ed()(o,n):el()(o,n)},handleTextInput(e,o,n,r){let{state:i,dispatch:a}=e,{schema:s,selection:{$from:{parent:{type:l}}}}=i;return!!l.allowsMarkType(s.marks.code)&&ep(t)(o,n,r)(i,a)}}});var eg=((r={}).ARROW_RIGHT="rightArrow",r.ARROW_LEFT="leftArrow",r.ARROW_DOUBLE="doubleArrow",r),eT=((a={}).DASH="emDash",a.ELLIPSIS="ellipsis",a.QUOTE_SINGLE="singleQuote",a.QUOTE_DOUBLE="doubleQuote",a);function eE(e,t){return(0,i("l03WE").createRule)(t,(t,o,n,r)=>{let[,a,,s]=o,{tr:l,selection:{$to:d}}=t,c=Math.min(Math.max(n+(a||"").length,0),r);return l.replaceWith(c,r,t.schema.text(e+(s||""),d.marks())),l.setSelection(i("ks2lK").Selection.near(l.doc.resolve(l.selection.to))),l})}function eb(e,t){return Object.keys(e).map(o=>{let n=e[o],r=eE(o,n);return t?t(o)(r):r})}var eS=e=>new(0,i("1S4f7").SafePlugin)((0,i("aIMBk").createPlugin)("text-formatting:smart-input",[...eb({Atlassian:/(\s+|^)(atlassian)(\s)$/,Jira:/(\s+|^)(jira|JIRA)(\s)$/,Bitbucket:/(\s+|^)(bitbucket|BitBucket)(\s)$/,Hipchat:/(\s+|^)(hipchat|HipChat)(\s)$/,Trello:/(\s+|^)(trello)(\s)$/},t=>(0,i("l03WE").inputRuleWithAnalytics)((e,o)=>({action:i("d925B").ACTION.SUBSTITUTED,actionSubject:i("d925B").ACTION_SUBJECT.TEXT,actionSubjectId:i("d925B").ACTION_SUBJECT_ID.PRODUCT_NAME,eventType:i("d925B").EVENT_TYPE.TRACK,attributes:{product:t,originalSpelling:o[2]}}),e)),...function(e){let t={"→":eg.ARROW_RIGHT,"←":eg.ARROW_LEFT,"↔︎":eg.ARROW_DOUBLE};return eb({"→":/(\s+|^)(--?>)(\s)$/,"←":/(\s+|^)(<--?)(\s)$/,"↔︎":/(\s+|^)(<->?)(\s)$/},o=>(0,i("l03WE").inputRuleWithAnalytics)({action:i("d925B").ACTION.SUBSTITUTED,actionSubject:i("d925B").ACTION_SUBJECT.TEXT,actionSubjectId:i("d925B").ACTION_SUBJECT_ID.SYMBOL,eventType:i("d925B").EVENT_TYPE.TRACK,attributes:{symbol:t[o]}},e))}(e),...function(e){let t={"–":eT.DASH,"…":eT.ELLIPSIS,"”":eT.QUOTE_DOUBLE,[eT.QUOTE_SINGLE]:eT.QUOTE_SINGLE},o=o=>(0,i("l03WE").inputRuleWithAnalytics)({action:i("d925B").ACTION.SUBSTITUTED,actionSubject:i("d925B").ACTION_SUBJECT.TEXT,actionSubjectId:i("d925B").ACTION_SUBJECT_ID.PUNC,eventType:i("d925B").EVENT_TYPE.TRACK,attributes:{punctuation:t[o]}},e),n=eb({"–":/(\s+|^)(--)(\s)$/,"…":/()(\.\.\.)$/},o);return[...n,...eb({"“":/((?:^|[\s\{\[\(\<'"\u2018\u201C]))(")$/,"”":/"$/},o),...[(0,i("l03WE").createRule)(/(\s|^)'(\S+.*\S+)'$/,(e,t,o,n)=>{let[,r,i]=t,a=r+"‘",s=o+a.length+i.length;return e.tr.insertText("’",s,n).insertText(a,o,o+a.length)}),eE("’",/(\w+)(')(\w+)$/)].map(e=>o(eT.QUOTE_SINGLE)(e))]}(e)])),ey=i("42omo"),e_=((s={}).strong="strong",s.em="em",s.underline="underline",s.strike="strike",s.code="code",s.subscript="subscript",s.superscript="superscript",s),eC=((l={}).strong="strong",l.em="em",l.underline="underline",l.strike="strike",l.code="code",l.subscript="subscript",l.superscript="superscript",l),eI=((d={}).PRIMARY="primaryToolbar",d.FLOATING="floatingToolbar",d);let eO=[e_.strong,e_.em],ek=[e_.strong];e_.strong,e_.em,e_.underline;let ev=[e_.em,e_.underline,e_.strike,e_.code,e_.subscript,e_.superscript],ex=[e_.underline,e_.strike,e_.code,e_.subscript,e_.superscript],eN=[e_.strike,e_.code,e_.subscript,e_.superscript],eA={[i("zMjD6").ToolbarSize.XXL]:ek,[i("zMjD6").ToolbarSize.XL]:ek,[i("zMjD6").ToolbarSize.L]:ek,[i("zMjD6").ToolbarSize.M]:ek,[i("zMjD6").ToolbarSize.S]:ek,[i("zMjD6").ToolbarSize.XXXS]:[]},eP={[i("zMjD6").ToolbarSize.XXL]:eO,[i("zMjD6").ToolbarSize.XL]:eO,[i("zMjD6").ToolbarSize.L]:eO,[i("zMjD6").ToolbarSize.M]:eO,[i("zMjD6").ToolbarSize.S]:eO,[i("zMjD6").ToolbarSize.XXXS]:[]};i("zMjD6").ToolbarSize.XXL,i("zMjD6").ToolbarSize.XL,i("zMjD6").ToolbarSize.L,i("zMjD6").ToolbarSize.M,i("zMjD6").ToolbarSize.S,i("zMjD6").ToolbarSize.XXXS;let eM={[i("zMjD6").ToolbarSize.XXL]:ev,[i("zMjD6").ToolbarSize.XL]:ev,[i("zMjD6").ToolbarSize.L]:ev,[i("zMjD6").ToolbarSize.M]:ev,[i("zMjD6").ToolbarSize.S]:ev,[i("zMjD6").ToolbarSize.XXXS]:[e_.strong,e_.em,...ev]},eR={[i("zMjD6").ToolbarSize.XXL]:ex,[i("zMjD6").ToolbarSize.XL]:ex,[i("zMjD6").ToolbarSize.L]:ex,[i("zMjD6").ToolbarSize.M]:ex,[i("zMjD6").ToolbarSize.S]:ex,[i("zMjD6").ToolbarSize.XXXS]:[e_.strong,e_.em,...ex]};i("zMjD6").ToolbarSize.XXL,i("zMjD6").ToolbarSize.XL,i("zMjD6").ToolbarSize.L,i("zMjD6").ToolbarSize.M,[e_.underline,...eN],i("zMjD6").ToolbarSize.S,[e_.underline,...eN],i("zMjD6").ToolbarSize.XXXS,[e_.em,e_.underline,...eN];var ew=i("h4TOP");i("42omo");let eL=({label:e,isReducedSpacing:o,isDisabled:n,isSelected:r,"aria-expanded":a,onClick:s,onKeyDown:l,toolbarType:d,iconBefore:c,activeIconName:p})=>{let u=d===eI.FLOATING?"compact":"none";return(0,i("9K4OG").jsx)(i("a4eZN").default,{css:i("cORDs").disableBlueBorderStyles,testId:"ak-editor-selection-toolbar-format-text-button",spacing:o?u:"default",disabled:n,selected:r,"aria-label":e,"aria-expanded":a,"aria-haspopup":!0,title:e,onClick:s,onKeyDown:l,iconBefore:(0,i("9K4OG").jsx)("div",{css:(0,i("dh538").fg)("platform-visual-refresh-icons")?i("cORDs").triggerWrapperStylesWithPadding:i("cORDs").triggerWrapperStyles,"data-testid":p?`editor-toolbar__${p}`:void 0},c||(0,i("9K4OG").jsx)(t(i("2gUVF")),{color:"currentColor",spacing:"spacious",label:""}),(0,i("9K4OG").jsx)("span",{css:i("iMS6j").expandIconContainerStyle},(0,i("9K4OG").jsx)(t(i("7kzZ3")),{label:"",color:"currentColor",LEGACY_margin:"0 0 0 -8px",size:"small"})))})},eB=()=>{let[e,t]=(0,ey.useState)(!1),o=(0,ey.useCallback)(()=>{t(!e)},[e]);return[e,o,(0,ey.useCallback)(()=>{t(!1)},[])]},eD={name:"1m17jn9",styles:"display:flex;align-items:center;height:var(--ds-space-300, 24px)"},eU=t(ey).memo(({label:e,"aria-expanded":o,isReducedSpacing:n,isSelected:r,isDisabled:a,onClick:s,onKeyDown:l})=>(0,i("9K4OG").jsx)(i("a4eZN").default,{disabled:a,selected:r,onClick:s,onKeyDown:l,spacing:n?"none":"default",title:e,iconBefore:(0,i("9K4OG").jsx)("div",{css:(0,i("dh538").fg)("platform-visual-refresh-icons")?eD:i("cORDs").triggerWrapperStyles},(0,i("9K4OG").jsx)(t(i("9VJDA")),{label:"",color:"currentColor",spacing:"spacious",size:"small"})),"aria-expanded":o,"aria-label":e,"aria-haspopup":!0})),eK=t(ey).memo(({editorView:e,moreButtonLabel:t,isReducedSpacing:o,items:n,hasFormattingActive:r,popupsBoundariesElement:a,popupsMountPoint:s,popupsScrollableElement:l,hasMoreButton:d,intl:u,toolbarType:f,isDisabled:h})=>{let[m,g,T]=eB(),[E,b]=(0,ey.useState)(!1),S=(0,ey.useCallback)(({item:t,shouldCloseMenu:o=!0})=>{t&&(t.command(e.state,e.dispatch),o&&T())},[e.state,e.dispatch,T]),y=n[0].items.find(e=>e.isActive),_=(0,p.editorExperiment)("platform_editor_controls","variant1")?n[0].items[0]?.elemBefore:void 0,C=n[0].items[0]?.value.name,I=y?y?.elemBefore:_,O=y?.value.name||C;return(0,c.jsx)(ew.DropdownMenuWithKeyboardNavigation,{mountTo:s,onOpenChange:T,boundariesElement:a,scrollableElement:l,onItemActivated:S,isOpen:m,items:n,zIndex:i("aFUXX").akEditorMenuZIndex,fitHeight:188,fitWidth:(0,p.editorExperiment)("platform_editor_controls","control")?136:230,shouldUseDefaultRole:!0,section:{hasSeparator:!0},shouldFocusFirstItem:()=>(E&&b(!1),E),children:d?(0,c.jsx)(eU,{isSelected:m||r,label:t,isReducedSpacing:o,isDisabled:!1,onClick:()=>{g(),b(!1)},onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),g(),b(!0))},"aria-expanded":m}):(0,c.jsx)(eL,{isReducedSpacing:o,isDisabled:!!h,isSelected:m,label:u.formatMessage(i("2zaaI").toolbarMessages.textFormat),"aria-expanded":m,"aria-haspopup":!0,onClick:()=>{g(),b(!1)},onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),g(),b(!0))},toolbarType:f,iconBefore:I,activeIconName:O})})}),ej={[eI.PRIMARY]:i("d925B").INPUT_METHOD.TOOLBAR,[eI.FLOATING]:i("d925B").INPUT_METHOD.FLOATING_TB},eF=e=>ej[e],eG=({intl:e,formattingPluginInitialised:o,formattingIsPresent:n,editorAnalyticsAPI:r,toolbarType:a})=>{let s=!!o,l=!!n,d=e.formatMessage(i("2zaaI").toolbarMessages.clearFormatting),c=(0,ey.useCallback)((e,t)=>{var o,n;return(o=eF(a),n=r,function(e,t){let{tr:r}=e,a=[];return P.forEach(t=>{let{from:o,to:n}=r.selection,s=e.schema.marks[t];s&&(r.selection instanceof i("7XFGZ").CellSelection?N(r.selection,r.doc,(o,n)=>o.type!==e.schema.nodes.tableCell&&o.type!==e.schema.nodes.tableHeader||(r.doc.rangeHasMark(n,n+o.nodeSize,s)&&(a.push(M[t]),r.removeMark(n,n+o.nodeSize,s)),!1)):r.doc.rangeHasMark(o,n,s)&&(a.push(M[t]),r.removeMark(o,n,s)))}),A.forEach(t=>{let o=e.schema.nodes[t],{$from:n,$to:s}=r.selection;r.selection instanceof i("7XFGZ").CellSelection?N(r.selection,r.doc,w(e,r,o,t,a)):r.doc.nodesBetween(n.pos,s.pos,w(e,r,o,t,a))}),r.setStoredMarks([]),a.length&&o&&n?.attachAnalyticsEvent({action:i("d925B").ACTION.FORMATTED,eventType:i("d925B").EVENT_TYPE.TRACK,actionSubject:i("d925B").ACTION_SUBJECT.TEXT,actionSubjectId:i("d925B").ACTION_SUBJECT_ID.FORMAT_CLEAR,attributes:{inputMethod:o,formattingCleared:a,dropdownMenu:o===i("d925B").INPUT_METHOD.TOOLBAR||o===i("d925B").INPUT_METHOD.FLOATING_TB?"textFormatting":void 0}})(r),t&&t(r),!0})(e,t)},[r,a]);return(0,ey.useMemo)(()=>s?{key:"clearFormatting",command:c,content:d,elemBefore:(0,p.editorExperiment)("platform_editor_controls","variant1")?(0,i("9K4OG").jsx)(t(i("iV7dk")),{label:""}):void 0,elemAfter:(0,i("9K4OG").jsx)("div",{css:i("6f5RK").shortcutStyle},(0,i("hgeg8").tooltip)(i("hgeg8").clearFormatting)),value:{name:"clearFormatting"},isActive:!1,isDisabled:!l,"aria-label":i("hgeg8").clearFormatting?(0,i("hgeg8").tooltip)(i("hgeg8").clearFormatting,String(d)):String(d)}:null,[s,c,d,l])};i("42omo");let eH=({children:e})=>(0,c.jsx)("span",{style:{width:"var(--ds-space-300, 24px)",height:"var(--ds-space-300, 24px)",display:"flex",justifyContent:"center",alignItems:"center"},children:e}),ez=(e,t)=>(0,i("gmyMu").editorCommandToPMCommand)(t(eF(e))),eV=(e,o)=>({strong:{buttonId:i("8TW6I").TOOLBAR_ACTION_SUBJECT_ID.TEXT_FORMATTING_STRONG,command:ez(o,S(e)),message:i("2zaaI").toolbarMessages.bold,tooltipKeymap:i("hgeg8").toggleBold,component:()=>(0,i("9K4OG").jsx)(t(i("7gIXe")),{color:"currentColor",spacing:"spacious",label:""})},em:{buttonId:i("8TW6I").TOOLBAR_ACTION_SUBJECT_ID.TEXT_FORMATTING_ITALIC,command:ez(o,g(e)),message:i("2zaaI").toolbarMessages.italic,tooltipKeymap:i("hgeg8").toggleItalic,component:()=>(0,i("9K4OG").jsx)(t(i("2gUVF")),{color:"currentColor",spacing:"spacious",label:""})},underline:{buttonId:i("8TW6I").TOOLBAR_ACTION_SUBJECT_ID.TEXT_FORMATTING_UNDERLINE,command:ez(o,_(e)),message:i("2zaaI").toolbarMessages.underline,tooltipKeymap:i("hgeg8").toggleUnderline,component:()=>(0,i("9K4OG").jsx)(t(i("4E5My")),{color:"currentColor",spacing:"spacious",label:""})},strike:{command:ez(o,E(e)),message:i("2zaaI").toolbarMessages.strike,tooltipKeymap:i("hgeg8").toggleStrikethrough},code:{command:ez(o,x(e)),message:i("2zaaI").toolbarMessages.code,tooltipKeymap:i("hgeg8").toggleCode},subscript:{command:ez(o,k(e)),message:i("2zaaI").toolbarMessages.subscript,tooltipKeymap:i("hgeg8").toggleSubscript},superscript:{command:ez(o,I(e)),message:i("2zaaI").toolbarMessages.superscript,tooltipKeymap:i("hgeg8").toggleSuperscript}}),eW={strong:{icon:(0,i("9K4OG").jsx)(t(i("7gIXe")),{color:"currentColor",spacing:"spacious",label:""})},em:{icon:(0,i("9K4OG").jsx)(t(i("2gUVF")),{color:"currentColor",spacing:"spacious",label:""})},underline:{icon:(0,i("9K4OG").jsx)(t(i("4E5My")),{color:"currentColor",spacing:"spacious",label:""})},strike:{icon:(0,i("9K4OG").jsx)(t(i("jHpAD")),{label:""})},code:{icon:(0,i("9K4OG").jsx)(t(i("eIlE7")),{color:"currentColor",spacing:"spacious",label:""})},subscript:{icon:(0,i("9K4OG").jsx)(()=>(0,c.jsx)(eH,{children:(0,c.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,c.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.10609 6.54799L7.88895 2.09448L9.16102 2.88936L5.99047 7.9633L9.21219 13.1191L7.94012 13.914L5.10609 9.37861L2.27207 13.914L1 13.1191L4.2217 7.9633L1.05117 2.88939L2.32324 2.09451L5.10609 6.54799ZM10.858 15.0001V13.696H12.3499V10.3153L10.8418 11.4343V9.86413L12.3138 8.83114H13.8161V13.696H14.9999V15.0001H10.858Z",fill:"currentColor"})})}),null)},superscript:{icon:(0,i("9K4OG").jsx)(()=>(0,c.jsx)(eH,{children:(0,c.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,c.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.858 7.16892V5.86487H12.3499V2.4842L10.8418 3.60312V2.03298L12.3138 1H13.8161V5.86487H14.9999V7.16892H10.858ZM5.10609 6.5479L7.88895 2.09439L9.16102 2.88927L5.99047 7.96321L9.21219 13.119L7.94012 13.9139L5.10609 9.37852L2.27207 13.9139L1 13.119L4.2217 7.96321L1.05117 2.8893L2.32324 2.09442L5.10609 6.5479Z",fill:"currentColor"})})}),null)}},eq=({iconType:e,isDisabled:t,isActive:o,intl:n,editorAnalyticsAPI:r,toolbarType:a})=>{let s=eV(r,a)[e],l=eW[e].icon,d=n.formatMessage(s.message),{tooltipKeymap:c}=s;return{content:d,buttonId:s.buttonId,iconMark:e,key:e,command:s.command,iconElement:s.component?s.component():void 0,tooltipElement:c?(0,i("9K4OG").jsx)(i("hgeg8").ToolTipContent,{description:d,keymap:c}):void 0,elemBefore:(0,p.editorExperiment)("platform_editor_controls","variant1")?l:void 0,elemAfter:c?(0,i("9K4OG").jsx)("div",{css:i("6f5RK").shortcutStyle},(0,i("hgeg8").tooltip)(c)):void 0,value:{name:e},isActive:o,isDisabled:t,"aria-label":c?(0,i("hgeg8").tooltip)(c,String(d)):String(d),"aria-keyshortcuts":(0,i("hgeg8").getAriaKeyshortcuts)(c)}},eX={[e_.strong]:"strong",[e_.em]:"em",[e_.strike]:"strike",[e_.code]:"code",[e_.underline]:"underline",[e_.superscript]:"subsup",[e_.subscript]:"subsup"},e$=e=>({schema:t,textFormattingState:o})=>{let n=!!o?.isInitialised,r=eX[e],i=!!t.marks[r];if(!n)return{isActive:!1,isDisabled:!0,isHidden:!1,hasSchemaMark:i};let a=o?.[`${e}Active`];return{isActive:!!a,isDisabled:!!o?.[`${e}Disabled`],isHidden:!!o?.[`${e}Hidden`],hasSchemaMark:i}},eY=(e,t,o)=>{let n=e$(e);return({schema:r,textFormattingState:i,intl:a,isToolbarDisabled:s})=>{let{isActive:l,isDisabled:d,isHidden:c,hasSchemaMark:p}=n({schema:r,textFormattingState:i}),u=(0,ey.useMemo)(()=>eq({iconType:e_[e],isDisabled:s||d,isActive:l,intl:a,editorAnalyticsAPI:t,toolbarType:o}),[s,d,l,a]),f=p&&!c;return(0,ey.useMemo)(()=>f?u:null,[f,u])}},eJ=({isToolbarDisabled:e,textFormattingState:t,schema:o,intl:n,editorAnalyticsAPI:r,toolbarType:i})=>{let a={schema:o,textFormattingState:t,intl:n,isToolbarDisabled:!!e,toolbarType:i},s=eY(e_.strong,r,i),l=eY(e_.em,r,i),d=eY(e_.underline,r,i),c=eY(e_.strike,r,i),p=eY(e_.code,r,i),u=eY(e_.subscript,r,i),f=eY(e_.superscript,r,i),h=s(a),m=l(a),g=d(a),T=c(a),E=p(a),b=u(a),S=f(a);return(0,ey.useMemo)(()=>[h,m,g,T,E,b,S],[h,m,g,T,E,b,S])},eZ=({iconTypeList:e,textFormattingState:t})=>(0,ey.useMemo)(()=>!!t?.isInitialised&&e.some(e=>t[`${e}Active`]),[t,e]),eQ=({icons:e,iconTypeList:t})=>(0,ey.useMemo)(()=>e.reduce((e,o)=>o&&o.iconMark?t.includes(o.iconMark)?{dropdownItems:e.dropdownItems,singleItems:[...e.singleItems,o]}:{dropdownItems:[...e.dropdownItems,o],singleItems:e.singleItems}:e,{dropdownItems:[],singleItems:[]}),[e,t]),e0=t(ey).memo(({items:e,isReducedSpacing:t,editorView:o})=>{let n=(0,ey.useCallback)(e=>()=>(e(o.state,o.dispatch),!1),[o.state,o.dispatch]);return(0,i("9K4OG").jsx)("span",{css:(0,i("dh538").fg)("platform-visual-refresh-icons")?i("cORDs").buttonGroupStyle:i("cORDs").buttonGroupStyleBeforeVisualRefresh},e.map(e=>(0,i("9K4OG").jsx)(i("a4eZN").default,{key:e.key,testId:`editor-toolbar__${String(e.content)}`,buttonId:e.buttonId,spacing:t?"none":"default",onClick:n(e.command),selected:e.isActive,disabled:e.isDisabled,title:e.tooltipElement,iconBefore:e.iconElement,"aria-pressed":e.isActive,"aria-label":e["aria-label"]??String(e.content),"aria-keyshortcuts":e["aria-keyshortcuts"]})))}),e1={disabled:!1,isReducedSpacing:!0,shouldUseResponsiveToolbar:!1,toolbarSize:i("zMjD6").ToolbarSize.S,hasMoreButton:!1,moreButtonLabel:"",toolbarType:eI.FLOATING},e2=e=>({isInitialised:!!e.textFormattingState?.isInitialised,formattingIsPresent:e.textFormattingState?.formattingIsPresent,emActive:e.textFormattingState?.emActive,emDisabled:e.textFormattingState?.emDisabled,emHidden:e.textFormattingState?.emHidden,codeActive:e.textFormattingState?.codeActive,codeDisabled:e.textFormattingState?.codeDisabled,codeHidden:e.textFormattingState?.codeHidden,underlineActive:e.textFormattingState?.underlineActive,underlineDisabled:e.textFormattingState?.underlineDisabled,underlineHidden:e.textFormattingState?.underlineHidden,strikeActive:e.textFormattingState?.strikeActive,strikeDisabled:e.textFormattingState?.strikeDisabled,strikeHidden:e.textFormattingState?.strikeHidden,strongActive:e.textFormattingState?.strongActive,strongDisabled:e.textFormattingState?.strongDisabled,strongHidden:e.textFormattingState?.strongHidden,superscriptActive:e.textFormattingState?.superscriptActive,superscriptDisabled:e.textFormattingState?.superscriptDisabled,superscriptHidden:e.textFormattingState?.superscriptHidden,subscriptActive:e.textFormattingState?.subscriptActive,subscriptDisabled:e.textFormattingState?.subscriptDisabled,subscriptHidden:e.textFormattingState?.subscriptHidden}),e5=(0,i("gmMgo").default)(({api:e,editorAnalyticsAPI:o,editorView:n,intl:r})=>{let a=(0,i("eiA8Z").useSharedPluginStateWithSelector)(e,["textFormatting"],e2),{formattingIsPresent:s,...l}=a,{dropdownItems:d,singleItems:c}=eQ({icons:eJ({schema:n.state.schema,intl:r,isToolbarDisabled:e1.disabled,editorAnalyticsAPI:o,textFormattingState:l,toolbarType:e1.toolbarType}),iconTypeList:ek}),u=eG({formattingPluginInitialised:a.isInitialised,formattingIsPresent:s,intl:r,editorAnalyticsAPI:o,toolbarType:e1.toolbarType}),f=(0,ey.useMemo)(()=>u?[{items:d},{items:[u]}]:[{items:d}],[u,d]);return(0,i("9K4OG").jsx)(t(ey).Fragment,null,(0,i("9K4OG").jsx)(e0,{items:c,editorView:n,isReducedSpacing:!1}),(0,i("9K4OG").jsx)(eK,{editorView:n,items:f,isReducedSpacing:!(0,p.editorExperiment)("platform_editor_controls","variant1")&&e1.isReducedSpacing,moreButtonLabel:e1.moreButtonLabel,hasFormattingActive:e1.hasMoreButton,hasMoreButton:e1.hasMoreButton,intl:r,toolbarType:e1.toolbarType}))});var e9=i("dZ8uq");let e8=({toolbarSize:e,responsivenessEnabled:t})=>{let o=eP;(0,e9.expValEqualsNoExposure)("platform_editor_controls","cohort","variant1")&&(o=eA);let n=(0,ey.useMemo)(()=>o[e],[e,o]);return t?n:(0,e9.expValEqualsNoExposure)("platform_editor_controls","cohort","variant1")?ek:eO},e4=({toolbarSize:e,responsivenessEnabled:t})=>{let o=eR;(0,e9.expValEqualsNoExposure)("platform_editor_controls","cohort","variant1")&&(o=eM);let n=(0,ey.useMemo)(()=>o[e],[e,o]);return t?n:(0,e9.expValEqualsNoExposure)("platform_editor_controls","cohort","variant1")?ev:eO},e3=({icons:e,toolbarSize:t,responsivenessEnabled:o})=>eQ({icons:e,iconTypeList:e8({toolbarSize:t,responsivenessEnabled:o})}),e6=({shouldUseResponsiveToolbar:e,popupsMountPoint:t,popupsBoundariesElement:o,popupsScrollableElement:n,editorView:r,toolbarSize:a,isReducedSpacing:s,isToolbarDisabled:l,intl:d,editorAnalyticsAPI:c,textFormattingState:u,api:f,toolbarType:h})=>{let m,[g,T]=(0,ey.useState)(""),{formattingIsPresent:E,...b}=u,S=eJ({schema:r.state.schema,intl:d,isToolbarDisabled:l,editorAnalyticsAPI:c,textFormattingState:b,toolbarType:h}),y=eG({formattingPluginInitialised:u.isInitialised,formattingIsPresent:E,intl:d,editorAnalyticsAPI:c,toolbarType:h}),_=eZ({iconTypeList:e4({toolbarSize:a,responsivenessEnabled:e}),textFormattingState:u}),{dropdownItems:C,singleItems:I}=e3({icons:S,toolbarSize:a,responsivenessEnabled:e}),O=d.formatMessage(i("2zaaI").toolbarMessages.textFormattingOff),k=d.formatMessage(i("2zaaI").toolbarMessages.superscriptOffSubscriptOn),v=d.formatMessage(i("2zaaI").toolbarMessages.subscriptOffSuperscriptOn),x=[...C,...I].filter(e=>e.isActive),N=(0,i("7541v").default)(x)??[],A=G(x,"Subscript")&&G(N,"Superscript"),P=G(x,"Superscript")&&G(N,"Subscript"),M="";N&&x.length>N.length?(m=F(x,N),M=d.formatMessage(i("2zaaI").toolbarMessages.on,{formattingType:m[0].content})):(m=F(N,x))&&m.length&&(M=d.formatMessage(i("2zaaI").toolbarMessages.off,{formattingType:m[0].content}),x[0]?.content==="Code"&&(M=d.formatMessage(i("2zaaI").toolbarMessages.codeOn,{textFormattingOff:N?.length>1?O:M})),A&&(M=k),P&&(M=v)),!x?.length&&N?.length>1&&(M=O);let R=(0,ey.useMemo)(()=>y?[{items:C},{items:[y]}]:[{items:C}],[y,C]),w=d.formatMessage(i("2zaaI").toolbarMessages.moreFormatting),L=d.formatMessage(i("2zaaI").toolbarMessages.textFormatting);return(0,ey.useEffect)(()=>{M&&T(M)},[M]),(0,i("9K4OG").jsx)("span",{css:(0,i("dh538").fg)("platform-visual-refresh-icons")?i("cORDs").buttonGroupStyle:i("cORDs").buttonGroupStyleBeforeVisualRefresh},(0,i("9K4OG").jsx)("div",{role:"group",className:"js-text-format-wrap","aria-label":L},g&&(0,i("9K4OG").jsx)(i("cftLn").default,{ariaLive:"assertive",text:g,ariaRelevant:"additions",delay:250}),(0,i("9K4OG").jsx)(e0,{items:I,editorView:r,isReducedSpacing:s}),(0,i("9K4OG").jsx)("span",{css:i("cORDs").wrapperStyle},l&&!(0,p.editorExperiment)("platform_editor_controls","variant1")?(0,i("9K4OG").jsx)("div",null,(0,i("9K4OG").jsx)(eU,{label:w,isReducedSpacing:s,isDisabled:!0,isSelected:!1,"aria-expanded":void 0,"aria-pressed":void 0})):(0,i("9K4OG").jsx)(eK,{popupsMountPoint:t,popupsBoundariesElement:o,popupsScrollableElement:n,editorView:r,isReducedSpacing:s,moreButtonLabel:w,hasFormattingActive:_,hasMoreButton:!(0,p.editorExperiment)("platform_editor_controls","variant1"),items:R,intl:d,toolbarType:h,isDisabled:!!(0,p.editorExperiment)("platform_editor_controls","variant1")&&l}))),!f?.primaryToolbar&&(0,i("9K4OG").jsx)("span",{css:i("cORDs").separatorStyles}))};var e7=(0,i("gmMgo").default)(({popupsMountPoint:e,popupsScrollableElement:t,toolbarSize:o,isReducedSpacing:n,editorView:r,isToolbarDisabled:a,shouldUseResponsiveToolbar:s,intl:l,editorAnalyticsAPI:d,textFormattingState:c,api:p,toolbarType:u})=>(0,i("9K4OG").jsx)(e6,{textFormattingState:c,popupsMountPoint:e,popupsScrollableElement:t,toolbarSize:o,isReducedSpacing:n,editorView:r,isToolbarDisabled:a,shouldUseResponsiveToolbar:s,intl:l,editorAnalyticsAPI:d,api:p,toolbarType:u}));let te=e=>({isInitialised:!!e.textFormattingState?.isInitialised,formattingIsPresent:e.textFormattingState?.formattingIsPresent,emActive:e.textFormattingState?.emActive,emDisabled:e.textFormattingState?.emDisabled,emHidden:e.textFormattingState?.emHidden,codeActive:e.textFormattingState?.codeActive,codeDisabled:e.textFormattingState?.codeDisabled,codeHidden:e.textFormattingState?.codeHidden,underlineActive:e.textFormattingState?.underlineActive,underlineDisabled:e.textFormattingState?.underlineDisabled,underlineHidden:e.textFormattingState?.underlineHidden,strikeActive:e.textFormattingState?.strikeActive,strikeDisabled:e.textFormattingState?.strikeDisabled,strikeHidden:e.textFormattingState?.strikeHidden,strongActive:e.textFormattingState?.strongActive,strongDisabled:e.textFormattingState?.strongDisabled,strongHidden:e.textFormattingState?.strongHidden,superscriptActive:e.textFormattingState?.superscriptActive,superscriptDisabled:e.textFormattingState?.superscriptDisabled,superscriptHidden:e.textFormattingState?.superscriptHidden,subscriptActive:e.textFormattingState?.subscriptActive,subscriptDisabled:e.textFormattingState?.subscriptDisabled,subscriptHidden:e.textFormattingState?.subscriptHidden}),tt=t(ey).memo(({api:e,popupsMountPoint:t,popupsScrollableElement:o,toolbarSize:n,editorView:r,disabled:a,isReducedSpacing:s,shouldUseResponsiveToolbar:l})=>{let d=(0,i("eiA8Z").useSharedPluginStateWithSelector)(e,["textFormatting"],te);return(0,c.jsx)(e7,{textFormattingState:d,popupsMountPoint:t,popupsScrollableElement:o,toolbarSize:n,isReducedSpacing:s,editorView:r,isToolbarDisabled:a,shouldUseResponsiveToolbar:l,editorAnalyticsAPI:e?.analytics?.actions,api:e,toolbarType:eI.PRIMARY})});i("42omo"),i("42omo");let to={strong:"strong",em:"em",underline:"underline",strike:"strike",code:"code",subscript:"subsup",superscript:"subsup"},tn=({api:e,optionType:t,title:o,shortcut:n,toggleMarkWithAnalyticsCallback:r,parents:a})=>{let s,{isActive:l,isDisabled:d,isHidden:c,isPluginInitialised:p}=(0,i("eiA8Z").useSharedPluginStateWithSelector)(e,["textFormatting"],e=>({isActive:e.textFormattingState?.[`${t}Active`],isDisabled:e.textFormattingState?.[`${t}Disabled`],isHidden:e.textFormattingState?.[`${t}Hidden`],isPluginInitialised:e.textFormattingState?.isInitialised})),u=e?.core?.sharedState.currentState()?.schema?.marks[to[t]];s=p?{isActive:!!l,isDisabled:!!d,isHidden:!!(!u||c)}:{isActive:!1,isDisabled:!0,isHidden:!1};let{formatMessage:f}=(0,i("8C5kA").default)(),h=f(o),m=(0,i("hgeg8").tooltip)(n),g=(0,i("hgeg8").tooltip)(n,h);return{...s,formatTitle:h,shortcutContent:m,ariaLabel:g||h,onClick:()=>{e?.core.actions.execute(r(e?.analytics?.actions)((0,i("4Dsx2").getInputMethodFromParentKeys)(a)))}}},tr=()=>({strong:{rank:i("4Chin").TEXT_FORMATTING_MENU_SECTION_RANK[i("cPCP8").BOLD_MENU_ITEM.key],key:i("cPCP8").BOLD_MENU_ITEM.key,icon:t(i("7gIXe")),title:i("2zaaI").toolbarMessages.bold,command:S,shortcut:i("hgeg8").toggleBold},em:{rank:i("4Chin").TEXT_FORMATTING_MENU_SECTION_RANK[i("cPCP8").ITALIC_MENU_ITEM.key],key:i("cPCP8").ITALIC_MENU_ITEM.key,icon:t(i("2gUVF")),title:i("2zaaI").toolbarMessages.italic,command:g,shortcut:i("hgeg8").toggleItalic},underline:{rank:i("4Chin").TEXT_FORMATTING_MENU_SECTION_RANK[i("cPCP8").UNDERLINE_MENU_ITEM.key],key:i("cPCP8").UNDERLINE_MENU_ITEM.key,icon:t(i("4E5My")),title:i("2zaaI").toolbarMessages.underline,command:_,shortcut:i("hgeg8").toggleUnderline},strike:{rank:i("4Chin").TEXT_FORMATTING_MENU_SECTION_RANK[i("cPCP8").STRIKE_MENU_ITEM.key],key:i("cPCP8").STRIKE_MENU_ITEM.key,icon:t(i("jHpAD")),title:i("2zaaI").toolbarMessages.strike,command:E,shortcut:i("hgeg8").toggleStrikethrough},code:{rank:i("4Chin").TEXT_FORMATTING_MENU_SECTION_RANK[i("cPCP8").CODE_MENU_ITEM.key],key:i("cPCP8").CODE_MENU_ITEM.key,icon:t(i("eIlE7")),title:i("2zaaI").toolbarMessages.code,command:x,shortcut:i("hgeg8").toggleCode},subscript:{rank:i("4Chin").TEXT_FORMATTING_MENU_SECTION_RANK[i("cPCP8").SUBSCRIPT_MENU_ITEM.key],key:i("cPCP8").SUBSCRIPT_MENU_ITEM.key,icon:t(i("33Muq")),title:i("2zaaI").toolbarMessages.subscript,command:k,shortcut:i("hgeg8").toggleSubscript},superscript:{rank:i("4Chin").TEXT_FORMATTING_MENU_SECTION_RANK[i("cPCP8").SUPERSCRIPT_MENU_ITEM.key],key:i("cPCP8").SUPERSCRIPT_MENU_ITEM.key,icon:t(i("6MAS3")),title:i("2zaaI").toolbarMessages.superscript,command:I,shortcut:i("hgeg8").toggleSuperscript}}),ti=({parents:e,api:t,optionType:o,toggleMarkWithAnalyticsCallback:n,icon:r,shortcut:a,title:s})=>{let{isActive:l,isDisabled:d,isHidden:p,shortcutContent:u,onClick:f,ariaLabel:h,formatTitle:m}=tn({api:t,optionType:o,title:s,shortcut:a,toggleMarkWithAnalyticsCallback:n,parents:e});return p?null:(0,c.jsx)(i("2GVu1").ToolbarDropdownItem,{elemBefore:(0,c.jsx)(r,{size:"small",label:""}),elemAfter:u&&(0,c.jsx)(i("jbmmV").ToolbarKeyboardShortcutHint,{shortcut:u}),isDisabled:d,isSelected:l,onClick:f,"aria-keyshortcuts":(0,i("hgeg8").getAriaKeyshortcuts)(a),"aria-label":h,children:m})},ta=({parents:e,api:t,optionType:o,toggleMarkWithAnalyticsCallback:n,icon:r,shortcut:a,title:s})=>{let{isActive:l,isDisabled:d,onClick:p,ariaLabel:u,formatTitle:f}=tn({api:t,optionType:o,title:s,shortcut:a,toggleMarkWithAnalyticsCallback:n,parents:e});return(0,c.jsx)(i("iIVVb").ToolbarTooltip,{content:(0,c.jsx)(i("hgeg8").ToolTipContent,{description:f,keymap:a}),children:(0,c.jsx)(i("7ERUE").ToolbarButton,{iconBefore:(0,c.jsx)(r,{label:u,size:"small"}),onClick:p,isSelected:l,isDisabled:d,ariaKeyshortcuts:(0,i("hgeg8").getAriaKeyshortcuts)(a),testId:`editor-toolbar__${f}`})})},ts=({api:e,parents:o})=>{let{isInitialised:n,isFormattingPresent:r}=(0,i("eiA8Z").useSharedPluginStateWithSelector)(e,["textFormatting"],e=>({isInitialised:e.textFormattingState?.isInitialised,isFormattingPresent:e.textFormattingState?.formattingIsPresent})),{formatMessage:a}=(0,i("8C5kA").default)();if(!n)return null;let s=a(i("2zaaI").toolbarMessages.clearFormatting),l=(0,i("hgeg8").tooltip)(i("hgeg8").clearFormatting);return(0,c.jsx)(i("2GVu1").ToolbarDropdownItem,{elemBefore:(0,c.jsx)(t(i("iV7dk")),{label:"",size:"small"}),elemAfter:l&&(0,c.jsx)(i("jbmmV").ToolbarKeyboardShortcutHint,{shortcut:l}),isDisabled:!r,onClick:()=>{e?.core.actions.execute(L(e?.analytics?.actions)((0,i("4Dsx2").getInputMethodFromParentKeys)(o)))},ariaKeyshortcuts:(0,i("hgeg8").getAriaKeyshortcuts)(i("hgeg8").clearFormatting),children:s})},tl=({children:e})=>{let{formatMessage:t}=(0,i("8C5kA").default)(),o=t(i("2zaaI").toolbarMessages.moreFormatting);return(0,V.expValEquals)("platform_editor_toolbar_aifc_patch_6","isEnabled",!0)?(0,c.jsx)(i("iIVVb").ToolbarTooltip,{content:t(i("2zaaI").toolbarMessages.textFormat),children:(0,c.jsx)(i("bTiiT").ToolbarDropdownMenu,{iconBefore:(0,c.jsx)(i("EJKmu").MoreItemsIcon,{label:"",testId:"more-formatting"}),label:o,children:e})}):(0,c.jsx)(i("bTiiT").ToolbarDropdownMenu,{iconBefore:(0,c.jsx)(i("EJKmu").MoreItemsIcon,{label:"",testId:"more-formatting"}),label:o,children:e})},td=({children:e,title:t,parents:o})=>{let n=o.some(e=>e.key===i("cPCP8").TEXT_COLLAPSED_MENU.key);return(0,c.jsx)(i("6UWPx").ToolbarDropdownItemSection,{hasSeparator:n,title:t,children:e})},tc=({children:e})=>{let{editorAppearance:t}=(0,i("gzUv9").useEditorToolbar)();if("full-page"===t)return(0,c.jsx)(i("aro2m").Show,{above:"xl",children:(0,c.jsx)(i("kDB94").ToolbarButtonGroup,{children:e})})},tp=e=>[{type:i("cPCP8").BOLD_BUTTON_GROUP.type,key:i("cPCP8").BOLD_BUTTON_GROUP.key,parents:[{type:i("cPCP8").TEXT_SECTION_PRIMARY_TOOLBAR.type,key:i("cPCP8").TEXT_SECTION_PRIMARY_TOOLBAR.key,rank:i("4Chin").TEXT_SECTION_PRIMARY_TOOLBAR_RANK[i("cPCP8").BOLD_BUTTON_GROUP.key]}],component:({children:e})=>(0,c.jsx)(tc,{children:e})},{type:i("cPCP8").BOLD_BUTTON.type,key:i("cPCP8").BOLD_BUTTON.key,parents:[{type:i("cPCP8").BOLD_BUTTON_GROUP.type,key:i("cPCP8").BOLD_BUTTON_GROUP.key,rank:100}],component:({parents:t})=>{let{icon:o,command:n,shortcut:r,title:i}=tr().strong;return(0,c.jsx)(ta,{api:e,parents:t,icon:o,title:i,shortcut:r,optionType:eC.strong,toggleMarkWithAnalyticsCallback:n})}}];i("42omo");let tu=e=>[{type:i("cPCP8").TEXT_FORMATTING_GROUP_INLINE.type,key:i("cPCP8").TEXT_FORMATTING_GROUP_INLINE.key,parents:[{type:i("cPCP8").TEXT_SECTION.type,key:i("cPCP8").TEXT_SECTION.key,rank:i("4Chin").TEXT_SECTION_RANK[i("cPCP8").TEXT_FORMATTING_GROUP.key]}],component:({children:e})=>(0,c.jsx)(i("kDB94").ToolbarButtonGroup,{children:e})},{type:i("cPCP8").TEXT_FORMATTING_HERO_BUTTON.type,key:i("cPCP8").TEXT_FORMATTING_HERO_BUTTON.key,parents:[{type:i("cPCP8").TEXT_FORMATTING_GROUP_INLINE.type,key:i("cPCP8").TEXT_FORMATTING_GROUP_INLINE.key,rank:i("4Chin").TEXT_FORMAT_GROUP_RANK[i("cPCP8").TEXT_FORMATTING_HERO_BUTTON.key]}],component:({parents:t})=>{let{icon:o,command:n,shortcut:r,title:i}=tr().strong;return(0,c.jsx)(ta,{api:e,parents:t,icon:o,title:i,shortcut:r,optionType:eC.strong,toggleMarkWithAnalyticsCallback:n})}}];i("42omo");let tf=({children:e})=>{let{editorAppearance:t}=(0,i("gzUv9").useEditorToolbar)();if("full-page"===t)return(0,c.jsx)(i("aro2m").Show,{above:"xl",children:(0,c.jsx)(i("kDB94").ToolbarButtonGroup,{children:e})})},th=({children:e})=>{let{editorAppearance:t}=(0,i("gzUv9").useEditorToolbar)();return"full-page"===t?(0,c.jsx)(i("aro2m").Show,{below:"xl",children:(0,c.jsx)(i("kDB94").ToolbarButtonGroup,{children:e})}):(0,c.jsx)(i("kDB94").ToolbarButtonGroup,{children:e})},tm=e=>[{type:i("cPCP8").TEXT_FORMATTING_GROUP.type,key:i("cPCP8").TEXT_FORMATTING_GROUP.key,parents:[{type:i("cPCP8").TEXT_SECTION_PRIMARY_TOOLBAR.type,key:i("cPCP8").TEXT_SECTION_PRIMARY_TOOLBAR.key,rank:i("4Chin").TEXT_SECTION_PRIMARY_TOOLBAR_RANK[i("cPCP8").TEXT_FORMATTING_GROUP.key]}],component:({children:e})=>(0,c.jsx)(tf,{children:e})},{type:i("cPCP8").TEXT_FORMATTING_GROUP_COLLAPSED.type,key:i("cPCP8").TEXT_FORMATTING_GROUP_COLLAPSED.key,parents:[{type:i("cPCP8").TEXT_SECTION_PRIMARY_TOOLBAR.type,key:i("cPCP8").TEXT_SECTION_PRIMARY_TOOLBAR.key,rank:i("4Chin").TEXT_SECTION_PRIMARY_TOOLBAR_RANK[i("cPCP8").TEXT_FORMATTING_GROUP.key]}],component:({children:e})=>(0,c.jsx)(th,{children:e})},{type:i("cPCP8").TEXT_FORMATTING_HERO_BUTTON.type,key:i("cPCP8").TEXT_FORMATTING_HERO_BUTTON.key,parents:[{type:i("cPCP8").TEXT_FORMATTING_GROUP.type,key:i("cPCP8").TEXT_FORMATTING_GROUP.key,rank:i("4Chin").TEXT_FORMAT_GROUP_RANK[i("cPCP8").TEXT_FORMATTING_HERO_BUTTON.key]}],component:({parents:t})=>{let{icon:o,command:n,shortcut:r,title:i}=tr().em;return(0,c.jsx)(ta,{api:e,parents:t,icon:o,title:i,shortcut:r,optionType:eC.em,toggleMarkWithAnalyticsCallback:n})}},{type:i("cPCP8").TEXT_FORMATTING_HERO_BUTTON_COLLAPSED.type,key:i("cPCP8").TEXT_FORMATTING_HERO_BUTTON_COLLAPSED.key,parents:[{type:i("cPCP8").TEXT_FORMATTING_GROUP_COLLAPSED.type,key:i("cPCP8").TEXT_FORMATTING_GROUP_COLLAPSED.key,rank:i("4Chin").TEXT_FORMAT_GROUP_COLLAPSED_RANK[i("cPCP8").TEXT_FORMATTING_HERO_BUTTON_COLLAPSED.key]}],component:({parents:t})=>{let{icon:o,command:n,shortcut:r,title:i}=tr().strong;return(0,c.jsx)(ta,{api:e,parents:t,icon:o,title:i,shortcut:r,optionType:eC.strong,toggleMarkWithAnalyticsCallback:n})}}];i("42omo");let tg=e=>Object.entries(tr()).map(([t,{icon:o,shortcut:n,title:r,command:a,rank:s,key:l}])=>({type:"menu-item",key:l,parents:[{type:i("cPCP8").TEXT_FORMATTING_MENU_SECTION.type,key:i("cPCP8").TEXT_FORMATTING_MENU_SECTION.key,rank:s}],component:({parents:i})=>(0,c.jsx)(ti,{api:e,parents:i,icon:o,shortcut:n,title:r,optionType:t,toggleMarkWithAnalyticsCallback:a})})),tT=e=>[{type:i("cPCP8").TEXT_FORMATTING_MENU.type,key:i("cPCP8").TEXT_FORMATTING_MENU.key,parents:[{type:i("cPCP8").TEXT_FORMATTING_GROUP.type,key:i("cPCP8").TEXT_FORMATTING_GROUP.key,rank:i("4Chin").TEXT_FORMAT_GROUP_RANK[i("cPCP8").TEXT_FORMATTING_MENU.key]},{type:i("cPCP8").TEXT_FORMATTING_GROUP_COLLAPSED.type,key:i("cPCP8").TEXT_FORMATTING_GROUP_COLLAPSED.key,rank:i("4Chin").TEXT_FORMAT_GROUP_RANK[i("cPCP8").TEXT_FORMATTING_MENU.key]},{type:i("cPCP8").TEXT_FORMATTING_GROUP_INLINE.type,key:i("cPCP8").TEXT_FORMATTING_GROUP_INLINE.key,rank:i("4Chin").TEXT_FORMAT_GROUP_RANK[i("cPCP8").TEXT_FORMATTING_HERO_BUTTON.key]}],component:({children:e})=>(0,c.jsx)(tl,{children:e})},{type:i("cPCP8").TEXT_FORMATTING_MENU_SECTION.type,key:i("cPCP8").TEXT_FORMATTING_MENU_SECTION.key,parents:[{type:i("cPCP8").TEXT_FORMATTING_MENU.type,key:i("cPCP8").TEXT_FORMATTING_MENU.key,rank:i("4Chin").TEXT_FORMAT_MENU_RANK[i("cPCP8").TEXT_FORMATTING_MENU_SECTION.key]},...(0,V.expValEquals)("platform_editor_toolbar_aifc_responsive","isEnabled",!0)?[{type:i("cPCP8").TEXT_COLLAPSED_MENU.type,key:i("cPCP8").TEXT_COLLAPSED_MENU.key,rank:i("4Chin").TEXT_COLLAPSED_MENU_RANK[i("cPCP8").TEXT_FORMATTING_MENU_SECTION.key]}]:[]],component:(0,V.expValEquals)("platform_editor_toolbar_aifc_responsive","isEnabled",!0)?td:void 0},...tg(e),{type:i("cPCP8").CLEAR_FORMARTTING_MENU_SECTION.type,key:i("cPCP8").CLEAR_FORMARTTING_MENU_SECTION.key,parents:[{type:i("cPCP8").TEXT_FORMATTING_MENU.type,key:i("cPCP8").TEXT_FORMATTING_MENU.key,rank:i("4Chin").TEXT_FORMAT_MENU_RANK[i("cPCP8").CLEAR_FORMARTTING_MENU_SECTION.key]},...(0,V.expValEquals)("platform_editor_toolbar_aifc_responsive","isEnabled",!0)?[{type:i("cPCP8").TEXT_COLLAPSED_MENU.type,key:i("cPCP8").TEXT_COLLAPSED_MENU.key,rank:i("4Chin").TEXT_COLLAPSED_MENU_RANK[i("cPCP8").CLEAR_FORMARTTING_MENU_SECTION.key]}]:[]],component:({children:e})=>(0,c.jsx)(i("6UWPx").ToolbarDropdownItemSection,{hasSeparator:!0,children:e})},{type:i("cPCP8").CLEAR_FORMATTING_MENU_ITEM.type,key:i("cPCP8").CLEAR_FORMATTING_MENU_ITEM.key,parents:[{type:i("cPCP8").CLEAR_FORMARTTING_MENU_SECTION.type,key:i("cPCP8").CLEAR_FORMARTTING_MENU_SECTION.key,rank:i("4Chin").CLEAR_FORMARTTING_MENU_SECTION_RANK[i("cPCP8").CLEAR_FORMATTING_MENU_ITEM.key]}],component:({parents:t})=>(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(ts,{parents:t,api:e})})}];i("42omo");let tE=({children:e})=>{let{editorAppearance:t}=(0,i("gzUv9").useEditorToolbar)();if("full-page"===t)return(0,c.jsx)(i("aro2m").Show,{above:"xl",children:(0,c.jsx)(i("kDB94").ToolbarButtonGroup,{children:e})})},tb=e=>[{type:i("cPCP8").UNDERLINE_BUTTON_GROUP.type,key:i("cPCP8").UNDERLINE_BUTTON_GROUP.key,parents:[{type:i("cPCP8").TEXT_SECTION_PRIMARY_TOOLBAR.type,key:i("cPCP8").TEXT_SECTION_PRIMARY_TOOLBAR.key,rank:i("4Chin").TEXT_SECTION_PRIMARY_TOOLBAR_RANK[i("cPCP8").UNDERLINE_BUTTON_GROUP.key]}],component:({children:e})=>(0,c.jsx)(tE,{children:e})},{type:i("cPCP8").UNDERLINE_BUTTON.type,key:i("cPCP8").UNDERLINE_BUTTON.key,parents:[{type:i("cPCP8").UNDERLINE_BUTTON_GROUP.type,key:i("cPCP8").UNDERLINE_BUTTON_GROUP.key,rank:100}],component:({parents:t})=>{let{icon:o,command:n,shortcut:r,title:i}=tr().underline;return(0,c.jsx)(ta,{api:e,parents:t,icon:o,title:i,shortcut:r,optionType:eC.underline,toggleMarkWithAnalyticsCallback:n})}}],tS=e=>[...tm(e),...tu(e),...tp(e),...tb(e),...tT(e)];e.exports.textFormattingPlugin=({config:e,api:t})=>{let o=!!t?.toolbar,n=({editorView:o,popupsMountPoint:n,popupsScrollableElement:r,isToolbarReducedSpacing:i,toolbarSize:a,disabled:s})=>o?(0,c.jsx)(tt,{api:t,popupsMountPoint:n,popupsScrollableElement:r,toolbarSize:a,isReducedSpacing:i,editorView:o,disabled:s,shouldUseResponsiveToolbar:!!e?.responsiveToolbarMenu}):null;return o?t?.toolbar?.actions.registerComponents(tS(t)):t?.primaryToolbar?.actions.registerComponent({name:"textFormatting",component:n}),{name:"textFormatting",marks:()=>[{name:"em",mark:i("a2CNw").em},{name:"strong",mark:i("bJD2s").strong}].concat(e?.disableStrikethrough?[]:{name:"strike",mark:i("dd67x").strike}).concat(e?.disableCode?[]:{name:"code",mark:i("lu7Ub").code}).concat(e?.disableSuperscriptAndSubscript?[]:{name:"subsup",mark:i("ip8b2").subsup}).concat(e?.disableUnderline?[]:{name:"underline",mark:i("gKyPs").underline}),pmPlugins:()=>[{name:"textFormatting",plugin:({dispatch:e})=>em(e,t?.analytics?.actions)},{name:"textFormattingCursor",plugin:()=>q},{name:"textFormattingInputRule",plugin:({schema:e})=>ea(e,t?.analytics?.actions,t)},{name:"textFormattingSmartRule",plugin:()=>e?.disableSmartTextCompletion?void 0:eS(t?.analytics?.actions)},{name:"textFormattingClear",plugin:({dispatch:e})=>z(e)},{name:"textFormattingClearKeymap",plugin:()=>W(t?.analytics?.actions)},{name:"textFormattingKeymap",plugin:({schema:e})=>(function(e,t){let o={};e.marks.strong&&(0,i("hgeg8").bindKeymapWithEditorCommand)((0,V.expValEquals)("platform_editor_hydratable_ui","isEnabled",!0)?(0,i("hgeg8").findShortcutByKeymap)(i("hgeg8").toggleBold):i("hgeg8").toggleBold.common,S(t)(i("d925B").INPUT_METHOD.SHORTCUT),o),e.marks.em&&(0,i("hgeg8").bindKeymapWithEditorCommand)((0,V.expValEquals)("platform_editor_hydratable_ui","isEnabled",!0)?(0,i("hgeg8").findShortcutByKeymap)(i("hgeg8").toggleItalic):i("hgeg8").toggleItalic.common,g(t)(i("d925B").INPUT_METHOD.SHORTCUT),o),e.marks.code&&(0,i("hgeg8").bindKeymapWithEditorCommand)((0,V.expValEquals)("platform_editor_hydratable_ui","isEnabled",!0)?(0,i("hgeg8").findShortcutByKeymap)(i("hgeg8").toggleCode):i("hgeg8").toggleCode.common,x(t)(i("d925B").INPUT_METHOD.SHORTCUT),o),e.marks.strike&&(0,i("hgeg8").bindKeymapWithEditorCommand)((0,V.expValEquals)("platform_editor_hydratable_ui","isEnabled",!0)?(0,i("hgeg8").findShortcutByKeymap)(i("hgeg8").toggleStrikethrough):i("hgeg8").toggleStrikethrough.common,E(t)(i("d925B").INPUT_METHOD.SHORTCUT),o),e.marks.subsup&&(0,i("hgeg8").bindKeymapWithEditorCommand)((0,V.expValEquals)("platform_editor_hydratable_ui","isEnabled",!0)?(0,i("hgeg8").findShortcutByKeymap)(i("hgeg8").toggleSubscript):i("hgeg8").toggleSubscript.common,k(t)(i("d925B").INPUT_METHOD.SHORTCUT),o),e.marks.subsup&&(0,i("hgeg8").bindKeymapWithEditorCommand)((0,V.expValEquals)("platform_editor_hydratable_ui","isEnabled",!0)?(0,i("hgeg8").findShortcutByKeymap)(i("hgeg8").toggleSuperscript):i("hgeg8").toggleSuperscript.common,I(t)(i("d925B").INPUT_METHOD.SHORTCUT),o),e.marks.underline&&(0,i("hgeg8").bindKeymapWithEditorCommand)((0,V.expValEquals)("platform_editor_hydratable_ui","isEnabled",!0)?(0,i("hgeg8").findShortcutByKeymap)(i("hgeg8").toggleUnderline):i("hgeg8").toggleUnderline.common,_(t)(i("d925B").INPUT_METHOD.SHORTCUT),o);let n=o=>{let n=es.getState(o.state),r={};return e.marks.strong&&!n?.strongDisabled&&(0,i("hgeg8").bindKeymapWithEditorCommand)((0,V.expValEquals)("platform_editor_hydratable_ui","isEnabled",!0)?(0,i("hgeg8").findShortcutByKeymap)(i("hgeg8").toggleBold):i("hgeg8").toggleBold.common,S(t)(i("d925B").INPUT_METHOD.SHORTCUT),r),e.marks.em&&!n?.emDisabled&&(0,i("hgeg8").bindKeymapWithEditorCommand)((0,V.expValEquals)("platform_editor_hydratable_ui","isEnabled",!0)?(0,i("hgeg8").findShortcutByKeymap)(i("hgeg8").toggleItalic):i("hgeg8").toggleItalic.common,g(t)(i("d925B").INPUT_METHOD.SHORTCUT),r),e.marks.code&&!n?.codeDisabled&&(0,i("hgeg8").bindKeymapWithEditorCommand)((0,V.expValEquals)("platform_editor_hydratable_ui","isEnabled",!0)?(0,i("hgeg8").findShortcutByKeymap)(i("hgeg8").toggleCode):i("hgeg8").toggleCode.common,x(t)(i("d925B").INPUT_METHOD.SHORTCUT),r),e.marks.strike&&!n?.strikeDisabled&&(0,i("hgeg8").bindKeymapWithEditorCommand)((0,V.expValEquals)("platform_editor_hydratable_ui","isEnabled",!0)?(0,i("hgeg8").findShortcutByKeymap)(i("hgeg8").toggleStrikethrough):i("hgeg8").toggleStrikethrough.common,E(t)(i("d925B").INPUT_METHOD.SHORTCUT),r),e.marks.subsup&&!n?.subscriptDisabled&&(0,i("hgeg8").bindKeymapWithEditorCommand)((0,V.expValEquals)("platform_editor_hydratable_ui","isEnabled",!0)?(0,i("hgeg8").findShortcutByKeymap)(i("hgeg8").toggleSubscript):i("hgeg8").toggleSubscript.common,k(t)(i("d925B").INPUT_METHOD.SHORTCUT),r),e.marks.subsup&&!n?.superscriptDisabled&&(0,i("hgeg8").bindKeymapWithEditorCommand)((0,V.expValEquals)("platform_editor_hydratable_ui","isEnabled",!0)?(0,i("hgeg8").findShortcutByKeymap)(i("hgeg8").toggleSuperscript):i("hgeg8").toggleSuperscript.common,I(t)(i("d925B").INPUT_METHOD.SHORTCUT),r),e.marks.underline&&!n?.underlineDisabled&&(0,i("hgeg8").bindKeymapWithEditorCommand)((0,V.expValEquals)("platform_editor_hydratable_ui","isEnabled",!0)?(0,i("hgeg8").findShortcutByKeymap)(i("hgeg8").toggleUnderline):i("hgeg8").toggleUnderline.common,_(t)(i("d925B").INPUT_METHOD.SHORTCUT),r),r};return new(0,i("1S4f7").SafePlugin)({props:{handleKeyDown(e,t){let r=(0,i("hgeg8").isCapsLockOnAndModifyKeyboardEvent)(t),a=(0,p.editorExperiment)("platform_editor_controls","variant1")?n(e):o;return(0,i("dus6D").keydownHandler)(a)(e,r)}}})})(e,t?.analytics?.actions)}],getSharedState(e){if(!e)return;let t=es.getState(e);return{...t,formattingIsPresent:H.getState(e)?.formattingIsPresent,isInitialised:!!t?.isInitialised}},pluginsOptions:o?{}:{selectionToolbar:()=>"none"===((0,i("dh538").fg)("platform_editor_use_preferences_plugin")?t?.userPreferences?.sharedState.currentState()?.preferences?.toolbarDockingPosition:t?.selectionToolbar?.sharedState?.currentState()?.toolbarDocking)&&(0,p.editorExperiment)("platform_editor_controls","variant1",{exposure:!0})?{isToolbarAbove:!0,items:[{type:"custom",render:e=>{if(e)return(0,c.jsx)(e5,{api:t,editorView:e,editorAnalyticsAPI:t?.analytics?.actions})},fallback:[]}],rank:7,pluginName:"textFormatting"}:void 0},primaryToolbarComponent:t?.primaryToolbar||o?void 0:n,commands:{toggleSuperscript:I(t?.analytics?.actions),toggleSubscript:k(t?.analytics?.actions),toggleStrike:E(t?.analytics?.actions),toggleCode:x(t?.analytics?.actions),toggleUnderline:_(t?.analytics?.actions),toggleEm:g(t?.analytics?.actions),toggleStrong:S(t?.analytics?.actions)}}}}),a("b167b",function(e,t){let o={"…":"...","→":"->","←":"<-","–":"--","“":'"',"”":'"',"‘":"'","’":"'"},n=RegExp(`[${Object.keys(o).join("")}]`,"g"),r=(e,t,r,a,s)=>{let{schema:l}=s.doc.type,{code:d}=l.marks;return a.type===d&&function(e,t,r){let{doc:i}=r,{schema:a}=i.type,{mention:s,text:l,emoji:d,inlineCard:c}=a.nodes,p=[];i.nodesBetween(e,t,(e,t,o)=>{[s,l,d,c].includes(e.type)&&p.push({node:e,pos:t})}),p.forEach(({node:s,pos:d})=>{if(s.type!==l){let e=s.attrs.url||s.attrs.text||`${s.type.name} text missing`,t=r.mapping.map(d);r.replaceWith(t,t+s.nodeSize,a.text(e,s.marks))}else if(s.text){let l=Math.max(d,e),c=Math.min(d+s.nodeSize,t),p=i.textBetween(l,c).replace(n,e=>o[e]??e),u=r.mapping.map(l),f=r.mapping.map(c);r.replaceWith(u,f,a.text(p,s.marks))}})}(e,t,s),s.doc.nodesBetween(s.mapping.map(e),s.mapping.map(t),(o,n)=>{if((0,i("dh538").fg)("editor_inline_comments_on_inline_nodes")){if(!o.isText&&!["emoji","status","date","mention","inlineCard"].includes(o.type.name))return!0}else if(!o.isText)return!0;let l=Math.max(n,s.mapping.map(e)),d=Math.min(n+o.nodeSize,s.mapping.map(t));return r?s.removeMark(l,d,a):s.addMark(l,d,a),!0}),s},a=(e,t,o,n)=>{let r=!0;return t.nodesBetween(o,n,t=>{if(!r)return!1;t.isText&&r&&(r=!!e?.isInSet(t.marks))}),r},s=e=>({tr:t})=>{if(t.selection instanceof i("7XFGZ").CellSelection){let o=!0,n=[];t.selection.forEachCell((r,i)=>{n.push({node:r,pos:i});let s=i+r.nodeSize;o&&(o=a(e,t.doc,i,s))});for(let i=n.length-1;i>=0;i--){let a=n[i],s=a.pos,l=s+a.node.nodeSize;r(s,l,o,e,t)}}else{let{$from:o,$to:n}=t.selection,i=a(e,t.doc,o.pos,n.pos);r(o.pos,n.pos,i,e,t)}return t.docChanged?t:null};e.exports.applyMarkOnRange=r,e.exports.entireSelectionContainsMark=a,e.exports.toggleMark=(e,t)=>({tr:o})=>{let n=e.create(t);return o.selection instanceof i("ks2lK").TextSelection&&o.selection.$cursor?(n.isInSet(o.storedMarks||o.selection.$cursor.marks())?o.removeStoredMark(n):o.addStoredMark(n),o):s(n)({tr:o})},e.exports.removeMark=e=>({tr:t})=>{let{selection:o}=t;if(o instanceof i("7XFGZ").CellSelection)o.forEachCell((o,n)=>{let r=n+o.nodeSize;t.removeMark(n,r,e)});else if(o instanceof i("ks2lK").TextSelection&&o.$cursor)t.removeStoredMark(e);else{let{from:n,to:r}=o;t.removeMark(n,r,e)}return t}}),a("8TW6I",function(e,t){var o,n=((o={}).FIND_REPLACE="findReplace",o.EMOJI="emoji",o.ORDERED_LIST="orderedList",o.BULLET_LIST="bulletList",o.MEDIA="media",o.MENTION="mention",o.DECISION_LIST="decisionList",o.TASK_LIST="taskList",o.TEXT_COLOR="color",o.BACKGROUND_COLOR="backgroundColor",o.TEXT_FORMATTING_STRONG="strong",o.TEXT_FORMATTING_ITALIC="italic",o.TEXT_FORMATTING_UNDERLINE="underline",o.UNDO="undo",o.REDO="redo",o.INDENT="indent",o.OUTDENT="outdent",o.RECORD_VIDEO="recordVideo",o.AI="atlassian-intelligence",o);e.exports.TOOLBAR_ACTION_SUBJECT_ID=n}),a("aro2m",function(e,t){var o=i("l998X");i("42omo");let n=(e,t,o)=>{if(o)return`show-only-${o}`;let n=[];return e&&n.push(`show-above-${e}`),t&&n.push(`show-below-${t}`),n.length>0?n.join(" "):void 0};e.exports.Show=({children:e,above:t,below:r,only:i})=>(0,o.jsx)("div",{className:n(t,r,i),children:e})}),a("4Dsx2",function(e,t){e.exports.getInputMethodFromParentKeys=e=>e.at(0)?.key===i("cPCP8").TOOLBARS.INLINE_TEXT_TOOLBAR?i("d925B").INPUT_METHOD.FLOATING_TB:i("d925B").INPUT_METHOD.TOOLBAR}),a("EJKmu",function(e,o){var n=i("l998X");i("42omo"),e.exports.MoreItemsIcon=({label:e,testId:o,color:r,shouldRecommendSmallIcon:a,spacing:s})=>(0,n.jsx)(t(i("ghftu")),{label:e,testId:o,color:r,shouldRecommendSmallIcon:a,spacing:s,size:"small"})}),a("1hEK8",function(t,o){e(t.exports,"typeAheadPlugin",()=>i("fMaLE").typeAheadPlugin),i("fMaLE")}),a("fMaLE",function(e,o){var n,r,a=i("l998X");i("42omo");var s=((n={}).OPEN_TYPEAHEAD_AT_CURSOR="OPEN_TYPEAHEAD_AT_CURSOR",n.CLOSE_TYPE_AHEAD="CLOSE_TYPE_AHEAD",n.CHANGE_QUERY="CHANGE_QUERY",n.INSERT_ITEM="INSERT_ITEM",n.INSERT_RAW_QUERY="INSERT_RAW_QUERY",n.UPDATE_LIST_ITEMS="UPDATE_LIST_ITEMS",n.UPDATE_LIST_ERROR="UPDATE_LIST_ERROR",n.CLEAR_LIST_ERROR="CLEAR_LIST_ERROR",n.UPDATE_SELECTED_INDEX="UPDATE_SELECTED_INDEX",n);let l=new(0,i("ks2lK").PluginKey)("typeAheadPlugin"),d=e=>e.setMeta(l,{action:s.CLOSE_TYPE_AHEAD});class c{constructor(){this.startedAt=0,this.endedAt=0,this.keyCount={arrowUp:0,arrowDown:0},this.increaseArrowUp=()=>{this.keyCount.arrowUp+=1},this.increaseArrowDown=()=>{this.keyCount.arrowDown+=1},this.serialize=()=>({startedAt:this.startedAt,endedAt:performance.now(),keyCount:{arrowUp:this.keyCount?.arrowUp||0,arrowDown:this.keyCount?.arrowDown||0}}),this.startedAt=performance.now(),this.keyCount={arrowUp:0,arrowDown:0}}}var p=i("iu6m9");let u=(e,t)=>(0,i("91bcx").isOfflineMode)(t?.connectivity?.sharedState.currentState()?.mode)&&e?.isDisabledOffline===!0,f=(e,t)=>(o,n)=>{let r=l.getState(o);if(r?.selectedIndex===e||u(r?.items[e],t))return!1;let i=o.tr;return i.setMeta(l,{action:s.UPDATE_SELECTED_INDEX,params:{selectedIndex:e}}),n&&n(i),!0},h=e=>e&&Object.values(i("lOELb").TypeAheadAvailableNodes).includes(e.id)&&"string"==typeof e.trigger&&"function"==typeof e.selectItem&&"function"==typeof e.getItems,m=e=>!!l?.getState(e)?.decorationSet?.find().length,g=e=>l.getState(e),T=e=>l.getState(e)?.triggerHandler,E=e=>l.getState(e)?.query,b=e=>!m(e),S=(e,t)=>{let o=l.getState(t);if(!o||!o.typeAheadHandlers||0===o.typeAheadHandlers.length)return null;let{typeAheadHandlers:n}=o;return n.find(t=>t.id===e)||null},y=({currentIndex:e,nextIndex:t,listSize:o,itemIsDisabled:n})=>{for(let e=t;e<o;e++)if(!n(e))return e;if((0,p.editorExperiment)("platform_editor_offline_editing_web",!0)){for(let e=0;e<t;e++)if(!n(e))return e}return e},_=({currentIndex:e,nextIndex:t,listSize:o,itemIsDisabled:n})=>{for(let e=t;e>=0;e--)if(!n(e))return e;if((0,p.editorExperiment)("platform_editor_offline_editing_web",!0)){for(let e=o;e>t;e--)if(!n(e))return e}return e},C=({editorView:e,direction:t,api:o})=>()=>{let n,r=g(e.state);if(!r)return;let{selectedIndex:i,items:a}=r,s=r.stats instanceof c?r.stats:new c,l=e=>u(a[e],o);"next"===t?(s.increaseArrowDown(),n=-1===i&&a.length>1?l(0)&&a.length>2?2:1:i>=a.length-1?0:i+1,n=y({currentIndex:i,nextIndex:n,listSize:a.length,itemIsDisabled:l})):(s.increaseArrowUp(),n=i<=0?a.length-1:i-1,n=_({currentIndex:i,nextIndex:n,listSize:a.length,itemIsDisabled:l})),f(n,o)(e.state,e.dispatch)},I=(e,t,o)=>{switch(e){case"@":return{popupAriaLabel:t.formatMessage(i("6h7hA").typeAheadListMessages.mentionPopupLabel),listItemAriaLabel:t.formatMessage(i("6h7hA").typeAheadListMessages.metionListItemLabel,{name:o?.mention?.name||"",shortName:o?.mention?.mentionName||""})};case"/":return{popupAriaLabel:t.formatMessage(i("6h7hA").typeAheadListMessages.quickInsertPopupLabel),listItemAriaLabel:t.formatMessage(i("6h7hA").typeAheadListMessages.emojiListItemLabel,{name:o?.title||"",shortcut:o?.emoji?.shortName||""})};case":":return{popupAriaLabel:t.formatMessage(i("6h7hA").typeAheadListMessages.emojiPopupLabel),listItemAriaLabel:t.formatMessage(i("6h7hA").typeAheadListMessages.emojiListItemLabel,{name:o?.emoji?.name||"",shortcut:o?.emoji?.shortName||""})};default:return{popupAriaLabel:t.formatMessage(i("6h7hA").typeAheadListMessages.typeAheadPopupLabel)}}},O=({node:e,tr:t,position:o})=>{let{start:n,end:r}=o;if(e.isText)return t.replaceWith(n,r,e);if(e.isBlock){t.delete(n,r);let o=t.mapping.map(n),a=(0,i("zT4ZO").normaliseNestedLayout)(t,e),{listItem:s}=t.doc.type.schema.nodes,l=t.selection.$from.node(-1)?.type,d=t.selection.$from.node(-3)?.type;if(l===s&&d!==e.type)return(0,i("eDabt").transformNodeIntoListItem)(t,a);if((0,i("zT4ZO").safeInsert)(a,o)(t))return t;let c=i("5SAOw").Slice.maxOpen(i("5SAOw").Fragment.from(a)),{from:p,to:u}=function(e,t,o){let n=e.resolve(t),r=(e,t)=>({from:e,to:t||e});for(let e=n.depth;e>=0;e--){let t=n.node(e),i=Math.max(e-1,0),a=n.node(i),s="paragraph"===t.type.name&&0===t.content.size,l=n.index(i),d=a.canReplaceWith(l,l,o.type);if(s&&d){let e=n.posAtIndex(l,i);return r(e,e+t.nodeSize)}let c=n.indexAfter(i);if(a.canReplaceWith(c,c,o.type))return r(n.posAtIndex(c,i))}return r(0)}(t.doc,o,a);t.replaceWith(p,u,e);let f=Math.min(p+(e.isAtom?e.nodeSize:c.openStart),t.doc.content.size),h=i("ks2lK").TextSelection.findFrom(t.doc.resolve(f),1,!0);if(h)return t.setSelection(h)}return t},k=({maybeFragment:e,tr:t,position:o,selectInlineNode:n})=>{let{start:r,end:a}=o,s=e instanceof i("5SAOw").Node?i("5SAOw").Fragment.from(e):e;return(t.replaceWith(r,a,s),n)?t.setSelection(i("ks2lK").NodeSelection.create(t.doc,r)):t.setSelection(i("ks2lK").TextSelection.near(t.doc.resolve(r+s.size)))},v=({schema:e,maybeNode:t})=>{if(!t)return null;if(t instanceof i("5SAOw").Node||t instanceof i("5SAOw").Fragment)return t;if("string"==typeof t)return e.text(t);try{return i("5SAOw").Node.fromJSON(e,t)}catch(e){return console.error(e),null}},x=({editorState:e,handler:t,query:o,wasInsertedBySpace:n,selectedIndex:r,textStartPosition:a,textInserted:s})=>(l,c={})=>{let{tr:p}=e,u={start:a,end:a+(n?s.length:0)},f=v({schema:e.schema,maybeNode:l});if(!f)return d(p),p.delete(u.start,u.end),p;if(f instanceof i("5SAOw").Node&&f.isBlock?O({node:f,tr:p,position:u}):k({maybeFragment:f,tr:p,position:u,selectInlineNode:!!c.selectInlineNode}),(0,i("ke2AI").closeHistory)(p),n)return p;let h={stage:i("cuprm").InsertTypeAheadStages.INSERTING_ITEM,query:o,selectedIndex:r,trigger:t.trigger};return p.step(new(0,i("cuprm").InsertTypeAheadStep)(h)),p},N=({trigger:e,selectedIndex:t,position:o,query:n,wasInsertedBySpace:r,insertItem:a})=>d=>{let c=d.tr;if((0,i("ke2AI").closeHistory)(c),!r){c.delete(o.start,o.end);let r={stage:i("cuprm").InsertTypeAheadStages.DELETING_RAW_QUERY,selectedIndex:t,query:n,trigger:e};c.step(new(0,i("cuprm").InsertTypeAheadStep)(r))}return c.setMeta(l,{action:s.INSERT_ITEM,params:a}),c},A=e=>({item:t,handler:o,mode:n,query:r,sourceListItem:a})=>{let p=g(e.state);if(!p)return;let u={mode:n,query:r,stats:(p.stats||new c).serialize(),sourceListItem:a},{tr:f}=e.state,h=o.trigger,m=`${h}${r}`;n===i("lOELb").SelectItemMode.SPACE&&(m=m.trim().concat(" "));let T=n===i("lOELb").SelectItemMode.SPACE,{selection:{from:E}}=f,b={start:f.selection.from,end:f.selection.from+m.length};f.setMeta(l,{action:s.INSERT_RAW_QUERY,params:N({wasInsertedBySpace:T,selectedIndex:-1,insertItem:e=>{let a=x({editorState:e,query:r,mode:n,handler:o,wasInsertedBySpace:T,selectedIndex:-1,textInserted:m,textStartPosition:E}),s=!1,c=new Proxy(a,{apply:function(e,t,o){return s=!0,e(...o)}}),p=o.selectItem(e,t,c,u);return!s&&p&&((0,i("ke2AI").closeHistory)(p),p.getMeta(l)||d(p)),p},position:b,query:r,trigger:h})}),f.insertText(m),(0,i("ke2AI").closeHistory)(f),e.dispatch(f),e.focus()},P=e=>t=>{let{triggerHandler:o,inputMethod:n,query:r,removePrefixTriggerOnCancel:i}=e;t.setMeta(l,{action:s.OPEN_TYPEAHEAD_AT_CURSOR,params:{triggerHandler:o,inputMethod:n,query:r,removePrefixTriggerOnCancel:i}})},M=({triggerHandler:e,inputMethod:t,query:o,removePrefixTriggerOnCancel:n})=>({tr:r})=>{P({triggerHandler:e,inputMethod:t,query:o,removePrefixTriggerOnCancel:n})(r);let{selection:a}=r,s=a instanceof i("ks2lK").NodeSelection&&a.node.type.isInline;if(!(a instanceof i("ks2lK").TextSelection||a instanceof i("adhil").GapCursorSelection||a instanceof i("ks2lK").NodeSelection))return r;if(a instanceof i("adhil").GapCursorSelection)r.insertText(" "),r.delete(r.selection.from-1,r.selection.from);else{if(a instanceof i("ks2lK").NodeSelection)return s&&r.deleteSelection(),r;if(!a.$cursor)return r.deleteSelection(),r;let t=a.$cursor.pos,o=r.doc.nodeAt(t),n=o&&"placeholder"===o.type.name;o&&n&&r.delete(t,t+o.nodeSize),t>=2&&a?.$head?.parent?.textContent&&a.$head.parent.textContent.endsWith?.(e.trigger)&&r.delete(t-1,t)}return r},R=(e,t)=>{let o=e.find(e=>e.getMeta(l)?.action===t);return o?o.getMeta(l)?.params:null};function w(){return new(0,i("1S4f7").SafePlugin)({appendTransaction(e,t,o){let n=R(e,s.INSERT_ITEM);if(n){let e=n(o);if(e)return e}}})}let L="typeaheadDecoration",B="fabric-editor-typeahead",D="typeahaed_decoration_element_id";var U=((r={}).BEFORE_TEXT_INSERTED="BEFORE_TEXT_INSERTED",r.AFTER_TEXT_INSERTED="AFTER_TEXT_INSERTED",r);i("42omo");var K=i("dQl1W"),j=i("kbdB6"),F=i("42omo");let G=(e,t,o,n,r=null)=>{e?.analytics?.actions.fireAnalyticsEvent({action:i("d925B").ACTION.CLOSED,actionSubject:i("d925B").ACTION_SUBJECT.TYPEAHEAD,actionSubjectId:i("d925B").ACTION_SUBJECT_ID.TYPEAHEAD_QUICK_INSERT,attributes:{inputMethod:n,closeAction:t,hasQuery:o,invocationMethod:r},eventType:i("d925B").EVENT_TYPE.TRACK})},H=e=>(t,o)=>{let n=l.getState(t);if(n?.query===e)return!1;let r=t.tr;return r.setMeta(l,{action:s.CHANGE_QUERY,params:{query:e}}),o&&o(r),!0},z=e=>t=>{let o=Math.max(t.selection.$from.pos-e.length,0),n=t.doc.resolve(o),r=i("ks2lK").TextSelection.findFrom(n,-1,!0);r&&t.setSelection(r)},V=e=>e.at(0)?.title==="View more",W=({view:e,setSelectionAt:t,text:o,forceFocusOnEditor:n})=>{let{tr:r,schema:i}=e.state;d(r),o.length>0&&(r.replaceSelectionWith(i.text(o)),t===U.BEFORE_TEXT_INSERTED&&z(o)(r)),e.dispatch(r),n&&e.focus()},q=(e,t,o,n)=>{let r=(0,F.useRef)(t),a=(0,F.useRef)(o),s=(0,F.useCallback)(({setSelectionAt:t,text:o,forceFocusOnEditor:n})=>{if(!e)return;let{current:i}=r;W({view:i,setSelectionAt:t,text:o,forceFocusOnEditor:n})},[e]),l=(0,F.useCallback)(({mode:t,index:o,query:i})=>{let l=a.current;if(0===l.length||!e||V(l)){let t=`${e.trigger}${i}`;s({forceFocusOnEditor:!0,setSelectionAt:U.AFTER_TEXT_INSERTED,text:t});return}let d=l[o];if(!d||u(d,n))return;let{current:c}=r;A(c)({item:d,handler:e,mode:t,query:i,sourceListItem:l})},[e,s,n]),d=(0,F.useCallback)(({mode:t,query:o})=>{let n=a.current;if(n&&n.length>1)return!1;if(1!==n.length||V(n)){let n=`${e.trigger}${o}`;queueMicrotask(()=>{s({forceFocusOnEditor:!0,setSelectionAt:U.AFTER_TEXT_INSERTED,text:t===i("lOELb").SelectItemMode.SPACE?n.concat(" "):n})})}else queueMicrotask(()=>{l({mode:t,query:o,index:0})});return!0},[l,e,s]);return(0,F.useLayoutEffect)(()=>{a.current=o},[o]),[l,s,d]},X=()=>({tr:e})=>(e.setMeta(l,{action:s.CLEAR_LIST_ERROR,params:{errorInfo:null}}),e),$=e=>(t,o)=>{let n=t.tr;return n.setMeta(l,{action:s.UPDATE_LIST_ERROR,params:{errorInfo:e,items:[]}}),o&&o(n),!0},Y=e=>(t,o)=>{let n=t.tr;return n.setMeta(l,{action:s.UPDATE_LIST_ITEMS,params:{items:e}}),o&&o(n),!0},J=[],Z=(e,t,o,n,r)=>{let[i,a]=(0,F.useState)(J),s=(0,F.useRef)(!0),l=(0,F.useRef)(t);return(0,F.useEffect)(()=>{let i=e?.getItems;if(!i)return void a(J);let d={query:o||"",editorState:t.state},{current:c}=l;(0,p.editorExperiment)("platform_editor_offline_editing_web",!0)&&queueMicrotask(()=>{r?.core.actions.execute(X())}),i(d).then(e=>{let t=e.length>0?e:J;s.current&&a(t);let o={title:"View more"};queueMicrotask(()=>{Y(n?t.concat(o):t)(c.state,c.dispatch)})}).catch(e=>{(0,p.editorExperiment)("platform_editor_offline_editing_web",!0)&&e&&(s.current&&a(J),queueMicrotask(()=>{$(e)(c.state,c.dispatch)}))})},[e,o]),(0,F.useEffect)(()=>()=>{s.current=!1},[]),i},Q=({triggerHandler:e,items:t,query:o,editorView:n,closePopup:r})=>{let a=(0,F.useRef)(n);(0,F.useLayoutEffect)(()=>{if(!o||"function"!=typeof e.forceSelect)return;let n=e.forceSelect({items:t,query:o,editorState:a.current.state});if(!n)return;let{current:s}=a;r(),queueMicrotask(()=>{A(s)({item:n,mode:i("lOELb").SelectItemMode.SPACE,query:o,handler:e,sourceListItem:t})})},[e,r,o,t])};var ee=i("8m4tT"),et=i("1oCLl");let eo={name:"qn4qy1",styles:"&::after{content:attr(data-place-holder);color:var(--ds-text-subtlest, #6B6E76);position:relative;padding:var(--ds-space-025, 2px);left:var(--ds-space-negative-050, -4px);background-color:var(--ds-background-neutral, #0515240F);border-radius:var(--ds-radius-small, 3px);}"},en=(0,i("9K4OG").css)({"&::after":{content:"''"}}),er=(0,i("9K4OG").css)({outline:"none","& input":{width:"5px",border:"none",background:"transparent",padding:0,margin:0,fontSize:"1em",height:i("aFUXX").blockNodesVerticalMargin,caretColor:"var(--ds-text-accent-blue, #0052CC)"}}),ei=e=>["Enter","Tab","ArrowDown","ArrowUp"].includes(e.key),ea=e=>{let t=(0,j.keyName)(e);return e.ctrlKey&&"y"===t||(e.ctrlKey||e.metaKey)&&e.shiftKey&&"Z"===t?"historyRedo":(!!e.ctrlKey||!!e.metaKey)&&"z"===t&&"historyUndo"},es=(e,t)=>{switch(e){case"@":return i("6h7hA").typeAheadListMessages.mentionInputLabel;case"/":default:return i("6h7hA").typeAheadListMessages.quickInsertInputLabel;case":":return i("6h7hA").typeAheadListMessages.emojiInputLabel}},el=t(F).memo(({triggerQueryPrefix:e,cancel:t,onQueryChange:o,onItemSelect:n,selectNextItem:r,selectPreviousItem:a,forceFocus:s,reopenQuery:l,onQueryFocus:d,onUndoRedo:c,editorView:u,items:f})=>{let h=(0,F.useRef)(document.createElement("span")),m=(0,F.useRef)(null),[T,E]=(0,F.useState)(null),b=(0,p.editorExperiment)("platform_editor_controls","variant1"),S=(0,p.editorExperiment)("platform_editor_controls","variant1")&&(0,i("dh538").fg)("platform_editor_quick_insert_placeholder"),y=u.state.selection,{table:_}=u.state.schema.nodes,[C,I]=(0,F.useState)(S&&"/"===e&&!(0,ee.findParentNodeOfType)(_)(y)),O=(0,F.useCallback)(()=>h.current?.textContent||"",[]),k=(0,F.useCallback)(e=>{o(O())},[o,O]),v=(0,F.useCallback)(()=>{O()&&I(!1)},[O]),[x,N]=(0,F.useState)(!1),A=(0,F.useCallback)(e=>{let o=(0,j.keyName)(e),s=document.getSelection(),l=h.current?.textContent||"",d=O(),p=!1,{selectedIndex:f,removePrefixTriggerOnCancel:m}=g(u.state)||{};switch(N(!0),o){case" ":0===d.length&&(t({forceFocusOnEditor:!0,text:" ",addPrefixTrigger:!b||!m,setSelectionAt:U.AFTER_TEXT_INSERTED}),p=!0);break;case"Escape":case"PageUp":case"PageDown":case"Home":t({text:d,forceFocusOnEditor:!0,addPrefixTrigger:!b||!m,setSelectionAt:U.AFTER_TEXT_INSERTED}),p=!0;break;case"Backspace":(0===l.length||s?.anchorOffset===0)&&(e.stopPropagation(),e.preventDefault(),t({forceFocusOnEditor:!0,text:d,addPrefixTrigger:!1,setSelectionAt:U.BEFORE_TEXT_INSERTED}));break;case"Enter":e.isComposing||229===e.which||229===e.keyCode||(-1===f&&(a(),r()),n(e.shiftKey?i("lOELb").SelectItemMode.SHIFT_ENTER:i("lOELb").SelectItemMode.ENTER));break;case"Tab":-1===f&&(a(),r()),n(i("lOELb").SelectItemMode.TAB);break;case"ArrowDown":r();break;case"ArrowUp":a()}let T=ea(e);if(c&&T&&c(T)&&(p=!0),ei(e)||p)return e.stopPropagation(),e.preventDefault(),!1},[c,n,r,a,t,O,u.state,b]);(0,F.useLayoutEffect)(()=>{if(!h.current)return;let e=(0,et.expValEquals)("platform_editor_hydratable_ui","isEnabled",!0)?(0,i("d7ZU3").getBrowserInfo)():i("d7ZU3").browser,{current:o}=h,{removePrefixTriggerOnCancel:n}=g(u.state)||{},r=e=>{d()},a=e=>{let o=(0,j.keyName)(e);if(["ArrowLeft","ArrowRight"].includes(o)&&document.getSelection&&document.getSelection()){let r=h.current?.textContent||"",i=document.getSelection(),a=i&&"ArrowRight"===o&&i.anchorOffset===r.length,s=i&&"ArrowLeft"===o&&(0===i.anchorOffset||e.metaKey);if(!a&&!s)return;t({forceFocusOnEditor:!0,addPrefixTrigger:!b||!n,text:O(),setSelectionAt:a?U.AFTER_TEXT_INSERTED:U.BEFORE_TEXT_INSERTED}),e.preventDefault(),e.stopPropagation();return}A(e)},s=e=>{let t=e.clipboardData?.getData("text/html"),o=e.clipboardData?.getData("text/plain");if(t&&o){e.preventDefault();let t=window.getSelection();if(t&&h.current&&t.rangeCount>0){let e=t.getRangeAt(0);e.deleteContents(),e.insertNode(document.createTextNode(o)),e.collapse(!1)}}},l=o=>{let{relatedTarget:r}=o;!(r instanceof HTMLElement&&r.closest&&r.closest(`.${B}`))&&((e.ie||e.chrome)&&window.getSelection()?.type!=="Range"&&!o.sourceCapabilities||t({addPrefixTrigger:!b||!n,text:O(),setSelectionAt:U.BEFORE_TEXT_INSERTED,forceFocusOnEditor:!1}))},c=()=>{t({addPrefixTrigger:!1,text:"",forceFocusOnEditor:!0,setSelectionAt:U.BEFORE_TEXT_INSERTED})},p=t=>{N(!1);let{target:n}=t;if(!t.isComposing&&n instanceof HTMLElement){if("historyUndo"===t.inputType&&n.textContent?.length===0){t.preventDefault(),t.stopPropagation(),c();return}if(null!=t.data&&null===m.current&&(E(""),e.safari)){t.preventDefault();let e=document.createTextNode(t.data);o.appendChild(e);let n=window.getSelection(),r=document.createRange();r.setStart(e,e.length),r.collapse(!0),n?.removeAllRanges(),n?.addRange(r)}}},f=()=>{};return e.safari&&o.addEventListener("input",e=>{let{target:t}=e;if(e instanceof InputEvent&&!e.isComposing&&t instanceof HTMLElement&&"historyUndo"===e.inputType&&t.textContent?.length===1){e.preventDefault(),e.stopPropagation(),c();return}}),o.addEventListener("focusout",l),o.addEventListener("focusin",r),o.addEventListener("keydown",a),o.addEventListener("beforeinput",p),o.addEventListener("paste",s),()=>{o.removeEventListener("focusout",l),o.removeEventListener("focusin",r),o.removeEventListener("keydown",a),o.removeEventListener("beforeinput",p),o.removeEventListener("paste",s),e.safari&&o.removeEventListener("input",f)}},[e,O,d,t,A,u.state,b]),(0,F.useLayoutEffect)(()=>{let e="string"==typeof l&&l.trim().length>0;h.current&&s&&(E(e?l:null),requestAnimationFrame(()=>{if(!h?.current)return;let t=window.getSelection();if(t&&e&&h.current.lastChild instanceof Text){let e=h.current.lastChild,o=document.createRange();o.setStart(h.current.lastChild,e.length),o.collapse(!0),t.removeAllRanges(),t.addRange(o)}h.current.focus(),N(!0)}))},[s,l]);let P=(0,F.useMemo)(()=>{let e=[];return C&&(e.push("placeholder-decoration-wrap"),y.$from.depth>1&&e.push("placeholder-decoration-hide-overflow")),e.join(" ")},[C,y]),M=D+"__assistiveHint",R=(0,i("8C5kA").default)();return(0,i("9K4OG").jsx)(F.Fragment,null,e,(0,i("9K4OG").jsx)("span",{css:[er,S&&en,C&&eo],contentEditable:!0,ref:h,onKeyUp:k,tabIndex:-1,onInput:S?v:void 0,role:"combobox","aria-controls":D,"aria-autocomplete":"list","aria-expanded":0!==f.length,"aria-labelledby":M,suppressContentEditableWarning:!0,"data-query-prefix":e,className:P,"data-place-holder":R.formatMessage(i("6h7hA").typeAheadListMessages.quickInsertInputPlaceholderLabel)},null===T?(0,i("9K4OG").jsx)("input",{ref:m,type:"text","aria-label":R.formatMessage(es(e,R))}):T),(0,i("9K4OG").jsx)("span",{id:M,style:{display:"none"}},R.formatMessage(i("6h7hA").typeAheadListMessages.inputQueryAssistiveLabel)),(0,i("9K4OG").jsx)(i("5KVL8").AssistiveText,{assistiveText:0===f.length?R.formatMessage(i("6h7hA").typeAheadListMessages.noSearchResultsLabel,{itemsLength:f.length}):"",isInFocus:0===f.length||x,id:D}))});el.displayName="InputQuery";let ed=t(F).memo(({triggerHandler:e,editorView:t,anchorElement:o,shouldFocusCursorInsideQuery:n,popupsMountPoint:r,popupsBoundariesElement:s,popupsScrollableElement:l,inputMethod:d,getDecorationPosition:c,reopenQuery:f,onUndoRedo:h,api:m})=>{e?.openElementBrowserModal;let T=!1;(0,p.editorExperiment)("platform_editor_controls","variant1")&&(T=!!e?.getMoreOptionsButtonConfig);let[E,b]=(0,F.useState)(!1),[S,_]=(0,F.useState)(f||""),I=(0,F.useRef)(S),O=(0,F.useRef)(t),k=Z(e,t,S,T,m);(0,F.useEffect)(()=>{!E&&(0,i("dh538").fg)("platform_editor_ease_of_use_metrics")&&m?.core.actions.execute(m?.metrics?.commands.handleIntentToStartEdit({shouldStartTimer:!1,shouldPersistActiveSession:!0}))},[E,m]),(0,F.useLayoutEffect)(()=>{I.current=S},[S]);let[v,x]=q(e,t,k,m),N=(0,F.useMemo)(()=>C({editorView:t,direction:"next",api:m}),[t,m]),A=(0,F.useMemo)(()=>C({editorView:t,direction:"previous",api:m}),[t,m]),P=(0,F.useCallback)(({setSelectionAt:o,addPrefixTrigger:n,text:r,forceFocusOnEditor:a})=>{(0,p.editorExperiment)("platform_editor_controls","variant1")&&G(m,i("d925B").ACTION.CANCELLED,!!I.current,i("d925B").INPUT_METHOD.KEYBOARD,g(t.state)?.inputMethod),b(!0),x({forceFocusOnEditor:a,setSelectionAt:o,text:n?`${e.trigger}${r}`:r})},[e.trigger,x,m,t.state]),M=(0,F.useCallback)((e=i("lOELb").SelectItemMode.SELECTED)=>{let{current:o}=O,{selectedIndex:n}=g(o.state);-1!==y({currentIndex:n,nextIndex:1,listSize:k.length,itemIsDisabled:e=>u(k[e],m)})&&((0,p.editorExperiment)("platform_editor_controls","variant1")&&G(m,i("d925B").ACTION.INSERTED,!!I.current,i("d925B").INPUT_METHOD.KEYBOARD,g(t.state)?.inputMethod),b(!0),queueMicrotask(()=>{v({mode:e,index:n,query:I.current})}))},[k,m,t.state,v]),R=(0,F.useCallback)(()=>{},[]),w=(0,F.useCallback)(()=>{b(!0)},[]);return((0,F.useEffect)(()=>{let{current:e}=O,t=g(e.state);0!==S.length&&S!==t?.query&&t?.triggerHandler&&H(S)(e.state,e.dispatch)},[S,f]),Q({triggerHandler:e,items:k,query:S,editorView:t,closePopup:w}),E||!e)?null:(0,a.jsx)(el,{triggerQueryPrefix:e?.trigger,onQueryChange:_,onItemSelect:M,selectNextItem:N,selectPreviousItem:A,onQueryFocus:R,cancel:P,forceFocus:n,onUndoRedo:h,reopenQuery:f,editorView:t,items:k})});ed.displayName="WrapperTypeAhead";let ec=({intl:e,popupMountRef:t,nodeViewPortalProviderAPI:o,api:n})=>({createDecorations:(r,{triggerHandler:s,inputMethod:l,reopenQuery:p})=>{let{selection:u}=r;if(!(u instanceof i("ks2lK").TextSelection)||!u.$cursor)return{decorationSet:i("ftzrq").DecorationSet.empty,stats:null,decorationElement:null};let f=`decoration_id_typeahead_decoration_key_${(0,K.v4)()}`,{$cursor:h}=u,m=document.createElement("mark"),g=new c,T=!0,b=i("ftzrq").Decoration.widget(h.pos,(r,c)=>{let u=()=>{try{return c()}catch(e){return}};m.setAttribute("id",f),m.setAttribute("role","search"),m.dataset.typeAheadQuery="true",m.dataset.trigger=s.trigger,m.dataset.editorPopup="true",m.dataset.typeAhead=L,m.style.color=`var(--ds-text-accent-blue, ${i("6fnsQ").B400})`,m.style.backgroundColor="transparent";let h=e=>{if(!["historyUndo","historyRedo"].includes(e))return!1;let t="string"==typeof p&&p.trim().length>0,o=E(r.state);if(t||o?.length===0){let t="historyUndo"===e?i("ke2AI").undo:i("ke2AI").redo,o=r.state.tr,n=t(r.state,e=>{o=e});return n&&(d(o),r.dispatch(o),r.focus()),n}return!1};return o.render(()=>(0,a.jsx)(i("1e2E5").default,{defaultLocale:e.defaultLocale||"en-US",locale:e.locale||"en-US",messages:e.messages,formats:e.formats,children:(0,a.jsx)(ed,{triggerHandler:s,editorView:r,anchorElement:m,inputMethod:l,getDecorationPosition:u,shouldFocusCursorInsideQuery:T,popupsMountPoint:t.current?.popupsMountPoint,popupsBoundariesElement:t.current?.popupsBoundariesElement,popupsScrollableElement:t.current?.popupsScrollableElement,onUndoRedo:h,reopenQuery:p,api:n})}),m,f,void 0,!0),T=!1,m},{isTypeAheadDecoration:!0,key:f,side:0,stopEvent:e=>{let t=(0,j.keyName)(e),o=document.getSelection();return"ArrowLeft"!==t||o?.anchorOffset!==0},ignoreSelection:!1});return{decorationSet:i("ftzrq").DecorationSet.create(r.doc,[b]),decorationElement:m,stats:g}},removeDecorations:e=>{if(!e||e===i("ftzrq").DecorationSet.empty)return!1;let t=e.find(void 0,void 0,e=>e.isTypeAheadDecoration);return!!t&&0!==t.length&&(t.forEach(({spec:e})=>{e.key&&document.querySelector(`#${e.key}`)&&o.remove(e.key)}),(0,i("dh538").fg)("platform_editor_ease_of_use_metrics")&&n?.core.actions.execute(n?.metrics?.commands.startActiveSessionTimer()),!0)}});var ep=i("2v1PW");let eu=e=>{if(!(e instanceof i("cuprm").InsertTypeAheadStep))return!1;let t=e.isInsertionStep()&&e.stage===i("cuprm").InsertTypeAheadStages.DELETING_RAW_QUERY,o=e.isUndoingStep()&&e.stage===i("cuprm").InsertTypeAheadStages.INSERTING_ITEM;return t||o},ef=e=>{if(!(e instanceof i("cuprm").InsertTypeAheadStep))return!1;let t=e.isInsertionStep()&&e.stage===i("cuprm").InsertTypeAheadStages.INSERTING_ITEM,o=e.isUndoingStep()&&e.stage===i("cuprm").InsertTypeAheadStages.DELETING_RAW_QUERY;return t||o},eh=e=>t=>t instanceof i("cuprm").InsertTypeAheadStep&&e.find(e=>e.trigger===t.trigger)||null,em=({typeAheadHandlers:e,removeDecorations:t,createDecorations:o})=>{let n=eh(e),r=(e,{tr:n,triggerHandler:r,inputMethod:i,reopenQuery:a,selectedIndex:s,removePrefixTriggerOnCancel:l})=>{t(e.decorationSet);let{decorationSet:d,decorationElement:c,stats:p}=o(n,{triggerHandler:r,inputMethod:i,reopenQuery:a});return(0,et.expValEquals)("cc_editor_interactivity_monitoring","isEnabled",!0)&&ep.insm.session?.startFeature("typeaheadOpen"),{...e,stats:p,decorationSet:d,triggerHandler:r,decorationElement:c,inputMethod:i,selectedIndex:"number"==typeof s?s:-1,items:[],query:a||"",removePrefixTriggerOnCancel:l}},a=e=>(t(e.decorationSet),(0,et.expValEquals)("cc_editor_interactivity_monitoring","isEnabled",!0)&&ep.insm.session?.endFeature("typeaheadOpen"),{...e,inputMethod:null,query:"",decorationElement:null,decorationSet:i("ftzrq").DecorationSet.empty,stats:null,triggerHandler:void 0,items:[],removePrefixTriggerOnCancel:void 0});return(e,o,d)=>{let c=e.getMeta(l)||{},p=n(d);if(d&&p&&eu(d))return r(o,{tr:e,triggerHandler:p,inputMethod:i("d925B").INPUT_METHOD.KEYBOARD,reopenQuery:d.query,selectedIndex:d.selectedIndex});if(ef(d))return a(o);let{action:u,params:f}=c||{},m=u===s.OPEN_TYPEAHEAD_AT_CURSOR&&h(f?.triggerHandler),g=e.selectionSet&&(e.isGeneric||!!e.getMeta("pointer")),T=[s.CLOSE_TYPE_AHEAD,s.INSERT_ITEM].includes(u)||g,E=u===s.CHANGE_QUERY,b=u===s.UPDATE_LIST_ITEMS,S=u===s.UPDATE_LIST_ERROR,y=u===s.UPDATE_SELECTED_INDEX,_=u===s.CLEAR_LIST_ERROR;if(m)return r(o,{tr:e,triggerHandler:f.triggerHandler,inputMethod:f.inputMethod,reopenQuery:f.query,removePrefixTriggerOnCancel:f.removePrefixTriggerOnCancel});if(T)return a(o);if(E)return{...o,query:f.query};if(S){let{errorInfo:e}=f;return{...o,errorInfo:e,items:[],selectedIndex:-1}}if(b){let{items:e}=f,{selectedIndex:t}=o;return{...o,items:e,selectedIndex:Math.max(t>=e.length?e.length-1:t,-1)}}else if(y)return{...o,selectedIndex:f.selectedIndex};else if(_)return{...o,errorInfo:null};if(e.docChanged){let{decorationSet:n}=o,r=n.map(e.mapping,e.doc,{onRemove:()=>{t(o.decorationSet)}});return r===o.decorationSet?o:{...o,decorationSet:r}}return o}},eg=e=>{let t=e.steps.filter(e=>e instanceof i("cuprm").InsertTypeAheadStep);return 1===t.length?t[0]:null};i("42omo"),i("42omo");let eT=(0,i("ecnYn").xcss)({marginBlockStart:"space.600",marginBlockEnd:"space.600",textAlign:"center"}),eE=({testId:e,header:t,description:o,renderImage:n})=>(0,a.jsxs)(i("bUlM5").default,{xcss:eT,testId:e,direction:"column",alignItems:"center",gap:"space.300",children:[n?.(),(0,a.jsxs)(i("bUlM5").default,{direction:"column",alignItems:"center",gap:"space.200",children:[(0,a.jsx)(i("7hXDW").default,{size:"medium",as:"h2",children:t}),o&&(0,a.jsx)(i("5dK2X").default,{as:"p",color:"color.text",children:o})]})]}),eb=(0,i("9K4OG").css)({height:"90px",display:"block"}),eS=e=>{let t="link-picker-ui-generic-error-svg";return(0,i("9K4OG").jsx)("svg",{height:"90",viewBox:"0 0 164 212",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:eb,...e},(0,i("9K4OG").jsx)("path",{d:"m95.43 74.16 66.44 115.08c5.84 10.12-1.46 22.76-13.14 22.76H15.85c-11.68 0-18.98-12.65-13.14-22.76L69.15 74.16c5.84-10.12 20.44-10.12 26.28 0Zm-7.56 83.55 2.88-44.35c.34-5.29-3.86-9.78-9.16-9.78-5.31 0-9.51 4.48-9.16 9.78l2.88 44.35a6.3 6.3 0 0 0 6.28 5.89c3.31 0 6.06-2.58 6.28-5.89Zm-15.84 23.54c0 5.66 4.76 10.1 10.39 9.58 4.85-.45 8.73-4.5 8.83-9.37.11-5.45-4.31-9.94-9.73-9.94-5.23-.01-9.49 4.37-9.49 9.73Z",fill:`url(#${t})`}),(0,i("9K4OG").jsx)("path",{opacity:".6",d:"M93.35 27.17 85.94.45c-.17-.62-1.07-.58-1.19.05l-4.66 25.1-5.8-1.08a.612.612 0 0 0-.7.76L81 52c.17.62 1.07.58 1.19-.05l4.66-25.1 5.8 1.08c.45.08.82-.33.7-.76ZM66.77 41.81 55.9 33.26c-.22-.18-.53.07-.41.33l5.53 11.43-2.66 1.29c-.18.09-.2.33-.05.45l10.87 8.55c.22.18.53-.07.41-.33l-5.53-11.43 2.66-1.29c.17-.08.2-.33.05-.45Z",fill:"#C1C7D0"}),(0,i("9K4OG").jsx)("path",{opacity:".6",d:"M102.78 56.75a.993.993 0 0 1-.92-1.38c-.24-.77-2.29-2.85-3.54-4.11-2.97-3.01-4.93-5-3.84-6.49 1.09-1.48 3.58-.22 7.35 1.7 1.32.67 3.35 1.7 4.45 2.03-.64-.95-2.24-2.58-3.28-3.63-2.97-3.01-4.93-5-3.84-6.49 1.08-1.48 3.58-.22 7.34 1.7 1.32.67 3.34 1.7 4.45 2.03-.64-.95-2.24-2.57-3.28-3.62-2.97-3.01-4.93-5-3.84-6.49 1.08-1.48 3.57-.22 7.34 1.7 1.58.8 4.18 2.13 4.98 2.13a1.005 1.005 0 0 1 1.46 1.36c-1.09 1.48-3.57.22-7.34-1.7-1.32-.67-3.34-1.7-4.44-2.03.64.95 2.24 2.57 3.28 3.62 2.97 3.01 4.93 5 3.84 6.49-1.08 1.48-3.57.22-7.34-1.7-1.32-.67-3.35-1.7-4.45-2.03.64.95 2.24 2.57 3.28 3.63 2.97 3.01 4.93 5 3.84 6.49-1.09 1.48-3.58.22-7.35-1.7-1.32-.67-3.35-1.71-4.45-2.03.64.95 2.24 2.58 3.28 3.63 2.97 3.01 4.93 5 3.84 6.49-.21.26-.51.4-.82.4Zm5.56 14.32c-.35 0-.69-.19-.88-.52-1.04-1.88-2.22-4.02-.91-5.21 1.31-1.2 3.34.18 5.49 1.63.87.59 2.26 1.53 2.93 1.71-.12-.68-.93-2.15-1.45-3.07-1.26-2.27-2.45-4.41-1.14-5.61 1.31-1.2 3.34.18 5.49 1.63.96.65 2.54 1.72 3.1 1.74a1 1 0 0 1 1.27 1.54c-1.31 1.2-3.34-.17-5.49-1.63-.87-.59-2.26-1.53-2.93-1.71.12.68.93 2.15 1.45 3.07 1.26 2.27 2.45 4.41 1.14 5.61-1.31 1.2-3.34-.18-5.49-1.63-.87-.59-2.26-1.53-2.93-1.71.12.68.93 2.14 1.22 2.67.27.48.09 1.09-.39 1.36-.15.09-.32.13-.48.13Zm-54.32-2.89c-.22 0-.44-.04-.67-.14-1.64-.69-1.24-3.11-.81-5.67.17-1.04.45-2.7.33-3.38-.57.39-1.56 1.75-2.18 2.6-1.53 2.09-2.99 4.07-4.62 3.38a.991.991 0 0 1-.53-1.31c.2-.48.73-.72 1.21-.57.52-.21 1.65-1.75 2.34-2.68 1.53-2.09 2.98-4.08 4.62-3.38 1.64.69 1.24 3.11.81 5.67-.17 1.04-.45 2.7-.33 3.38.57-.39 1.56-1.75 2.18-2.6 1.53-2.09 2.98-4.08 4.62-3.38 1.63.69 1.24 3.09.89 5.21-.09.54-.6.91-1.15.83-.54-.09-.92-.6-.83-1.15.1-.59.37-2.24.26-2.92-.57.39-1.56 1.75-2.18 2.6-1.33 1.79-2.59 3.51-3.96 3.51Z",fill:"#B3BAC5"}),(0,i("9K4OG").jsx)("defs",null,(0,i("9K4OG").jsx)("linearGradient",{id:t,x1:"26.169",y1:"228.621",x2:"138.408",y2:"116.382",gradientUnits:"userSpaceOnUse"},(0,i("9K4OG").jsx)("stop",{stopColor:"#C1C7D0"}),(0,i("9K4OG").jsx)("stop",{offset:".297",stopColor:"#C6CBD4",stopOpacity:".881"}),(0,i("9K4OG").jsx)("stop",{offset:".63",stopColor:"#D3D7DE",stopOpacity:".748"}),(0,i("9K4OG").jsx)("stop",{offset:".98",stopColor:"#E9EBEF",stopOpacity:".608"}),(0,i("9K4OG").jsx)("stop",{offset:"1",stopColor:"#EBECF0",stopOpacity:".6"}))))},ey={name:"2omrkj",styles:"display:flex;align-items:stretch;justify-content:center;min-height:290px"},e_=()=>{let e=(0,i("8C5kA").default)(),t=e.formatMessage(i("6h7hA").typeAheadListMessages.typeAheadErrorFallbackHeading),o=e.formatMessage(i("6h7hA").typeAheadListMessages.typeAheadErrorFallbackDesc);return(0,i("9K4OG").jsx)("div",{"data-testid":"typeahead-error-boundary-ui",css:ey},(0,i("9K4OG").jsx)(eE,{header:t,renderImage:()=>(0,i("9K4OG").jsx)(eS,null),description:o}))};var eC=i("cLwe6"),eI=i("lG3Ww");let eO=(0,F.forwardRef)(({children:e,measure:t,index:o,style:n,isVisible:r,isScrolling:i,onMouseMove:s},l)=>{let d=(0,F.useRef)(null);return(0,F.useEffect)(()=>{if(!d.current||!r||i)return;let e=new ResizeObserver(()=>t());return e.observe(d.current),()=>e.disconnect()},[i,r,t]),(0,a.jsx)("div",{ref:l,style:n,"data-index":o,children:(0,a.jsx)("div",{ref:d,"data-testid":`list-item-height-observed-${o}`,onMouseMove:s,children:e})})}),ek=(0,i("9K4OG").css)({"& > button:hover":{backgroundColor:`var(--ds-background-neutral-subtle-hovered, ${i("6fnsQ").N30})`},"& > button:focus":{backgroundColor:`var(--ds-background-neutral-subtle-hovered, ${i("6fnsQ").N30})`}}),ev=({onClick:e,isFocused:t,title:o,ariaLabel:n,iconBefore:r})=>{let a=(0,F.useRef)(null);return(0,F.useEffect)(()=>{t&&a.current&&a.current.focus()},[t]),(0,F.useEffect)(()=>{if(!a.current)return;let{current:t}=a,o=t=>{"Enter"===t.key?(e(),t.stopPropagation()):"Tab"===t.key&&(t.stopPropagation(),t.preventDefault())};return t?.addEventListener("keydown",o),()=>{t?.removeEventListener("keydown",o)}}),(0,i("9K4OG").jsx)(i("7rvPL").default,{hasSeparator:!0},(0,i("9K4OG").jsx)("span",{css:ek},(0,i("9K4OG").jsx)(i("56M4r").default,{ref:a,onClick:e,iconBefore:r,"aria-label":n,testId:"type-ahead-more-options-button"},o)))},ex=(0,i("9K4OG").css)({width:"var(--ds-space-500, 40px)",height:"var(--ds-space-500, 40px)",overflow:"hidden",border:"var(--ds-border-width, 1px) solid var(--ds-border, rgba(223, 225, 229, 0.5))",borderRadius:"var(--ds-radius-small, 3px)",boxSizing:"border-box",display:"flex",justifyContent:"center",alignItems:"center",div:{width:"var(--ds-space-500, 40px)",height:"var(--ds-space-500, 40px)"}}),eN={name:"1pc97kj",styles:"width:var(--ds-space-400, 32px);height:var(--ds-space-400, 32px);div{width:var(--ds-space-400, 32px);height:var(--ds-space-400, 32px);}"},eA={name:"dblrt7",styles:"display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between"},eP=(0,i("9K4OG").css)({whiteSpace:"initial",color:`var(--ds-text, ${i("6fnsQ").N800})`}),eM={name:"1v4psb4",styles:"line-height:1.4"},eR={name:"1th4nak",styles:'font:var(--ds-font-body, normal 400 14px/20px ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Ubuntu, "Helvetica Neue", sans-serif)'},ew=(0,i("9K4OG").css)({fontSize:`${(0,i("aFUXX").relativeFontSizeToBase16)(12)};`,color:"var(--ds-text-subtle, #505258);",marginTop:"var(--ds-space-050, 4px);"}),eL={name:"7ynmig",styles:'font:var(--ds-font-body-small, normal 400 11px/16px ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Ubuntu, "Helvetica Neue", sans-serif);margin-top:0'},eB={name:"ou8xsw",styles:"flex:0 0 auto"},eD=(0,i("9K4OG").css)("overflow:hidden;&:focus{box-shadow:inset 2px 0px 0px ",`var(--ds-border-focused, ${i("6fnsQ").B400})`,";background-color:",`var(--ds-background-neutral-subtle-hovered, ${i("6fnsQ").N30})`,";outline:none;}"),eU={"& > button:focus":{boxShadow:`inset 2px 0px 0px var(--ds-border-focused, ${i("6fnsQ").B400});`,backgroundColor:`var(--ds-background-neutral-subtle-hovered, ${i("6fnsQ").N30})`,outline:"none","&:active":{boxShadow:"none"}},"& > button:hover":{backgroundColor:"inherit",outline:"none"}},eK=(0,i("9K4OG").css)("background-color:",`var(--ds-background-neutral-subtle-hovered, ${i("6fnsQ").N30})`,";box-shadow:inset 2px 0px 0px ",`var(--ds-border-focused, ${i("6fnsQ").B400})`,";"),ej={name:"v9x70u",styles:"color:var(--ds-text-disabled, #080F214A)"},eF=(0,i("9K4OG").css)({display:"flex",alignItems:"center",gap:"var(--ds-space-050, 4px)"}),eG=t(F).memo(({label:e})=>(0,i("9K4OG").jsx)(i("158AJ").default,null)),eH=()=>{},ez=t(F).memo(e=>{let{customRenderItem:t,isSelected:o,itemIsDisabled:n,ariaLabel:r,itemsLength:a,customItemRef:s,insertSelectedItem:l,itemIndex:d}=e,c=(0,F.useMemo)(()=>[eD,o&&!n&&eK,n&&ej],[o,n]);return(0,i("9K4OG").jsx)("div",{"aria-selected":o,role:"option","aria-label":r,"aria-setsize":a,"aria-posinset":(0,et.expValEquals)("platform_editor_fix_a11y_aria_posinset_0","isEnabled",!0)?d+1:d,tabIndex:0,css:c,className:`ak-typeahead-item ${o?"typeahead-selected-item":""}`,ref:s},(0,i("9K4OG").jsx)("div",{"aria-hidden":!0},(0,i("9K4OG").jsx)(t,{onClick:l,isSelected:!1,onHover:eH})))}),eV=t(F).memo(({item:e,itemsLength:o,selectedIndex:n,onItemClick:r,itemIndex:a,ariaLabel:s,moreElementsInQuickInsertViewEnabled:l,api:d,firstOnlineSupportedIndex:c})=>{let{connectivityMode:u}=(0,i("eiA8Z").useSharedPluginStateWithSelector)(d,["connectivity"],e=>({connectivityMode:e.connectivityState?.mode})),f=(0,i("91bcx").isOfflineMode)(u)&&(e?.isDisabledOffline??!1),h=(0,i("91bcx").isOfflineMode)(u)&&a===c&&-1===n,m=!1;m=void 0===u?a===n||-1===n&&0===a:a===n||-1===n&&(0===a||h)&&!f;let g=(0,i("8C5kA").default)(),T=e.description?`${e.description}.`:"",E=e.keyshortcut?` ${g.formatMessage(i("6h7hA").typeAheadListMessages.shortcutLabel)} ${e.keyshortcut}.`:"",b=`typeahead-item-description-${a}`,{icon:S,title:y,render:_}=e,C=(0,F.useMemo)(()=>(0,i("9K4OG").jsx)("div",{css:[ex,l&&eN]},S?S():(0,i("9K4OG").jsx)(eG,{label:y})),[S,y,l]),I=(0,F.useCallback)(()=>{f||r(i("lOELb").SelectItemMode.SELECTED,a)},[r,a,f]),O=t(F).useRef(null),k=t(F).useRef(null),v=n===a&&!h,x=(0,F.useMemo)(()=>[eU,m&&!f&&eK],[m,f]);return((0,F.useLayoutEffect)(()=>{v&&O?.current?.focus()},[O,v]),(0,F.useLayoutEffect)(()=>{v&&k?.current?.focus()},[k,v]),_)?(0,i("9K4OG").jsx)(ez,{itemIsDisabled:f,customRenderItem:_,isSelected:m,ariaLabel:s,itemsLength:o,customItemRef:O,insertSelectedItem:I,itemIndex:a}):(0,i("9K4OG").jsx)("span",{css:x},(T||E)&&(0,i("9K4OG").jsx)(i("6F6hl").default,{id:b},T," ",E),(0,i("9K4OG").jsx)(i("56M4r").default,{onClick:I,iconBefore:C,isSelected:m,"aria-selected":m,"aria-label":y,"aria-describedby":T||E?b:void 0,"aria-setsize":o,"aria-posinset":(0,et.expValEquals)("platform_editor_fix_a11y_aria_posinset_0","isEnabled",!0)?a+1:a,role:"option",ref:k,isDisabled:f,css:x},(0,i("9K4OG").jsx)("div",{"aria-hidden":!0},(0,i("9K4OG").jsx)("div",{css:[eP]},(0,i("9K4OG").jsx)("div",{css:eA},(0,i("9K4OG").jsx)("div",{css:[eM,l&&eR,f&&ej,e.lozenge&&(0,p.editorExperiment)("platform_synced_block",!0)&&eF]},e.title,(0,p.editorExperiment)("platform_synced_block",!0)&&e.lozenge),(0,i("9K4OG").jsx)("div",{css:eB},e.keyshortcut&&(0,i("9K4OG").jsx)("div",{css:i("6f5RK").shortcutStyle},e.keyshortcut))),(0,i("9K4OG").jsx)("div",{css:[ew,l&&eL,f&&ej]},e.description)))))}),eW=(0,i("9K4OG").css)({button:{padding:"var(--ds-space-100, 8px) var(--ds-space-150, 12px)"}}),eq=t(F).memo(({numberOfResults:e})=>{let t=(0,i("8C5kA").default)();return(0,i("9K4OG").jsx)(i("5KVL8").AssistiveText,{assistiveText:t.formatMessage(i("6h7hA").typeAheadListMessages.searchResultsLabel,{itemsLength:e}),isInFocus:!0,id:D+"__popup"})}),eX=t(F).memo(({items:e,selectedIndex:t,editorView:o,onItemClick:n,intl:r,fitHeight:a,decorationElement:s,triggerHandler:l,moreElementsInQuickInsertViewEnabled:c,api:p,showMoreOptionsButton:u,onMoreOptionsClicked:h})=>{let m=(0,F.useRef)(),g=(0,F.useRef)(null),T=(0,F.useRef)({overscanStartIndex:0,overscanStopIndex:0,startIndex:0,stopIndex:0}),E=u?Math.max(e.length-1,0):e.length,b=64*E,[S,y]=(0,F.useState)(Math.min(b,a)),[_,O]=(0,F.useState)(new(0,eC.CellMeasurerCache)({fixedWidth:!0,defaultHeight:64})),k=(0,F.useCallback)(e=>{T.current=e},[]),v=(0,F.useMemo)(()=>({onItemClick:n}),[n]),x=e=>["ArrowDown","ArrowUp","Tab","Enter"].includes(e.key),N=(0,F.useCallback)(()=>{f(-1,p)(o.state,o.dispatch),m.current.scrollToRow(0),s?.querySelector("[role='combobox']")?.focus()},[o,m,s,p]),A=(0,F.useMemo)(()=>C({editorView:o,direction:"next",api:p}),[o,p]),P=(0,F.useMemo)(()=>C({editorView:o,direction:"previous",api:p}),[o,p]),M=T.current.startIndex,R=T.current.stopIndex,w=(0,F.useCallback)(({scrollUpdateWasRequested:e})=>{e&&requestAnimationFrame(()=>{requestAnimationFrame(()=>{let e=u&&t===E;t>=M&&t<=R||e||-1===t?-1===t&&m.current.scrollToRow(0):m.current.scrollToRow(t)})})},[t,M,R,E,u]),L=(e,n)=>{e.preventDefault(),e.stopPropagation(),t!==n&&f(n,p)(o.state,o.dispatch)};(0,F.useLayoutEffect)(()=>{if(!m.current)return;let e=u&&t===E;t>=M&&t<=R||e||-1===t?-1===t&&m.current.scrollToRow(0):m.current.scrollToRow(t)},[t,M,R,E,u]),(0,F.useLayoutEffect)(()=>{O(new(0,eC.CellMeasurerCache)({fixedWidth:!0,defaultHeight:64})),requestAnimationFrame(()=>{g.current?.firstChild&&g.current.firstChild.scrollTo(0,0)})},[e]),(0,F.useLayoutEffect)(()=>{y(Math.min((u?e.slice(0,-1):e).reduce((e,t,o)=>e+_.rowHeight({index:o}),0),a))},[e,_,a,u]),(0,F.useLayoutEffect)(()=>{if(!g.current)return;let{current:e}=g,o=e=>{if(x(e))switch(e.key){case"ArrowDown":A(),e.preventDefault(),e.stopPropagation();break;case"ArrowUp":P(),e.preventDefault(),e.stopPropagation();break;case"Tab":n(i("lOELb").SelectItemMode.TAB,t,i("d925B").INPUT_METHOD.KEYBOARD),e.preventDefault();break;case"Enter":e.isComposing&&(229===e.which||229===e.keyCode)||(n(e.shiftKey?i("lOELb").SelectItemMode.SHIFT_ENTER:i("lOELb").SelectItemMode.ENTER,t,i("d925B").INPUT_METHOD.KEYBOARD),e.preventDefault());break;default:e.preventDefault()}else N()};return e?.addEventListener("keydown",o),()=>{e?.removeEventListener("keydown",o)}},[o.state,N,A,P,t,n,E]);let B=(0,F.useMemo)(()=>e.findIndex(e=>!0!==e.isDisabledOffline),[e]),U=l?.getMoreOptionsButtonConfig?.(r),K=I(l?.trigger,r).popupAriaLabel;if(!Array.isArray(e))return null;let j=s.querySelector("[role='combobox']")?.getAttribute("aria-controls")||D,G=(0,i("9K4OG").jsx)(i("gdv5Z").default,{paddingBlock:"space.150",paddingInline:"space.250"},(0,i("9K4OG").jsx)(i("iXCQx").default,{align:"center",as:"p"},r.formatMessage(i("6h7hA").typeAheadListMessages.emptySearchResults)),(0,i("9K4OG").jsx)(i("iXCQx").default,{align:"center",as:"p"},r.formatMessage(i("6h7hA").typeAheadListMessages.emptySearchResultsSuggestion,{buttonName:(0,i("9K4OG").jsx)(i("iXCQx").default,{weight:"medium"},r.formatMessage(i("4HWgE").toolbarInsertBlockMessages.viewMore))}))),H=(0,i("9K4OG").jsx)(eI.List,{rowRenderer:({index:o,key:n,style:a,parent:s,isScrolling:d,isVisible:u})=>{let f=e[o];return(0,i("9K4OG").jsx)(eC.CellMeasurer,{key:n,cache:_,parent:s,columnIndex:0,rowIndex:o},({measure:n})=>(0,i("9K4OG").jsx)(eO,{measure:n,index:o,style:a,isVisible:u,isScrolling:d,onMouseMove:e=>L(e,o)},(0,i("9K4OG").jsx)(eV,{key:e[o].title,item:f,firstOnlineSupportedIndex:B,itemsLength:E,itemIndex:o,selectedIndex:t,onItemClick:(e,t)=>{v.onItemClick(e,t,i("d925B").INPUT_METHOD.MOUSE)},ariaLabel:I(l?.trigger,r,f).listItemAriaLabel,moreElementsInQuickInsertViewEnabled:c,api:p})))},ref:m,rowCount:E,rowHeight:_.rowHeight,onRowsRendered:k,width:320,onScroll:w,height:S,overscanRowCount:3,"aria-label":I(void 0,r).popupAriaLabel,containerRole:"presentation",role:"listbox",css:[(0,i("9K4OG").css)({button:{padding:"var(--ds-space-150, 12px) var(--ds-space-150, 12px) 11px","span:last-child span:last-child":{whiteSpace:"normal"}}}),c&&eW]});return(0,i("9K4OG").jsx)(i("2SlZp").default,{"aria-label":K,"aria-relevant":"additions removals"},(0,i("9K4OG").jsx)("div",{id:j,ref:g},!u||E?H:G,u&&U&&(0,i("9K4OG").jsx)(ev,{title:U.title,ariaLabel:U.ariaLabel,onClick:()=>{h&&h(),p?.core.actions.execute(({tr:e})=>(d(e),U?.onClick({tr:e}),e))},isFocused:t===E,iconBefore:U.iconBefore}),(0,i("9K4OG").jsx)(eq,{numberOfResults:E.toString()})))}),e$=(0,i("gmMgo").default)(eX);e$.displayName="TypeAheadList";let eY=(0,i("9K4OG").css)({background:`var(--ds-surface-overlay, ${i("6fnsQ").N0})`,borderRadius:"var(--ds-radius-small, 3px)",boxShadow:`var(--ds-shadow-overlay, 0 0 1px ${i("6fnsQ").N60A}, 0 4px 8px -2px ${i("6fnsQ").N50A})`,padding:"var(--ds-space-050, 4px) 0",width:"320px",maxHeight:"380px",overflowY:"auto",MsOverflowStyle:"-ms-autohiding-scrollbar",position:"relative"}),eJ=(0,i("9K4OG").css)({maxHeight:"480px"}),eZ={name:"1fttcpj",styles:"display:flex;flex-direction:column"},eQ=({state:e,triggerHandler:t})=>t?.getHighlight?t.getHighlight(e):null,e0=[0,8],e1=t(F).memo(e=>{let{editorView:o,triggerHandler:n,anchorElement:r,popupsMountPoint:a,popupsBoundariesElement:s,popupsScrollableElement:l,items:d,errorInfo:c,selectedIndex:u,onItemInsert:f,isEmptyQuery:h,cancel:m,api:T,showMoreOptionsButton:E}=e,b=(0,F.useRef)(null),{moreElementsInQuickInsertView:S}=(0,i("eiA8Z").useSharedPluginStateWithSelector)(T,["featureFlags"],e=>({moreElementsInQuickInsertView:e.featureFlagsState?.moreElementsInQuickInsertView})),y=S&&n.id===i("lOELb").TypeAheadAvailableNodes.QUICK_INSERT,_=(0,p.editorExperiment)("platform_editor_controls","variant1"),C=(0,F.useMemo)(()=>y?480:380,[y]),I=(0,F.useRef)({inputMethod:null,closeAction:null,invocationMethod:g(o.state)?.inputMethod}),O=(0,F.useMemo)(()=>performance.now(),[d,h,n]);(0,F.useEffect)(()=>{if(!T?.analytics?.actions?.fireAnalyticsEvent)return;let e=performance.now()-O;i("c6GJD").default.getExperimentValue("cc_fd_db_quick_insert_options","isEnabled",!1),T?.analytics?.actions?.fireAnalyticsEvent({action:i("d925B").ACTION.RENDERED,actionSubject:i("d925B").ACTION_SUBJECT.TYPEAHEAD,eventType:i("d925B").EVENT_TYPE.OPERATIONAL,attributes:{time:e,items:d.length,initial:h}})},[O,d,h,n,T]),(0,F.useEffect)(()=>{T?.analytics?.actions?.fireAnalyticsEvent&&T?.analytics?.actions?.fireAnalyticsEvent({action:i("d925B").ACTION.VIEWED,actionSubject:i("d925B").ACTION_SUBJECT.TYPEAHEAD_ITEM,eventType:i("d925B").EVENT_TYPE.OPERATIONAL,attributes:{index:u,items:d.length}})},[d,T,u,n]);let[k,v]=(0,F.useState)(C),x=(0,F.useMemo)(()=>E?k-53:k,[k,E]),N=(0,F.useCallback)(()=>{if(!r||!a)return;let{top:e,height:t}=r.getBoundingClientRect(),o=s||document.body,{height:n,top:i}=o.getBoundingClientRect(),l=e-(i-o.scrollTop),d=i+n-(e+t);return d>=C?v(C):v(Math.min(C,(d>=l?d:l)-24))},[r,C,s,a]),A=(0,i("2P8Ax").default)(N);(0,F.useLayoutEffect)(()=>{let e=l||(0,i("7YjFd").findOverflowScrollParent)(r);return N(),window.addEventListener("resize",A),e&&e.addEventListener("scroll",A),()=>{window.removeEventListener("resize",A),e&&e.removeEventListener("scroll",A)}},[r,l,A,N]),(0,F.useLayoutEffect)(()=>{let{removePrefixTriggerOnCancel:e}=g(o.state)||{},t=t=>{let{relatedTarget:o}=t;if(o instanceof HTMLElement&&o.closest&&(o.closest(`.${B}`)||o.closest(`[data-type-ahead="${L}"]`)))return;let n=window.getSelection()?.type==="Range",i=r.closest(".extension-editable-area");if(i){let e=!o;if(o instanceof HTMLElement&&(e=i.contains(o)),!n&&e)return}else if(!n)return;m({addPrefixTrigger:!_||!e,setSelectionAt:U.AFTER_TEXT_INSERTED,forceFocusOnEditor:!1})},{current:n}=b;return n?.addEventListener("focusout",t),()=>{n?.removeEventListener("focusout",t)}},[b,m,o.state,_,r]),(0,F.useLayoutEffect)(()=>{let{removePrefixTriggerOnCancel:e}=g(o.state)||{},t=t=>{"Escape"===t.key&&(I.current.inputMethod=i("d925B").INPUT_METHOD.KEYBOARD,m({addPrefixTrigger:!_||!e,setSelectionAt:U.AFTER_TEXT_INSERTED,forceFocusOnEditor:!0}))},{current:n}=b;return n?.addEventListener("keydown",t),()=>{n?.removeEventListener("keydown",t)}},[b,m,o.state,_]);let P=n?.openElementBrowserModal,M=(0,F.useCallback)(()=>{P&&(0,p.editorExperiment)("platform_editor_controls","variant1")&&n.id===i("lOELb").TypeAheadAvailableNodes.QUICK_INSERT&&(I.current={inputMethod:i("d925B").INPUT_METHOD.MOUSE,closeAction:i("d925B").ACTION.VIEW_MORE,invocationMethod:I.current.invocationMethod})},[P,n.id]);return(0,i("9K4OG").jsx)(i("jwWgu").default,{zIndex:i("aFUXX").akEditorFloatingDialogZIndex,target:r,mountTo:a,boundariesElement:s,scrollableElement:l,fitHeight:k,fitWidth:340,offset:e0,ariaLabel:null,preventOverflow:!0,onUnmount:()=>{u>-1&&(0,p.editorExperiment)("platform_editor_controls","variant1")&&(G(T,I.current.closeAction||i("d925B").ACTION.CANCELLED,!h,I.current.inputMethod||i("d925B").INPUT_METHOD.MOUSE,I.current.invocationMethod),I.current={inputMethod:null,closeAction:null,invocationMethod:null})}},(0,i("9K4OG").jsx)("div",{css:[eY,y&&eJ,E&&eZ],className:B,ref:b},c?(0,i("9K4OG").jsx)(e_,null):(0,i("9K4OG").jsx)(t(F).Fragment,null,(0,i("9K4OG").jsx)(eQ,{state:o.state,triggerHandler:n}),(0,i("9K4OG").jsx)(e$,{items:d,selectedIndex:u,onItemClick:(e,t,o)=>{(0,p.editorExperiment)("platform_editor_controls","variant1")&&(I.current={inputMethod:o||null,closeAction:i("d925B").ACTION.INSERTED,invocationMethod:I.current.invocationMethod}),f(e,t)},fitHeight:x,editorView:o,decorationElement:r,triggerHandler:n,moreElementsInQuickInsertViewEnabled:y,api:T,showMoreOptionsButton:E,onMoreOptionsClicked:M}))))});e1.displayName="TypeAheadPopup";let e2=t(F).memo(({editorView:e,popupMountRef:o,typeAheadState:n,selectedIndex:r,api:s})=>{let l=n.decorationSet.find().length>0,{triggerHandler:d,items:c,errorInfo:u,decorationElement:h,decorationSet:m,query:g}=n,[T,E,b]=q(d,e,c,s),S=t(F).useCallback(({index:t})=>{queueMicrotask(()=>{f(t,s)(e.state,e.dispatch)})},[e,s]),y=t(F).useCallback((e=i("lOELb").SelectItemMode.SELECTED,t)=>{queueMicrotask(()=>{T({mode:e,index:t,query:g})})},[T,g]),_=t(F).useCallback(({setSelectionAt:e,addPrefixTrigger:t,forceFocusOnEditor:o})=>{E({forceFocusOnEditor:o,setSelectionAt:e,text:t?`${d?.trigger}${g}`:g})},[d,E,g]);t(F).useEffect(()=>{if(!l||!g||" "!==g[g.length-1]||!b({mode:i("lOELb").SelectItemMode.SPACE,query:g.trim()}))return},[l,g,b]);let C=d?.openElementBrowserModal,I=!1;return((0,p.editorExperiment)("platform_editor_controls","variant1")&&(I=!!d?.getMoreOptionsButtonConfig),l&&d&&h instanceof HTMLElement&&(C||0!==c.length||u))?(0,a.jsx)(e1,{editorView:e,popupsMountPoint:o.current?.popupsMountPoint,popupsBoundariesElement:o.current?.popupsBoundariesElement,popupsScrollableElement:o.current?.popupsScrollableElement,anchorElement:h,triggerHandler:d,items:c,errorInfo:u,selectedIndex:r,setSelectedItem:S,onItemInsert:y,decorationSet:m,isEmptyQuery:!g,cancel:_,api:s,showMoreOptionsButton:I}):null});function e5({api:e,editorView:t,popupMountRef:o}){let{triggerHandler:n,items:r,errorInfo:s,decorationElement:l,decorationSet:d,query:c,selectedIndex:p}=(0,i("eiA8Z").useSharedPluginStateWithSelector)(e,["typeAhead"],e=>({triggerHandler:e.typeAheadState?.triggerHandler,items:e.typeAheadState?.items,errorInfo:e.typeAheadState?.errorInfo,decorationElement:e.typeAheadState?.decorationElement,decorationSet:e.typeAheadState?.decorationSet,query:e.typeAheadState?.query,selectedIndex:e.typeAheadState?.selectedIndex}));return void 0===r||void 0===d||void 0===s||void 0===l||void 0===c||void 0===p?null:(0,a.jsx)(e2,{editorView:t,popupMountRef:o,typeAheadState:{triggerHandler:n,items:r,errorInfo:s,decorationElement:l,decorationSet:d,query:c},selectedIndex:p,api:e})}let e9=e=>t=>o=>{let{triggerHandler:n,inputMethod:r,query:a,removePrefixTriggerOnCancel:s}=t;return M({triggerHandler:n,inputMethod:r,query:a,removePrefixTriggerOnCancel:s})({tr:o}),(0,i("dh538").fg)("platform_editor_controls_patch_analytics_3")||e?.attachAnalyticsEvent({action:i("d925B").ACTION.INVOKED,actionSubject:i("d925B").ACTION_SUBJECT.TYPEAHEAD,actionSubjectId:n.id,attributes:{inputMethod:r},eventType:i("d925B").EVENT_TYPE.UI})(o),!0},e8=(e,t)=>o=>{if(!e.current)return!1;let{current:n}=e,{tr:r}=n.state;return e9(t)(o)(r),n.dispatch(r),!0},e4=e=>t=>{if(!e.current)return!1;let{current:o}=e,{triggerHandler:n,contentItem:r,query:a,sourceListItem:s,mode:l}=t;return A(o)({handler:n,item:r,mode:l||i("lOELb").SelectItemMode.SELECTED,query:a,sourceListItem:s}),!0},e3=e=>t=>{if(!e.current)return null;let{current:o}=e;return S(t,o.state)},e6=e=>t=>{if(!e.current)return!1;let{current:o}=e,n=E(o.state)||"",{state:r}=o,i=r.tr;if(t.attachCommand&&t.attachCommand(r,e=>{i=e}),d(i),t.insertCurrentQueryAsRawText&&n&&n.length>0){let e=T(r);if(!e)return!1;let t=e.trigger.concat(n);i.replaceSelectionWith(r.schema.text(t))}return o.dispatch(i),o.hasFocus()||o.focus(),!0};e.exports.typeAheadPlugin=({api:e})=>{let t={current:null},o={current:null};return{name:"typeAhead",marks:()=>[{name:"typeAheadQuery",mark:i("lSP4W").typeAheadQuery}],pmPlugins:(n=[])=>[{name:"typeAhead",plugin:({dispatch:o,getIntl:r,nodeViewPortalProviderAPI:a})=>(function({reactDispatch:e,popupMountRef:t,typeAheadHandlers:o,getIntl:n,nodeViewPortalProviderAPI:r,api:a}){let{createDecorations:d,removeDecorations:c}=ec({intl:n(),nodeViewPortalProviderAPI:r,popupMountRef:t,api:a}),p=em({createDecorations:d,removeDecorations:c,typeAheadHandlers:o,popupMountRef:t});return new(0,i("1S4f7").SafePlugin)({key:l,state:{init:()=>({typeAheadHandlers:o,query:"",decorationSet:i("ftzrq").DecorationSet.empty,decorationElement:null,items:[],errorInfo:null,selectedIndex:-1,stats:null,inputMethod:null,removePrefixTriggerOnCancel:void 0}),apply(t,o,n,r){let i=eg(t),a=p(t,o,i);return o!==a&&e(l,a),a}},appendTransaction(e,t,o){let n=R(e,s.INSERT_RAW_QUERY);if(n){let e=n(o);if(e)return(0,i("dh538").fg)("platform_editor_ease_of_use_metrics")&&a?.metrics?.commands.startActiveSessionTimer()({tr:e}),e}},view:()=>({update(e){}}),props:{decorations:e=>l.getState(e)?.decorationSet,handleDOMEvents:{compositionend:(e,t)=>!1,click:(e,t)=>{let{target:o}=t;return!!(o instanceof HTMLElement&&(0,i("4vlwG").closest)(o,`[data-type-ahead=${L}]`))}}}})})({getIntl:r,popupMountRef:t,reactDispatch:o,typeAheadHandlers:n,nodeViewPortalProviderAPI:a,api:e})},{name:"typeAheadEditorViewRef",plugin:()=>new(0,i("1S4f7").SafePlugin)({view:e=>(o.current=e,{destroy(){o.current=null}})})},{name:"typeAheadInsertItem",plugin:w},{name:"typeAheadInputRule",plugin:({schema:e,featureFlags:t})=>(function(e,t,o){if(!t||0===t.length)return;let n=t.reduce((e,t)=>{let o=t.customRegex||t.trigger;if(!o)return e;let n=RegExp(`(^|[.!?\\s${i("14sLv").leafNodeReplacementCharacter}])(${o})$`);return e.push((0,i("l03WE").createRule)(n,(e,o)=>M({triggerHandler:t,inputMethod:i("d925B").INPUT_METHOD.KEYBOARD})({tr:e.tr}))),e},[]);return new(0,i("1S4f7").SafePlugin)((0,i("aIMBk").createPlugin)("type-ahead",n,{allowInsertTextOnDocument:!1}))})(0,n,0)}],getSharedState(e){if(!e)return{query:"",isOpen:!1,isAllowed:!1,currentHandler:void 0,decorationSet:i("ftzrq").DecorationSet.empty,decorationElement:null,triggerHandler:void 0,items:[],errorInfo:null,selectedIndex:0};let t=m(e),o=g(e);return{query:E(e)||"",currentHandler:T(e),isOpen:t,isAllowed:!t,decorationSet:o?.decorationSet??i("ftzrq").DecorationSet.empty,decorationElement:o?.decorationElement??null,triggerHandler:o?.triggerHandler,items:o?.items??[],errorInfo:o?.errorInfo??null,selectedIndex:o?.selectedIndex??0}},actions:{isOpen:m,isAllowed:b,open:e8(o,e?.analytics?.actions),openAtTransaction:e9(e?.analytics?.actions),findHandlerByTrigger:e3(o),insert:e4(o),close:e6(o)},contentComponent:({editorView:o,containerElement:n,popupsMountPoint:r,popupsBoundariesElement:i,popupsScrollableElement:s,wrapperElement:l})=>(t.current={popupsMountPoint:r||l||void 0,popupsBoundariesElement:i,popupsScrollableElement:s||n||void 0},o)?(0,a.jsx)(e5,{editorView:o,popupMountRef:t,api:e}):null,onEditorViewStateUpdated({originalTransaction:t,oldEditorState:o,newEditorState:n}){let r=g(o),a=g(n);if(!r||!a)return;let{triggerHandler:s}=r,{triggerHandler:d}=a,p=s!==d;if(s?.dismiss&&p){let e=t.getMeta(l),o=e&&"INSERT_RAW_QUERY"===e.action;s.dismiss({editorState:n,query:r.query,stats:(r.stats||new c).serialize(),wasItemInserted:o})}d?.onOpen&&p&&((0,i("dh538").fg)("platform_editor_ease_of_use_metrics")&&e?.metrics?.commands.handleIntentToStartEdit({shouldStartTimer:!1,shouldPersistActiveSession:!0}),d.onOpen(n));let u=m(o),f=m(n);d&&p?a.inputMethod===i("d925B").INPUT_METHOD.QUICK_INSERT&&Object.values(i("lOELb").TypeAheadAvailableNodes).includes(d.id)||((0,i("dh538").fg)("platform_editor_controls_patch_analytics_3")?e?.analytics?.actions?.fireAnalyticsEvent({action:i("d925B").ACTION.INVOKED,actionSubject:i("d925B").ACTION_SUBJECT.TYPEAHEAD,actionSubjectId:d.id||"not_set",attributes:{inputMethod:a.inputMethod||i("d925B").INPUT_METHOD.KEYBOARD},eventType:i("d925B").EVENT_TYPE.UI},void 0,{context:{selection:n.selection}}):e?.analytics?.actions?.fireAnalyticsEvent({action:i("d925B").ACTION.INVOKED,actionSubject:i("d925B").ACTION_SUBJECT.TYPEAHEAD,actionSubjectId:d.id||"not_set",attributes:{inputMethod:a.inputMethod||i("d925B").INPUT_METHOD.KEYBOARD},eventType:i("d925B").EVENT_TYPE.UI})):u&&!f&&(0,i("dh538").fg)("platform_editor_ease_of_use_metrics")&&e?.core.actions.execute(e?.metrics?.commands.startActiveSessionTimer())}}}}),a("cuprm",function(e,t){var o,n=((o={}).DELETING_RAW_QUERY="DELETING_RAW_QUERY",o.INSERTING_ITEM="INSERTING_ITEM",o);class r extends i("cO9ey").Step{invert(){return new r({stage:this.stage,query:this.query,trigger:this.trigger,selectedIndex:this.selectedIndex},!this.isInvertStep)}apply(e){return i("aXG5V").StepResult.ok(e)}merge(){return null}isInsertionStep(){return!this.isInvertStep}isUndoingStep(){return this.isInvertStep}map(){return new r({stage:this.stage,query:this.query,trigger:this.trigger,selectedIndex:this.selectedIndex},this.isInvertStep)}getMap(){return new(0,i("aXG5V").StepMap)([0,0,0])}toJSON(){return{stepType:"replace",from:0,to:0}}static fromJSON(){return new(0,i("aXG5V").ReplaceStep)(0,0,i("5SAOw").Slice.empty)}constructor({stage:e,query:t,trigger:o,selectedIndex:n},r=!1){super(),this.isInvertStep=void 0,this.selectedIndex=void 0,this.stage=void 0,this.query=void 0,this.trigger=void 0,this.isInvertStep=r,this.stage=e,this.query=t,this.trigger=o,this.selectedIndex=n}}i("cO9ey").Step.jsonID("atlaskit-insert-type-ahead",r),e.exports.InsertTypeAheadStages=n,e.exports.InsertTypeAheadStep=r}),a("5KVL8",function(e,o){var n=i("42omo"),r=i("jSnXV");let a={name:"v66mgv",styles:"border:0;clip:rect(0 0 0 0);height:1px;marginbottom:-1px;marginright:-1px;overflow:hidden;padding:0;position:absolute;whitespace:nowrap;width:1px"};e.exports.AssistiveText=({assistiveText:e="",isInFocus:o=!1,id:s="",statusDebounceMillis:l=1400})=>{let[d,c]=(0,n.useState)(!1),[p,u]=(0,n.useState)(!1),[f,h]=(0,n.useState)(!1),m=(0,n.useMemo)(()=>t(r)(()=>{let e=!o;c(e=>!e),u(!0),h(e)}),[o]);return(0,n.useEffect)(()=>{if(!p)return m(),()=>{m.cancel()}},[e,o,p,m]),(0,n.useEffect)(()=>{p&&(c(e=>!e),u(!0),h(!o))},[e,o,p]),(0,i("9K4OG").jsx)("div",{css:a},(0,i("9K4OG").jsx)("div",{"data-testid":s+"__status--A",id:s+"__status--A",role:"status","aria-atomic":"true","aria-live":"polite"},!f&&p&&d?e:""),(0,i("9K4OG").jsx)("div",{"data-testid":s+"__status--B",id:s+"__status--B",role:"status","aria-atomic":"true","aria-live":"polite"},f||!p||d?"":e))}}),a("7bDv1",function(e,t){var o=i("eGvGZ"),n=i("crVe8");Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=void 0;var r=o(i("fLNXX")),a=o(i("c2Q7G")),s=o(i("iyK4o")),l=o(i("4CXrK")),d=o(i("18f43")),c=o(i("JL40l")),p=o(i("l2SD1")),u=g(i("ktbPS")),f=g(i("42omo")),h=o(i("aCXDM"));function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,o=new WeakMap;return(m=function(e){return e?o:t})(e)}function g(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var o=m(t);if(o&&o.has(e))return o.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&({}).hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}return r.default=e,o&&o.set(e,r),r}function T(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(T=function(){return!!e})()}var E=e.exports.default=function(e){function t(){(0,a.default)(this,t);for(var e,o,n,r=arguments.length,i=Array(r),s=0;s<r;s++)i[s]=arguments[s];return o=t,n=[].concat(i),o=(0,d.default)(o),e=(0,l.default)(this,T()?Reflect.construct(o,n||[],(0,d.default)(this).constructor):o.apply(this,n)),(0,p.default)(e,"Grid",void 0),(0,p.default)(e,"_cellRenderer",function(t){var o=t.parent,n=t.rowIndex,r=t.style,i=t.isScrolling,a=t.isVisible,s=t.key,l=e.props.rowRenderer,d=Object.getOwnPropertyDescriptor(r,"width");return d&&d.writable&&(r.width="100%"),l({index:n,style:r,isScrolling:i,isVisible:a,key:s,parent:o})}),(0,p.default)(e,"_setRef",function(t){e.Grid=t}),(0,p.default)(e,"_onScroll",function(t){var o=t.clientHeight,n=t.scrollHeight,r=t.scrollTop;(0,e.props.onScroll)({clientHeight:o,scrollHeight:n,scrollTop:r})}),(0,p.default)(e,"_onSectionRendered",function(t){var o=t.rowOverscanStartIndex,n=t.rowOverscanStopIndex,r=t.rowStartIndex,i=t.rowStopIndex;(0,e.props.onRowsRendered)({overscanStartIndex:o,overscanStopIndex:n,startIndex:r,stopIndex:i})}),e}return(0,c.default)(t,e),(0,s.default)(t,[{key:"forceUpdateGrid",value:function(){this.Grid&&this.Grid.forceUpdate()}},{key:"getOffsetForRow",value:function(e){var t=e.alignment,o=e.index;return this.Grid?this.Grid.getOffsetForCell({alignment:t,rowIndex:o,columnIndex:0}).scrollTop:0}},{key:"invalidateCellSizeAfterRender",value:function(e){var t=e.columnIndex,o=e.rowIndex;this.Grid&&this.Grid.invalidateCellSizeAfterRender({rowIndex:o,columnIndex:t})}},{key:"measureAllRows",value:function(){this.Grid&&this.Grid.measureAllCells()}},{key:"recomputeGridSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.columnIndex,o=e.rowIndex;this.Grid&&this.Grid.recomputeGridSize({rowIndex:void 0===o?0:o,columnIndex:void 0===t?0:t})}},{key:"recomputeRowHeights",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.Grid&&this.Grid.recomputeGridSize({rowIndex:e,columnIndex:0})}},{key:"scrollToPosition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.Grid&&this.Grid.scrollToPosition({scrollTop:e})}},{key:"scrollToRow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.Grid&&this.Grid.scrollToCell({columnIndex:0,rowIndex:e})}},{key:"render",value:function(){var e=this.props,t=e.className,o=e.noRowsRenderer,n=e.scrollToIndex,i=e.width,a=(0,h.default)("ReactVirtualized__List",t);return f.createElement(u.default,(0,r.default)({},this.props,{autoContainerWidth:!0,cellRenderer:this._cellRenderer,className:a,columnWidth:i,columnCount:1,noContentRenderer:o,onScroll:this._onScroll,onSectionRendered:this._onSectionRendered,ref:this._setRef,scrollToRow:n}))}}])}(f.PureComponent);(0,p.default)(E,"defaultProps",{autoHeight:!1,estimatedRowSize:30,onScroll:function(){},noRowsRenderer:function(){return null},onRowsRendered:function(){},overscanIndicesGetter:u.accessibilityOverscanIndicesGetter,overscanRowCount:10,scrollToAlignment:"auto",scrollToIndex:-1,style:{}})}),a("ktbPS",function(e,t){var o=i("eGvGZ");Object.defineProperty(e.exports,"__esModule",{value:!0}),Object.defineProperty(e.exports,"Grid",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e.exports,"accessibilityOverscanIndicesGetter",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e.exports,"default",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e.exports,"defaultCellRangeRenderer",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e.exports,"defaultOverscanIndicesGetter",{enumerable:!0,get:function(){return s.default}});var n=o(i("4zfAq")),r=o(i("4rbRt")),a=o(i("hbetg")),s=o(i("1jCVK"))}),a("4zfAq",function(e,t){var o=i("eGvGZ");Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=e.exports.DEFAULT_SCROLLING_RESET_TIME_INTERVAL=void 0;var n=o(i("fLNXX")),r=o(i("crVe8")),a=o(i("c2Q7G")),s=o(i("iyK4o")),l=o(i("4CXrK")),d=o(i("18f43")),c=o(i("JL40l")),p=o(i("l2SD1")),u=I(i("42omo")),f=o(i("aCXDM")),h=o(i("1lm4p")),m=o(i("l3uqv")),g=o(i("1qRum")),T=I(i("1jCVK")),E=o(i("bjahi")),b=o(i("hbetg")),S=o(i("iYupH")),y=i("8EdHV"),_=i("c6sGd");function C(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,o=new WeakMap;return(C=function(e){return e?o:t})(e)}function I(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=i("crVe8")(e)&&"function"!=typeof e)return{default:e};var o=C(t);if(o&&o.has(e))return o.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&({}).hasOwnProperty.call(e,a)){var s=r?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,o&&o.set(e,n),n}function O(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,n)}return o}function k(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?O(Object(o),!0).forEach(function(t){(0,p.default)(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):O(Object(o)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}function v(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(v=function(){return!!e})()}var x=e.exports.DEFAULT_SCROLLING_RESET_TIME_INTERVAL=150,N={OBSERVED:"observed",REQUESTED:"requested"},A=function(e){function t(e){var o,n,i;return(0,a.default)(this,t),o=t,n=[e],o=(0,d.default)(o),i=(0,l.default)(this,v()?Reflect.construct(o,n||[],(0,d.default)(this).constructor):o.apply(this,n)),(0,p.default)(i,"_onGridRenderedMemoizer",(0,g.default)()),(0,p.default)(i,"_onScrollMemoizer",(0,g.default)(!1)),(0,p.default)(i,"_deferredInvalidateColumnIndex",null),(0,p.default)(i,"_deferredInvalidateRowIndex",null),(0,p.default)(i,"_recomputeScrollLeftFlag",!1),(0,p.default)(i,"_recomputeScrollTopFlag",!1),(0,p.default)(i,"_horizontalScrollBarSize",0),(0,p.default)(i,"_verticalScrollBarSize",0),(0,p.default)(i,"_scrollbarPresenceChanged",!1),(0,p.default)(i,"_scrollingContainer",void 0),(0,p.default)(i,"_childrenToDisplay",void 0),(0,p.default)(i,"_columnStartIndex",void 0),(0,p.default)(i,"_columnStopIndex",void 0),(0,p.default)(i,"_rowStartIndex",void 0),(0,p.default)(i,"_rowStopIndex",void 0),(0,p.default)(i,"_renderedColumnStartIndex",0),(0,p.default)(i,"_renderedColumnStopIndex",0),(0,p.default)(i,"_renderedRowStartIndex",0),(0,p.default)(i,"_renderedRowStopIndex",0),(0,p.default)(i,"_initialScrollTop",void 0),(0,p.default)(i,"_initialScrollLeft",void 0),(0,p.default)(i,"_disablePointerEventsTimeoutId",void 0),(0,p.default)(i,"_styleCache",{}),(0,p.default)(i,"_cellCache",{}),(0,p.default)(i,"_debounceScrollEndedCallback",function(){i._disablePointerEventsTimeoutId=null,i.setState({isScrolling:!1,needToResetStyleCache:!1})}),(0,p.default)(i,"_invokeOnGridRenderedHelper",function(){var e=i.props.onSectionRendered;i._onGridRenderedMemoizer({callback:e,indices:{columnOverscanStartIndex:i._columnStartIndex,columnOverscanStopIndex:i._columnStopIndex,columnStartIndex:i._renderedColumnStartIndex,columnStopIndex:i._renderedColumnStopIndex,rowOverscanStartIndex:i._rowStartIndex,rowOverscanStopIndex:i._rowStopIndex,rowStartIndex:i._renderedRowStartIndex,rowStopIndex:i._renderedRowStopIndex}})}),(0,p.default)(i,"_setScrollingContainerRef",function(e){i._scrollingContainer=e,"function"==typeof i.props.elementRef?i.props.elementRef(e):"object"===(0,r.default)(i.props.elementRef)&&(i.props.elementRef.current=e)}),(0,p.default)(i,"_onScroll",function(e){e.target===i._scrollingContainer&&i.handleScrollEvent(e.target)}),i.state={instanceProps:{columnSizeAndPositionManager:new m.default({cellCount:e.columnCount,cellSizeGetter:function(o){return t._wrapSizeGetter(e.columnWidth)(o)},estimatedCellSize:t._getEstimatedColumnSize(e)}),rowSizeAndPositionManager:new m.default({cellCount:e.rowCount,cellSizeGetter:function(o){return t._wrapSizeGetter(e.rowHeight)(o)},estimatedCellSize:t._getEstimatedRowSize(e)}),prevColumnWidth:e.columnWidth,prevRowHeight:e.rowHeight,prevColumnCount:e.columnCount,prevRowCount:e.rowCount,prevIsScrolling:!0===e.isScrolling,prevScrollToColumn:e.scrollToColumn,prevScrollToRow:e.scrollToRow,scrollbarSize:0,scrollbarSizeMeasured:!1},isScrolling:!1,scrollDirectionHorizontal:T.SCROLL_DIRECTION_FORWARD,scrollDirectionVertical:T.SCROLL_DIRECTION_FORWARD,scrollLeft:0,scrollTop:0,scrollPositionChangeReason:null,needToResetStyleCache:!1},e.scrollToRow>0&&(i._initialScrollTop=i._getCalculatedScrollTop(e,i.state)),e.scrollToColumn>0&&(i._initialScrollLeft=i._getCalculatedScrollLeft(e,i.state)),i}return(0,c.default)(t,e),(0,s.default)(t,[{key:"getOffsetForCell",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.alignment,o=void 0===t?this.props.scrollToAlignment:t,n=e.columnIndex,r=void 0===n?this.props.scrollToColumn:n,i=e.rowIndex,a=void 0===i?this.props.scrollToRow:i,s=k(k({},this.props),{},{scrollToAlignment:o,scrollToColumn:r,scrollToRow:a});return{scrollLeft:this._getCalculatedScrollLeft(s),scrollTop:this._getCalculatedScrollTop(s)}}},{key:"getTotalRowsHeight",value:function(){return this.state.instanceProps.rowSizeAndPositionManager.getTotalSize()}},{key:"getTotalColumnsWidth",value:function(){return this.state.instanceProps.columnSizeAndPositionManager.getTotalSize()}},{key:"handleScrollEvent",value:function(e){var t=e.scrollLeft,o=e.scrollTop,n=void 0===o?0:o;if(!(n<0)){this._debounceScrollEnded();var r=this.props,i=r.autoHeight,a=r.autoWidth,s=r.height,l=r.width,d=this.state.instanceProps,c=d.scrollbarSize,p=d.rowSizeAndPositionManager.getTotalSize(),u=d.columnSizeAndPositionManager.getTotalSize(),f=Math.min(Math.max(0,u-l+c),void 0===t?0:t),h=Math.min(Math.max(0,p-s+c),n);if(this.state.scrollLeft!==f||this.state.scrollTop!==h){var m={isScrolling:!0,scrollDirectionHorizontal:f!==this.state.scrollLeft?f>this.state.scrollLeft?T.SCROLL_DIRECTION_FORWARD:T.SCROLL_DIRECTION_BACKWARD:this.state.scrollDirectionHorizontal,scrollDirectionVertical:h!==this.state.scrollTop?h>this.state.scrollTop?T.SCROLL_DIRECTION_FORWARD:T.SCROLL_DIRECTION_BACKWARD:this.state.scrollDirectionVertical,scrollPositionChangeReason:N.OBSERVED};i||(m.scrollTop=h),a||(m.scrollLeft=f),m.needToResetStyleCache=!1,this.setState(m)}this._invokeOnScrollMemoizer({scrollLeft:f,scrollTop:h,totalColumnsWidth:u,totalRowsHeight:p})}}},{key:"invalidateCellSizeAfterRender",value:function(e){var t=e.columnIndex,o=e.rowIndex;this._deferredInvalidateColumnIndex="number"==typeof this._deferredInvalidateColumnIndex?Math.min(this._deferredInvalidateColumnIndex,t):t,this._deferredInvalidateRowIndex="number"==typeof this._deferredInvalidateRowIndex?Math.min(this._deferredInvalidateRowIndex,o):o}},{key:"measureAllCells",value:function(){var e=this.props,t=e.columnCount,o=e.rowCount,n=this.state.instanceProps;n.columnSizeAndPositionManager.getSizeAndPositionOfCell(t-1),n.rowSizeAndPositionManager.getSizeAndPositionOfCell(o-1)}},{key:"recomputeGridSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.columnIndex,o=void 0===t?0:t,n=e.rowIndex,r=void 0===n?0:n,i=this.props,a=i.scrollToColumn,s=i.scrollToRow,l=this.state.instanceProps;l.columnSizeAndPositionManager.resetCell(o),l.rowSizeAndPositionManager.resetCell(r),this._recomputeScrollLeftFlag=a>=0&&(this.state.scrollDirectionHorizontal===T.SCROLL_DIRECTION_FORWARD?o<=a:o>=a),this._recomputeScrollTopFlag=s>=0&&(this.state.scrollDirectionVertical===T.SCROLL_DIRECTION_FORWARD?r<=s:r>=s),this._styleCache={},this._cellCache={},this.forceUpdate()}},{key:"scrollToCell",value:function(e){var t=e.columnIndex,o=e.rowIndex,n=this.props.columnCount,r=this.props;n>1&&void 0!==t&&this._updateScrollLeftForScrollToColumn(k(k({},r),{},{scrollToColumn:t})),void 0!==o&&this._updateScrollTopForScrollToRow(k(k({},r),{},{scrollToRow:o}))}},{key:"componentDidMount",value:function(){var e=this.props,o=e.getScrollbarSize,n=e.height,r=e.scrollLeft,i=e.scrollToColumn,a=e.scrollTop,s=e.scrollToRow,l=e.width,d=this.state.instanceProps;if(this._initialScrollTop=0,this._initialScrollLeft=0,this._handleInvalidatedGridSize(),d.scrollbarSizeMeasured||this.setState(function(e){var t=k(k({},e),{},{needToResetStyleCache:!1});return t.instanceProps.scrollbarSize=o(),t.instanceProps.scrollbarSizeMeasured=!0,t}),"number"==typeof r&&r>=0||"number"==typeof a&&a>=0){var c=t._getScrollToPositionStateUpdate({prevState:this.state,scrollLeft:r,scrollTop:a});c&&(c.needToResetStyleCache=!1,this.setState(c))}this._scrollingContainer&&(this._scrollingContainer.scrollLeft!==this.state.scrollLeft&&(this._scrollingContainer.scrollLeft=this.state.scrollLeft),this._scrollingContainer.scrollTop!==this.state.scrollTop&&(this._scrollingContainer.scrollTop=this.state.scrollTop));var p=n>0&&l>0;i>=0&&p&&this._updateScrollLeftForScrollToColumn(),s>=0&&p&&this._updateScrollTopForScrollToRow(),this._invokeOnGridRenderedHelper(),this._invokeOnScrollMemoizer({scrollLeft:r||0,scrollTop:a||0,totalColumnsWidth:d.columnSizeAndPositionManager.getTotalSize(),totalRowsHeight:d.rowSizeAndPositionManager.getTotalSize()}),this._maybeCallOnScrollbarPresenceChange()}},{key:"componentDidUpdate",value:function(e,t){var o=this,n=this.props,r=n.autoHeight,i=n.autoWidth,a=n.columnCount,s=n.height,l=n.rowCount,d=n.scrollToAlignment,c=n.scrollToColumn,p=n.scrollToRow,u=n.width,f=this.state,h=f.scrollLeft,m=f.scrollPositionChangeReason,g=f.scrollTop,T=f.instanceProps;this._handleInvalidatedGridSize();var b=a>0&&0===e.columnCount||l>0&&0===e.rowCount;m===N.REQUESTED&&(!i&&h>=0&&(h!==this._scrollingContainer.scrollLeft||b)&&(this._scrollingContainer.scrollLeft=h),!r&&g>=0&&(g!==this._scrollingContainer.scrollTop||b)&&(this._scrollingContainer.scrollTop=g));var S=(0===e.width||0===e.height)&&s>0&&u>0;if(this._recomputeScrollLeftFlag?(this._recomputeScrollLeftFlag=!1,this._updateScrollLeftForScrollToColumn(this.props)):(0,E.default)({cellSizeAndPositionManager:T.columnSizeAndPositionManager,previousCellsCount:e.columnCount,previousCellSize:e.columnWidth,previousScrollToAlignment:e.scrollToAlignment,previousScrollToIndex:e.scrollToColumn,previousSize:e.width,scrollOffset:h,scrollToAlignment:d,scrollToIndex:c,size:u,sizeJustIncreasedFromZero:S,updateScrollIndexCallback:function(){return o._updateScrollLeftForScrollToColumn(o.props)}}),this._recomputeScrollTopFlag?(this._recomputeScrollTopFlag=!1,this._updateScrollTopForScrollToRow(this.props)):(0,E.default)({cellSizeAndPositionManager:T.rowSizeAndPositionManager,previousCellsCount:e.rowCount,previousCellSize:e.rowHeight,previousScrollToAlignment:e.scrollToAlignment,previousScrollToIndex:e.scrollToRow,previousSize:e.height,scrollOffset:g,scrollToAlignment:d,scrollToIndex:p,size:s,sizeJustIncreasedFromZero:S,updateScrollIndexCallback:function(){return o._updateScrollTopForScrollToRow(o.props)}}),this._invokeOnGridRenderedHelper(),h!==t.scrollLeft||g!==t.scrollTop){var y=T.rowSizeAndPositionManager.getTotalSize(),_=T.columnSizeAndPositionManager.getTotalSize();this._invokeOnScrollMemoizer({scrollLeft:h,scrollTop:g,totalColumnsWidth:_,totalRowsHeight:y})}this._maybeCallOnScrollbarPresenceChange()}},{key:"componentWillUnmount",value:function(){this._disablePointerEventsTimeoutId&&(0,_.cancelAnimationTimeout)(this._disablePointerEventsTimeoutId)}},{key:"render",value:function(){var e=this.props,t=e.autoContainerWidth,o=e.autoHeight,r=e.autoWidth,i=e.className,a=e.containerProps,s=e.containerRole,l=e.containerStyle,d=e.height,c=e.id,p=e.noContentRenderer,h=e.role,m=e.style,g=e.tabIndex,T=e.width,E=this.state,b=E.instanceProps,S=E.needToResetStyleCache,y=this._isScrolling(),_={boxSizing:"border-box",direction:"ltr",height:o?"auto":d,position:"relative",width:r?"auto":T,WebkitOverflowScrolling:"touch",willChange:"transform"};S&&(this._styleCache={}),this.state.isScrolling||this._resetStyleCache(),this._calculateChildrenToRender(this.props,this.state);var C=b.columnSizeAndPositionManager.getTotalSize(),I=b.rowSizeAndPositionManager.getTotalSize(),O=I>d?b.scrollbarSize:0,v=C>T?b.scrollbarSize:0;(v!==this._horizontalScrollBarSize||O!==this._verticalScrollBarSize)&&(this._horizontalScrollBarSize=v,this._verticalScrollBarSize=O,this._scrollbarPresenceChanged=!0),_.overflowX=C+O<=T?"hidden":"auto",_.overflowY=I+v<=d?"hidden":"auto";var x=this._childrenToDisplay,N=0===x.length&&d>0&&T>0;return u.createElement("div",(0,n.default)({ref:this._setScrollingContainerRef},a,{"aria-label":this.props["aria-label"],"aria-readonly":this.props["aria-readonly"],className:(0,f.default)("ReactVirtualized__Grid",i),id:c,onScroll:this._onScroll,role:h,style:k(k({},_),m),tabIndex:g}),x.length>0&&u.createElement("div",{className:"ReactVirtualized__Grid__innerScrollContainer",role:s,style:k({width:t?"auto":C,height:I,maxWidth:C,maxHeight:I,overflow:"hidden",pointerEvents:y?"none":"",position:"relative"},l)},x),N&&p())}},{key:"_calculateChildrenToRender",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state,o=e.cellRenderer,n=e.cellRangeRenderer,r=e.columnCount,i=e.deferredMeasurementCache,a=e.height,s=e.overscanColumnCount,l=e.overscanIndicesGetter,d=e.overscanRowCount,c=e.rowCount,p=e.width,u=e.isScrollingOptOut,f=t.scrollDirectionHorizontal,h=t.scrollDirectionVertical,m=t.instanceProps,g=this._initialScrollTop>0?this._initialScrollTop:t.scrollTop,T=this._initialScrollLeft>0?this._initialScrollLeft:t.scrollLeft,E=this._isScrolling(e,t);if(this._childrenToDisplay=[],a>0&&p>0){var b=m.columnSizeAndPositionManager.getVisibleCellRange({containerSize:p,offset:T}),S=m.rowSizeAndPositionManager.getVisibleCellRange({containerSize:a,offset:g}),y=m.columnSizeAndPositionManager.getOffsetAdjustment({containerSize:p,offset:T}),_=m.rowSizeAndPositionManager.getOffsetAdjustment({containerSize:a,offset:g});this._renderedColumnStartIndex=b.start,this._renderedColumnStopIndex=b.stop,this._renderedRowStartIndex=S.start,this._renderedRowStopIndex=S.stop;var C=l({direction:"horizontal",cellCount:r,overscanCellsCount:s,scrollDirection:f,startIndex:"number"==typeof b.start?b.start:0,stopIndex:"number"==typeof b.stop?b.stop:-1}),I=l({direction:"vertical",cellCount:c,overscanCellsCount:d,scrollDirection:h,startIndex:"number"==typeof S.start?S.start:0,stopIndex:"number"==typeof S.stop?S.stop:-1}),O=C.overscanStartIndex,k=C.overscanStopIndex,v=I.overscanStartIndex,x=I.overscanStopIndex;if(i){if(!i.hasFixedHeight()){for(var N=v;N<=x;N++)if(!i.has(N,0)){O=0,k=r-1;break}}if(!i.hasFixedWidth()){for(var A=O;A<=k;A++)if(!i.has(0,A)){v=0,x=c-1;break}}}this._childrenToDisplay=n({cellCache:this._cellCache,cellRenderer:o,columnSizeAndPositionManager:m.columnSizeAndPositionManager,columnStartIndex:O,columnStopIndex:k,deferredMeasurementCache:i,horizontalOffsetAdjustment:y,isScrolling:E,isScrollingOptOut:u,parent:this,rowSizeAndPositionManager:m.rowSizeAndPositionManager,rowStartIndex:v,rowStopIndex:x,scrollLeft:T,scrollTop:g,styleCache:this._styleCache,verticalOffsetAdjustment:_,visibleColumnIndices:b,visibleRowIndices:S}),this._columnStartIndex=O,this._columnStopIndex=k,this._rowStartIndex=v,this._rowStopIndex=x}}},{key:"_debounceScrollEnded",value:function(){var e=this.props.scrollingResetTimeInterval;this._disablePointerEventsTimeoutId&&(0,_.cancelAnimationTimeout)(this._disablePointerEventsTimeoutId),this._disablePointerEventsTimeoutId=(0,_.requestAnimationTimeout)(this._debounceScrollEndedCallback,e)}},{key:"_handleInvalidatedGridSize",value:function(){if("number"==typeof this._deferredInvalidateColumnIndex&&"number"==typeof this._deferredInvalidateRowIndex){var e=this._deferredInvalidateColumnIndex,t=this._deferredInvalidateRowIndex;this._deferredInvalidateColumnIndex=null,this._deferredInvalidateRowIndex=null,this.recomputeGridSize({columnIndex:e,rowIndex:t})}}},{key:"_invokeOnScrollMemoizer",value:function(e){var t=this,o=e.scrollLeft,n=e.scrollTop,r=e.totalColumnsWidth,i=e.totalRowsHeight;this._onScrollMemoizer({callback:function(e){var o=e.scrollLeft,n=e.scrollTop,a=t.props,s=a.height;(0,a.onScroll)({clientHeight:s,clientWidth:a.width,scrollHeight:i,scrollLeft:o,scrollTop:n,scrollWidth:r})},indices:{scrollLeft:o,scrollTop:n}})}},{key:"_isScrolling",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state;return Object.hasOwnProperty.call(e,"isScrolling")?!!e.isScrolling:!!t.isScrolling}},{key:"_maybeCallOnScrollbarPresenceChange",value:function(){if(this._scrollbarPresenceChanged){var e=this.props.onScrollbarPresenceChange;this._scrollbarPresenceChanged=!1,e({horizontal:this._horizontalScrollBarSize>0,size:this.state.instanceProps.scrollbarSize,vertical:this._verticalScrollBarSize>0})}}},{key:"scrollToPosition",value:function(e){var o=e.scrollLeft,n=e.scrollTop,r=t._getScrollToPositionStateUpdate({prevState:this.state,scrollLeft:o,scrollTop:n});r&&(r.needToResetStyleCache=!1,this.setState(r))}},{key:"_getCalculatedScrollLeft",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state;return t._getCalculatedScrollLeft(e,o)}},{key:"_updateScrollLeftForScrollToColumn",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state,n=t._getScrollLeftForScrollToColumnStateUpdate(e,o);n&&(n.needToResetStyleCache=!1,this.setState(n))}},{key:"_getCalculatedScrollTop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state;return t._getCalculatedScrollTop(e,o)}},{key:"_resetStyleCache",value:function(){var e=this._styleCache,t=this._cellCache,o=this.props.isScrollingOptOut;this._cellCache={},this._styleCache={};for(var n=this._rowStartIndex;n<=this._rowStopIndex;n++)for(var r=this._columnStartIndex;r<=this._columnStopIndex;r++){var i="".concat(n,"-").concat(r);this._styleCache[i]=e[i],o&&(this._cellCache[i]=t[i])}}},{key:"_updateScrollTopForScrollToRow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state,n=t._getScrollTopForScrollToRowStateUpdate(e,o);n&&(n.needToResetStyleCache=!1,this.setState(n))}}],[{key:"getDerivedStateFromProps",value:function(e,o){var n,r,i={};0===e.columnCount&&0!==o.scrollLeft||0===e.rowCount&&0!==o.scrollTop?(i.scrollLeft=0,i.scrollTop=0):(e.scrollLeft!==o.scrollLeft&&e.scrollToColumn<0||e.scrollTop!==o.scrollTop&&e.scrollToRow<0)&&Object.assign(i,t._getScrollToPositionStateUpdate({prevState:o,scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}));var a=o.instanceProps;return i.needToResetStyleCache=!1,(e.columnWidth!==a.prevColumnWidth||e.rowHeight!==a.prevRowHeight)&&(i.needToResetStyleCache=!0),a.columnSizeAndPositionManager.configure({cellCount:e.columnCount,estimatedCellSize:t._getEstimatedColumnSize(e),cellSizeGetter:t._wrapSizeGetter(e.columnWidth)}),a.rowSizeAndPositionManager.configure({cellCount:e.rowCount,estimatedCellSize:t._getEstimatedRowSize(e),cellSizeGetter:t._wrapSizeGetter(e.rowHeight)}),(0===a.prevColumnCount||0===a.prevRowCount)&&(a.prevColumnCount=0,a.prevRowCount=0),e.autoHeight&&!1===e.isScrolling&&!0===a.prevIsScrolling&&Object.assign(i,{isScrolling:!1}),(0,h.default)({cellCount:a.prevColumnCount,cellSize:"number"==typeof a.prevColumnWidth?a.prevColumnWidth:null,computeMetadataCallback:function(){return a.columnSizeAndPositionManager.resetCell(0)},computeMetadataCallbackProps:e,nextCellsCount:e.columnCount,nextCellSize:"number"==typeof e.columnWidth?e.columnWidth:null,nextScrollToIndex:e.scrollToColumn,scrollToIndex:a.prevScrollToColumn,updateScrollOffsetForScrollToIndex:function(){n=t._getScrollLeftForScrollToColumnStateUpdate(e,o)}}),(0,h.default)({cellCount:a.prevRowCount,cellSize:"number"==typeof a.prevRowHeight?a.prevRowHeight:null,computeMetadataCallback:function(){return a.rowSizeAndPositionManager.resetCell(0)},computeMetadataCallbackProps:e,nextCellsCount:e.rowCount,nextCellSize:"number"==typeof e.rowHeight?e.rowHeight:null,nextScrollToIndex:e.scrollToRow,scrollToIndex:a.prevScrollToRow,updateScrollOffsetForScrollToIndex:function(){r=t._getScrollTopForScrollToRowStateUpdate(e,o)}}),a.prevColumnCount=e.columnCount,a.prevColumnWidth=e.columnWidth,a.prevIsScrolling=!0===e.isScrolling,a.prevRowCount=e.rowCount,a.prevRowHeight=e.rowHeight,a.prevScrollToColumn=e.scrollToColumn,a.prevScrollToRow=e.scrollToRow,a.scrollbarSize=e.getScrollbarSize(),void 0===a.scrollbarSize?(a.scrollbarSizeMeasured=!1,a.scrollbarSize=0):a.scrollbarSizeMeasured=!0,i.instanceProps=a,k(k(k({},i),n),r)}},{key:"_getEstimatedColumnSize",value:function(e){return"number"==typeof e.columnWidth?e.columnWidth:e.estimatedColumnSize}},{key:"_getEstimatedRowSize",value:function(e){return"number"==typeof e.rowHeight?e.rowHeight:e.estimatedRowSize}},{key:"_getScrollToPositionStateUpdate",value:function(e){var t=e.prevState,o=e.scrollLeft,n=e.scrollTop,r={scrollPositionChangeReason:N.REQUESTED};return("number"==typeof o&&o>=0&&(r.scrollDirectionHorizontal=o>t.scrollLeft?T.SCROLL_DIRECTION_FORWARD:T.SCROLL_DIRECTION_BACKWARD,r.scrollLeft=o),"number"==typeof n&&n>=0&&(r.scrollDirectionVertical=n>t.scrollTop?T.SCROLL_DIRECTION_FORWARD:T.SCROLL_DIRECTION_BACKWARD,r.scrollTop=n),"number"==typeof o&&o>=0&&o!==t.scrollLeft||"number"==typeof n&&n>=0&&n!==t.scrollTop)?r:{}}},{key:"_wrapSizeGetter",value:function(e){return"function"==typeof e?e:function(){return e}}},{key:"_getCalculatedScrollLeft",value:function(e,t){var o=e.columnCount,n=e.height,r=e.scrollToAlignment,i=e.scrollToColumn,a=e.width,s=t.scrollLeft,l=t.instanceProps;if(o>0){var d=o-1,c=i<0?d:Math.min(d,i),p=l.rowSizeAndPositionManager.getTotalSize(),u=l.scrollbarSizeMeasured&&p>n?l.scrollbarSize:0;return l.columnSizeAndPositionManager.getUpdatedOffsetForIndex({align:r,containerSize:a-u,currentOffset:s,targetIndex:c})}return 0}},{key:"_getScrollLeftForScrollToColumnStateUpdate",value:function(e,o){var n=o.scrollLeft,r=t._getCalculatedScrollLeft(e,o);return"number"==typeof r&&r>=0&&n!==r?t._getScrollToPositionStateUpdate({prevState:o,scrollLeft:r,scrollTop:-1}):{}}},{key:"_getCalculatedScrollTop",value:function(e,t){var o=e.height,n=e.rowCount,r=e.scrollToAlignment,i=e.scrollToRow,a=e.width,s=t.scrollTop,l=t.instanceProps;if(n>0){var d=n-1,c=i<0?d:Math.min(d,i),p=l.columnSizeAndPositionManager.getTotalSize(),u=l.scrollbarSizeMeasured&&p>a?l.scrollbarSize:0;return l.rowSizeAndPositionManager.getUpdatedOffsetForIndex({align:r,containerSize:o-u,currentOffset:s,targetIndex:c})}return 0}},{key:"_getScrollTopForScrollToRowStateUpdate",value:function(e,o){var n=o.scrollTop,r=t._getCalculatedScrollTop(e,o);return"number"==typeof r&&r>=0&&n!==r?t._getScrollToPositionStateUpdate({prevState:o,scrollLeft:-1,scrollTop:r}):{}}}])}(u.PureComponent);(0,p.default)(A,"defaultProps",{"aria-label":"grid","aria-readonly":!0,autoContainerWidth:!1,autoHeight:!1,autoWidth:!1,cellRangeRenderer:b.default,containerRole:"row",containerStyle:{},estimatedColumnSize:100,estimatedRowSize:30,getScrollbarSize:S.default,noContentRenderer:function(){return null},onScroll:function(){},onScrollbarPresenceChange:function(){},onSectionRendered:function(){},overscanColumnCount:0,overscanIndicesGetter:T.default,overscanRowCount:10,role:"grid",scrollingResetTimeInterval:x,scrollToAlignment:"auto",scrollToColumn:-1,scrollToRow:-1,style:{},tabIndex:0,isScrollingOptOut:!1}),(0,y.polyfill)(A),e.exports.default=A}),a("1lm4p",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){var t=e.cellCount,o=e.cellSize,n=e.computeMetadataCallback,r=e.computeMetadataCallbackProps,i=e.nextCellsCount,a=e.nextCellSize,s=e.nextScrollToIndex,l=e.scrollToIndex,d=e.updateScrollOffsetForScrollToIndex;(t!==i||("number"==typeof o||"number"==typeof a)&&o!==a)&&(n(r),l>=0&&l===s&&d())}}),a("l3uqv",function(e,t){var o=i("eGvGZ");Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=void 0;var n=o(i("gmDkm")),r=o(i("c2Q7G")),a=o(i("iyK4o")),s=o(i("l2SD1")),l=o(i("7UU7y")),d=i("9hl0i"),c=["maxScrollSize"];e.exports.default=(0,a.default)(function e(t){var o=t.maxScrollSize,i=void 0===o?(0,d.getMaxElementSize)():o,a=(0,n.default)(t,c);(0,r.default)(this,e),(0,s.default)(this,"_cellSizeAndPositionManager",void 0),(0,s.default)(this,"_maxScrollSize",void 0),this._cellSizeAndPositionManager=new l.default(a),this._maxScrollSize=i},[{key:"areOffsetsAdjusted",value:function(){return this._cellSizeAndPositionManager.getTotalSize()>this._maxScrollSize}},{key:"configure",value:function(e){this._cellSizeAndPositionManager.configure(e)}},{key:"getCellCount",value:function(){return this._cellSizeAndPositionManager.getCellCount()}},{key:"getEstimatedCellSize",value:function(){return this._cellSizeAndPositionManager.getEstimatedCellSize()}},{key:"getLastMeasuredIndex",value:function(){return this._cellSizeAndPositionManager.getLastMeasuredIndex()}},{key:"getOffsetAdjustment",value:function(e){var t=e.containerSize,o=e.offset,n=this._cellSizeAndPositionManager.getTotalSize(),r=this.getTotalSize();return Math.round(this._getOffsetPercentage({containerSize:t,offset:o,totalSize:r})*(r-n))}},{key:"getSizeAndPositionOfCell",value:function(e){return this._cellSizeAndPositionManager.getSizeAndPositionOfCell(e)}},{key:"getSizeAndPositionOfLastMeasuredCell",value:function(){return this._cellSizeAndPositionManager.getSizeAndPositionOfLastMeasuredCell()}},{key:"getTotalSize",value:function(){return Math.min(this._maxScrollSize,this._cellSizeAndPositionManager.getTotalSize())}},{key:"getUpdatedOffsetForIndex",value:function(e){var t=e.align,o=e.containerSize,n=e.currentOffset,r=e.targetIndex;n=this._safeOffsetToOffset({containerSize:o,offset:n});var i=this._cellSizeAndPositionManager.getUpdatedOffsetForIndex({align:void 0===t?"auto":t,containerSize:o,currentOffset:n,targetIndex:r});return this._offsetToSafeOffset({containerSize:o,offset:i})}},{key:"getVisibleCellRange",value:function(e){var t=e.containerSize,o=e.offset;return o=this._safeOffsetToOffset({containerSize:t,offset:o}),this._cellSizeAndPositionManager.getVisibleCellRange({containerSize:t,offset:o})}},{key:"resetCell",value:function(e){this._cellSizeAndPositionManager.resetCell(e)}},{key:"_getOffsetPercentage",value:function(e){var t=e.containerSize,o=e.offset,n=e.totalSize;return n<=t?0:o/(n-t)}},{key:"_offsetToSafeOffset",value:function(e){var t=e.containerSize,o=e.offset,n=this._cellSizeAndPositionManager.getTotalSize(),r=this.getTotalSize();return n===r?o:Math.round(this._getOffsetPercentage({containerSize:t,offset:o,totalSize:n})*(r-t))}},{key:"_safeOffsetToOffset",value:function(e){var t=e.containerSize,o=e.offset,n=this._cellSizeAndPositionManager.getTotalSize(),r=this.getTotalSize();return n===r?o:Math.round(this._getOffsetPercentage({containerSize:t,offset:o,totalSize:r})*(n-t))}}])}),a("gmDkm",function(e,t){var o=i("6Ahnn");e.exports=function(e,t){if(null==e)return{};var n,r,i=o(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&({}).propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i},e.exports.__esModule=!0,e.exports.default=e.exports}),a("7UU7y",function(e,t){var o=i("eGvGZ");Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=void 0;var n=o(i("c2Q7G")),r=o(i("iyK4o")),a=o(i("l2SD1"));e.exports.default=(0,r.default)(function e(t){var o=t.cellCount,r=t.cellSizeGetter,i=t.estimatedCellSize;(0,n.default)(this,e),(0,a.default)(this,"_cellSizeAndPositionData",{}),(0,a.default)(this,"_lastMeasuredIndex",-1),(0,a.default)(this,"_lastBatchedIndex",-1),(0,a.default)(this,"_cellCount",void 0),(0,a.default)(this,"_cellSizeGetter",void 0),(0,a.default)(this,"_estimatedCellSize",void 0),this._cellSizeGetter=r,this._cellCount=o,this._estimatedCellSize=i},[{key:"areOffsetsAdjusted",value:function(){return!1}},{key:"configure",value:function(e){var t=e.cellCount,o=e.estimatedCellSize,n=e.cellSizeGetter;this._cellCount=t,this._estimatedCellSize=o,this._cellSizeGetter=n}},{key:"getCellCount",value:function(){return this._cellCount}},{key:"getEstimatedCellSize",value:function(){return this._estimatedCellSize}},{key:"getLastMeasuredIndex",value:function(){return this._lastMeasuredIndex}},{key:"getOffsetAdjustment",value:function(){return 0}},{key:"getSizeAndPositionOfCell",value:function(e){if(e<0||e>=this._cellCount)throw Error("Requested index ".concat(e," is outside of range 0..").concat(this._cellCount));if(e>this._lastMeasuredIndex)for(var t=this.getSizeAndPositionOfLastMeasuredCell(),o=t.offset+t.size,n=this._lastMeasuredIndex+1;n<=e;n++){var r=this._cellSizeGetter({index:n});if(void 0===r||isNaN(r))throw Error("Invalid size returned for cell ".concat(n," of value ").concat(r));null===r?(this._cellSizeAndPositionData[n]={offset:o,size:0},this._lastBatchedIndex=e):(this._cellSizeAndPositionData[n]={offset:o,size:r},o+=r,this._lastMeasuredIndex=e)}return this._cellSizeAndPositionData[e]}},{key:"getSizeAndPositionOfLastMeasuredCell",value:function(){return this._lastMeasuredIndex>=0?this._cellSizeAndPositionData[this._lastMeasuredIndex]:{offset:0,size:0}}},{key:"getTotalSize",value:function(){var e=this.getSizeAndPositionOfLastMeasuredCell();return e.offset+e.size+(this._cellCount-this._lastMeasuredIndex-1)*this._estimatedCellSize}},{key:"getUpdatedOffsetForIndex",value:function(e){var t,o=e.align,n=e.containerSize,r=e.currentOffset,i=e.targetIndex;if(n<=0)return 0;var a=this.getSizeAndPositionOfCell(i),s=a.offset,l=s-n+a.size;switch(void 0===o?"auto":o){case"start":t=s;break;case"end":t=l;break;case"center":t=s-(n-a.size)/2;break;default:t=Math.max(l,Math.min(s,r))}return Math.max(0,Math.min(this.getTotalSize()-n,t))}},{key:"getVisibleCellRange",value:function(e){var t=e.containerSize,o=e.offset;if(0===this.getTotalSize())return{};var n=o+t,r=this._findNearestCell(o),i=this.getSizeAndPositionOfCell(r);o=i.offset+i.size;for(var a=r;o<n&&a<this._cellCount-1;)a++,o+=this.getSizeAndPositionOfCell(a).size;return{start:r,stop:a}}},{key:"resetCell",value:function(e){this._lastMeasuredIndex=Math.min(this._lastMeasuredIndex,e-1)}},{key:"_binarySearch",value:function(e,t,o){for(;t<=e;){var n=t+Math.floor((e-t)/2),r=this.getSizeAndPositionOfCell(n).offset;if(r===o)return n;r<o?t=n+1:r>o&&(e=n-1)}return t>0?t-1:0}},{key:"_exponentialSearch",value:function(e,t){for(var o=1;e<this._cellCount&&this.getSizeAndPositionOfCell(e).offset<t;)e+=o,o*=2;return this._binarySearch(Math.min(e,this._cellCount-1),Math.floor(e/2),t)}},{key:"_findNearestCell",value:function(e){if(isNaN(e))throw Error("Invalid offset ".concat(e," specified"));e=Math.max(0,e);var t=this.getSizeAndPositionOfLastMeasuredCell(),o=Math.max(0,this._lastMeasuredIndex);return t.offset>=e?this._binarySearch(o,0,e):this._exponentialSearch(o,e)}}])}),a("1qRum",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(){var e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],t={};return function(o){var n=o.callback,r=o.indices,i=Object.keys(r),a=!e||i.every(function(e){var t=r[e];return Array.isArray(t)?t.length>0:t>=0}),s=i.length!==Object.keys(t).length||i.some(function(e){var o=t[e],n=r[e];return Array.isArray(n)?o.join(",")!==n.join(","):o!==n});t=r,a&&s&&n(r)}}}),a("1jCVK",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.SCROLL_DIRECTION_VERTICAL=e.exports.SCROLL_DIRECTION_HORIZONTAL=e.exports.SCROLL_DIRECTION_FORWARD=e.exports.SCROLL_DIRECTION_BACKWARD=void 0,e.exports.default=function(e){var t=e.cellCount,n=e.overscanCellsCount,r=e.scrollDirection,i=e.startIndex,a=e.stopIndex;return r===o?{overscanStartIndex:Math.max(0,i),overscanStopIndex:Math.min(t-1,a+n)}:{overscanStartIndex:Math.max(0,i-n),overscanStopIndex:Math.min(t-1,a)}},e.exports.SCROLL_DIRECTION_BACKWARD=-1;var o=e.exports.SCROLL_DIRECTION_FORWARD=1;e.exports.SCROLL_DIRECTION_HORIZONTAL="horizontal",e.exports.SCROLL_DIRECTION_VERTICAL="vertical"}),a("bjahi",function(e,t){var o=i("eGvGZ");Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){var t=e.cellSize,o=e.cellSizeAndPositionManager,n=e.previousCellsCount,r=e.previousCellSize,i=e.previousScrollToAlignment,a=e.previousScrollToIndex,s=e.previousSize,l=e.scrollOffset,d=e.scrollToAlignment,c=e.scrollToIndex,p=e.size,u=e.sizeJustIncreasedFromZero,f=e.updateScrollIndexCallback,h=o.getCellCount(),m=c>=0&&c<h;m&&(p!==s||u||!r||"number"==typeof t&&t!==r||d!==i||c!==a)?f(c):!m&&h>0&&(p<s||h<n)&&l>o.getTotalSize()-p&&f(h-1)},o(i("l3uqv"))}),a("hbetg",function(e,t){var o=i("eGvGZ");Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){for(var t=e.cellCache,o=e.cellRenderer,r=e.columnSizeAndPositionManager,i=e.columnStartIndex,a=e.columnStopIndex,s=e.deferredMeasurementCache,l=e.horizontalOffsetAdjustment,d=e.isScrolling,c=e.isScrollingOptOut,p=e.parent,u=e.rowSizeAndPositionManager,f=e.rowStartIndex,h=e.rowStopIndex,m=e.styleCache,g=e.verticalOffsetAdjustment,T=e.visibleColumnIndices,E=e.visibleRowIndices,b=[],S=r.areOffsetsAdjusted()||u.areOffsetsAdjusted(),y=!d&&!S,_=f;_<=h;_++)for(var C=u.getSizeAndPositionOfCell(_),I=i;I<=a;I++){var O=r.getSizeAndPositionOfCell(I),k=I>=T.start&&I<=T.stop&&_>=E.start&&_<=E.stop,v="".concat(_,"-").concat(I),x=void 0;y&&m[v]?x=m[v]:s&&!s.has(_,I)?x={height:"auto",left:0,position:"absolute",top:0,width:"auto"}:(x={height:C.size,left:O.offset+l,position:"absolute",top:C.offset+g,width:O.size},m[v]=x);var N={columnIndex:I,isScrolling:d,isVisible:k,key:v,parent:p,rowIndex:_,style:x},A=void 0;(c||d)&&!l&&!g?(t[v]||(t[v]=o(N)),A=t[v]):A=o(N),null!=A&&!1!==A&&(A.props.role||(A=n.default.cloneElement(A,{role:"gridcell"})),b.push(A))}return b};var n=o(i("42omo"))}),a("4rbRt",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.SCROLL_DIRECTION_VERTICAL=e.exports.SCROLL_DIRECTION_HORIZONTAL=e.exports.SCROLL_DIRECTION_FORWARD=e.exports.SCROLL_DIRECTION_BACKWARD=void 0,e.exports.default=function(e){var t=e.cellCount,n=e.overscanCellsCount,r=e.scrollDirection,i=e.startIndex,a=e.stopIndex;return(n=Math.max(1,n),r===o)?{overscanStartIndex:Math.max(0,i-1),overscanStopIndex:Math.min(t-1,a+n)}:{overscanStartIndex:Math.max(0,i-n),overscanStopIndex:Math.min(t-1,a+1)}},e.exports.SCROLL_DIRECTION_BACKWARD=-1;var o=e.exports.SCROLL_DIRECTION_FORWARD=1;e.exports.SCROLL_DIRECTION_HORIZONTAL="horizontal",e.exports.SCROLL_DIRECTION_VERTICAL="vertical"}),a("807Mc",function(e,o){var n=i("42omo");e.exports.Shortcut=function({children:e}){return t(n).createElement("div",{className:(0,i("gMc0m").default)(["_2rkofajl _1wpzesu3 _ca0q1b66 _n3td1b66 _19bv1b66 _u5f31b66 _syazazsu _bfhki8nm _1ggkglyw","_1wyb1qpa"])},e)}}),a("88OoA",function(t,o){e(t.exports,"listPlugin",()=>i("5HHoF").listPlugin),i("5HHoF")}),a("5HHoF",function(e,o){var n,r=i("l998X");i("42omo");var a=i("3pLGZ"),s=i("dZ8uq");let l=e=>{let{selection:{$from:t,$to:o}}=e,n=(0,i("lnYUq").getListItemAttributes)(t),r=(0,i("lnYUq").getListItemAttributes)(o);return{itemIndexAtSelectionStart:n.itemIndex,itemIndexAtSelectionEnd:r.itemIndex,indentLevelAtSelectionStart:n.indentLevel,indentLevelAtSelectionEnd:r.indentLevel,itemsInSelection:d(e)}},d=e=>{let{from:t,to:o}=e.selection;if(t===o)return 1;let n=0,r=e.doc.cut(t,o);return r.content.nodesBetween(0,r.content.size,(e,t,o,r)=>{o&&(0,i("irKZA").isListItemNode)(o)&&!(0,i("irKZA").isListNode)(e)&&0===r&&n++}),n},c=({insertPosition:e,$target:t})=>{let o=t.pos+(t.nodeAfter?.nodeSize||0),n=t.posAtIndex(0,t.depth+1),r=t.doc.resolve(n).end();return r-n==0?new(0,i("aXG5V").ReplaceStep)(e,o,t.doc.slice(e,t.pos)):new(0,i("aXG5V").ReplaceAroundStep)(e,o,n,r,t.doc.slice(e,t.pos),0,!0)};var p=i("8m4tT");function u(e){let{bulletList:t}=e.type.schema.nodes;if(!t)return!1;let o=i("5SAOw").Fragment.from(t.createAndFill());return!(0,i("irKZA").isListItemNode)(e)&&e.type.validContent(o)}var f=((n={})[n.LEFT=1]="LEFT",n[n.RIGHT=-1]="RIGHT",n);let h=({tr:e,direction:t,forceListType:o})=>{let n={orderedList:0,bulletList:0},{doc:r,selection:{$from:a,$to:s},selection:l}=e,d=a.blockRange(s,u);if(!d)return n;let c=r.nodeAt(d.start),p=(0,i("irKZA").isListNode)(c)?d.start:0,f=(0,i("irKZA").isListNode)(c)?d.end:e.doc.content.size,h=[];if(r.nodesBetween(p,f,(n,a,s)=>{let l=r.resolve(a),{nodeBefore:d,nodeAfter:c}=l;if(!d||!c||!(0,i("irKZA").isListNode)(d)||!(0,i("irKZA").isListNode)(c))return;let u=(0,i("irKZA").isListItemNode)(s);if(!u&&d.type!==c.type&&!o)return;let f=l.index(),m=l.posAtIndex(f-1),g=l.posAtIndex(f),T=m>=p||d.type===o;if(o&&(T&&e.setNodeMarkup(m,o),e.setNodeMarkup(g,o)),u&&d.type!==c.type){let o=-1===t?c.type:d.type;e.setNodeMarkup(m,o)}T&&h.push(a)}),l.empty&&c&&(0,i("irKZA").isListNode)(c)){let e=r.resolve(d.start+c.nodeSize),{nodeBefore:t,nodeAfter:o}=e;t&&o&&(0,i("irKZA").isListNode)(t)&&(0,i("irKZA").isListNode)(o)&&o.type===t.type&&h.push(e.pos)}for(let t=h.length-1;t>=0;t--){let o=e.doc.nodeAt(h[t]),r=o?.type.name;if(r&&("orderedList"===r||"bulletList"===r)){let e=n[r]||0;n[r]=e+1}e.join(h[t])}return n};function m(e){let t=e.doc.nodeAt(e.pos),o=null;if((0,i("irKZA").isListNode)(t))o=e.pos;else{let t=(0,p.findParentNodeClosestToPos)(e,i("irKZA").isListNode);o=t&&t.pos}if(null==o)return null;let n=e.doc.nodeAt(o);return n?{node:n,pos:o}:null}function g(e){let t=e.doc.nodeAt(e.pos),o=(0,i("irKZA").isListItemNode)(t)?e:(0,p.findParentNodeClosestToPos)(e,i("irKZA").isListItemNode);if(!o||null===o.pos)return null;let n=e.doc.nodeAt(o.pos);return n?{node:n,pos:o.pos}:null}i("l9G9n");let T=e=>{let{doc:t}=e;if(e.pos+1>t.content.size)return null;if(0===e.depth)return t.resolve(e.pos+1);let o=t.nodeAt(e.pos),n=e.before(),r=t.nodeAt(n);if((0,i("irKZA").isListNode)(o)&&!(0,i("irKZA").isListItemNode)(r))return t.resolve(e.pos+1);let a=(0,p.findParentNodeClosestToPos)(e,i("irKZA").isListNode);return a?T(t.resolve(a.pos)):null},E=({tr:e,nextListNodeType:t})=>{let{selection:o,selection:{from:n,to:r}}=e,{codeBlock:a}=e.doc.type.schema.nodes,s=[];o instanceof i("ks2lK").TextSelection&&o.$cursor||o instanceof i("adhil").GapCursorSelection?s.push(n):e.doc.nodesBetween(n,r,(e,t)=>{if(!e.isLeaf&&(e.type!==a||0!==e.childCount))return!0;s.push(t)}),s.reduce((t,o)=>{let n=(0,p.findParentNodeClosestToPos)(e.doc.resolve(o),i("irKZA").isListNode);return n&&(t.find(e=>e.pos===n.pos&&e.start===n.start&&e.depth===n.depth)||t.push(n)),t},[]).forEach(o=>{e.setNodeMarkup(o.pos,t)})},b=({tr:e,nextListNodeType:t,nodeRange:o})=>{for(let n=o.endIndex-1;n>=o.startIndex;n--){let r=o.$from.posAtIndex(n,o.depth),a=e.doc.resolve(r+1),s=a.blockRange(a);if(!s)return;let l=(0,i("aXG5V").findWrapping)(s,t);if(!s||!l)return;e.wrap(s,l)}},S=e=>"paragraph"===e.parent.type.name,y=e=>{let t=e.node(-1);return(0,i("irKZA").isListItemNode)(e.parent)||(0,i("irKZA").isListNode)(e.parent)||(0,i("irKZA").isListItemNode)(t)},_=(e,t)=>{let o,{$from:n,$to:r}=t;if(t instanceof i("adhil").GapCursorSelection&&n.nodeAfter){let e=n.nodeAfter.nodeSize||1;o=n.blockRange(n.doc.resolve(n.pos+e))}else o=n.blockRange(r);return!!o&&!!(0,i("aXG5V").findWrapping)(o,e)},C=e=>{let{parent:t}=e.selection.$from,{listItem:o}=e.doc.type.schema.nodes;return e.selection instanceof i("adhil").GapCursorSelection?(0,i("irKZA").isListItemNode)(t):(0,p.hasParentNodeOfType)(o)(e.selection)&&(0,i("irKZA").isParagraphNode)(t)},I=e=>{let{tableCell:t,tableHeader:o}=e.doc.type.schema.nodes;return!!(0,p.findParentNodeOfType)([t,o])(e.selection)},O=e=>{let{$from:t}=e.selection,o=e.doc.resolve(t.pos-1),n=o?o.nodeBefore:null;return e.selection instanceof i("adhil").GapCursorSelection&&(n=t.nodeBefore),(0,i("irKZA").isListNode)(n)},k=e=>{let{selection:{from:t,to:o}}=e,n=null;return e.doc.nodesBetween(t,o,e=>((0,i("irKZA").isListNode)(e)&&(n=e),!n)),n},v=({selection:e})=>{let{$from:t,$to:o}=e,n=t.blockRange(o,i("irKZA").isListNode);return n||null},x=e=>{let t=e.depth;for(let o=e.depth;o>0;o--){let n=e.node(o);if((0,i("irKZA").isListNode)(n)&&(t=o),!(0,i("irKZA").isListItemNode)(n)&&!(0,i("irKZA").isListNode)(n))break}return t-1},N=(e,t)=>{let{from:o,to:n}=e.selection,r=[];return e.doc.nodesBetween(o,n,(i,a,s)=>!i.isText&&(!!["expand","layoutSection"].includes(i.type.name)&&(a<o||a>n)||void i.marks.forEach(o=>{if(!s?.type.allowsMarkType(o.type)||t&&!t.allowsMarkType(o.type)){let t=i.marks.filter(e=>e.type!==o.type),n=i.marks.filter(e=>e.type===o.type);r.push({node:i,marksRemoved:n}),e.setNodeMarkup(a>0?a:0,void 0,i.attrs,t)}}))),r},A=e=>{let{$from:t}=e.selection;return!(t.depth>1)||e.selection instanceof i("adhil").GapCursorSelection&&0===t.parentOffset||0===t.index(t.depth-1)},P=({tr:e,$next:t,$head:o})=>{if(o.parent.content.size<1)return(0,i("e7tBw").insertContentDeleteRange)(e,e=>e.doc.resolve(o.pos),[],[[o.pos-1,o.pos]]),!0;let n=o.pos,r=e.doc.nodeAt(t.pos-1),a=e.doc.nodeAt(t.pos);if(!r||!a)return!1;let s=a.firstChild;if(!s)return!1;let l=a.lastChild,d=s.firstChild,c=M(a)&&s.childCount<2&&t.nodeAfter,p=!M(a)&&l&&(0,i("irKZA").isListNode)(l),u=[],f=[];if(M(r)&&M(a)&&t.nodeAfter&&f.push([e.mapping.map(t.pos-1),e.mapping.map(t.pos+t.nodeAfter.nodeSize+1)]),p){let o=i("5SAOw").Fragment.from(l.content);u.push([o,e.mapping.map(t.pos)])}if(c||p){f.push([e.mapping.map(t.pos),e.mapping.map(t.pos+a.nodeSize-1)]);let r=i("5SAOw").Fragment.from(s.content);return u.push([r,n]),(0,i("e7tBw").insertContentDeleteRange)(e,e=>e.doc.resolve(o.pos),u,f),!0}if(a.childCount>1)return u.push([i("5SAOw").Fragment.from(s.content),n]),f.push([e.mapping.map(t.pos+1),e.mapping.map(t.pos+s.nodeSize+1)]),(0,i("e7tBw").insertContentDeleteRange)(e,e=>e.doc.resolve(o.pos),u,f),!0;if(d&&"hardBreak"===d.type.name){let o=d?d.nodeSize:0;f.push([e.mapping.map(t.pos+2),e.mapping.map(t.pos+2+o)])}else{u.push([i("5SAOw").Fragment.from(s.content),n]);let o=s.nodeSize;f.push([e.mapping.map(t.pos),e.mapping.map(t.pos+2+o)])}return(0,i("e7tBw").insertContentDeleteRange)(e,e=>e.doc.resolve(o.pos),u,f),!0},M=e=>1===e.childCount,R=({tr:e,$next:t,$head:o})=>{let n=t.parent;if(!n.firstChild||!n.lastChild)return!1;let r=t.before(),a=t.before(),s=t.after(),l=(0,i("irKZA").isListNode)(n.lastChild),d=o.pos,c=o.pos+1,p=n.firstChild.content,u=l?n.content.cut(n.firstChild.nodeSize,n.nodeSize-n.lastChild.nodeSize-2):n.content.cut(n.firstChild.nodeSize),f=n.lastChild.content;return(0,i("e7tBw").insertContentDeleteRange)(e,e=>e.doc.resolve(d),l?[[p,d],[u,c],[f,a-2]]:[[p,d],[u,c]],[[r,s]]),!0},w=({tr:e,$next:t,$head:o})=>{let n=t.parent,r=t.nodeAfter;if(!r||!r.lastChild)return!1;let a=r.firstChild;if(!a)return!1;let s=t.before(),l=t.pos,d=o.after(),c=t.after(),p=e.doc.resolve(t.pos+1).after(),u=(0,i("irKZA").isListNode)(r.lastChild),f=1===n.childCount&&!u,h=o.pos,m=t.pos,g=a.content,T=u?r.content.cut(a.nodeSize,r.nodeSize-r.lastChild.nodeSize-2):r.content.cut(a.nodeSize),E=r.lastChild.content;return(0,i("e7tBw").insertContentDeleteRange)(e,e=>e.doc.resolve(h),u?[[g,h],[T,d],[E,m]]:[[g,h],[T,d]],[f?[s,c]:[l,p]]),!0},L=({tr:e,$next:t,$head:o})=>{let n=t.parent,r=t.before(),a=t.after(),s=o.pos,l=n.content;return(0,i("e7tBw").insertContentDeleteRange)(e,e=>e.doc.resolve(s),[[l,s]],[[r,a]]),!0},B=({tr:e,$next:t,$head:o})=>{let n=t.parent,r=t.nodeAfter;if(!r)return!1;let a=t.before(),s=t.after(),l=o.end(-1),d=o.pos,c=r.content,p=n.content.cut(r.nodeSize);return(0,i("e7tBw").insertContentDeleteRange)(e,e=>e.doc.resolve(d),[[c,d],[p,l]],[[a,s]]),!0},D=(e,t)=>{let{$pos:o,foundNode:n}=e,r=t.parent,a=t.node(-1),s=y(t),l=S(t),d=a&&a.lastChild&&(a.lastChild===r||a.childCount>1&&a.child(a.childCount-2)===r&&(0,i("irKZA").isListNode)(a.lastChild)),c=y(o),p=S(o);if(!s&&l&&c)return[i("jbKei").LIST_TEXT_SCENARIOS.JOIN_LIST_ITEM_WITH_PARAGRAPH,P];if(!n||!s||!l||!d)return!1;if(!c&&p)return[i("jbKei").LIST_TEXT_SCENARIOS.JOIN_PARAGRAPH_WITH_LIST,L];if(!c)return!1;let u=o.nodeAfter,f=o.node(-1),h=t.node(-2),m=(0,i("irKZA").isListItemNode)(o.parent),g=(0,i("irKZA").isListItemNode)(u),T=u&&g&&(0,i("irKZA").isParagraphNode)(u.firstChild);return!m&&T?[i("jbKei").LIST_TEXT_SCENARIOS.JOIN_DESCENDANT_TO_PARENT,w]:!!m&&!!(0,i("irKZA").isParagraphNode)(u)&&(f&&f===h?[i("jbKei").LIST_TEXT_SCENARIOS.JOIN_SIBLINGS,B]:[i("jbKei").LIST_TEXT_SCENARIOS.JOIN_PARENT_SIBLING_TO_PARENT_CHILD,R])},U=e=>(t,o)=>{let{tr:n,selection:{$head:r}}=t,a=(0,i("e7tBw").walkNextNode)(r);if(!(0,i("e7tBw").isEmptySelectionAtEnd)(t))return!1;let s=D(a,r);if(!s)return!1;let[l,d]=s;if(!d({tr:n,$next:a.$pos,$head:r}))return!1;let{bulletList:c,orderedList:u}=t.schema.nodes,f=(0,p.findParentNodeOfType)([c,u])(n.selection),h=i("d925B").ACTION_SUBJECT_ID.FORMAT_LIST_BULLET;return f&&f.node.type===u&&(h=i("d925B").ACTION_SUBJECT_ID.FORMAT_LIST_NUMBER),e?.attachAnalyticsEvent({action:i("d925B").ACTION.LIST_ITEM_JOINED,actionSubject:i("d925B").ACTION_SUBJECT.LIST,actionSubjectId:h,eventType:i("d925B").EVENT_TYPE.TRACK,attributes:{inputMethod:i("d925B").INPUT_METHOD.KEYBOARD,direction:i("jbKei").DELETE_DIRECTION.FORWARD,scenario:l}})(n),o&&o(n),!0},K={[i("jbKei").LIST_TEXT_SCENARIOS.JOIN_SIBLINGS]:(e,t,o,n)=>{let r=n.node(-1);if(!r.firstChild)return!1;let a=n.before(-1),s=n.after(-1),l=o.pos-1,d=o.pos,c=n.parent.content,p=r.content.cut(r.firstChild.nodeSize);return(0,i("e7tBw").insertContentDeleteRange)(e,e=>e.doc.resolve(l),[[c,l],[p,d]],[[a,s]]),t&&t(e),!0},[i("jbKei").LIST_TEXT_SCENARIOS.JOIN_DESCENDANT_TO_PARENT]:(e,t,o,n)=>{let r=n.node(-2),a=n.node(-1);if(!a.firstChild||!a.lastChild)return!1;let s=n.before(-2),l=n.before(-1),d=o.after(),c=n.after(-2),p=n.after(-1),u=n.start(-2),f=(0,i("irKZA").isListNode)(a.lastChild),h=1===r.childCount&&!f,m=o.pos,g=n.parent.content,T=f?a.content.cut(a.firstChild.nodeSize,a.nodeSize-a.lastChild.nodeSize-2):a.content.cut(a.firstChild.nodeSize),E=a.lastChild.content;return(0,i("e7tBw").insertContentDeleteRange)(e,e=>e.doc.resolve(m),f?[[g,m],[T,d],[E,u]]:[[g,m],[T,d]],[h?[s,c]:[l,p]]),t&&t(e),!0},[i("jbKei").LIST_TEXT_SCENARIOS.JOIN_TO_SIBLING_DESCENDANT]:(e,t,o,n,r)=>{if(!r)return!1;let a=n.node(-1);if(!a.firstChild||!a.lastChild)return!1;let s=n.parent,l=n.before(-1),d=r.after(),c=n.after(-1),p=(0,i("irKZA").isListNode)(a.lastChild),u=r.pos,f=o.pos-1,h=s.content,m=p?a.content.cut(a.firstChild.nodeSize,a.nodeSize-a.lastChild.nodeSize-2):a.content.cut(a.firstChild.nodeSize),g=a.lastChild.content;return(0,i("e7tBw").insertContentDeleteRange)(e,e=>e.doc.resolve(u),p?[[h,u],[m,d],[g,f]]:[[h,u],[m,d]],[[l,c]]),t&&t(e),!0}},j=(e,t,o)=>{let n,{$pos:r,foundNode:a}=e,s=y(r),l=S(t),d=0===t.index(-1),c=y(t);if(!a||!s||!l||!d||!c)return!1;if(S(r))return[i("jbKei").LIST_TEXT_SCENARIOS.JOIN_DESCENDANT_TO_PARENT,null];let p=r.parent.lastChild&&(0,i("irKZA").isListNode)(r.parent.lastChild),u=(0,i("irKZA").isParagraphNode)(r.parent.lastChild),f=o.doc.resolve(r.pos);do{let e=(0,i("e7tBw").walkPrevNode)(f);f=e.$pos,n=e.foundNode}while(n&&!f.parent.isTextblock)let h=S(f);return n&&p&&h?[i("jbKei").LIST_TEXT_SCENARIOS.JOIN_TO_SIBLING_DESCENDANT,f]:!!u&&[i("jbKei").LIST_TEXT_SCENARIOS.JOIN_SIBLINGS,null]},F=e=>(t,o)=>{let{tr:n,selection:{$head:r}}=t,a=(0,i("e7tBw").walkPrevNode)(r);if(!(0,i("e7tBw").isEmptySelectionAtStart)(t))return!1;let s=j(a,r,n);if(!s)return!1;let{bulletList:l,orderedList:d}=t.schema.nodes,c=(0,p.findParentNodeOfType)([l,d])(n.selection),u=i("d925B").ACTION_SUBJECT_ID.FORMAT_LIST_BULLET;return c&&c.node.type===d&&(u=i("d925B").ACTION_SUBJECT_ID.FORMAT_LIST_NUMBER),e?.attachAnalyticsEvent({action:i("d925B").ACTION.LIST_ITEM_JOINED,actionSubject:i("d925B").ACTION_SUBJECT.LIST,actionSubjectId:u,eventType:i("d925B").EVENT_TYPE.TRACK,attributes:{inputMethod:i("d925B").INPUT_METHOD.KEYBOARD,direction:i("jbKei").DELETE_DIRECTION.BACKWARD,scenario:s[0]}})(n),K[s[0]](n,o,a.$pos,r,s[1])},G="restartListsAnalytics",H=e=>e.getMeta(G)??{},z=(e,t)=>{let o=H(e);e.setMeta(G,{...o,...t})},V=e=>{let t=e.selection,o=(0,i("lnYUq").normalizeListItemsSelection)({selection:e.selection,doc:e.doc}),n=T(o.$from);if(!n)return;let r=o.$from.blockRange(n,i("irKZA").isListNode);if(!r)return;let a=!1,s=!1,{from:l,to:d}=o;q(o).forEach(t=>{let o=e.doc.resolve(e.mapping.map(t.from)),n=e.doc.resolve(e.mapping.map(t.to)),r=o.blockRange(n,i("irKZA").isListNode);r&&((0,i("irKZA").isListItemNode)(o.node(r.depth-1))?X({tr:e,range:r}):($({tr:e,range:r}),a=a||d>=t.from&&d<t.to,s=s||l>=t.from&&l<t.to))});let c=r.start!==e.mapping.map(r.start),p=W({originalSelection:t,normalizedSelection:o,tr:e,hasCommonListMoved:c,hasNormalizedToPositionLiftedOut:a,hasNormalizedFromPositionLiftedOut:s});e.setSelection(p),h({tr:e,direction:f.RIGHT})},W=({tr:e,originalSelection:t,normalizedSelection:o,hasCommonListMoved:n,hasNormalizedToPositionLiftedOut:r,hasNormalizedFromPositionLiftedOut:a})=>{let{$from:s,$to:l}=o,d=o.empty,c=e.mapping.map(s.pos),p=e.mapping.map(l.pos),u=s.sameParent(l);if(a){let e=u?s.pos:c;c=a?s.pos:e,c=Math.max(c=n?c-2:c,0)}if(r){let t=u?l.pos:p;p=r?l.pos:t,p=Math.min(p=n?p-2:p,e.doc.nodeSize-2)}if(o instanceof i("adhil").GapCursorSelection){let t=e.doc.resolve(c);return new(0,i("adhil").GapCursorSelection)(t,o.side)}return t instanceof i("ks2lK").NodeSelection?i("ks2lK").NodeSelection.create(e.doc,c):d?i("ks2lK").TextSelection.between(e.doc.resolve(p),e.doc.resolve(p),-1):i("ks2lK").TextSelection.between(e.doc.resolve(c),e.doc.resolve(p),-1)},q=e=>{let t=v({selection:e});if(!t)return[];let{$from:o,$to:n}=e;if(o.pos===n.pos&&o.sameParent(n))return[{from:t.start,to:t.end,depth:t.depth}];let r=Y(o);if(!r)return[];let a=[],{doc:s}=o,l=Y(n);for(;l&&l.pos>=r.pos&&l.pos>=t.start;){let e=s.nodeAt(l.pos);if(!e||!(0,i("irKZA").isListItemNode)(e))return[];let t=0;e&&e.lastChild&&(0,i("irKZA").isListNode)(e.lastChild)&&(t=e.lastChild.nodeSize);let o=l.pos+1;a.push({from:o,to:s.resolve(o).end()-t,depth:l.depth}),l=Y(l)}return a},X=({tr:e,range:t})=>{let o=t.end,n=t.$to.end(t.depth),{listItem:r}=e.doc.type.schema.nodes;if(o<n){let a=new(0,i("5SAOw").Slice)(i("5SAOw").Fragment.from(r.create(null,t.parent.copy())),1,0),s=new(0,i("aXG5V").ReplaceAroundStep)(o-1,n,o,n,a,1,!0);e.step(s),t=new(0,i("5SAOw").NodeRange)(e.doc.resolve(t.$from.pos),e.doc.resolve(n),t.depth)}let a=(0,i("aXG5V").liftTarget)(t);a&&e.lift(t,a)},$=({tr:e,range:t})=>{let o,n=t.parent,r=e.doc.resolve(t.start),a=r.start(t.depth),s=r.end(t.depth),l=a===t.start,d=s===t.end,c=l?i("5SAOw").Fragment.empty:i("5SAOw").Fragment.from(n.copy(i("5SAOw").Fragment.empty));for(let e=t.startIndex;e<t.endIndex;e++)c=c.append(n.child(e).content);if(l)for(let e=0;e<c.childCount;e++){let t=c.child(e);if(t&&(0,i("irKZA").isListNode)(t)&&t.type!==n.type){let o=n.type.create(null,t.content);c=c.replaceChild(e,o)}}let p=n.copy(i("5SAOw").Fragment.empty),u=(0,i("irKZA").getOrderFromOrderedListNode)(n);if("orderedList"===n.type.name){o=t.endIndex-1+u,p.attrs={...p.attrs,order:o};let{splitListStartNumber:n}=H(e);"number"!=typeof n&&z(e,{splitListStartNumber:o})}let f=c.append(i("5SAOw").Fragment.from(p));if(f.forEach((t,n,r)=>{if("orderedList"===t.type.name&&t.attrs?.order===o){let t=f.child(r-1);t?.attrs?.order>=0&&z(e,{splitListStartNumber:t?.attrs?.order})}}),l&&d){let o=new(0,i("5SAOw").Slice)(c,0,0),n=new(0,i("aXG5V").ReplaceStep)(r.pos-1,t.end+1,o,!1);z(e,{outdentScenario:void 0}),e.step(n)}else if(l){let o=new(0,i("5SAOw").Slice)(f,0,1),n=new(0,i("aXG5V").ReplaceStep)(r.pos-1,t.end,o,!1);e.step(n)}else if(d){let t=new(0,i("5SAOw").Slice)(c,1,0),o=new(0,i("aXG5V").ReplaceStep)(r.pos,s+1,t,!1);e.step(o)}else{z(e,{outdentScenario:i("jbKei").OUTDENT_SCENARIOS.SPLIT_LIST});let o=new(0,i("5SAOw").Slice)(f,1,1),n=new(0,i("aXG5V").ReplaceAroundStep)(r.pos,s,t.end,s,o,o.size,!1);e.step(n)}},Y=e=>{let t=e.doc;if(!(0,i("irKZA").isListNode)(e.node())){let o=g(e);return o?t.resolve(o.pos):null}let o=t.resolve(e.pos),n=i("ks2lK").Selection.findFrom(o,-1);if(!n)return null;let r=g(n.$from);return r?t.resolve(r.pos):null},J=e=>(t=i("d925B").INPUT_METHOD.KEYBOARD)=>function({tr:o}){if(!C(o))return null;let{$from:n}=o.selection,r=m(n);if(!r)return new(0,i("gmyMu").PassiveTransaction);(0,i("ke2AI").closeHistory)(o);let a=(0,i("irKZA").isBulletList)(r.node)?i("d925B").ACTION_SUBJECT_ID.FORMAT_LIST_BULLET:i("d925B").ACTION_SUBJECT_ID.FORMAT_LIST_NUMBER;if(V(o),!o||!o.docChanged)return I(o)?null:new(0,i("gmyMu").PassiveTransaction);let s={},{outdentScenario:d,splitListStartNumber:c}=H(o);return d===i("jbKei").OUTDENT_SCENARIOS.SPLIT_LIST&&(s.outdentScenario=d,s.splitListStartNumber=c),e?.attachAnalyticsEvent({action:i("d925B").ACTION.OUTDENTED,actionSubject:i("d925B").ACTION_SUBJECT.LIST,actionSubjectId:a,eventType:i("d925B").EVENT_TYPE.TRACK,attributes:{...l(o),...s,inputMethod:t}})(o),o},Z=e=>()=>(t,o)=>{let{selection:n}=t;if(n.empty){let{$from:a}=n,{listItem:s,codeBlock:l}=t.schema.nodes,d=n instanceof i("adhil").GapCursorSelection?a.parent:a.node(a.depth-1);if(d&&d.type===s){if(!(0,i("2pjJ5").hasVisibleContent)(d))return(0,i("gmyMu").editorCommandToPMCommand)(J(e)(i("d925B").INPUT_METHOD.KEYBOARD))(t,o);if(!(0,p.hasParentNodeOfType)(l)(n)){var r;return(r=s,function(e,t){let o=e.selection,n=o.$from,a=o.$to,s=o.node;if(s&&s.isBlock||n.depth<2||!n.sameParent(a))return!1;let l=o instanceof i("adhil").GapCursorSelection,d=l?n.parent:n.node(-1);if(d.type!==r)return!1;if(d.content.content.length<=1&&0===n.parent.content.size&&0!==d.content.size){if(2===n.depth||n.node(-3).type!==r||n.index(-2)!==n.node(-2).childCount-1)return!1;if(t){let o=i("5SAOw").Fragment.empty,a=n.index(-1)>0;for(let e=n.depth-(a?1:2);e>=n.depth-3;e--)o=i("5SAOw").Fragment.from(n.node(e).copy(o));o=o.append(i("5SAOw").Fragment.from(r.createAndFill()));let s=e.tr.replace(n.before(a?void 0:-1),n.after(-3),new(0,i("5SAOw").Slice)(o,a?3:2,2));s.setSelection(e.selection.constructor.near(s.doc.resolve(n.pos+(a?3:2)))),t(s.scrollIntoView())}return!0}let c=a.pos===n.end()?d.contentMatchAt(0).defaultType:null,p=e.tr.delete(n.pos,a.pos);if(t){if(o instanceof i("ks2lK").TextSelection)return t(p.split(n.pos,2,(c&&[null,{type:c}])??void 0).scrollIntoView()),!0;if(l&&n.nodeBefore?.isBlock){let{listItem:o,paragraph:r}=e.schema.nodes,s=o.createChecked({},r.createChecked());return t(p.insert(n.pos,s).setSelection(i("ks2lK").Selection.near(p.doc.resolve(a.pos+1))).scrollIntoView()),!0}}return!1})(t,o)}}}return!1},Q=e=>()=>(t,o)=>(0,i("astHL").chainCommands)(F(e),(0,i("e7tBw").filterCommand)([i("e7tBw").isEmptySelectionAtStart,A,e=>C(e.tr)],(0,i("astHL").chainCommands)(ei,(0,i("gmyMu").editorCommandToPMCommand)(J(e)(i("d925B").INPUT_METHOD.KEYBOARD)))),(0,i("e7tBw").filterCommand)([i("e7tBw").isEmptySelectionAtStart,e=>O(e.tr)],ea))(t,o),ee=e=>U(e),et=(e,t)=>{let o,{bulletList:n,orderedList:r,listItem:i}=t;for(let t=e.depth-1;t>0;t--){let a=e.node(t);if((a.type===n||a.type===r)&&(o=t),a.type!==n&&a.type!==r&&a.type!==i)break}return o},eo=e=>(t,o)=>function({tr:n}){let{taskList:r}=n.doc.type.schema.nodes;if((0,p.hasParentNodeOfType)(r)(n.selection))return n;let a=k(n),s=n.doc.type.schema.nodes[o],d="bulletList"===o?i("d925B").ACTION_SUBJECT_ID.FORMAT_LIST_BULLET:i("d925B").ACTION_SUBJECT_ID.FORMAT_LIST_NUMBER;if(a){let{selection:r}=n,c=r instanceof i("adhil").GapCursorSelection||r instanceof i("ks2lK").NodeSelection?1:2,p=r.$from.node(r.$from.depth-c),u=r.$to.node(r.$to.depth-c),f="bulletList"===a.type.name?i("d925B").ACTION_SUBJECT_ID.FORMAT_LIST_BULLET:i("d925B").ACTION_SUBJECT_ID.FORMAT_LIST_NUMBER;if(p?.type.name===o&&u?.type.name===o){let o=l(n);return!function(e){let{selection:t}=e,o=et(t.$to,e.doc.type.schema.nodes);(e=function(e,t,o,n){let{listItem:r}=n.doc.type.schema.nodes,a=!1;return n.doc.nodesBetween(e,t,(t,s)=>{if(!a&&t.type===r&&s>e){a=!0;let e=o+3;for(;e>o+2;){let o=n.doc.resolve(n.mapping.map(s));e=o.depth;let r=n.doc.resolve(n.mapping.map(s+t.textContent.length));n=function(e,t){let{$from:o,$to:n}=e,r=t.doc.type.schema.nodes.listItem,a=o.blockRange(n,e=>!!e.childCount&&!!e.firstChild&&e.firstChild.type===r);if(!a||a.depth<2||o.node(a.depth-1).type!==r)return t;let s=a.end,l=n.end(a.depth);return s<l&&(t.step(new(0,i("aXG5V").ReplaceAroundStep)(s-1,l,s,l,new(0,i("5SAOw").Slice)(i("5SAOw").Fragment.from(r.create(void 0,a.parent.copy())),1,0),1,!0)),a=new(0,i("5SAOw").NodeRange)(t.doc.resolve(o.pos),t.doc.resolve(l),a.depth)),t.lift(a,(0,i("aXG5V").liftTarget)(a)).scrollIntoView()}(new(0,i("ks2lK").TextSelection)(o,r),n)}}}),n}(t.$to.pos,t.$to.end(o),o||0,e),t instanceof i("ks2lK").NodeSelection||t instanceof i("adhil").GapCursorSelection)?function(e,t){let{from:o}=e,{listItem:n}=t.doc.type.schema.nodes,r=t.mapping.map(o),i=t.doc.nodeAt(r),a=t.doc.resolve(r);if(a?.parent.type!==n)return;let s=t.doc.resolve(r+(i?.nodeSize||1)),l=a.blockRange(s);if(l){let e=x(a);t.lift(l,e)}}(t,e):function(e,t){let{from:o,to:n}=e,{paragraph:r}=t.doc.type.schema.nodes,i=[];t.doc.nodesBetween(o,n,(e,t)=>{e.type===r&&i.push({node:e,pos:t})});for(let e=i.length-1;e>=0;e--){let o=i[e],n=t.doc.resolve(t.mapping.map(o.pos));if(n.depth>0){let e;e=o.node.textContent&&o.node.textContent.length>0?t.doc.resolve(t.mapping.map(o.pos+o.node.textContent.length)):t.doc.resolve(t.mapping.map(o.pos+1));let r=n.blockRange(e);r&&t.lift(r,x(n))}}}(t,e)}(n),e?.attachAnalyticsEvent({action:i("d925B").ACTION.CONVERTED,actionSubject:i("d925B").ACTION_SUBJECT.LIST,actionSubjectId:i("d925B").ACTION_SUBJECT_ID.TEXT,eventType:i("d925B").EVENT_TYPE.TRACK,attributes:{...o,transformedFrom:f,inputMethod:t}})(n),n}!function({tr:e,nextListNodeType:t}){let o,{doc:n,selection:{$from:r,$to:a}}=e;if(e.selection instanceof i("adhil").GapCursorSelection){let e=r.nodeAfter?.nodeSize||1;o=r.blockRange(r.doc.resolve(r.pos+e))}else o=r.blockRange(a,i("irKZA").isListNode);if(o)return E({tr:e,nextListNodeType:t});let s=r.blockRange(a);if(!s)return;let l=s.parent,{startIndex:d,endIndex:c,depth:p}=s;if(!m(r))for(let o=d;o<c;o++){let r=s.$from.posAtIndex(o,p),a=n.resolve(r),d=l.child(o),c=a.blockRange(e.doc.resolve(r+d.nodeSize));if(c&&!(0,i("irKZA").isListNode)(d)&&!(0,i("aXG5V").findWrapping)(c,t))return}e.doc.nodesBetween(s.start,s.end,(o,n)=>{if(m(e.doc.resolve(e.mapping.map(n))))return!1;if(!(0,i("kTbzR").isEmptyParagraph)(o)&&(!o.type.isBlock||"paragraph"===o.type.name)&&s){let r=new(0,i("5SAOw").NodeRange)(e.doc.resolve(e.mapping.map(n)),e.doc.resolve(e.mapping.map(n)+o.nodeSize),s.depth);return b({tr:e,nextListNodeType:t,nodeRange:r}),!1}}),E({tr:e,nextListNodeType:t}),e.docChanged&&h({tr:e,forceListType:t})}({tr:n,nextListNodeType:s}),e?.attachAnalyticsEvent({action:i("d925B").ACTION.CONVERTED,actionSubject:i("d925B").ACTION_SUBJECT.LIST,actionSubjectId:d,eventType:i("d925B").EVENT_TYPE.TRACK,attributes:{...l(n),transformedFrom:f,inputMethod:t}})(n)}else{var c,u;N(n,s),(c=s,function(e){let t,{$from:o,$to:n}=e.selection;if(e.selection instanceof i("adhil").GapCursorSelection&&o.nodeAfter&&_(c,e.selection)){let e=o.nodeAfter.nodeSize||1;t=o.blockRange(o.doc.resolve(o.pos+e))}else t=o.blockRange(n);let r=!1,a=t;if(!t)return!1;if(t.depth>=2&&o.node(t.depth-1).type.compatibleContent(c)&&0===t.startIndex){if(0===o.index(t.depth-1))return!1;let s=e.doc.resolve(t.start-2);a=new(0,i("5SAOw").NodeRange)(s,s,t.depth),t.endIndex<t.parent.childCount&&(t=new(0,i("5SAOw").NodeRange)(o,e.doc.resolve(n.end(t.depth)),t.depth)),r=!0}let s=(0,i("aXG5V").findWrapping)(a,c,void 0,t);return!!s&&(e=function(e,t,o,n,r){let a=i("5SAOw").Fragment.empty;for(let e=o.length-1;e>=0;e--)a=i("5SAOw").Fragment.from(o[e].type.create(o[e].attrs,a));e.step(new(0,i("aXG5V").ReplaceAroundStep)(t.start-2*!!n,t.end,t.start,t.end,new(0,i("5SAOw").Slice)(a,0,0),o.length,!0));let s=0;for(let e=0;e<o.length;e++)o[e].type===r&&(s=e+1);let l=o.length-s,d=t.start+o.length-2*!!n,c=t.parent;for(let o=t.startIndex,n=t.endIndex,r=!0;o<n;o++,r=!1)!r&&(0,i("aXG5V").canSplit)(e.doc,d,l)&&(e.split(d,l),d+=2*l),d+=c.child(o).nodeSize;return e}(e,t,s,r,c),!0)})(n),(0,i("56SXY").autoJoinTr)(n,(e,t)=>e.type===t.type&&e.type===s),e?.attachAnalyticsEvent({action:i("d925B").ACTION.INSERTED,actionSubject:i("d925B").ACTION_SUBJECT.LIST,actionSubjectId:d,eventType:i("d925B").EVENT_TYPE.TRACK,attributes:{inputMethod:t}})(n)}return n.docChanged?n:null},en=e=>(t=i("d925B").INPUT_METHOD.TOOLBAR)=>eo(e)(t,"bulletList"),er=e=>(t=i("d925B").INPUT_METHOD.TOOLBAR)=>eo(e)(t,"orderedList"),ei=(e,t)=>{let{$from:o}=e.selection,{listItem:n}=e.schema.nodes,r=(0,i("dhoHU").findCutBefore)(o);if(!r||!r.nodeBefore||r.nodeBefore.type!==n)return!1;let a=r.nodeBefore.firstChild&&"extension"===r.nodeBefore.firstChild.type.name;if(1===r.nodeBefore.childCount&&r.nodeBefore.firstChild&&r.nodeBefore.firstChild.nodeSize<=2&&!a){let{tr:n}=e;return t&&t(n.delete(r.pos-r.nodeBefore.nodeSize,o.pos).scrollIntoView()),!0}return!1},ea=(e,t)=>{let{$from:o}=e.selection,{paragraph:n,listItem:r,codeBlock:a,bulletList:s,orderedList:l}=e.schema.nodes,d=e.selection instanceof i("adhil").GapCursorSelection,u=d?e.doc.resolve(o.pos+1):o,f=(0,i("dhoHU").findCutBefore)(u);if(!f)return!1;if(f.nodeBefore&&[s,l].indexOf(f.nodeBefore.type)>-1&&f.nodeAfter&&(f.nodeAfter.type===n||f.nodeAfter.type===a)){let a=f.doc.resolve(f.pos-1);for(;a.parent.type!==n&&a.pos>1;)a=e.doc.resolve(a.pos-1);let{tr:u}=e;if(d){let e=(0,p.findPositionOfNodeBefore)(u.selection);if("number"!=typeof e)return!1;let t=f.nodeBefore.copy(f.nodeBefore.content.append(i("5SAOw").Fragment.from(r.createChecked({},f.nodeAfter))));u.replaceWith(e,o.pos+f.nodeAfter.nodeSize,t)}else{let t=c({insertPosition:a.pos,$target:f});if(e.tr.maybeStep(t).failed)return!1;u=e.tr.step(t)}let h=u.doc.resolve(u.mapping.map(f.pos+f.nodeAfter.nodeSize));return h.nodeBefore&&h.nodeAfter&&h.nodeBefore.type===h.nodeAfter.type&&[s,l].indexOf(h.nodeBefore.type)>-1&&(u=u.join(h.pos)),t&&(u.doc.resolve(a.pos).nodeBefore?.isBlock&&null!==u.doc.resolve(a.pos).nodeBefore||(u=u.setSelection(i("ks2lK").TextSelection.near(u.doc.resolve(u.mapping.map(f.pos)),-1))),t(u.scrollIntoView())),!0}return!1},es=({tr:e,maxIndentation:t})=>{let o,n=(0,i("lnYUq").numberNestedLists)(e.selection.$from),r=e.selection.$to.pos;do{let n=e.doc.resolve(r);if((o=(0,i("lnYUq").numberNestedLists)(n))>t)return!1;r++}while(o>=n)return!0},el=e=>{let t=e.selection,o=(0,i("lnYUq").normalizeListItemsSelection)({selection:t,doc:e.doc}),{$from:n,$to:r}=o,a=ed({selection:o});if(!a)return!1;let s={from:g(n),to:g(r)};if(null===s.from||null===s.to)return null;let l=e.doc.resolve(s.from.pos),d=l.index(),c=l.posAtIndex(d-1),p=l.posAtIndex(d),u=e.doc.nodeAt(c),f=e.doc.nodeAt(p),h=f?.content?.content,m=!!(void 0!==h&&h?.length>0)&&"extension"===h[h.length-1].type.name;if(!u||!(0,i("irKZA").isListItemNode)(u)||(0,i("irKZA").isListItemNode)(u)&&0===d)return null;let T=a.parent,E=(0,i("irKZA").isListNode)(u.lastChild)?u.lastChild:null,b=E?E.type:T.type,S=s.to.node.lastChild,y=S&&(0,i("irKZA").isListNode)(S)?S.nodeSize:0,_=s.from.pos,C=s.to.pos+s.to.node.nodeSize-y,[I,O]=ep({tr:e,listNodeType:b,range:a,from:_,to:C,hasLastItemExtension:m}),k=!!E,v=_-1;e.replaceRange(k?v-1:v,a.end,I);let x=e.mapping.map(C)-2;0===O.openStart?e.insert(x,O.content):e.replace(x-O.openStart,x-O.openStart,O);let N=ec({originalSelection:t,normalizedSelection:o,tr:e,hasPreviousNestedList:k});e.setSelection(N)},ed=({selection:e})=>{let{$from:t,$to:o}=e,n=t.blockRange(o,i("irKZA").isListNode);return n||null},ec=({tr:e,normalizedSelection:t,originalSelection:o,hasPreviousNestedList:n})=>{let r=2*!!n,{$from:a,$to:s}=t;if(t instanceof i("adhil").GapCursorSelection){let o=e.doc.resolve(a.pos-r);return new(0,i("adhil").GapCursorSelection)(o,t.side)}if(o instanceof i("ks2lK").NodeSelection)return i("ks2lK").NodeSelection.create(e.doc,a.pos-r);let{$from:l}=i("ks2lK").Selection.near(e.doc.resolve(a.pos-r)),{$to:d}=i("ks2lK").Selection.near(e.doc.resolve(s.pos-r),-1);return new(0,i("ks2lK").TextSelection)(l,d)},ep=({tr:e,from:t,to:o,listNodeType:n,range:r,hasLastItemExtension:a})=>{let s=e.doc.slice(t,a?o:o-2),l=i("5SAOw").Fragment.from(n.create(null,s.content)),d=e.doc.slice(o,r.end-2),c=e.doc.slice(t-1,r.end).openStart;return[new(0,i("5SAOw").Slice)(l,c,0),d]},eu=e=>(t=i("d925B").INPUT_METHOD.KEYBOARD)=>function({tr:o}){let{selection:{$from:n}}=o;if(!C(o))return null;(0,i("ke2AI").closeHistory)(o);let r=(0,i("lnYUq").getListItemAttributes)(n),a=m(n);if(!a||r&&0===r.indentLevel&&0===r.itemIndex)if(I(o))return null;else return new(0,i("gmyMu").PassiveTransaction);let s=a.node,d=(0,i("irKZA").isBulletList)(s)?i("d925B").ACTION_SUBJECT_ID.FORMAT_LIST_BULLET:i("d925B").ACTION_SUBJECT_ID.FORMAT_LIST_NUMBER;return(el(o),es({tr:o,maxIndentation:6})&&o.docChanged)?(e?.attachAnalyticsEvent({action:i("d925B").ACTION.INDENTED,actionSubject:i("d925B").ACTION_SUBJECT.LIST,actionSubjectId:d,eventType:i("d925B").EVENT_TYPE.TRACK,attributes:{...l(o),inputMethod:t}})(o),o):new(0,i("gmyMu").PassiveTransaction)},ef=({match:e,nodeType:t,getAttrs:o,joinPredicate:n})=>(0,i("l03WE").createRule)(e,(e,r,a,s)=>{let l=(o instanceof Function?o(r):o)||{},d=e.tr,c=Math.max(a,1);d.delete(c,s);let u=d.doc.resolve(c).blockRange(),f=u&&(0,i("aXG5V").findWrapping)(u,t,l);if(!f||!u)return null;let h=d.mapping.map(u.start),m=d.doc.nodeAt(h),g=f[f.length-1];if(m&&g){let e=g.type.allowedMarks(m.marks)||[];d.setNodeMarkup(h,m.type,m.attrs,e)}d.wrap(u,f);let T=d.doc.resolve(d.mapping.map(s)),E=(0,p.findParentNodeOfTypeClosestToPos)(T,t);if(t===e.schema.nodes.orderedList&&E){let e=E.pos+E.node.nodeSize,o=d.doc.resolve(e).nodeAfter;o&&o.type===t&&(0,i("aXG5V").canJoin)(d.doc,e)&&(!n||n(r,o,i("jbKei").JOIN_SCENARIOS_WHEN_TYPING_TO_INSERT_LIST.JOINED_TO_LIST_BELOW))&&d.join(e)}let b=d.doc.resolve(c-1).nodeBefore;return b&&b.type===t&&(0,i("aXG5V").canJoin)(d.doc,c-1)&&(!n||n(r,b,i("jbKei").JOIN_SCENARIOS_WHEN_TYPING_TO_INSERT_LIST.JOINED_TO_LIST_ABOVE))&&d.join(c-1),d}),eh=e=>Number(e[1]);function em({listType:e,expression:t,editorAnalyticsApi:o}){let n=i("jbKei").JOIN_SCENARIOS_WHEN_TYPING_TO_INSERT_LIST.NO_JOIN,r="bulletList"===e.name?i("d925B").ACTION_SUBJECT_ID.FORMAT_LIST_BULLET:i("d925B").ACTION_SUBJECT_ID.FORMAT_LIST_NUMBER,a=ef({match:t,nodeType:e,getAttrs:e=>({order:eh(e)}),joinPredicate:(t,o,r)=>{let i=o.type===e;return i&&(n=r),i}});return(0,i("l03WE").inputRuleWithAnalytics)((t,o)=>{let a={action:i("d925B").ACTION.INSERTED,actionSubject:i("d925B").ACTION_SUBJECT.LIST,actionSubjectId:r,eventType:i("d925B").EVENT_TYPE.TRACK,attributes:{inputMethod:i("d925B").INPUT_METHOD.FORMATTING}};return e===t.schema.nodes.orderedList&&a.attributes&&(a.attributes.listStartNumber=eh(o),a.attributes.joinScenario=n,n=i("jbKei").JOIN_SCENARIOS_WHEN_TYPING_TO_INSERT_LIST.NO_JOIN),a},o)(a)}var eg=function(e,t){let o={};return(0,i("hgeg8").bindKeymapWithEditorCommand)((0,i("hgeg8").findShortcutByKeymap)(i("hgeg8").toggleOrderedList),eo(t)(i("d925B").INPUT_METHOD.KEYBOARD,"orderedList"),o),(0,i("hgeg8").bindKeymapWithEditorCommand)((0,i("hgeg8").findShortcutByKeymap)(i("hgeg8").toggleBulletList),eo(t)(i("d925B").INPUT_METHOD.KEYBOARD,"bulletList"),o),(0,i("hgeg8").bindKeymapWithEditorCommand)(i("hgeg8").indentList.common,eu(t)(i("d925B").INPUT_METHOD.KEYBOARD),o),(0,i("hgeg8").bindKeymapWithEditorCommand)(i("hgeg8").outdentList.common,J(t)(i("d925B").INPUT_METHOD.KEYBOARD),o),(0,i("hgeg8").bindKeymapWithCommand)(i("hgeg8").enter.common,Z(t)(),o),(0,i("hgeg8").bindKeymapWithCommand)(i("hgeg8").backspace.common,Q(t)(),o),(0,i("hgeg8").bindKeymapWithCommand)(i("hgeg8").deleteKey.common,ee(t),o),(0,i("hgeg8").bindKeymapWithCommand)((0,i("hgeg8").findKeyMapForBrowser)(i("hgeg8").forwardDelete),ee(t),o),(0,i("dus6D").keymap)(o)},eT=i("1oCLl");let eE=new(0,i("ks2lK").PluginKey)("listPlugin"),eb={bulletListActive:!1,bulletListDisabled:!1,orderedListActive:!1,orderedListDisabled:!1,decorationSet:i("ftzrq").DecorationSet.empty},eS=(e,t,o)=>{let n=[],r=[];return e.nodesBetween(0,e.content.size,(e,t)=>{if(r.length>0){let e=!0;for(;e&&r.length>0;){let o=r[r.length-1];(e=t>=o.startPos+o.node.nodeSize)&&r.pop()}}if((0,i("irKZA").isListNode)(e)){r.push({node:e,startPos:t});let o=t+e.nodeSize,a=r.length;if(n.push(i("ftzrq").Decoration.node(t,o,{"data-indent-level":`${a}`})),"orderedList"===e.type.name){let r=(0,i("irKZA").getItemCounterDigitsSize)({itemsCount:e?.childCount,order:e?.attrs?.order});r&&r>1&&n.push(i("ftzrq").Decoration.node(t,o,{style:(0,i("4mSjx").getOrderedListInlineStyles)(r,"string")}))}}}),i("ftzrq").DecorationSet.empty.add(e,n)},ey=(e,t)=>{let{bulletList:o,orderedList:n,taskList:r}=e.type.schema.nodes,i=(0,p.findParentNodeOfType)([o,n,r])(t),a=!!i&&i.node.type===o,s=!!i&&i.node.type===n,l=!(a||s||_(o,t)),d=!(a||s||_(n,t));return{bulletListActive:a,bulletListDisabled:l,orderedListActive:s,orderedListDisabled:d}},e_=e=>(t,o,n)=>{let r=eC(t,o),i=eS(t.doc,n,e);return{...r,decorationSet:i}},eC=(e,t)=>{let{bulletListActive:o,orderedListActive:n,bulletListDisabled:r,orderedListDisabled:i}=ey(e.doc,e.selection);return o!==t.bulletListActive||n!==t.orderedListActive||r!==t.bulletListDisabled||i!==t.orderedListDisabled?{...t,bulletListActive:o,orderedListActive:n,bulletListDisabled:r,orderedListDisabled:i}:t},eI=()=>e=>e,eO=(e,t)=>o=>({...t?.toolbar&&(0,eT.expValEquals)("platform_editor_toolbar_aifc_patch_3","isEnabled",!0)?ey(o.doc,o.selection):eb,decorationSet:eS(o.doc,o,e)}),ek=(e,t,o)=>{let{getPluginState:n,createPluginState:r}=(0,i("lkJUe").pluginFactory)(eE,eI(),{onDocChanged:e_(t),onSelectionChanged:eC});return new(0,i("1S4f7").SafePlugin)({state:r(e,eO(t,o)),key:eE,props:{decorations(e){let{decorationSet:t}=n(e);return t},handleClick:(e,t,o)=>{let{state:n}=e;if(["LI","UL"].includes((o?.target).tagName)){let r=n.tr.doc.nodeAt(t),{listItem:a,codeBlock:s}=e.state.schema.nodes;if(r?.type===a&&r?.firstChild?.type===s&&document?.elementFromPoint(o.clientX+(i("4mSjx").listItemCounterPadding+50),o.clientY)?.closest(`.${i("5MaNT").CodeBlockSharedCssClassName.CODEBLOCK_CONTAINER}`))return(0,i("7MBVC").setGapCursorSelection)(e,t+1,i("adhil").Side.LEFT),!0}return!1}}})};i("42omo");let ev="bulletList",ex=({api:e})=>{let{formatMessage:o}=(0,i("8C5kA").default)();return e?.blockMenu?.actions.isTransformOptionDisabled(ev)?null:(0,r.jsx)(i("2GVu1").ToolbarDropdownItem,{onClick:t=>{let o=t.nativeEvent instanceof KeyboardEvent||0===t.nativeEvent.detail?i("d925B").INPUT_METHOD.KEYBOARD:i("d925B").INPUT_METHOD.MOUSE,n=i("d925B").INPUT_METHOD.BLOCK_MENU;e?.core.actions.execute(({tr:t})=>{let r=e?.blockMenu?.commands.transformNode(t.doc.type.schema.nodes.bulletList,{inputMethod:n,triggeredFrom:o,targetTypeName:ev});return r?r({tr:t}):null})},elemBefore:(0,r.jsx)(t(i("cUQMr")),{label:""}),children:o(i("5Ilz2").messages.bulletedList)})},eN=({api:e})=>()=>(0,r.jsx)(ex,{api:e});i("42omo");let eA="orderedList",eP=({api:e})=>{let{formatMessage:o}=(0,i("8C5kA").default)();return e?.blockMenu?.actions.isTransformOptionDisabled(eA)?null:(0,r.jsx)(i("2GVu1").ToolbarDropdownItem,{onClick:t=>{let o=t.nativeEvent instanceof KeyboardEvent||0===t.nativeEvent.detail?i("d925B").INPUT_METHOD.KEYBOARD:i("d925B").INPUT_METHOD.MOUSE,n=i("d925B").INPUT_METHOD.BLOCK_MENU;e?.core.actions.execute(({tr:t})=>{let r=e?.blockMenu?.commands.transformNode(t.doc.type.schema.nodes.orderedList,{inputMethod:n,triggeredFrom:o,targetTypeName:eA});return r?r({tr:t}):null})},elemBefore:(0,r.jsx)(t(i("2y4tz")),{label:""}),children:o(i("5Ilz2").messages.orderedList)})},eM=({api:e})=>()=>(0,r.jsx)(eP,{api:e}),eR=e=>[{type:"block-menu-item",key:i("btNLq").TRANSFORM_STRUCTURE_BULLETED_LIST_MENU_ITEM.key,parent:{type:"block-menu-section",key:i("btNLq").TRANSFORM_STRUCTURE_MENU_SECTION.key,rank:i("gEb6G").TRANSFORM_STRUCTURE_MENU_SECTION_RANK[i("btNLq").TRANSFORM_STRUCTURE_BULLETED_LIST_MENU_ITEM.key]},component:eN({api:e})},{type:"block-menu-item",key:i("btNLq").TRANSFORM_STRUCTURE_NUMBERED_LIST_MENU_ITEM.key,parent:{type:"block-menu-section",key:i("btNLq").TRANSFORM_STRUCTURE_MENU_SECTION.key,rank:i("gEb6G").TRANSFORM_STRUCTURE_MENU_SECTION_RANK[i("btNLq").TRANSFORM_STRUCTURE_NUMBERED_LIST_MENU_ITEM.key]},component:eM({api:e})}];e.exports.listPlugin=({config:e,api:t})=>{let o=t?.featureFlags?.sharedState.currentState()||{},n=t?.analytics?.actions;return(0,s.expValEqualsNoExposure)("platform_editor_block_menu","isEnabled",!0)&&t?.blockMenu?.actions.registerBlockMenuComponents(eR(t)),{name:"list",actions:{isInsideListItem:C,findRootParentListNode:T},commands:{indentList:eu(n),outdentList:e=>J(n)(e),toggleOrderedList:er(n),toggleBulletList:en(n)},getSharedState:e=>{if(e)return eE.getState(e)},nodes:()=>[{name:"bulletList",node:(0,i("dh538").fg)("platform_editor_adf_with_localid")?i("ghpxT").bulletListWithLocalId:i("ghpxT").bulletList},{name:"orderedList",node:(0,i("dh538").fg)("platform_editor_adf_with_localid")?i("fGuiW").orderedListWithOrderAndLocalId:i("fGuiW").orderedListWithOrder},{name:"listItem",node:(0,i("dh538").fg)("platform_editor_adf_with_localid")?i("jl5Qf").listItemWithLocalId:i("jl5Qf").listItem}],pmPlugins:()=>[{name:"list",plugin:({dispatch:e})=>ek(e,o,t)},{name:"listInputRule",plugin:({schema:e,featureFlags:o})=>(function(e,t){let{nodes:{bulletList:o,orderedList:n}}=e,r=[];if(o&&r.push(em({expression:/^\s*([\*\-\u2022]) $/,listType:o,editorAnalyticsApi:t})),n&&r.push(em({expression:/((^[1-9]{1}[0-9]{0,2})|^(0))[\.\)] $/,listType:n,editorAnalyticsApi:t})),0!==r.length)return new(0,i("1S4f7").SafePlugin)((0,i("aIMBk").createPlugin)("lists",r))})(e,t?.analytics?.actions)},{name:"listKeymap",plugin:()=>eg(o,t?.analytics?.actions)}],pluginsOptions:{quickInsert:({formatMessage:e})=>[{id:"unorderedList",title:e(i("5Ilz2").messages.unorderedList),description:e(i("5Ilz2").messages.unorderedListDescription),keywords:["ul","unordered"],priority:1100,keyshortcut:(0,i("hgeg8").tooltip)(i("hgeg8").toggleBulletList),icon:()=>(0,r.jsx)(a.IconList,{}),action(e,t){let o=e(t.schema.nodes.bulletList.createChecked({},t.schema.nodes.listItem.createChecked({},t.schema.nodes.paragraph.createChecked())));return n?.attachAnalyticsEvent({action:i("d925B").ACTION.INSERTED,actionSubject:i("d925B").ACTION_SUBJECT.LIST,actionSubjectId:i("d925B").ACTION_SUBJECT_ID.FORMAT_LIST_BULLET,eventType:i("d925B").EVENT_TYPE.TRACK,attributes:{inputMethod:i("d925B").INPUT_METHOD.QUICK_INSERT}})(o),o}},{id:"orderedList",title:e(i("5Ilz2").messages.orderedList),description:e(i("5Ilz2").messages.orderedListDescription),keywords:["ol","ordered"],priority:1200,keyshortcut:(0,i("hgeg8").tooltip)(i("hgeg8").toggleOrderedList),icon:()=>(0,r.jsx)(a.IconListNumber,{}),action(e,t){let o=e(t.schema.nodes.orderedList.createChecked({},t.schema.nodes.listItem.createChecked({},t.schema.nodes.paragraph.createChecked())));return n?.attachAnalyticsEvent({action:i("d925B").ACTION.INSERTED,actionSubject:i("d925B").ACTION_SUBJECT.LIST,actionSubjectId:i("d925B").ACTION_SUBJECT_ID.FORMAT_LIST_NUMBER,eventType:i("d925B").EVENT_TYPE.TRACK,attributes:{inputMethod:i("d925B").INPUT_METHOD.QUICK_INSERT}})(o),o}}]}}}}),a("fWSjz",function(t,o){e(t.exports,"default",()=>n);var n=(0,i("cgtv4").defineMessages)({white:{id:"fabric.theme.white",defaultMessage:"White"},"light-blue":{id:"fabric.theme.light-blue",defaultMessage:"Light blue"},"light-teal":{id:"fabric.theme.light-teal",defaultMessage:"Light teal"},"light-green":{id:"fabric.theme.light-green",defaultMessage:"Light green"},"light-yellow":{id:"fabric.theme.light-yellow",defaultMessage:"Light yellow"},"light-red":{id:"fabric.theme.light-red",defaultMessage:"Light red"},"light-purple":{id:"fabric.theme.light-purple",defaultMessage:"Light purple"},"light-gray":{id:"fabric.theme.light-gray",defaultMessage:"Light gray"},blue:{id:"fabric.theme.blue",defaultMessage:"Blue"},teal:{id:"fabric.theme.teal",defaultMessage:"Teal"},green:{id:"fabric.theme.green",defaultMessage:"Green"},yellow:{id:"fabric.theme.yellow",defaultMessage:"Yellow"},red:{id:"fabric.theme.red",defaultMessage:"Red"},orange:{id:"fabric.theme.orange",defaultMessage:"Orange"},purple:{id:"fabric.theme.purple",defaultMessage:"Purple"},gray:{id:"fabric.theme.gray",defaultMessage:"Gray"},"dark-blue":{id:"fabric.theme.dark-blue",defaultMessage:"Dark blue"},"dark-teal":{id:"fabric.theme.dark-teal",defaultMessage:"Dark teal"},"dark-green":{id:"fabric.theme.dark-green",defaultMessage:"Dark green"},"dark-yellow":{id:"fabric.theme.dark-yellow",defaultMessage:"Dark yellow"},"dark-red":{id:"fabric.theme.dark-red",defaultMessage:"Dark red"},"dark-purple":{id:"fabric.theme.dark-purple",defaultMessage:"Dark purple"},"subtle-gray":{id:"fabric.theme.subtle-gray",defaultMessage:"Subtle gray"},"bold-gray":{id:"fabric.theme.bold-gray",defaultMessage:"Bold gray"},"no-color":{id:"fabric.theme.no-color",defaultMessage:"No highlight"},lime:{id:"fabric.theme.lime",defaultMessage:"Lime"},magenta:{id:"fabric.theme.magenta",defaultMessage:"Magenta"}})}),a("gcsWd",function(t,o){e(t.exports,"textColorPlugin",()=>i("i2zv0").textColorPlugin),i("i2zv0")}),a("i2zv0",function(e,o){var n,r,a=i("l998X");i("42omo");var s=i("1oCLl"),l=i("iu6m9");let d=["backgroundColor"],c={color:i("6fnsQ").N800.toLowerCase(),label:"Dark gray"},p=e=>{let t,{$from:o,$to:n,$cursor:r}=e.selection,{textColor:i}=e.schema.marks,a=[];r?a.push(i.isInSet(e.storedMarks||r.marks())||void 0):e.doc.nodesBetween(o.pos,n.pos,e=>{if(e.isLeaf){let t=i.isInSet(e.marks)||void 0;return a.push(t),!t}return!0});let s=(a=a.filter(e=>(!e||!t||e.attrs.color!==t.attrs.color)&&(t=e,!0))).filter(e=>!!e);return s.length>1||1===s.length&&a.length>1?null:s.length?s[0].attrs.color:c.color},u=e=>{let t,{$from:o,$to:n,$cursor:r}=e.selection,{textColor:i}=e.doc.type.schema.marks,a=[];r?a.push(i.isInSet(e.storedMarks||r.marks())||void 0):e.doc.nodesBetween(o.pos,n.pos,e=>{if(e.isLeaf){let t=i.isInSet(e.marks)||void 0;return a.push(t),!t}return!0});let s=(a=a.filter(e=>(!e||!t||e.attrs.color!==t.attrs.color)&&(t=e,!0))).filter(e=>!!e);return s.length>1||1===s.length&&a.length>1?null:s.length?s[0].attrs.color:c.color},f=e=>{let{doc:{type:{schema:{marks:{link:t}}}},pos:o}=e;return!!t&&e.doc.rangeHasMark(o,Math.min(o+1,e.doc.content.size),t)},h=e=>{let{textColor:t}=e.schema.marks;if(t){let{empty:o,ranges:n,$cursor:r}=e.selection;if(o&&!r||r&&f(r)||!1===(0,i("l6xRR").isMarkAllowedInRange)(e.doc,n,t))return!0;let a=e=>!d.includes(e.type.name);return!!(0,i("l6xRR").isMarkExcluded)(t,e.storedMarks?.filter(a)||r&&r.marks().filter(a))}return!0},m=e=>{let{textColor:t}=e.doc.type.schema.marks;if(t){let{empty:o,ranges:n,$cursor:r}=e.selection;if(o&&!r||r&&f(r)||!1===(0,i("l6xRR").isMarkAllowedInRange)(e.doc,n,t))return!0;let a=e=>!d.includes(e.type.name);return!!(0,i("l6xRR").isMarkExcluded)(t,e.storedMarks?.filter(a)||r&&r.marks().filter(a))}return!0};var g=((n={})[n.RESET_COLOR=0]="RESET_COLOR",n[n.SET_COLOR=1]="SET_COLOR",n[n.DISABLE=2]="DISABLE",n[n.SET_PALETTE=3]="SET_PALETTE",n);let T=new(0,i("ks2lK").PluginKey)("textColorPlugin");function E(e,t){return new(0,i("1S4f7").SafePlugin)({key:T,state:{init:(e,o)=>(function(e,t){let o=t?.defaultColor||c,n=[{value:o.color,label:o.label,border:"var(--ds-border, #091E4224)"},...i("3iy7Q").textColorPalette];return{color:p(e),disabled:h(e),palette:n,defaultColor:o.color,isPaletteOpen:!1}})(o,t),apply(t,o,n,r){let i,a=t.getMeta(T)||{};switch(a.action){case 0:i={...o,color:o.defaultColor};break;case 1:i={...o,color:a.color,disabled:!1,isPaletteOpen:!1};break;case 2:i={...o,disabled:!0};break;case 3:i={...o,isPaletteOpen:a.isPaletteOpen};break;default:i={...o,color:p(r),disabled:h(r)}}return o&&o.color!==i.color||o&&o.disabled!==i.disabled||o&&o.isPaletteOpen!==i.isPaletteOpen?(e(T,i),i):o}}})}let b=({tr:e})=>{let{textColor:t}=e.doc.type.schema.marks;return(0,i("b167b").removeMark)(t)({tr:e}),e.setMeta(T,{action:g.RESET_COLOR}),e},S=e=>({tr:t})=>{let{textColor:o}=t.doc.type.schema.marks;return m(t)?t.setMeta(T,{action:g.DISABLE}):(d.forEach(e=>{let{marks:o}=t.doc.type.schema;o[e]&&(0,i("b167b").removeMark)(o[e])({tr:t})}),(0,i("b167b").toggleMark)(o,{color:e})({tr:t})),t},y=(e,t,o)=>({tr:n})=>{let{textColor:r}=n.doc.type.schema.marks,a=t?.textColor.sharedState.currentState();if(!r||!a)return n;let s=function(e,t,o,n){let r=o.find(({value:t})=>t===e),a=o.find(({value:e})=>e===t),s=r?r.label:e,l=a?a.label:t||"";return{action:i("d925B").ACTION.FORMATTED,actionSubject:i("d925B").ACTION_SUBJECT.TEXT,actionSubjectId:i("d925B").ACTION_SUBJECT_ID.FORMAT_COLOR,eventType:i("d925B").EVENT_TYPE.TRACK,attributes:{newColor:s.toLowerCase(),previousColor:l.toLowerCase(),inputMethod:n}}}(e,u(n),a.palette,o);return a.disabled||(e===a.defaultColor?(t?.analytics?.actions.attachAnalyticsEvent(s)(n),b({tr:n})):(t?.analytics?.actions.attachAnalyticsEvent(s)(n),S(e)({tr:n}))),n},_=e=>({tr:t})=>{let o=e?.textColor.sharedState.currentState(),n=o?.isPaletteOpen;return t.setMeta(T,{action:g.SET_PALETTE,isPaletteOpen:!n}),t},C=e=>({tr:t})=>(t.setMeta(T,{action:g.SET_PALETTE,isPaletteOpen:e}),t),I=()=>(e,t)=>{let{schema:o}=e,{textColor:n}=o.marks,r=e.tr;return(0,i("b167b").removeMark)(n)({tr:r}),t&&t(r.setMeta(T,{action:g.RESET_COLOR})),!0},O=e=>(t,o)=>{let{textColor:n}=t.schema.marks,r=t.tr;return h(t)?(o&&o(r.setMeta(T,{action:g.DISABLE})),!1):(o&&(d.forEach(e=>{let{marks:t}=r.doc.type.schema;t[e]&&(0,i("b167b").removeMark)(t[e])({tr:r})}),(0,i("b167b").toggleMark)(n,{color:e})({tr:r}),o(r)),!0)},k=(e,t,o)=>(n,r)=>{let{textColor:a}=n.schema.marks;if(a){let a=T.getState(n),s=function(e,t,o,n,r){let a=o.find(({value:t})=>t===e),s=o.find(({value:e})=>e===t),l=a?a.label:e,d=s?s.label:t||"";return(0,i("dAtrv").withAnalytics)(n,{action:i("d925B").ACTION.FORMATTED,actionSubject:i("d925B").ACTION_SUBJECT.TEXT,actionSubjectId:i("d925B").ACTION_SUBJECT_ID.FORMAT_COLOR,eventType:i("d925B").EVENT_TYPE.TRACK,attributes:{newColor:l.toLowerCase(),previousColor:d.toLowerCase(),inputMethod:r}})}(e,p(n),a?.palette||[],t,o);return!a?.disabled&&(e===a?.defaultColor?s(I())(n,r):s(O(e))(n,r),!0)}return!1};i("42omo");var v=((r={}).PRIMARY="primaryToolbar",r.FLOATING="floatingToolbar",r),x=i("42omo"),N=i("cQMhV"),A=i("2dkHo");let P={[v.PRIMARY]:i("d925B").INPUT_METHOD.TOOLBAR,[v.FLOATING]:i("d925B").INPUT_METHOD.FLOATING_TB},M=e=>P[e];i("42omo");let R=()=>(0,a.jsx)(t(i("5gydP")),{label:"",spacing:"spacious"}),w={name:"we4ryv",styles:"margin-right:var(--ds-space-050, 4px)"};class L extends t(x).Component{render(){let e,{isOpen:o,isOpenedByKeyboard:n}=this.state,{popupsMountPoint:r,popupsBoundariesElement:a,popupsScrollableElement:s,isReducedSpacing:d,pluginState:c,intl:{formatMessage:p},disabled:u,pluginInjectionApi:f}=this.props,h=c.palette;document.body.clientWidth<=740&&(e=242);let m=this.getSelectedColor(c),g=h.find(e=>e.value===c.color)?.label,T=p(i("jOP6v").textColorMessages.textColor,{selectedColorName:g||""}),E=p(i("jOP6v").textColorMessages.textColorTooltip),{selectedRowIndex:b,selectedColumnIndex:S}=(0,i("ahQKW").getSelectedRowAndColumnFromPalette)(h,c.color),y=this.props.toolbarType===v.FLOATING?"compact":"none";return(0,i("9K4OG").jsx)("span",{css:(0,i("dh538").fg)("platform-visual-refresh-icons")?[i("cORDs").wrapperStyle,w]:i("cORDs").wrapperStyle},(0,i("9K4OG").jsx)(A.DropdownContainer,{mountTo:r,boundariesElement:a,scrollableElement:s,isOpen:o&&!c.disabled,handleClickOutside:this.hide,handleEscapeKeydown:this.hideonEsc,zIndex:i("aFUXX").akEditorMenuZIndex,fitWidth:e,closeOnTab:!0,arrowKeyNavigationProviderOptions:{type:i("5v8Ta").ArrowKeyNavigationType.COLOR,selectedRowIndex:b,selectedColumnIndex:S,isOpenedByKeyboard:n,isPopupPositioned:!0},trigger:(0,i("9K4OG").jsx)(i("a4eZN").default,{buttonId:i("8TW6I").TOOLBAR_ACTION_SUBJECT_ID.TEXT_COLOR,spacing:!d||(0,l.editorExperiment)("platform_editor_controls","variant1")?"default":y,disabled:u||c.disabled,selected:o,"aria-label":T,"aria-expanded":o,"aria-haspopup":!0,title:E,onClick:this.toggleOpen,onKeyDown:this.onKeyDown,ref:this.toolbarItemRef,iconBefore:(0,i("9K4OG").jsx)("div",{css:(0,i("dh538").fg)("platform-visual-refresh-icons")?i("cORDs").triggerWrapperStylesWithPadding:i("cORDs").triggerWrapperStyles},(0,i("dh538").fg)("platform-visual-refresh-icons")?(0,i("9K4OG").jsx)(N.DynamicStrokeIconDecoration,{selectedColor:m,disabled:c.disabled,icon:(0,i("9K4OG").jsx)(t(i("5gydP")),{label:"",color:"currentColor",spacing:"spacious"})}):(0,i("9K4OG").jsx)(N.SteppedRainbowIconDecoration,{selectedColor:m,disabled:c.disabled,icon:(0,i("9K4OG").jsx)(R,null)}),(0,i("9K4OG").jsx)("span",{css:i("iMS6j").expandIconContainerStyle},(0,i("9K4OG").jsx)(t(i("7kzZ3")),{label:"",color:"currentColor",LEGACY_margin:"0 0 0 -8px",size:"small"})))})},(0,i("9K4OG").jsx)("div",{"data-testid":"text-color-palette"},(0,i("9K4OG").jsx)(i("hxEux").default,{onClick:e=>this.changeTextColor(e,f?.analytics?.actions,c.disabled),selectedColor:c.color,paletteOptions:{palette:h,hexToPaletteColor:i("iS6Uy").hexToEditorTextPaletteColor,paletteColorTooltipMessages:i("8LFdJ").textPaletteTooltipMessages}}))),!f?.primaryToolbar&&(0,i("9K4OG").jsx)("span",{css:i("cORDs").separatorStyles}))}getSelectedColor(e){return e.color!==e.defaultColor?e.color?(0,i("iS6Uy").hexToEditorTextPaletteColor)(e.color):e.color:null}buildAnalyticsPalette(e,t){return{action:e,actionSubject:i("d925B").ACTION_SUBJECT.TOOLBAR,actionSubjectId:i("d925B").ACTION_SUBJECT_ID.FORMAT_COLOR,eventType:i("d925B").EVENT_TYPE.TRACK,attributes:{...t}}}dispatchAnalyticsEvent(e){let{dispatchAnalyticsEvent:t}=this.props;t&&t(e)}constructor(...e){super(...e),this.state={isOpen:!1,isOpenedByKeyboard:!1},this.toolbarItemRef=t(x).createRef(),this.changeColor=(e,t)=>k(e,t,M(this.props.toolbarType))(this.props.editorView.state,this.props.editorView.dispatch),this.changeTextColor=(e,t,o)=>(o||(this.handleOpenChange({isOpen:!1,logCloseEvent:!1}),this.changeColor(e,t),this.props.editorView?.focus()),!1),this.toggleOpen=()=>{this.handleOpenChange({isOpen:!this.state.isOpen,logCloseEvent:!0})},this.onKeyDown=e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),this.setState({isOpenedByKeyboard:!0}),this.toggleOpen())},this.handleOpenChange=({isOpen:e,logCloseEvent:t})=>{this.setState({isOpen:e}),e||this.setState({isOpenedByKeyboard:!1}),t&&this.dispatchAnalyticsEvent(this.buildAnalyticsPalette(e?i("d925B").ACTION.OPENED:i("d925B").ACTION.CLOSED,{noSelect:!1===e}))},this.hide=e=>{let{isOpen:t}=this.state;!0===t&&(this.dispatchAnalyticsEvent(this.buildAnalyticsPalette(i("d925B").ACTION.CLOSED,{noSelect:!0})),this.setState({isOpen:!1}),e instanceof KeyboardEvent&&"Escape"===e.key&&this.toolbarItemRef?.current?.focus())},this.hideonEsc=e=>{this.hide(e),this.toolbarItemRef?.current?.focus()}}}var B=(0,i("gmMgo").default)(L);let D={disabled:!1,isReducedSpacing:!0},U=e=>({color:e.textColorState?.color,defaultColor:e.textColorState?.defaultColor,palette:e.textColorState?.palette,disabled:e.textColorState?.disabled}),K=({api:e,editorView:t,dispatchAnalyticsEvent:o})=>{let{color:n,defaultColor:r,palette:s,disabled:l}=(0,i("eiA8Z").useSharedPluginStateWithSelector)(e,["textColor"],U);return void 0===n||void 0===r||void 0===s?null:(0,a.jsx)(B,{pluginState:{color:n,defaultColor:r,palette:s,disabled:l},isReducedSpacing:D.isReducedSpacing,editorView:t,dispatchAnalyticsEvent:o,disabled:D.disabled,pluginInjectionApi:e,toolbarType:v.FLOATING})};i("42omo");let j=e=>({color:e.textColorState?.color,defaultColor:e.textColorState?.defaultColor,palette:e.textColorState?.palette,disabled:e.textColorState?.disabled}),F=({api:e,isReducedSpacing:t,editorView:o,popupsMountPoint:n,popupsScrollableElement:r,popupsBoundariesElement:s,dispatchAnalyticsEvent:l,disabled:d})=>{let{color:c,defaultColor:p,palette:u,disabled:f}=(0,i("eiA8Z").useSharedPluginStateWithSelector)(e,["textColor"],j);return void 0===c||void 0===p||void 0===u?null:(0,a.jsx)(B,{pluginState:{color:c,defaultColor:p,palette:u,disabled:f},isReducedSpacing:t,editorView:o,popupsMountPoint:n,popupsBoundariesElement:s,popupsScrollableElement:r,dispatchAnalyticsEvent:l,disabled:d,pluginInjectionApi:e,toolbarType:v.PRIMARY})};i("42omo"),i("42omo");let G=({api:e,parents:t})=>{let{formatMessage:o}=(0,i("8C5kA").default)(),n=(0,i("5v3PK").useToolbarDropdownMenu)(),r=n?.closeMenu;return(0,a.jsx)("div",{className:(0,i("gMc0m").default)(["_2rko12b0 _195gv77o _189ee4h9 _1dqonqa1 _1h6d1l7x _19pk12x7"]),children:(0,a.jsx)(i("ccHMk").default,{shouldFitContainer:!0,appearance:"subtle",onClick:o=>{if(!e)return;let n=e.textColor.sharedState.currentState()?.defaultColor;n&&(e.core.actions.execute(({tr:o})=>(e.textColor.commands.changeColor(n,(0,i("4Dsx2").getInputMethodFromParentKeys)(t))({tr:o}),e.highlight?.commands.changeColor({color:i("5qdhe").REMOVE_HIGHLIGHT_COLOR,inputMethod:(0,i("4Dsx2").getInputMethodFromParentKeys)(t)})({tr:o}),o)),r?.(o))},children:(0,a.jsx)(i("iXCQx").default,{weight:"medium",children:o(i("e0nFU").highlightMessages.removeColor)})})})};i("42omo");let H=({label:e,shouldRecommendSmallIcon:o,size:n,spacing:r,testId:s,iconColor:l,isDisabled:d})=>(0,a.jsx)(i("gdv5Z").default,{as:"span",xcss:"_19pk12x7",children:(0,a.jsx)(t(i("5gydP")),{label:e,testId:s,color:d?"var(--ds-icon-disabled, #080F214A)":l,shouldRecommendSmallIcon:o,spacing:r,size:n})});i("42omo");let z=({children:e,highlightColor:t})=>(0,a.jsx)(i("gdv5Z").default,{xcss:"_19itia51 _2rko12b0 _1e0c1txw _1bah1h6o _4cvr1h6o _1bsbgktf _4t3igktf _18u0r5cr _2hwxr5cr",style:{backgroundColor:t},children:e}),V={menu:"_1rjcv77o _18zru2gc"},W=(e,t,o)=>o||!e||e===t&&t?"var(--ds-text, #292A2E)":(0,i("iS6Uy").hexToEditorTextPaletteColor)(e)||"var(--ds-text, #292A2E)",q=e=>{if(e)return(0,i("bWiTS").hexToEditorTextBackgroundPaletteColor)(e)},X=({children:e,api:t})=>{let o=!!t?.highlight,n=(0,i("b3YrF").useSharedPluginStateSelector)(t,"textColor.disabled"),{isDisabled:r}=(0,i("8hoW2").useToolbarUI)(),l=(0,s.expValEquals)("platform_editor_toolbar_aifc_patch_5","isEnabled",!0)?!!(r||n):n,d=(0,i("b3YrF").useSharedPluginStateSelector)(t,"highlight.activeColor"),c=(0,i("b3YrF").useSharedPluginStateSelector)(t,"textColor.color"),{formatMessage:p}=(0,i("8C5kA").default)(),u=(0,i("b3YrF").useSharedPluginStateSelector)(t,"textColor.defaultColor"),f=(0,i("b3YrF").useSharedPluginStateSelector)(t,"textColor.isPaletteOpen"),h=(0,x.useCallback)(e=>{t?.textColor?.commands?.setPalette&&t.core.actions.execute(({tr:o})=>(t.textColor.commands.setPalette(e)({tr:o}),o))},[t?.textColor?.commands,t?.core.actions]);(0,x.useEffect)(()=>()=>{(0,s.expValEquals)("platform_editor_toolbar_aifc_patch_6","isEnabled",!0)&&(0,i("dh538").fg)("platform_editor_toolbar_aifc_patch_7")&&f&&h(!1)},[h,f]);let m=W(c,u,d),g=d||(0,i("1MjGq").getContrastingBackgroundColor)(m);return(0,a.jsx)(i("iIVVb").ToolbarTooltip,{content:(0,a.jsx)(i("hgeg8").ToolTipContent,{description:p(o?i("jOP6v").textColorMessages.textColorHighlightTooltip:i("jOP6v").textColorMessages.textColorTooltip),keymap:i("hgeg8").toggleHighlightPalette}),children:(0,a.jsx)(i("5v3PK").ToolbarDropdownMenuProvider,{isOpen:(0,s.expValEquals)("platform_editor_toolbar_aifc_patch_6","isEnabled",!0)?f:void 0,setIsOpen:(0,s.expValEquals)("platform_editor_toolbar_aifc_patch_6","isEnabled",!0)?h:void 0,children:(0,a.jsx)(i("bTiiT").ToolbarDropdownMenu,{iconBefore:(0,a.jsx)(z,{highlightColor:(0,i("dh538").fg)("platform_editor_toolbar_aifc_patch_8")?q(d):g,children:(0,a.jsx)(H,{label:p(i("jOP6v").textColorMessages.textColorTooltip),iconColor:m,shouldRecommendSmallIcon:!0,size:"small",isDisabled:l,spacing:"compact"})}),isDisabled:l,testId:"text-color-highlight-menu",hasSectionMargin:!1,children:(0,s.expValEquals)("platform_editor_toolbar_aifc_responsive","isEnabled",!0)?e:(0,a.jsx)(i("gdv5Z").default,{xcss:V.menu,children:e})})})})};function $({api:e,parents:t}){let{color:o,defaultColor:n,palette:r}=(0,i("eiA8Z").useSharedPluginStateWithSelector)(e,["textColor"],e=>({color:e.textColorState?.color,defaultColor:e.textColorState?.defaultColor||null,palette:e.textColorState?.palette||[]})),{editorView:s}=(0,i("gzUv9").useEditorToolbar)(),l=(0,i("5v3PK").useToolbarDropdownMenu)(),d=l?.closeMenu,c=(0,x.useCallback)((o,n)=>{s?.state&&s?.dispatch&&e?.textColor?.actions?.changeColor&&(e.textColor.actions.changeColor(o,(0,i("4Dsx2").getInputMethodFromParentKeys)(t))(s.state,s.dispatch),d?.(n))},[s?.state,s?.dispatch,e?.textColor.actions,t,d]),{formatMessage:p}=(0,i("8C5kA").default)();return(0,a.jsxs)(i("eyWa4").default,{xcss:"_zulp12x7",testId:"text-color-menu-item",children:[(0,a.jsx)(i("7hXDW").default,{size:"xxsmall",children:p(i("jOP6v").textColorMessages.textColorTooltip)}),(0,a.jsx)(i("g66hv").default,{onClick:(e,t,o)=>{c(e,o)},selectedColor:o||n,paletteOptions:{palette:r,hexToPaletteColor:i("iS6Uy").hexToEditorTextPaletteColor,paletteColorTooltipMessages:i("8LFdJ").textPaletteTooltipMessages}})]})}i("42omo");let Y=({children:e,parents:t})=>{let o=t.some(e=>e.key===i("cPCP8").TEXT_COLLAPSED_MENU.key);return(0,a.jsx)(i("6UWPx").ToolbarDropdownItemSection,{hasSeparator:o,children:(0,a.jsx)(i("gdv5Z").default,{xcss:"_1rjcv77o _18zru2gc",children:e})})},J=e=>[{...i("cPCP8").TEXT_COLOR_HIGHLIGHT_GROUP,parents:[{...i("cPCP8").TEXT_SECTION,rank:i("4Chin").TEXT_SECTION_RANK[i("cPCP8").TEXT_COLOR_HIGHLIGHT_GROUP.key]},{type:i("cPCP8").TEXT_SECTION_PRIMARY_TOOLBAR.type,key:i("cPCP8").TEXT_SECTION_PRIMARY_TOOLBAR.key,rank:i("4Chin").TEXT_SECTION_PRIMARY_TOOLBAR_RANK[i("cPCP8").TEXT_COLOR_HIGHLIGHT_GROUP.key]}]},{...i("cPCP8").TEXT_COLOR_HIGHLIGHT_MENU,parents:[{...i("cPCP8").TEXT_COLOR_HIGHLIGHT_GROUP,rank:i("4Chin").TEXT_COLOR_HIGHLIGHT_GROUP_RANK[i("cPCP8").TEXT_COLOR_HIGHLIGHT_MENU.key]}],component:({children:t})=>(0,a.jsx)(X,{api:e,children:t})},{...i("cPCP8").TEXT_COLOR_HIGHLIGHT_MENU_SECTION,parents:[{...i("cPCP8").TEXT_COLOR_HIGHLIGHT_MENU,rank:i("4Chin").TEXT_COLOR_HIGHLIGHT_MENU_RANK[i("cPCP8").TEXT_COLOR_HIGHLIGHT_MENU_SECTION.key]},...(0,s.expValEquals)("platform_editor_toolbar_aifc_responsive","isEnabled",!0)?[{type:i("cPCP8").TEXT_COLLAPSED_MENU.type,key:i("cPCP8").TEXT_COLLAPSED_MENU.key,rank:i("4Chin").TEXT_COLLAPSED_MENU_RANK[i("cPCP8").TEXT_COLOR_HIGHLIGHT_MENU_SECTION.key]}]:[]],component:(0,s.expValEquals)("platform_editor_toolbar_aifc_responsive","isEnabled",!0)?Y:void 0},{...i("cPCP8").TEXT_COLOR_MENU_ITEM,parents:[{...i("cPCP8").TEXT_COLOR_HIGHLIGHT_MENU_SECTION,rank:i("4Chin").TEXT_COLOR_HIGHLIGHT_MENU_SECTION_RANK[i("cPCP8").TEXT_COLOR_MENU_ITEM.key]}],component:({parents:t})=>(0,a.jsx)($,{api:e,parents:t})},...(0,s.expValEquals)("platform_editor_toolbar_aifc_patch_4","isEnabled",!0)?[{...i("cPCP8").CLEAR_COLOR_MENU_ITEM,parents:[{...i("cPCP8").TEXT_COLOR_HIGHLIGHT_MENU_SECTION,rank:i("4Chin").TEXT_COLOR_HIGHLIGHT_MENU_SECTION_RANK[i("cPCP8").CLEAR_COLOR_MENU_ITEM.key]}],component:({parents:t})=>(0,a.jsx)(G,{api:e,parents:t})}]:[]],Z=e=>{if(e&&"boolean"!=typeof e)return e};e.exports.textColorPlugin=({config:e,api:t})=>{let o=!!t?.toolbar,n=({editorView:e,popupsMountPoint:o,popupsBoundariesElement:n,popupsScrollableElement:r,isToolbarReducedSpacing:i,dispatchAnalyticsEvent:s,disabled:l})=>e?(0,a.jsx)(F,{isReducedSpacing:i,editorView:e,popupsMountPoint:o,popupsBoundariesElement:n,popupsScrollableElement:r,dispatchAnalyticsEvent:s,disabled:l,api:t}):null;return o?t?.toolbar?.actions.registerComponents&&t.toolbar.actions.registerComponents(J(t)):t?.primaryToolbar?.actions.registerComponent({name:"textColor",component:n}),{name:"textColor",marks:()=>[{name:"textColor",mark:i("9GzMM").textColor}],pmPlugins:()=>o&&(0,s.expValEquals)("platform_editor_toolbar_aifc_patch_6","isEnabled",!0)?[{name:"textColor",plugin:({dispatch:t})=>E(t,Z(e))},{name:"textColorKeymap",plugin:()=>(function({api:e}){let t={};return i("hgeg8").toggleHighlightPalette.common&&(0,i("hgeg8").bindKeymapWithEditorCommand)(i("hgeg8").toggleHighlightPalette.common,_(e),t),(0,i("60bKU").keymap)(t)})({api:t})}]:[{name:"textColor",plugin:({dispatch:t})=>E(t,Z(e))}],getSharedState(e){if(e)return T.getState(e)},actions:{changeColor:(e,o)=>k(e,t?.analytics?.actions,o)},commands:{changeColor:(e,o)=>y(e,t,o),setPalette:e=>C(e)},pluginsOptions:o?{}:{selectionToolbar:()=>"none"===((0,i("dh538").fg)("platform_editor_use_preferences_plugin")?t?.userPreferences?.sharedState?.currentState()?.preferences.toolbarDockingPosition:t?.selectionToolbar?.sharedState?.currentState()?.toolbarDocking)&&(0,l.editorExperiment)("platform_editor_controls","variant1",{exposure:!0})?{isToolbarAbove:!0,items:[{type:"custom",render:(e,o,n)=>{if(e)return(0,a.jsx)(K,{editorView:e,dispatchAnalyticsEvent:n,api:t})},fallback:[]}],rank:6,pluginName:"textColor"}:void 0},primaryToolbarComponent:t?.primaryToolbar?void 0:n}}}),a("5qdhe",function(e,t){let o="#00000000",n=e=>(0,i("9K4OG").jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:e.style},(0,i("9K4OG").jsx)("rect",{width:"24",height:"24",fill:"white",fillOpacity:"0.01"}),(0,i("9K4OG").jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.2038 7.70388C17.5955 8.09565 17.5941 8.73128 17.2005 9.12127L9.1213 17.1277C8.73027 17.5152 8.09958 17.5138 7.71031 17.1245C7.31854 16.7328 7.31997 16.0971 7.71351 15.7071L15.7928 7.70069C16.1838 7.31318 16.8145 7.31461 17.2038 7.70388Z",fill:"currentColor",fillOpacity:"0.5"})),r=()=>{let{colorMode:e}=(0,i("cOrQJ").default)();return(0,i("9K4OG").jsx)(n,{"aria-label":"",style:{color:"dark"===e?"var(--ds-background-accent-gray-bolder, #626F86)":"var(--ds-background-accent-gray-subtle, #8590A2)"}})},a=[{value:o,label:"No color",border:"var(--ds-border, #091E4224)",message:(0,i("hMewq").default)(i("fWSjz").default,"no-color"),decorator:(0,i("9K4OG").jsx)(r,null)}];i("jvymJ").backgroundColorPalette.forEach((e,t)=>{a.push((0,i("3iy7Q").mapPaletteColor)(e,t))});let s=[{value:o,label:"No color",border:"var(--ds-border, #091E4224)",message:(0,i("hMewq").default)(i("fWSjz").default,"no-color"),decorator:(0,i("9K4OG").jsx)(r,null)}];i("jvymJ").backgroundColorPaletteNext.forEach((e,t)=>{s.push((0,i("3iy7Q").mapPaletteColor)(e,t))}),e.exports.REMOVE_HIGHLIGHT_COLOR=o,e.exports.highlightColorPalette=a,e.exports.highlightColorPaletteNext=s}),a("g66hv",function(e,o){var n=i("l998X"),r=i("42omo"),a=i("lcPXp");let s=(0,r.memo)(({autoFocus:e,tabIndex:o,value:a,label:s,isSelected:l,borderColor:d,checkMarkColor:c="var(--ds-icon-inverse, #FFFFFF)",hexToPaletteColor:p,decorator:u,onClick:f,onKeyDown:h})=>{let m=p?p(a):a,g=(0,r.useCallback)(e=>{e.preventDefault()},[]),T=(0,r.useCallback)(e=>{e.preventDefault(),f(a,s,e)},[f,a,s]),E=(0,r.useCallback)(e=>{h&&(e.preventDefault(),h(a,s,e))},[h,a,s]);return(0,n.jsx)(i("3gadb").default,{content:s,children:(0,n.jsx)("span",{className:(0,i("gMc0m").default)(["_2rko12b0 _1h6d1j28 _1dqonqa1 _189ee4h9 _1e0c1txw _4cvr1h6o _ca0qv77o _u5f3v77o _n3tdv77o _19bvv77o _858u1l7x _jyzf1l7x _4cvx1l7x"]),children:(0,n.jsxs)("button",{type:"button","aria-label":s,role:"radio","aria-checked":l,onClick:T,onKeyDown:E,onMouseDown:g,tabIndex:o,style:{backgroundColor:m||"var(--ds-background-input, #FFFFFF)",border:`var(--ds-border-width, 1px) solid ${d}`},autoFocus:e,className:(0,i("gMc0m").default)(["_ca0qidpf _u5f3idpf _n3tdidpf _19bvidpf _2rko12b0 _19it1ps9 _4t3i1ejb _1bsb1ejb _bfhki8nm _80omtlke _1e0c1ule _kqswh2mm _y2mvdfik _1bg4v77o"]),children:[!u&&l&&(0,n.jsx)(t(i("cvXh8")),{color:c,LEGACY_primaryColor:c,label:""}),u]})})})});function l(e,t){let o=e[t];return o||console.warn(`Color palette does not have an internationalization message for color ${t.toUpperCase()}.
You must add a message description to properly translate this color.
Using current label as default message.
This could have happened when someone changed the 'colorPalette' from 'adf-schema' without updating this file.
`),o}let d=({cols:e=i("1MjGq").DEFAULT_COLOR_PICKER_COLUMNS,onClick:t,onKeyDown:o,selectedColor:d,paletteOptions:c})=>{let{formatMessage:p}=(0,i("8C5kA").default)(),{palette:u,hexToPaletteColor:f,paletteColorTooltipMessages:h}=c,{colorMode:m}=(0,i("cOrQJ").default)(),g=!!f,T=(0,r.useRef)(null),E=(0,r.useRef)({row:0,col:0}),b=(0,r.useMemo)(()=>(0,i("1MjGq").getColorsPerRowFromPalette)(u,e),[u,e]),{selectedRowIndex:S,selectedColumnIndex:y}=(0,r.useMemo)(()=>(0,i("1MjGq").getSelectedRowAndColumnFromPalette)(u,d,e),[u,d,e]),_=(0,r.useCallback)((e,t)=>{if(!T.current)return;let o=T.current.children[e];if(!(o instanceof HTMLElement))return;let n=o.children[t]?.querySelector?.("button"),r=n instanceof HTMLButtonElement?n:null;r&&(r.focus(),E.current={row:e,col:t})},[]);(0,r.useEffect)(()=>{S>=0&&y>=0?E.current={row:S,col:y}:E.current={row:0,col:0}},[S,y]);let C=(0,r.useCallback)((e,n,r)=>{let{row:i,col:a}=E.current,s=b.length-1,l=b[i]?.length-1||0;switch(r.key){case"ArrowRight":r.preventDefault(),a<l?_(i,a+1):i<s?_(i+1,0):_(0,0);break;case"ArrowLeft":if(r.preventDefault(),a>0)_(i,a-1);else if(i>0){let e=b[i-1]?.length-1||0;_(i-1,e)}else{let e=b[s]?.length-1||0;_(s,e)}break;case"ArrowDown":if(r.preventDefault(),i<s){let e=Math.min(a,b[i+1]?.length-1||0);_(i+1,e)}else _(0,Math.min(a,b[0]?.length-1||0));break;case"ArrowUp":if(r.preventDefault(),i>0){let e=Math.min(a,b[i-1]?.length-1||0);_(i-1,e)}else{let e=Math.min(a,b[s]?.length-1||0);_(s,e)}break;case"Home":r.preventDefault(),_(i,0);break;case"End":r.preventDefault(),_(i,l);break;case"PageUp":r.preventDefault(),_(0,a);break;case"PageDown":{r.preventDefault();let e=Math.min(a,b[s]?.length-1||0);_(s,e);break}case"Tab":default:o&&o(e,n,r);break;case"Enter":case" ":r.preventDefault(),t(e,n,r)}},[b,_,t,o]);return(0,n.jsx)(i("d8SNb").default,{gap:"space.050",ref:T,role:"group",children:b.map((e,o)=>(0,n.jsx)(i("u9agA").default,{rowSpace:"space.050",role:"radiogroup",children:e.map(({value:e,label:r,border:c,message:u,decorator:T},E)=>{let b=u;h&&("dark"===m&&(b=l(h.dark,e.toUpperCase())),"light"===m&&(b=l(h.light,e.toUpperCase())));let S=e===d,y=S||!d&&0===o&&0===E;return(0,n.jsx)(s,{value:e,borderColor:c,label:b?p(b):r,onClick:t,onKeyDown:C,isSelected:S,checkMarkColor:function(e,t){let o=(0,i("1MjGq").getTokenCSSVariableValue)(e)||e,n=["#FFFFFF","#42526E"].sort((e,t)=>a.default.difference(t,o)-a.default.difference(e,o))[0];return t?"#FFFFFF"===n?"var(--ds-icon-inverse, #FFFFFF)":"var(--ds-icon, #292A2E)":n}(e,g),hexToPaletteColor:f,decorator:T,tabIndex:y?0:-1},e)})},`row-first-color-${e[0].value}`))})};e.exports.default=d}),a("5zfRA",function(t,o){e(t.exports,"insertBlockPlugin",()=>i("cVhn8").insertBlockPlugin),i("cVhn8")}),a("cVhn8",function(e,o){var n=i("l998X"),r=i("42omo"),a=i("ism5g"),s=i("iu6m9");let l=new(0,i("ks2lK").PluginKey)("toggleInsertBlockPmKey"),d=()=>new(0,i("1S4f7").SafePlugin)({key:l,state:{init:()=>({showElementBrowser:!1}),apply:(e,t)=>e.getMeta(l)?{showElementBrowser:!t.showElementBrowser}:t}});i("42omo");var c=i("1oCLl");i("42omo");let p=({api:e})=>{let{formatMessage:o}=(0,i("8C5kA").default)(),{editorView:r}=(0,i("gzUv9").useEditorToolbar)();return e?.codeBlock?(0,n.jsx)(i("iIVVb").ToolbarTooltip,{content:(0,n.jsx)(i("hgeg8").ToolTipContent,{description:o(i("2UWDO").messages.codeblock),keymap:i("hgeg8").toggleCodeBlock}),children:(0,n.jsx)(i("7ERUE").ToolbarButton,{iconBefore:(0,n.jsx)(t(i("eIlE7")),{label:o(i("2UWDO").messages.codeblock),size:"small"}),onClick:()=>{r&&e?.codeBlock?.actions.insertCodeBlock(i("d925B").INPUT_METHOD.TOOLBAR)(r.state,r.dispatch)},ariaKeyshortcuts:(0,i("hgeg8").getAriaKeyshortcuts)(i("hgeg8").toggleCodeBlock)})}):null},u=e=>{if(e.toolbarShowPlusInsertOnly)return{codeBlock:{enabled:!1},emoji:{enabled:!1},insert:{enabled:!0},layout:{enabled:!1},media:{enabled:!1},mention:{enabled:!1},table:{enabled:!1},taskList:{enabled:!1}};if(!e.toolbarButtons)return{codeBlock:{enabled:!1},emoji:{enabled:!0},insert:{enabled:!0},layout:{enabled:!0},media:{enabled:!0},mention:{enabled:!0},table:{enabled:!0},taskList:{enabled:!0}};let t={enabled:!1,showAt:"lg"},o=e=>({enabled:e?.enabled??t.enabled,showAt:e?.showAt??t.showAt});return{codeBlock:o(e.toolbarButtons?.codeBlock),emoji:o(e.toolbarButtons?.emoji),insert:o(e.toolbarButtons?.insert),layout:o(e.toolbarButtons?.layout),media:o(e.toolbarButtons?.media),mention:o(e.toolbarButtons?.mention),table:o(e.toolbarButtons?.table),taskList:o(e.toolbarButtons?.taskList)}},f=e=>!document.body.contains(e),h=(e={})=>{let[t,o]=(0,r.useState)(!1),[n,i]=(0,r.useState)(!1),a=(0,r.useCallback)(n=>{let r=!t;o(r),r?e.onOpen?.(n):e.onClose?.(),e.analytics?.onToggle?.(r,n)},[t,e]),s=(0,r.useCallback)(()=>{o(!1),e.onClose?.(),e.analytics?.onToggle?.(!1)},[e]),l=(0,r.useCallback)(()=>{s(),e.focusTarget?.current?.focus()},[s,e.focusTarget]),d=(0,r.useCallback)(e=>{e.target instanceof HTMLElement&&!f(e.target)&&s()},[s]);return{isOpen:t,isOpenedByKeyboard:n,toggle:a,close:s,handleEscapeKeydown:l,handleClickOutside:d,handleKeyboardOpen:(0,r.useCallback)(e=>{("Enter"===e.key||" "===e.key)&&(i(!0),e.preventDefault())},[])}},m=({api:e,buttonRef:t})=>{let o=h({focusTarget:t,analytics:{onToggle:t=>{t&&e?.analytics?.actions.fireAnalyticsEvent({action:i("d925B").ACTION.OPENED,actionSubject:i("d925B").ACTION_SUBJECT.PICKER,actionSubjectId:i("d925B").ACTION_SUBJECT_ID.PICKER_EMOJI,attributes:{inputMethod:i("d925B").INPUT_METHOD.TOOLBAR},eventType:i("d925B").EVENT_TYPE.UI})}}}),n=(0,r.useCallback)(t=>(e?.core.actions.focus(),e?.core.actions.execute(e?.emoji?.commands.insertEmoji(t,i("d925B").INPUT_METHOD.PICKER)),o.close(),!0),[e,o]),a=(0,r.useCallback)(()=>{requestAnimationFrame(()=>e?.core.actions.focus())},[e]);return{...o,handleSelectedEmoji:n,onPopupUnmount:a}},g=(0,i("efG2U").default)(e=>{let o=t(r).useContext(i("efG2U").OutsideClickTargetRefContext);return(0,n.jsx)(i("lGf1F").default,{onPickerRef:o,emojiProvider:e.emojiProvider,onSelection:e.onSelection})}),T=({isOpen:e,targetRef:t,emojiProvider:o,onSelection:r,onClickOutside:a,onEscapeKeydown:s,onUnmount:l,popupsMountPoint:d,popupsBoundariesElement:c,popupsScrollableElement:p})=>e&&t.current&&o?(0,n.jsx)(i("jwWgu").default,{target:t.current,fitHeight:350,fitWidth:350,offset:[0,3],mountTo:d,boundariesElement:c,scrollableElement:p,onUnmount:l,focusTrap:!0,zIndex:i("aFUXX").akEditorMenuZIndex,children:(0,n.jsx)(g,{emojiProvider:o,onSelection:r,handleClickOutside:a,handleEscapeKeydown:s})}):null,E=({api:e})=>{let{formatMessage:o}=(0,i("8C5kA").default)(),a=(0,r.useRef)(null),{popupsMountPoint:s,popupsBoundariesElement:l,popupsScrollableElement:d}=(0,i("8hoW2").useToolbarUI)(),{emojiProviderSelector:p,emojiProviderPromise:u,isTypeAheadAllowed:f}=(0,i("eiA8Z").useSharedPluginStateWithSelector)(e,["emoji","typeAhead"],e=>({emojiProviderSelector:e.emojiState?.emojiProvider,emojiProviderPromise:e.emojiState?.emojiProviderPromise,isTypeAheadAllowed:e.typeAheadState?.isAllowed})),h=m({api:e,buttonRef:a});if(!e?.emoji)return null;let g=(0,c.expValEquals)("platform_editor_prevent_toolbar_layout_shifts","isEnabled",!0)?u:(()=>{if(p)return Promise.resolve(p)})();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(T,{isOpen:h.isOpen,targetRef:a,emojiProvider:g,onSelection:h.handleSelectedEmoji,onClickOutside:h.handleClickOutside,onEscapeKeydown:h.handleEscapeKeydown,onUnmount:h.onPopupUnmount,popupsMountPoint:s,popupsBoundariesElement:l,popupsScrollableElement:d}),(0,n.jsx)(i("iIVVb").ToolbarTooltip,{content:(0,c.expValEquals)("platform_editor_toolbar_aifc_patch_6","isEnabled",!0)?(0,n.jsx)(i("hgeg8").ToolTipContent,{description:o(i("4HWgE").toolbarInsertBlockMessages.emoji),keymap:i("hgeg8").insertEmoji}):o(i("4HWgE").toolbarInsertBlockMessages.emoji),children:(0,n.jsx)(i("7ERUE").ToolbarButton,{iconBefore:(0,n.jsx)(t(i("9eEg2")),{label:o(i("4HWgE").toolbarInsertBlockMessages.emoji),size:"small"}),ariaKeyshortcuts:"Shift+;",ref:a,onClick:()=>h.toggle(),isSelected:h.isOpen,isDisabled:!f||!g})})]})};i("42omo");let b=({api:e})=>{let{formatMessage:o}=(0,i("8C5kA").default)(),{connectivityMode:r,imageUploadEnabled:a}=(0,i("eiA8Z").useSharedPluginStateWithSelector)(e,["connectivity","imageUpload"],e=>({connectivityMode:e.connectivityState?.mode,imageUploadEnabled:e.imageUploadState?.enabled})),{editorView:s}=(0,i("gzUv9").useEditorToolbar)(),l=(0,i("91bcx").isOfflineMode)(r);return(0,n.jsx)(i("iIVVb").ToolbarTooltip,{content:o(i("4HWgE").toolbarInsertBlockMessages.image),children:(0,n.jsx)(i("7ERUE").ToolbarButton,{iconBefore:(0,n.jsx)(t(i("fZtQj")),{label:o(i("4HWgE").toolbarInsertBlockMessages.image),size:"small"}),onClick:()=>{if(s){let{state:t,dispatch:o}=s;e?.imageUpload?.actions.startUpload()(t,o)}},isDisabled:!a||l})})};var S=i("cLwe6"),y=i("3pLGZ"),_=i("aeAfU");let C=(e,t)=>{if((0,i("dh538").fg)("confluence-whiteboards-quick-insert-eligible")){let[o,n]=["Create diagram","Create whiteboard"];if(2===e.filter(e=>[o,n].includes(e.title)).length){let r=(e,r)=>{let a=e.findIndex(e=>e.title===r),s=e.filter(e=>![o,n].includes(e.title));if(-1===a)return s;let l={...e[a]};return l.description=t(i("auDHv").messages.featuredWhiteboardDescription),[l,...s]};return(0,c.expValEquals)("confluence_whiteboards_quick_insert","cohort","test_blank")?r(e,n):(0,c.expValEquals)("confluence_whiteboards_quick_insert","cohort","test_diagram")?r(e,o):e.filter(e=>![o,n].includes(e.title))}if((0,i("dh538").fg)("confluence-whiteboards-quick-insert-l10n-eligible")){(0,_.expVal)("confluence_whiteboards_quick_insert_localised_aa","cohort","test_diagram");let o="whiteboard-extension:create-whiteboard",n="whiteboard-extension:create-diagram",r=e=>e.key===o,a=e=>e.key===n;if(e.some(r)&&e.some(a)){let s=o=>{let n=e.findIndex(e=>e.key===o),s=e.filter(e=>!r(e)&&!a(e));return -1===n?s:[{...e[n],description:t(i("auDHv").messages.featuredWhiteboardDescription)},...s]};if((0,c.expValEquals)("confluence_whiteboards_quick_insert_localised","cohort","test_blank"))return s(o);if((0,c.expValEquals)("confluence_whiteboards_quick_insert_localised","cohort","test_diagram"))return s(n);(0,c.expValEquals)("confluence_whiteboards_quick_insert_localised","cohort","control")}}}return e},I=e=>({connectivityMode:e.connectivityState?.mode}),O=({name:e})=>{let t={codeblock:y.IconCode,panel:y.IconPanel,blockquote:y.IconQuote,decision:y.IconDecision,horizontalrule:y.IconDivider,expand:y.IconExpand,date:y.IconDate,status:y.IconStatus}[e];return t?(0,i("9K4OG").jsx)(t,{label:""}):void 0},k=(e,t)=>(0,i("9K4OG").css)({display:"flex",flexDirection:"column",width:"320px",height:`${e}px`,backgroundColor:`var(--ds-surface-overlay, ${i("6fnsQ").N0})`,borderRadius:"var(--ds-radius-small, 3px)",boxShadow:`var(--ds-shadow-overlay, 0 0 0 1px ${i("6fnsQ").N30A},
    0 2px 1px ${i("6fnsQ").N30A},
    0 0 20px -6px ${i("6fnsQ").N60A})`}),v={name:"1wlc510",styles:"display:flex;flex:1;box-sizing:border-box;overflow:hidden"},x=(0,i("efG2U").default)(e=>{let t=(0,r.useContext)(i("efG2U").OutsideClickTargetRefContext),{children:o,...n}=e;return(0,i("9K4OG").jsx)("div",{ref:t,css:v,...n},o)});var N=({editorView:e,dropdownItems:t,showElementBrowserLink:o,onInsert:n,toggleVisiblity:s,pluginInjectionApi:l,isFullPageAppearance:d})=>{let[c,p]=(0,r.useState)(0),[u,f]=(0,r.useState)(560),{formatMessage:h}=(0,i("8C5kA").default)(),m=(0,r.useMemo)(()=>new(0,S.CellMeasurerCache)({fixedWidth:!0,defaultHeight:i("dK4ZR").ELEMENT_ITEM_HEIGHT,minHeight:i("dK4ZR").ELEMENT_ITEM_HEIGHT}),[]);(0,r.useLayoutEffect)(()=>{let e=[...Array(c)].reduce((e,t,o)=>e+m.rowHeight({index:o}),0)+128;c>0&&e<560?f(e):f(560)},[m,c]);let g=(0,r.useCallback)(e=>({title:e.content,description:e.tooltipDescription,keyshortcut:e.shortcut,icon:()=>O({name:e.value.name})||e.elemBefore,action:()=>n({item:e}),onClick:e.onClick,value:e.value}),[n]),T=t.map(g),E=!(0,i("dh538").fg)("platform_editor_refactor_view_more")&&o?T.pop():void 0,b=(0,r.useCallback)(t=>{s(),e.hasFocus()||e.focus(),l?.quickInsert?.actions.insertItem(t,i("d925B").INPUT_METHOD.TOOLBAR)(e.state,e.dispatch)},[e,s,l]),{connectivityMode:y}=(0,i("eiA8Z").useSharedPluginStateWithSelector)(l,["connectivity"],I),_=(0,r.useCallback)((e,t)=>{let o;if(e)o=l?.quickInsert?.actions.getSuggestions({query:e,category:t})?.map(e=>(0,i("91bcx").isOfflineMode)(y)&&e.isDisabledOffline?{...e,isDisabled:!0}:e)??[];else{let e=l?.quickInsert?.actions.getSuggestions({category:t,featuredItems:!0})?.map(e=>(0,i("91bcx").isOfflineMode)(y)&&e.isDisabledOffline?{...e,isDisabled:!0}:e)??[];o=C(T.concat(e),h)}return p(o.length),o},[l?.quickInsert?.actions,T,y,h]),v=l?.quickInsert?.sharedState.currentState()?.emptyStateHandler,N=(0,r.useCallback)(()=>{s(),l?.core?.actions.execute(l?.quickInsert?.commands.openElementBrowserModal)},[l,s]);return(0,i("9K4OG").jsx)("div",{css:k(u,d)},(0,i("9K4OG").jsx)(x,{handleClickOutside:s,handleEscapeKeydown:s,closeOnTab:!1},(0,i("9K4OG").jsx)(a.default,{mode:"inline",getItems:_,emptyStateHandler:v,onInsertItem:b,showSearch:!0,showCategories:!1,key:T.length,viewMoreItem:E,onViewMore:o?N:void 0,cache:m})))};let A={action:"taskList",media:"media","image upload":"media",mention:"mention",emoji:"emoji",table:"table",layout:"layout",codeblock:"codeBlock"},P="link",M=["sm","md","lg","xl"];i("42omo");var R=i("5d9b4");i("42omo");let w=([e],[t])=>!Object.keys(e).some(o=>e[o]!==t[o]),L=e=>({content:e.content,tooltipDescription:e.tooltipDescription,value:{name:e.name},elemBefore:(0,i("9K4OG").jsx)(e.Icon,{label:"",color:"currentColor",spacing:"spacious"}),elemAfter:e.shortcut?(0,i("9K4OG").jsx)("div",{css:i("6f5RK").shortcutStyle},e.shortcut):void 0,"aria-label":e.shortcut?e.content+" "+e.shortcut:e.content,"aria-haspopup":e["aria-haspopup"],"aria-keyshortcuts":e["aria-keyshortcuts"],shortcut:e.shortcut,isDisabled:e.disabled}),B=e=>(0,i("2XqLN").default)(e,w),D=B(e=>L({content:e.content,tooltipDescription:e.tooltipDescription,disabled:e.disabled,name:"action",shortcut:"[]",Icon:()=>(0,i("9K4OG").jsx)(t(i("dmbve")),{label:"",color:"currentColor",spacing:"spacious"}),"aria-keyshortcuts":"[ ] Space"})),U=B(e=>L({content:e.content,tooltipDescription:e.tooltipDescription,disabled:e.disabled,name:"link",shortcut:(0,i("hgeg8").tooltip)(i("hgeg8").addLink),Icon:t(i("1bY7o")),"aria-haspopup":e["aria-haspopup"],"aria-keyshortcuts":(0,i("hgeg8").getAriaKeyshortcuts)(i("hgeg8").addLink)})),K=B(e=>L({content:e.content,tooltipDescription:e.tooltipDescription,disabled:e.disabled,name:"media",Icon:t(i("fZtQj"))})),j=B(e=>L({content:e.content,tooltipDescription:e.tooltipDescription,disabled:e.disabled,name:"image upload",Icon:t(i("fZtQj"))})),F=B(e=>L({content:e.content,tooltipDescription:e.tooltipDescription,disabled:e.disabled,name:"mention",Icon:t(i("b4wUN")),shortcut:"@","aria-haspopup":e["aria-haspopup"],"aria-keyshortcuts":"Shift+2 Space"})),G=B(e=>L({content:e.content,tooltipDescription:e.tooltipDescription,disabled:e.disabled,name:"emoji",Icon:t(i("9eEg2")),shortcut:":","aria-haspopup":e["aria-haspopup"],"aria-keyshortcuts":"Shift+;"})),H=B(e=>L({content:e.content,tooltipDescription:e.tooltipDescription,disabled:e.disabled,name:"table",Icon:t(i("dk0le")),shortcut:(0,i("hgeg8").tooltip)(i("hgeg8").toggleTable),"aria-keyshortcuts":(0,i("hgeg8").getAriaKeyshortcuts)(i("hgeg8").toggleTable)})),z=B(e=>L({content:e.content,tooltipDescription:e.tooltipDescription,disabled:e.disabled,name:"table selector",Icon:()=>(0,i("9K4OG").jsx)(t(i("7kzZ3")),{label:"",color:"currentColor",size:"small"})})),V=B(e=>L({content:e.content,tooltipDescription:e.tooltipDescription,disabled:e.disabled,name:"layout",Icon:t(i("asgOl"))})),W=B(e=>L({content:e.content,tooltipDescription:e.tooltipDescription,disabled:e.disabled,name:"codeblock",Icon:t(i("eIlE7")),shortcut:e.shortcut,"aria-keyshortcuts":(0,i("hgeg8").getAriaKeyshortcuts)(e.shortcut)})),q=B(e=>L({content:e.content,tooltipDescription:e.tooltipDescription,disabled:e.disabled,name:"panel",Icon:t(i("eXmBZ")),shortcut:e.shortcut,"aria-keyshortcuts":(0,i("hgeg8").getAriaKeyshortcuts)(e.shortcut)})),X=B(e=>L({content:e.content,tooltipDescription:e.tooltipDescription,disabled:e.disabled,name:"blockquote",Icon:t(i("9RVmI")),shortcut:e.shortcut,"aria-keyshortcuts":"Shift+. Space"})),$=B(e=>L({content:e.content,tooltipDescription:e.tooltipDescription,disabled:e.disabled,name:"decision",Icon:t(i("ejBUP")),shortcut:"<>","aria-keyshortcuts":"Shift+, Shift+. Space"})),Y=B(e=>L({content:e.content,tooltipDescription:e.tooltipDescription,disabled:e.disabled,name:"horizontalrule",Icon:t(i("5Yp2m")),shortcut:"---","aria-keyshortcuts":"- - -"})),J=B(e=>L({content:e.content,tooltipDescription:e.tooltipDescription,disabled:e.disabled,name:"expand",Icon:e=>(0,i("9K4OG").jsx)(t(i("6R5uz")),{label:e.label,size:"small"})})),Z=B(e=>L({content:e.content,tooltipDescription:e.tooltipDescription,disabled:e.disabled,name:"date",Icon:t(i("8DN9t")),shortcut:"//","aria-keyshortcuts":"/ / Enter"})),Q=B(e=>L({content:e.content,tooltipDescription:e.tooltipDescription,disabled:e.disabled,name:"placeholder text",Icon:()=>(0,i("9K4OG").jsx)(t(i("cc99d")),{label:"",spacing:"spacious",color:"currentColor"})})),ee=B(e=>L({content:e.content,tooltipDescription:e.tooltipDescription,disabled:e.disabled,name:"status",Icon:()=>(0,i("9K4OG").jsx)(t(i("a8Q4n")),{label:"",color:"currentColor",spacing:"spacious"})})),et=B(e=>L({content:e.content,tooltipDescription:e.tooltipDescription,disabled:e.disabled,name:"macro",Icon:()=>(0,i("9K4OG").jsx)(t(i("9VJDA")),{label:"",color:"currentColor"})})),eo=t(R)(e=>({...e,title:(0,n.jsx)(i("hgeg8").ToolTipContent,{description:e.content,shortcutOverride:e.shortcut})})),en=(0,i("2XqLN").default)(e=>t(R)(t=>({...t,title:(0,n.jsx)(i("hgeg8").ToolTipContent,{description:e,shortcutOverride:"/"})}))),er=(0,i("2XqLN").default)(e=>{let{isTypeAheadAllowed:t,tableSupported:o,tableSelectorSupported:n,mediaUploadsEnabled:r,mediaSupported:a,imageUploadSupported:l,imageUploadEnabled:d,mentionsSupported:c,mentionsDisabled:p,availableWrapperBlockTypes:u,actionSupported:f,decisionSupported:h,showElementBrowserLink:m,linkSupported:g,linkDisabled:T,emojiDisabled:E,emojiProvider:b,hasEmojiPlugin:S,hasMentionsPlugin:y,hasMediaPlugin:_,nativeStatusSupported:C,insertMenuItems:I,dateEnabled:O,placeholderTextEnabled:k,horizontalRuleEnabled:v,layoutSectionEnabled:x,expandEnabled:N,numberOfButtons:A,schema:P,formatMessage:M,isEditorOffline:R}=e,w=[],L=!0===R;if(f&&w.push(D({content:M(i("4HWgE").toolbarInsertBlockMessages.action),tooltipDescription:M(i("4HWgE").toolbarInsertBlockMessages.actionDescription),disabled:!1})),g&&w.push(U({content:M(i("4HWgE").toolbarInsertBlockMessages.link),tooltipDescription:M(i("4HWgE").toolbarInsertBlockMessages.linkDescription),disabled:!!T,"aria-haspopup":"dialog"})),(0,s.editorExperiment)("platform_editor_prevent_toolbar_layout_shifts",!0)?(l?w.push(j({content:M(i("4HWgE").toolbarInsertBlockMessages.image),disabled:!d||L})):_&&w.push(K({content:M(i("4HWgE").toolbarInsertBlockMessages.addMediaFiles),tooltipDescription:M(i("4HWgE").toolbarInsertBlockMessages.mediaFilesDescription),disabled:L||!a||!r})),y&&w.push(F({content:M(i("4HWgE").toolbarInsertBlockMessages.mention),tooltipDescription:M(i("4HWgE").toolbarInsertBlockMessages.mentionDescription),disabled:!t||!!p||!c,"aria-haspopup":"listbox"})),S&&w.push(G({content:M(i("4HWgE").toolbarInsertBlockMessages.emoji),tooltipDescription:M(i("4HWgE").toolbarInsertBlockMessages.emojiDescription),disabled:E||!t||!b,"aria-haspopup":"dialog"}))):(a&&r&&w.push(K({content:M(i("4HWgE").toolbarInsertBlockMessages.addMediaFiles),tooltipDescription:M(i("4HWgE").toolbarInsertBlockMessages.mediaFilesDescription),disabled:L})),l&&w.push(j({content:M(i("4HWgE").toolbarInsertBlockMessages.image),disabled:!d||L})),c&&w.push(F({content:M(i("4HWgE").toolbarInsertBlockMessages.mention),tooltipDescription:M(i("4HWgE").toolbarInsertBlockMessages.mentionDescription),disabled:!t||!!p,"aria-haspopup":"listbox"})),b&&w.push(G({content:M(i("4HWgE").toolbarInsertBlockMessages.emoji),tooltipDescription:M(i("4HWgE").toolbarInsertBlockMessages.emojiDescription),disabled:E||!t,"aria-haspopup":"dialog"}))),o&&w.push(H({content:M(i("4HWgE").toolbarInsertBlockMessages.table),tooltipDescription:M(i("4HWgE").toolbarInsertBlockMessages.tableDescription),disabled:!1})),o&&n&&w.push(z({content:M(i("4HWgE").toolbarInsertBlockMessages.tableSelector),tooltipDescription:M(i("4HWgE").toolbarInsertBlockMessages.tableSelectorDescription),disabled:!1})),x){let e=M(i("4HWgE").toolbarInsertBlockMessages.columns);w.push(V({content:e,tooltipDescription:M(i("4HWgE").toolbarInsertBlockMessages.columnsDescription),disabled:!1}))}let B=u||[],er=B.find(e=>"codeblock"===e.name),ei=B.find(e=>"panel"===e.name),ea=B.find(e=>"blockquote"===e.name);if(er&&w.push(W({content:M(er.title),tooltipDescription:M(i("2UWDO").messages.codeblockDescription),disabled:!1,shortcut:"```"})),ei&&w.push(q({content:M(ei.title),tooltipDescription:M(i("2UWDO").messages.infoPanelDescription),disabled:!1})),ea&&w.push(X({content:M(ea.title),tooltipDescription:M(i("2UWDO").messages.blockquoteDescription),disabled:!1,shortcut:">"})),h&&w.push($({content:M(i("4HWgE").toolbarInsertBlockMessages.decision),tooltipDescription:M(i("4HWgE").toolbarInsertBlockMessages.decisionDescription),disabled:!1})),v&&P.nodes.rule&&w.push(Y({content:M(i("4HWgE").toolbarInsertBlockMessages.horizontalRule),tooltipDescription:M(i("4HWgE").toolbarInsertBlockMessages.horizontalRuleDescription),disabled:!1})),N&&P.nodes.expand&&w.push(J({content:M(i("4HWgE").toolbarInsertBlockMessages.expand),tooltipDescription:M(i("4HWgE").toolbarInsertBlockMessages.expandDescription),disabled:!1})),O){let e=M(i("4HWgE").toolbarInsertBlockMessages.date);w.push(Z({content:e,tooltipDescription:M(i("4HWgE").toolbarInsertBlockMessages.dateDescription),disabled:!1}))}if(k&&w.push(Q({content:M(i("4HWgE").toolbarInsertBlockMessages.placeholderText),disabled:!1})),C){let e=M(i("4HWgE").toolbarInsertBlockMessages.status);w.push(ee({content:e,tooltipDescription:M(i("4HWgE").toolbarInsertBlockMessages.statusDescription),disabled:!1}))}I&&w.push(...I),m&&!(0,i("dh538").fg)("platform_editor_refactor_view_more")&&w.push(et({content:M(i("4HWgE").toolbarInsertBlockMessages.viewMore),disabled:!1}));let es=A;return(0,i("dh538").fg)("platform_editor_toolbar_responsive_fixes")?w.slice(0,es).some(e=>"table selector"===e.value.name)&&es++:es=o&&n?A+1:A,[w.slice(0,es).map(eo),w.slice(es).filter(({value:{name:e}})=>"table selector"!==e).map(en(M(i("4HWgE").toolbarInsertBlockMessages.insertMenu)))]},w),ei=({api:e,breakpoint:t,editorView:o,horizontalRuleEnabled:n,insertMenuItems:a,nativeStatusSupported:s,numberOfButtons:l,tableSelectorSupported:d,expandEnabled:c,showElementBrowserLink:p,toolbarConfig:u})=>{let{formatMessage:f}=(0,i("8C5kA").default)(),h=(0,i("b3YrF").useSharedPluginStateSelector)(e,"typeAhead.isAllowed"),m=(0,i("b3YrF").useSharedPluginStateSelector)(e,"imageUpload.enabled"),g=!!(0,i("b3YrF").useSharedPluginStateSelector)(e,"mention.mentionProvider"),T=(0,i("b3YrF").useSharedPluginStateSelector)(e,"mention.canInsertMention"),E=(0,i("b3YrF").useSharedPluginStateSelector)(e,"date.isInitialised"),b=(0,i("b3YrF").useSharedPluginStateSelector)(e,"placeholderText.allowInserting"),S=(0,i("b3YrF").useSharedPluginStateSelector)(e,"media.allowsUploads"),y=(0,i("b3YrF").useSharedPluginStateSelector)(e,"hyperlink.canInsertLink"),_=(0,i("b3YrF").useSharedPluginStateSelector)(e,"hyperlink.activeLinkMark"),C=(0,i("b3YrF").useSharedPluginStateSelector)(e,"connectivity.mode"),I=(0,i("b3YrF").useSharedPluginStateSelector)(e,"emoji.emojiProvider"),O=(0,i("b3YrF").useSharedPluginStateSelector)(e,"blockType.availableWrapperBlockTypes"),k=(0,i("91bcx").isOfflineMode)(C),v=!!e?.imageUpload,x=!!o?.state.schema.nodes.taskItem,N=!!o?.state.schema.nodes.decisionItem,R=!!e?.layout,[,w]=o?.state.schema?er({isTypeAheadAllowed:h,tableSupported:!!o?.state.schema.nodes.table,tableSelectorSupported:d,mediaUploadsEnabled:S,mediaSupported:void 0!==S,isEditorOffline:k,imageUploadSupported:v,imageUploadEnabled:m,mentionsSupported:g,mentionsDisabled:!T,actionSupported:x,decisionSupported:N,linkSupported:void 0!==y,linkDisabled:!y||!!_,emojiDisabled:!I,hasEmojiPlugin:!!e?.emoji,hasMentionsPlugin:!!e?.mention,hasMediaPlugin:!!e?.media,nativeStatusSupported:s,dateEnabled:E,placeholderTextEnabled:b,horizontalRuleEnabled:n,layoutSectionEnabled:R,expandEnabled:c,showElementBrowserLink:p,emojiProvider:I,availableWrapperBlockTypes:O,insertMenuItems:a,schema:o?.state.schema,numberOfButtons:l||0,formatMessage:f}):[,[]];return{dropdownItems:(0,r.useMemo)(()=>t&&u?w.filter(e=>{let o=e.value.name;if(o===P)return!1;let n=A[o];if(!n)return!0;let r=u[n];return!r?.enabled||!function(e,t){if(!t)return!1;let o=M.indexOf(e);return M.indexOf(t)>=o}(r.showAt||"lg",t)}):w,[w,t,u]),emojiProvider:I,isTypeAheadAllowed:h}},ea=({api:e,buttonRef:t})=>{let o=h({focusTarget:t}),n=(0,r.useCallback)((t,n)=>{queueMicrotask(()=>{e?.core?.actions.execute(e?.table?.commands.insertTableWithSize(t,n,i("d925B").INPUT_METHOD.PICKER))}),o.close()},[e,o]),a=(0,r.useCallback)(()=>{e?.core.actions.focus()},[e]);return{...o,handleSelectedTableSize:n,onPopupUnmount:a}},es=({api:e,breakpoint:o,showElementBrowserLink:a=!1,isFullPageAppearance:s=!1,tableSelectorSupported:l,nativeStatusSupported:d,horizontalRuleEnabled:p,expandEnabled:u,insertMenuItems:f,numberOfButtons:h,onInsertBlockType:g,toolbarConfig:E})=>{let{editorView:b}=(0,i("gzUv9").useEditorToolbar)(),{isDisabled:S,popupsMountPoint:y,popupsBoundariesElement:_,popupsScrollableElement:C}=(0,i("8hoW2").useToolbarUI)(),{formatMessage:I}=(0,i("8C5kA").default)(),[O,k]=(0,r.useState)(!1),v=(0,r.useRef)(null),x=m({api:e,buttonRef:v}),A=ea({api:e,buttonRef:v}),M=(0,i("b3YrF").useSharedPluginStateSelector)(e,"media.showMediaPicker"),{dropdownItems:R,emojiProvider:w,isTypeAheadAllowed:L}=ei({api:e,breakpoint:o,editorView:b||void 0,horizontalRuleEnabled:p,insertMenuItems:f,nativeStatusSupported:d,numberOfButtons:h,tableSelectorSupported:l,expandEnabled:u,showElementBrowserLink:a,toolbarConfig:E});if(!e?.insertBlock)return null;let B=e=>{k(e)},D=({item:t,inputMethod:o})=>{if(!b)return;let{state:n,dispatch:r}=b;switch(!b.hasFocus()&&b.focus(),t.value.name){case P:e?.core?.actions.execute(e?.hyperlink?.commands.showLinkToolbar(o));break;case"table":queueMicrotask(()=>{e?.table?.actions.insertTable?.({action:i("d925B").ACTION.INSERTED,actionSubject:i("d925B").ACTION_SUBJECT.DOCUMENT,actionSubjectId:i("d925B").ACTION_SUBJECT_ID.TABLE,attributes:{inputMethod:o},eventType:i("d925B").EVENT_TYPE.TRACK})(n,r)});break;case"table selector":A.toggle(o);break;case"image upload":e?.imageUpload?.actions.startUpload&&e.imageUpload.actions.startUpload()(n,r);break;case"media":M&&e?.core?.actions.execute(e?.mediaInsert?.commands.showMediaInsertPopup());break;case"mention":e?.mention?.actions?.openTypeAhead(o);break;case"emoji":x.toggle(o);break;case"codeblock":case"blockquote":case"panel":g?.(t.value.name)(n,r);break;case"action":case"decision":let a="action"===t.value.name?"taskList":"decisionList";e?.taskDecision?.actions.insertTaskDecision(a,o)(n,r);break;case"horizontalrule":e?.rule?.actions.insertHorizontalRule(o)(n,r);break;case"macro":(0,i("dh538").fg)("platform_editor_refactor_view_more")||e?.core?.actions.execute(e?.quickInsert?.commands.openElementBrowserModal);break;case"date":e?.core?.actions.execute(e?.date?.commands?.insertDate({inputMethod:o}));break;case"placeholder text":e?.placeholderText?.actions.showPlaceholderFloatingToolbar(n,r);break;case"layout":e?.layout?.actions.insertLayoutColumns(o)(n,r);break;case"status":e?.core?.actions.execute(e?.status?.commands?.insertStatus(o));break;case"expand":e?.expand?.actions.insertExpand(n,r);break;default:t&&t.onClick&&t.onClick()}B(!1)};return(0,n.jsxs)(n.Fragment,{children:[O&&v.current&&b&&(0,n.jsx)(i("jwWgu").default,{target:v.current,fitHeight:660,fitWidth:350,offset:[0,3],mountTo:y,boundariesElement:_,scrollableElement:C,onUnmount:()=>{requestAnimationFrame(()=>e?.core.actions.focus())},focusTrap:!0,zIndex:i("aFUXX").akEditorMenuZIndex,preventOverflow:!0,alignX:"right",children:(0,n.jsx)(N,{editorView:b,dropdownItems:R,onInsert:({item:e})=>{D({item:e,inputMethod:i("d925B").INPUT_METHOD.INSERT_MENU})},toggleVisiblity:()=>{B(!O)},showElementBrowserLink:a,pluginInjectionApi:e,isFullPageAppearance:s})}),w&&(0,n.jsx)(T,{isOpen:x.isOpen,targetRef:v,emojiProvider:Promise.resolve(w),onSelection:x.handleSelectedEmoji,onClickOutside:x.handleClickOutside,onEscapeKeydown:x.handleEscapeKeydown,onUnmount:x.onPopupUnmount,popupsMountPoint:y,popupsBoundariesElement:_,popupsScrollableElement:C}),(0,n.jsx)(i("iIVVb").ToolbarTooltip,{content:(0,c.expValEquals)("platform_editor_toolbar_aifc_patch_6","isEnabled",!0)?(0,n.jsx)(i("hgeg8").ToolTipContent,{description:I(i("4HWgE").toolbarInsertBlockMessages.insertMenu),keymap:i("hgeg8").insertElements}):I(i("4HWgE").toolbarInsertBlockMessages.insertMenu),children:(0,n.jsx)(i("7ERUE").ToolbarButton,{iconBefore:(0,n.jsx)(t(i("g5gZt")),{size:"small",label:I(i("4HWgE").toolbarInsertBlockMessages.insertMenu)}),ariaKeyshortcuts:(0,i("hgeg8").getAriaKeyshortcuts)(i("hgeg8").insertElements),ref:v,onClick:()=>{B(!O)},isSelected:O,isDisabled:!L||S})})]})};i("42omo");let el=({api:e})=>{let{formatMessage:o}=(0,i("8C5kA").default)(),{editorView:r}=(0,i("gzUv9").useEditorToolbar)();return e?.layout?(0,n.jsx)(i("iIVVb").ToolbarTooltip,{content:o(i("4HWgE").toolbarInsertBlockMessages.columns),children:(0,n.jsx)(i("7ERUE").ToolbarButton,{iconBefore:(0,n.jsx)(t(i("asgOl")),{label:o(i("4HWgE").toolbarInsertBlockMessages.columns),size:"small"}),onClick:()=>{if(r){let{state:t,dispatch:o}=r;e?.layout?.actions.insertLayoutColumns(i("d925B").INPUT_METHOD.TOOLBAR)(t,o)}}})}):null},ed=({api:e})=>{let{formatMessage:o}=(0,i("8C5kA").default)(),{showMediaPicker:a,connectivityMode:s,allowsUploads:l}=(0,i("eiA8Z").useSharedPluginStateWithSelector)(e,["media","connectivity"],e=>({showMediaPicker:e.mediaState?.showMediaPicker,allowsUploads:e.mediaState?.allowsUploads,connectivityMode:e.connectivityState?.mode})),d=(0,r.useRef)(null);if(!e?.media)return null;let c=(0,i("91bcx").isOfflineMode)(s);return(0,n.jsx)(i("iIVVb").ToolbarTooltip,{content:o(i("4HWgE").toolbarInsertBlockMessages.addMediaFiles),children:(0,n.jsx)(i("7ERUE").ToolbarButton,{iconBefore:(0,n.jsx)(t(i("fZtQj")),{label:o(i("4HWgE").toolbarInsertBlockMessages.addMediaFiles),size:"small"}),onClick:()=>{if(a){if(e?.mediaInsert?.commands?.showMediaInsertPopup){let t=d.current?{ref:d.current,mountPoint:d.current}:void 0;e?.core?.actions.execute(e?.mediaInsert?.commands.showMediaInsertPopup(t))}else a();e?.analytics?.actions.fireAnalyticsEvent({action:i("d925B").ACTION.OPENED,actionSubject:i("d925B").ACTION_SUBJECT.PICKER,actionSubjectId:i("d925B").ACTION_SUBJECT_ID.PICKER_MEDIA,attributes:{inputMethod:i("d925B").INPUT_METHOD.TOOLBAR},eventType:i("d925B").EVENT_TYPE.UI})}},ref:d,isDisabled:c||!l})})};i("42omo");let ec=({api:e})=>{let{formatMessage:o}=(0,i("8C5kA").default)(),{canInsertMention:r,mentionProvider:a,isTypeAheadAllowed:s}=(0,i("eiA8Z").useSharedPluginStateWithSelector)(e,["mention","typeAhead"],e=>({canInsertMention:e.mentionState?.canInsertMention,mentionProvider:e.mentionState?.mentionProvider,isTypeAheadAllowed:e.typeAheadState?.isAllowed}));return e?.mention?(0,n.jsx)(i("iIVVb").ToolbarTooltip,{content:(0,c.expValEquals)("platform_editor_toolbar_aifc_patch_6","isEnabled",!0)?(0,n.jsx)(i("hgeg8").ToolTipContent,{description:o(i("4HWgE").toolbarInsertBlockMessages.mention),keymap:i("hgeg8").insertMention}):o(i("4HWgE").toolbarInsertBlockMessages.mention),children:(0,n.jsx)(i("7ERUE").ToolbarButton,{iconBefore:(0,n.jsx)(t(i("b4wUN")),{label:o(i("4HWgE").toolbarInsertBlockMessages.mention),size:"small"}),onClick:()=>{e?.mention?.actions?.openTypeAhead(i("d925B").INPUT_METHOD.TOOLBAR)},ariaKeyshortcuts:"Shift+2 Space",isDisabled:!r||!a||!s})}):null};i("42omo");let ep=({api:e})=>{let{formatMessage:o}=(0,i("8C5kA").default)(),{editorView:r}=(0,i("gzUv9").useEditorToolbar)();return e?.table?(0,n.jsx)(i("iIVVb").ToolbarTooltip,{content:(0,c.expValEquals)("platform_editor_toolbar_aifc_patch_6","isEnabled",!0)?(0,n.jsx)(i("hgeg8").ToolTipContent,{description:o(i("4HWgE").toolbarInsertBlockMessages.table),keymap:i("hgeg8").toggleTable}):o(i("4HWgE").toolbarInsertBlockMessages.table),children:(0,n.jsx)(i("7ERUE").ToolbarButton,{iconBefore:(0,n.jsx)(t(i("dk0le")),{label:o(i("4HWgE").toolbarInsertBlockMessages.table),size:"small"}),onClick:()=>{if(r){let{state:t,dispatch:o}=r;queueMicrotask(()=>{e?.table?.actions.insertTable?.({action:i("d925B").ACTION.INSERTED,actionSubject:i("d925B").ACTION_SUBJECT.DOCUMENT,actionSubjectId:i("d925B").ACTION_SUBJECT_ID.TABLE,attributes:{inputMethod:i("d925B").INPUT_METHOD.TOOLBAR},eventType:i("d925B").EVENT_TYPE.TRACK})(t,o)})}},ariaKeyshortcuts:(0,i("hgeg8").getAriaKeyshortcuts)(i("hgeg8").toggleTable),testId:"Table"})}):null};i("42omo");let eu=({isOpen:e,targetRef:t,isOpenedByKeyboard:o,onSelection:r,onClickOutside:a,onEscapeKeydown:s,onUnmount:l,popupsMountPoint:d,popupsBoundariesElement:c,popupsScrollableElement:p})=>e&&t.current?(0,n.jsx)(i("hMaMb").default,{allowOutsideSelection:!0,target:t.current,onUnmount:l,onSelection:r,popupsMountPoint:d,popupsBoundariesElement:c,popupsScrollableElement:p,handleClickOutside:a,handleEscapeKeydown:s,isOpenedByKeyboard:o}):null,ef=({api:e,tableSelectorSupported:t})=>{let{formatMessage:o}=(0,i("8C5kA").default)(),a=(0,r.useRef)(null),{popupsMountPoint:s,popupsBoundariesElement:l,popupsScrollableElement:d}=(0,i("8hoW2").useToolbarUI)(),c=ea({api:e,buttonRef:a});return e?.table&&t?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eu,{isOpen:c.isOpen,targetRef:a,isOpenedByKeyboard:c.isOpenedByKeyboard,onSelection:c.handleSelectedTableSize,onClickOutside:c.handleClickOutside,onEscapeKeydown:c.handleEscapeKeydown,onUnmount:c.onPopupUnmount,popupsMountPoint:s,popupsBoundariesElement:l,popupsScrollableElement:d}),(0,n.jsx)(i("iIVVb").ToolbarTooltip,{content:o(i("4HWgE").toolbarInsertBlockMessages.tableSelector),children:(0,n.jsx)(i("7ERUE").ToolbarButton,{iconBefore:(0,n.jsx)(i("EJKmu").MoreItemsIcon,{label:o(i("4HWgE").toolbarInsertBlockMessages.tableSelector)}),onClick:e=>{0===e.detail&&c.handleKeyboardOpen(e),c.toggle()},isSelected:c.isOpen,ref:a})})]}):null};i("42omo");let eh=({api:e})=>{let{formatMessage:o}=(0,i("8C5kA").default)(),{editorView:r}=(0,i("gzUv9").useEditorToolbar)();return e?.taskDecision?(0,n.jsx)(i("iIVVb").ToolbarTooltip,{content:(0,c.expValEquals)("platform_editor_toolbar_aifc_patch_6","isEnabled",!0)?(0,n.jsx)(i("hgeg8").ToolTipContent,{description:o(i("4HWgE").toolbarInsertBlockMessages.action),keymap:i("hgeg8").insertTaskList}):o(i("4HWgE").toolbarInsertBlockMessages.action),children:(0,n.jsx)(i("7ERUE").ToolbarButton,{iconBefore:(0,n.jsx)(t(i("dmbve")),{label:o(i("4HWgE").toolbarInsertBlockMessages.action),size:"small"}),onClick:()=>{if(r){let{state:t,dispatch:o}=r;e?.taskDecision?.actions.insertTaskDecision("taskList",i("d925B").INPUT_METHOD.TOOLBAR)(t,o)}},ariaKeyshortcuts:"[ ] Space"})}):null},em=({api:e,options:t,onInsertBlockType:o})=>{let r=u(t),a=[],s=e=>(0,c.expValEquals)("platform_editor_toolbar_aifc_responsive","isEnabled",!0)?({children:t})=>(0,n.jsx)(i("aro2m").Show,{above:(0,i("dh538").fg)("platform_editor_toolbar_aifc_undo_redo_confluence")&&e||"lg",children:(0,n.jsx)(i("kDB94").ToolbarButtonGroup,{children:t})}):void 0;if(r.taskList?.enabled&&(a.push({type:i("cPCP8").TASK_LIST_GROUP.type,key:i("cPCP8").TASK_LIST_GROUP.key,parents:[{type:i("cPCP8").INSERT_BLOCK_SECTION.type,key:i("cPCP8").INSERT_BLOCK_SECTION.key,rank:i("4Chin").INSERT_BLOCK_SECTION_RANK[i("cPCP8").TASK_LIST_GROUP.key]}],component:s(r.taskList?.showAt)}),a.push({type:i("cPCP8").TASK_LIST_BUTTON.type,key:i("cPCP8").TASK_LIST_BUTTON.key,parents:[{type:i("cPCP8").TASK_LIST_GROUP.type,key:i("cPCP8").TASK_LIST_GROUP.key,rank:i("4Chin").TASK_LIST_GROUP_RANK[i("cPCP8").TASK_LIST_BUTTON.key]}],component:()=>(0,n.jsx)(eh,{api:e})})),r.media?.enabled&&(a.push({type:i("cPCP8").MEDIA_GROUP.type,key:i("cPCP8").MEDIA_GROUP.key,parents:[{type:i("cPCP8").INSERT_BLOCK_SECTION.type,key:i("cPCP8").INSERT_BLOCK_SECTION.key,rank:i("4Chin").INSERT_BLOCK_SECTION_RANK[i("cPCP8").MEDIA_GROUP.key]}],component:s(r.media?.showAt)}),a.push({type:i("cPCP8").MEDIA_BUTTON.type,key:i("cPCP8").MEDIA_BUTTON.key,parents:[{type:i("cPCP8").MEDIA_GROUP.type,key:i("cPCP8").MEDIA_GROUP.key,rank:i("4Chin").MEDIA_GROUP_RANK[i("cPCP8").MEDIA_BUTTON.key]}],component:()=>e?.imageUpload?(0,n.jsx)(b,{api:e}):(0,n.jsx)(ed,{api:e})})),r.codeBlock?.enabled&&(a.push({type:i("cPCP8").CODE_BLOCK_GROUP.type,key:i("cPCP8").CODE_BLOCK_GROUP.key,parents:[{type:i("cPCP8").INSERT_BLOCK_SECTION.type,key:i("cPCP8").INSERT_BLOCK_SECTION.key,rank:i("4Chin").INSERT_BLOCK_SECTION_RANK[i("cPCP8").CODE_BLOCK_GROUP.key]}],component:s(r.codeBlock?.showAt)}),a.push({type:i("cPCP8").CODE_BLOCK_BUTTON.type,key:i("cPCP8").CODE_BLOCK_BUTTON.key,parents:[{type:i("cPCP8").CODE_BLOCK_GROUP.type,key:i("cPCP8").CODE_BLOCK_GROUP.key,rank:i("4Chin").CODE_BLOCK_GROUP_RANK[i("cPCP8").CODE_BLOCK_BUTTON.key]}],component:()=>(0,n.jsx)(p,{api:e})})),r.mention?.enabled&&(a.push({type:i("cPCP8").MENTION_GROUP.type,key:i("cPCP8").MENTION_GROUP.key,parents:[{type:i("cPCP8").INSERT_BLOCK_SECTION.type,key:i("cPCP8").INSERT_BLOCK_SECTION.key,rank:i("4Chin").INSERT_BLOCK_SECTION_RANK[i("cPCP8").MENTION_GROUP.key]}],component:s(r.mention.showAt)}),a.push({type:i("cPCP8").MENTION_BUTTON.type,key:i("cPCP8").MENTION_BUTTON.key,parents:[{type:i("cPCP8").MENTION_GROUP.type,key:i("cPCP8").MENTION_GROUP.key,rank:i("4Chin").MENTION_GROUP_RANK[i("cPCP8").MENTION_BUTTON.key]}],component:()=>(0,n.jsx)(ec,{api:e})})),r.emoji?.enabled&&(a.push({type:i("cPCP8").EMOJI_GROUP.type,key:i("cPCP8").EMOJI_GROUP.key,parents:[{type:i("cPCP8").INSERT_BLOCK_SECTION.type,key:i("cPCP8").INSERT_BLOCK_SECTION.key,rank:i("4Chin").INSERT_BLOCK_SECTION_RANK[i("cPCP8").EMOJI_GROUP.key]}],component:s(r.emoji.showAt)}),a.push({type:i("cPCP8").EMOJI_BUTTON.type,key:i("cPCP8").EMOJI_BUTTON.key,parents:[{type:i("cPCP8").EMOJI_GROUP.type,key:i("cPCP8").EMOJI_GROUP.key,rank:i("4Chin").EMOJI_GROUP_RANK[i("cPCP8").EMOJI_BUTTON.key]}],component:()=>(0,n.jsx)(E,{api:e})})),r.layout?.enabled&&(a.push({type:i("cPCP8").LAYOUT_GROUP.type,key:i("cPCP8").LAYOUT_GROUP.key,parents:[{type:i("cPCP8").INSERT_BLOCK_SECTION.type,key:i("cPCP8").INSERT_BLOCK_SECTION.key,rank:i("4Chin").INSERT_BLOCK_SECTION_RANK[i("cPCP8").LAYOUT_GROUP.key]}],component:s(r.layout.showAt)}),a.push({type:i("cPCP8").LAYOUT_BUTTON.type,key:i("cPCP8").LAYOUT_BUTTON.key,parents:[{type:i("cPCP8").LAYOUT_GROUP.type,key:i("cPCP8").LAYOUT_GROUP.key,rank:i("4Chin").LAYOUT_GROUP_RANK[i("cPCP8").LAYOUT_BUTTON.key]}],component:()=>(0,n.jsx)(el,{api:e})})),r.table?.enabled&&(a.push({type:i("cPCP8").TABLE_GROUP.type,key:i("cPCP8").TABLE_GROUP.key,parents:[{type:i("cPCP8").INSERT_BLOCK_SECTION.type,key:i("cPCP8").INSERT_BLOCK_SECTION.key,rank:i("4Chin").INSERT_BLOCK_SECTION_RANK[i("cPCP8").TABLE_GROUP.key]}],component:s(r.table.showAt)}),a.push({type:i("cPCP8").TABLE_BUTTON.type,key:i("cPCP8").TABLE_BUTTON.key,parents:[{type:i("cPCP8").TABLE_GROUP.type,key:i("cPCP8").TABLE_GROUP.key,rank:i("4Chin").TABLE_GROUP_RANK[i("cPCP8").TABLE_BUTTON.key]}],component:()=>(0,n.jsx)(ep,{api:e})}),t.tableSelectorSupported&&a.push({type:i("cPCP8").TABLE_SIZE_PICKER.type,key:i("cPCP8").TABLE_SIZE_PICKER.key,parents:[{type:i("cPCP8").TABLE_GROUP.type,key:i("cPCP8").TABLE_GROUP.key,rank:i("4Chin").TABLE_GROUP_RANK[i("cPCP8").TABLE_SIZE_PICKER.key]}],component:()=>(0,n.jsx)(ef,{api:e,tableSelectorSupported:t.tableSelectorSupported})})),r.insert?.enabled){let s=i=>()=>(0,n.jsx)(es,{api:e,breakpoint:i,toolbarConfig:r,showElementBrowserLink:t.showElementBrowserLink,tableSelectorSupported:t.tableSelectorSupported,onInsertBlockType:o,nativeStatusSupported:t.nativeStatusSupported,horizontalRuleEnabled:t.horizontalRuleEnabled,expandEnabled:t.allowExpand,insertMenuItems:t.insertMenuItems,numberOfButtons:0});(0,i("dh538").fg)("platform_editor_toolbar_aifc_ga_blockers")?(a.push({type:i("cPCP8").INSERT_GROUP.type,key:`${i("cPCP8").INSERT_GROUP.key}-none`,parents:[{type:i("cPCP8").INSERT_BLOCK_SECTION.type,key:i("cPCP8").INSERT_BLOCK_SECTION.key,rank:i("4Chin").INSERT_BLOCK_SECTION_RANK[i("cPCP8").INSERT_GROUP.key]}],component:({children:e})=>(0,n.jsx)(i("aro2m").Show,{below:"sm",children:(0,n.jsx)(i("kDB94").ToolbarButtonGroup,{children:e})})}),a.push({type:i("cPCP8").INSERT_BUTTON.type,key:i("cPCP8").INSERT_BUTTON.key,parents:[{type:i("cPCP8").INSERT_GROUP.type,key:`${i("cPCP8").INSERT_GROUP.key}-none`,rank:i("4Chin").INSERT_GROUP_RANK[i("cPCP8").INSERT_BUTTON.key]}],component:s(null)}),a.push({type:i("cPCP8").INSERT_GROUP.type,key:`${i("cPCP8").INSERT_GROUP.key}-sm`,parents:[{type:i("cPCP8").INSERT_BLOCK_SECTION.type,key:i("cPCP8").INSERT_BLOCK_SECTION.key,rank:i("4Chin").INSERT_BLOCK_SECTION_RANK[i("cPCP8").INSERT_GROUP.key]}],component:({children:e})=>(0,n.jsx)(i("aro2m").Show,{only:"sm",children:(0,n.jsx)(i("kDB94").ToolbarButtonGroup,{children:e})})}),a.push({type:i("cPCP8").INSERT_BUTTON.type,key:i("cPCP8").INSERT_BUTTON.key,parents:[{type:i("cPCP8").INSERT_GROUP.type,key:`${i("cPCP8").INSERT_GROUP.key}-sm`,rank:i("4Chin").INSERT_GROUP_RANK[i("cPCP8").INSERT_BUTTON.key]}],component:s("sm")}),a.push({type:i("cPCP8").INSERT_GROUP.type,key:`${i("cPCP8").INSERT_GROUP.key}-md`,parents:[{type:i("cPCP8").INSERT_BLOCK_SECTION.type,key:i("cPCP8").INSERT_BLOCK_SECTION.key,rank:i("4Chin").INSERT_BLOCK_SECTION_RANK[i("cPCP8").INSERT_GROUP.key]}],component:({children:e})=>(0,n.jsx)(i("aro2m").Show,{only:"md",children:(0,n.jsx)(i("kDB94").ToolbarButtonGroup,{children:e})})}),a.push({type:i("cPCP8").INSERT_BUTTON.type,key:i("cPCP8").INSERT_BUTTON.key,parents:[{type:i("cPCP8").INSERT_GROUP.type,key:`${i("cPCP8").INSERT_GROUP.key}-md`,rank:i("4Chin").INSERT_GROUP_RANK[i("cPCP8").INSERT_BUTTON.key]}],component:s("md")}),a.push({type:i("cPCP8").INSERT_GROUP.type,key:`${i("cPCP8").INSERT_GROUP.key}-lg`,parents:[{type:i("cPCP8").INSERT_BLOCK_SECTION.type,key:i("cPCP8").INSERT_BLOCK_SECTION.key,rank:i("4Chin").INSERT_BLOCK_SECTION_RANK[i("cPCP8").INSERT_GROUP.key]}],component:({children:e})=>(0,n.jsx)(i("aro2m").Show,{only:"lg",children:(0,n.jsx)(i("kDB94").ToolbarButtonGroup,{children:e})})}),a.push({type:i("cPCP8").INSERT_BUTTON.type,key:i("cPCP8").INSERT_BUTTON.key,parents:[{type:i("cPCP8").INSERT_GROUP.type,key:`${i("cPCP8").INSERT_GROUP.key}-lg`,rank:i("4Chin").INSERT_GROUP_RANK[i("cPCP8").INSERT_BUTTON.key]}],component:s("lg")}),a.push({type:i("cPCP8").INSERT_GROUP.type,key:`${i("cPCP8").INSERT_GROUP.key}-xl`,parents:[{type:i("cPCP8").INSERT_BLOCK_SECTION.type,key:i("cPCP8").INSERT_BLOCK_SECTION.key,rank:i("4Chin").INSERT_BLOCK_SECTION_RANK[i("cPCP8").INSERT_GROUP.key]}],component:({children:e})=>(0,n.jsx)(i("aro2m").Show,{only:"xl",children:(0,n.jsx)(i("kDB94").ToolbarButtonGroup,{children:e})})}),a.push({type:i("cPCP8").INSERT_BUTTON.type,key:i("cPCP8").INSERT_BUTTON.key,parents:[{type:i("cPCP8").INSERT_GROUP.type,key:`${i("cPCP8").INSERT_GROUP.key}-xl`,rank:i("4Chin").INSERT_GROUP_RANK[i("cPCP8").INSERT_BUTTON.key]}],component:s("xl")})):(a.push({type:i("cPCP8").INSERT_GROUP.type,key:i("cPCP8").INSERT_GROUP.key,parents:[{type:i("cPCP8").INSERT_BLOCK_SECTION.type,key:i("cPCP8").INSERT_BLOCK_SECTION.key,rank:i("4Chin").INSERT_BLOCK_SECTION_RANK[i("cPCP8").INSERT_GROUP.key]}]}),a.push({type:i("cPCP8").INSERT_BUTTON.type,key:i("cPCP8").INSERT_BUTTON.key,parents:[{type:i("cPCP8").INSERT_GROUP.type,key:i("cPCP8").INSERT_GROUP.key,rank:i("4Chin").INSERT_GROUP_RANK[i("cPCP8").INSERT_BUTTON.key]}],component:()=>(0,n.jsx)(es,{api:e,toolbarConfig:r,showElementBrowserLink:t.showElementBrowserLink,tableSelectorSupported:t.tableSelectorSupported,onInsertBlockType:o,nativeStatusSupported:t.nativeStatusSupported,horizontalRuleEnabled:t.horizontalRuleEnabled,expandEnabled:t.allowExpand,insertMenuItems:t.insertMenuItems,numberOfButtons:7})}))}return a};i("42omo"),i("42omo");let eg={name:"y71vja",styles:"width:42px;display:flex;align-items:center;> div, > span{display:flex;}> div > div{display:flex;}"},eT=t(r).memo(e=>(0,i("9K4OG").jsx)("span",{css:eg},(0,i("9K4OG").jsx)(t(i("g5gZt")),{label:e.label,color:"currentColor",spacing:"spacious"}),(0,i("9K4OG").jsx)("span",null,(0,i("9K4OG").jsx)(t(i("7kzZ3")),{label:"",color:"currentColor",LEGACY_margin:"0 0 0 -8px",size:"small"})))),eE=t(r).memo(e=>(0,i("9K4OG").jsx)(i("a4eZN").default,{ref:e.handleRef,selected:e.selected,disabled:e.disabled,onClick:e.onClick,onKeyDown:e.onKeyDown,spacing:e.spacing,"aria-expanded":e["aria-expanded"],"aria-haspopup":e["aria-haspopup"],"aria-keyshortcuts":e["aria-keyshortcuts"],"aria-label":`${e.label}`,iconBefore:(0,i("9K4OG").jsx)(eT,{label:""}),title:(0,i("9K4OG").jsx)(i("hgeg8").ToolTipContent,{description:e.label,shortcutOverride:"/"})})),eb=e=>(0,n.jsxs)(n.Fragment,{children:[e.open&&(0,n.jsx)(i("jwWgu").default,{target:e.plusButtonRef,fitHeight:660,fitWidth:350,offset:[0,3],mountTo:e.popupsMountPoint,boundariesElement:e.popupsBoundariesElement,scrollableElement:e.popupsScrollableElement,preventOverflow:!0,alignX:"right",children:(0,n.jsx)(N,{editorView:e.editorView,dropdownItems:e.items,onInsert:e.onInsert,toggleVisiblity:e.togglePlusMenuVisibility,showElementBrowserLink:e.showElementBrowserLink,pluginInjectionApi:e.pluginInjectionApi,isFullPageAppearance:e.isFullPageAppearance})}),(0,n.jsx)(eE,{"aria-expanded":e.open,"aria-haspopup":!0,handleRef:e.onRef,selected:e.open,disabled:e.disabled,onClick:e.onClick,onKeyDown:e.onKeyDown,spacing:e.spacing,label:e.label,"aria-keyshortcuts":"/"})]}),eS=e=>{if((0,i("dh538").fg)("platform_editor_refactor_view_more")){if(0===e.items.length&&!e.showElementBrowserLink)return null}else if(0===e.items.length)return null;return e.disabled?(0,n.jsx)("div",{children:(0,n.jsx)(eE,{"aria-expanded":e.open,"aria-haspopup":!0,handleRef:e.onRef,selected:e.open,disabled:e.disabled,onClick:e.onClick,onKeyDown:e.onKeyDown,spacing:e.spacing,label:e.label,"aria-keyshortcuts":"/"})}):(0,n.jsx)(eb,{disabled:e.disabled,editorView:e.editorView,items:e.items,label:e.label,onClick:e.onClick,onKeyDown:e.onKeyDown,onInsert:e.onInsert,onRef:e.onPlusButtonRef,open:e.open,plusButtonRef:e.plusButtonRef,popupsBoundariesElement:e.popupsBoundariesElement,popupsMountPoint:e.popupsMountPoint,popupsScrollableElement:e.popupsScrollableElement,spacing:e.spacing,togglePlusMenuVisibility:e.togglePlusMenuVisibility,showElementBrowserLink:e.showElementBrowserLink,pluginInjectionApi:e.pluginInjectionApi,isFullPageAppearance:e.isFullPageAppearance})},ey=e=>!document.body.contains(e),e_=e=>`&:hover ${e} {
    background: var(--ds-background-neutral-subtle-hovered, ${i("6fnsQ").N20A});

    &:hover {
      background: var(--ds-background-neutral-hovered, ${i("6fnsQ").N30A});
    }
  }`,eC=(0,i("efG2U").default)(e=>{let o=t(r).useContext(i("efG2U").OutsideClickTargetRefContext);return(0,i("9K4OG").jsx)(i("lGf1F").default,{onPickerRef:o,...e})}),eI=({isTableSelectorOpen:e,isButtonDisabled:t})=>(0,i("9K4OG").css)("display:flex;",!e&&!t&&e_(".table-selector-toolbar-btn")," ",!e&&!t&&e_(".table-toolbar-btn")," .table-toolbar-btn{border-top-right-radius:var(--ds-radius-large, 0px);border-bottom-right-radius:var(--ds-radius-large, 0px);margin-right:var(--ds-space-025, 1px);padding:var(--ds-space-0, 0px);&>span{min-width:16px;margin:var(--ds-space-0, 0px);}}.table-selector-toolbar-btn{padding:var(--ds-space-0, 0px);border-top-left-radius:var(--ds-radius-large, 0px)!important;border-bottom-left-radius:var(--ds-radius-large, 0px)!important;&>span{margin:var(--ds-space-0, 0px);width:16px!important;display:flex;justify-content:center;}}");class eO extends t(r).PureComponent{static getDerivedStateFromProps(e,t){let[o,n]=er({isTypeAheadAllowed:e.isTypeAheadAllowed,tableSupported:e.tableSupported,tableSelectorSupported:e.tableSelectorSupported,mediaUploadsEnabled:e.mediaUploadsEnabled,mediaSupported:e.mediaSupported,isEditorOffline:e.isEditorOffline,imageUploadSupported:e.imageUploadSupported,imageUploadEnabled:e.imageUploadEnabled,mentionsSupported:e.mentionsSupported,mentionsDisabled:e.mentionsDisabled,actionSupported:e.actionSupported,decisionSupported:e.decisionSupported,linkSupported:e.linkSupported,linkDisabled:e.linkDisabled,emojiDisabled:e.emojiDisabled,hasEmojiPlugin:!!e.pluginInjectionApi?.emoji,hasMentionsPlugin:!!e.pluginInjectionApi?.mention,hasMediaPlugin:!!e.pluginInjectionApi?.media,nativeStatusSupported:e.nativeStatusSupported,dateEnabled:e.dateEnabled,placeholderTextEnabled:e.placeholderTextEnabled,horizontalRuleEnabled:e.horizontalRuleEnabled,layoutSectionEnabled:e.layoutSectionEnabled,expandEnabled:e.expandEnabled,showElementBrowserLink:e.showElementBrowserLink,emojiProvider:e.emojiProvider,availableWrapperBlockTypes:e.availableWrapperBlockTypes,insertMenuItems:e.insertMenuItems,schema:e.editorView.state.schema,numberOfButtons:e.buttons,formatMessage:e.intl.formatMessage});return{...t,buttons:o,dropdownItems:n}}componentDidUpdate(e){if(e.buttons!==this.props.buttons&&this.setState({emojiPickerOpen:!1,isTableSelectorOpen:!1}),this.state.isOpenedByKeyboard){let e=new KeyboardEvent("keydown",{bubbles:!0,key:"ArrowDown"});this.dropdownButtonRef?.deref()?.dispatchEvent(e),this.setState({...this.state,isOpenedByKeyboard:!1})}this.state.isTableSelectorOpen&&this.setState({isTableSelectorOpenedByKeyboard:!1}),this.props.showElementBrowser!==e.showElementBrowser&&(this.handleClick(),this.setState({...this.state,isPlusMenuOpen:this.props.showElementBrowser}))}renderPopup(){let{emojiPickerOpen:e}=this.state,{popupsMountPoint:t,popupsBoundariesElement:o,popupsScrollableElement:n,emojiProvider:r}=this.props,a=this.state.dropdownItems.some(({value:{name:e}})=>"emoji"===e),s=this.plusButtonRef,l=a?s:this.emojiButtonRef;return e&&l&&r?(0,i("9K4OG").jsx)(i("jwWgu").default,{target:l.deref(),fitHeight:350,fitWidth:350,offset:[0,3],mountTo:t,boundariesElement:o,scrollableElement:n,onUnmount:()=>{requestAnimationFrame(()=>this.props.pluginInjectionApi?.core?.actions?.focus())},focusTrap:!0,zIndex:i("aFUXX").akEditorMenuZIndex},(0,i("9K4OG").jsx)(eC,{emojiProvider:r,onSelection:this.handleSelectedEmoji,handleClickOutside:this.handleEmojiClickOutside,handleEscapeKeydown:this.handleEmojiPressEscape})):null}renderTableSelectorPopup(){let{isTableSelectorOpen:e,isTableSelectorOpenedByKeyboard:t}=this.state,{popupsMountPoint:o,popupsBoundariesElement:n,popupsScrollableElement:r,pluginInjectionApi:a}=this.props,s=this.tableButtonRef.current??void 0;return e?(0,i("9K4OG").jsx)(i("hMaMb").default,{allowOutsideSelection:!0,target:s,onUnmount:()=>a?.core?.actions?.focus(),onSelection:this.handleSelectedTableSize,popupsMountPoint:o,popupsBoundariesElement:n,popupsScrollableElement:r,handleClickOutside:this.handleTableSelectorClickOutside,handleEscapeKeydown:this.handleTableSelectorPressEscape,isOpenedByKeyboard:t}):null}render(){let e,t,{buttons:o,dropdownItems:n,emojiPickerOpen:r,isTableSelectorOpen:a}=this.state,{isDisabled:l,isReducedSpacing:d,editorAppearance:c}=this.props,p=["full-page","full-width"].includes(c??""),u=o.some(({value:e})=>"table"===e.name),f=o.some(({value:e})=>"table selector"===e.name);if(0===o.length&&0===n.length)return null;let h=[];for(let n of o)"table selector"===n.value.name?e=n:"table"===n.value.name&&this.props.tableSelectorSupported?t=n:h.push(n);return(0,i("9K4OG").jsx)("span",{css:(0,i("dh538").fg)("platform-visual-refresh-icons")?i("cORDs").buttonGroupStyle:i("cORDs").buttonGroupStyleBeforeVisualRefresh},h.map(e=>(0,i("9K4OG").jsx)(i("a4eZN").default,{item:e,testId:this.getToolbarButtonTestId(e),ref:this.handleToolbarRef(e.value.name),key:e.value.name,spacing:d?"none":"default",disabled:l||e.isDisabled,iconBefore:e.elemBefore,selected:"emoji"===e.value.name&&r||e.isActive,title:e.title,"aria-label":e["aria-label"],"aria-haspopup":e["aria-haspopup"],"aria-keyshortcuts":e["aria-keyshortcuts"],onItemClick:this.insertToolbarMenuItem})),this.props.tableSelectorSupported&&(u||f)&&(0,i("9K4OG").jsx)("div",{css:eI({isTableSelectorOpen:a,isButtonDisabled:t?.isDisabled})},u&&(0,i("9K4OG").jsx)(i("a4eZN").default,{className:"table-toolbar-btn",item:t,ref:this.tableButtonRef,testId:String(t?.content),key:t?.value.name,spacing:d?"none":"default",disabled:l||t?.isDisabled,iconBefore:t?.elemBefore,selected:t?.isActive||a,title:t?.title,"aria-label":t?t["aria-label"]:void 0,"aria-haspopup":t?t["aria-haspopup"]:void 0,"aria-keyshortcuts":t?t["aria-keyshortcuts"]:void 0,onItemClick:this.insertToolbarMenuItem}),u&&(0,i("9K4OG").jsx)(i("a4eZN").default,{className:"table-selector-toolbar-btn",item:e,testId:String(e?.content),key:e?.value.name,ref:this.tableSelectorButtonRef,spacing:d?"none":"default",disabled:l||e?.isDisabled,iconBefore:e?.elemBefore,selected:e?.isActive||a,title:e?.title,"aria-label":e?e["aria-label"]:void 0,"aria-haspopup":e?e["aria-haspopup"]:void 0,"aria-keyshortcuts":e?e["aria-keyshortcuts"]:void 0,onItemClick:this.insertToolbarMenuItem,onKeyDown:this.handleTableSelectorOpenByKeyboard})),(0,i("9K4OG").jsx)("span",{css:i("cORDs").wrapperStyle},this.renderPopup(),this.renderTableSelectorPopup(),(0,i("9K4OG").jsx)(eS,{popupsMountPoint:this.props.popupsMountPoint,popupsBoundariesElement:this.props.popupsBoundariesElement,popupsScrollableElement:this.props.popupsScrollableElement,disabled:this.props.isDisabled??!1,editorView:this.props.editorView,spacing:this.props.isReducedSpacing?"none":"default",label:this.props.intl.formatMessage(i("4HWgE").toolbarInsertBlockMessages.insertMenu),open:this.state.isPlusMenuOpen,plusButtonRef:this.plusButtonRef?.deref(),items:this.state.dropdownItems,onRef:this.handleDropDownButtonRef,onPlusButtonRef:this.handlePlusButtonRef,onClick:this.handleClick,onKeyDown:this.handleOpenByKeyboard,onInsert:this.insertInsertMenuItem,togglePlusMenuVisibility:this.togglePlusMenuVisibility,showElementBrowserLink:this.props.showElementBrowserLink||!1,pluginInjectionApi:this.props.pluginInjectionApi,isFullPageAppearance:p})),(!this.props.pluginInjectionApi?.primaryToolbar&&this.props.showSeparator||p&&(0,s.editorExperiment)("platform_editor_controls","variant1"))&&(0,i("9K4OG").jsx)("span",{css:i("cORDs").separatorStyles}))}constructor(...e){super(...e),this.dropdownButtonRef=void 0,this.emojiButtonRef=void 0,this.mediaButtonRef=void 0,this.plusButtonRef=void 0,this.tableButtonRef=t(r).createRef(),this.tableSelectorButtonRef=t(r).createRef(),this.state={isPlusMenuOpen:!1,emojiPickerOpen:!1,isOpenedByKeyboard:!1,buttons:[],dropdownItems:[],isTableSelectorOpen:!1,isTableSelectorOpenedByKeyboard:!1},this.onOpenChange=e=>{let t={isPlusMenuOpen:e.isPlusMenuOpen,emojiPickerOpen:this.state.emojiPickerOpen};this.state.emojiPickerOpen&&!e.open&&(t.emojiPickerOpen=!1),this.setState(t,()=>{let{dispatchAnalyticsEvent:e}=this.props;if(!e)return;let{isPlusMenuOpen:t}=this.state;return e(t?{action:i("d925B").ACTION.OPENED,actionSubject:i("d925B").ACTION_SUBJECT.PLUS_MENU,eventType:i("d925B").EVENT_TYPE.UI}:{action:i("d925B").ACTION.CLOSED,actionSubject:i("d925B").ACTION_SUBJECT.PLUS_MENU,eventType:i("d925B").EVENT_TYPE.UI})})},this.togglePlusMenuVisibility=e=>{let{isPlusMenuOpen:t}=this.state,{pluginInjectionApi:o}=this.props;o&&(0,i("dh538").fg)("platform_editor_ease_of_use_metrics")&&o.core.actions.execute(({tr:e})=>(t?o.metrics?.commands.startActiveSessionTimer()({tr:e}):o.metrics?.commands.handleIntentToStartEdit({shouldStartTimer:!1,shouldPersistActiveSession:!0})({tr:e}),e)),this.onOpenChange({isPlusMenuOpen:!t}),e?.key==="Escape"&&(this.plusButtonRef||this.dropdownButtonRef)?.deref()?.focus()},this.toggleEmojiPicker=(e=i("d925B").INPUT_METHOD.TOOLBAR)=>{this.setState(e=>({emojiPickerOpen:!e.emojiPickerOpen}),()=>{if(this.state.emojiPickerOpen){let{dispatchAnalyticsEvent:t}=this.props;t&&t({action:i("d925B").ACTION.OPENED,actionSubject:i("d925B").ACTION_SUBJECT.PICKER,actionSubjectId:i("d925B").ACTION_SUBJECT_ID.PICKER_EMOJI,attributes:{inputMethod:e},eventType:i("d925B").EVENT_TYPE.UI})}})},this.handleEmojiPressEscape=()=>{this.toggleEmojiPicker(i("d925B").INPUT_METHOD.KEYBOARD),this.emojiButtonRef?.deref()?.focus()},this.handleEmojiClickOutside=e=>{e.target&&!ey(e.target)&&this.toggleEmojiPicker(i("d925B").INPUT_METHOD.TOOLBAR)},this.getToolbarButtonTestId=e=>({media:"media-attachment-toolbar-button"})[e.value.name]||String(e.content),this.handleToolbarRef=e=>t=>{if(t)switch(e){case"emoji":this.emojiButtonRef=new WeakRef(t);break;case"media":this.mediaButtonRef=new WeakRef(t)}},this.handlePlusButtonRef=e=>{e&&(this.plusButtonRef=new WeakRef(e))},this.handleDropDownButtonRef=e=>{e&&(this.dropdownButtonRef=new WeakRef(e))},this.toggleTableSelector=(e=i("d925B").INPUT_METHOD.TOOLBAR)=>{this.setState(e=>({isTableSelectorOpen:!e.isTableSelectorOpen}))},this.handleSelectedTableSize=(e,t)=>{this.insertTableWithSize(i("d925B").INPUT_METHOD.TOOLBAR,e,t)(),this.toggleTableSelector()},this.handleTableSelectorPressEscape=()=>{this.toggleTableSelector(i("d925B").INPUT_METHOD.KEYBOARD),this.tableSelectorButtonRef.current?.focus()},this.handleTableSelectorClickOutside=e=>{e.target&&!ey(e.target)&&this.toggleTableSelector(i("d925B").INPUT_METHOD.TOOLBAR)},this.handleClick=()=>{this.togglePlusMenuVisibility()},this.handleOpenByKeyboard=e=>{("Enter"===e.key||" "===e.key)&&(this.setState({...this.state,isOpenedByKeyboard:!0}),e.preventDefault(),this.togglePlusMenuVisibility())},this.handleTableSelectorOpenByKeyboard=e=>{("Enter"===e.key||" "===e.key)&&this.setState({isTableSelectorOpenedByKeyboard:!0})},this.toggleLinkPanel=e=>{let{pluginInjectionApi:t}=this.props;return t?.core?.actions.execute(t?.hyperlink?.commands.showLinkToolbar(e))??!1},this.insertMention=e=>{let{editorView:t,pluginInjectionApi:o}=this.props;if(!t)return!0;let n=o?.mention?.sharedState.currentState();return(!n||!1!==n.canInsertMention)&&!!o?.mention?.actions?.openTypeAhead(e)},this.insertTable=e=>{let{pluginInjectionApi:t,editorView:o}=this.props,{state:n,dispatch:r}=o;queueMicrotask(()=>{t?.table?.actions.insertTable?.({action:i("d925B").ACTION.INSERTED,actionSubject:i("d925B").ACTION_SUBJECT.DOCUMENT,actionSubjectId:i("d925B").ACTION_SUBJECT_ID.TABLE,attributes:{inputMethod:e},eventType:i("d925B").EVENT_TYPE.TRACK})(n,r)})},this.insertTableWithSize=(e,t,o)=>()=>{let{pluginInjectionApi:e}=this.props;queueMicrotask(()=>{e?.core?.actions.execute(e?.table?.commands.insertTableWithSize(t,o,i("d925B").INPUT_METHOD.PICKER))})},this.createDate=e=>{let{pluginInjectionApi:t}=this.props;return t?.core?.actions.execute(t?.date?.commands?.insertDate({inputMethod:e})),!0},this.createPlaceholderText=()=>{let{editorView:e,pluginInjectionApi:t}=this.props;return t?.placeholderText?.actions.showPlaceholderFloatingToolbar(e.state,e.dispatch),!0},this.insertLayoutColumns=e=>{let{editorView:t,pluginInjectionApi:o}=this.props;return o?.layout?.actions.insertLayoutColumns(e)(t.state,t.dispatch),!0},this.createStatus=e=>{let{pluginInjectionApi:t}=this.props;return!!t?.core?.actions.execute(t?.status?.commands?.insertStatus(e))},this.openMediaPicker=e=>{let{onShowMediaPicker:t,dispatchAnalyticsEvent:o}=this.props;if(t){let n=this.mediaButtonRef?.deref(),r=n?{ref:n,mountPoint:this.props.popupsMountPoint??n}:void 0,a=n?.parentElement?{ref:n,mountPoint:this.props.popupsMountPoint??n.parentElement}:void 0;t((0,i("dh538").fg)("platform_editor_nov_a11y_fixes")?a:r),o&&o({action:i("d925B").ACTION.OPENED,actionSubject:i("d925B").ACTION_SUBJECT.PICKER,actionSubjectId:i("d925B").ACTION_SUBJECT_ID.PICKER_MEDIA,attributes:{inputMethod:e},eventType:i("d925B").EVENT_TYPE.UI})}return!0},this.insertTaskDecision=(e,t)=>()=>{let{editorView:{state:o,dispatch:n},pluginInjectionApi:r}=this.props;return r?.taskDecision?.actions.insertTaskDecision("action"===e?"taskList":"decisionList",t)(o,n)??!1},this.insertHorizontalRule=e=>{let{editorView:{state:t,dispatch:o},pluginInjectionApi:n}=this.props;return n?.rule?.actions.insertHorizontalRule(e)(t,o)??!1},this.insertExpand=()=>{let{editorView:{state:e,dispatch:t},pluginInjectionApi:o}=this.props;return o?.expand?.actions.insertExpand(e,t)??!1},this.insertBlockType=e=>()=>{let{editorView:t,onInsertBlockType:o}=this.props,{state:n,dispatch:r}=t;return o(e)(n,r),!0},this.handleSelectedEmoji=e=>{let{pluginInjectionApi:t}=this.props;return this.props.editorView.focus(),t?.core?.actions.execute(t.emoji?.commands.insertEmoji(e,i("d925B").INPUT_METHOD.PICKER)),this.toggleEmojiPicker(),!0},this.openElementBrowser=()=>{let{pluginInjectionApi:e}=this.props;e?.core?.actions.execute(e?.quickInsert?.commands.openElementBrowserModal)},this.onItemActivated=({item:e,inputMethod:t})=>{let{editorView:o,handleImageUpload:n,expandEnabled:r}=this.props;switch(!o.hasFocus()&&o.focus(),e.value.name){case P:this.toggleLinkPanel(t);break;case"table":this.insertTable(t);break;case"table selector":this.toggleTableSelector(t);break;case"image upload":if(n){let{state:e,dispatch:t}=o;n()(e,t)}break;case"media":this.openMediaPicker(t);break;case"mention":this.insertMention(t);break;case"emoji":this.toggleEmojiPicker(t);break;case"codeblock":case"blockquote":case"panel":this.insertBlockType(e.value.name)();break;case"action":case"decision":this.insertTaskDecision(e.value.name,t)();break;case"horizontalrule":this.insertHorizontalRule(t);break;case"macro":(0,i("dh538").fg)("platform_editor_refactor_view_more")||this.openElementBrowser();break;case"date":this.createDate(t);break;case"placeholder text":this.createPlaceholderText();break;case"layout":this.insertLayoutColumns(t);break;case"status":this.createStatus(t);break;case"expand":if(r){this.insertExpand();break}default:e&&e.onClick&&e.onClick()}this.setState({isPlusMenuOpen:!1})},this.insertToolbarMenuItem=e=>this.onItemActivated({item:e,inputMethod:i("d925B").INPUT_METHOD.TOOLBAR}),this.insertInsertMenuItem=({item:e})=>this.onItemActivated({item:e,inputMethod:i("d925B").INPUT_METHOD.INSERT_MENU})}}var ek=(0,i("gmMgo").default)(eO);let ev=(e,t)=>{if("full-page"===t&&(0,i("dh538").fg)("platform_editor_toolbar_responsive_fixes"))switch(e){case i("zMjD6").ToolbarSize.XXL:case i("zMjD6").ToolbarSize.XL:case i("zMjD6").ToolbarSize.L:return 7;case i("zMjD6").ToolbarSize.M:return 3;default:return 0}if((0,i("dh538").fg)("platform_editor_toolbar_responsive_fixes"))switch(e){case i("zMjD6").ToolbarSize.XXL:case i("zMjD6").ToolbarSize.XL:return 7;case i("zMjD6").ToolbarSize.L:return 5;case i("zMjD6").ToolbarSize.M:case i("zMjD6").ToolbarSize.S:return 2;default:return 0}switch(e){case i("zMjD6").ToolbarSize.XXL:case i("zMjD6").ToolbarSize.XL:case i("zMjD6").ToolbarSize.L:case i("zMjD6").ToolbarSize.M:return 7;case i("zMjD6").ToolbarSize.S:return 2;default:return 0}};function ex(e,t,o){return n=>n===i("boahT").CODE_BLOCK.name&&e?e(i("d925B").INPUT_METHOD.TOOLBAR):n===i("boahT").PANEL.name&&t?t(i("d925B").INPUT_METHOD.TOOLBAR):n===i("boahT").BLOCK_QUOTE.name&&o?o(i("d925B").INPUT_METHOD.INSERT_MENU):()=>!1}let eN=e=>({emojiProviderSelector:e.emojiState?.emojiProvider,showMediaPicker:e.mediaState?.showMediaPicker,mediaAllowsUploads:e.mediaState?.allowsUploads,showElementBrowser:e.insertBlockState?.showElementBrowser,isTypeAheadAllowed:e.typeAheadState?.isAllowed,mentionProvider:e.mentionState?.mentionProvider,canInsertMention:e.mentionState?.canInsertMention,dateEnabled:e.dateState?.isInitialised,placeholderTextAllowInserting:e.placeholderTextState?.allowInserting,connectivityMode:e.connectivityState?.mode,imageUploadEnabled:e.imageUploadState?.enabled,availableWrapperBlockTypes:e.blockTypeState?.availableWrapperBlockTypes,canInsertLink:e.hyperlinkState?.canInsertLink,activeLinkMark:e.hyperlinkState?.activeLinkMark});function eA({editorView:e,editorActions:t,dispatchAnalyticsEvent:o,popupsMountPoint:r,popupsBoundariesElement:a,popupsScrollableElement:l,toolbarSize:d,disabled:c,isToolbarReducedSpacing:p,isLastItem:u,pluginInjectionApi:f,options:h,appearance:m}){let g=ev(d,m),{emojiProviderSelector:T,showMediaPicker:E,mediaAllowsUploads:b,showElementBrowser:S,isTypeAheadAllowed:y,mentionProvider:_,canInsertMention:C,dateEnabled:I,placeholderTextAllowInserting:O,connectivityMode:k,imageUploadEnabled:v,availableWrapperBlockTypes:x,canInsertLink:N,activeLinkMark:A}=(0,i("eiA8Z").useSharedPluginStateWithSelector)(f,["hyperlink","date","imageUpload","mention","emoji","blockType","media","typeAhead","placeholderText","insertBlock","connectivity"],eN),P=(0,i("b3YrF").useSharedPluginStateSelector)(f,"emoji.emojiProviderPromise",{disabled:!(0,s.editorExperiment)("platform_editor_prevent_toolbar_layout_shifts",!0)}),M=(0,s.editorExperiment)("platform_editor_prevent_toolbar_layout_shifts",!0,{exposure:!0})?P:(()=>{if(T)return Promise.resolve(T)})();return(0,n.jsx)(ek,{showElementBrowser:S||!1,pluginInjectionApi:f,buttons:g,isReducedSpacing:p,isDisabled:c,isTypeAheadAllowed:!!y,editorView:e,tableSupported:!!e.state.schema.nodes.table,tableSelectorSupported:h.tableSelectorSupported&&!!e.state.schema.nodes.table,actionSupported:!!e.state.schema.nodes.taskItem,mentionsSupported:!!_,mentionsDisabled:!C,decisionSupported:!!e.state.schema.nodes.decisionItem,dateEnabled:!!I,placeholderTextEnabled:!!O,layoutSectionEnabled:!!f?.layout,expandEnabled:!!h.allowExpand,mediaUploadsEnabled:b??void 0,onShowMediaPicker:e=>{E&&f?.core?.actions.execute(f?.mediaInsert?.commands.showMediaInsertPopup(e))},mediaSupported:void 0!==b,isEditorOffline:(0,i("91bcx").isOfflineMode)(k),imageUploadSupported:!!f?.imageUpload,imageUploadEnabled:v,handleImageUpload:f?.imageUpload?.actions.startUpload,availableWrapperBlockTypes:x,linkSupported:void 0!==N,linkDisabled:!N||!!A,emojiDisabled:!M,emojiProvider:M,nativeStatusSupported:h.nativeStatusSupported,horizontalRuleEnabled:h.horizontalRuleEnabled,onInsertBlockType:ex(f?.codeBlock?.actions.insertCodeBlock,f?.panel?.actions.insertPanel,f?.blockType?.actions.insertBlockQuote),onInsertMacroFromMacroBrowser:f?.extension?.actions.insertMacroFromMacroBrowser,popupsMountPoint:r,popupsBoundariesElement:a,popupsScrollableElement:l,insertMenuItems:h.insertMenuItems,editorActions:t,dispatchAnalyticsEvent:o,showElementBrowserLink:h.showElementBrowserLink,showSeparator:!u&&d<=i("zMjD6").ToolbarSize.S,editorAppearance:h.appearance})}e.exports.insertBlockPlugin=({config:e={},api:t})=>{let o=!!t?.toolbar,c=({editorView:o,editorActions:r,dispatchAnalyticsEvent:a,providerFactory:l,popupsMountPoint:d,popupsBoundariesElement:c,popupsScrollableElement:p,toolbarSize:u,disabled:f,isToolbarReducedSpacing:h,isLastItem:m})=>(0,s.editorExperiment)("platform_editor_prevent_toolbar_layout_shifts",!0)?o?(0,n.jsx)(eA,{pluginInjectionApi:t,editorView:o,editorActions:r,dispatchAnalyticsEvent:a,providerFactory:l,popupsMountPoint:d,popupsBoundariesElement:c,popupsScrollableElement:p,toolbarSize:u,disabled:f,isToolbarReducedSpacing:h,isLastItem:m,options:e,appearance:e.appearance}):null:(0,n.jsx)(i("dYBVS").WithProviders,{providerFactory:l,providers:["emojiProvider"],renderNode:i=>o?(0,n.jsx)(eA,{pluginInjectionApi:t,editorView:o,editorActions:r,dispatchAnalyticsEvent:a,providerFactory:l,popupsMountPoint:d,popupsBoundariesElement:c,popupsScrollableElement:p,toolbarSize:u,disabled:f,isToolbarReducedSpacing:h,isLastItem:m,providers:i,options:e,appearance:e.appearance}):null});return o?t?.toolbar?.actions.registerComponents(em({api:t,onInsertBlockType:ex(t?.codeBlock?.actions.insertCodeBlock,t?.panel?.actions.insertPanel,t?.blockType?.actions.insertBlockQuote),options:e})):t?.primaryToolbar?.actions.registerComponent({name:"insertBlock",component:c}),{name:"insertBlock",actions:{toggleAdditionalMenu:()=>{t?.core?.actions.execute(({tr:e})=>e.setMeta(l,!0))}},getSharedState:t=>{if(!t||!["full-page","full-width"].includes(e.appearance??""))return;let o=l.getState(t);return{showElementBrowser:o?.showElementBrowser||!1}},usePluginHook(){(0,r.useEffect)(()=>{var e;e=()=>{a.default.preload()},"undefined"!=typeof window&&(void 0!==window.requestIdleCallback?window.requestIdleCallback(()=>e(),{timeout:500}):window.requestAnimationFrame(()=>e()))},[])},pmPlugins:()=>{["full-page","full-width"].includes(e.appearance??"");let t=[];return t.push({name:"toggleInsertBlockPmPlugin",plugin:()=>d()}),t},pluginsOptions:{},primaryToolbarComponent:t?.primaryToolbar?void 0:c}}}),a("a8Q4n",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=void 0;var o=r(i("42omo")),n=r(i("aSNrY"));function r(e){return e&&e.__esModule?e:{default:e}}let a=e=>o.default.createElement(n.default,Object.assign({name:"LozengeIcon",dangerouslySetGlyph:'<path fill="currentcolor" fill-rule="evenodd" d="M0 6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2zm2-.5a.5.5 0 0 0-.5.5v4a.5.5 0 0 0 .5.5h12a.5.5 0 0 0 .5-.5V6a.5.5 0 0 0-.5-.5zm11 3.25H3v-1.5h10z" clip-rule="evenodd"/>'},e));a.displayName="LozengeIcon",e.exports.default=a}),a("hMaMb",function(e,t){var o=i("42omo"),n=i("iu6m9");let r=(0,i("9K4OG").css)({backgroundColor:"var(--ds-background-accent-blue-subtlest, #579DFF)",border:"var(--ds-border-width, 1px) solid var(--ds-background-accent-blue-subtle, #579DFF)"}),a=(0,i("9K4OG").css)({height:"17px",width:"17px",border:"var(--ds-border-width, 1px) solid var(--ds-border, #091e4224)",backgroundColor:"var(--ds-background-input, #ffffff)",borderRadius:"var(--ds-radius-small, 3px)",cursor:"pointer",display:"block","&:focus":{outline:"none",border:`var(--ds-border-width, 1px) solid var(--ds-border-focused, ${i("6fnsQ").B100})`,boxShadow:`0 0 0 0.5px var(--ds-border-focused, ${i("6fnsQ").B100})`}}),s={name:"bn43i4",styles:"line-height:14px;display:flex;justify-content:center;margin-top:var(--ds-space-075, 5px);padding:var(--ds-space-075, 10px)"},l=({row:e,col:t,isActive:s,onClick:l,label:d,onKeyDown:c,isFocused:p,handleInitialButtonFocus:u})=>{let f=(0,o.useRef)(null);return(0,o.useEffect)(()=>{f.current&&(p?f.current.focus({preventScroll:!!(0,n.editorExperiment)("platform_editor_controls","variant1")||void 0}):f.current.blur())},[p,f]),(0,i("9K4OG").jsx)("button",{type:"button",css:[a,s?r:void 0],onClick:()=>l(e,t),"aria-label":d,onKeyDown:c,ref:f,onFocus:1===t&&1===e?()=>u():void 0})},d=(e,t)=>{let o=[];for(let n=1;n<t+1;n++)for(let t=1;t<e+1;t++)o.push({col:t,row:n});return o},c=({maxCols:e,maxRows:t})=>(0,i("9K4OG").css)({display:"grid",gridTemplateColumns:`repeat(${e}, 1fr)`,gridTemplateRows:`repeat(${t}, 1fr)`,gap:"var(--ds-space-025, 2px)"});var p=(0,i("gmMgo").default)(({maxCols:e,maxRows:t,onSelection:n,selectedCol:r,selectedRow:a,onKeyDown:p,isFocused:u,handleInitialButtonFocus:f,intl:{formatMessage:h}})=>{let m=(0,o.useMemo)(()=>d(e,t),[e,t]),g=(0,o.useContext)(i("efG2U").OutsideClickTargetRefContext);return(0,i("9K4OG").jsx)(i("eyWa4").default,{ref:g},(0,i("9K4OG").jsx)("div",{"aria-label":`${h(i("4HWgE").toolbarInsertBlockMessages.tableSizeSelectorPopup)}`,css:c({maxCols:e,maxRows:t})},m.map(({col:e,row:t},o)=>{let s=u&&r===e&&a===t,d=r>=e&&a>=t;return(0,i("9K4OG").jsx)(l,{key:o,isActive:d,col:e,row:t,onClick:n,label:`${h(i("4HWgE").toolbarInsertBlockMessages.tableSizeSelectorButton,{numberOfColumns:e,numberOfRows:t})}`,onKeyDown:p,isFocused:s,handleInitialButtonFocus:f})})),(0,i("9K4OG").jsx)("span",{css:s,"aria-hidden":!0},(0,i("dh538").fg)("platform_editor_dec_a11y_fixes")?`${r} \xd7 ${a}`:`${r} x ${a}`))});let u=(0,i("efG2U").default)(p),f={col:1,row:1,maxCol:10,maxRow:5},h=(0,i("9K4OG").css)({borderRadius:"var(--ds-radius-small, 3px)",backgroundColor:`var(--ds-surface-overlay, ${i("6fnsQ").N0})`,boxShadow:`var(--ds-shadow-overlay, 0 0 0 1px ${i("6fnsQ").N30A}, 0 2px 1px ${i("6fnsQ").N30A}, 0 0 20px -6px ${i("6fnsQ").N60A})`,padding:"var(--ds-space-100, 8px) 10px"});e.exports.default=e=>{let[t,r]=(0,o.useState)({...f,...e.defaultSize}),a=(0,o.useRef)(null),s=(0,o.useRef)(e.isOpenedByKeyboard),l=(0,o.useCallback)(()=>{s.current||(s.current=!0)},[s]),d=(0,o.useCallback)(()=>{s.current&&(s.current=!1)},[s]),c=(0,o.useCallback)(e=>{if(!a.current)return;d();let{left:o,top:n}=a.current.getBoundingClientRect(),i=e.clientX-o,s=e.clientY-n,l=Math.ceil((i-10+2)/19),c=Math.ceil((s-8+2)/19),p=5;l<1&&(l=1),l>t.maxCol&&(l=t.maxCol),c<1&&(c=1),c>=5&&c<10&&(p=c+1),c>=10&&(c=10,p=10),(l!==t.col||c!==t.row)&&r({col:l,row:c,maxCol:10,maxRow:p})},[d,t,r]),p=(e,t)=>{let o=t-1;return 1===t&&(o=e),o},m=(e,t)=>{switch(t){case"ArrowDown":if(e.maxRow<10&&e.row>=4)return e.maxRow+1;if(10===e.row)return 5;return e.maxRow;case"ArrowLeft":let o=1===e.col&&e.row>1;if(1===e.row&&1===e.col)return 10;if(e.maxRow>5&&o)return e.row;return e.maxRow;case"ArrowUp":if(1===e.row)return 10;if(e.maxRow>5)return e.row;return e.maxRow;case"ArrowRight":let n=10===e.col,r=e.maxRow<10&&n&&e.row+1===e.maxRow;if(10===e.row&&10===e.col)return 5;if(r)return e.maxRow+1;return e.maxRow;default:return e.maxRow}},g=(0,o.useCallback)(()=>{!0!==s.current&&(l(),r(f))},[l,r]),T=(0,o.useCallback)(e=>{"ArrowDown"===e.key&&(l(),r(t=>({...t,row:t.row%t.maxRow+1,maxRow:m(t,e.key)})),(0,n.editorExperiment)("platform_editor_controls","variant1")&&e.preventDefault()),"ArrowRight"===e.key&&(l(),r(t=>{let o=10===t.col;return{...t,col:t.col%10+1,row:o?t.row%t.maxRow+1:t.row,maxRow:m(t,e.key)}})),"ArrowLeft"===e.key&&(l(),r(t=>{var o,n;return{...t,col:p(t.maxCol,t.col),row:(o=t.row,n=t.col,1===t.col&&t.row>1?o-1:1===o&&1===n?10:o),maxRow:m(t,e.key)}})),"ArrowUp"===e.key&&(l(),r(t=>{let o=1===t.row;return{...t,row:o?10:p(t.maxRow,t.row),maxRow:m(t,e.key)}}),(0,n.editorExperiment)("platform_editor_controls","variant1")&&e.preventDefault())},[l,r]);return(0,o.useEffect)(()=>{let t,o=e.allowOutsideSelection?window:a.current;return o&&(t=(0,i("fFa3V").bind)(o,{type:"mousemove",listener:c})),t},[c,e.allowOutsideSelection,a]),(0,i("9K4OG").jsx)(i("jwWgu").default,{target:e.target,offset:[0,3],mountTo:e.popupsMountPoint,boundariesElement:e.popupsBoundariesElement,scrollableElement:e.popupsScrollableElement,focusTrap:!0,onUnmount:e.onUnmount,zIndex:i("aFUXX").akEditorMenuZIndex},(0,i("9K4OG").jsx)("div",{css:h,ref:a},(0,i("9K4OG").jsx)(u,{handleClickOutside:e.handleClickOutside,handleEscapeKeydown:e.handleEscapeKeydown,maxCols:t.maxCol,maxRows:t.maxRow,onSelection:e.onSelection,selectedCol:t.col,selectedRow:t.row,onKeyDown:T,isFocused:s.current,handleInitialButtonFocus:g})))}}),a("5abq6",function(e,t){e.exports.MAX_INDENTATION_LEVEL=6}),a("1KHo7",function(e,o){var n,r=i("l998X"),a=i("42omo"),s=i("iu6m9"),l=i("8m4tT");function d(e,t,o,n,r){let{selection:a}=e;if(r?.(e.tr)){let{indentLevel:e,itemIndex:t}=(0,i("lnYUq").getListItemAttributes)(a.$head);return{indentDisabled:0===t||e>=i("5abq6").MAX_INDENTATION_LEVEL-1,outdentDisabled:!1,node:"list"}}if(o?.isInsideTask)return{indentDisabled:o.indentDisabled,outdentDisabled:o.outdentDisabled,node:"taskList"};let s=1===a.$from.depth,d=(0,l.hasParentNodeOfType)(e.schema.nodes.layoutColumn)(a)&&3===a.$from.depth;return t&&n?.isIndentationAllowed&&(s||d)&&n?.indentDisabled!==void 0&&n?.outdentDisabled!==void 0?{indentDisabled:n.indentDisabled,outdentDisabled:n.outdentDisabled,node:"paragraph_heading"}:{indentDisabled:!0,outdentDisabled:!0,node:null}}var c=((n={}).PRIMARY="primaryToolbar",n.FLOATING="floatingToolbar",n);i("42omo");let p=(e,t,o)=>({buttonName:n,editorView:r})=>{switch(n){case"bullet_list":e?.core?.actions.execute(e?.list?.commands.toggleBulletList(o));break;case"ordered_list":e?.core?.actions.execute(e?.list?.commands.toggleOrderedList(o));break;case"indent":"paragraph_heading"===t&&e?.indentation?.actions.indentParagraphOrHeading(o)(r.state,r.dispatch),"list"===t&&e?.core?.actions.execute(e?.list?.commands.indentList(o)),"taskList"===t&&e?.taskDecision?.actions.indentTaskList(o)(r.state,r.dispatch);break;case"outdent":"paragraph_heading"===t&&e?.indentation?.actions.outdentParagraphOrHeading(o)(r.state,r.dispatch),"list"===t&&e?.core?.actions.execute(e?.list?.commands.outdentList(o)),"taskList"===t&&e?.taskDecision?.actions.outdentTaskList(o)(r.state,r.dispatch)}};function u({children:e}){return t(a).createElement("span",{className:(0,i("gMc0m").default)([(0,i("dh538").fg)("platform-visual-refresh-icons")?"_zulp1b66 _1e0c116y _4cvr1h6o":"_1e0c116y _4cvr1h6o",(0,i("dh538").fg)("platform-visual-refresh-icons")?"_11ko1txw _1p8dglyw _89rs1b66":"_11ko1txw _1p8dglyw"])},e)}function f(e){let{formatMessage:o}=(0,i("8C5kA").default)(),n=(0,a.useRef)(null),s=(0,a.useRef)(null),{disabled:l,isReducedSpacing:d,bulletListActive:c,bulletListDisabled:p,orderedListActive:f,orderedListDisabled:h,showIndentationButtons:m,indentDisabled:g,outdentDisabled:T,onItemActivated:E,pluginInjectionApi:b}=e,S=o(i("5Ilz2").messages.unorderedList),y=o(i("5Ilz2").messages.orderedList),_=o(i("5Ilz2").messages.listsFormat),C=o(i("2REsZ").messages.indent),I=o(i("2REsZ").messages.outdent),O=document.activeElement===n.current,k=document.activeElement===s.current,v=t=>o=>E({editorView:e.editorView,buttonName:t});return(0,a.useEffect)(()=>{O&&g&&s.current&&s.current.focus()},[n,g,O]),(0,a.useEffect)(()=>{k&&T&&n.current&&n.current.focus()},[s,T,k]),(0,r.jsxs)(u,{children:[(0,r.jsxs)("div",{role:"group","aria-label":_,children:[(0,r.jsx)(i("a4eZN").default,{buttonId:i("8TW6I").TOOLBAR_ACTION_SUBJECT_ID.BULLET_LIST,testId:S,spacing:d?"none":"default",onClick:v("bullet_list"),selected:c,"aria-pressed":c,"aria-label":(0,i("hgeg8").tooltip)(i("hgeg8").toggleBulletList,S),"aria-keyshortcuts":(0,i("hgeg8").getAriaKeyshortcuts)(i("hgeg8").toggleBulletList),disabled:p||l,title:(0,r.jsx)(i("hgeg8").ToolTipContent,{description:S,keymap:i("hgeg8").toggleBulletList}),iconBefore:(0,r.jsx)(t(i("cUQMr")),{label:"",color:"currentColor",spacing:"spacious"})}),(0,r.jsx)(i("a4eZN").default,{buttonId:i("8TW6I").TOOLBAR_ACTION_SUBJECT_ID.ORDERED_LIST,testId:y,spacing:d?"none":"default",onClick:v("ordered_list"),selected:f,"aria-pressed":f,"aria-label":(0,i("hgeg8").tooltip)(i("hgeg8").toggleOrderedList,y),"aria-keyshortcuts":(0,i("hgeg8").getAriaKeyshortcuts)(i("hgeg8").toggleOrderedList),disabled:h||l,title:(0,r.jsx)(i("hgeg8").ToolTipContent,{description:y,keymap:i("hgeg8").toggleOrderedList}),iconBefore:(0,r.jsx)(t(i("2y4tz")),{color:"currentColor",spacing:"spacious",label:""})}),m&&(0,r.jsx)(i("a4eZN").default,{buttonId:i("8TW6I").TOOLBAR_ACTION_SUBJECT_ID.OUTDENT,testId:i("8TW6I").TOOLBAR_ACTION_SUBJECT_ID.OUTDENT,ref:s,spacing:d?"none":"default",onClick:v("outdent"),iconBefore:(0,r.jsx)(t(i("dRLbl")),{color:"currentColor",spacing:"spacious",label:""}),disabled:T||l,"aria-label":(0,i("hgeg8").tooltip)(i("hgeg8").outdent,I),"aria-keyshortcuts":(0,i("hgeg8").getAriaKeyshortcuts)(i("hgeg8").outdent),title:(0,r.jsx)(i("hgeg8").ToolTipContent,{description:I,keymap:i("hgeg8").outdent})}),m&&(0,r.jsx)(i("a4eZN").default,{buttonId:i("8TW6I").TOOLBAR_ACTION_SUBJECT_ID.INDENT,testId:i("8TW6I").TOOLBAR_ACTION_SUBJECT_ID.INDENT,ref:n,spacing:d?"none":"default",onClick:v("indent"),iconBefore:(0,r.jsx)(t(i("ay6wY")),{color:"currentColor",spacing:"spacious",label:""}),disabled:g||l,"aria-label":(0,i("hgeg8").tooltip)(i("hgeg8").indent,C),"aria-keyshortcuts":(0,i("hgeg8").getAriaKeyshortcuts)(i("hgeg8").indent),title:(0,r.jsx)(i("hgeg8").ToolTipContent,{description:C,keymap:i("hgeg8").indent})})]}),!b?.primaryToolbar&&(0,r.jsx)(i("jN96M").ToolbarSeparator,{})]})}var h=i("h4TOP");function m(e){let{formatMessage:o}=(0,i("8C5kA").default)(),{disabled:n,isReducedSpacing:l,bulletListActive:d,orderedListActive:p,popupsMountPoint:u,popupsBoundariesElement:f,popupsScrollableElement:m,onItemActivated:g,pluginInjectionApi:T}=e,[E,b]=t(a).useState(!1),[S,y]=t(a).useState(!1),_=o(i("5Ilz2").messages.lists),C=e=>{b(e.isDropdownOpen)},I=function(e){let{formatMessage:o}=(0,i("8C5kA").default)(),n=o(i("5Ilz2").messages.unorderedList),a=o(i("5Ilz2").messages.orderedList),l=[{key:"unorderedList",content:n,value:{name:"bullet_list"},isDisabled:e.bulletListDisabled,isActive:!!e.bulletListActive,elemAfter:(0,r.jsx)(i("807Mc").Shortcut,{children:(0,i("hgeg8").tooltip)(i("hgeg8").toggleBulletList)}),elemBefore:(0,s.editorExperiment)("platform_editor_controls","variant1")?(0,r.jsx)(t(i("cUQMr")),{label:""}):void 0},{key:"orderedList",content:a,value:{name:"ordered_list"},isDisabled:e.orderedListDisabled,isActive:!!e.orderedListActive,elemAfter:(0,r.jsx)(i("807Mc").Shortcut,{children:(0,i("hgeg8").tooltip)(i("hgeg8").toggleOrderedList)}),elemBefore:(0,s.editorExperiment)("platform_editor_controls","variant1")?(0,r.jsx)(t(i("2y4tz")),{label:""}):void 0}];if(e.showIndentationButtons){let n=o(i("2REsZ").messages.indent),a=o(i("2REsZ").messages.outdent);l.push({key:"outdent",content:a,value:{name:"outdent"},isDisabled:e.outdentDisabled,isActive:!1,elemAfter:(0,r.jsx)(i("807Mc").Shortcut,{children:(0,i("hgeg8").tooltip)(i("hgeg8").outdent)}),elemBefore:(0,s.editorExperiment)("platform_editor_controls","variant1")?(0,r.jsx)(t(i("dRLbl")),{label:""}):void 0},{key:"indent",content:n,value:{name:"indent"},isDisabled:e.indentDisabled,isActive:!1,elemAfter:(0,r.jsx)(i("807Mc").Shortcut,{children:(0,i("hgeg8").tooltip)(i("hgeg8").indent)}),elemBefore:(0,s.editorExperiment)("platform_editor_controls","variant1")?(0,r.jsx)(t(i("ay6wY")),{label:""}):void 0})}return[{items:l}]}(e),O=e.toolbarType===c.FLOATING?"compact":"none",k=null,v=E;return(0,s.editorExperiment)("platform_editor_controls","variant1")?k=p?(0,r.jsx)(t(i("2y4tz")),{spacing:"spacious",label:""}):(0,r.jsx)(t(i("cUQMr")),{spacing:"spacious",label:""}):(k=(0,r.jsx)(t(i("cUQMr")),{color:"currentColor",spacing:"spacious",label:_}),v=d||p||E),(0,r.jsxs)(i("8mBDG").ToolbarDropdownWrapper,{children:[(0,r.jsx)(h.DropdownMenuWithKeyboardNavigation,{items:I,onItemActivated:({item:t,shouldCloseMenu:o=!0})=>(b(!o),g({editorView:e.editorView,buttonName:t.value.name})),mountTo:u,boundariesElement:f,scrollableElement:m,isOpen:E,onOpenChange:C,fitHeight:188,fitWidth:175,shouldUseDefaultRole:!0,shouldFocusFirstItem:()=>(S&&y(!1),S),children:(0,r.jsx)(i("a4eZN").default,{spacing:l?O:"default",selected:v,"aria-expanded":E,"aria-haspopup":!0,"aria-label":_,disabled:n,onClick:()=>{C({isDropdownOpen:!E})},onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),b(!E),y(!0))},title:_,iconBefore:(0,r.jsxs)(i("7k7Bn").ToolbarDropdownTriggerWrapper,{children:[k,(0,r.jsx)(i("l1m3U").ToolbarExpandIcon,{})]})})}),!T?.primaryToolbar&&(0,r.jsx)(i("jN96M").ToolbarSeparator,{})]})}let g={[c.PRIMARY]:i("d925B").INPUT_METHOD.TOOLBAR,[c.FLOATING]:i("d925B").INPUT_METHOD.FLOATING_TB},T=e=>g[e];function E(e){let{disabled:t,isSmall:o,isReducedSpacing:n,bulletListActive:a,bulletListDisabled:l,orderedListActive:d,orderedListDisabled:u,showIndentationButtons:h,popupsMountPoint:g,popupsBoundariesElement:E,popupsScrollableElement:b,indentDisabled:S,outdentDisabled:y,indentationStateNode:_,featureFlags:C,pluginInjectionApi:I,toolbarType:O}=e,k=O?T(O):i("d925B").INPUT_METHOD.TOOLBAR;if(o||O===c.FLOATING||(0,s.editorExperiment)("platform_editor_controls","variant1")){let o=[l,u,S,y].every(e=>!0==!!e),i=t||o;return(0,r.jsx)(m,{editorView:e.editorView,isReducedSpacing:n,popupsMountPoint:g,popupsBoundariesElement:E,popupsScrollableElement:b,bulletListActive:a,bulletListDisabled:l,showIndentationButtons:h,orderedListActive:d,orderedListDisabled:u,indentDisabled:S,outdentDisabled:y,disabled:i,onItemActivated:p(I,_,k),featureFlags:C,pluginInjectionApi:I,toolbarType:O})}return(0,r.jsx)(f,{editorView:e.editorView,isReducedSpacing:n,bulletListActive:a,bulletListDisabled:l,showIndentationButtons:h,orderedListActive:d,orderedListDisabled:u,indentDisabled:S,outdentDisabled:y,disabled:t,onItemActivated:p(I,_,k),featureFlags:C,pluginInjectionApi:I})}let b={disabled:!1,isToolbarReducedSpacing:!0,isSmall:!0};function S({featureFlags:e,editorView:t,showIndentationButtons:o,pluginInjectionApi:n,allowHeadingAndParagraphIndentation:l}){let{bulletListActive:p,bulletListDisabled:u,orderedListActive:f,orderedListDisabled:h,isIndentationAllowed:m,indentDisabled:g,outdentDisabled:T}=(0,i("eiA8Z").useSharedPluginStateWithSelector)(n,["list","indentation"],e=>({bulletListActive:e.listState?.bulletListActive,bulletListDisabled:e.listState?.bulletListDisabled,orderedListActive:e.listState?.orderedListActive,orderedListDisabled:e.listState?.orderedListDisabled,isIndentationAllowed:e.indentationState?.isIndentationAllowed,indentDisabled:e.indentationState?.indentDisabled,outdentDisabled:e.indentationState?.outdentDisabled,decorationSet:e.listState?.decorationSet})),[S,y]=(0,a.useState)();(0,i("6qdjm").usePluginStateEffect)(n,["taskDecision"],({taskDecisionState:e})=>{(e?.outdentDisabled!==S?.outdentDisabled||e?.indentDisabled!==S?.indentDisabled||e?.isInsideTask!==S?.isInsideTask)&&y({isInsideTask:!!e?.isInsideTask,indentDisabled:!!e?.indentDisabled,outdentDisabled:!!e?.outdentDisabled})});let _=d(t.state,l,S,{isIndentationAllowed:m,indentDisabled:g,outdentDisabled:T},n?.list?.actions.isInsideListItem);return void 0===p||void 0===u||void 0===f||void 0===h?null:(0,r.jsx)(E,{featureFlags:e,isSmall:b.isSmall,isReducedSpacing:!(0,s.editorExperiment)("platform_editor_controls","variant1")&&b.isToolbarReducedSpacing,disabled:b.disabled,editorView:t,bulletListActive:p,bulletListDisabled:u,orderedListActive:f,orderedListDisabled:h,showIndentationButtons:!!o,indentDisabled:_.indentDisabled,outdentDisabled:_.outdentDisabled,indentationStateNode:_?.node,pluginInjectionApi:n,toolbarType:c.FLOATING})}i("42omo"),i("42omo"),i("42omo");let y=({api:e,parents:t})=>{let{formatMessage:o}=(0,i("8C5kA").default)(),n=o(i("5Ilz2").messages.bulletedList),{bulletListActive:r,bulletListDisabled:a,taskListActive:s}=(0,i("eiA8Z").useSharedPluginStateWithSelector)(e,["list","taskDecision"],e=>({bulletListActive:e.listState?.bulletListActive,bulletListDisabled:e.listState?.bulletListDisabled,taskListActive:e.taskDecisionState?.isInsideTask}));return{bulletMessage:n,onClick:()=>{e?.core.actions.execute(s?e?.taskDecision?.commands.toggleTaskList("bulletList"):e?.list.commands.toggleBulletList((0,i("4Dsx2").getInputMethodFromParentKeys)(t)))},isDisabled:a&&!s,isSelected:r,shortcut:(0,i("hgeg8").formatShortcut)(i("hgeg8").toggleBulletList)}},_=({api:e,parents:o})=>{let{bulletMessage:n,onClick:a,isDisabled:s,isSelected:l,shortcut:d}=y({api:e,parents:o});return(0,r.jsx)(i("2GVu1").ToolbarDropdownItem,{elemBefore:(0,r.jsx)(t(i("cUQMr")),{size:"small",label:""}),elemAfter:d?(0,r.jsx)(i("jbmmV").ToolbarKeyboardShortcutHint,{shortcut:d}):void 0,isSelected:l,isDisabled:s,onClick:a,ariaKeyshortcuts:d,children:n})},C=({api:e,parents:o})=>{let{bulletMessage:n,onClick:a,isDisabled:s,isSelected:l}=y({api:e,parents:o});return(0,r.jsx)(i("iIVVb").ToolbarTooltip,{content:(0,r.jsx)(i("hgeg8").ToolTipContent,{description:n,keymap:i("hgeg8").toggleBulletList}),children:(0,r.jsx)(i("7ERUE").ToolbarButton,{iconBefore:(0,r.jsx)(t(i("cUQMr")),{size:"small",label:""}),onClick:a,isSelected:l,isDisabled:s,ariaKeyshortcuts:(0,i("hgeg8").getAriaKeyshortcuts)(i("hgeg8").toggleBulletList)})})},I=({children:e})=>{let{editorAppearance:t}=(0,i("gzUv9").useEditorToolbar)();if("full-page"===t)return(0,r.jsx)(i("aro2m").Show,{above:"xl",children:(0,r.jsx)(i("kDB94").ToolbarButtonGroup,{children:e})})},O=e=>[{type:i("cPCP8").BULLETED_LIST_BUTTON_GROUP.type,key:i("cPCP8").BULLETED_LIST_BUTTON_GROUP.key,parents:[{type:i("cPCP8").TEXT_SECTION_PRIMARY_TOOLBAR.type,key:i("cPCP8").TEXT_SECTION_PRIMARY_TOOLBAR.key,rank:i("4Chin").TEXT_SECTION_PRIMARY_TOOLBAR_RANK[i("cPCP8").BULLETED_LIST_BUTTON_GROUP.key]}],component:({children:e})=>(0,r.jsx)(I,{children:e})},{type:i("cPCP8").BULLETED_LIST_BUTTON.type,key:i("cPCP8").BULLETED_LIST_BUTTON.key,parents:[{type:i("cPCP8").BULLETED_LIST_BUTTON_GROUP.type,key:i("cPCP8").BULLETED_LIST_BUTTON_GROUP.key,rank:100}],component:({parents:t})=>(0,r.jsx)(C,{api:e,parents:t})}],k=()=>[{type:i("cPCP8").LISTS_INDENTATION_GROUP_INLINE.type,key:i("cPCP8").LISTS_INDENTATION_GROUP_INLINE.key,parents:[{type:i("cPCP8").TEXT_SECTION.type,key:i("cPCP8").TEXT_SECTION.key,rank:i("4Chin").TEXT_SECTION_RANK[i("cPCP8").LISTS_INDENTATION_GROUP.key]}]}];i("42omo");let v=({children:e})=>{let{editorAppearance:t}=(0,i("gzUv9").useEditorToolbar)();if("full-page"===t)return(0,r.jsx)(i("aro2m").Show,{above:"xl",children:(0,r.jsx)(i("kDB94").ToolbarButtonGroup,{children:e})})},x=({children:e})=>{let{editorAppearance:t}=(0,i("gzUv9").useEditorToolbar)();return"full-page"===t?(0,r.jsx)(i("aro2m").Show,{below:"xl",children:(0,r.jsx)(i("kDB94").ToolbarButtonGroup,{children:e})}):(0,r.jsx)(i("kDB94").ToolbarButtonGroup,{children:e})},N=()=>[{type:i("cPCP8").LISTS_INDENTATION_GROUP.type,key:i("cPCP8").LISTS_INDENTATION_GROUP.key,parents:[{type:i("cPCP8").TEXT_SECTION_PRIMARY_TOOLBAR.type,key:i("cPCP8").TEXT_SECTION_PRIMARY_TOOLBAR.key,rank:i("4Chin").TEXT_SECTION_PRIMARY_TOOLBAR_RANK[i("cPCP8").LISTS_INDENTATION_GROUP.key]}],component:({children:e})=>(0,r.jsx)(v,{children:e})},{type:i("cPCP8").LISTS_INDENTATION_GROUP_COLLAPSED.type,key:i("cPCP8").LISTS_INDENTATION_GROUP_COLLAPSED.key,parents:[{type:i("cPCP8").TEXT_SECTION_PRIMARY_TOOLBAR.type,key:i("cPCP8").TEXT_SECTION_PRIMARY_TOOLBAR.key,rank:i("4Chin").TEXT_SECTION_PRIMARY_TOOLBAR_RANK[i("cPCP8").LISTS_INDENTATION_GROUP.key]}],component:({children:e})=>(0,r.jsx)(x,{children:e})}];i("42omo"),i("42omo");var A=i("1oCLl");function P({api:e,parents:o,defaultListType:n}){let{formatMessage:a}=(0,i("8C5kA").default)(),{bulletListActive:s,bulletListDisabled:l,orderedListActive:d,taskListActive:c}=(0,i("eiA8Z").useSharedPluginStateWithSelector)(e,["list","taskDecision"],e=>({bulletListActive:e.listState?.bulletListActive,bulletListDisabled:e.listState?.bulletListDisabled,orderedListActive:e.listState?.orderedListActive,taskListActive:e.taskDecisionState?.isInsideTask})),p=c?"taskList":d?"orderedList":n,u=(0,A.expValEquals)("platform_editor_toolbar_aifc_patch_6","isEnabled",!0)?i("hgeg8").toggleTaskList:i("hgeg8").toggleTaskItemCheckbox,f="taskList"===p?u:"orderedList"===p?i("hgeg8").toggleOrderedList:i("hgeg8").toggleBulletList,h=(0,i("hgeg8").formatShortcut)(f),m=a("taskList"===p?i("2iuib").tasksAndDecisionsMessages.taskList:"orderedList"===p?i("5Ilz2").messages.orderedList:i("5Ilz2").messages.bulletedList);return{shortcut:h,keymap:f,message:m,onClick:()=>{let t=(0,i("4Dsx2").getInputMethodFromParentKeys)(o);"taskList"===p?e?.core.actions.execute(e?.taskDecision?.commands.toggleTaskList()):"orderedList"===p?e?.core.actions.execute(e?.list.commands.toggleOrderedList(t)):e?.core.actions.execute(e?.list.commands.toggleBulletList(t))},iconBefore:"taskList"===p?(0,r.jsx)(t(i("dmbve")),{label:a(i("2iuib").tasksAndDecisionsMessages.taskList),size:"small"}):"orderedList"===p?(0,r.jsx)(t(i("2y4tz")),{label:a(i("5Ilz2").messages.orderedList),size:"small"}):(0,r.jsx)(t(i("cUQMr")),{label:a(i("5Ilz2").messages.bulletedList),size:"small"}),isSelected:"bulletList"===p?s:"orderedList"===p?d:c,isDisabled:!d&&!c&&l}}let M=({api:e,parents:t})=>{let{shortcut:o,keymap:n,message:a,onClick:s,iconBefore:l,isSelected:d,isDisabled:c}=P({api:e,parents:t,defaultListType:"bulletList"});return(0,r.jsx)(i("iIVVb").ToolbarTooltip,{content:(0,r.jsx)(i("hgeg8").ToolTipContent,{description:a,keymap:n}),children:(0,r.jsx)(i("7ERUE").ToolbarButton,{iconBefore:l,isSelected:d,isDisabled:c,ariaKeyshortcuts:o,onClick:s})})},R=({api:e,parents:t})=>{let{shortcut:o,keymap:n,message:a,onClick:s,iconBefore:l,isSelected:d,isDisabled:c}=P({api:e,parents:t,defaultListType:"orderedList"});return(0,r.jsx)(i("iIVVb").ToolbarTooltip,{content:(0,r.jsx)(i("hgeg8").ToolTipContent,{description:a,keymap:n}),children:(0,r.jsx)(i("7ERUE").ToolbarButton,{iconBefore:l,isSelected:d,isDisabled:c,ariaKeyshortcuts:o,onClick:s})})},w=e=>[{type:i("cPCP8").LISTS_INDENTATION_HERO_BUTTON.type,key:i("cPCP8").LISTS_INDENTATION_HERO_BUTTON.key,parents:[{type:i("cPCP8").LISTS_INDENTATION_GROUP.type,key:i("cPCP8").LISTS_INDENTATION_GROUP.key,rank:i("4Chin").LISTS_INDENTATION_GROUP_RANK[i("cPCP8").LISTS_INDENTATION_HERO_BUTTON.key]}],component:({parents:t})=>(0,r.jsx)(R,{api:e,parents:t})},{type:i("cPCP8").LISTS_INDENTATION_HERO_BUTTON_COLLAPSED.type,key:i("cPCP8").LISTS_INDENTATION_HERO_BUTTON_COLLAPSED.key,parents:[{type:i("cPCP8").LISTS_INDENTATION_GROUP_COLLAPSED.type,key:i("cPCP8").LISTS_INDENTATION_GROUP_COLLAPSED.key,rank:i("4Chin").LISTS_INDENTATION_GROUP_COLLAPSED_RANK[i("cPCP8").LISTS_INDENTATION_HERO_BUTTON_COLLAPSED.key]},{type:i("cPCP8").LISTS_INDENTATION_GROUP_INLINE.type,key:i("cPCP8").LISTS_INDENTATION_GROUP_INLINE.key,rank:i("4Chin").LISTS_INDENTATION_GROUP_COLLAPSED_RANK[i("cPCP8").LISTS_INDENTATION_HERO_BUTTON_COLLAPSED.key]}],component:({parents:t})=>(0,r.jsx)(M,{api:e,parents:t})}];i("42omo"),i("42omo");let L=({api:e,allowHeadingAndParagraphIndentation:t,state:o})=>{let{isIndentationAllowed:n,indentDisabled:r,outdentDisabled:a}=(0,i("eiA8Z").useSharedPluginStateWithSelector)(e,["indentation"],e=>({isIndentationAllowed:e.indentationState?.isIndentationAllowed,outdentDisabled:e.indentationState?.outdentDisabled,indentDisabled:e.indentationState?.indentDisabled})),{isInsideTask:s,indentDisabled:l,outdentDisabled:c}=(0,i("eiA8Z").useSharedPluginStateWithSelector)(e,["taskDecision"],e=>({isInsideTask:e.taskDecisionState?.isInsideTask,outdentDisabled:e.taskDecisionState?.outdentDisabled,indentDisabled:e.taskDecisionState?.indentDisabled}));if(o)return d(o,t,{isInsideTask:s??!1,indentDisabled:l??!1,outdentDisabled:c??!1},{isIndentationAllowed:n,indentDisabled:r,outdentDisabled:a},e?.list.actions.isInsideListItem)},B=({api:e,showIndentationButtons:o,allowHeadingAndParagraphIndentation:n,parents:a})=>{let{formatMessage:s}=(0,i("8C5kA").default)(),{editorView:l}=(0,i("gzUv9").useEditorToolbar)(),d=L({api:e,allowHeadingAndParagraphIndentation:n,state:l?.state});if(!o)return null;let c=(0,i("hgeg8").formatShortcut)(i("hgeg8").indent);return(0,r.jsx)(i("2GVu1").ToolbarDropdownItem,{elemBefore:(0,r.jsx)(t(i("ay6wY")),{size:"small",label:""}),elemAfter:c?(0,r.jsx)(i("jbmmV").ToolbarKeyboardShortcutHint,{shortcut:c}):void 0,isDisabled:d?.indentDisabled,ariaKeyshortcuts:c,onClick:()=>{let t=(0,i("4Dsx2").getInputMethodFromParentKeys)(a),o=d?.node;"paragraph_heading"===o&&l?.state&&e?.indentation?.actions.indentParagraphOrHeading(t)(l?.state,l?.dispatch),"list"===o&&e?.core?.actions.execute(e?.list?.commands.indentList(t)),"taskList"===o&&l?.state&&e?.taskDecision?.actions.indentTaskList(t)(l?.state,l?.dispatch)},children:s(i("2REsZ").messages.indent)})};i("42omo");let D=(0,i("cgtv4").defineMessages)({unorderedList:{id:"fabric.editor.unorderedList",defaultMessage:"Bullet list"},unorderedListDescription:{id:"fabric.editor.unorderedList.description",defaultMessage:"Create an unordered list"},orderedList:{id:"fabric.editor.orderedList",defaultMessage:"Numbered list"},orderedListDescription:{id:"fabric.editor.orderedList.description",defaultMessage:"Create an ordered list"},lists:{id:"fabric.editor.lists",defaultMessage:"Lists"}}),U=({children:e,api:t,allowHeadingAndParagraphIndentation:o})=>{let{formatMessage:n}=(0,i("8C5kA").default)(),{editorView:a}=(0,i("gzUv9").useEditorToolbar)(),s=L({api:t,allowHeadingAndParagraphIndentation:o,state:a?.state}),{bulletListDisabled:l,orderedListDisabled:d,taskListActive:c}=(0,i("eiA8Z").useSharedPluginStateWithSelector)(t,["list","taskDecision"],e=>({bulletListDisabled:e.listState?.bulletListDisabled,orderedListDisabled:e.listState?.orderedListDisabled,taskListActive:e.taskDecisionState?.isInsideTask})),p=l&&d&&s?.indentDisabled&&s?.outdentDisabled&&!c;return(0,A.expValEquals)("platform_editor_toolbar_aifc_patch_6","isEnabled",!0)?(0,r.jsx)(i("iIVVb").ToolbarTooltip,{content:n(D.lists),children:(0,r.jsx)(i("bTiiT").ToolbarDropdownMenu,{iconBefore:(0,r.jsx)(i("EJKmu").MoreItemsIcon,{label:n(D.lists)}),isDisabled:p,testId:"editor-toolbar__lists-and-indentation-menu",label:n(D.lists),children:e})}):(0,r.jsx)(i("bTiiT").ToolbarDropdownMenu,{iconBefore:(0,r.jsx)(i("EJKmu").MoreItemsIcon,{label:n(D.lists)}),isDisabled:p,testId:"editor-toolbar__lists-and-indentation-menu",label:n(D.lists),children:e})};i("42omo");let K=({children:e,title:t,parents:o})=>{let n=o.some(e=>e.key===i("cPCP8").TEXT_COLLAPSED_MENU.key);return(0,r.jsx)(i("6UWPx").ToolbarDropdownItemSection,{hasSeparator:n,title:t,children:e})};i("42omo");let j=({api:e,parents:o})=>{let{formatMessage:n}=(0,i("8C5kA").default)(),{orderedListActive:a,orderedListDisabled:s,taskListActive:l}=(0,i("eiA8Z").useSharedPluginStateWithSelector)(e,["list","taskDecision"],e=>({orderedListActive:e.listState?.orderedListActive,orderedListDisabled:e.listState?.orderedListDisabled,taskListActive:e.taskDecisionState?.isInsideTask})),d=(0,i("hgeg8").formatShortcut)(i("hgeg8").toggleOrderedList);return(0,r.jsx)(i("2GVu1").ToolbarDropdownItem,{elemBefore:(0,r.jsx)(t(i("2y4tz")),{size:"small",label:""}),elemAfter:d?(0,r.jsx)(i("jbmmV").ToolbarKeyboardShortcutHint,{shortcut:d}):void 0,isSelected:a,isDisabled:s&&!l,onClick:()=>{e?.core.actions.execute(l?e?.taskDecision?.commands.toggleTaskList("orderedList"):e?.list.commands.toggleOrderedList((0,i("4Dsx2").getInputMethodFromParentKeys)(o)))},ariaKeyshortcuts:d,children:n(i("5Ilz2").messages.orderedList)})};i("42omo");let F=({api:e,allowHeadingAndParagraphIndentation:o,showIndentationButtons:n,parents:a})=>{let{formatMessage:s}=(0,i("8C5kA").default)(),{editorView:l}=(0,i("gzUv9").useEditorToolbar)(),d=L({api:e,allowHeadingAndParagraphIndentation:o,state:l?.state});if(!n)return null;let c=(0,i("hgeg8").formatShortcut)(i("hgeg8").outdent);return(0,r.jsx)(i("2GVu1").ToolbarDropdownItem,{elemBefore:(0,r.jsx)(t(i("dRLbl")),{size:"small",label:""}),elemAfter:c?(0,r.jsx)(i("jbmmV").ToolbarKeyboardShortcutHint,{shortcut:c}):void 0,isDisabled:d?.outdentDisabled,ariaKeyshortcuts:c,onClick:()=>{let t=(0,i("4Dsx2").getInputMethodFromParentKeys)(a),o=d?.node;"paragraph_heading"===o&&l?.state&&e?.indentation?.actions.outdentParagraphOrHeading(t)(l?.state,l?.dispatch),"list"===o&&e?.core.actions.execute(e?.list.commands.outdentList(t)),"taskList"===o&&l?.state&&e?.taskDecision?.actions.outdentTaskList(t)(l?.state,l?.dispatch)},children:s(i("2REsZ").messages.outdent)})};i("42omo");let G=({api:e})=>{let{formatMessage:o}=(0,i("8C5kA").default)(),{editorView:n}=(0,i("gzUv9").useEditorToolbar)(),a=(0,i("b3YrF").useSharedPluginStateSelector)(e,"taskDecision.isInsideTask");return n?.state.schema.nodes.taskItem?(0,r.jsx)(i("2GVu1").ToolbarDropdownItem,{elemBefore:(0,r.jsx)(t(i("dmbve")),{size:"small",label:""}),elemAfter:(0,r.jsx)(i("jbmmV").ToolbarKeyboardShortcutHint,{shortcut:"[]"}),isSelected:a,isDisabled:!1,onClick:()=>{e?.core.actions.execute(e?.taskDecision?.commands.toggleTaskList())},children:o(i("2iuib").tasksAndDecisionsMessages.taskList)}):null},H=(e,t,o)=>[{type:i("cPCP8").LISTS_INDENTATION_MENU.type,key:i("cPCP8").LISTS_INDENTATION_MENU.key,parents:[{type:i("cPCP8").LISTS_INDENTATION_GROUP.type,key:i("cPCP8").LISTS_INDENTATION_GROUP.key,rank:i("4Chin").LISTS_INDENTATION_GROUP_RANK[i("cPCP8").LISTS_INDENTATION_MENU.key]},{type:i("cPCP8").LISTS_INDENTATION_GROUP_COLLAPSED.type,key:i("cPCP8").LISTS_INDENTATION_GROUP_COLLAPSED.key,rank:i("4Chin").LISTS_INDENTATION_GROUP_COLLAPSED_RANK[i("cPCP8").LISTS_INDENTATION_MENU.key]},{type:i("cPCP8").LISTS_INDENTATION_GROUP_INLINE.type,key:i("cPCP8").LISTS_INDENTATION_GROUP_INLINE.key,rank:i("4Chin").LISTS_INDENTATION_GROUP_COLLAPSED_RANK[i("cPCP8").LISTS_INDENTATION_MENU.key]}],component:({children:t})=>(0,r.jsx)(U,{api:o,allowHeadingAndParagraphIndentation:e,children:t})},{type:i("cPCP8").LISTS_INDENTATION_MENU_SECTION.type,key:i("cPCP8").LISTS_INDENTATION_MENU_SECTION.key,parents:[{type:i("cPCP8").LISTS_INDENTATION_MENU.type,key:i("cPCP8").LISTS_INDENTATION_MENU.key,rank:i("4Chin").LISTS_INDENTATION_MENU_RANK[i("cPCP8").LISTS_INDENTATION_MENU_SECTION.key]},...(0,A.expValEquals)("platform_editor_toolbar_aifc_responsive","isEnabled",!0)?[{type:i("cPCP8").TEXT_COLLAPSED_MENU.type,key:i("cPCP8").TEXT_COLLAPSED_MENU.key,rank:i("4Chin").TEXT_COLLAPSED_MENU_RANK[i("cPCP8").LISTS_INDENTATION_MENU_SECTION.key]}]:[]],component:(0,A.expValEquals)("platform_editor_toolbar_aifc_responsive","isEnabled",!0)?K:void 0},{type:i("cPCP8").BULLETED_LIST_MENU_ITEM.type,key:i("cPCP8").BULLETED_LIST_MENU_ITEM.key,parents:[{type:i("cPCP8").LISTS_INDENTATION_MENU_SECTION.type,key:i("cPCP8").LISTS_INDENTATION_MENU_SECTION.key,rank:i("4Chin").LISTS_INDENTATION_MENU_SECTION_RANK[i("cPCP8").BULLETED_LIST_MENU_ITEM.key]}],component:({parents:e})=>(0,r.jsx)(_,{api:o,parents:e})},{type:i("cPCP8").NUMBERED_LIST_MENU_ITEM.type,key:i("cPCP8").NUMBERED_LIST_MENU_ITEM.key,parents:[{type:i("cPCP8").LISTS_INDENTATION_MENU_SECTION.type,key:i("cPCP8").LISTS_INDENTATION_MENU_SECTION.key,rank:i("4Chin").LISTS_INDENTATION_MENU_SECTION_RANK[i("cPCP8").NUMBERED_LIST_MENU_ITEM.key]}],component:({parents:e})=>(0,r.jsx)(j,{api:o,parents:e})},...(0,A.expValEquals)("platform_editor_toolbar_aifc_patch_6","isEnabled",!0)?[]:[{type:i("cPCP8").TASK_LIST_MENU_ITEM.type,key:i("cPCP8").TASK_LIST_MENU_ITEM.key,parents:[{type:i("cPCP8").LISTS_INDENTATION_MENU_SECTION.type,key:i("cPCP8").LISTS_INDENTATION_MENU_SECTION.key,rank:i("4Chin").LISTS_INDENTATION_MENU_SECTION_RANK[i("cPCP8").TASK_LIST_MENU_ITEM.key]}],component:({parents:e})=>(0,r.jsx)(G,{api:o,parents:e})}],{type:i("cPCP8").OUTDENT_MENU_ITEM.type,key:i("cPCP8").OUTDENT_MENU_ITEM.key,parents:[{type:i("cPCP8").LISTS_INDENTATION_MENU_SECTION.type,key:i("cPCP8").LISTS_INDENTATION_MENU_SECTION.key,rank:i("4Chin").LISTS_INDENTATION_MENU_SECTION_RANK[i("cPCP8").OUTDENT_MENU_ITEM.key]}],component:({parents:n})=>(0,r.jsx)(F,{api:o,allowHeadingAndParagraphIndentation:e,showIndentationButtons:t,parents:n})},{type:i("cPCP8").INDENT_MENU_ITEM.type,key:i("cPCP8").INDENT_MENU_ITEM.key,parents:[{type:i("cPCP8").LISTS_INDENTATION_MENU_SECTION.type,key:i("cPCP8").LISTS_INDENTATION_MENU_SECTION.key,rank:i("4Chin").LISTS_INDENTATION_MENU_SECTION_RANK[i("cPCP8").INDENT_MENU_ITEM.key]}],component:({parents:n})=>(0,r.jsx)(B,{api:o,allowHeadingAndParagraphIndentation:e,showIndentationButtons:t,parents:n})}],z=({api:e,showIndentationButtons:t,allowHeadingAndParagraphIndentation:o})=>[...N(),...k(),...w(e),...O(e),...H(o,t,e)];function V({featureFlags:e,popupsMountPoint:t,popupsBoundariesElement:o,popupsScrollableElement:n,isSmall:s,isToolbarReducedSpacing:l,disabled:p,editorView:u,showIndentationButtons:f,pluginInjectionApi:h,allowHeadingAndParagraphIndentation:m}){let{bulletListActive:g,bulletListDisabled:T,orderedListActive:b,orderedListDisabled:S,isIndentationAllowed:y,indentDisabled:_,outdentDisabled:C}=(0,i("eiA8Z").useSharedPluginStateWithSelector)(h,["list","indentation"],e=>({bulletListActive:e.listState?.bulletListActive,bulletListDisabled:e.listState?.bulletListDisabled,orderedListActive:e.listState?.orderedListActive,orderedListDisabled:e.listState?.orderedListDisabled,isIndentationAllowed:e.indentationState?.isIndentationAllowed,indentDisabled:e.indentationState?.indentDisabled,outdentDisabled:e.indentationState?.outdentDisabled,decorationSet:e.listState?.decorationSet})),[I,O]=(0,a.useState)();(0,i("6qdjm").usePluginStateEffect)(h,["taskDecision"],({taskDecisionState:e})=>{(e?.outdentDisabled!==I?.outdentDisabled||e?.indentDisabled!==I?.indentDisabled||e?.isInsideTask!==I?.isInsideTask)&&O({isInsideTask:!!e?.isInsideTask,indentDisabled:!!e?.indentDisabled,outdentDisabled:!!e?.outdentDisabled})});let k=d(u.state,m,I,{isIndentationAllowed:y,indentDisabled:_,outdentDisabled:C},h?.list?.actions.isInsideListItem);return void 0===g||void 0===T||void 0===b||void 0===S?null:(0,r.jsx)(E,{featureFlags:e,isSmall:s,isReducedSpacing:l,disabled:p,editorView:u,popupsMountPoint:t,popupsBoundariesElement:o,popupsScrollableElement:n,bulletListActive:g,bulletListDisabled:T,orderedListActive:b,orderedListDisabled:S,showIndentationButtons:!!f,indentDisabled:k.indentDisabled,outdentDisabled:k.outdentDisabled,indentationStateNode:k?.node,pluginInjectionApi:h,toolbarType:c.PRIMARY})}e.exports.toolbarListsIndentationPlugin=({config:e,api:t})=>{let{showIndentationButtons:o=!1,allowHeadingAndParagraphIndentation:n=!1}=e??{},a=t?.featureFlags?.sharedState.currentState()||{},l=!!t?.toolbar,d=({editorView:e,popupsMountPoint:s,popupsBoundariesElement:l,popupsScrollableElement:d,toolbarSize:c,disabled:p,isToolbarReducedSpacing:u})=>e?(0,r.jsx)(V,{featureFlags:a,popupsMountPoint:s,popupsBoundariesElement:l,popupsScrollableElement:d,isSmall:c<i("zMjD6").ToolbarSize.L,isToolbarReducedSpacing:u,disabled:p,editorView:e,showIndentationButtons:o,pluginInjectionApi:t,allowHeadingAndParagraphIndentation:n}):null;return l?t?.toolbar?.actions.registerComponents(z({api:t,showIndentationButtons:o,allowHeadingAndParagraphIndentation:n})):t?.primaryToolbar?.actions.registerComponent({name:"toolbarListsIndentation",component:d}),{name:"toolbarListsIndentation",pluginsOptions:{...!l&&{selectionToolbar:()=>"none"===((0,i("dh538").fg)("platform_editor_use_preferences_plugin")?t?.userPreferences?.sharedState.currentState()?.preferences.toolbarDockingPosition:t?.selectionToolbar?.sharedState?.currentState()?.toolbarDocking)&&(0,s.editorExperiment)("platform_editor_controls","variant1",{exposure:!0})?{rank:3,isToolbarAbove:!0,items:[{type:"custom",render:e=>{if(e)return(0,r.jsx)(S,{editorView:e,featureFlags:a,pluginInjectionApi:t,showIndentationButtons:o,allowHeadingAndParagraphIndentation:n})},fallback:[]}],pluginName:"toolbarListsIndentation"}:void 0}},primaryToolbarComponent:l||t?.primaryToolbar?void 0:d}}}),a("jN96M",function(e,t){var o=i("42omo");e.exports.ToolbarSeparator=function(){return o.createElement("span",{"data-testid":"editor-toolbar-seperator",className:(0,i("gMc0m").default)(["_1e0c1o8l _1bsbt94y _4t3i1tcg _19pkze3t _otyrze3t _18u0u2gc _2hwxu2gc _uiztglyw _bfhkplhp"])})}}),a("7k7Bn",function(e,o){var n=i("42omo");e.exports.ToolbarDropdownTriggerWrapper=function({children:e}){return t(n).createElement("div",{className:(0,i("gMc0m").default)([(0,i("dh538").fg)("platform-visual-refresh-icons")?"_1e0c1txw _u5f3v77o":"_1e0c1txw","_1fvdglyw"])},e)}}),a("8mBDG",function(e,o){var n=i("42omo");e.exports.ToolbarDropdownWrapper=function({children:e}){return t(n).createElement("span",{className:(0,i("gMc0m").default)(["_1e0c1txw _4cvr1h6o _18u0idpf _1ul91wug","_p7r11txw _1xdi1txw _1ylx1txw _1fvdglyw"])},e)}}),a("l1m3U",function(e,o){var n=i("42omo");e.exports.ToolbarExpandIcon=function(){return n.createElement("span",{className:(0,i("gMc0m").default)(["_1e0c1txw _4cvr1h6o"])},n.createElement(t(i("7kzZ3")),{label:"",color:"currentColor",LEGACY_margin:"0 0 0 -8px",size:"small"}))}}),a("560vg",function(e,o){let n=t(i("5d9b4"))(e=>e.dom?.clientWidth);function r(e,t){return`${e}:${t}`}e.exports.makeNodePlaceholderId=r,e.exports.LazyNodeView=class{ignoreMutation(){return!this.node.type.isTextblock}constructor(e,t,o,a){if(this.dom=void 0,this.contentDOM=void 0,this.node=void 0,this.outerDeco=void 0,this.update=(e,t)=>{let o=this.node;return this.node=e,!!function(e,t){if(e.length!==t.length)return!1;for(let o=0;o<e.length;o++)if(!e[o].type||!e[o].type.eq(t[o].type))return!1;return!0}(t,this.outerDeco)&&!this.node.sameMarkup(o)},this.node=e,this.outerDeco=a,"function"!=typeof e.type?.spec?.toDOM){this.dom=document.createElement("div");return}let s={editorLineWidth:n(t)},l=i("5SAOw").DOMSerializer.renderSpec(document,e.type.spec.toDOM(e,s));if(this.dom=l.dom,this.contentDOM=l.contentDOM,this.dom instanceof HTMLElement){this.dom.setAttribute("data-lazy-node-view",e.type.name),this.dom.setAttribute("data-lazy-node-view-fallback","true"),this.dom.setAttribute("data-vc",`editor-lnv-fallback--${e.type.name}`);let t=o();void 0!==t&&this.dom.setAttribute("data-editor-lnv-placeholder",r(e.type.name,t))}}}}),a("3yaUF",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=void 0;var o=r(i("42omo")),n=r(i("aSNrY"));function r(e){return e&&e.__esModule?e:{default:e}}let a=e=>o.default.createElement(n.default,Object.assign({name:"TextHeadingFiveIcon",dangerouslySetGlyph:'<path fill="currentcolor" fill-rule="evenodd" d="M16 8.5h-3.75a.75.75 0 0 0-.75.75v3c0 .41.34.75.75.75h2.25v1.5h-3V16h3.13c.76 0 1.38-.62 1.38-1.37v-1.75c0-.76-.62-1.37-1.37-1.37H13V10h3zM2.5 6.25V1H1v12h1.5V7.75H8V13h1.5V1H8v5.25z" clip-rule="evenodd"/>'},e));a.displayName="TextHeadingFiveIcon",e.exports.default=a}),a("aYGvQ",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=void 0;var o=r(i("42omo")),n=r(i("aSNrY"));function r(e){return e&&e.__esModule?e:{default:e}}let a=e=>o.default.createElement(n.default,Object.assign({name:"TextHeadingFourIcon",dangerouslySetGlyph:'<path fill="currentcolor" fill-rule="evenodd" d="M12.5 12V8.5H11v3.63c0 .76.62 1.38 1.38 1.38h2.12V16H16V8.5h-1.5V12zm-10-5.75V1H1v12h1.5V7.75H8V13h1.5V1H8v5.25z" clip-rule="evenodd"/>'},e));a.displayName="TextHeadingFourIcon",e.exports.default=a}),a("5wdIn",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=void 0;var o=r(i("42omo")),n=r(i("aSNrY"));function r(e){return e&&e.__esModule?e:{default:e}}let a=e=>o.default.createElement(n.default,Object.assign({name:"TextHeadingOneIcon",dangerouslySetGlyph:'<path fill="currentcolor" fill-rule="evenodd" d="M2.5 6.25V1H1v12h1.5V7.75H8V13h1.5V1H8v5.25zM12 8.5h1.75a.75.75 0 0 1 .75.75V16H13v-6h-1z" clip-rule="evenodd"/>'},e));a.displayName="TextHeadingOneIcon",e.exports.default=a}),a("l1461",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=void 0;var o=r(i("42omo")),n=r(i("aSNrY"));function r(e){return e&&e.__esModule?e:{default:e}}let a=e=>o.default.createElement(n.default,Object.assign({name:"TextHeadingSixIcon",dangerouslySetGlyph:'<path fill="currentcolor" fill-rule="evenodd" d="M15.5 8.5h-2.62c-.76 0-1.37.62-1.37 1.38v4.75c0 .76.62 1.38 1.38 1.38h1.75c.76 0 1.38-.62 1.38-1.37v-1.75c0-.76-.62-1.37-1.37-1.37H13V10h2.5zM13 13h1.5v1.5H13zM2.5 6.25V1H1v12h1.5V7.75H8V13h1.5V1H8v5.25z" clip-rule="evenodd"/>'},e));a.displayName="TextHeadingSixIcon",e.exports.default=a}),a("7a8uv",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=void 0;var o=r(i("42omo")),n=r(i("aSNrY"));function r(e){return e&&e.__esModule?e:{default:e}}let a=e=>o.default.createElement(n.default,Object.assign({name:"TextHeadingThreeIcon",dangerouslySetGlyph:'<path fill="currentcolor" fill-rule="evenodd" d="M11.5 8.5h3.13c.76 0 1.38.62 1.38 1.38v4.75c0 .76-.62 1.38-1.37 1.38H11.5v-1.5h3V13h-3v-1.5h3V10h-3zm-9-2.25V1H1v12h1.5V7.75H8V13h1.5V1H8v5.25z" clip-rule="evenodd"/>'},e));a.displayName="TextHeadingThreeIcon",e.exports.default=a}),a("45HPa",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=void 0;var o=r(i("42omo")),n=r(i("aSNrY"));function r(e){return e&&e.__esModule?e:{default:e}}let a=e=>o.default.createElement(n.default,Object.assign({name:"TextHeadingTwoIcon",dangerouslySetGlyph:'<path fill="currentcolor" fill-rule="evenodd" d="M11.5 8.5h3.13c.76 0 1.38.62 1.38 1.38v1.75c0 .76-.62 1.38-1.37 1.38H13v1.5h3V16h-3.75a.75.75 0 0 1-.75-.75v-2.37c0-.76.62-1.37 1.38-1.37h1.62V10h-3zm-9-2.25V1H1v12h1.5V7.75H8V13h1.5V1H8v5.25z" clip-rule="evenodd"/>'},e));a.displayName="TextHeadingTwoIcon",e.exports.default=a}),a("eg9hW",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=void 0;var o=r(i("42omo")),n=r(i("aSNrY"));function r(e){return e&&e.__esModule?e:{default:e}}let a=e=>o.default.createElement(n.default,Object.assign({name:"TextParagraphIcon",dangerouslySetGlyph:'<path fill="currentcolor" fill-rule="evenodd" d="M6.25 2.5a2.75 2.75 0 0 0 0 5.5H8V2.5zm3.25 0V15H8V9.5H6.25a4.25 4.25 0 0 1 0-8.5h5.5a.75.75 0 0 1 .75.75V15H11V2.5z" clip-rule="evenodd"/>'},e));a.displayName="TextParagraphIcon",e.exports.default=a}),a("7MBVC",function(e,t){e.exports.setGapCursorSelection=function(e,t,o){let{state:n}=e;e.dispatch(n.tr.setSelection(new(0,i("adhil").GapCursorSelection)(n.doc.resolve(t),o)))}}),a("i4oLV",function(e,t){e.exports.dedupe=function(e=[],t=e=>e){let o=new Set;return e.forEach(e=>o.add(t(e))),e.filter(e=>{let n=t(e);return!!o.has(n)&&(o.delete(n),!0)})}}),a("eDabt",function(e,t){var o=i("8m4tT");e.exports.transformNodeIntoListItem=function(e,t){let{$to:n,$from:r,to:a,from:s}=e.selection,{orderedList:l,bulletList:d,listItem:c}=e.doc.type.schema.nodes,p=r.start(),u=0===r.depth?0:r.before(),f=p===s?u:s,h=(0,o.findParentNodeOfType)(c)(e.selection),m=(0,o.findParentNodeOfType)([d,l])(e.selection),g=m?.node;if(!m)return e;let T=n.depth-m.depth+1,E=n.depth-m.depth,b=(0,o.findParentNodeOfTypeClosestToPos)(e.doc.resolve(m.pos),[d,l]),S=!1;if(h?.node.content.forEach(e=>{(0,i("irKZA").isListNode)(e)&&(S=!0)}),S||b)return(0,o.safeInsert)(t)(e).scrollIntoView();let y=e.doc.nodeAt(a+E)?.type===c;e.replaceWith(f,y?a+E:y?a+T:a,t).scrollIntoView();let _=n.indexAfter(n.depth-E),C=e.doc.resolve(m.pos+1).posAtIndex(_);var I=e,O=t,k=s;let v=i("5SAOw").Slice.maxOpen(i("5SAOw").Fragment.from(O)),x=Math.min(k+(O.isAtom?O.nodeSize:v.openStart),I.doc.content.size),N=i("ks2lK").TextSelection.findFrom(I.doc.resolve(x),1,!0);N&&I.setSelection(N);let A=e.mapping.map(C);if(A>e.doc.nodeSize)return e;let P=(0,o.findParentNodeOfTypeClosestToPos)(e.doc.resolve(A),[l]),M=g?.attrs.order,R=(0,o.findParentNodeOfTypeClosestToPos)(e.doc.resolve(s-1),[l]),w=R?.node.childCount;return"number"==typeof M&&w&&P&&R?.node!==P?.node&&e.setNodeMarkup(P.pos,l,{...P.node.attrs,order:M+w}),e}}),a("k4fPq",function(t,o){e(t.exports,"default",()=>n);var n=(0,i("cgtv4").defineMessages)({confirmModalDefaultHeading:{id:"fabric.editor.floatingToolbar.confirmModalHeading",defaultMessage:"Are you sure?"},confirmModalOK:{id:"fabric.editor.floatingToolbar.confirmModalOK",defaultMessage:"OK"},confirmModalCancel:{id:"fabric.editor.floatingToolbar.confirmModalCancel",defaultMessage:"Cancel"},confirmModalListUnit:{id:"fabric.editor.floatingToolbar.confirmModalConnectedUnit",defaultMessage:"{name}{amount, plural, =0 {} one { (+1 connected element)} other { (+# connected elements)}}"},confirmDeleteLinkedModalMessage:{id:"fabric.editor.extension.confirmDeleteLinkedModalMessage",defaultMessage:"Deleting {nodeName} will break anything connected to it."},floatingToolbarAriaLabel:{id:"fabric.editor.floatingToolbar.floatingToolbarAriaLabel",defaultMessage:"Floating Toolbar"},floatingToolbarAnnouncer:{id:"fabric.editor.floatingToolbar.floatingToolbarAnnouncer",defaultMessage:"Floating toolbar controls have been opened"},floatingToolbarScrollLeft:{id:"fabric.editor.floatingToolbar.scrollLeft",defaultMessage:"Scroll left"},floatingToolbarScrollRight:{id:"fabric.editor.floatingToolbar.scrollRight",defaultMessage:"Scroll right"}})}),a("1QXSD",function(e,o){var n=i("42omo");let r={name:"18nns55",styles:"display:inline-block;width:100%"},a={name:"nce1h9",styles:"display:flex;flex:1;padding:var(--ds-space-100, 8px)"},s=i("56M4r").default,l=({itemSelected:e,intl:o,showSelected:n})=>n&&e?(0,i("9K4OG").jsx)("span",{"aria-hidden":"true"},(0,i("9K4OG").jsx)(t(i("cvXh8")),{LEGACY_primaryColor:"var(--ds-icon-selected, #1868DB)",LEGACY_size:"small",label:o.formatMessage(i("k4fPq").default.confirmModalOK),spacing:"none"})):(0,i("9K4OG").jsx)("span",{css:a});e.exports.DropdownMenuItem=e=>{let{item:t,hide:o,dispatchCommand:a,editorView:d,showSelected:c,intl:p}=e,u=t.selected,f=(0,n.useMemo)(()=>t.icon?t.icon:(0,i("9K4OG").jsx)(l,{itemSelected:u,showSelected:c,intl:p}),[u,c,p,t.icon]),[h,m]=(0,n.useState)(t.tooltip||""),g=(0,n.useCallback)(()=>{m(""),t.onMouseOut&&a(t.onMouseOut)},[t.onMouseOut,a]),T=(0,n.useCallback)(e=>{e.preventDefault(),t.onMouseDown&&a(t.onMouseDown)},[t.onMouseDown,a]),E=(0,n.useCallback)(()=>{m(t.tooltip||""),t.onMouseOver&&a(t.onMouseOver)},[t.tooltip,t.onMouseOver,a]),b=(0,n.useCallback)(e=>{t.onMouseEnter&&(e.preventDefault(),a(t.onMouseEnter))},[t.onMouseEnter,a]),S=(0,n.useCallback)(e=>{t.onMouseLeave&&(e.preventDefault(),a(t.onMouseLeave))},[t.onMouseLeave,a]),y=(0,n.useCallback)(e=>{t.onFocus&&(e.preventDefault(),a(t.onFocus))},[t.onFocus,a]),_=(0,n.useCallback)(e=>{t.onBlur&&(e.preventDefault(),a(t.onBlur))},[t.onBlur,a]),C=(0,n.useCallback)(()=>{a(t.onClick),o(),d?.hasFocus()||d?.focus()},[a,t.onClick,o,d]),I=(0,n.useRef)(null),O=(0,n.useCallback)(e=>{t.disabled&&(e.stopPropagation(),e.preventDefault())},[t.disabled]);(0,n.useEffect)(()=>{let e=I.current;return e?.addEventListener("click",O),e?.addEventListener("mousedown",O),()=>{e?.removeEventListener("click",O),e?.removeEventListener("mousedown",O)}});let k=(0,i("9K4OG").jsx)(s,{isSelected:u,iconBefore:f,iconAfter:t.elemAfter,onClick:C,"data-testid":t.testId,isDisabled:t.disabled,onMouseDown:T,onMouseOver:E,onMouseEnter:b,onMouseLeave:S,onMouseOut:g,onFocus:y,onBlur:_,role:t.domItemOptions?.type==="item-checkbox"?"menuitemcheckbox":"menuitem","aria-checked":(e=>{let{selected:t,domItemOptions:o}=e;return o?.type==="item-checkbox"?t:void 0})(t)},(0,i("9K4OG").jsx)("span",{ref:I,css:r},t.title));return h?(0,i("9K4OG").jsx)(i("3gadb").default,{content:h},k):k}}),a("4BNmH",function(e,t){let o={name:"1qptm7f",styles:"background:var(--ds-border, #0B120E24);height:1px"};e.exports.DropdownSeparator=()=>(0,i("9K4OG").jsx)("div",{css:o})}),a("cftLn",function(o,n){let r;e(o.exports,"default",()=>l);var a=i("42omo");let s=(0,a.forwardRef)(({ariaAtomic:e="true",ariaLive:o="polite",ariaRelevant:n="all",role:i="status",text:s="",delay:l=0},d)=>{let[c,p]=(0,a.useState)(!1);return(0,a.useEffect)(()=>(clearTimeout(r),p(!1),r=setTimeout(()=>{p(!0)},l),()=>clearTimeout(r)),[s,l]),t(a).createElement("div",{className:"assistive",ref:d,role:i,"aria-atomic":e,"aria-relevant":n,"aria-live":o},c&&t(a).createElement("span",null,s))});var l=(0,a.memo)(s)}),a("1DCSy",function(e,t){let o=(0,i("9K4OG").css)({"input&":{background:"transparent",border:"1px solid var(--ds-border-input, #8C8F97)",borderRadius:"var(--ds-radius-small, 3px)",boxSizing:"content-box",color:"var(--ds-text, #292A2E)",flexGrow:1,fontSize:(0,i("aFUXX").relativeFontSizeToBase16)(13),lineHeight:"20px",padding:"var(--ds-space-100, 8px) var(--ds-space-400, 32px) var(--ds-space-100, 8px) var(--ds-space-100, 8px)",minWidth:"145px","&::-ms-clear":{display:"none"},"&:focus":{outline:"none",backgroundColor:"var(--ds-background-input-pressed, #FFFFFF)",borderColor:"var(--ds-border-focused, #4688EC)",boxShadow:"inset 0 0 0 var(--ds-border-width, 1px) var(--ds-border-focused, #4688EC)"},"&::placeholder":{color:"var(--ds-text-subtlest, #6B6E76)"}}});e.exports.panelTextInput=o,e.exports.panelTextInputWithCustomWidth=e=>(0,i("9K4OG").css)({"input&":{width:`${e}px`}})}),a("1j5Rt",function(e,t){let o=(e,t,o)=>{let n="";switch(t){case"updated":n=o.formatMessage(i("61p3e").default.timeUpdated);break;case"viewed":n=o.formatMessage(i("61p3e").default.timeViewed)}return -7>(0,i("2Hy4R").default)(e,Date.now())?{pageAction:n,dateString:(0,i("dWCFT").default)(e,"MMMM dd, yyyy")}:{pageAction:n,dateString:(0,i("c3Z6w").default)(e,Date.now()),timeSince:o.formatMessage(i("61p3e").default.timeAgo)}};e.exports.transformTimeStamp=(e,t,n)=>t?o(t,"viewed",e):n?o(n,"updated",e):void 0}),a("dv3tk",function(e,t){var o=i("8m4tT");function n(e){let t=[];return e.forEach(e=>{if(e.type===e.type.schema.nodes.codeBlock){let o=t[t.length-1];if(o&&o.type===e.type)return t.push(function(e,t){let o=`${e.textContent}
${t.textContent}`;return e.type.create(e.attrs,e.type.schema.text(o))}(t.pop(),e))}return t.push(e)}),i("5SAOw").Fragment.from(t)}e.exports.transformSliceToJoinAdjacentCodeBlocks=function(e){return e=(0,i("3Ter7").mapSlice)(e,e=>e.isBlock&&!e.isTextblock?e.copy(n(e.content)):e),new(0,i("5SAOw").Slice)(n(e.content),e.openStart,e.openEnd)},e.exports.transformSingleLineCodeBlockToCodeMark=(e,t)=>{if(1===e.content.childCount&&(e.openStart||e.openEnd)){let o=e.content.firstChild;if(o&&o.type===t.nodes.codeBlock&&o.textContent&&-1===o.textContent.indexOf("\n"))return new(0,i("5SAOw").Slice)(i("5SAOw").Fragment.from(t.text(o.textContent,[t.marks.code.create()])),0,0)}return e},e.exports.findCodeBlock=(e,t)=>{let{codeBlock:n}=e.schema.nodes;return(0,o.findSelectedNodeOfType)(n)(t||e.selection)||(0,o.findParentNodeOfType)(n)(t||e.selection)}}),a("8kPu1",function(e,t){e.exports.EXPERIENCE_FAILURE_REASON={TIMEOUT:"timeout",DOM_MUTATION_TARGET_NOT_FOUND:"dom-mutation-target-not-found",DOM_MUTATION_CHECK_ERROR:"dom-mutation-check-error"},e.exports.EXPERIENCE_ABORT_REASON={RESTARTED:"restarted"},e.exports.DEFAULT_EXPERIENCE_SAMPLE_RATE=.001}),a("33Muq",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=void 0;var o=r(i("42omo")),n=r(i("aSNrY"));function r(e){return e&&e.__esModule?e:{default:e}}let a=e=>o.default.createElement(n.default,Object.assign({name:"TextSubscriptIcon",dangerouslySetGlyph:'<path fill="currentcolor" d="m6.26 8 3.69 6H8.19L5.4 9.47 2.78 14H1.05l3.46-6-3.46-6h1.73L5.4 6.53 8.19 2h1.76zm7.49.5h.08a.75.75 0 0 1 .67.75V16H13v-6h-1V8.5z"/>'},e));a.displayName="TextSubscriptIcon",e.exports.default=a}),a("6MAS3",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=void 0;var o=r(i("42omo")),n=r(i("aSNrY"));function r(e){return e&&e.__esModule?e:{default:e}}let a=e=>o.default.createElement(n.default,Object.assign({name:"TextSuperscriptIcon",dangerouslySetGlyph:'<path fill="currentcolor" d="m6.26 8 3.69 6H8.19L5.4 9.47 2.78 14H1.05l3.46-6-3.46-6h1.73L5.4 6.53 8.19 2h1.76zm7.49-8h.08a.75.75 0 0 1 .67.75V7.5H13v-6h-1V0z"/>'},e));a.displayName="TextSuperscriptIcon",e.exports.default=a}),a("lG3Ww",function(e,t){var o=i("eGvGZ");Object.defineProperty(e.exports,"__esModule",{value:!0}),Object.defineProperty(e.exports,"List",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e.exports,"default",{enumerable:!0,get:function(){return n.default}});var n=o(i("7bDv1"))}),a("c6sGd",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.requestAnimationTimeout=e.exports.cancelAnimationTimeout=void 0;var o=i("eNwbr");e.exports.cancelAnimationTimeout=function(e){return(0,o.caf)(e.id)},e.exports.requestAnimationTimeout=function(e,t){Promise.resolve().then(function(){n=Date.now()});var n,r=function(){Date.now()-n>=t?e.call():i.id=(0,o.raf)(r)},i={id:(0,o.raf)(r)};return i}}),a("9hl0i",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.getMaxElementSize=void 0,e.exports.getMaxElementSize=function(){return"undefined"!=typeof window&&window.chrome?0xffff8c:15e5}}),a("3iy7Q",function(e,t){let o=(e,t)=>{let o=e.toLowerCase().replace(" ","-");return{value:t,label:e,border:"var(--ds-border, #091E4224)",message:(0,i("hMewq").default)(i("fWSjz").default,o)}},n=[];i("9GzMM").colorPalette.forEach((e,t)=>{n.push(o(e,t))}),e.exports.mapPaletteColor=o,e.exports.textColorPalette=n}),a("1MjGq",function(e,t){var o=i("lcPXp");function n(e,t=7){return e.reduce((e,o,n)=>{let r=Math.floor(n/t);return e[r]=e[r]||[],e[r].push(o),e},[])}let r=e=>{let t=e.match(/var\(([^,\)]+)(,.*)?/);if(t){let e=t[1].trim(),o=t[2]?t[2].replace(",","").trim():"";return"undefined"==typeof document?o:window.getComputedStyle(document.documentElement).getPropertyValue(e).trim()||o}return""};e.exports.DEFAULT_COLOR_PICKER_COLUMNS=7,e.exports.getColorsPerRowFromPalette=n,e.exports.getSelectedRowAndColumnFromPalette=function(e,t,o=7){var r;let i,a;return r=n(e,o),i=-1,a=-1,r.forEach((e,o)=>{e.forEach(({value:e},n)=>{e===t&&(i=o,a=n)})}),{selectedRowIndex:i,selectedColumnIndex:a}},e.exports.getTokenCSSVariableValue=r,e.exports.getContrastingBackgroundColor=function(e){let t=r(e)||e;return["#FFFFFF","#172B4D"].sort((e,n)=>o.default.difference(n,t)-o.default.difference(e,t))[0]}}),a("ism5g",function(e,o){i("42omo");var n=i("4wH3g");let r={name:"c1gsw5",styles:"display:flex;align-items:center;justify-content:center;height:100%;width:100%"},a=t(n)({__loadable_id__:"RQhdv",name:"ElementBrowserLoader",loader:()=>i("iVgsf").then(e=>e.default),loading:()=>(0,i("9K4OG").jsx)("div",{css:r},(0,i("9K4OG").jsx)(i("9hlns").default,{size:"medium",interactionName:"element-browser-spinner"}))});e.exports.default=a}),a("boahT",function(e,o){var n,r=i("l998X");i("42omo");var a=i("iu6m9");let s={name:"normal",title:i("2UWDO").messages.normal,nodeName:"paragraph",tagName:"p",icon:(0,r.jsx)(t(i("f8c3d")),{label:""}),LEGACY_icon:(0,r.jsx)(i("bFsdJ").Text,{})},l={name:"heading1",title:i("2UWDO").messages.heading1,nodeName:"heading",tagName:"h1",level:1,icon:(0,r.jsx)(t(i("5wdIn")),{label:""}),LEGACY_icon:(0,r.jsx)(i("bFsdJ").H1,{})},d={name:"heading2",title:i("2UWDO").messages.heading2,nodeName:"heading",tagName:"h2",level:2,icon:(0,r.jsx)(t(i("45HPa")),{label:""}),LEGACY_icon:(0,r.jsx)(i("bFsdJ").H2,{})},c={name:"heading3",title:i("2UWDO").messages.heading3,nodeName:"heading",tagName:"h3",level:3,icon:(0,r.jsx)(t(i("7a8uv")),{label:""}),LEGACY_icon:(0,r.jsx)(i("bFsdJ").H3,{})},p={name:"heading4",title:i("2UWDO").messages.heading4,nodeName:"heading",tagName:"h4",level:4,icon:(0,r.jsx)(t(i("aYGvQ")),{label:""}),LEGACY_icon:(0,r.jsx)(i("bFsdJ").H4,{})},u={name:"heading5",title:i("2UWDO").messages.heading5,nodeName:"heading",tagName:"h5",level:5,icon:(0,r.jsx)(t(i("3yaUF")),{label:""}),LEGACY_icon:(0,r.jsx)(i("bFsdJ").H5,{})},f={name:"heading6",title:i("2UWDO").messages.heading6,nodeName:"heading",tagName:"h6",level:6,icon:(0,r.jsx)(t(i("l1461")),{label:""}),LEGACY_icon:(0,r.jsx)(i("bFsdJ").H6,{})},h={name:"blockquote",title:i("2UWDO").messages.blockquote,nodeName:"blockquote",tagName:"blockquote"},m={name:"codeblock",title:i("2UWDO").messages.codeblock,nodeName:"codeBlock"},g={name:"panel",title:i("2UWDO").messages.infoPanel,nodeName:"panel"},T={name:"other",title:i("2UWDO").messages.other,nodeName:""},E=[s,l,d,c,p,u,f];var b=((n=b||{}).normal="normal",n.heading1="heading1",n.heading2="heading2",n.heading3="heading3",n.heading4="heading4",n.heading5="heading5",n.heading6="heading6",n.blockquote="blockquote",n);let S=[h,m,g];E.concat(S);let y=E.reduce((e,t)=>(t.level&&"heading"===t.nodeName&&(e[t.level]=t),e),{}),_=E.reduce((e,t)=>(t.level&&"heading"===t.nodeName&&(e[t.name]=t),e),{});e.exports.NORMAL_TEXT=s,e.exports.HEADING_1=l,e.exports.HEADING_2=d,e.exports.HEADING_3=c,e.exports.HEADING_4=p,e.exports.HEADING_5=u,e.exports.HEADING_6=f,e.exports.BLOCK_QUOTE=h,e.exports.CODE_BLOCK=m,e.exports.PANEL=g,e.exports.OTHER=T,e.exports.TEXT_BLOCK_TYPES=E,e.exports.toolbarBlockTypesWithRank=()=>({normal:{...s,icon:(0,r.jsx)(t(i("f8c3d")),{size:"small",label:""}),toolbarRank:i("4Chin").TEXT_STYLES_MENU_SECTION_RANK[i("cPCP8").NORMAL_TEXT_MENU_ITEM.key],toolbarKey:i("cPCP8").NORMAL_TEXT_MENU_ITEM.key},heading1:{...l,icon:(0,r.jsx)(t(i("5wdIn")),{size:"small",label:""}),toolbarRank:i("4Chin").TEXT_STYLES_MENU_SECTION_RANK[i("cPCP8").HEADING_1_MENU_ITEM.key],toolbarKey:i("cPCP8").HEADING_1_MENU_ITEM.key},heading2:{...d,icon:(0,r.jsx)(t(i("45HPa")),{size:"small",label:""}),toolbarRank:i("4Chin").TEXT_STYLES_MENU_SECTION_RANK[i("cPCP8").HEADING_2_MENU_ITEM.key],toolbarKey:i("cPCP8").HEADING_2_MENU_ITEM.key},heading3:{...c,icon:(0,r.jsx)(t(i("7a8uv")),{size:"small",label:""}),toolbarRank:i("4Chin").TEXT_STYLES_MENU_SECTION_RANK[i("cPCP8").HEADING_3_MENU_ITEM.key],toolbarKey:i("cPCP8").HEADING_3_MENU_ITEM.key},heading4:{...p,icon:(0,r.jsx)(t(i("aYGvQ")),{size:"small",label:""}),toolbarRank:i("4Chin").TEXT_STYLES_MENU_SECTION_RANK[i("cPCP8").HEADING_4_MENU_ITEM.key],toolbarKey:i("cPCP8").HEADING_4_MENU_ITEM.key},heading5:{...u,icon:(0,r.jsx)(t(i("3yaUF")),{size:"small",label:""}),toolbarRank:i("4Chin").TEXT_STYLES_MENU_SECTION_RANK[i("cPCP8").HEADING_5_MENU_ITEM.key],toolbarKey:i("cPCP8").HEADING_5_MENU_ITEM.key},heading6:{...f,icon:(0,r.jsx)(t(i("l1461")),{size:"small",label:""}),toolbarRank:i("4Chin").TEXT_STYLES_MENU_SECTION_RANK[i("cPCP8").HEADING_6_MENU_ITEM.key],toolbarKey:i("cPCP8").HEADING_6_MENU_ITEM.key},blockquote:{...h,icon:(0,r.jsx)(t(i("9RVmI")),{size:"small",label:""}),toolbarRank:i("4Chin").TEXT_STYLES_MENU_SECTION_RANK[i("cPCP8").BLOCK_QUOTE_MENU_ITEM.key],toolbarKey:i("cPCP8").BLOCK_QUOTE_MENU_ITEM.key}}),e.exports.FORMATTING_NODE_TYPES=["heading","blockquote"],e.exports.FORMATTING_MARK_TYPES=["em","code","strike","strong","underline","textColor","subsup","backgroundColor"],e.exports.WRAPPER_BLOCK_TYPES=S,e.exports.getBlockTypesInDropdown=e=>(0,a.editorExperiment)("platform_editor_blockquote_in_text_formatting_menu",!0,{exposure:!0})&&e?[...E,h]:E,e.exports.HEADINGS_BY_LEVEL=y,e.exports.HEADINGS_BY_NAME=_}),a("auDHv",function(e,t){let o=(0,i("cgtv4").defineMessages)({help:{id:"fabric.editor.elementBrowser.help",defaultMessage:"Help"},insert:{id:"fabric.editor.elementbrowser.modal.insert",defaultMessage:"Insert"},close:{id:"fabric.editor.elementbrowser.modal.close",defaultMessage:"Close"},all:{id:"fabric.editor.elementbrowser.categorylist.category-all",defaultMessage:"All"},formatting:{id:"fabric.editor.elementbrowser.categorylist.category-formatting",defaultMessage:"Formatting"},"confluence-content":{id:"fabric.editor.elementbrowser.categorylist.category-confluence-content",defaultMessage:"Confluence content"},media:{id:"fabric.editor.elementbrowser.categorylist.category-media",defaultMessage:"Media"},visuals:{id:"fabric.editor.elementbrowser.categorylist.category-visuals",defaultMessage:"Visuals & images"},navigation:{id:"fabric.editor.elementbrowser.categorylist.category-navigation",defaultMessage:"Navigation"},"external-content":{id:"fabric.editor.elementbrowser.categorylist.category-external-content",defaultMessage:"External content"},communication:{id:"fabric.editor.elementbrowser.categorylist.category-communication",defaultMessage:"Communication"},reporting:{id:"fabric.editor.elementbrowser.categorylist.category-reporting",defaultMessage:"Reporting"},admin:{id:"fabric.editor.elementbrowser.categorylist.category-admin",defaultMessage:"Administration"},development:{id:"fabric.editor.elementbrowser.categorylist.category-development",defaultMessage:"Development"},AI:{id:"fabric.editor.elementbrowser.categorylist.category-ai",defaultMessage:"Rovo"},featuredWhiteboardDescription:{id:"fabric.editor.elementbrowser.featured.whiteboard.description",defaultMessage:"Use a whiteboard to add visuals to your page"},browse:{id:"fabric.editor.elementbrowser.sidebar.heading",defaultMessage:"Browse"}});e.exports.messages=o}),a("lnYUq",function(e,t){var o=i("8m4tT");let n=e=>{let t=0;for(let o=e.depth-1;o>0;o--){let n=e.node(o);(0,i("irKZA").isListNode)(n)&&(t+=1)}return t},r=e=>{let t=e.blockRange(e,i("irKZA").isListItemNode);return t&&0===e.textOffset&&t.end-1===e.pos?i("ks2lK").Selection.near(e.doc.resolve(t.end+1),1).$from:e},a=e=>{let t=e.blockRange(e,i("irKZA").isListItemNode);return t&&0===e.textOffset&&t.start+1===e.pos?i("ks2lK").Selection.near(e.doc.resolve(t.start-1),-1).$to:e};e.exports.numberNestedLists=n,e.exports.getListItemAttributes=e=>{let t=n(e)-1,r=(0,o.findParentNodeClosestToPos)(e,i("irKZA").isListItemNode);return{indentLevel:t,itemIndex:e.index(r?r.depth-1:void 0)}},e.exports.normalizeListItemsSelection=({selection:e,doc:t})=>{if(e.empty)return e;let{$from:o,$to:n}=e;if(e instanceof i("ks2lK").NodeSelection){let e=r(o);return new(0,i("ks2lK").TextSelection)(e,e)}let s=r(o),l=a(n);return new(0,i("ks2lK").TextSelection)(l,s)}}),a("eNwbr",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.raf=e.exports.caf=void 0;var o="undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=o.requestAnimationFrame||o.webkitRequestAnimationFrame||o.mozRequestAnimationFrame||o.oRequestAnimationFrame||o.msRequestAnimationFrame||function(e){return o.setTimeout(e,1e3/60)},r=o.cancelAnimationFrame||o.webkitCancelAnimationFrame||o.mozCancelAnimationFrame||o.oCancelAnimationFrame||o.msCancelAnimationFrame||function(e){o.clearTimeout(e)};e.exports.raf=n,e.exports.caf=r}),a("bFsdJ",function(e,t){var o=i("l998X");i("42omo");let n=({children:e})=>(0,o.jsx)("span",{style:{width:"var(--ds-space-300, 24px)",height:"var(--ds-space-300, 24px)",display:"flex",justifyContent:"flex-start",alignItems:"center"},children:e});e.exports.Text=()=>(0,o.jsx)(n,{children:(0,o.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2 1H14V5H12.5V2.5H8.8125V13.5H10.5V15H5.5V13.5H7.3125V2.5H3.5V5H2V1Z",fill:"currentColor"})})}),e.exports.H1=()=>(0,o.jsx)(n,{children:(0,o.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0 0H1.5V6.25H6V0H7.5V6.25V7.75V14H6V7.75H1.5V14H0V7.75V6.25V0ZM9.85801 12.6959V14H13.9999V12.6959H12.8161V7.83108H11.3138L9.8418 8.86406V10.4342L11.3499 9.31528V12.6959H9.85801Z",fill:"currentColor"})})}),e.exports.H2=()=>(0,o.jsx)(n,{children:(0,o.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd","clip-rule":"evenodd",d:"M1.5 0H0V6.25V7.75V14H1.5V7.75H6V14H7.5V7.75V6.25V0H6V6.25H1.5V0ZM9.2395 12.8296V14H14V12.6553H11.5637V12.573L12.4146 11.875C12.7826 11.5734 13.0772 11.2981 13.2986 11.0491C13.5199 10.8 13.679 10.5635 13.7759 10.3394C13.8755 10.1152 13.9253 9.89111 13.9253 9.66699V9.64624C13.9253 9.28101 13.8285 8.96419 13.6348 8.6958C13.4411 8.42464 13.1685 8.21574 12.8171 8.06909C12.4685 7.91968 12.0562 7.84497 11.5803 7.84497C11.0906 7.84497 10.6617 7.93075 10.2937 8.10229C9.92847 8.27108 9.64347 8.50903 9.43872 8.81616C9.23674 9.12052 9.13574 9.47884 9.13574 9.89111V9.92432H10.7378V9.88696C10.7378 9.74308 10.771 9.6158 10.8374 9.50513C10.9038 9.39445 10.9951 9.30729 11.1113 9.24365C11.2303 9.18001 11.3659 9.14819 11.5181 9.14819C11.6647 9.14819 11.7906 9.1731 11.8958 9.2229C12.0037 9.27271 12.0853 9.34465 12.1406 9.43872C12.1987 9.5328 12.2278 9.64486 12.2278 9.7749V9.79565C12.2278 9.9008 12.1946 10.0115 12.1282 10.1277C12.0645 10.2439 11.9497 10.3878 11.7837 10.5593C11.6177 10.7281 11.3811 10.9467 11.074 11.2151L9.2395 12.8296Z",fill:"currentColor"})})}),e.exports.H3=()=>(0,o.jsx)(n,{children:(0,o.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M1.5 0H0V6.25V7.75V14H1.5V7.75H6V14H7.5V7.75V6.25V0H6V6.25H1.5V0ZM10.219 13.7649C10.5811 13.9216 11.0012 14 11.4794 14C12.0009 14 12.4494 13.9257 12.825 13.7771C13.2005 13.6258 13.4896 13.411 13.6922 13.1327C13.8976 12.8544 14.0002 12.5248 14.0002 12.1438V12.1357C14.0002 11.7575 13.8706 11.4535 13.6112 11.2239C13.3518 10.9942 13.0006 10.8564 12.5575 10.8105V10.7781C12.7709 10.7348 12.9681 10.6565 13.1492 10.543C13.3329 10.4295 13.4801 10.2823 13.5909 10.1013C13.7017 9.91755 13.7571 9.70275 13.7571 9.45688V9.44878C13.7571 9.12186 13.6639 8.83817 13.4774 8.5977C13.291 8.35454 13.0262 8.16541 12.6831 8.03032C12.34 7.89523 11.9347 7.82769 11.4673 7.82769C11.0134 7.82769 10.6162 7.90469 10.2758 8.05869C9.93805 8.20999 9.67057 8.42479 9.47334 8.70308C9.27611 8.98136 9.16533 9.31099 9.14102 9.69194L9.13696 9.75273H10.6851L10.6892 9.71626C10.7027 9.58927 10.7418 9.4785 10.8067 9.38394C10.8715 9.28667 10.9593 9.21237 11.0701 9.16104C11.1836 9.107 11.316 9.07998 11.4673 9.07998C11.6132 9.07998 11.7388 9.10565 11.8442 9.15698C11.9523 9.20562 12.0347 9.27586 12.0914 9.36772C12.1481 9.45959 12.1765 9.56631 12.1765 9.68789V9.696C12.1765 9.81488 12.1427 9.9189 12.0752 10.0081C12.0104 10.0945 11.9158 10.1607 11.7915 10.2066C11.6672 10.2526 11.5159 10.2755 11.3376 10.2755H10.7337V11.4062H11.3376C11.6348 11.4062 11.8618 11.4589 12.0185 11.5643C12.1752 11.667 12.2535 11.8183 12.2535 12.0182V12.0263C12.2535 12.1506 12.2224 12.2614 12.1603 12.3586C12.0982 12.4532 12.009 12.5289 11.8928 12.5856C11.7766 12.6396 11.6375 12.6667 11.4754 12.6667C11.3133 12.6667 11.1728 12.641 11.0539 12.5896C10.935 12.5383 10.8405 12.4681 10.7702 12.3789C10.7 12.2897 10.6567 12.1911 10.6405 12.0831L10.6324 12.0344H8.99512L8.99917 12.0871C9.02889 12.4762 9.14912 12.8139 9.35986 13.1003C9.57061 13.3867 9.857 13.6082 10.219 13.7649Z",fill:"currentColor"})})}),e.exports.H4=()=>(0,o.jsx)(n,{children:(0,o.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M1.5 0H0V6.25V7.75V14H1.5V7.75H6V14H7.5V7.75V6.25V0H6V6.25H1.5V0ZM11.542 13.0117V14H13.2607V13.0117H13.9998V11.6195H13.2607V7.79961H10.7428C10.5852 8.05169 10.4291 8.30378 10.2744 8.55586C10.1226 8.80508 9.97077 9.05573 9.81894 9.30781C9.66999 9.5599 9.52103 9.81628 9.37207 10.077C9.22311 10.3348 9.07559 10.5969 8.92949 10.8633C8.7834 11.1268 8.6373 11.3975 8.49121 11.6754V13.0117H11.542ZM11.5936 11.6883H10.0338V11.6023C10.1226 11.4276 10.2143 11.2543 10.3088 11.0824C10.4033 10.9077 10.4993 10.7344 10.5967 10.5625C10.6969 10.3906 10.7972 10.2202 10.8975 10.0512C10.9977 9.8793 11.098 9.71029 11.1982 9.54414C11.3014 9.37799 11.4045 9.21328 11.5076 9.05H11.5936V11.6883Z",fill:"currentColor"})})}),e.exports.H5=()=>(0,o.jsx)(n,{children:(0,o.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M1.5 0H0V6.25V7.75V14H1.5V7.75H6V14H7.5V7.75V6.25V0H6V6.25H1.5V0ZM10.2808 13.7551C10.6349 13.9184 11.0527 14 11.5342 14C12.0239 14 12.4542 13.9101 12.825 13.7302C13.1957 13.5476 13.4835 13.2917 13.6882 12.9624C13.8958 12.6331 13.9995 12.2499 13.9995 11.8127V11.8044C13.9995 11.4281 13.9165 11.0961 13.7505 10.8083C13.5872 10.5178 13.3617 10.2896 13.074 10.1235C12.7862 9.95752 12.457 9.87451 12.0862 9.87451C11.887 9.87451 11.703 9.90356 11.5342 9.96167C11.3682 10.0198 11.2243 10.1 11.1025 10.2024C10.9808 10.3048 10.884 10.4237 10.812 10.5593H10.729L10.8203 9.1731H13.6177V7.84497H9.45898L9.22241 11.4973H10.7207C10.7511 11.4392 10.7913 11.3839 10.8411 11.3313C10.8909 11.276 10.9462 11.2275 11.0071 11.186C11.079 11.139 11.1579 11.103 11.2437 11.0781C11.3322 11.0505 11.4277 11.0366 11.53 11.0366C11.6933 11.0366 11.8385 11.0712 11.9658 11.1404C12.0931 11.2068 12.1927 11.2995 12.2646 11.4185C12.3366 11.5374 12.3726 11.6772 12.3726 11.8376V11.8459C12.3726 12.0037 12.3366 12.1448 12.2646 12.2693C12.1927 12.391 12.0931 12.4865 11.9658 12.5557C11.8413 12.6248 11.6974 12.6594 11.5342 12.6594C11.3903 12.6594 11.2616 12.6345 11.1482 12.5847C11.0347 12.5349 10.9393 12.4685 10.8618 12.3855C10.7871 12.2997 10.7318 12.2056 10.6958 12.1033L10.6875 12.0784H9.12695L9.1311 12.1531C9.15047 12.4989 9.25838 12.8116 9.45483 13.0911C9.65405 13.3705 9.92936 13.5919 10.2808 13.7551Z",fill:"currentColor"})})}),e.exports.H6=()=>(0,o.jsx)(n,{children:(0,o.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M1.5 0H0V6.25V7.75V14H1.5V7.75H6V14H7.5V7.75V6.25V0H6V6.25H1.5V0ZM10.4615 13.7893C10.7857 13.9298 11.1531 14 11.5638 14C12.0501 14 12.4757 13.9068 12.8404 13.7204C13.2052 13.5339 13.4889 13.28 13.6915 12.9584C13.8968 12.6342 13.9995 12.2681 13.9995 11.8602V11.8521C13.9995 11.4873 13.9225 11.1644 13.7685 10.8834C13.6172 10.5998 13.3997 10.3782 13.116 10.2188C12.835 10.0567 12.4973 9.97563 12.1028 9.97563C11.8272 9.97563 11.5935 10.0135 11.4017 10.0891C11.2099 10.1648 11.0532 10.2634 10.9316 10.385C10.81 10.5065 10.7141 10.6389 10.6438 10.7821H10.5547C10.5548 10.7402 10.5561 10.6984 10.5587 10.6565C10.575 10.3539 10.6195 10.0878 10.6925 9.8581C10.7681 9.62845 10.8762 9.44878 11.0167 9.31909C11.1572 9.1894 11.3328 9.12456 11.5436 9.12456C11.6624 9.12456 11.7678 9.14347 11.8597 9.1813C11.9542 9.21912 12.0353 9.27046 12.1028 9.3353C12.1704 9.40015 12.2204 9.47309 12.2528 9.55415L12.2649 9.58252H13.9266L13.9225 9.5582C13.8685 9.23398 13.7334 8.94219 13.5172 8.68281C13.3011 8.42074 13.0215 8.21269 12.6783 8.05869C12.3379 7.90469 11.9542 7.82768 11.5273 7.82768C11.0032 7.82768 10.5466 7.95062 10.1575 8.19648C9.76846 8.44235 9.4672 8.79629 9.25376 9.2583C9.04032 9.71761 8.93359 10.2674 8.93359 10.9078V10.9159C8.93359 11.3941 8.99303 11.8237 9.11191 12.2046C9.23079 12.5856 9.40371 12.9098 9.63066 13.1773C9.86032 13.4421 10.1373 13.6461 10.4615 13.7893ZM10.7492 11.9047C10.7492 12.056 10.7843 12.1925 10.8546 12.3141C10.9275 12.4356 11.0248 12.5316 11.1464 12.6018C11.2707 12.6694 11.4071 12.7031 11.5557 12.7031C11.707 12.7031 11.8435 12.6694 11.965 12.6018C12.0866 12.5316 12.1839 12.4383 12.2568 12.3222C12.3298 12.206 12.3663 12.075 12.3663 11.9291V11.9209C12.3663 11.7696 12.3311 11.6359 12.2609 11.5197C12.1906 11.4035 12.0947 11.3117 11.9731 11.2441C11.8543 11.1766 11.7165 11.1428 11.5598 11.1428C11.4112 11.1428 11.2747 11.1752 11.1504 11.2401C11.0289 11.3022 10.9316 11.39 10.8586 11.5035C10.7857 11.617 10.7492 11.748 10.7492 11.8966V11.9047Z",fill:"currentColor"})})})}),o.rlb("aYx1O");
//# sourceMappingURL=FullPageEditorComponent.b36aab90.js.map
